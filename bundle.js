var z2=Object.defineProperty;var K2=(t,e,n)=>e in t?z2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var na=(t,e,n)=>(K2(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Im(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const qt={},tu=[],Zr=()=>{},G2=()=>!1,oh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),$w=t=>t.startsWith("onUpdate:"),wn=Object.assign,Lw=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},q2=Object.prototype.hasOwnProperty,Ot=(t,e)=>q2.call(t,e),je=Array.isArray,nu=t=>qu(t)==="[object Map]",ol=t=>qu(t)==="[object Set]",Q1=t=>qu(t)==="[object Date]",X2=t=>qu(t)==="[object RegExp]",rt=t=>typeof t=="function",bn=t=>typeof t=="string",Fo=t=>typeof t=="symbol",tn=t=>t!==null&&typeof t=="object",Uw=t=>(tn(t)||rt(t))&&rt(t.then)&&rt(t.catch),aA=Object.prototype.toString,qu=t=>aA.call(t),Q2=t=>qu(t).slice(8,-1),lA=t=>qu(t)==="[object Object]",Fw=t=>bn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ru=Im(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Am=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},J2=/-(\w)/g,jr=Am(t=>t.replace(J2,(e,n)=>n?n.toUpperCase():"")),Z2=/\B([A-Z])/g,ci=Am(t=>t.replace(Z2,"-$1").toLowerCase()),ah=Am(t=>t.charAt(0).toUpperCase()+t.slice(1)),zc=Am(t=>t?`on${ah(t)}`:""),qi=(t,e)=>!Object.is(t,e),iu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},cp=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},bd=t=>{const e=parseFloat(t);return isNaN(e)?t:e},dp=t=>{const e=bn(t)?Number(t):NaN;return isNaN(e)?t:e};let J1;const uA=()=>J1||(J1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),e$="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",t$=Im(e$);function Gn(t){if(je(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=bn(r)?s$(r):Gn(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(bn(t)||tn(t))return t}const n$=/;(?![^(]*\))/g,r$=/:([^]+)/,i$=/\/\*[^]*?\*\//g;function s$(t){const e={};return t.replace(i$,"").split(n$).forEach(n=>{if(n){const r=n.split(r$);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Me(t){let e="";if(bn(t))e=t;else if(je(t))for(let n=0;n<t.length;n++){const r=Me(t[n]);r&&(e+=r+" ")}else if(tn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function xn(t){if(!t)return null;let{class:e,style:n}=t;return e&&!bn(e)&&(t.class=Me(e)),n&&(t.style=Gn(n)),t}const o$="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a$=Im(o$);function cA(t){return!!t||t===""}function l$(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Vo(t[r],e[r]);return n}function Vo(t,e){if(t===e)return!0;let n=Q1(t),r=Q1(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Fo(t),r=Fo(e),n||r)return t===e;if(n=je(t),r=je(e),n||r)return n&&r?l$(t,e):!1;if(n=tn(t),r=tn(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Vo(t[o],e[o]))return!1}}return String(t)===String(e)}function km(t,e){return t.findIndex(n=>Vo(n,e))}const Je=t=>bn(t)?t:t==null?"":je(t)||tn(t)&&(t.toString===aA||!rt(t.toString))?JSON.stringify(t,dA,2):String(t),dA=(t,e)=>e&&e.__v_isRef?dA(t,e.value):nu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[ev(r,s)+" =>"]=i,n),{})}:ol(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ev(n))}:Fo(e)?ev(e):tn(e)&&!je(e)&&!lA(e)?String(e):e,ev=(t,e="")=>{var n;return Fo(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let li;class Vw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=li,!e&&li&&(this.index=(li.scopes||(li.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=li;try{return li=this,e()}finally{li=n}}}on(){li=this}off(){li=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Dm(t){return new Vw(t)}function hA(t,e=li){e&&e.active&&e.effects.push(t)}function xm(){return li}function Bw(t){li&&li.cleanups.push(t)}let Ea;class bu{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,hA(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,al();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(u$(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ll()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=xo,n=Ea;try{return xo=!0,Ea=this,this._runnings++,Z1(this),this.fn()}finally{eT(this),this._runnings--,Ea=n,xo=e}}stop(){var e;this.active&&(Z1(this),eT(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function u$(t){return t.value}function Z1(t){t._trackId++,t._depsLength=0}function eT(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)fA(t.deps[e],t);t.deps.length=t._depsLength}}function fA(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}function c$(t,e){t.effect instanceof bu&&(t=t.effect.fn);const n=new bu(t,Zr,()=>{n.dirty&&n.run()});e&&(wn(n,e),e.scope&&hA(n,e.scope)),(!e||!e.lazy)&&n.run();const r=n.run.bind(n);return r.effect=n,r}function d$(t){t.effect.stop()}let xo=!0,Py=0;const pA=[];function al(){pA.push(xo),xo=!1}function ll(){const t=pA.pop();xo=t===void 0?!0:t}function jw(){Py++}function Hw(){for(Py--;!Py&&Ry.length;)Ry.shift()()}function mA(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&fA(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Ry=[];function gA(t,e,n){jw();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Ry.push(r.scheduler)))}Hw()}const vA=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},hp=new WeakMap,Sa=Symbol(""),Oy=Symbol("");function ii(t,e,n){if(xo&&Ea){let r=hp.get(t);r||hp.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=vA(()=>r.delete(n))),mA(Ea,i)}}function Us(t,e,n,r,i,s){const o=hp.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&je(t)){const l=Number(r);o.forEach((u,c)=>{(c==="length"||!Fo(c)&&c>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":je(t)?Fw(n)&&a.push(o.get("length")):(a.push(o.get(Sa)),nu(t)&&a.push(o.get(Oy)));break;case"delete":je(t)||(a.push(o.get(Sa)),nu(t)&&a.push(o.get(Oy)));break;case"set":nu(t)&&a.push(o.get(Sa));break}jw();for(const l of a)l&&gA(l,4);Hw()}function h$(t,e){var n;return(n=hp.get(t))==null?void 0:n.get(e)}const f$=Im("__proto__,__v_isRef,__isVue"),yA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Fo)),tT=p$();function p$(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=yt(this);for(let s=0,o=this.length;s<o;s++)ii(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(yt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){al(),jw();const r=yt(this)[e].apply(this,n);return Hw(),ll(),r}}),t}function m$(t){const e=yt(this);return ii(e,"has",t),e.hasOwnProperty(t)}class wA{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?CA:SA:s?EA:TA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=je(e);if(!i){if(o&&Ot(tT,n))return Reflect.get(tT,n,r);if(n==="hasOwnProperty")return m$}const a=Reflect.get(e,n,r);return(Fo(n)?yA.has(n):f$(n))||(i||ii(e,"get",n),s)?a:an(a)?o&&Fw(n)?a:a.value:tn(a)?i?zw(a):On(a):a}}class bA extends wA{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=$a(s);if(!_d(r)&&!$a(r)&&(s=yt(s),r=yt(r)),!je(e)&&an(s)&&!an(r))return l?!1:(s.value=r,!0)}const o=je(e)&&Fw(n)?Number(n)<e.length:Ot(e,n),a=Reflect.set(e,n,r,i);return e===yt(i)&&(o?qi(r,s)&&Us(e,"set",n,r):Us(e,"add",n,r)),a}deleteProperty(e,n){const r=Ot(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Us(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Fo(n)||!yA.has(n))&&ii(e,"has",n),r}ownKeys(e){return ii(e,"iterate",je(e)?"length":Sa),Reflect.ownKeys(e)}}class _A extends wA{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const g$=new bA,v$=new _A,y$=new bA(!0),w$=new _A(!0),Ww=t=>t,Pm=t=>Reflect.getPrototypeOf(t);function Kh(t,e,n=!1,r=!1){t=t.__v_raw;const i=yt(t),s=yt(e);n||(qi(e,s)&&ii(i,"get",e),ii(i,"get",s));const{has:o}=Pm(i),a=r?Ww:n?Gw:Td;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Gh(t,e=!1){const n=this.__v_raw,r=yt(n),i=yt(t);return e||(qi(t,i)&&ii(r,"has",t),ii(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function qh(t,e=!1){return t=t.__v_raw,!e&&ii(yt(t),"iterate",Sa),Reflect.get(t,"size",t)}function nT(t){t=yt(t);const e=yt(this);return Pm(e).has.call(e,t)||(e.add(t),Us(e,"add",t,t)),this}function rT(t,e){e=yt(e);const n=yt(this),{has:r,get:i}=Pm(n);let s=r.call(n,t);s||(t=yt(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?qi(e,o)&&Us(n,"set",t,e):Us(n,"add",t,e),this}function iT(t){const e=yt(this),{has:n,get:r}=Pm(e);let i=n.call(e,t);i||(t=yt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Us(e,"delete",t,void 0),s}function sT(){const t=yt(this),e=t.size!==0,n=t.clear();return e&&Us(t,"clear",void 0,void 0),n}function Xh(t,e){return function(r,i){const s=this,o=s.__v_raw,a=yt(o),l=e?Ww:t?Gw:Td;return!t&&ii(a,"iterate",Sa),o.forEach((u,c)=>r.call(i,l(u),l(c),s))}}function Qh(t,e,n){return function(...r){const i=this.__v_raw,s=yt(i),o=nu(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...r),c=n?Ww:e?Gw:Td;return!e&&ii(s,"iterate",l?Oy:Sa),{next(){const{value:d,done:h}=u.next();return h?{value:d,done:h}:{value:a?[c(d[0]),c(d[1])]:c(d),done:h}},[Symbol.iterator](){return this}}}}function io(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function b$(){const t={get(s){return Kh(this,s)},get size(){return qh(this)},has:Gh,add:nT,set:rT,delete:iT,clear:sT,forEach:Xh(!1,!1)},e={get(s){return Kh(this,s,!1,!0)},get size(){return qh(this)},has:Gh,add:nT,set:rT,delete:iT,clear:sT,forEach:Xh(!1,!0)},n={get(s){return Kh(this,s,!0)},get size(){return qh(this,!0)},has(s){return Gh.call(this,s,!0)},add:io("add"),set:io("set"),delete:io("delete"),clear:io("clear"),forEach:Xh(!0,!1)},r={get(s){return Kh(this,s,!0,!0)},get size(){return qh(this,!0)},has(s){return Gh.call(this,s,!0)},add:io("add"),set:io("set"),delete:io("delete"),clear:io("clear"),forEach:Xh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Qh(s,!1,!1),n[s]=Qh(s,!0,!1),e[s]=Qh(s,!1,!0),r[s]=Qh(s,!0,!0)}),[t,n,e,r]}const[_$,T$,E$,S$]=b$();function Rm(t,e){const n=e?t?S$:E$:t?T$:_$;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Ot(n,i)&&i in r?n:r,i,s)}const C$={get:Rm(!1,!1)},I$={get:Rm(!1,!0)},A$={get:Rm(!0,!1)},k$={get:Rm(!0,!0)},TA=new WeakMap,EA=new WeakMap,SA=new WeakMap,CA=new WeakMap;function D$(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function x$(t){return t.__v_skip||!Object.isExtensible(t)?0:D$(Q2(t))}function On(t){return $a(t)?t:Om(t,!1,g$,C$,TA)}function Yw(t){return Om(t,!1,y$,I$,EA)}function zw(t){return Om(t,!0,v$,A$,SA)}function P$(t){return Om(t,!0,w$,k$,CA)}function Om(t,e,n,r,i){if(!tn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=x$(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function fs(t){return $a(t)?fs(t.__v_raw):!!(t&&t.__v_isReactive)}function $a(t){return!!(t&&t.__v_isReadonly)}function _d(t){return!!(t&&t.__v_isShallow)}function Kw(t){return fs(t)||$a(t)}function yt(t){const e=t&&t.__v_raw;return e?yt(e):t}function lh(t){return Object.isExtensible(t)&&cp(t,"__v_skip",!0),t}const Td=t=>tn(t)?On(t):t,Gw=t=>tn(t)?zw(t):t;class IA{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new bu(()=>e(this._value),()=>su(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=yt(this);return(!e._cacheable||e.effect.dirty)&&qi(e._value,e._value=e.effect.run())&&su(e,4),qw(e),e.effect._dirtyLevel>=2&&su(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function R$(t,e,n=!1){let r,i;const s=rt(t);return s?(r=t,i=Zr):(r=t.get,i=t.set),new IA(r,i,s||!i,n)}function qw(t){var e;xo&&Ea&&(t=yt(t),mA(Ea,(e=t.dep)!=null?e:t.dep=vA(()=>t.dep=void 0,t instanceof IA?t:void 0)))}function su(t,e=4,n){t=yt(t);const r=t.dep;r&&gA(r,e)}function an(t){return!!(t&&t.__v_isRef===!0)}function re(t){return kA(t,!1)}function AA(t){return kA(t,!0)}function kA(t,e){return an(t)?t:new O$(t,e)}class O${constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:yt(e),this._value=n?e:Td(e)}get value(){return qw(this),this._value}set value(e){const n=this.__v_isShallow||_d(e)||$a(e);e=n?e:yt(e),qi(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Td(e),su(this,4))}}function N$(t){su(t,4)}function k(t){return an(t)?t.value:t}function M$(t){return rt(t)?t():k(t)}const $$={get:(t,e,n)=>k(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return an(i)&&!an(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Xw(t){return fs(t)?t:new Proxy(t,$$)}class L${constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>qw(this),()=>su(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function DA(t){return new L$(t)}function xA(t){const e=je(t)?new Array(t.length):{};for(const n in t)e[n]=PA(t,n);return e}class U${constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return h$(yt(this._object),this._key)}}class F${constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function _u(t,e,n){return an(t)?t:rt(t)?new F$(t):tn(t)&&arguments.length>1?PA(t,e,n):re(t)}function PA(t,e,n){const r=t[e];return an(r)?r:new U$(t,e,n)}const V$={GET:"get",HAS:"has",ITERATE:"iterate"},B$={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function j$(t,e){}const H$={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},W$={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function Fs(t,e,n,r){try{return r?t(...r):t()}catch(i){ul(i,e,n)}}function pi(t,e,n,r){if(rt(t)){const s=Fs(t,e,n,r);return s&&Uw(s)&&s.catch(o=>{ul(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(pi(t[s],e,n,r));return i}function ul(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Fs(l,null,10,[t,o,a]);return}}Y$(t,n,i,r)}function Y$(t,e,n,r=!0){console.error(t)}let Ed=!1,Ny=!1;const Cr=[];let rs=0;const ou=[];let mo=null,pa=0;const RA=Promise.resolve();let Qw=null;function Wn(t){const e=Qw||RA;return t?e.then(this?t.bind(this):t):e}function z$(t){let e=rs+1,n=Cr.length;for(;e<n;){const r=e+n>>>1,i=Cr[r],s=Sd(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function Nm(t){(!Cr.length||!Cr.includes(t,Ed&&t.allowRecurse?rs+1:rs))&&(t.id==null?Cr.push(t):Cr.splice(z$(t.id),0,t),OA())}function OA(){!Ed&&!Ny&&(Ny=!0,Qw=RA.then(NA))}function K$(t){const e=Cr.indexOf(t);e>rs&&Cr.splice(e,1)}function fp(t){je(t)?ou.push(...t):(!mo||!mo.includes(t,t.allowRecurse?pa+1:pa))&&ou.push(t),OA()}function oT(t,e,n=Ed?rs+1:0){for(;n<Cr.length;n++){const r=Cr[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Cr.splice(n,1),n--,r()}}}function pp(t){if(ou.length){const e=[...new Set(ou)].sort((n,r)=>Sd(n)-Sd(r));if(ou.length=0,mo){mo.push(...e);return}for(mo=e,pa=0;pa<mo.length;pa++)mo[pa]();mo=null,pa=0}}const Sd=t=>t.id==null?1/0:t.id,G$=(t,e)=>{const n=Sd(t)-Sd(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function NA(t){Ny=!1,Ed=!0,Cr.sort(G$);try{for(rs=0;rs<Cr.length;rs++){const e=Cr[rs];e&&e.active!==!1&&Fs(e,null,14)}}finally{rs=0,Cr.length=0,pp(),Ed=!1,Qw=null,(Cr.length||ou.length)&&NA()}}let Nl,Jh=[];function MA(t,e){var n,r;Nl=t,Nl?(Nl.enabled=!0,Jh.forEach(({event:i,args:s})=>Nl.emit(i,...s)),Jh=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{MA(s,e)}),setTimeout(()=>{Nl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Jh=[])},3e3)):Jh=[]}function q$(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||qt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:h}=r[c]||qt;h&&(i=n.map(f=>bn(f)?f.trim():f)),d&&(i=n.map(bd))}let a,l=r[a=zc(e)]||r[a=zc(jr(e))];!l&&s&&(l=r[a=zc(ci(e))]),l&&pi(l,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,pi(u,t,6,i)}}function $A(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!rt(t)){const l=u=>{const c=$A(u,e,!0);c&&(a=!0,wn(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(tn(t)&&r.set(t,null),null):(je(s)?s.forEach(l=>o[l]=null):wn(o,s),tn(t)&&r.set(t,o),o)}function Mm(t,e){return!t||!oh(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ot(t,e[0].toLowerCase()+e.slice(1))||Ot(t,ci(e))||Ot(t,e))}let Hn=null,$m=null;function Cd(t){const e=Hn;return Hn=t,$m=t&&t.type.__scopeId||null,e}function Jw(t){$m=t}function Zw(){$m=null}const X$=t=>fe;function fe(t,e=Hn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&jy(-1);const s=Cd(e);let o;try{o=t(...i)}finally{Cd(s),r._d&&jy(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Vf(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:d,data:h,setupState:f,ctx:p,inheritAttrs:m}=t;let v,b;const g=Cd(t);try{if(n.shapeFlag&4){const y=i||r,w=y;v=ui(c.call(w,y,d,s,f,h,p)),b=l}else{const y=e;v=ui(y.length>1?y(s,{attrs:l,slots:a,emit:u}):y(s,null)),b=e.props?l:J$(l)}}catch(y){qc.length=0,ul(y,t,1),v=ee(Dr)}let _=v;if(b&&m!==!1){const y=Object.keys(b),{shapeFlag:w}=_;y.length&&w&7&&(o&&y.some($w)&&(b=Z$(b,o)),_=bs(_,b))}return n.dirs&&(_=bs(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),v=_,Cd(g),v}function Q$(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Bo(i)){if(i.type!==Dr||i.children==="v-if"){if(n)return;n=i}}else return}return n}const J$=t=>{let e;for(const n in t)(n==="class"||n==="style"||oh(n))&&((e||(e={}))[n]=t[n]);return e},Z$=(t,e)=>{const n={};for(const r in t)(!$w(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function eL(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?aT(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const h=c[d];if(o[h]!==r[h]&&!Mm(u,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?aT(r,o,u):!0:!!o;return!1}function aT(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Mm(n,s))return!0}return!1}function eb({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const tb="components",tL="directives";function Zs(t,e){return nb(tb,t,!0,e)||t}const LA=Symbol.for("v-ndc");function uh(t){return bn(t)?nb(tb,t,!1)||t:t||LA}function nL(t){return nb(tL,t)}function nb(t,e,n=!0,r=!1){const i=Hn||zn;if(i){const s=i.type;if(t===tb){const a=Ky(s,!1);if(a&&(a===e||a===jr(e)||a===ah(jr(e))))return s}const o=lT(i[t]||s[t],e)||lT(i.appContext[t],e);return!o&&r?s:o}}function lT(t,e){return t&&(t[e]||t[jr(e)]||t[ah(jr(e))])}const UA=t=>t.__isSuspense;let My=0;const rL={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,u){if(t==null)sL(e,n,r,i,s,o,a,l,u);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}oL(t,e,n,r,i,o,a,l,u)}},hydrate:aL,create:rb,normalize:lL},iL=rL;function Id(t,e){const n=t.props&&t.props[e];rt(n)&&n()}function sL(t,e,n,r,i,s,o,a,l){const{p:u,o:{createElement:c}}=l,d=c("div"),h=t.suspense=rb(t,i,r,e,d,n,s,o,a,l);u(null,h.pendingBranch=t.ssContent,d,null,r,h,s,o),h.deps>0?(Id(t,"onPending"),Id(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,s,o),au(h,t.ssFallback)):h.resolve(!1,!0)}function oL(t,e,n,r,i,s,o,a,{p:l,um:u,o:{createElement:c}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const h=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:v,isHydrating:b}=d;if(m)d.pendingBranch=h,Fi(h,m)?(l(m,h,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0?d.resolve():v&&(b||(l(p,f,n,r,i,null,s,o,a),au(d,f)))):(d.pendingId=My++,b?(d.isHydrating=!1,d.activeBranch=m):u(m,i,d),d.deps=0,d.effects.length=0,d.hiddenContainer=c("div"),v?(l(null,h,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0?d.resolve():(l(p,f,n,r,i,null,s,o,a),au(d,f))):p&&Fi(h,p)?(l(p,h,n,r,i,d,s,o,a),d.resolve(!0)):(l(null,h,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0&&d.resolve()));else if(p&&Fi(h,p))l(p,h,n,r,i,d,s,o,a),au(d,h);else if(Id(e,"onPending"),d.pendingBranch=h,h.shapeFlag&512?d.pendingId=h.component.suspenseId:d.pendingId=My++,l(null,h,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0)d.resolve();else{const{timeout:g,pendingId:_}=d;g>0?setTimeout(()=>{d.pendingId===_&&d.fallback(f)},g):g===0&&d.fallback(f)}}function rb(t,e,n,r,i,s,o,a,l,u,c=!1){const{p:d,m:h,um:f,n:p,o:{parentNode:m,remove:v}}=u;let b;const g=uL(t);g&&e!=null&&e.pendingBranch&&(b=e.pendingId,e.deps++);const _=t.props?dp(t.props.timeout):void 0,y=s,w={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:My++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!c,isHydrating:c,isUnmounted:!1,effects:[],resolve(T=!1,P=!1){const{vnode:A,activeBranch:I,pendingBranch:E,pendingId:U,effects:F,parentComponent:N,container:D}=w;let O=!1;w.isHydrating?w.isHydrating=!1:T||(O=I&&E.transition&&E.transition.mode==="out-in",O&&(I.transition.afterLeave=()=>{U===w.pendingId&&(h(E,D,s===y?p(I):s,0),fp(F))}),I&&(m(I.el)!==w.hiddenContainer&&(s=p(I)),f(I,N,w,!0)),O||h(E,D,s,0)),au(w,E),w.pendingBranch=null,w.isInFallback=!1;let R=w.parent,B=!1;for(;R;){if(R.pendingBranch){R.effects.push(...F),B=!0;break}R=R.parent}!B&&!O&&fp(F),w.effects=[],g&&e&&e.pendingBranch&&b===e.pendingId&&(e.deps--,e.deps===0&&!P&&e.resolve()),Id(A,"onResolve")},fallback(T){if(!w.pendingBranch)return;const{vnode:P,activeBranch:A,parentComponent:I,container:E,namespace:U}=w;Id(P,"onFallback");const F=p(A),N=()=>{w.isInFallback&&(d(null,T,E,F,I,null,U,a,l),au(w,T))},D=T.transition&&T.transition.mode==="out-in";D&&(A.transition.afterLeave=N),w.isInFallback=!0,f(A,I,null,!0),D||N()},move(T,P,A){w.activeBranch&&h(w.activeBranch,T,P,A),w.container=T},next(){return w.activeBranch&&p(w.activeBranch)},registerDep(T,P){const A=!!w.pendingBranch;A&&w.deps++;const I=T.vnode.el;T.asyncDep.catch(E=>{ul(E,T,0)}).then(E=>{if(T.isUnmounted||w.isUnmounted||w.pendingId!==T.suspenseId)return;T.asyncResolved=!0;const{vnode:U}=T;Yy(T,E,!1),I&&(U.el=I);const F=!I&&T.subTree.el;P(T,U,m(I||T.subTree.el),I?null:p(T.subTree),w,o,l),F&&v(F),eb(T,U.el),A&&--w.deps===0&&w.resolve()})},unmount(T,P){w.isUnmounted=!0,w.activeBranch&&f(w.activeBranch,n,T,P),w.pendingBranch&&f(w.pendingBranch,n,T,P)}};return w}function aL(t,e,n,r,i,s,o,a,l){const u=e.suspense=rb(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),c=l(t,u.pendingBranch=e.ssContent,n,u,s,o);return u.deps===0&&u.resolve(!1,!0),c}function lL(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=uT(r?n.default:n),t.ssFallback=r?uT(n.fallback):ee(Dr)}function uT(t){let e;if(rt(t)){const n=Fa&&t._c;n&&(t._d=!1,x()),t=t(),n&&(t._d=!0,e=ei,wk())}return je(t)&&(t=Q$(t)),t=ui(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function FA(t,e){e&&e.pendingBranch?je(t)?e.effects.push(...t):e.effects.push(t):fp(t)}function au(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,eb(r,i))}function uL(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}const VA=Symbol.for("v-scx"),BA=()=>Hr(VA);function jA(t,e){return ch(t,null,e)}function HA(t,e){return ch(t,null,{flush:"post"})}function WA(t,e){return ch(t,null,{flush:"sync"})}const Zh={};function St(t,e,n){return ch(t,e,n)}function ch(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=qt){if(e&&s){const T=e;e=(...P)=>{T(...P),w()}}const l=zn,u=T=>r===!0?T:va(T,r===!1?1:void 0);let c,d=!1,h=!1;if(an(t)?(c=()=>t.value,d=_d(t)):fs(t)?(c=()=>u(t),d=!0):je(t)?(h=!0,d=t.some(T=>fs(T)||_d(T)),c=()=>t.map(T=>{if(an(T))return T.value;if(fs(T))return u(T);if(rt(T))return Fs(T,l,2)})):rt(t)?e?c=()=>Fs(t,l,2):c=()=>(f&&f(),pi(t,l,3,[p])):c=Zr,e&&r){const T=c;c=()=>va(T())}let f,p=T=>{f=_.onStop=()=>{Fs(T,l,4),f=_.onStop=void 0}},m;if(fh)if(p=Zr,e?n&&pi(e,l,3,[c(),h?[]:void 0,p]):c(),i==="sync"){const T=BA();m=T.__watcherHandles||(T.__watcherHandles=[])}else return Zr;let v=h?new Array(t.length).fill(Zh):Zh;const b=()=>{if(!(!_.active||!_.dirty))if(e){const T=_.run();(r||d||(h?T.some((P,A)=>qi(P,v[A])):qi(T,v)))&&(f&&f(),pi(e,l,3,[T,v===Zh?void 0:h&&v[0]===Zh?[]:v,p]),v=T)}else _.run()};b.allowRecurse=!!e;let g;i==="sync"?g=b:i==="post"?g=()=>dr(b,l&&l.suspense):(b.pre=!0,l&&(b.id=l.uid),g=()=>Nm(b));const _=new bu(c,Zr,g),y=xm(),w=()=>{_.stop(),y&&Lw(y.effects,_)};return e?n?b():v=_.run():i==="post"?dr(_.run.bind(_),l&&l.suspense):_.run(),m&&m.push(w),w}function cL(t,e,n){const r=this.proxy,i=bn(t)?t.includes(".")?YA(r,t):()=>r[t]:t.bind(r,r);let s;rt(e)?s=e:(s=e.handler,n=e);const o=Va(this),a=ch(i,s.bind(r),n);return o(),a}function YA(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function va(t,e,n=0,r){if(!tn(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),an(t))va(t.value,e,n,r);else if(je(t))for(let i=0;i<t.length;i++)va(t[i],e,n,r);else if(ol(t)||nu(t))t.forEach(i=>{va(i,e,n,r)});else if(lA(t))for(const i in t)va(t[i],e,n,r);return t}function ps(t,e){if(Hn===null)return t;const n=Bm(Hn)||Hn.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=qt]=e[i];s&&(rt(s)&&(s={mounted:s,updated:s}),s.deep&&va(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function ts(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(al(),pi(l,n,8,[t.el,a,t,e]),ll())}}const go=Symbol("_leaveCb"),ef=Symbol("_enterCb");function ib(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return zt(()=>{t.isMounted=!0}),hh(()=>{t.isUnmounting=!0}),t}const _i=[Function,Array],sb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_i,onEnter:_i,onAfterEnter:_i,onEnterCancelled:_i,onBeforeLeave:_i,onLeave:_i,onAfterLeave:_i,onLeaveCancelled:_i,onBeforeAppear:_i,onAppear:_i,onAfterAppear:_i,onAppearCancelled:_i},dL={name:"BaseTransition",props:sb,setup(t,{slots:e}){const n=Ss(),r=ib();return()=>{const i=e.default&&Lm(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const h of i)if(h.type!==Dr){s=h;break}}const o=yt(t),{mode:a}=o;if(r.isLeaving)return tv(s);const l=cT(s);if(!l)return tv(s);const u=Tu(l,o,r,n);La(l,u);const c=n.subTree,d=c&&cT(c);if(d&&d.type!==Dr&&!Fi(l,d)){const h=Tu(d,o,r,n);if(La(d,h),a==="out-in")return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},tv(s);a==="in-out"&&l.type!==Dr&&(h.delayLeave=(f,p,m)=>{const v=KA(r,d);v[String(d.key)]=d,f[go]=()=>{p(),f[go]=void 0,delete u.delayedLeave},u.delayedLeave=m})}return s}}},zA=dL;function KA(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Tu(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:h,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:v,onAfterAppear:b,onAppearCancelled:g}=e,_=String(t.key),y=KA(n,t),w=(A,I)=>{A&&pi(A,r,9,I)},T=(A,I)=>{const E=I[1];w(A,I),je(A)?A.every(U=>U.length<=1)&&E():A.length<=1&&E()},P={mode:s,persisted:o,beforeEnter(A){let I=a;if(!n.isMounted)if(i)I=m||a;else return;A[go]&&A[go](!0);const E=y[_];E&&Fi(t,E)&&E.el[go]&&E.el[go](),w(I,[A])},enter(A){let I=l,E=u,U=c;if(!n.isMounted)if(i)I=v||l,E=b||u,U=g||c;else return;let F=!1;const N=A[ef]=D=>{F||(F=!0,D?w(U,[A]):w(E,[A]),P.delayedLeave&&P.delayedLeave(),A[ef]=void 0)};I?T(I,[A,N]):N()},leave(A,I){const E=String(t.key);if(A[ef]&&A[ef](!0),n.isUnmounting)return I();w(d,[A]);let U=!1;const F=A[go]=N=>{U||(U=!0,I(),N?w(p,[A]):w(f,[A]),A[go]=void 0,y[E]===t&&delete y[E])};y[E]=t,h?T(h,[A,F]):F()},clone(A){return Tu(A,e,n,r)}};return P}function tv(t){if(dh(t))return t=bs(t),t.children=null,t}function cT(t){return dh(t)?t.children?t.children[0]:void 0:t}function La(t,e){t.shapeFlag&6&&t.component?La(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Lm(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Ae?(o.patchFlag&128&&i++,r=r.concat(Lm(o.children,e,a))):(e||o.type!==Dr)&&r.push(a!=null?bs(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ee(t,e){return rt(t)?wn({name:t.name},e,{setup:t}):t}const Ca=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function hL(t){rt(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,timeout:s,suspensible:o=!0,onError:a}=t;let l=null,u,c=0;const d=()=>(c++,l=null,h()),h=()=>{let f;return l||(f=l=e().catch(p=>{if(p=p instanceof Error?p:new Error(String(p)),a)return new Promise((m,v)=>{a(p,()=>m(d()),()=>v(p),c+1)});throw p}).then(p=>f!==l&&l?l:(p&&(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),u=p,p)))};return Ee({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return u},setup(){const f=zn;if(u)return()=>nv(u,f);const p=g=>{l=null,ul(g,f,13,!r)};if(o&&f.suspense||fh)return h().then(g=>()=>nv(g,f)).catch(g=>(p(g),()=>r?ee(r,{error:g}):null));const m=re(!1),v=re(),b=re(!!i);return i&&setTimeout(()=>{b.value=!1},i),s!=null&&setTimeout(()=>{if(!m.value&&!v.value){const g=new Error(`Async component timed out after ${s}ms.`);p(g),v.value=g}},s),h().then(()=>{m.value=!0,f.parent&&dh(f.parent.vnode)&&(f.parent.effect.dirty=!0,Nm(f.parent.update))}).catch(g=>{p(g),v.value=g}),()=>{if(m.value&&u)return nv(u,f);if(v.value&&r)return ee(r,{error:v.value});if(n&&!b.value)return ee(n)}}})}function nv(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=ee(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const dh=t=>t.type.__isKeepAlive,fL={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Ss(),r=n.ctx;if(!r.renderer)return()=>{const g=e.default&&e.default();return g&&g.length===1?g[0]:g};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:d}}}=r,h=d("div");r.activate=(g,_,y,w,T)=>{const P=g.component;u(g,_,y,0,a),l(P.vnode,g,_,y,P,a,w,g.slotScopeIds,T),dr(()=>{P.isDeactivated=!1,P.a&&iu(P.a);const A=g.props&&g.props.onVnodeMounted;A&&Xr(A,P.parent,g)},a)},r.deactivate=g=>{const _=g.component;u(g,h,null,1,a),dr(()=>{_.da&&iu(_.da);const y=g.props&&g.props.onVnodeUnmounted;y&&Xr(y,_.parent,g),_.isDeactivated=!0},a)};function f(g){rv(g),c(g,n,a,!0)}function p(g){i.forEach((_,y)=>{const w=Ky(_.type);w&&(!g||!g(w))&&m(y)})}function m(g){const _=i.get(g);!o||!Fi(_,o)?f(_):o&&rv(o),i.delete(g),s.delete(g)}St(()=>[t.include,t.exclude],([g,_])=>{g&&p(y=>Dc(g,y)),_&&p(y=>!Dc(_,y))},{flush:"post",deep:!0});let v=null;const b=()=>{v!=null&&i.set(v,iv(n.subTree))};return zt(b),Fm(b),hh(()=>{i.forEach(g=>{const{subTree:_,suspense:y}=n,w=iv(_);if(g.type===w.type&&g.key===w.key){rv(w);const T=w.component.da;T&&dr(T,y);return}f(g)})}),()=>{if(v=null,!e.default)return null;const g=e.default(),_=g[0];if(g.length>1)return o=null,g;if(!Bo(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let y=iv(_);const w=y.type,T=Ky(Ca(y)?y.type.__asyncResolved||{}:w),{include:P,exclude:A,max:I}=t;if(P&&(!T||!Dc(P,T))||A&&T&&Dc(A,T))return o=y,_;const E=y.key==null?w:y.key,U=i.get(E);return y.el&&(y=bs(y),_.shapeFlag&128&&(_.ssContent=y)),v=E,U?(y.el=U.el,y.component=U.component,y.transition&&La(y,y.transition),y.shapeFlag|=512,s.delete(E),s.add(E)):(s.add(E),I&&s.size>parseInt(I,10)&&m(s.values().next().value)),y.shapeFlag|=256,o=y,UA(_.type)?_:y}}},pL=fL;function Dc(t,e){return je(t)?t.some(n=>Dc(n,e)):bn(t)?t.split(",").includes(e):X2(t)?t.test(e):!1}function GA(t,e){XA(t,"a",e)}function qA(t,e){XA(t,"da",e)}function XA(t,e,n=zn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Um(e,r,n),n){let i=n.parent;for(;i&&i.parent;)dh(i.parent.vnode)&&mL(r,e,n,i),i=i.parent}}function mL(t,e,n,r){const i=Um(e,t,r,!0);Ko(()=>{Lw(r[e],i)},n)}function rv(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function iv(t){return t.shapeFlag&128?t.ssContent:t}function Um(t,e,n=zn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;al();const a=Va(n),l=pi(e,n,t,o);return a(),ll(),l});return r?i.unshift(s):i.push(s),s}}const eo=t=>(e,n=zn)=>(!fh||t==="sp")&&Um(t,(...r)=>e(...r),n),QA=eo("bm"),zt=eo("m"),ob=eo("bu"),Fm=eo("u"),hh=eo("bum"),Ko=eo("um"),JA=eo("sp"),ZA=eo("rtg"),ek=eo("rtc");function tk(t,e=zn){Um("ec",t,e)}function dt(t,e,n,r){let i;const s=n&&n[r];if(je(t)||bn(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(tn(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];i[a]=e(t[u],u,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function gr(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(je(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function xe(t,e,n={},r,i){if(Hn.isCE||Hn.parent&&Ca(Hn.parent)&&Hn.parent.isCE)return e!=="default"&&(n.name=e),ee("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),x();const o=s&&nk(s(n)),a=ce(Ae,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function nk(t){return t.some(e=>Bo(e)?!(e.type===Dr||e.type===Ae&&!nk(e.children)):!0)?t:null}function gL(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:zc(r)]=t[r];return n}const $y=t=>t?Ek(t)?Bm(t)||t.proxy:$y(t.parent):null,Kc=wn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>$y(t.parent),$root:t=>$y(t.root),$emit:t=>t.emit,$options:t=>ab(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Nm(t.update)}),$nextTick:t=>t.n||(t.n=Wn.bind(t.proxy)),$watch:t=>cL.bind(t)}),sv=(t,e)=>t!==qt&&!t.__isScriptSetup&&Ot(t,e),Ly={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(sv(r,e))return o[e]=1,r[e];if(i!==qt&&Ot(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&Ot(u,e))return o[e]=3,s[e];if(n!==qt&&Ot(n,e))return o[e]=4,n[e];Uy&&(o[e]=0)}}const c=Kc[e];let d,h;if(c)return e==="$attrs"&&ii(t,"get",e),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==qt&&Ot(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Ot(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return sv(i,e)?(i[e]=n,!0):r!==qt&&Ot(r,e)?(r[e]=n,!0):Ot(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==qt&&Ot(t,o)||sv(e,o)||(a=s[0])&&Ot(a,o)||Ot(r,o)||Ot(Kc,o)||Ot(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ot(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},vL=wn({},Ly,{get(t,e){if(e!==Symbol.unscopables)return Ly.get(t,e,t)},has(t,e){return e[0]!=="_"&&!t$(e)}});function yL(){return null}function wL(){return null}function bL(t){}function _L(t){}function TL(){return null}function EL(){}function SL(t,e){return null}function Go(){return rk().slots}function CL(){return rk().attrs}function rk(){const t=Ss();return t.setupContext||(t.setupContext=Ik(t))}function Ad(t){return je(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function IL(t,e){const n=Ad(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?je(i)||rt(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function AL(t,e){return!t||!e?t||e:je(t)&&je(e)?t.concat(e):wn({},Ad(t),Ad(e))}function kL(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function DL(t){const e=Ss();let n=t();return Wy(),Uw(n)&&(n=n.catch(r=>{throw Va(e),r})),[n,()=>Va(e)]}let Uy=!0;function xL(t){const e=ab(t),n=t.proxy,r=t.ctx;Uy=!1,e.beforeCreate&&dT(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:m,deactivated:v,beforeDestroy:b,beforeUnmount:g,destroyed:_,unmounted:y,render:w,renderTracked:T,renderTriggered:P,errorCaptured:A,serverPrefetch:I,expose:E,inheritAttrs:U,components:F,directives:N,filters:D}=e;if(u&&PL(u,r,null),o)for(const B in o){const Y=o[B];rt(Y)&&(r[B]=Y.bind(n))}if(i){const B=i.call(n,n);tn(B)&&(t.data=On(B))}if(Uy=!0,s)for(const B in s){const Y=s[B],$=rt(Y)?Y.bind(n,n):rt(Y.get)?Y.get.bind(n,n):Zr,S=!rt(Y)&&rt(Y.set)?Y.set.bind(n):Zr,X=Z({get:$,set:S});Object.defineProperty(r,B,{enumerable:!0,configurable:!0,get:()=>X.value,set:Q=>X.value=Q})}if(a)for(const B in a)ik(a[B],r,n,B);if(l){const B=rt(l)?l.call(n):l;Reflect.ownKeys(B).forEach(Y=>{uu(Y,B[Y])})}c&&dT(c,t,"c");function R(B,Y){je(Y)?Y.forEach($=>B($.bind(n))):Y&&B(Y.bind(n))}if(R(QA,d),R(zt,h),R(ob,f),R(Fm,p),R(GA,m),R(qA,v),R(tk,A),R(ek,T),R(ZA,P),R(hh,g),R(Ko,y),R(JA,I),je(E))if(E.length){const B=t.exposed||(t.exposed={});E.forEach(Y=>{Object.defineProperty(B,Y,{get:()=>n[Y],set:$=>n[Y]=$})})}else t.exposed||(t.exposed={});w&&t.render===Zr&&(t.render=w),U!=null&&(t.inheritAttrs=U),F&&(t.components=F),N&&(t.directives=N)}function PL(t,e,n=Zr){je(t)&&(t=Fy(t));for(const r in t){const i=t[r];let s;tn(i)?"default"in i?s=Hr(i.from||r,i.default,!0):s=Hr(i.from||r):s=Hr(i),an(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function dT(t,e,n){pi(je(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function ik(t,e,n,r){const i=r.includes(".")?YA(n,r):()=>n[r];if(bn(t)){const s=e[t];rt(s)&&St(i,s)}else if(rt(t))St(i,t.bind(n));else if(tn(t))if(je(t))t.forEach(s=>ik(s,e,n,r));else{const s=rt(t.handler)?t.handler.bind(n):e[t.handler];rt(s)&&St(i,s,t)}}function ab(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>mp(l,u,o,!0)),mp(l,e,o)),tn(e)&&s.set(e,l),l}function mp(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&mp(t,s,n,!0),i&&i.forEach(o=>mp(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=RL[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const RL={data:hT,props:fT,emits:fT,methods:xc,computed:xc,beforeCreate:Lr,created:Lr,beforeMount:Lr,mounted:Lr,beforeUpdate:Lr,updated:Lr,beforeDestroy:Lr,beforeUnmount:Lr,destroyed:Lr,unmounted:Lr,activated:Lr,deactivated:Lr,errorCaptured:Lr,serverPrefetch:Lr,components:xc,directives:xc,watch:NL,provide:hT,inject:OL};function hT(t,e){return e?t?function(){return wn(rt(t)?t.call(this,this):t,rt(e)?e.call(this,this):e)}:e:t}function OL(t,e){return xc(Fy(t),Fy(e))}function Fy(t){if(je(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lr(t,e){return t?[...new Set([].concat(t,e))]:e}function xc(t,e){return t?wn(Object.create(null),t,e):e}function fT(t,e){return t?je(t)&&je(e)?[...new Set([...t,...e])]:wn(Object.create(null),Ad(t),Ad(e??{})):e}function NL(t,e){if(!t)return e;if(!e)return t;const n=wn(Object.create(null),t);for(const r in e)n[r]=Lr(t[r],e[r]);return n}function sk(){return{app:null,config:{isNativeTag:G2,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ML=0;function $L(t,e){return function(r,i=null){rt(r)||(r=wn({},r)),i!=null&&!tn(i)&&(i=null);const s=sk(),o=new WeakSet;let a=!1;const l=s.app={_uid:ML++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:kk,get config(){return s.config},set config(u){},use(u,...c){return o.has(u)||(u&&rt(u.install)?(o.add(u),u.install(l,...c)):rt(u)&&(o.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,d){if(!a){const h=ee(r,i);return h.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),c&&e?e(h,u):t(h,u,d),a=!0,l._container=u,u.__vue_app__=l,Bm(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){const c=lu;lu=l;try{return u()}finally{lu=c}}};return l}}let lu=null;function uu(t,e){if(zn){let n=zn.provides;const r=zn.parent&&zn.parent.provides;r===n&&(n=zn.provides=Object.create(r)),n[t]=e}}function Hr(t,e,n=!1){const r=zn||Hn;if(r||lu){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:lu._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&rt(e)?e.call(r&&r.proxy):e}}function ok(){return!!(zn||Hn||lu)}function LL(t,e,n,r=!1){const i={},s={};cp(s,Vm,1),t.propsDefaults=Object.create(null),ak(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Yw(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function UL(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=yt(i),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let h=c[d];if(Mm(t.emitsOptions,h))continue;const f=e[h];if(l)if(Ot(s,h))f!==s[h]&&(s[h]=f,u=!0);else{const p=jr(h);i[p]=Vy(l,a,p,f,t,!1)}else f!==s[h]&&(s[h]=f,u=!0)}}}else{ak(t,e,i,s)&&(u=!0);let c;for(const d in a)(!e||!Ot(e,d)&&((c=ci(d))===d||!Ot(e,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(i[d]=Vy(l,a,d,void 0,t,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!Ot(e,d))&&(delete s[d],u=!0)}u&&Us(t,"set","$attrs")}function ak(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ru(l))continue;const u=e[l];let c;i&&Ot(i,c=jr(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:Mm(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=yt(n),u=a||qt;for(let c=0;c<s.length;c++){const d=s[c];n[d]=Vy(i,l,d,u[d],t,!Ot(u,d))}}return o}function Vy(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Ot(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&rt(l)){const{propsDefaults:u}=i;if(n in u)r=u[n];else{const c=Va(i);r=u[n]=l.call(null,e),c()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===ci(n))&&(r=!0))}return r}function lk(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!rt(t)){const c=d=>{l=!0;const[h,f]=lk(d,e,!0);wn(o,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return tn(t)&&r.set(t,tu),tu;if(je(s))for(let c=0;c<s.length;c++){const d=jr(s[c]);pT(d)&&(o[d]=qt)}else if(s)for(const c in s){const d=jr(c);if(pT(d)){const h=s[c],f=o[d]=je(h)||rt(h)?{type:h}:wn({},h);if(f){const p=vT(Boolean,f.type),m=vT(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||Ot(f,"default"))&&a.push(d)}}}const u=[o,a];return tn(t)&&r.set(t,u),u}function pT(t){return t[0]!=="$"&&!ru(t)}function mT(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function gT(t,e){return mT(t)===mT(e)}function vT(t,e){return je(e)?e.findIndex(n=>gT(n,t)):rt(e)&&gT(e,t)?0:-1}const uk=t=>t[0]==="_"||t==="$stable",lb=t=>je(t)?t.map(ui):[ui(t)],FL=(t,e,n)=>{if(e._n)return e;const r=fe((...i)=>lb(e(...i)),n);return r._c=!1,r},ck=(t,e,n)=>{const r=t._ctx;for(const i in t){if(uk(i))continue;const s=t[i];if(rt(s))e[i]=FL(i,s,r);else if(s!=null){const o=lb(s);e[i]=()=>o}}},dk=(t,e)=>{const n=lb(e);t.slots.default=()=>n},VL=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=yt(e),cp(e,"_",n)):ck(e,t.slots={})}else t.slots={},e&&dk(t,e);cp(t.slots,Vm,1)},BL=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=qt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(wn(i,e),!n&&a===1&&delete i._):(s=!e.$stable,ck(e,i)),o=e}else e&&(dk(t,e),o={default:1});if(s)for(const a in i)!uk(a)&&o[a]==null&&delete i[a]};function gp(t,e,n,r,i=!1){if(je(t)){t.forEach((h,f)=>gp(h,e&&(je(e)?e[f]:e),n,r,i));return}if(Ca(r)&&!i)return;const s=r.shapeFlag&4?Bm(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,u=e&&e.r,c=a.refs===qt?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(bn(u)?(c[u]=null,Ot(d,u)&&(d[u]=null)):an(u)&&(u.value=null)),rt(l))Fs(l,a,12,[o,c]);else{const h=bn(l),f=an(l);if(h||f){const p=()=>{if(t.f){const m=h?Ot(d,l)?d[l]:c[l]:l.value;i?je(m)&&Lw(m,s):je(m)?m.includes(s)||m.push(s):h?(c[l]=[s],Ot(d,l)&&(d[l]=c[l])):(l.value=[s],t.k&&(c[t.k]=l.value))}else h?(c[l]=o,Ot(d,l)&&(d[l]=o)):f&&(l.value=o,t.k&&(c[t.k]=o))};o?(p.id=-1,dr(p,n)):p()}}}let so=!1;const jL=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",HL=t=>t.namespaceURI.includes("MathML"),tf=t=>{if(jL(t))return"svg";if(HL(t))return"mathml"},nf=t=>t.nodeType===8;function WL(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:u}}=t,c=(_,y)=>{if(!y.hasChildNodes()){n(null,_,y),pp(),y._vnode=_;return}so=!1,d(y.firstChild,_,null,null,null),pp(),y._vnode=_,so&&console.error("Hydration completed but contains mismatches.")},d=(_,y,w,T,P,A=!1)=>{const I=nf(_)&&_.data==="[",E=()=>m(_,y,w,T,P,I),{type:U,ref:F,shapeFlag:N,patchFlag:D}=y;let O=_.nodeType;y.el=_,D===-2&&(A=!1,y.dynamicChildren=null);let R=null;switch(U){case Ua:O!==3?y.children===""?(l(y.el=i(""),o(_),_),R=_):R=E():(_.data!==y.children&&(so=!0,_.data=y.children),R=s(_));break;case Dr:g(_)?(R=s(_),b(y.el=_.content.firstChild,_,w)):O!==8||I?R=E():R=s(_);break;case Ia:if(I&&(_=s(_),O=_.nodeType),O===1||O===3){R=_;const B=!y.children.length;for(let Y=0;Y<y.staticCount;Y++)B&&(y.children+=R.nodeType===1?R.outerHTML:R.data),Y===y.staticCount-1&&(y.anchor=R),R=s(R);return I?s(R):R}else E();break;case Ae:I?R=p(_,y,w,T,P,A):R=E();break;default:if(N&1)(O!==1||y.type.toLowerCase()!==_.tagName.toLowerCase())&&!g(_)?R=E():R=h(_,y,w,T,P,A);else if(N&6){y.slotScopeIds=P;const B=o(_);if(I?R=v(_):nf(_)&&_.data==="teleport start"?R=v(_,_.data,"teleport end"):R=s(_),e(y,B,null,w,T,tf(B),A),Ca(y)){let Y;I?(Y=ee(Ae),Y.anchor=R?R.previousSibling:B.lastChild):Y=_.nodeType===3?Qe(""):ee("div"),Y.el=_,y.component.subTree=Y}}else N&64?O!==8?R=E():R=y.type.hydrate(_,y,w,T,P,A,t,f):N&128&&(R=y.type.hydrate(_,y,w,T,tf(o(_)),P,A,t,d))}return F!=null&&gp(F,null,T,y),R},h=(_,y,w,T,P,A)=>{A=A||!!y.dynamicChildren;const{type:I,props:E,patchFlag:U,shapeFlag:F,dirs:N,transition:D}=y,O=I==="input"||I==="option";if(O||U!==-1){N&&ts(y,null,w,"created");let R=!1;if(g(_)){R=mk(T,D)&&w&&w.vnode.props&&w.vnode.props.appear;const Y=_.content.firstChild;R&&D.beforeEnter(Y),b(Y,_,w),y.el=_=Y}if(F&16&&!(E&&(E.innerHTML||E.textContent))){let Y=f(_.firstChild,y,_,w,T,P,A);for(;Y;){so=!0;const $=Y;Y=Y.nextSibling,a($)}}else F&8&&_.textContent!==y.children&&(so=!0,_.textContent=y.children);if(E)if(O||!A||U&48)for(const Y in E)(O&&(Y.endsWith("value")||Y==="indeterminate")||oh(Y)&&!ru(Y)||Y[0]===".")&&r(_,Y,null,E[Y],void 0,void 0,w);else E.onClick&&r(_,"onClick",null,E.onClick,void 0,void 0,w);let B;(B=E&&E.onVnodeBeforeMount)&&Xr(B,w,y),N&&ts(y,null,w,"beforeMount"),((B=E&&E.onVnodeMounted)||N||R)&&FA(()=>{B&&Xr(B,w,y),R&&D.enter(_),N&&ts(y,null,w,"mounted")},T)}return _.nextSibling},f=(_,y,w,T,P,A,I)=>{I=I||!!y.dynamicChildren;const E=y.children,U=E.length;for(let F=0;F<U;F++){const N=I?E[F]:E[F]=ui(E[F]);if(_)_=d(_,N,T,P,A,I);else{if(N.type===Ua&&!N.children)continue;so=!0,n(null,N,w,null,T,P,tf(w),A)}}return _},p=(_,y,w,T,P,A)=>{const{slotScopeIds:I}=y;I&&(P=P?P.concat(I):I);const E=o(_),U=f(s(_),y,E,w,T,P,A);return U&&nf(U)&&U.data==="]"?s(y.anchor=U):(so=!0,l(y.anchor=u("]"),E,U),U)},m=(_,y,w,T,P,A)=>{if(so=!0,y.el=null,A){const U=v(_);for(;;){const F=s(_);if(F&&F!==U)a(F);else break}}const I=s(_),E=o(_);return a(_),n(null,y,E,I,w,T,tf(E),P),I},v=(_,y="[",w="]")=>{let T=0;for(;_;)if(_=s(_),_&&nf(_)&&(_.data===y&&T++,_.data===w)){if(T===0)return s(_);T--}return _},b=(_,y,w)=>{const T=y.parentNode;T&&T.replaceChild(_,y);let P=w;for(;P;)P.vnode.el===y&&(P.vnode.el=P.subTree.el=_),P=P.parent},g=_=>_.nodeType===1&&_.tagName.toLowerCase()==="template";return[c,d]}const dr=FA;function hk(t){return pk(t)}function fk(t){return pk(t,WL)}function pk(t,e){const n=uA();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:h,setScopeId:f=Zr,insertStaticContent:p}=t,m=(C,M,j,oe=null,ae=null,be=null,Se=void 0,ye=null,_e=!!M.dynamicChildren)=>{if(C===M)return;C&&!Fi(C,M)&&(oe=W(C),Q(C,ae,be,!0),C=null),M.patchFlag===-2&&(_e=!1,M.dynamicChildren=null);const{type:ge,ref:ke,shapeFlag:Le}=M;switch(ge){case Ua:v(C,M,j,oe);break;case Dr:b(C,M,j,oe);break;case Ia:C==null&&g(M,j,oe,Se);break;case Ae:F(C,M,j,oe,ae,be,Se,ye,_e);break;default:Le&1?w(C,M,j,oe,ae,be,Se,ye,_e):Le&6?N(C,M,j,oe,ae,be,Se,ye,_e):(Le&64||Le&128)&&ge.process(C,M,j,oe,ae,be,Se,ye,_e,ue)}ke!=null&&ae&&gp(ke,C&&C.ref,be,M||C,!M)},v=(C,M,j,oe)=>{if(C==null)r(M.el=a(M.children),j,oe);else{const ae=M.el=C.el;M.children!==C.children&&u(ae,M.children)}},b=(C,M,j,oe)=>{C==null?r(M.el=l(M.children||""),j,oe):M.el=C.el},g=(C,M,j,oe)=>{[C.el,C.anchor]=p(C.children,M,j,oe,C.el,C.anchor)},_=({el:C,anchor:M},j,oe)=>{let ae;for(;C&&C!==M;)ae=h(C),r(C,j,oe),C=ae;r(M,j,oe)},y=({el:C,anchor:M})=>{let j;for(;C&&C!==M;)j=h(C),i(C),C=j;i(M)},w=(C,M,j,oe,ae,be,Se,ye,_e)=>{M.type==="svg"?Se="svg":M.type==="math"&&(Se="mathml"),C==null?T(M,j,oe,ae,be,Se,ye,_e):I(C,M,ae,be,Se,ye,_e)},T=(C,M,j,oe,ae,be,Se,ye)=>{let _e,ge;const{props:ke,shapeFlag:Le,transition:Be,dirs:qe}=C;if(_e=C.el=o(C.type,be,ke&&ke.is,ke),Le&8?c(_e,C.children):Le&16&&A(C.children,_e,null,oe,ae,ov(C,be),Se,ye),qe&&ts(C,null,oe,"created"),P(_e,C,C.scopeId,Se,oe),ke){for(const K in ke)K!=="value"&&!ru(K)&&s(_e,K,null,ke[K],be,C.children,oe,ae,V);"value"in ke&&s(_e,"value",null,ke.value,be),(ge=ke.onVnodeBeforeMount)&&Xr(ge,oe,C)}qe&&ts(C,null,oe,"beforeMount");const it=mk(ae,Be);it&&Be.beforeEnter(_e),r(_e,M,j),((ge=ke&&ke.onVnodeMounted)||it||qe)&&dr(()=>{ge&&Xr(ge,oe,C),it&&Be.enter(_e),qe&&ts(C,null,oe,"mounted")},ae)},P=(C,M,j,oe,ae)=>{if(j&&f(C,j),oe)for(let be=0;be<oe.length;be++)f(C,oe[be]);if(ae){let be=ae.subTree;if(M===be){const Se=ae.vnode;P(C,Se,Se.scopeId,Se.slotScopeIds,ae.parent)}}},A=(C,M,j,oe,ae,be,Se,ye,_e=0)=>{for(let ge=_e;ge<C.length;ge++){const ke=C[ge]=ye?vo(C[ge]):ui(C[ge]);m(null,ke,M,j,oe,ae,be,Se,ye)}},I=(C,M,j,oe,ae,be,Se)=>{const ye=M.el=C.el;let{patchFlag:_e,dynamicChildren:ge,dirs:ke}=M;_e|=C.patchFlag&16;const Le=C.props||qt,Be=M.props||qt;let qe;if(j&&ra(j,!1),(qe=Be.onVnodeBeforeUpdate)&&Xr(qe,j,M,C),ke&&ts(M,C,j,"beforeUpdate"),j&&ra(j,!0),ge?E(C.dynamicChildren,ge,ye,j,oe,ov(M,ae),be):Se||Y(C,M,ye,null,j,oe,ov(M,ae),be,!1),_e>0){if(_e&16)U(ye,M,Le,Be,j,oe,ae);else if(_e&2&&Le.class!==Be.class&&s(ye,"class",null,Be.class,ae),_e&4&&s(ye,"style",Le.style,Be.style,ae),_e&8){const it=M.dynamicProps;for(let K=0;K<it.length;K++){const L=it[K],H=Le[L],q=Be[L];(q!==H||L==="value")&&s(ye,L,H,q,ae,C.children,j,oe,V)}}_e&1&&C.children!==M.children&&c(ye,M.children)}else!Se&&ge==null&&U(ye,M,Le,Be,j,oe,ae);((qe=Be.onVnodeUpdated)||ke)&&dr(()=>{qe&&Xr(qe,j,M,C),ke&&ts(M,C,j,"updated")},oe)},E=(C,M,j,oe,ae,be,Se)=>{for(let ye=0;ye<M.length;ye++){const _e=C[ye],ge=M[ye],ke=_e.el&&(_e.type===Ae||!Fi(_e,ge)||_e.shapeFlag&70)?d(_e.el):j;m(_e,ge,ke,null,oe,ae,be,Se,!0)}},U=(C,M,j,oe,ae,be,Se)=>{if(j!==oe){if(j!==qt)for(const ye in j)!ru(ye)&&!(ye in oe)&&s(C,ye,j[ye],null,Se,M.children,ae,be,V);for(const ye in oe){if(ru(ye))continue;const _e=oe[ye],ge=j[ye];_e!==ge&&ye!=="value"&&s(C,ye,ge,_e,Se,M.children,ae,be,V)}"value"in oe&&s(C,"value",j.value,oe.value,Se)}},F=(C,M,j,oe,ae,be,Se,ye,_e)=>{const ge=M.el=C?C.el:a(""),ke=M.anchor=C?C.anchor:a("");let{patchFlag:Le,dynamicChildren:Be,slotScopeIds:qe}=M;qe&&(ye=ye?ye.concat(qe):qe),C==null?(r(ge,j,oe),r(ke,j,oe),A(M.children||[],j,ke,ae,be,Se,ye,_e)):Le>0&&Le&64&&Be&&C.dynamicChildren?(E(C.dynamicChildren,Be,j,ae,be,Se,ye),(M.key!=null||ae&&M===ae.subTree)&&ub(C,M,!0)):Y(C,M,j,ke,ae,be,Se,ye,_e)},N=(C,M,j,oe,ae,be,Se,ye,_e)=>{M.slotScopeIds=ye,C==null?M.shapeFlag&512?ae.ctx.activate(M,j,oe,Se,_e):D(M,j,oe,ae,be,Se,_e):O(C,M,_e)},D=(C,M,j,oe,ae,be,Se)=>{const ye=C.component=Tk(C,oe,ae);if(dh(C)&&(ye.ctx.renderer=ue),Sk(ye),ye.asyncDep){if(ae&&ae.registerDep(ye,R),!C.el){const _e=ye.subTree=ee(Dr);b(null,_e,M,j)}}else R(ye,C,M,j,ae,be,Se)},O=(C,M,j)=>{const oe=M.component=C.component;if(eL(C,M,j))if(oe.asyncDep&&!oe.asyncResolved){B(oe,M,j);return}else oe.next=M,K$(oe.update),oe.effect.dirty=!0,oe.update();else M.el=C.el,oe.vnode=M},R=(C,M,j,oe,ae,be,Se)=>{const ye=()=>{if(C.isMounted){let{next:ke,bu:Le,u:Be,parent:qe,vnode:it}=C;{const le=gk(C);if(le){ke&&(ke.el=it.el,B(C,ke,Se)),le.asyncDep.then(()=>{C.isUnmounted||ye()});return}}let K=ke,L;ra(C,!1),ke?(ke.el=it.el,B(C,ke,Se)):ke=it,Le&&iu(Le),(L=ke.props&&ke.props.onVnodeBeforeUpdate)&&Xr(L,qe,ke,it),ra(C,!0);const H=Vf(C),q=C.subTree;C.subTree=H,m(q,H,d(q.el),W(q),C,ae,be),ke.el=H.el,K===null&&eb(C,H.el),Be&&dr(Be,ae),(L=ke.props&&ke.props.onVnodeUpdated)&&dr(()=>Xr(L,qe,ke,it),ae)}else{let ke;const{el:Le,props:Be}=M,{bm:qe,m:it,parent:K}=C,L=Ca(M);if(ra(C,!1),qe&&iu(qe),!L&&(ke=Be&&Be.onVnodeBeforeMount)&&Xr(ke,K,M),ra(C,!0),Le&&ie){const H=()=>{C.subTree=Vf(C),ie(Le,C.subTree,C,ae,null)};L?M.type.__asyncLoader().then(()=>!C.isUnmounted&&H()):H()}else{const H=C.subTree=Vf(C);m(null,H,j,oe,C,ae,be),M.el=H.el}if(it&&dr(it,ae),!L&&(ke=Be&&Be.onVnodeMounted)){const H=M;dr(()=>Xr(ke,K,H),ae)}(M.shapeFlag&256||K&&Ca(K.vnode)&&K.vnode.shapeFlag&256)&&C.a&&dr(C.a,ae),C.isMounted=!0,M=j=oe=null}},_e=C.effect=new bu(ye,Zr,()=>Nm(ge),C.scope),ge=C.update=()=>{_e.dirty&&_e.run()};ge.id=C.uid,ra(C,!0),ge()},B=(C,M,j)=>{M.component=C;const oe=C.vnode.props;C.vnode=M,C.next=null,UL(C,M.props,oe,j),BL(C,M.children,j),al(),oT(C),ll()},Y=(C,M,j,oe,ae,be,Se,ye,_e=!1)=>{const ge=C&&C.children,ke=C?C.shapeFlag:0,Le=M.children,{patchFlag:Be,shapeFlag:qe}=M;if(Be>0){if(Be&128){S(ge,Le,j,oe,ae,be,Se,ye,_e);return}else if(Be&256){$(ge,Le,j,oe,ae,be,Se,ye,_e);return}}qe&8?(ke&16&&V(ge,ae,be),Le!==ge&&c(j,Le)):ke&16?qe&16?S(ge,Le,j,oe,ae,be,Se,ye,_e):V(ge,ae,be,!0):(ke&8&&c(j,""),qe&16&&A(Le,j,oe,ae,be,Se,ye,_e))},$=(C,M,j,oe,ae,be,Se,ye,_e)=>{C=C||tu,M=M||tu;const ge=C.length,ke=M.length,Le=Math.min(ge,ke);let Be;for(Be=0;Be<Le;Be++){const qe=M[Be]=_e?vo(M[Be]):ui(M[Be]);m(C[Be],qe,j,null,ae,be,Se,ye,_e)}ge>ke?V(C,ae,be,!0,!1,Le):A(M,j,oe,ae,be,Se,ye,_e,Le)},S=(C,M,j,oe,ae,be,Se,ye,_e)=>{let ge=0;const ke=M.length;let Le=C.length-1,Be=ke-1;for(;ge<=Le&&ge<=Be;){const qe=C[ge],it=M[ge]=_e?vo(M[ge]):ui(M[ge]);if(Fi(qe,it))m(qe,it,j,null,ae,be,Se,ye,_e);else break;ge++}for(;ge<=Le&&ge<=Be;){const qe=C[Le],it=M[Be]=_e?vo(M[Be]):ui(M[Be]);if(Fi(qe,it))m(qe,it,j,null,ae,be,Se,ye,_e);else break;Le--,Be--}if(ge>Le){if(ge<=Be){const qe=Be+1,it=qe<ke?M[qe].el:oe;for(;ge<=Be;)m(null,M[ge]=_e?vo(M[ge]):ui(M[ge]),j,it,ae,be,Se,ye,_e),ge++}}else if(ge>Be)for(;ge<=Le;)Q(C[ge],ae,be,!0),ge++;else{const qe=ge,it=ge,K=new Map;for(ge=it;ge<=Be;ge++){const Te=M[ge]=_e?vo(M[ge]):ui(M[ge]);Te.key!=null&&K.set(Te.key,ge)}let L,H=0;const q=Be-it+1;let le=!1,Re=0;const He=new Array(q);for(ge=0;ge<q;ge++)He[ge]=0;for(ge=qe;ge<=Le;ge++){const Te=C[ge];if(H>=q){Q(Te,ae,be,!0);continue}let Ce;if(Te.key!=null)Ce=K.get(Te.key);else for(L=it;L<=Be;L++)if(He[L-it]===0&&Fi(Te,M[L])){Ce=L;break}Ce===void 0?Q(Te,ae,be,!0):(He[Ce-it]=ge+1,Ce>=Re?Re=Ce:le=!0,m(Te,M[Ce],j,null,ae,be,Se,ye,_e),H++)}const he=le?YL(He):tu;for(L=he.length-1,ge=q-1;ge>=0;ge--){const Te=it+ge,Ce=M[Te],We=Te+1<ke?M[Te+1].el:oe;He[ge]===0?m(null,Ce,j,We,ae,be,Se,ye,_e):le&&(L<0||ge!==he[L]?X(Ce,j,We,2):L--)}}},X=(C,M,j,oe,ae=null)=>{const{el:be,type:Se,transition:ye,children:_e,shapeFlag:ge}=C;if(ge&6){X(C.component.subTree,M,j,oe);return}if(ge&128){C.suspense.move(M,j,oe);return}if(ge&64){Se.move(C,M,j,ue);return}if(Se===Ae){r(be,M,j);for(let Le=0;Le<_e.length;Le++)X(_e[Le],M,j,oe);r(C.anchor,M,j);return}if(Se===Ia){_(C,M,j);return}if(oe!==2&&ge&1&&ye)if(oe===0)ye.beforeEnter(be),r(be,M,j),dr(()=>ye.enter(be),ae);else{const{leave:Le,delayLeave:Be,afterLeave:qe}=ye,it=()=>r(be,M,j),K=()=>{Le(be,()=>{it(),qe&&qe()})};Be?Be(be,it,K):K()}else r(be,M,j)},Q=(C,M,j,oe=!1,ae=!1)=>{const{type:be,props:Se,ref:ye,children:_e,dynamicChildren:ge,shapeFlag:ke,patchFlag:Le,dirs:Be}=C;if(ye!=null&&gp(ye,null,j,C,!0),ke&256){M.ctx.deactivate(C);return}const qe=ke&1&&Be,it=!Ca(C);let K;if(it&&(K=Se&&Se.onVnodeBeforeUnmount)&&Xr(K,M,C),ke&6)te(C.component,j,oe);else{if(ke&128){C.suspense.unmount(j,oe);return}qe&&ts(C,null,M,"beforeUnmount"),ke&64?C.type.remove(C,M,j,ae,ue,oe):ge&&(be!==Ae||Le>0&&Le&64)?V(ge,M,j,!1,!0):(be===Ae&&Le&384||!ae&&ke&16)&&V(_e,M,j),oe&&pe(C)}(it&&(K=Se&&Se.onVnodeUnmounted)||qe)&&dr(()=>{K&&Xr(K,M,C),qe&&ts(C,null,M,"unmounted")},j)},pe=C=>{const{type:M,el:j,anchor:oe,transition:ae}=C;if(M===Ae){me(j,oe);return}if(M===Ia){y(C);return}const be=()=>{i(j),ae&&!ae.persisted&&ae.afterLeave&&ae.afterLeave()};if(C.shapeFlag&1&&ae&&!ae.persisted){const{leave:Se,delayLeave:ye}=ae,_e=()=>Se(j,be);ye?ye(C.el,be,_e):_e()}else be()},me=(C,M)=>{let j;for(;C!==M;)j=h(C),i(C),C=j;i(M)},te=(C,M,j)=>{const{bum:oe,scope:ae,update:be,subTree:Se,um:ye}=C;oe&&iu(oe),ae.stop(),be&&(be.active=!1,Q(Se,C,M,j)),ye&&dr(ye,M),dr(()=>{C.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},V=(C,M,j,oe=!1,ae=!1,be=0)=>{for(let Se=be;Se<C.length;Se++)Q(C[Se],M,j,oe,ae)},W=C=>C.shapeFlag&6?W(C.component.subTree):C.shapeFlag&128?C.suspense.next():h(C.anchor||C.el);let se=!1;const G=(C,M,j)=>{C==null?M._vnode&&Q(M._vnode,null,null,!0):m(M._vnode||null,C,M,null,null,null,j),se||(se=!0,oT(),pp(),se=!1),M._vnode=C},ue={p:m,um:Q,m:X,r:pe,mt:D,mc:A,pc:Y,pbc:E,n:W,o:t};let ve,ie;return e&&([ve,ie]=e(ue)),{render:G,hydrate:ve,createApp:$L(G,ve)}}function ov({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ra({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function mk(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ub(t,e,n=!1){const r=t.children,i=e.children;if(je(r)&&je(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=vo(i[s]),a.el=o.el),n||ub(o,a)),a.type===Ua&&(a.el=o.el)}}function YL(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function gk(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:gk(e)}const zL=t=>t.__isTeleport,Gc=t=>t&&(t.disabled||t.disabled===""),yT=t=>typeof SVGElement<"u"&&t instanceof SVGElement,wT=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,By=(t,e)=>{const n=t&&t.to;return bn(n)?e?e(n):null:n},KL={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,u){const{mc:c,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:m,createComment:v}}=u,b=Gc(e.props);let{shapeFlag:g,children:_,dynamicChildren:y}=e;if(t==null){const w=e.el=m(""),T=e.anchor=m("");f(w,n,r),f(T,n,r);const P=e.target=By(e.props,p),A=e.targetAnchor=m("");P&&(f(A,P),o==="svg"||yT(P)?o="svg":(o==="mathml"||wT(P))&&(o="mathml"));const I=(E,U)=>{g&16&&c(_,E,U,i,s,o,a,l)};b?I(n,T):P&&I(P,A)}else{e.el=t.el;const w=e.anchor=t.anchor,T=e.target=t.target,P=e.targetAnchor=t.targetAnchor,A=Gc(t.props),I=A?n:T,E=A?w:P;if(o==="svg"||yT(T)?o="svg":(o==="mathml"||wT(T))&&(o="mathml"),y?(h(t.dynamicChildren,y,I,i,s,o,a),ub(t,e,!0)):l||d(t,e,I,E,i,s,o,a,!1),b)A?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):rf(e,n,w,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const U=e.target=By(e.props,p);U&&rf(e,U,null,u,0)}else A&&rf(e,T,P,u,1)}yk(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:d,props:h}=t;if(d&&s(c),o&&s(u),a&16){const f=o||!Gc(h);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,n,f,!!m.dynamicChildren)}}},move:rf,hydrate:GL};function rf(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,d=s===2;if(d&&r(o,e,n),(!d||Gc(c))&&l&16)for(let h=0;h<u.length;h++)i(u[h],e,n,2);d&&r(a,e,n)}function GL(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const c=e.target=By(e.props,l);if(c){const d=c._lpa||c.firstChild;if(e.shapeFlag&16)if(Gc(e.props))e.anchor=u(o(t),e,a(t),n,r,i,s),e.targetAnchor=d;else{e.anchor=o(t);let h=d;for(;h;)if(h=o(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,c._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(d,e,c,n,r,i,s)}yk(e)}return e.anchor&&o(e.anchor)}const vk=KL;function yk(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Ae=Symbol.for("v-fgt"),Ua=Symbol.for("v-txt"),Dr=Symbol.for("v-cmt"),Ia=Symbol.for("v-stc"),qc=[];let ei=null;function x(t=!1){qc.push(ei=t?null:[])}function wk(){qc.pop(),ei=qc[qc.length-1]||null}let Fa=1;function jy(t){Fa+=t}function bk(t){return t.dynamicChildren=Fa>0?ei||tu:null,wk(),Fa>0&&ei&&ei.push(t),t}function z(t,e,n,r,i,s){return bk(J(t,e,n,r,i,s,!0))}function ce(t,e,n,r,i){return bk(ee(t,e,n,r,i,!0))}function Bo(t){return t?t.__v_isVNode===!0:!1}function Fi(t,e){return t.type===e.type&&t.key===e.key}function qL(t){}const Vm="__vInternal",_k=({key:t})=>t??null,Bf=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?bn(t)||an(t)||rt(t)?{i:Hn,r:t,k:e,f:!!n}:t:null);function J(t,e=null,n=null,r=0,i=null,s=t===Ae?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&_k(e),ref:e&&Bf(e),scopeId:$m,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Hn};return a?(cb(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=bn(n)?8:16),Fa>0&&!o&&ei&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ei.push(l),l}const ee=XL;function XL(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===LA)&&(t=Dr),Bo(t)){const a=bs(t,e,!0);return n&&cb(a,n),Fa>0&&!s&&ei&&(a.shapeFlag&6?ei[ei.indexOf(t)]=a:ei.push(a)),a.patchFlag|=-2,a}if(iU(t)&&(t=t.__vccOpts),e){e=sr(e);let{class:a,style:l}=e;a&&!bn(a)&&(e.class=Me(a)),tn(l)&&(Kw(l)&&!je(l)&&(l=wn({},l)),e.style=Gn(l))}const o=bn(t)?1:UA(t)?128:zL(t)?64:tn(t)?4:rt(t)?2:0;return J(t,e,n,r,i,o,s,!0)}function sr(t){return t?Kw(t)||Vm in t?wn({},t):t:null}function bs(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?Xt(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&_k(a),ref:e&&e.ref?n&&i?je(i)?i.concat(Bf(e)):[i,Bf(e)]:Bf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ae?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&bs(t.ssContent),ssFallback:t.ssFallback&&bs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Qe(t=" ",e=0){return ee(Ua,null,t,e)}function QL(t,e){const n=ee(Ia,null,t);return n.staticCount=e,n}function ne(t="",e=!1){return e?(x(),ce(Dr,null,t)):ee(Dr,null,t)}function ui(t){return t==null||typeof t=="boolean"?ee(Dr):je(t)?ee(Ae,null,t.slice()):typeof t=="object"?vo(t):ee(Ua,null,String(t))}function vo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:bs(t)}function cb(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(je(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),cb(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Vm in e)?e._ctx=Hn:i===3&&Hn&&(Hn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else rt(e)?(e={default:e,_ctx:Hn},n=32):(e=String(e),r&64?(n=16,e=[Qe(e)]):n=8);t.children=e,t.shapeFlag|=n}function Xt(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Me([e.class,r.class]));else if(i==="style")e.style=Gn([e.style,r.style]);else if(oh(i)){const s=e[i],o=r[i];o&&s!==o&&!(je(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Xr(t,e,n,r=null){pi(t,e,7,[n,r])}const JL=sk();let ZL=0;function Tk(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||JL,s={uid:ZL++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Vw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lk(r,i),emitsOptions:$A(r,i),emit:null,emitted:null,propsDefaults:qt,inheritAttrs:r.inheritAttrs,ctx:qt,data:qt,props:qt,attrs:qt,slots:qt,refs:qt,setupState:qt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=q$.bind(null,s),t.ce&&t.ce(s),s}let zn=null;const Ss=()=>zn||Hn;let vp,Hy;{const t=uA(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};vp=e("__VUE_INSTANCE_SETTERS__",n=>zn=n),Hy=e("__VUE_SSR_SETTERS__",n=>fh=n)}const Va=t=>{const e=zn;return vp(t),t.scope.on(),()=>{t.scope.off(),vp(e)}},Wy=()=>{zn&&zn.scope.off(),vp(null)};function Ek(t){return t.vnode.shapeFlag&4}let fh=!1;function Sk(t,e=!1){e&&Hy(e);const{props:n,children:r}=t.vnode,i=Ek(t);LL(t,n,i,e),VL(t,r);const s=i?eU(t,e):void 0;return e&&Hy(!1),s}function eU(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=lh(new Proxy(t.ctx,Ly));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?Ik(t):null,s=Va(t);al();const o=Fs(r,t,0,[t.props,i]);if(ll(),s(),Uw(o)){if(o.then(Wy,Wy),e)return o.then(a=>{Yy(t,a,e)}).catch(a=>{ul(a,t,0)});t.asyncDep=o}else Yy(t,o,e)}else Ck(t,e)}function Yy(t,e,n){rt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:tn(e)&&(t.setupState=Xw(e)),Ck(t,n)}let yp,zy;function tU(t){yp=t,zy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,vL))}}const nU=()=>!yp;function Ck(t,e,n){const r=t.type;if(!t.render){if(!e&&yp&&!r.render){const i=r.template||ab(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=wn(wn({isCustomElement:s,delimiters:a},o),l);r.render=yp(i,u)}}t.render=r.render||Zr,zy&&zy(t)}{const i=Va(t);al();try{xL(t)}finally{ll(),i()}}}function rU(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return ii(t,"get","$attrs"),e[n]}}))}function Ik(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return rU(t)},slots:t.slots,emit:t.emit,expose:e}}function Bm(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Xw(lh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Kc)return Kc[n](t)},has(e,n){return n in e||n in Kc}}))}function Ky(t,e=!0){return rt(t)?t.displayName||t.name:t.name||e&&t.__name}function iU(t){return rt(t)&&"__vccOpts"in t}const Z=(t,e)=>R$(t,e,fh);function sU(t,e,n=qt){const r=Ss(),i=jr(e),s=ci(e),o=DA((l,u)=>{let c;return WA(()=>{const d=t[e];qi(c,d)&&(c=d,u())}),{get(){return l(),n.get?n.get(c):c},set(d){const h=r.vnode.props;!(h&&(e in h||i in h||s in h)&&(`onUpdate:${e}`in h||`onUpdate:${i}`in h||`onUpdate:${s}`in h))&&qi(d,c)&&(c=d,u()),r.emit(`update:${e}`,n.set?n.set(d):d)}}}),a=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?t[a]||{}:o,done:!1}:{done:!0}}}},o}function Ba(t,e,n){const r=arguments.length;return r===2?tn(e)&&!je(e)?Bo(e)?ee(t,null,[e]):ee(t,e):ee(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bo(n)&&(n=[n]),ee(t,e,n))}function oU(){}function aU(t,e,n,r){const i=n[r];if(i&&Ak(i,t))return i;const s=e();return s.memo=t.slice(),n[r]=s}function Ak(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(qi(n[r],e[r]))return!1;return Fa>0&&ei&&ei.push(t),!0}const kk="3.4.21",lU=Zr,uU=W$,cU=Nl,dU=MA,hU={createComponentInstance:Tk,setupComponent:Sk,renderComponentRoot:Vf,setCurrentRenderingInstance:Cd,isVNode:Bo,normalizeVNode:ui},fU=hU,pU=null,mU=null,gU=null;/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const vU="http://www.w3.org/2000/svg",yU="http://www.w3.org/1998/Math/MathML",yo=typeof document<"u"?document:null,bT=yo&&yo.createElement("template"),wU={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?yo.createElementNS(vU,t):e==="mathml"?yo.createElementNS(yU,t):yo.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>yo.createTextNode(t),createComment:t=>yo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>yo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{bT.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=bT.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},oo="transition",cc="animation",Eu=Symbol("_vtc"),Cs=(t,{slots:e})=>Ba(zA,xk(t),e);Cs.displayName="Transition";const Dk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},bU=Cs.props=wn({},sb,Dk),ia=(t,e=[])=>{je(t)?t.forEach(n=>n(...e)):t&&t(...e)},_T=t=>t?je(t)?t.some(e=>e.length>1):t.length>1:!1;function xk(t){const e={};for(const F in t)F in Dk||(e[F]=t[F]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=_U(i),m=p&&p[0],v=p&&p[1],{onBeforeEnter:b,onEnter:g,onEnterCancelled:_,onLeave:y,onLeaveCancelled:w,onBeforeAppear:T=b,onAppear:P=g,onAppearCancelled:A=_}=e,I=(F,N,D)=>{ho(F,N?c:a),ho(F,N?u:o),D&&D()},E=(F,N)=>{F._isLeaving=!1,ho(F,d),ho(F,f),ho(F,h),N&&N()},U=F=>(N,D)=>{const O=F?P:g,R=()=>I(N,F,D);ia(O,[N,R]),TT(()=>{ho(N,F?l:s),Ds(N,F?c:a),_T(O)||ET(N,r,m,R)})};return wn(e,{onBeforeEnter(F){ia(b,[F]),Ds(F,s),Ds(F,o)},onBeforeAppear(F){ia(T,[F]),Ds(F,l),Ds(F,u)},onEnter:U(!1),onAppear:U(!0),onLeave(F,N){F._isLeaving=!0;const D=()=>E(F,N);Ds(F,d),Rk(),Ds(F,h),TT(()=>{F._isLeaving&&(ho(F,d),Ds(F,f),_T(y)||ET(F,r,v,D))}),ia(y,[F,D])},onEnterCancelled(F){I(F,!1),ia(_,[F])},onAppearCancelled(F){I(F,!0),ia(A,[F])},onLeaveCancelled(F){E(F),ia(w,[F])}})}function _U(t){if(t==null)return null;if(tn(t))return[av(t.enter),av(t.leave)];{const e=av(t);return[e,e]}}function av(t){return dp(t)}function Ds(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Eu]||(t[Eu]=new Set)).add(e)}function ho(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Eu];n&&(n.delete(e),n.size||(t[Eu]=void 0))}function TT(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let TU=0;function ET(t,e,n,r){const i=t._endId=++TU,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=Pk(t,e);if(!o)return r();const u=o+"end";let c=0;const d=()=>{t.removeEventListener(u,h),s()},h=f=>{f.target===t&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),t.addEventListener(u,h)}function Pk(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${oo}Delay`),s=r(`${oo}Duration`),o=ST(i,s),a=r(`${cc}Delay`),l=r(`${cc}Duration`),u=ST(a,l);let c=null,d=0,h=0;e===oo?o>0&&(c=oo,d=o,h=s.length):e===cc?u>0&&(c=cc,d=u,h=l.length):(d=Math.max(o,u),c=d>0?o>u?oo:cc:null,h=c?c===oo?s.length:l.length:0);const f=c===oo&&/\b(transform|all)(,|$)/.test(r(`${oo}Property`).toString());return{type:c,timeout:d,propCount:h,hasTransform:f}}function ST(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>CT(n)+CT(t[r])))}function CT(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Rk(){return document.body.offsetHeight}function EU(t,e,n){const r=t[Eu];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const wp=Symbol("_vod"),Ok=Symbol("_vsh"),Vs={beforeMount(t,{value:e},{transition:n}){t[wp]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):dc(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),dc(t,!0),r.enter(t)):r.leave(t,()=>{dc(t,!1)}):dc(t,e))},beforeUnmount(t,{value:e}){dc(t,e)}};function dc(t,e){t.style.display=e?t[wp]:"none",t[Ok]=!e}function SU(){Vs.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const Nk=Symbol("");function CU(t){const e=Ss();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>qy(s,i))},r=()=>{const i=t(e.proxy);Gy(e.subTree,i),n(i)};HA(r),zt(()=>{const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Ko(()=>i.disconnect())})}function Gy(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Gy(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)qy(t.el,e);else if(t.type===Ae)t.children.forEach(n=>Gy(n,e));else if(t.type===Ia){let{el:n,anchor:r}=t;for(;n&&(qy(n,e),n!==r);)n=n.nextSibling}}function qy(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[Nk]=r}}const IU=/(^|;)\s*display\s*:/;function AU(t,e,n){const r=t.style,i=bn(n);let s=!1;if(n&&!i){if(e)if(bn(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&jf(r,a,"")}else for(const o in e)n[o]==null&&jf(r,o,"");for(const o in n)o==="display"&&(s=!0),jf(r,o,n[o])}else if(i){if(e!==n){const o=r[Nk];o&&(n+=";"+o),r.cssText=n,s=IU.test(n)}}else e&&t.removeAttribute("style");wp in t&&(t[wp]=s?r.display:"",t[Ok]&&(r.display="none"))}const IT=/\s*!important$/;function jf(t,e,n){if(je(n))n.forEach(r=>jf(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=kU(t,e);IT.test(n)?t.setProperty(ci(r),n.replace(IT,""),"important"):t[r]=n}}const AT=["Webkit","Moz","ms"],lv={};function kU(t,e){const n=lv[e];if(n)return n;let r=jr(e);if(r!=="filter"&&r in t)return lv[e]=r;r=ah(r);for(let i=0;i<AT.length;i++){const s=AT[i]+r;if(s in t)return lv[e]=s}return e}const kT="http://www.w3.org/1999/xlink";function DU(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(kT,e.slice(6,e.length)):t.setAttributeNS(kT,e,n);else{const s=a$(e);n==null||s&&!cA(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function xU(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?t.getAttribute("value")||"":t.value,c=n??"";(u!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=cA(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Ps(t,e,n,r){t.addEventListener(e,n,r)}function PU(t,e,n,r){t.removeEventListener(e,n,r)}const DT=Symbol("_vei");function RU(t,e,n,r,i=null){const s=t[DT]||(t[DT]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=OU(e);if(r){const u=s[e]=$U(r,i);Ps(t,a,u,l)}else o&&(PU(t,a,o,l),s[e]=void 0)}}const xT=/(?:Once|Passive|Capture)$/;function OU(t){let e;if(xT.test(t)){e={};let r;for(;r=t.match(xT);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ci(t.slice(2)),e]}let uv=0;const NU=Promise.resolve(),MU=()=>uv||(NU.then(()=>uv=0),uv=Date.now());function $U(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;pi(LU(r,n.value),e,5,[r])};return n.value=t,n.attached=MU(),n}function LU(t,e){if(je(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const PT=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,UU=(t,e,n,r,i,s,o,a,l)=>{const u=i==="svg";e==="class"?EU(t,r,u):e==="style"?AU(t,n,r):oh(e)?$w(e)||RU(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):FU(t,e,r,u))?xU(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),DU(t,e,r,u))};function FU(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&PT(e)&&rt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return PT(e)&&bn(n)?!1:e in t}/*! #__NO_SIDE_EFFECTS__ */function Mk(t,e){const n=Ee(t);class r extends jm{constructor(s){super(n,s,e)}}return r.def=n,r}/*! #__NO_SIDE_EFFECTS__ */const VU=t=>Mk(t,zk),BU=typeof HTMLElement<"u"?HTMLElement:class{};class jm extends BU{constructor(e,n={},r){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),Wn(()=>{this._connected||(ja(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{const{props:s,styles:o}=r;let a;if(s&&!je(s))for(const l in s){const u=s[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=dp(this._props[l])),(a||(a=Object.create(null)))[jr(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this._applyStyles(o),this._update()},n=this._def.__asyncLoader;n?n().then(r=>e(r,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,r=je(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i],!0,!1);for(const i of r.map(jr))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s)}})}_setAttr(e){let n=this.getAttribute(e);const r=jr(e);this._numberProps&&this._numberProps[r]&&(n=dp(n)),this._setProp(r,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!0){n!==this._props[e]&&(this._props[e]=n,i&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(ci(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(ci(e),n+""):n||this.removeAttribute(ci(e))))}_update(){ja(this._createVNode(),this.shadowRoot)}_createVNode(){const e=ee(this._def,wn({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const r=(s,o)=>{this.dispatchEvent(new CustomEvent(s,{detail:o}))};n.emit=(s,...o)=>{r(s,o),ci(s)!==s&&r(ci(s),o)};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof jm){n.parent=i._instance,n.provides=i._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}function jU(t="$style"){{const e=Ss();if(!e)return qt;const n=e.type.__cssModules;if(!n)return qt;const r=n[t];return r||qt}}const $k=new WeakMap,Lk=new WeakMap,bp=Symbol("_moveCb"),RT=Symbol("_enterCb"),Uk={name:"TransitionGroup",props:wn({},bU,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ss(),r=ib();let i,s;return Fm(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!KU(i[0].el,n.vnode.el,o))return;i.forEach(WU),i.forEach(YU);const a=i.filter(zU);Rk(),a.forEach(l=>{const u=l.el,c=u.style;Ds(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const d=u[bp]=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",d),u[bp]=null,ho(u,o))};u.addEventListener("transitionend",d)})}),()=>{const o=yt(t),a=xk(o);let l=o.tag||Ae;i=s,s=e.default?Lm(e.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&La(c,Tu(c,a,r,n))}if(i)for(let u=0;u<i.length;u++){const c=i[u];La(c,Tu(c,a,r,n)),$k.set(c,c.el.getBoundingClientRect())}return ee(l,null,s)}}},HU=t=>delete t.mode;Uk.props;const Fk=Uk;function WU(t){const e=t.el;e[bp]&&e[bp](),e[RT]&&e[RT]()}function YU(t){Lk.set(t,t.el.getBoundingClientRect())}function zU(t){const e=$k.get(t),n=Lk.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function KU(t,e,n){const r=t.cloneNode(),i=t[Eu];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=Pk(r);return s.removeChild(r),o}const jo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return je(e)?n=>iu(e,n):e};function GU(t){t.target.composing=!0}function OT(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ki=Symbol("_assign"),_p={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[ki]=jo(i);const s=r||i.props&&i.props.type==="number";Ps(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=bd(a)),t[ki](a)}),n&&Ps(t,"change",()=>{t.value=t.value.trim()}),e||(Ps(t,"compositionstart",GU),Ps(t,"compositionend",OT),Ps(t,"change",OT))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[ki]=jo(s),t.composing)return;const o=i||t.type==="number"?bd(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},Hm={deep:!0,created(t,e,n){t[ki]=jo(n),Ps(t,"change",()=>{const r=t._modelValue,i=Su(t),s=t.checked,o=t[ki];if(je(r)){const a=km(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const u=[...r];u.splice(a,1),o(u)}}else if(ol(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(Vk(t,s))})},mounted:NT,beforeUpdate(t,e,n){t[ki]=jo(n),NT(t,e,n)}};function NT(t,{value:e,oldValue:n},r){t._modelValue=e,je(e)?t.checked=km(e,r.props.value)>-1:ol(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Vo(e,Vk(t,!0)))}const db={created(t,{value:e},n){t.checked=Vo(e,n.props.value),t[ki]=jo(n),Ps(t,"change",()=>{t[ki](Su(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[ki]=jo(r),e!==n&&(t.checked=Vo(e,r.props.value))}},hb={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=ol(e);Ps(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?bd(Su(o)):Su(o));t[ki](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,Wn(()=>{t._assigning=!1})}),t[ki]=jo(r)},mounted(t,{value:e,modifiers:{number:n}}){MT(t,e,n)},beforeUpdate(t,e,n){t[ki]=jo(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||MT(t,e,n)}};function MT(t,e,n){const r=t.multiple,i=je(e);if(!(r&&!i&&!ol(e))){for(let s=0,o=t.options.length;s<o;s++){const a=t.options[s],l=Su(a);if(r)if(i){const u=typeof l;u==="string"||u==="number"?a.selected=e.includes(n?bd(l):l):a.selected=km(e,l)>-1}else a.selected=e.has(l);else if(Vo(Su(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Su(t){return"_value"in t?t._value:t.value}function Vk(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Bk={created(t,e,n){sf(t,e,n,null,"created")},mounted(t,e,n){sf(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){sf(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){sf(t,e,n,r,"updated")}};function jk(t,e){switch(t){case"SELECT":return hb;case"TEXTAREA":return _p;default:switch(e){case"checkbox":return Hm;case"radio":return db;default:return _p}}}function sf(t,e,n,r,i){const o=jk(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function qU(){_p.getSSRProps=({value:t})=>({value:t}),db.getSSRProps=({value:t},e)=>{if(e.props&&Vo(e.props.value,t))return{checked:!0}},Hm.getSSRProps=({value:t},e)=>{if(je(t)){if(e.props&&km(t,e.props.value)>-1)return{checked:!0}}else if(ol(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},Bk.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=jk(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const XU=["ctrl","shift","alt","meta"],QU={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>XU.some(n=>t[`${n}Key`]&&!e.includes(n))},Mt=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=QU[e[o]];if(a&&a(i,e))return}return t(i,...s)})},JU={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},at=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=ci(i.key);if(e.some(o=>o===s||JU[o]===s))return t(i)})},Hk=wn({patchProp:UU},wU);let Xc,$T=!1;function Wk(){return Xc||(Xc=hk(Hk))}function Yk(){return Xc=$T?Xc:fk(Hk),$T=!0,Xc}const ja=(...t)=>{Wk().render(...t)},zk=(...t)=>{Yk().hydrate(...t)},Kk=(...t)=>{const e=Wk().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=qk(r);if(!i)return;const s=e._component;!rt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,Gk(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},ZU=(...t)=>{const e=Yk().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=qk(r);if(i)return n(i,!0,Gk(i))},e};function Gk(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function qk(t){return bn(t)?document.querySelector(t):t}let LT=!1;const eF=()=>{LT||(LT=!0,qU(),SU())};/**
* vue v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const tF=()=>{},nF=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:zA,BaseTransitionPropsValidators:sb,Comment:Dr,DeprecationTypes:gU,EffectScope:Vw,ErrorCodes:H$,ErrorTypeStrings:uU,Fragment:Ae,KeepAlive:pL,ReactiveEffect:bu,Static:Ia,Suspense:iL,Teleport:vk,Text:Ua,TrackOpTypes:V$,Transition:Cs,TransitionGroup:Fk,TriggerOpTypes:B$,VueElement:jm,assertNumber:j$,callWithAsyncErrorHandling:pi,callWithErrorHandling:Fs,camelize:jr,capitalize:ah,cloneVNode:bs,compatUtils:mU,compile:tF,computed:Z,createApp:Kk,createBlock:ce,createCommentVNode:ne,createElementBlock:z,createElementVNode:J,createHydrationRenderer:fk,createPropsRestProxy:kL,createRenderer:hk,createSSRApp:ZU,createSlots:gr,createStaticVNode:QL,createTextVNode:Qe,createVNode:ee,customRef:DA,defineAsyncComponent:hL,defineComponent:Ee,defineCustomElement:Mk,defineEmits:wL,defineExpose:bL,defineModel:EL,defineOptions:_L,defineProps:yL,defineSSRCustomElement:VU,defineSlots:TL,devtools:cU,effect:c$,effectScope:Dm,getCurrentInstance:Ss,getCurrentScope:xm,getTransitionRawChildren:Lm,guardReactiveProps:sr,h:Ba,handleError:ul,hasInjectionContext:ok,hydrate:zk,initCustomFormatter:oU,initDirectivesForSSR:eF,inject:Hr,isMemoSame:Ak,isProxy:Kw,isReactive:fs,isReadonly:$a,isRef:an,isRuntimeOnly:nU,isShallow:_d,isVNode:Bo,markRaw:lh,mergeDefaults:IL,mergeModels:AL,mergeProps:Xt,nextTick:Wn,normalizeClass:Me,normalizeProps:xn,normalizeStyle:Gn,onActivated:GA,onBeforeMount:QA,onBeforeUnmount:hh,onBeforeUpdate:ob,onDeactivated:qA,onErrorCaptured:tk,onMounted:zt,onRenderTracked:ek,onRenderTriggered:ZA,onScopeDispose:Bw,onServerPrefetch:JA,onUnmounted:Ko,onUpdated:Fm,openBlock:x,popScopeId:Zw,provide:uu,proxyRefs:Xw,pushScopeId:Jw,queuePostFlushCb:fp,reactive:On,readonly:zw,ref:re,registerRuntimeCompiler:tU,render:ja,renderList:dt,renderSlot:xe,resolveComponent:Zs,resolveDirective:nL,resolveDynamicComponent:uh,resolveFilter:pU,resolveTransitionHooks:Tu,setBlockTracking:jy,setDevtoolsHook:dU,setTransitionHooks:La,shallowReactive:Yw,shallowReadonly:P$,shallowRef:AA,ssrContextKey:VA,ssrUtils:fU,stop:d$,toDisplayString:Je,toHandlerKey:zc,toHandlers:gL,toRaw:yt,toRef:_u,toRefs:xA,toValue:M$,transformVNodeArgs:qL,triggerRef:N$,unref:k,useAttrs:CL,useCssModule:jU,useCssVars:CU,useModel:sU,useSSRContext:BA,useSlots:Go,useTransitionState:ib,vModelCheckbox:Hm,vModelDynamic:Bk,vModelRadio:db,vModelSelect:hb,vModelText:_p,vShow:Vs,version:kk,warn:lU,watch:St,watchEffect:jA,watchPostEffect:HA,watchSyncEffect:WA,withAsyncContext:DL,withCtx:fe,withDefaults:SL,withDirectives:ps,withKeys:at,withMemo:aU,withModifiers:Mt,withScopeId:X$},Symbol.toStringTag,{value:"Module"}));function rF(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(i){i(n)}),(r=t.get("*"))&&r.slice().map(function(i){i(e,n)})}}}const Tp=rF();let UT=0;const iF=()=>{const t=UT;return UT+=1,t},Xk=()=>(t,e)=>{const n={...t,id:iF(),group:t.group||""};return Tp.emit("notify",{notification:n,timeout:e}),()=>Tp.emit("close",n.id)},Qk="context",Xy=Ee({__name:"Notification",props:{maxNotifications:{default:10},enter:{default:""},enterFrom:{default:""},enterTo:{default:""},leave:{default:""},leaveFrom:{default:""},leaveTo:{default:""},move:{default:""},moveDelay:{default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=Hr(Qk),i=On({notifications:[],timeouts:{}}),s=Z(()=>i.notifications.filter(h=>h.group===r.group)),o=Z(()=>r.position==="bottom"?[...s.value]:[...s.value].reverse()),a=(h,f)=>{i.timeouts[h]=window.setTimeout(()=>{f!==-1&&l(h)},Math.max(f||3e3,0))},l=h=>{i.notifications.splice(i.notifications.findIndex(f=>f.id===h),1),clearTimeout(i.timeouts[h])},u=({notification:h,timeout:f})=>{i.notifications.length!==n.maxNotifications&&(i.notifications.push(h),a(h.id,f))},c=h=>{e("close"),l(h)},d=(h,f,p)=>{f?clearTimeout(i.timeouts[h]):a(h,p)};return zt(()=>{Tp.on("notify",u),Tp.on("close",l)}),(h,f)=>(x(),ce(Fk,{"enter-active-class":k(s).length>1?[n.enter,n.moveDelay].join(" "):n.enter,"enter-from-class":n.enterFrom,"enter-to-class":n.enterTo,"leave-active-class":n.leave,"leave-from-class":n.leaveFrom,"leave-to-class":n.leaveTo,"move-class":n.move},{default:fe(()=>[xe(h.$slots,"default",{notifications:k(o),close:c,hovering:d})]),_:3},8,["enter-active-class","enter-from-class","enter-to-class","leave-active-class","leave-from-class","leave-to-class","move-class"]))}}),FT=Ee({__name:"NotificationGroup",props:{group:{default:""},position:{default:"top"}},setup(t){const e=t;return uu(Qk,{group:e.group,position:e.position}),(n,r)=>xe(n.$slots,"default",{group:t.group})}});function sF(t){t.config.globalProperties.$notify=Xk(),t.component("Notification",Xy),t.component("NotificationGroup",FT),t.component("notification",Xy),t.component("notificationGroup",FT)}const oF={install:sF},aF=Xk(),lF={class:"px-4 py-2 -mx-3"},uF={class:"mx-3"},cF={class:"font-semibold text-white"},dF={class:"text-sm text-gray-100"},cv=Ee({__name:"Notification",props:{type:{},color:{}},setup(t){return(e,n)=>(x(),ce(k(Xy),{enter:"transform ease-out duration-300 transition","enter-from":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-4","enter-to":"translate-y-0 opacity-100 sm:translate-x-0",leave:"transition ease-in duration-500","leave-from":"opacity-100","leave-to":"opacity-0",move:"transition duration-500","move-delay":"delay-300"},{default:fe(({notifications:r})=>[(x(!0),z(Ae,null,dt(r,i=>(x(),z("div",{key:i.id},[i.type===e.type?(x(),z("div",{key:0,class:Me("flex w-full max-w-sm mx-auto mt-4 overflow-hidden bg-opacity-75 rounded-lg shadow-md "+e.color)},[J("div",lF,[J("div",uF,[J("span",cF,Je(i.title),1),J("p",dF,Je(i.text),1)])])],2)):ne("",!0)]))),128))]),_:1}))}}),hF={class:"fixed inset-0 flex items-end justify-center p-6 px-4 py-6 pointer-events-none"},fF={class:"w-full max-w-sm"},pF=Ee({__name:"NotificationGroup",setup(t){return(e,n)=>{const r=Zs("NotificationGroup",!0);return x(),ce(r,null,{default:fe(()=>[J("div",hF,[J("div",fF,[ee(cv,{type:"error",color:"bg-red-800"}),ee(cv,{type:"warning",color:"bg-yellow-800"}),ee(cv,{type:"success",color:"bg-green-800"})])])]),_:1})}}});/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ml=typeof document<"u";function mF(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Gt=Object.assign;function dv(t,e){const n={};for(const r in e){const i=e[r];n[r]=Xi(i)?i.map(t):t(i)}return n}const Qc=()=>{},Xi=Array.isArray,Jk=/#/g,gF=/&/g,vF=/\//g,yF=/=/g,wF=/\?/g,Zk=/\+/g,bF=/%5B/g,_F=/%5D/g,eD=/%5E/g,TF=/%60/g,tD=/%7B/g,EF=/%7C/g,nD=/%7D/g,SF=/%20/g;function fb(t){return encodeURI(""+t).replace(EF,"|").replace(bF,"[").replace(_F,"]")}function CF(t){return fb(t).replace(tD,"{").replace(nD,"}").replace(eD,"^")}function Qy(t){return fb(t).replace(Zk,"%2B").replace(SF,"+").replace(Jk,"%23").replace(gF,"%26").replace(TF,"`").replace(tD,"{").replace(nD,"}").replace(eD,"^")}function IF(t){return Qy(t).replace(yF,"%3D")}function AF(t){return fb(t).replace(Jk,"%23").replace(wF,"%3F")}function kF(t){return t==null?"":AF(t).replace(vF,"%2F")}function kd(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const DF=/\/$/,xF=t=>t.replace(DF,"");function hv(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=NF(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:kd(o)}}function PF(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function VT(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function RF(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Cu(e.matched[r],n.matched[i])&&rD(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Cu(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function rD(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!OF(t[n],e[n]))return!1;return!0}function OF(t,e){return Xi(t)?BT(t,e):Xi(e)?BT(e,t):t===e}function BT(t,e){return Xi(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function NF(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}var Dd;(function(t){t.pop="pop",t.push="push"})(Dd||(Dd={}));var Jc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Jc||(Jc={}));function MF(t){if(!t)if(Ml){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),xF(t)}const $F=/^[^#]+#/;function LF(t,e){return t.replace($F,"#")+e}function UF(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Wm=()=>({left:window.scrollX,top:window.scrollY});function FF(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=UF(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function jT(t,e){return(history.state?history.state.position-e:-1)+t}const Jy=new Map;function VF(t,e){Jy.set(t,e)}function BF(t){const e=Jy.get(t);return Jy.delete(t),e}let jF=()=>location.protocol+"//"+location.host;function iD(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),VT(l,"")}return VT(n,t)+r+i}function HF(t,e,n,r){let i=[],s=[],o=null;const a=({state:h})=>{const f=iD(t,location),p=n.value,m=e.value;let v=0;if(h){if(n.value=f,e.value=h,o&&o===p){o=null;return}v=m?h.position-m.position:0}else r(f);i.forEach(b=>{b(n.value,p,{delta:v,type:Dd.pop,direction:v?v>0?Jc.forward:Jc.back:Jc.unknown})})};function l(){o=n.value}function u(h){i.push(h);const f=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return s.push(f),f}function c(){const{history:h}=window;h.state&&h.replaceState(Gt({},h.state,{scroll:Wm()}),"")}function d(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function HT(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Wm():null}}function WF(t){const{history:e,location:n}=window,r={value:iD(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,u,c){const d=t.indexOf("#"),h=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:jF()+t+l;try{e[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(f){console.error(f),n[c?"replace":"assign"](h)}}function o(l,u){const c=Gt({},e.state,HT(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});s(l,c,!0),r.value=l}function a(l,u){const c=Gt({},i.value,e.state,{forward:l,scroll:Wm()});s(c.current,c,!0);const d=Gt({},HT(r.value,l,null),{position:c.position+1},u);s(l,d,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function YF(t){t=MF(t);const e=WF(t),n=HF(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Gt({location:"",base:t,go:r,createHref:LF.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function zF(t){return typeof t=="string"||t&&typeof t=="object"}function sD(t){return typeof t=="string"||typeof t=="symbol"}const ao={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},oD=Symbol("");var WT;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(WT||(WT={}));function Iu(t,e){return Gt(new Error,{type:t,[oD]:!0},e)}function ks(t,e){return t instanceof Error&&oD in t&&(e==null||!!(t.type&e))}const YT="[^/]+?",KF={sensitive:!1,strict:!1,start:!0,end:!0},GF=/[.+*?^${}()[\]/\\]/g;function qF(t,e){const n=Gt({},KF,e),r=[];let i=n.start?"^":"";const s=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const h=u[d];let f=40+(n.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(GF,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:m,optional:v,regexp:b}=h;s.push({name:p,repeatable:m,optional:v});const g=b||YT;if(g!==YT){f+=10;try{new RegExp(`(${g})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${p}" (${g}): `+y.message)}}let _=m?`((?:${g})(?:/(?:${g}))*)`:`(${g})`;d||(_=v&&u.length<2?`(?:/${_})`:"/"+_),v&&(_+="?"),i+=_,f+=20,v&&(f+=-8),m&&(f+=-20),g===".*"&&(f+=-50)}c.push(f)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const c=u.match(o),d={};if(!c)return null;for(let h=1;h<c.length;h++){const f=c[h]||"",p=s[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function l(u){let c="",d=!1;for(const h of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const f of h)if(f.type===0)c+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:v}=f,b=p in u?u[p]:"";if(Xi(b)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const g=Xi(b)?b.join("/"):b;if(!g)if(v)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=g}}return c||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function XF(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function QF(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=XF(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(zT(r))return 1;if(zT(i))return-1}return i.length-r.length}function zT(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const JF={type:0,value:""},ZF=/[a-zA-Z0-9_]/;function e3(t){if(!t)return[[]];if(t==="/")return[[JF]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,u="",c="";function d(){u&&(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):h();break;case 4:h(),n=r;break;case 1:l==="("?n=2:ZF.test(l)?h():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}function t3(t,e,n){const r=qF(e3(t.path),n),i=Gt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function n3(t,e){const n=[],r=new Map;e=qT({strict:!1,end:!0,sensitive:!1},e);function i(c){return r.get(c)}function s(c,d,h){const f=!h,p=r3(c);p.aliasOf=h&&h.record;const m=qT(e,c),v=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const y of _)v.push(Gt({},p,{components:h?h.record.components:p.components,path:y,aliasOf:h?h.record:p}))}let b,g;for(const _ of v){const{path:y}=_;if(d&&y[0]!=="/"){const w=d.record.path,T=w[w.length-1]==="/"?"":"/";_.path=d.record.path+(y&&T+y)}if(b=t3(_,d,m),h?h.alias.push(b):(g=g||b,g!==b&&g.alias.push(b),f&&c.name&&!GT(b)&&o(c.name)),p.children){const w=p.children;for(let T=0;T<w.length;T++)s(w[T],b,h&&h.children[T])}h=h||b,(b.record.components&&Object.keys(b.record.components).length||b.record.name||b.record.redirect)&&l(b)}return g?()=>{o(g)}:Qc}function o(c){if(sD(c)){const d=r.get(c);d&&(r.delete(c),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(c);d>-1&&(n.splice(d,1),c.record.name&&r.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return n}function l(c){let d=0;for(;d<n.length&&QF(c,n[d])>=0&&(c.record.path!==n[d].record.path||!aD(c,n[d]));)d++;n.splice(d,0,c),c.record.name&&!GT(c)&&r.set(c.record.name,c)}function u(c,d){let h,f={},p,m;if("name"in c&&c.name){if(h=r.get(c.name),!h)throw Iu(1,{location:c});m=h.record.name,f=Gt(KT(d.params,h.keys.filter(g=>!g.optional).concat(h.parent?h.parent.keys.filter(g=>g.optional):[]).map(g=>g.name)),c.params&&KT(c.params,h.keys.map(g=>g.name))),p=h.stringify(f)}else if(c.path!=null)p=c.path,h=n.find(g=>g.re.test(p)),h&&(f=h.parse(p),m=h.record.name);else{if(h=d.name?r.get(d.name):n.find(g=>g.re.test(d.path)),!h)throw Iu(1,{location:c,currentLocation:d});m=h.record.name,f=Gt({},d.params,c.params),p=h.stringify(f)}const v=[];let b=h;for(;b;)v.unshift(b.record),b=b.parent;return{name:m,path:p,params:f,matched:v,meta:s3(v)}}return t.forEach(c=>s(c)),{addRoute:s,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function KT(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function r3(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:i3(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function i3(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function GT(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function s3(t){return t.reduce((e,n)=>Gt(e,n.meta),{})}function qT(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function aD(t,e){return e.children.some(n=>n===t||aD(t,n))}function o3(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(Zk," "),o=s.indexOf("="),a=kd(o<0?s:s.slice(0,o)),l=o<0?null:kd(s.slice(o+1));if(a in e){let u=e[a];Xi(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function XT(t){let e="";for(let n in t){const r=t[n];if(n=IF(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Xi(r)?r.map(s=>s&&Qy(s)):[r&&Qy(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function a3(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Xi(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const l3=Symbol(""),QT=Symbol(""),Ym=Symbol(""),pb=Symbol(""),Zy=Symbol("");function hc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function wo(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=h=>{h===!1?l(Iu(4,{from:n,to:e})):h instanceof Error?l(h):zF(h)?l(Iu(2,{from:e,to:h})):(o&&r.enterCallbacks[i]===o&&typeof h=="function"&&o.push(h),a())},c=s(()=>t.call(r&&r.instances[i],e,n,u));let d=Promise.resolve(c);t.length<3&&(d=d.then(u)),d.catch(h=>l(h))})}function fv(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(u3(l)){const c=(l.__vccOpts||l)[e];c&&s.push(wo(c,n,r,o,a,i))}else{let u=l();s.push(()=>u.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=mF(c)?c.default:c;o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&wo(f,n,r,o,a,i)()}))}}return s}function u3(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function JT(t){const e=Hr(Ym),n=Hr(pb),r=Z(()=>e.resolve(k(t.to))),i=Z(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const h=d.findIndex(Cu.bind(null,c));if(h>-1)return h;const f=ZT(l[u-2]);return u>1&&ZT(c)===f&&d[d.length-1].path!==f?d.findIndex(Cu.bind(null,l[u-2])):h}),s=Z(()=>i.value>-1&&f3(n.params,r.value.params)),o=Z(()=>i.value>-1&&i.value===n.matched.length-1&&rD(n.params,r.value.params));function a(l={}){return h3(l)?e[k(t.replace)?"replace":"push"](k(t.to)).catch(Qc):Promise.resolve()}return{route:r,href:Z(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const c3=Ee({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:JT,setup(t,{slots:e}){const n=On(JT(t)),{options:r}=Hr(Ym),i=Z(()=>({[eE(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[eE(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Ba("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),d3=c3;function h3(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function f3(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Xi(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function ZT(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const eE=(t,e,n)=>t??e??n,p3=Ee({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Hr(Zy),i=Z(()=>t.route||r.value),s=Hr(QT,0),o=Z(()=>{let u=k(s);const{matched:c}=i.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),a=Z(()=>i.value.matched[o.value]);uu(QT,Z(()=>o.value+1)),uu(l3,a),uu(Zy,i);const l=re();return St(()=>[l.value,a.value,t.name],([u,c,d],[h,f,p])=>{c&&(c.instances[d]=u,f&&f!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!Cu(c,f)||!h)&&(c.enterCallbacks[d]||[]).forEach(m=>m(u))},{flush:"post"}),()=>{const u=i.value,c=t.name,d=a.value,h=d&&d.components[c];if(!h)return tE(n.default,{Component:h,route:u});const f=d.props[c],p=f?f===!0?u.params:typeof f=="function"?f(u):f:null,v=Ba(h,Gt({},p,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return tE(n.default,{Component:v,route:u})||v}}});function tE(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const lD=p3;function m3(t){const e=n3(t.routes,t),n=t.parseQuery||o3,r=t.stringifyQuery||XT,i=t.history,s=hc(),o=hc(),a=hc(),l=AA(ao);let u=ao;Ml&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=dv.bind(null,W=>""+W),d=dv.bind(null,kF),h=dv.bind(null,kd);function f(W,se){let G,ue;return sD(W)?(G=e.getRecordMatcher(W),ue=se):ue=W,e.addRoute(ue,G)}function p(W){const se=e.getRecordMatcher(W);se&&e.removeRoute(se)}function m(){return e.getRoutes().map(W=>W.record)}function v(W){return!!e.getRecordMatcher(W)}function b(W,se){if(se=Gt({},se||l.value),typeof W=="string"){const M=hv(n,W,se.path),j=e.resolve({path:M.path},se),oe=i.createHref(M.fullPath);return Gt(M,j,{params:h(j.params),hash:kd(M.hash),redirectedFrom:void 0,href:oe})}let G;if(W.path!=null)G=Gt({},W,{path:hv(n,W.path,se.path).path});else{const M=Gt({},W.params);for(const j in M)M[j]==null&&delete M[j];G=Gt({},W,{params:d(M)}),se.params=d(se.params)}const ue=e.resolve(G,se),ve=W.hash||"";ue.params=c(h(ue.params));const ie=PF(r,Gt({},W,{hash:CF(ve),path:ue.path})),C=i.createHref(ie);return Gt({fullPath:ie,hash:ve,query:r===XT?a3(W.query):W.query||{}},ue,{redirectedFrom:void 0,href:C})}function g(W){return typeof W=="string"?hv(n,W,l.value.path):Gt({},W)}function _(W,se){if(u!==W)return Iu(8,{from:se,to:W})}function y(W){return P(W)}function w(W){return y(Gt(g(W),{replace:!0}))}function T(W){const se=W.matched[W.matched.length-1];if(se&&se.redirect){const{redirect:G}=se;let ue=typeof G=="function"?G(W):G;return typeof ue=="string"&&(ue=ue.includes("?")||ue.includes("#")?ue=g(ue):{path:ue},ue.params={}),Gt({query:W.query,hash:W.hash,params:ue.path!=null?{}:W.params},ue)}}function P(W,se){const G=u=b(W),ue=l.value,ve=W.state,ie=W.force,C=W.replace===!0,M=T(G);if(M)return P(Gt(g(M),{state:typeof M=="object"?Gt({},ve,M.state):ve,force:ie,replace:C}),se||G);const j=G;j.redirectedFrom=se;let oe;return!ie&&RF(r,ue,G)&&(oe=Iu(16,{to:j,from:ue}),X(ue,ue,!0,!1)),(oe?Promise.resolve(oe):E(j,ue)).catch(ae=>ks(ae)?ks(ae,2)?ae:S(ae):Y(ae,j,ue)).then(ae=>{if(ae){if(ks(ae,2))return P(Gt({replace:C},g(ae.to),{state:typeof ae.to=="object"?Gt({},ve,ae.to.state):ve,force:ie}),se||j)}else ae=F(j,ue,!0,C,ve);return U(j,ue,ae),ae})}function A(W,se){const G=_(W,se);return G?Promise.reject(G):Promise.resolve()}function I(W){const se=me.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(W):W()}function E(W,se){let G;const[ue,ve,ie]=g3(W,se);G=fv(ue.reverse(),"beforeRouteLeave",W,se);for(const M of ue)M.leaveGuards.forEach(j=>{G.push(wo(j,W,se))});const C=A.bind(null,W,se);return G.push(C),V(G).then(()=>{G=[];for(const M of s.list())G.push(wo(M,W,se));return G.push(C),V(G)}).then(()=>{G=fv(ve,"beforeRouteUpdate",W,se);for(const M of ve)M.updateGuards.forEach(j=>{G.push(wo(j,W,se))});return G.push(C),V(G)}).then(()=>{G=[];for(const M of ie)if(M.beforeEnter)if(Xi(M.beforeEnter))for(const j of M.beforeEnter)G.push(wo(j,W,se));else G.push(wo(M.beforeEnter,W,se));return G.push(C),V(G)}).then(()=>(W.matched.forEach(M=>M.enterCallbacks={}),G=fv(ie,"beforeRouteEnter",W,se,I),G.push(C),V(G))).then(()=>{G=[];for(const M of o.list())G.push(wo(M,W,se));return G.push(C),V(G)}).catch(M=>ks(M,8)?M:Promise.reject(M))}function U(W,se,G){a.list().forEach(ue=>I(()=>ue(W,se,G)))}function F(W,se,G,ue,ve){const ie=_(W,se);if(ie)return ie;const C=se===ao,M=Ml?history.state:{};G&&(ue||C?i.replace(W.fullPath,Gt({scroll:C&&M&&M.scroll},ve)):i.push(W.fullPath,ve)),l.value=W,X(W,se,G,C),S()}let N;function D(){N||(N=i.listen((W,se,G)=>{if(!te.listening)return;const ue=b(W),ve=T(ue);if(ve){P(Gt(ve,{replace:!0}),ue).catch(Qc);return}u=ue;const ie=l.value;Ml&&VF(jT(ie.fullPath,G.delta),Wm()),E(ue,ie).catch(C=>ks(C,12)?C:ks(C,2)?(P(C.to,ue).then(M=>{ks(M,20)&&!G.delta&&G.type===Dd.pop&&i.go(-1,!1)}).catch(Qc),Promise.reject()):(G.delta&&i.go(-G.delta,!1),Y(C,ue,ie))).then(C=>{C=C||F(ue,ie,!1),C&&(G.delta&&!ks(C,8)?i.go(-G.delta,!1):G.type===Dd.pop&&ks(C,20)&&i.go(-1,!1)),U(ue,ie,C)}).catch(Qc)}))}let O=hc(),R=hc(),B;function Y(W,se,G){S(W);const ue=R.list();return ue.length?ue.forEach(ve=>ve(W,se,G)):console.error(W),Promise.reject(W)}function $(){return B&&l.value!==ao?Promise.resolve():new Promise((W,se)=>{O.add([W,se])})}function S(W){return B||(B=!W,D(),O.list().forEach(([se,G])=>W?G(W):se()),O.reset()),W}function X(W,se,G,ue){const{scrollBehavior:ve}=t;if(!Ml||!ve)return Promise.resolve();const ie=!G&&BF(jT(W.fullPath,0))||(ue||!G)&&history.state&&history.state.scroll||null;return Wn().then(()=>ve(W,se,ie)).then(C=>C&&FF(C)).catch(C=>Y(C,W,se))}const Q=W=>i.go(W);let pe;const me=new Set,te={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:v,getRoutes:m,resolve:b,options:t,push:y,replace:w,go:Q,back:()=>Q(-1),forward:()=>Q(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:R.add,isReady:$,install(W){const se=this;W.component("RouterLink",d3),W.component("RouterView",lD),W.config.globalProperties.$router=se,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>k(l)}),Ml&&!pe&&l.value===ao&&(pe=!0,y(i.location).catch(ve=>{}));const G={};for(const ve in ao)Object.defineProperty(G,ve,{get:()=>l.value[ve],enumerable:!0});W.provide(Ym,se),W.provide(pb,Yw(G)),W.provide(Zy,l);const ue=W.unmount;me.add(W),W.unmount=function(){me.delete(W),me.size<1&&(u=ao,N&&N(),N=null,l.value=ao,pe=!1,B=!1),ue()}}};function V(W){return W.reduce((se,G)=>se.then(()=>I(G)),Promise.resolve())}return te}function g3(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(u=>Cu(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>Cu(u,l))||i.push(l))}return[n,r,i]}function uD(){return Hr(Ym)}function mb(){return Hr(pb)}const v3=Ee({__name:"App",setup(t){return(e,n)=>(x(),z(Ae,null,[ee(k(lD)),ee(pF)],64))}});var nE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oe=function(t,e){if(!t)throw Xu(e)},Xu=function(t){return new Error("Firebase Database ("+cD.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},y3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):y3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new w3;const h=s<<2|a>>4;if(r.push(h),u!==64){const f=a<<4&240|u>>2;if(r.push(f),d!==64){const p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hD=function(t){const e=dD(t);return zm.encodeByteArray(e,!0)},Ep=function(t){return hD(t).replace(/\./g,"")},Sp=function(t){try{return zm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){return fD(void 0,t)}function fD(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!_3(n)||(t[n]=fD(t[n],e[n]));return t}function _3(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=()=>pD().__FIREBASE_DEFAULTS__,E3=()=>{if(typeof process>"u"||typeof nE>"u")return;const t=nE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sp(t[1]);return e&&JSON.parse(e)},Km=()=>{try{return T3()||E3()||S3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mD=t=>{var e,n;return(n=(e=Km())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gD=t=>{const e=mD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vD=()=>{var t;return(t=Km())===null||t===void 0?void 0:t.config},yD=t=>{var e;return(e=Km())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ep(JSON.stringify(n)),Ep(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nr())}function C3(){var t;const e=(t=Km())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _D(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I3(){const t=Nr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TD(){return cD.NODE_ADMIN===!0}function Gm(){try{return typeof indexedDB=="object"}catch{return!1}}function ED(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function A3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3="FirebaseError";class bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=k3,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qo.prototype.create)}}class qo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?D3(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new bi(i,a,r)}}function D3(t,e){return t.replace(x3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const x3=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t){return JSON.parse(t)}function pr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=xd(Sp(s[0])||""),n=xd(Sp(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},P3=function(t){const e=SD(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},R3=function(t){const e=SD(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Au(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function e0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cp(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Pd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(rE(s)&&rE(o)){if(!Pd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Rc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,c;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):d<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const h=(i<<5|i>>>27)+u+l+c+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function N3(t,e){const n=new M3(t,e);return n.subscribe.bind(n)}class M3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=pv),i.error===void 0&&(i.error=pv),i.complete===void 0&&(i.complete=pv);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pv(){}function L3(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Oe(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qm=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=1e3,B3=2,j3=4*60*60*1e3,H3=.5;function t0(t,e=V3,n=B3){const r=e*Math.pow(n,t),i=Math.round(H3*r*(Math.random()-.5)*2);return Math.min(j3,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ha;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z3(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y3(t){return t===la?void 0:t}function z3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new W3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Nt||(Nt={}));const G3={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},q3=Nt.INFO,X3={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},Q3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=X3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ju{constructor(e){this.name=e,this._logLevel=q3,this._logHandler=Q3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...e),this._logHandler(this,Nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...e),this._logHandler(this,Nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...e),this._logHandler(this,Nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...e),this._logHandler(this,Nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...e),this._logHandler(this,Nt.ERROR,...e)}}const J3=(t,e)=>e.some(n=>t instanceof n);let iE,sE;function Z3(){return iE||(iE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e4(){return sE||(sE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CD=new WeakMap,n0=new WeakMap,ID=new WeakMap,mv=new WeakMap,vb=new WeakMap;function t4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Po(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&CD.set(n,t)}).catch(()=>{}),vb.set(e,t),e}function n4(t){if(n0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});n0.set(t,e)}let r0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return n0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ID.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Po(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function r4(t){r0=t(r0)}function i4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gv(this),e,...n);return ID.set(r,e.sort?e.sort():[e]),Po(r)}:e4().includes(t)?function(...e){return t.apply(gv(this),e),Po(CD.get(this))}:function(...e){return Po(t.apply(gv(this),e))}}function s4(t){return typeof t=="function"?i4(t):(t instanceof IDBTransaction&&n4(t),J3(t,Z3())?new Proxy(t,r0):t)}function Po(t){if(t instanceof IDBRequest)return t4(t);if(mv.has(t))return mv.get(t);const e=s4(t);return e!==t&&(mv.set(t,e),vb.set(e,t)),e}const gv=t=>vb.get(t);function o4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Po(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Po(o.result),l.oldVersion,l.newVersion,Po(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const a4=["get","getKey","getAll","getAllKeys","count"],l4=["put","add","delete","clear"],vv=new Map;function oE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vv.get(e))return vv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=l4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||a4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return vv.set(e,s),s}r4(t=>({...t,get:(e,n,r)=>oE(e,n)||t.get(e,n,r),has:(e,n)=>!!oE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(c4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function c4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const i0="@firebase/app",aE="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new Ju("@firebase/app"),d4="@firebase/app-compat",h4="@firebase/analytics-compat",f4="@firebase/analytics",p4="@firebase/app-check-compat",m4="@firebase/app-check",g4="@firebase/auth",v4="@firebase/auth-compat",y4="@firebase/database",w4="@firebase/database-compat",b4="@firebase/functions",_4="@firebase/functions-compat",T4="@firebase/installations",E4="@firebase/installations-compat",S4="@firebase/messaging",C4="@firebase/messaging-compat",I4="@firebase/performance",A4="@firebase/performance-compat",k4="@firebase/remote-config",D4="@firebase/remote-config-compat",x4="@firebase/storage",P4="@firebase/storage-compat",R4="@firebase/firestore",O4="@firebase/firestore-compat",N4="firebase",M4="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="[DEFAULT]",$4={[i0]:"fire-core",[d4]:"fire-core-compat",[f4]:"fire-analytics",[h4]:"fire-analytics-compat",[m4]:"fire-app-check",[p4]:"fire-app-check-compat",[g4]:"fire-auth",[v4]:"fire-auth-compat",[y4]:"fire-rtdb",[w4]:"fire-rtdb-compat",[b4]:"fire-fn",[_4]:"fire-fn-compat",[T4]:"fire-iid",[E4]:"fire-iid-compat",[S4]:"fire-fcm",[C4]:"fire-fcm-compat",[I4]:"fire-perf",[A4]:"fire-perf-compat",[k4]:"fire-rc",[D4]:"fire-rc-compat",[x4]:"fire-gcs",[P4]:"fire-gcs-compat",[R4]:"fire-fst",[O4]:"fire-fst-compat","fire-js":"fire-js",[N4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=new Map,o0=new Map;function L4(t,e){try{t.container.addComponent(e)}catch(n){Wa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function si(t){const e=t.name;if(o0.has(e))return Wa.debug(`There were multiple attempts to register component ${e}.`),!1;o0.set(e,t);for(const n of Ip.values())L4(n,t);return!0}function Is(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ro=new qo("app","Firebase",U4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ro.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=M4;function AD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:s0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ro.create("bad-app-name",{appName:String(i)});if(n||(n=vD()),!n)throw Ro.create("no-options");const s=Ip.get(i);if(s){if(Pd(n,s.options)&&Pd(r,s.config))return s;throw Ro.create("duplicate-app",{appName:i})}const o=new K3(i);for(const l of o0.values())o.addComponent(l);const a=new F4(n,r,o);return Ip.set(i,a),a}function Zu(t=s0){const e=Ip.get(t);if(!e&&t===s0&&vD())return AD();if(!e)throw Ro.create("no-app",{appName:t});return e}function vr(t,e,n){var r;let i=(r=$4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wa.warn(a.join(" "));return}si(new Yr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4="firebase-heartbeat-database",B4=1,Rd="firebase-heartbeat-store";let yv=null;function kD(){return yv||(yv=o4(V4,B4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Rd)}}}).catch(t=>{throw Ro.create("idb-open",{originalErrorMessage:t.message})})),yv}async function j4(t){try{return await(await kD()).transaction(Rd).objectStore(Rd).get(DD(t))}catch(e){if(e instanceof bi)Wa.warn(e.message);else{const n=Ro.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wa.warn(n.message)}}}async function lE(t,e){try{const r=(await kD()).transaction(Rd,"readwrite");await r.objectStore(Rd).put(e,DD(t)),await r.done}catch(n){if(n instanceof bi)Wa.warn(n.message);else{const r=Ro.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wa.warn(r.message)}}}function DD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=1024,W4=30*24*60*60*1e3;class Y4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new K4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=uE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=W4}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=uE(),{heartbeatsToSend:n,unsentEntries:r}=z4(this._heartbeatsCache.heartbeats),i=Ep(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function uE(){return new Date().toISOString().substring(0,10)}function z4(t,e=H4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class K4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gm()?ED().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await j4(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cE(t){return Ep(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){si(new Yr("platform-logger",e=>new u4(e),"PRIVATE")),si(new Yr("heartbeat",e=>new Y4(e),"PRIVATE")),vr(i0,aE,t),vr(i0,aE,"esm2017"),vr("fire-js","")}G4("");const q4=(t,e)=>e.some(n=>t instanceof n);let dE,hE;function X4(){return dE||(dE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q4(){return hE||(hE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xD=new WeakMap,a0=new WeakMap,PD=new WeakMap,wv=new WeakMap,yb=new WeakMap;function J4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Oo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xD.set(n,t)}).catch(()=>{}),yb.set(e,t),e}function Z4(t){if(a0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});a0.set(t,e)}let l0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return a0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eV(t){l0=t(l0)}function tV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bv(this),e,...n);return PD.set(r,e.sort?e.sort():[e]),Oo(r)}:Q4().includes(t)?function(...e){return t.apply(bv(this),e),Oo(xD.get(this))}:function(...e){return Oo(t.apply(bv(this),e))}}function nV(t){return typeof t=="function"?tV(t):(t instanceof IDBTransaction&&Z4(t),q4(t,X4())?new Proxy(t,l0):t)}function Oo(t){if(t instanceof IDBRequest)return J4(t);if(wv.has(t))return wv.get(t);const e=nV(t);return e!==t&&(wv.set(t,e),yb.set(e,t)),e}const bv=t=>yb.get(t);function rV(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Oo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Oo(o.result),l.oldVersion,l.newVersion,Oo(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const iV=["get","getKey","getAll","getAllKeys","count"],sV=["put","add","delete","clear"],_v=new Map;function fE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_v.get(e))return _v.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=sV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iV.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return _v.set(e,s),s}eV(t=>({...t,get:(e,n,r)=>fE(e,n)||t.get(e,n,r),has:(e,n)=>!!fE(e,n)||t.has(e,n)}));const RD="@firebase/installations",wb="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=1e4,ND=`w:${wb}`,MD="FIS_v2",oV="https://firebaseinstallations.googleapis.com/v1",aV=60*60*1e3,lV="installations",uV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ya=new qo(lV,uV,cV);function $D(t){return t instanceof bi&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD({projectId:t}){return`${oV}/projects/${t}/installations`}function UD(t){return{token:t.token,requestStatus:2,expiresIn:hV(t.expiresIn),creationTime:Date.now()}}async function FD(t,e){const r=(await e.json()).error;return Ya.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function VD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function dV(t,{refreshToken:e}){const n=VD(t);return n.append("Authorization",fV(e)),n}async function BD(t){const e=await t();return e.status>=500&&e.status<600?t():e}function hV(t){return Number(t.replace("s","000"))}function fV(t){return`${MD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=LD(t),i=VD(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:MD,appId:t.appId,sdkVersion:ND},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await BD(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:UD(u.authToken)}}else throw await FD("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=/^[cdef][\w-]{21}$/,u0="";function vV(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=yV(t);return gV.test(n)?n:u0}catch{return u0}}function yV(t){return mV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new Map;function WD(t,e){const n=Xm(t);YD(n,e),wV(n,e)}function YD(t,e){const n=HD.get(t);if(n)for(const r of n)r(e)}function wV(t,e){const n=bV();n&&n.postMessage({key:t,fid:e}),_V()}let ya=null;function bV(){return!ya&&"BroadcastChannel"in self&&(ya=new BroadcastChannel("[Firebase] FID Change"),ya.onmessage=t=>{YD(t.data.key,t.data.fid)}),ya}function _V(){HD.size===0&&ya&&(ya.close(),ya=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="firebase-installations-database",EV=1,za="firebase-installations-store";let Tv=null;function bb(){return Tv||(Tv=rV(TV,EV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(za)}}})),Tv}async function Ap(t,e){const n=Xm(t),i=(await bb()).transaction(za,"readwrite"),s=i.objectStore(za),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&WD(t,e.fid),e}async function zD(t){const e=Xm(t),r=(await bb()).transaction(za,"readwrite");await r.objectStore(za).delete(e),await r.done}async function Qm(t,e){const n=Xm(t),i=(await bb()).transaction(za,"readwrite"),s=i.objectStore(za),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&WD(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(t){let e;const n=await Qm(t.appConfig,r=>{const i=SV(r),s=CV(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===u0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function SV(t){const e=t||{fid:vV(),registrationStatus:0};return KD(e)}function CV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ya.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=IV(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:AV(t)}:{installationEntry:e}}async function IV(t,e){try{const n=await pV(t,e);return Ap(t.appConfig,n)}catch(n){throw $D(n)&&n.customData.serverCode===409?await zD(t.appConfig):await Ap(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function AV(t){let e=await pE(t.appConfig);for(;e.registrationStatus===1;)await jD(100),e=await pE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await _b(t);return r||n}return e}function pE(t){return Qm(t,e=>{if(!e)throw Ya.create("installation-not-found");return KD(e)})}function KD(t){return kV(t)?{fid:t.fid,registrationStatus:0}:t}function kV(t){return t.registrationStatus===1&&t.registrationTime+OD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DV({appConfig:t,heartbeatServiceProvider:e},n){const r=xV(t,n),i=dV(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:ND,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await BD(()=>fetch(r,a));if(l.ok){const u=await l.json();return UD(u)}else throw await FD("Generate Auth Token",l)}function xV(t,{fid:e}){return`${LD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(t,e=!1){let n;const r=await Qm(t.appConfig,s=>{if(!GD(s))throw Ya.create("not-registered");const o=s.authToken;if(!e&&OV(o))return s;if(o.requestStatus===1)return n=PV(t,e),s;{if(!navigator.onLine)throw Ya.create("app-offline");const a=MV(s);return n=RV(t,a),a}});return n?await n:r.authToken}async function PV(t,e){let n=await mE(t.appConfig);for(;n.authToken.requestStatus===1;)await jD(100),n=await mE(t.appConfig);const r=n.authToken;return r.requestStatus===0?Tb(t,e):r}function mE(t){return Qm(t,e=>{if(!GD(e))throw Ya.create("not-registered");const n=e.authToken;return $V(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function RV(t,e){try{const n=await DV(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ap(t.appConfig,r),n}catch(n){if($D(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await zD(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ap(t.appConfig,r)}throw n}}function GD(t){return t!==void 0&&t.registrationStatus===2}function OV(t){return t.requestStatus===2&&!NV(t)}function NV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+aV}function MV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function $V(t){return t.requestStatus===1&&t.requestTime+OD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(t){const e=t,{installationEntry:n,registrationPromise:r}=await _b(e);return r?r.catch(console.error):Tb(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(t,e=!1){const n=t;return await FV(n),(await Tb(n,e)).token}async function FV(t){const{registrationPromise:e}=await _b(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){if(!t||!t.options)throw Ev("App Configuration");if(!t.name)throw Ev("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ev(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ev(t){return Ya.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="installations",BV="installations-internal",jV=t=>{const e=t.getProvider("app").getImmediate(),n=VV(e),r=Is(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},HV=t=>{const e=t.getProvider("app").getImmediate(),n=Is(e,qD).getImmediate();return{getId:()=>LV(n),getToken:i=>UV(n,i)}};function WV(){si(new Yr(qD,jV,"PUBLIC")),si(new Yr(BV,HV,"PRIVATE"))}WV();vr(RD,wb);vr(RD,wb,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="analytics",YV="firebase_id",zV="origin",KV=60*1e3,GV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Eb="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new Ju("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},mi=new qo("analytics","Analytics",qV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t){if(!t.startsWith(Eb)){const e=mi.create("invalid-gtag-resource",{gtagURL:t});return ri.warn(e.message),""}return t}function XD(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function QV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function JV(t,e){const n=QV("firebase-js-sdk-policy",{createScriptURL:XV}),r=document.createElement("script"),i=`${Eb}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ZV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function e5(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await XD(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){ri.error(a)}t("config",i,s)}async function t5(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await XD(n);for(const l of o){const u=a.find(d=>d.measurementId===l),c=u&&e[u.appId];if(c)s.push(c);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){ri.error(s)}}function n5(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await t5(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await e5(t,e,n,r,a,l)}else if(s==="consent"){const[a]=o;t("consent","update",a)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){ri.error(a)}}return i}function r5(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=n5(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function i5(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Eb)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=30,o5=1e3;class a5{constructor(e={},n=o5){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const QD=new a5;function l5(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function u5(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:l5(r)},s=GV.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw mi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function c5(t,e=QD,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw mi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw mi.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new f5;return setTimeout(async()=>{a.abort()},n!==void 0?n:KV),JD({appId:r,apiKey:i,measurementId:s},o,a,e)}async function JD(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=QD){var s;const{appId:o,measurementId:a}=t;try{await d5(r,e)}catch(l){if(a)return ri.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await u5(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!h5(u)){if(i.deleteThrottleMetadata(o),a)return ri.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const c=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?t0(n,i.intervalMillis,s5):t0(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(o,d),ri.debug(`Calling attemptFetch again in ${c} millis`),JD(t,d,r,i)}}function d5(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(mi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function h5(t){if(!(t instanceof bi)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class f5{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function p5(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(){if(Gm())try{await ED()}catch(t){return ri.warn(mi.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ri.warn(mi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function g5(t,e,n,r,i,s,o){var a;const l=c5(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&ri.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>ri.error(f)),e.push(l);const u=m5().then(f=>{if(f)return r.getId()}),[c,d]=await Promise.all([l,u]);i5(s)||JV(s,c.measurementId),i("js",new Date);const h=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return h[zV]="firebase",h.update=!0,d!=null&&(h[YV]=d),i("config",c.measurementId,h),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.app=e}_delete(){return delete Zc[this.app.options.appId],Promise.resolve()}}let Zc={},gE=[];const vE={};let Sv="dataLayer",y5="gtag",yE,ZD,wE=!1;function w5(){const t=[];if(bD()&&t.push("This is a browser extension environment."),A3()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=mi.create("invalid-analytics-context",{errorInfo:e});ri.warn(n.message)}}function b5(t,e,n){w5();const r=t.options.appId;if(!r)throw mi.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ri.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw mi.create("no-api-key");if(Zc[r]!=null)throw mi.create("already-exists",{id:r});if(!wE){ZV(Sv);const{wrappedGtag:s,gtagCore:o}=r5(Zc,gE,vE,Sv,y5);ZD=s,yE=o,wE=!0}return Zc[r]=g5(t,gE,vE,e,yE,Sv,n),new v5(t)}function _5(t=Zu()){t=jt(t);const e=Is(t,kp);return e.isInitialized()?e.getImmediate():T5(t)}function T5(t,e={}){const n=Is(t,kp);if(n.isInitialized()){const i=n.getImmediate();if(Pd(e,n.getOptions()))return i;throw mi.create("already-initialized")}return n.initialize({options:e})}function E5(t,e,n,r){t=jt(t),p5(ZD,Zc[t.app.options.appId],e,n,r).catch(i=>ri.error(i))}const bE="@firebase/analytics",_E="0.10.0";function S5(){si(new Yr(kp,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return b5(r,i,n)},"PUBLIC")),si(new Yr("analytics-internal",t,"PRIVATE")),vr(bE,_E),vr(bE,_E,"esm2017");function t(e){try{const n=e.getProvider(kp).getImmediate();return{logEvent:(r,i,s)=>E5(n,r,i,s)}}catch(n){throw mi.create("interop-component-reg-failed",{reason:n})}}}S5();var C5="firebase",I5="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(C5,I5,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map,ex={activated:!1,tokenObservers:[]},A5={initialized:!1,enabled:!1};function Xn(t){return c0.get(t)||Object.assign({},ex)}function k5(t,e){return c0.set(t,e),c0.get(t)}function Jm(){return A5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="https://content-firebaseappcheck.googleapis.com/v1",D5="exchangeRecaptchaV3Token",x5="exchangeDebugToken",TE={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},P5=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ha,await O5(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ha,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function O5(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ti=new qo("appCheck","AppCheck",N5);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function Sb(t){if(!Xn(t).activated)throw ti.create("use-before-activation",{appName:t.name})}function nx(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),s=e-n*3600*24-r*3600-i*60;let o="";return n&&(o+=of(n)+"d:"),r&&(o+=of(r)+"h:"),o+=of(i)+"m:"+of(s)+"s",o}function of(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,s)}catch(d){throw ti.create("fetch-network-error",{originalErrorMessage:d==null?void 0:d.message})}if(o.status!==200)throw ti.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw ti.create("fetch-parse-error",{originalErrorMessage:d==null?void 0:d.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=Number(l[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+u,issuedAtTimeMillis:c}}function M5(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${tx}/projects/${n}/apps/${r}:${D5}?key=${i}`,body:{recaptcha_v3_token:e}}}function rx(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${tx}/projects/${n}/apps/${r}:${x5}?key=${i}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="firebase-app-check-database",L5=1,Od="firebase-app-check-store",ix="debug-token";let af=null;function sx(){return af||(af=new Promise((t,e)=>{try{const n=indexedDB.open($5,L5);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(ti.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Od,{keyPath:"compositeKey"})}}}catch(n){e(ti.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),af)}function U5(t){return ax(lx(t))}function F5(t,e){return ox(lx(t),e)}function V5(t){return ox(ix,t)}function B5(){return ax(ix)}async function ox(t,e){const r=(await sx()).transaction(Od,"readwrite"),s=r.objectStore(Od).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(ti.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}async function ax(t){const n=(await sx()).transaction(Od,"readonly"),i=n.objectStore(Od).get(t);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o(ti.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function lx(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Ju("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j5(t){if(Gm()){let e;try{e=await U5(t)}catch(n){Nd.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function Cv(t,e){return Gm()?F5(t,e).catch(n=>{Nd.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function H5(){let t;try{t=await B5()}catch{}if(t)return t;{const e=F3();return V5(e).catch(n=>Nd.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){return Jm().enabled}async function Ab(){const t=Jm();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function W5(){const t=pD(),e=Jm();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new Ha;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(H5())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5={error:"UNKNOWN_ERROR"};function z5(t){return zm.encodeString(JSON.stringify(t),!1)}async function d0(t,e=!1){const n=t.app;Sb(n);const r=Xn(n);let i=r.token,s;if(i&&!Wl(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(Wl(l)?i=l:await Cv(n,void 0))}if(!e&&i&&Wl(i))return{token:i.token};let o=!1;if(Ib()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Cb(rx(n,await Ab()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const l=await r.exchangeTokenPromise;return await Cv(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Xn(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Nd.warn(l.message):Nd.error(l),s=l}let a;return i?s?Wl(i)?a={token:i.token,internalError:s}:a=CE(s):(a={token:i.token},r.token=i,await Cv(n,i)):a=CE(s),o&&dx(n,a),a}async function K5(t){const e=t.app;Sb(e);const{provider:n}=Xn(e);if(Ib()){const r=await Ab(),{token:i}=await Cb(rx(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function ux(t,e,n,r){const{app:i}=t,s=Xn(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Wl(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),SE(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>SE(t))}function cx(t,e){const n=Xn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function SE(t){const{app:e}=t,n=Xn(e);let r=n.tokenRefresher;r||(r=G5(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function G5(t){const{app:e}=t;return new R5(async()=>{const n=Xn(e);let r;if(n.token?r=await d0(t,!0):r=await d0(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Xn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},TE.RETRIAL_MIN_WAIT,TE.RETRIAL_MAX_WAIT)}function dx(t,e){const n=Xn(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Wl(t){return t.expireTimeMillis-Date.now()>0}function CE(t){return{token:z5(Y5),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Xn(this.app);for(const n of e)cx(this.app,n.next);return Promise.resolve()}}function X5(t,e){return new q5(t,e)}function Q5(t){return{getToken:e=>d0(t,e),getLimitedUseToken:()=>K5(t),addTokenListener:e=>ux(t,"INTERNAL",e),removeTokenListener:e=>cx(t.app,e)}}const J5="@firebase/app-check",Z5="0.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6="https://www.google.com/recaptcha/api.js";function t6(t,e){const n=new Ha,r=Xn(t);r.reCAPTCHAState={initialized:n};const i=n6(t),s=EE(!1);return s?IE(t,e,s,i,n):s6(()=>{const o=EE(!1);if(!o)throw new Error("no recaptcha");IE(t,e,o,i,n)}),n.promise}function IE(t,e,n,r,i){n.ready(()=>{i6(t,e,n,r),i.resolve(n)})}function n6(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function r6(t){Sb(t);const n=await Xn(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Xn(t).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function i6(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{Xn(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Xn(t).reCAPTCHAState.succeeded=!1}}),s=Xn(t);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function s6(t){const e=document.createElement("script");e.src=e6,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,n,r;a6(this._throttleData);const i=await r6(this._app).catch(o=>{throw ti.create("recaptcha-error")});if(!(!((e=Xn(this._app).reCAPTCHAState)===null||e===void 0)&&e.succeeded))throw ti.create("recaptcha-error");let s;try{s=await Cb(M5(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=o6(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ti.create("throttled",{time:nx(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(e){this._app=e,this._heartbeatServiceProvider=Is(e,"heartbeat"),t6(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof kb?this._siteKey===e._siteKey:!1}}function o6(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+P5,httpStatus:t};{const n=e?e.backoffCount:0,r=t0(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function a6(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw ti.create("throttled",{time:nx(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(t=Zu(),e){t=jt(t);const n=Is(t,"app-check");if(Jm().initialized||W5(),Ib()&&Ab().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw ti.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return u6(t,e.provider,e.isTokenAutoRefreshEnabled),Xn(t).isTokenAutoRefreshEnabled&&ux(r,"INTERNAL",()=>{}),r}function u6(t,e,n){const r=k5(t,Object.assign({},ex));r.activated=!0,r.provider=e,r.cachedTokenPromise=j5(t).then(i=>(i&&Wl(i)&&(r.token=i,dx(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,r.provider.initialize(t)}const c6="app-check",AE="app-check-internal";function d6(){si(new Yr(c6,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return X5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(AE).initialize()})),si(new Yr(AE,t=>{const e=t.getProvider("app-check").getImmediate();return Q5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),vr(J5,Z5)}d6();const h6={apiKey:"AIzaSyAjt3RyE1KkK110jxZQUrm9kjfclWO126k",authDomain:"personal-website-c3482.firebaseapp.com",projectId:"personal-website-c3482",storageBucket:"personal-website-c3482.appspot.com",messagingSenderId:"110986644823",appId:"1:110986644823:web:4081c484521ba6b37bc212",measurementId:"G-PF7D6JKSC3"},f6=t=>{l6(t,{provider:new kb("6LdIOxQpAAAAAKwbiQMkZD5Fid1DmlsKvWxOIQA5"),isTokenAutoRefreshEnabled:!0})},p6=()=>{const t=AD(h6);return f6(t),_5(t),t},hx=p6();var m6=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let fx;const Zm=t=>fx=t,px=Symbol();function h0(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ed;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ed||(ed={}));function g6(){const t=Dm(!0),e=t.run(()=>re({}));let n=[],r=[];const i=lh({install(s){Zm(i),i._a=s,s.provide(px,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!m6?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const mx=()=>{};function kE(t,e,n,r=mx){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&xm()&&Bw(i),i}function El(t,...e){t.slice().forEach(n=>{n(...e)})}const v6=t=>t();function f0(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];h0(i)&&h0(r)&&t.hasOwnProperty(n)&&!an(r)&&!fs(r)?t[n]=f0(i,r):t[n]=r}return t}const y6=Symbol();function w6(t){return!h0(t)||!t.hasOwnProperty(y6)}const{assign:fo}=Object;function b6(t){return!!(an(t)&&t.effect)}function _6(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=i?i():{});const c=xA(n.state.value[t]);return fo(c,s,Object.keys(o||{}).reduce((d,h)=>(d[h]=lh(Z(()=>{Zm(n);const f=n._s.get(t);return o[h].call(f,f)})),d),{}))}return l=gx(t,u,e,n,r,!0),l}function gx(t,e,n={},r,i,s){let o;const a=fo({actions:{}},n),l={deep:!0};let u,c,d=[],h=[],f;const p=r.state.value[t];!s&&!p&&(r.state.value[t]={}),re({});let m;function v(A){let I;u=c=!1,typeof A=="function"?(A(r.state.value[t]),I={type:ed.patchFunction,storeId:t,events:f}):(f0(r.state.value[t],A),I={type:ed.patchObject,payload:A,storeId:t,events:f});const E=m=Symbol();Wn().then(()=>{m===E&&(u=!0)}),c=!0,El(d,I,r.state.value[t])}const b=s?function(){const{state:I}=n,E=I?I():{};this.$patch(U=>{fo(U,E)})}:mx;function g(){o.stop(),d=[],h=[],r._s.delete(t)}function _(A,I){return function(){Zm(r);const E=Array.from(arguments),U=[],F=[];function N(R){U.push(R)}function D(R){F.push(R)}El(h,{args:E,name:A,store:w,after:N,onError:D});let O;try{O=I.apply(this&&this.$id===t?this:w,E)}catch(R){throw El(F,R),R}return O instanceof Promise?O.then(R=>(El(U,R),R)).catch(R=>(El(F,R),Promise.reject(R))):(El(U,O),O)}}const y={_p:r,$id:t,$onAction:kE.bind(null,h),$patch:v,$reset:b,$subscribe(A,I={}){const E=kE(d,A,I.detached,()=>U()),U=o.run(()=>St(()=>r.state.value[t],F=>{(I.flush==="sync"?c:u)&&A({storeId:t,type:ed.direct,events:f},F)},fo({},l,I)));return E},$dispose:g},w=On(y);r._s.set(t,w);const P=(r._a&&r._a.runWithContext||v6)(()=>r._e.run(()=>(o=Dm()).run(e)));for(const A in P){const I=P[A];if(an(I)&&!b6(I)||fs(I))s||(p&&w6(I)&&(an(I)?I.value=p[A]:f0(I,p[A])),r.state.value[t][A]=I);else if(typeof I=="function"){const E=_(A,I);P[A]=E,a.actions[A]=I}}return fo(w,P),fo(yt(w),P),Object.defineProperty(w,"$state",{get:()=>r.state.value[t],set:A=>{v(I=>{fo(I,A)})}}),r._p.forEach(A=>{fo(w,o.run(()=>A({store:w,app:r._a,pinia:r,options:a})))}),p&&s&&n.hydrate&&n.hydrate(w.$state,p),u=!0,c=!0,w}function vx(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const u=ok();return a=a||(u?Hr(px,null):null),a&&Zm(a),a=fx,a._s.has(r)||(s?gx(r,e,i,a):_6(r,i,a)),a._s.get(r)}return o.$id=r,o}function Qt(t){{t=yt(t);const e={};for(const n in t){const r=t[n];(an(r)||fs(r))&&(e[n]=_u(t,n))}return e}}const DE=(t,e)=>{const n=t.storage||sessionStorage,r=t.key||e.$id;if(t.paths){const i=t.paths.reduce((s,o)=>(s[o]=e.$state[o],s),{});n.setItem(r,JSON.stringify(i))}else n.setItem(r,JSON.stringify(e.$state))};var T6=({options:t,store:e})=>{var n,r,i,s;if((n=t.persist)!=null&&n.enabled){const o=[{key:e.$id,storage:sessionStorage}],a=(i=(r=t.persist)==null?void 0:r.strategies)!=null&&i.length?(s=t.persist)==null?void 0:s.strategies:o;a.forEach(l=>{const u=l.storage||sessionStorage,c=l.key||e.$id,d=u.getItem(c);d&&(e.$patch(JSON.parse(d)),DE(l,e))}),e.$subscribe(()=>{a.forEach(l=>{DE(l,e)})})}};const yx=g6();yx.use(T6);const Fr=class Fr{constructor(e,n,r={}){Fr.log(r.debug,n),r.route&&D1.push({name:r.route}),aF({title:e,type:e.toLowerCase(),text:n},5e3)}};na(Fr,"success",(e,n={})=>new Fr("Success",e,n)),na(Fr,"warning",(e,n={})=>new Fr("Warning",e,n)),na(Fr,"error",(e,n={})=>new Fr("Error",e,n)),na(Fr,"generalError",(e,n)=>new Fr("Error",(n==null?void 0:n.message)||wx,{debug:e})),na(Fr,"firebaseError",(e,n)=>(Fr.log(e,n),n instanceof bi?n.message=Iv[n.code]:n instanceof Error&&Object.keys(Iv).includes(n.name)?n.message=Iv[n.name]:n=void 0,Fr.generalError(e,n))),na(Fr,"log",(e,n)=>{e&&console.log(n)});let Ye=Fr;const wx="Something went wrong",Iv={"":wx,"auth/user-not-found":"Unknown user","auth/invalid-email":"Invalid e-mail address","auth/email-already-in-use":"E-mail already in use","auth/wrong-password":"Wrong password","auth/too-many-requests":"Temporarily blocked","auth/weak-password":"Weak password","auth/requires-recent-login":"You need to re-login to do this","permission-denied":"Not logged in or no permission"};var E6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ne,Db=Db||{},lt=E6||self;function eg(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ph(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function S6(t){return Object.prototype.hasOwnProperty.call(t,Av)&&t[Av]||(t[Av]=++C6)}var Av="closure_uid_"+(1e9*Math.random()>>>0),C6=0;function I6(t,e,n){return t.call.apply(t.bind,arguments)}function A6(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function xr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xr=I6:xr=A6,xr.apply(null,arguments)}function lf(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ar(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Qo(){this.s=this.s,this.o=this.o}var k6=0;Qo.prototype.s=!1;Qo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),k6!=0)&&S6(this)};Qo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bx=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function xb(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function xE(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(eg(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Pr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Pr.prototype.h=function(){this.defaultPrevented=!0};var D6=function(){if(!lt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{lt.addEventListener("test",()=>{},e),lt.removeEventListener("test",()=>{},e)}catch{}return t}();function Md(t){return/^[\s\xa0]*$/.test(t)}function tg(){var t=lt.navigator;return t&&(t=t.userAgent)?t:""}function is(t){return tg().indexOf(t)!=-1}function Pb(t){return Pb[" "](t),t}Pb[" "]=function(){};function x6(t,e){var n=TB;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var P6=is("Opera"),ku=is("Trident")||is("MSIE"),_x=is("Edge"),p0=_x||ku,Tx=is("Gecko")&&!(tg().toLowerCase().indexOf("webkit")!=-1&&!is("Edge"))&&!(is("Trident")||is("MSIE"))&&!is("Edge"),R6=tg().toLowerCase().indexOf("webkit")!=-1&&!is("Edge");function Ex(){var t=lt.document;return t?t.documentMode:void 0}var m0;e:{var kv="",Dv=function(){var t=tg();if(Tx)return/rv:([^\);]+)(\)|;)/.exec(t);if(_x)return/Edge\/([\d\.]+)/.exec(t);if(ku)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(R6)return/WebKit\/(\S+)/.exec(t);if(P6)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Dv&&(kv=Dv?Dv[1]:""),ku){var xv=Ex();if(xv!=null&&xv>parseFloat(kv)){m0=String(xv);break e}}m0=kv}var g0;if(lt.document&&ku){var PE=Ex();g0=PE||parseInt(m0,10)||void 0}else g0=void 0;var O6=g0;function $d(t,e){if(Pr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Tx){e:{try{Pb(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:N6[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$d.$.h.call(this)}}ar($d,Pr);var N6={2:"touch",3:"pen",4:"mouse"};$d.prototype.h=function(){$d.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var mh="closure_listenable_"+(1e6*Math.random()|0),M6=0;function $6(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++M6,this.fa=this.ia=!1}function ng(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Rb(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function L6(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Sx(t){const e={};for(const n in t)e[n]=t[n];return e}const RE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cx(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<RE.length;s++)n=RE[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function rg(t){this.src=t,this.g={},this.h=0}rg.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=y0(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new $6(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function v0(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=bx(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ng(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function y0(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Ob="closure_lm_"+(1e6*Math.random()|0),Pv={};function Ix(t,e,n,r,i){if(r&&r.once)return kx(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ix(t,e[s],n,r,i);return null}return n=$b(n),t&&t[mh]?t.O(e,n,ph(r)?!!r.capture:!!r,i):Ax(t,e,n,!1,r,i)}function Ax(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ph(i)?!!i.capture:!!i,a=Mb(t);if(a||(t[Ob]=a=new rg(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=U6(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)D6||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xx(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function U6(){function t(n){return e.call(t.src,t.listener,n)}const e=F6;return t}function kx(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)kx(t,e[s],n,r,i);return null}return n=$b(n),t&&t[mh]?t.P(e,n,ph(r)?!!r.capture:!!r,i):Ax(t,e,n,!0,r,i)}function Dx(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Dx(t,e[s],n,r,i);else r=ph(r)?!!r.capture:!!r,n=$b(n),t&&t[mh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=y0(s,n,r,i),-1<n&&(ng(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Mb(t))&&(e=t.g[e.toString()],t=-1,e&&(t=y0(e,n,r,i)),(n=-1<t?e[t]:null)&&Nb(n))}function Nb(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[mh])v0(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xx(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mb(e))?(v0(n,t),n.h==0&&(n.src=null,e[Ob]=null)):ng(t)}}}function xx(t){return t in Pv?Pv[t]:Pv[t]="on"+t}function F6(t,e){if(t.fa)t=!0;else{e=new $d(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Nb(t),t=n.call(r,e)}return t}function Mb(t){return t=t[Ob],t instanceof rg?t:null}var Rv="__closure_events_fn_"+(1e9*Math.random()>>>0);function $b(t){return typeof t=="function"?t:(t[Rv]||(t[Rv]=function(e){return t.handleEvent(e)}),t[Rv])}function or(){Qo.call(this),this.i=new rg(this),this.S=this,this.J=null}ar(or,Qo);or.prototype[mh]=!0;or.prototype.removeEventListener=function(t,e,n,r){Dx(this,t,e,n,r)};function yr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Pr(e,t);else if(e instanceof Pr)e.target=e.target||t;else{var i=e;e=new Pr(r,t),Cx(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=uf(o,r,!0,e)&&i}if(o=e.g=t,i=uf(o,r,!0,e)&&i,i=uf(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=uf(o,r,!1,e)&&i}or.prototype.N=function(){if(or.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ng(n[r]);delete t.g[e],t.h--}}this.J=null};or.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};or.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function uf(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&v0(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Lb=lt.JSON.stringify;class V6{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function B6(){var t=Ub;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class j6{constructor(){this.h=this.g=null}add(e,n){const r=Px.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Px=new V6(()=>new H6,t=>t.reset());class H6{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function W6(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Y6(t){lt.setTimeout(()=>{throw t},0)}let Ld,Ud=!1,Ub=new j6,Rx=()=>{const t=lt.Promise.resolve(void 0);Ld=()=>{t.then(z6)}};var z6=()=>{for(var t;t=B6();){try{t.h.call(t.g)}catch(n){Y6(n)}var e=Px;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ud=!1};function ig(t,e){or.call(this),this.h=t||1,this.g=e||lt,this.j=xr(this.qb,this),this.l=Date.now()}ar(ig,or);Ne=ig.prototype;Ne.ga=!1;Ne.T=null;Ne.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yr(this,"tick"),this.ga&&(Fb(this),this.start()))}};Ne.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Fb(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Ne.N=function(){ig.$.N.call(this),Fb(this),delete this.g};function Vb(t,e,n){if(typeof t=="function")n&&(t=xr(t,n));else if(t&&typeof t.handleEvent=="function")t=xr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:lt.setTimeout(t,e||0)}function Ox(t){t.g=Vb(()=>{t.g=null,t.i&&(t.i=!1,Ox(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class K6 extends Qo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ox(this)}N(){super.N(),this.g&&(lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fd(t){Qo.call(this),this.h=t,this.g={}}ar(Fd,Qo);var OE=[];function Nx(t,e,n,r){Array.isArray(n)||(n&&(OE[0]=n.toString()),n=OE);for(var i=0;i<n.length;i++){var s=Ix(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Mx(t){Rb(t.g,function(e,n){this.g.hasOwnProperty(n)&&Nb(e)},t),t.g={}}Fd.prototype.N=function(){Fd.$.N.call(this),Mx(this)};Fd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function sg(){this.g=!0}sg.prototype.Ea=function(){this.g=!1};function G6(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&d[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function q6(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Yl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Q6(t,n)+(r?" "+r:"")})}function X6(t,e){t.info(function(){return"TIMEOUT: "+e})}sg.prototype.info=function(){};function Q6(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Lb(n)}catch{return e}}var cl={},NE=null;function og(){return NE=NE||new or}cl.Ta="serverreachability";function $x(t){Pr.call(this,cl.Ta,t)}ar($x,Pr);function Vd(t){const e=og();yr(e,new $x(e))}cl.STAT_EVENT="statevent";function Lx(t,e){Pr.call(this,cl.STAT_EVENT,t),this.stat=e}ar(Lx,Pr);function Br(t){const e=og();yr(e,new Lx(e,t))}cl.Ua="timingevent";function Ux(t,e){Pr.call(this,cl.Ua,t),this.size=e}ar(Ux,Pr);function gh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return lt.setTimeout(function(){t()},e)}var ag={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fx={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Bb(){}Bb.prototype.h=null;function ME(t){return t.h||(t.h=t.i())}function Vx(){}var vh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jb(){Pr.call(this,"d")}ar(jb,Pr);function Hb(){Pr.call(this,"c")}ar(Hb,Pr);var w0;function lg(){}ar(lg,Bb);lg.prototype.g=function(){return new XMLHttpRequest};lg.prototype.i=function(){return{}};w0=new lg;function yh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Fd(this),this.P=J6,t=p0?125:void 0,this.V=new ig(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bx}function Bx(){this.i=null,this.g="",this.h=!1}var J6=45e3,b0={},Dp={};Ne=yh.prototype;Ne.setTimeout=function(t){this.P=t};function _0(t,e,n){t.L=1,t.v=cg(Ys(e)),t.s=n,t.S=!0,jx(t,null)}function jx(t,e){t.G=Date.now(),wh(t),t.A=Ys(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Xx(n.i,"t",r),t.C=0,n=t.l.J,t.h=new Bx,t.g=vP(t.l,n?e:null,!t.s),0<t.O&&(t.M=new K6(xr(t.Pa,t,t.g),t.O)),Nx(t.U,t.g,"readystatechange",t.nb),e=t.I?Sx(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Vd(),G6(t.j,t.u,t.A,t.m,t.W,t.s)}Ne.nb=function(t){t=t.target;const e=this.M;e&&as(t)==3?e.l():this.Pa(t)};Ne.Pa=function(t){try{if(t==this.g)e:{const c=as(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>c)&&(c!=3||p0||this.g&&(this.h.h||this.g.ja()||FE(this.g)))){this.J||c!=4||e==7||(e==8||0>=d?Vd(3):Vd(2)),ug(this);var n=this.g.da();this.ca=n;t:if(Hx(this)){var r=FE(this.g);t="";var i=r.length,s=as(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wa(this),td(this);var o="";break t}this.h.i=new lt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,q6(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Md(a)){var u=a;break t}}u=null}if(n=u)Yl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,T0(this,n);else{this.i=!1,this.o=3,Br(12),wa(this),td(this);break e}}this.S?(Wx(this,c,o),p0&&this.i&&c==3&&(Nx(this.U,this.V,"tick",this.mb),this.V.start())):(Yl(this.j,this.m,o,null),T0(this,o)),c==4&&wa(this),this.i&&!this.J&&(c==4?fP(this.l,this):(this.i=!1,wh(this)))}else wB(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Br(12)):(this.o=0,Br(13)),wa(this),td(this)}}}catch{}finally{}};function Hx(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function Wx(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=Z6(t,n),i==Dp){e==4&&(t.o=4,Br(14),r=!1),Yl(t.j,t.m,null,"[Incomplete Response]");break}else if(i==b0){t.o=4,Br(15),Yl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Yl(t.j,t.m,i,null),T0(t,i);Hx(t)&&i!=Dp&&i!=b0&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Br(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),qb(e),e.M=!0,Br(11))):(Yl(t.j,t.m,n,"[Invalid Chunked Response]"),wa(t),td(t))}Ne.mb=function(){if(this.g){var t=as(this.g),e=this.g.ja();this.C<e.length&&(ug(this),Wx(this,t,e),this.i&&t!=4&&wh(this))}};function Z6(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Dp:(n=Number(e.substring(n,r)),isNaN(n)?b0:(r+=1,r+n>e.length?Dp:(e=e.slice(r,r+n),t.C=r+n,e)))}Ne.cancel=function(){this.J=!0,wa(this)};function wh(t){t.Y=Date.now()+t.P,Yx(t,t.P)}function Yx(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=gh(xr(t.lb,t),e)}function ug(t){t.B&&(lt.clearTimeout(t.B),t.B=null)}Ne.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(X6(this.j,this.A),this.L!=2&&(Vd(),Br(17)),wa(this),this.o=2,td(this)):Yx(this,this.Y-t)};function td(t){t.l.H==0||t.J||fP(t.l,t)}function wa(t){ug(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Fb(t.V),Mx(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function T0(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||E0(n.i,t))){if(!t.K&&E0(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Rp(n),fg(n);else break e;Gb(n),Br(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=gh(xr(n.ib,n),6e3));if(1>=Zx(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ba(n,11)}else if((t.K||n.g==t)&&Rp(n),!Md(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Wb(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,hn(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=gP(r,r.J?r.pa:null,r.Y),o.K){eP(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(ug(a),wh(a)),r.g=o}else dP(r);0<n.j.length&&pg(n)}else u[0]!="stop"&&u[0]!="close"||ba(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?ba(n,7):Kb(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Vd(4)}catch{}}function eB(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(eg(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function tB(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(eg(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function zx(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(eg(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=tB(t),r=eB(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Kx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nB(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Aa(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Aa){this.h=t.h,xp(this,t.j),this.s=t.s,this.g=t.g,Pp(this,t.m),this.l=t.l;var e=t.i,n=new Bd;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),$E(this,n),this.o=t.o}else t&&(e=String(t).match(Kx))?(this.h=!1,xp(this,e[1]||"",!0),this.s=Oc(e[2]||""),this.g=Oc(e[3]||"",!0),Pp(this,e[4]),this.l=Oc(e[5]||"",!0),$E(this,e[6]||"",!0),this.o=Oc(e[7]||"")):(this.h=!1,this.i=new Bd(null,this.h))}Aa.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Nc(e,LE,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Nc(e,LE,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Nc(n,n.charAt(0)=="/"?sB:iB,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Nc(n,aB)),t.join("")};function Ys(t){return new Aa(t)}function xp(t,e,n){t.j=n?Oc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Pp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function $E(t,e,n){e instanceof Bd?(t.i=e,lB(t.i,t.h)):(n||(e=Nc(e,oB)),t.i=new Bd(e,t.h))}function hn(t,e,n){t.i.set(e,n)}function cg(t){return hn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Oc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Nc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,rB),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function rB(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var LE=/[#\/\?@]/g,iB=/[#\?:]/g,sB=/[#\?]/g,oB=/[#\?@]/g,aB=/#/g;function Bd(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Jo(t){t.g||(t.g=new Map,t.h=0,t.i&&nB(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Ne=Bd.prototype;Ne.add=function(t,e){Jo(this),this.i=null,t=ec(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Gx(t,e){Jo(t),e=ec(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function qx(t,e){return Jo(t),e=ec(t,e),t.g.has(e)}Ne.forEach=function(t,e){Jo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};Ne.ta=function(){Jo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};Ne.Z=function(t){Jo(this);let e=[];if(typeof t=="string")qx(this,t)&&(e=e.concat(this.g.get(ec(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Ne.set=function(t,e){return Jo(this),this.i=null,t=ec(this,t),qx(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Ne.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Xx(t,e,n){Gx(t,e),0<n.length&&(t.i=null,t.g.set(ec(t,e),xb(n)),t.h+=n.length)}Ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ec(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function lB(t,e){e&&!t.j&&(Jo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Gx(this,r),Xx(this,i,n))},t)),t.j=e}var uB=class{constructor(t,e){this.g=t,this.map=e}};function Qx(t){this.l=t||cB,lt.PerformanceNavigationTiming?(t=lt.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(lt.g&&lt.g.Ka&&lt.g.Ka()&&lt.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var cB=10;function Jx(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Zx(t){return t.h?1:t.g?t.g.size:0}function E0(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Wb(t,e){t.g?t.g.add(e):t.h=e}function eP(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Qx.prototype.cancel=function(){if(this.i=tP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function tP(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return xb(t.i)}var dB=class{stringify(t){return lt.JSON.stringify(t,void 0)}parse(t){return lt.JSON.parse(t,void 0)}};function hB(){this.g=new dB}function fB(t,e,n){const r=n||"";try{zx(t,function(i,s){let o=i;ph(i)&&(o=Lb(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pB(t,e){const n=new sg;if(lt.Image){const r=new Image;r.onload=lf(cf,n,r,"TestLoadImage: loaded",!0,e),r.onerror=lf(cf,n,r,"TestLoadImage: error",!1,e),r.onabort=lf(cf,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=lf(cf,n,r,"TestLoadImage: timeout",!1,e),lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function cf(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function bh(t){this.l=t.fc||null,this.j=t.ob||!1}ar(bh,Bb);bh.prototype.g=function(){return new dg(this.l,this.j)};bh.prototype.i=function(t){return function(){return t}}({});function dg(t,e){or.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Yb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ar(dg,or);var Yb=0;Ne=dg.prototype;Ne.open=function(t,e){if(this.readyState!=Yb)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,jd(this)};Ne.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||lt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_h(this)),this.readyState=Yb};Ne.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,jd(this)),this.g&&(this.readyState=3,jd(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof lt.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nP(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function nP(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Ne.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_h(this):jd(this),this.readyState==3&&nP(this)}};Ne.Za=function(t){this.g&&(this.response=this.responseText=t,_h(this))};Ne.Ya=function(t){this.g&&(this.response=t,_h(this))};Ne.ka=function(){this.g&&_h(this)};function _h(t){t.readyState=4,t.l=null,t.j=null,t.A=null,jd(t)}Ne.setRequestHeader=function(t,e){this.v.append(t,e)};Ne.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Ne.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function jd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(dg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var mB=lt.JSON.parse;function Pn(t){or.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=rP,this.L=this.M=!1}ar(Pn,or);var rP="",gB=/^https?$/i,vB=["POST","PUT"];Ne=Pn.prototype;Ne.Oa=function(t){this.M=t};Ne.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():w0.g(),this.C=this.u?ME(this.u):ME(w0),this.g.onreadystatechange=xr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){UE(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=lt.FormData&&t instanceof lt.FormData,!(0<=bx(vB,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{oP(this),0<this.B&&((this.L=yB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xr(this.ua,this)):this.A=Vb(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){UE(this,s)}};function yB(t){return ku&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Ne.ua=function(){typeof Db<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yr(this,"timeout"),this.abort(8))};function UE(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,iP(t),hg(t)}function iP(t){t.F||(t.F=!0,yr(t,"complete"),yr(t,"error"))}Ne.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,yr(this,"complete"),yr(this,"abort"),hg(this))};Ne.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hg(this,!0)),Pn.$.N.call(this)};Ne.La=function(){this.s||(this.G||this.v||this.l?sP(this):this.kb())};Ne.kb=function(){sP(this)};function sP(t){if(t.h&&typeof Db<"u"&&(!t.C[1]||as(t)!=4||t.da()!=2)){if(t.v&&as(t)==4)Vb(t.La,0,t);else if(yr(t,"readystatechange"),as(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Kx)[1]||null;!i&&lt.self&&lt.self.location&&(i=lt.self.location.protocol.slice(0,-1)),r=!gB.test(i?i.toLowerCase():"")}n=r}if(n)yr(t,"complete"),yr(t,"success");else{t.m=6;try{var s=2<as(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",iP(t)}}finally{hg(t)}}}}function hg(t,e){if(t.g){oP(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||yr(t,"ready");try{n.onreadystatechange=r}catch{}}}function oP(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(lt.clearTimeout(t.A),t.A=null)}Ne.isActive=function(){return!!this.g};function as(t){return t.g?t.g.readyState:0}Ne.da=function(){try{return 2<as(this)?this.g.status:-1}catch{return-1}};Ne.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Ne.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),mB(e)}};function FE(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case rP:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function wB(t){const e={};t=(t.g&&2<=as(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Md(t[r]))continue;var n=W6(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}L6(e,function(r){return r.join(", ")})}Ne.Ia=function(){return this.m};Ne.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function aP(t){let e="";return Rb(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function zb(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=aP(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):hn(t,e,n))}function fc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function lP(t){this.Ga=0,this.j=[],this.l=new sg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fc("baseRetryDelayMs",5e3,t),this.hb=fc("retryDelaySeedMs",1e4,t),this.eb=fc("forwardChannelMaxRetries",2,t),this.xa=fc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Qx(t&&t.concurrentRequestLimit),this.Ja=new hB,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Ne=lP.prototype;Ne.ra=8;Ne.H=1;function Kb(t){if(uP(t),t.H==3){var e=t.W++,n=Ys(t.I);if(hn(n,"SID",t.K),hn(n,"RID",e),hn(n,"TYPE","terminate"),Th(t,n),e=new yh(t,t.l,e),e.L=2,e.v=cg(Ys(n)),n=!1,lt.navigator&&lt.navigator.sendBeacon)try{n=lt.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&lt.Image&&(new Image().src=e.v,n=!0),n||(e.g=vP(e.l,null),e.g.ha(e.v)),e.G=Date.now(),wh(e)}mP(t)}function fg(t){t.g&&(qb(t),t.g.cancel(),t.g=null)}function uP(t){fg(t),t.u&&(lt.clearTimeout(t.u),t.u=null),Rp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&lt.clearTimeout(t.m),t.m=null)}function pg(t){if(!Jx(t.i)&&!t.m){t.m=!0;var e=t.Na;Ld||Rx(),Ud||(Ld(),Ud=!0),Ub.add(e,t),t.C=0}}function bB(t,e){return Zx(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=gh(xr(t.Na,t,e),pP(t,t.C)),t.C++,!0)}Ne.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new yh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Sx(s),Cx(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=cP(this,i,e),n=Ys(this.I),hn(n,"RID",t),hn(n,"CVER",22),this.F&&hn(n,"X-HTTP-Session-Id",this.F),Th(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(aP(s)))+"&"+e:this.o&&zb(n,this.o,s)),Wb(this.i,i),this.bb&&hn(n,"TYPE","init"),this.P?(hn(n,"$req",e),hn(n,"SID","null"),i.aa=!0,_0(i,n,null)):_0(i,n,e),this.H=2}}else this.H==3&&(t?VE(this,t):this.j.length==0||Jx(this.i)||VE(this))};function VE(t,e){var n;e?n=e.m:n=t.W++;const r=Ys(t.I);hn(r,"SID",t.K),hn(r,"RID",n),hn(r,"AID",t.V),Th(t,r),t.o&&t.s&&zb(r,t.o,t.s),n=new yh(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=cP(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Wb(t.i,n),_0(n,r,e)}function Th(t,e){t.na&&Rb(t.na,function(n,r){hn(e,r,n)}),t.h&&zx({},function(n,r){hn(e,r,n)})}function cP(t,e,n){n=Math.min(t.j.length,n);var r=t.h?xr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{fB(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function dP(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ld||Rx(),Ud||(Ld(),Ud=!0),Ub.add(e,t),t.A=0}}function Gb(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=gh(xr(t.Ma,t),pP(t,t.A)),t.A++,!0)}Ne.Ma=function(){if(this.u=null,hP(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=gh(xr(this.jb,this),t)}};Ne.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Br(10),fg(this),hP(this))};function qb(t){t.B!=null&&(lt.clearTimeout(t.B),t.B=null)}function hP(t){t.g=new yh(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ys(t.wa);hn(e,"RID","rpc"),hn(e,"SID",t.K),hn(e,"AID",t.V),hn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&hn(e,"TO",t.qa),hn(e,"TYPE","xmlhttp"),Th(t,e),t.o&&t.s&&zb(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=cg(Ys(e)),n.s=null,n.S=!0,jx(n,t)}Ne.ib=function(){this.v!=null&&(this.v=null,fg(this),Gb(this),Br(19))};function Rp(t){t.v!=null&&(lt.clearTimeout(t.v),t.v=null)}function fP(t,e){var n=null;if(t.g==e){Rp(t),qb(t),t.g=null;var r=2}else if(E0(t.i,e))n=e.F,eP(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=og(),yr(r,new Ux(r,n)),pg(t)}else dP(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&bB(t,e)||r==2&&Gb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ba(t,5);break;case 4:ba(t,10);break;case 3:ba(t,6);break;default:ba(t,2)}}}function pP(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ba(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=xr(t.pb,t);n||(n=new Aa("//www.google.com/images/cleardot.gif"),lt.location&&lt.location.protocol=="http"||xp(n,"https"),cg(n)),pB(n.toString(),r)}else Br(2);t.H=0,t.h&&t.h.za(e),mP(t),uP(t)}Ne.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Br(2)):(this.l.info("Failed to ping google.com"),Br(1))};function mP(t){if(t.H=0,t.ma=[],t.h){const e=tP(t.i);(e.length!=0||t.j.length!=0)&&(xE(t.ma,e),xE(t.ma,t.j),t.i.i.length=0,xb(t.j),t.j.length=0),t.h.ya()}}function gP(t,e,n){var r=n instanceof Aa?Ys(n):new Aa(n);if(r.g!="")e&&(r.g=e+"."+r.g),Pp(r,r.m);else{var i=lt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Aa(null);r&&xp(s,r),e&&(s.g=e),i&&Pp(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&hn(r,n,e),hn(r,"VER",t.ra),Th(t,r),r}function vP(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Pn(new bh({ob:!0})):new Pn(t.va),e.Oa(t.J),e}Ne.isActive=function(){return!!this.h&&this.h.isActive(this)};function yP(){}Ne=yP.prototype;Ne.Ba=function(){};Ne.Aa=function(){};Ne.za=function(){};Ne.ya=function(){};Ne.isActive=function(){return!0};Ne.Va=function(){};function Op(){if(ku&&!(10<=Number(O6)))throw Error("Environmental error: no available transport.")}Op.prototype.g=function(t,e){return new yi(t,e)};function yi(t,e){or.call(this),this.g=new lP(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Md(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Md(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new tc(this)}ar(yi,or);yi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Br(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=gP(t,null,t.Y),pg(t)};yi.prototype.close=function(){Kb(this.g)};yi.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Lb(t),t=n);e.j.push(new uB(e.fb++,t)),e.H==3&&pg(e)};yi.prototype.N=function(){this.g.h=null,delete this.j,Kb(this.g),delete this.g,yi.$.N.call(this)};function wP(t){jb.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ar(wP,jb);function bP(){Hb.call(this),this.status=1}ar(bP,Hb);function tc(t){this.g=t}ar(tc,yP);tc.prototype.Ba=function(){yr(this.g,"a")};tc.prototype.Aa=function(t){yr(this.g,new wP(t))};tc.prototype.za=function(t){yr(this.g,new bP)};tc.prototype.ya=function(){yr(this.g,"b")};function _B(){this.blockSize=-1}function Qi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ar(Qi,_B);Qi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ov(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Qi.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Ov(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Ov(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Ov(this,r),i=0;break}}this.h=i,this.i+=e};Qi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Jt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var TB={};function Xb(t){return-128<=t&&128>t?x6(t,function(e){return new Jt([e|0],0>e?-1:0)}):new Jt([t|0],0>t?-1:0)}function ls(t){if(isNaN(t)||!isFinite(t))return cu;if(0>t)return fr(ls(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=S0;return new Jt(e,0)}function _P(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return fr(_P(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ls(Math.pow(e,8)),r=cu,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ls(Math.pow(e,s)),r=r.R(s).add(ls(o))):(r=r.R(n),r=r.add(ls(o)))}return r}var S0=4294967296,cu=Xb(0),C0=Xb(1),BE=Xb(16777216);Ne=Jt.prototype;Ne.ea=function(){if(Ci(this))return-fr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:S0+r)*e,e*=S0}return t};Ne.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Os(this))return"0";if(Ci(this))return"-"+fr(this).toString(t);for(var e=ls(Math.pow(t,6)),n=this,r="";;){var i=Mp(n,e).g;n=Np(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Os(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};Ne.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Os(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ci(t){return t.h==-1}Ne.X=function(t){return t=Np(this,t),Ci(t)?-1:Os(t)?0:1};function fr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Jt(n,~t.h).add(C0)}Ne.abs=function(){return Ci(this)?fr(this):this};Ne.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Jt(n,n[n.length-1]&-2147483648?-1:0)};function Np(t,e){return t.add(fr(e))}Ne.R=function(t){if(Os(this)||Os(t))return cu;if(Ci(this))return Ci(t)?fr(this).R(fr(t)):fr(fr(this).R(t));if(Ci(t))return fr(this.R(fr(t)));if(0>this.X(BE)&&0>t.X(BE))return ls(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,df(n,2*r+2*i),n[2*r+2*i+1]+=s*l,df(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,df(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,df(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Jt(n,0)};function df(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function pc(t,e){this.g=t,this.h=e}function Mp(t,e){if(Os(e))throw Error("division by zero");if(Os(t))return new pc(cu,cu);if(Ci(t))return e=Mp(fr(t),e),new pc(fr(e.g),fr(e.h));if(Ci(e))return e=Mp(t,fr(e)),new pc(fr(e.g),e.h);if(30<t.g.length){if(Ci(t)||Ci(e))throw Error("slowDivide_ only works with positive integers.");for(var n=C0,r=e;0>=r.X(t);)n=jE(n),r=jE(r);var i=Sl(n,1),s=Sl(r,1);for(r=Sl(r,2),n=Sl(n,2);!Os(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Sl(r,1),n=Sl(n,1)}return e=Np(t,i.R(e)),new pc(i,e)}for(i=cu;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ls(n),o=s.R(e);Ci(o)||0<o.X(t);)n-=r,s=ls(n),o=s.R(e);Os(s)&&(s=C0),i=i.add(s),t=Np(t,o)}return new pc(i,t)}Ne.gb=function(t){return Mp(this,t).h};Ne.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Jt(n,this.h&t.h)};Ne.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Jt(n,this.h|t.h)};Ne.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Jt(n,this.h^t.h)};function jE(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Jt(n,t.h)}function Sl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Jt(i,t.h)}Op.prototype.createWebChannel=Op.prototype.g;yi.prototype.send=yi.prototype.u;yi.prototype.open=yi.prototype.m;yi.prototype.close=yi.prototype.close;ag.NO_ERROR=0;ag.TIMEOUT=8;ag.HTTP_ERROR=6;Fx.COMPLETE="complete";Vx.EventType=vh;vh.OPEN="a";vh.CLOSE="b";vh.ERROR="c";vh.MESSAGE="d";or.prototype.listen=or.prototype.O;Pn.prototype.listenOnce=Pn.prototype.P;Pn.prototype.getLastError=Pn.prototype.Sa;Pn.prototype.getLastErrorCode=Pn.prototype.Ia;Pn.prototype.getStatus=Pn.prototype.da;Pn.prototype.getResponseJson=Pn.prototype.Wa;Pn.prototype.getResponseText=Pn.prototype.ja;Pn.prototype.send=Pn.prototype.ha;Pn.prototype.setWithCredentials=Pn.prototype.Oa;Qi.prototype.digest=Qi.prototype.l;Qi.prototype.reset=Qi.prototype.reset;Qi.prototype.update=Qi.prototype.j;Jt.prototype.add=Jt.prototype.add;Jt.prototype.multiply=Jt.prototype.R;Jt.prototype.modulo=Jt.prototype.gb;Jt.prototype.compare=Jt.prototype.X;Jt.prototype.toNumber=Jt.prototype.ea;Jt.prototype.toString=Jt.prototype.toString;Jt.prototype.getBits=Jt.prototype.D;Jt.fromNumber=ls;Jt.fromString=_P;var EB=function(){return new Op},SB=function(){return og()},Nv=ag,CB=Fx,IB=cl,HE={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},AB=bh,hf=Vx,kB=Pn,DB=Qi,du=Jt;const WE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _r=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new Ju("@firebase/firestore");function YE(){return Ka.logLevel}function Ke(t,...e){if(Ka.logLevel<=Nt.DEBUG){const n=e.map(Qb);Ka.debug(`Firestore (${nc}): ${t}`,...n)}}function zs(t,...e){if(Ka.logLevel<=Nt.ERROR){const n=e.map(Qb);Ka.error(`Firestore (${nc}): ${t}`,...n)}}function Du(t,...e){if(Ka.logLevel<=Nt.WARN){const n=e.map(Qb);Ka.warn(`Firestore (${nc}): ${t}`,...n)}}function Qb(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t="Unexpected state"){const e=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: `+t;throw zs(e),new Error(e)}function pn(t,e){t||ot()}function ft(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}let xB=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_r.UNAUTHENTICATED))}shutdown(){}},PB=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},RB=class{constructor(e){this.t=e,this.currentUser=_r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pn(typeof r.accessToken=="string"),new TP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pn(e===null||typeof e=="string"),new _r(e)}},OB=class{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=_r.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},NB=class{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new OB(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(_r.FIRST_PARTY))}shutdown(){}invalidateToken(){}},MB=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$B=class{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{s.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pn(typeof n.token=="string"),this.T=n.token,new MB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EP=class{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=LB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Bt(t,e){return t<e?-1:t>e?1:0}function xu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jn=class Hf{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hf.fromMillis(Date.now())}static fromDate(e){return Hf.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Hf(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pt=class Wf{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Wf(e)}static min(){return new Wf(new jn(0,0))}static max(){return new Wf(new jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SP=class I0{constructor(e,n,r){n===void 0?n=0:n>e.length&&ot(),r===void 0?r=e.length-n:r>e.length-n&&ot(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return I0.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof I0?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Dn=class Yf extends SP{construct(e,n,r){return new Yf(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Yf(n)}static emptyPath(){return new Yf([])}};const UB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let _s=class $l extends SP{construct(e,n,r){return new $l(e,n,r)}static isValidIdentifier(e){return UB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$l.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $l(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Pe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Pe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Pe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Pe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $l(n)}static emptyPath(){return new $l([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let et=class Mc{constructor(e){this.path=e}static fromPath(e){return new Mc(Dn.fromString(e))}static fromName(e){return new Mc(Dn.fromString(e).popFirst(5))}static empty(){return new Mc(Dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mc(new Dn(e.slice()))}};function FB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=pt.fromTimestamp(r===1e9?new jn(n+1,0):new jn(n,r));return new Hd(i,et.empty(),e)}function VB(t){return new Hd(t.readTime,t.key,-1)}let Hd=class A0{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new A0(pt.min(),et.empty(),-1)}static max(){return new A0(pt.max(),et.empty(),-1)}};function BB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=et.comparator(t.documentKey,e.documentKey),n!==0?n:Bt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let HB=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(t){if(t.code!==de.FAILED_PRECONDITION||t.message!==jB)throw t;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let De=class qr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new qr((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof qr?n:qr.resolve(n)}catch(n){return qr.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):qr.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):qr.reject(n)}static resolve(e){return new qr((n,r)=>{n(e)})}static reject(e){return new qr((n,r)=>{r(e)})}static waitFor(e){return new qr((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=qr.resolve(!1);for(const r of e)n=n.next(i=>i?qr.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new qr((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new qr((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Sh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jb=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}};Jb.ct=-1;function mg(t){return t==null}function $p(t){return t===0&&1/t==-1/0}function WB(t){return typeof t=="number"&&Number.isInteger(t)&&!$p(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function dl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yn=class k0{constructor(e,n){this.comparator=e,this.root=n||hr.EMPTY}insert(e,n){return new k0(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new k0(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}},ff=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}};class hr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??hr.RED,this.left=i??hr.EMPTY,this.right=s??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new hr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(t,e,n,r,i){return this}insert(t,e,n){return new hr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi=class D0{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KE(this.data.getIterator())}getIteratorFrom(e){return new KE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof D0)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new D0(this.comparator);return n.data=e,n}},KE=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let us=class x0{constructor(e){this.fields=e,e.sort(_s.comparator)}static empty(){return new x0([])}unionWith(e){let n=new gi(_s.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new x0(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xu(this.fields,e.fields,(n,r)=>n.isEqual(r))}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IP=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wi=class P0{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new IP("Invalid base64 string: "+i):i}}(e);return new P0(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new P0(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};wi.EMPTY_BYTE_STRING=new wi("");const YB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ho(t){if(pn(!!t),typeof t=="string"){let e=0;const n=YB.exec(t);if(pn(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bn(t.seconds),nanos:Bn(t.nanos)}}function Bn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ga(t){return typeof t=="string"?wi.fromBase64String(t):wi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zb(t){const e=t.mapValue.fields.__previous_value__;return gg(e)?Zb(e):e}function Wd(t){const e=Ho(t.mapValue.fields.__local_write_time__.timestampValue);return new jn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zB=class{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},AP=class R0{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new R0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof R0&&e.projectId===this.projectId&&e.database===this.database}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gg(t)?4:KB(t)?9007199254740991:10:ot()}function Ts(t,e){if(t===e)return!0;const n=qa(t);if(n!==qa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wd(t).isEqual(Wd(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Ho(r.timestampValue),o=Ho(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ga(r.bytesValue).isEqual(Ga(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Bn(r.geoPointValue.latitude)===Bn(i.geoPointValue.latitude)&&Bn(r.geoPointValue.longitude)===Bn(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Bn(r.integerValue)===Bn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Bn(r.doubleValue),o=Bn(i.doubleValue);return s===o?$p(s)===$p(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return xu(t.arrayValue.values||[],e.arrayValue.values||[],Ts);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(zE(s)!==zE(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Ts(s[a],o[a])))return!1;return!0}(t,e);default:return ot()}}function Yd(t,e){return(t.values||[]).find(n=>Ts(n,e))!==void 0}function Pu(t,e){if(t===e)return 0;const n=qa(t),r=qa(e);if(n!==r)return Bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bt(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Bn(i.integerValue||i.doubleValue),a=Bn(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return GE(t.timestampValue,e.timestampValue);case 4:return GE(Wd(t),Wd(e));case 5:return Bt(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Ga(i),a=Ga(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Bt(o[l],a[l]);if(u!==0)return u}return Bt(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Bt(Bn(i.latitude),Bn(s.latitude));return o!==0?o:Bt(Bn(i.longitude),Bn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Pu(o[l],a[l]);if(u)return u}return Bt(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===pf.mapValue&&s===pf.mapValue)return 0;if(i===pf.mapValue)return 1;if(s===pf.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const d=Bt(a[c],u[c]);if(d!==0)return d;const h=Pu(o[a[c]],l[u[c]]);if(h!==0)return h}return Bt(a.length,u.length)}(t.mapValue,e.mapValue);default:throw ot()}}function GE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Bt(t,e);const n=Ho(t),r=Ho(e),i=Bt(n.seconds,r.seconds);return i!==0?i:Bt(n.nanos,r.nanos)}function Ru(t){return O0(t)}function O0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Ho(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ga(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,et.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=O0(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${O0(r.fields[a])}`;return s+"}"}(t.mapValue):ot();var e,n}function Lp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function N0(t){return!!t&&"integerValue"in t}function e_(t){return!!t&&"arrayValue"in t}function qE(t){return!!t&&"nullValue"in t}function XE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zf(t){return!!t&&"mapValue"in t}function nd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return dl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nd(n)}setAll(e){let n=_s.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=nd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());zf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){dl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Jr(nd(this.value))}}function kP(t){const e=[];return dl(t.fields,(n,r)=>{const i=new _s([n]);if(zf(r)){const s=kP(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new us(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ks=class ua{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ua(e,0,pt.min(),pt.min(),pt.min(),Jr.empty(),0)}static newFoundDocument(e,n,r,i){return new ua(e,1,n,pt.min(),r,i,0)}static newNoDocument(e,n){return new ua(e,2,n,pt.min(),pt.min(),Jr.empty(),0)}static newUnknownDocument(e,n){return new ua(e,3,n,pt.min(),pt.min(),Jr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ua&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ua(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ou=class{constructor(e,n){this.position=e,this.inclusive=n}};function QE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=et.comparator(et.fromName(o.referenceValue),n.key):r=Pu(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function JE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ts(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function GB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DP=class{},rr=class xP extends DP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XB(e,n,r):n==="array-contains"?new ZB(e,r):n==="in"?new ej(e,r):n==="not-in"?new tj(e,r):n==="array-contains-any"?new nj(e,r):new xP(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new QB(e,r):new JB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Pu(n,this.value)):n!==null&&qa(this.value)===qa(n)&&this.matchesComparison(Pu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}},Gs=class PP extends DP{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new PP(e,n)}matches(e){return RP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}};function RP(t){return t.op==="and"}function OP(t){return qB(t)&&RP(t)}function qB(t){for(const e of t.filters)if(e instanceof Gs)return!1;return!0}function M0(t){if(t instanceof rr)return t.field.canonicalString()+t.op.toString()+Ru(t.value);if(OP(t))return t.filters.map(e=>M0(e)).join(",");{const e=t.filters.map(n=>M0(n)).join(",");return`${t.op}(${e})`}}function NP(t,e){return t instanceof rr?function(n,r){return r instanceof rr&&n.op===r.op&&n.field.isEqual(r.field)&&Ts(n.value,r.value)}(t,e):t instanceof Gs?function(n,r){return r instanceof Gs&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&NP(s,r.filters[o]),!0):!1}(t,e):void ot()}function MP(t){return t instanceof rr?function(e){return`${e.field.canonicalString()} ${e.op} ${Ru(e.value)}`}(t):t instanceof Gs?function(e){return e.op.toString()+" {"+e.getFilters().map(MP).join(" ,")+"}"}(t):"Filter"}let XB=class extends rr{constructor(e,n,r){super(e,n,r),this.key=et.fromName(r.referenceValue)}matches(e){const n=et.comparator(e.key,this.key);return this.matchesComparison(n)}},QB=class extends rr{constructor(e,n){super(e,"in",n),this.keys=$P("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},JB=class extends rr{constructor(e,n){super(e,"not-in",n),this.keys=$P("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function $P(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>et.fromName(r.referenceValue))}let ZB=class extends rr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return e_(n)&&Yd(n.arrayValue,this.value)}},ej=class extends rr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yd(this.value.arrayValue,n)}};class tj extends rr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yd(this.value.arrayValue,n)}}class nj extends rr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!e_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rj=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}};function ZE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new rj(t,e,n,r,i,s,o)}function t_(t){const e=ft(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>M0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),mg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ru(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ru(r)).join(",")),e.dt=n}return e.dt}function n_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JE(t.startAt,e.startAt)&&JE(t.endAt,e.endAt)}function $0(t){return et.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}};function ij(t,e,n,r,i,s,o,a){return new hl(t,e,n,r,i,s,o,a)}function r_(t){return new hl(t)}function eS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function vg(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function s_(t){return t.collectionGroup!==null}function ka(t){const e=ft(t);if(e.wt===null){e.wt=[];const n=vg(e),r=i_(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new hu(n)),e.wt.push(new hu(_s.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new hu(_s.keyField(),s))}}}return e.wt}function qs(t){const e=ft(t);if(!e._t)if(e.limitType==="F")e._t=ZE(e.path,e.collectionGroup,ka(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of ka(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new hu(s.field,o))}const r=e.endAt?new Ou(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ou(e.startAt.position,e.startAt.inclusive):null;e._t=ZE(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function L0(t,e){e.getFirstInequalityField(),vg(t);const n=t.filters.concat([e]);return new hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Up(t,e,n){return new hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yg(t,e){return n_(qs(t),qs(e))&&t.limitType===e.limitType}function LP(t){return`${t_(qs(t))}|lt:${t.limitType}`}function U0(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>MP(r)).join(", ")}]`),mg(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ru(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ru(r)).join(",")),`Target(${n})`}(qs(t))}; limitType=${t.limitType})`}function wg(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):et.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of ka(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=QE(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,ka(n),r)||n.endAt&&!function(i,s,o){const a=QE(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,ka(n),r))}(t,e)}function sj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UP(t){return(e,n)=>{let r=!1;for(const i of ka(t)){const s=oj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oj(t,e,n){const r=t.field.isKeyField()?et.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?Pu(a,l):ot()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){dl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return CP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=new Yn(et.comparator);function Xs(){return aj}const FP=new Yn(et.comparator);function $c(...t){let e=FP;for(const n of t)e=e.insert(n.key,n);return e}function VP(t){let e=FP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _a(){return rd()}function BP(){return rd()}function rd(){return new rc(t=>t.toString(),(t,e)=>t.isEqual(e))}const lj=new Yn(et.comparator),uj=new gi(et.comparator);function bt(...t){let e=uj;for(const n of t)e=e.add(n);return e}const cj=new gi(Bt);function dj(){return cj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$p(e)?"-0":e}}function HP(t){return{integerValue:""+t}}function hj(t,e){return WB(e)?HP(e):jP(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this._=void 0}}function fj(t,e,n){return t instanceof Fp?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&gg(i)&&(i=Zb(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof zd?YP(t,e):t instanceof Kd?zP(t,e):function(r,i){const s=WP(r,i),o=tS(s)+tS(r.gt);return N0(s)&&N0(r.gt)?HP(o):jP(r.serializer,o)}(t,e)}function pj(t,e,n){return t instanceof zd?YP(t,e):t instanceof Kd?zP(t,e):n}function WP(t,e){return t instanceof Vp?N0(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Fp extends bg{}class zd extends bg{constructor(e){super(),this.elements=e}}function YP(t,e){const n=KP(e);for(const r of t.elements)n.some(i=>Ts(i,r))||n.push(r);return{arrayValue:{values:n}}}class Kd extends bg{constructor(e){super(),this.elements=e}}function zP(t,e){let n=KP(e);for(const r of t.elements)n=n.filter(i=>!Ts(i,r));return{arrayValue:{values:n}}}class Vp extends bg{constructor(e,n){super(),this.serializer=e,this.gt=n}}function tS(t){return Bn(t.integerValue||t.doubleValue)}function KP(t){return e_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function mj(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof zd&&r instanceof zd||n instanceof Kd&&r instanceof Kd?xu(n.elements,r.elements,Ts):n instanceof Vp&&r instanceof Vp?Ts(n.gt,r.gt):n instanceof Fp&&r instanceof Fp}(t.transform,e.transform)}class gj{constructor(e,n){this.version=e,this.transformResults=n}}class Di{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Di}static exists(e){return new Di(void 0,e)}static updateTime(e){return new Di(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _g{}function GP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new o_(t.key,Di.none()):new Ch(t.key,t.data,Di.none());{const n=t.data,r=Jr.empty();let i=new gi(_s.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zo(t.key,r,new us(i.toArray()),Di.none())}}function vj(t,e,n){t instanceof Ch?function(r,i,s){const o=r.value.clone(),a=rS(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Zo?function(r,i,s){if(!Kf(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=rS(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(qP(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function id(t,e,n,r){return t instanceof Ch?function(i,s,o,a){if(!Kf(i.precondition,s))return o;const l=i.value.clone(),u=iS(i.fieldTransforms,a,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zo?function(i,s,o,a){if(!Kf(i.precondition,s))return o;const l=iS(i.fieldTransforms,a,s),u=s.data;return u.setAll(qP(i)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return Kf(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function yj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=WP(r.transform,i||null);s!=null&&(n===null&&(n=Jr.empty()),n.set(r.field,s))}return n||null}function nS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&xu(n,r,(i,s)=>mj(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ch extends _g{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zo extends _g{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function rS(t,e,n){const r=new Map;pn(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,pj(o,a,n[i]))}return r}function iS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,fj(s,o,e))}return r}class o_ extends _g{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wj extends _g{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&vj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=id(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=id(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=BP();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=GP(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(pt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),bt())}isEqual(e){return this.batchId===e.batchId&&xu(this.mutations,e.mutations,(n,r)=>nS(n,r))&&xu(this.baseMutations,e.baseMutations,(n,r)=>nS(n,r))}}class a_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pn(e.mutations.length===r.length);let i=lj;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new a_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un,At;function Ej(t){switch(t){default:return ot();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function XP(t){if(t===void 0)return zs("GRPC error has no .code"),de.UNKNOWN;switch(t){case Un.OK:return de.OK;case Un.CANCELLED:return de.CANCELLED;case Un.UNKNOWN:return de.UNKNOWN;case Un.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Un.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Un.INTERNAL:return de.INTERNAL;case Un.UNAVAILABLE:return de.UNAVAILABLE;case Un.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Un.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Un.NOT_FOUND:return de.NOT_FOUND;case Un.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Un.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Un.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Un.ABORTED:return de.ABORTED;case Un.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Un.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Un.DATA_LOSS:return de.DATA_LOSS;default:return ot()}}(At=Un||(Un={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return mf}static getOrCreateInstance(){return mf===null&&(mf=new l_),mf}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let mf=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=new du([4294967295,4294967295],0);function sS(t){const e=Sj().encode(t),n=new DB;return n.update(e),new Uint8Array(n.digest())}function oS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new du([n,r],0),new du([i,s],0)]}class u_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lc(`Invalid padding: ${n}`);if(r<0)throw new Lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=du.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(du.fromNumber(r)));return i.compare(Cj)===1&&(i=new du([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=sS(e),[r,i]=oS(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new u_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=sS(e),[r,i]=oS(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ih.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tg(pt.min(),i,new Yn(Bt),Xs(),bt())}}class Ih{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ih(r,n,bt(),bt(),bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class QP{constructor(e,n){this.targetId=e,this.Vt=n}}class JP{constructor(e,n,r=wi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class aS{constructor(){this.St=0,this.Dt=uS(),this.Ct=wi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=bt(),n=bt(),r=bt();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ot()}}),new Ih(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=uS()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Ij{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Xs(),this.zt=lS(),this.Wt=new Yn(Bt)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:ot()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if($0(o))if(i===0){const a=new et(o.path);this.Yt(r,a,Ks.newNoDocument(a,pt.min()))}else pn(i===1);else{const a=this.ie(r);if(a!==i){const l=this.re(e,a);if(l!==0){this.ee(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=l_.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,c,d){var h,f,p,m,v,b;const g={localCacheCount:c,existenceFilterCount:d.count},_=d.unchangedNames;return _&&(g.bloomFilter={applied:u===0,hashCount:(h=_==null?void 0:_.hashCount)!==null&&h!==void 0?h:0,bitmapLength:(m=(p=(f=_==null?void 0:_.bits)===null||f===void 0?void 0:f.bitmap)===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0,padding:(b=(v=_==null?void 0:_.bits)===null||v===void 0?void 0:v.padding)!==null&&b!==void 0?b:0}),g}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=Ga(s).toUint8Array()}catch(c){if(c instanceof IP)return Du("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw c}try{u=new u_(l,o,a)}catch(c){return Du(c instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",c),1}return u.It===0?1:i!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&$0(a.target)){const l=new et(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,Ks.newNoDocument(l,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=bt();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.se(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new Tg(e,n,this.Wt,this.jt,r);return this.jt=Xs(),this.zt=lS(),this.Wt=new Yn(Bt),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new aS,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new gi(Bt),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||Ke("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new aS),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function lS(){return new Yn(et.comparator)}function uS(){return new Yn(et.comparator)}const Aj={asc:"ASCENDING",desc:"DESCENDING"},kj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dj={and:"AND",or:"OR"};class xj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function F0(t,e){return t.useProto3Json||mg(e)?e:{value:e}}function Bp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Pj(t,e){return Bp(t,e.toTimestamp())}function ms(t){return pn(!!t),pt.fromTimestamp(function(e){const n=Ho(e);return new jn(n.seconds,n.nanos)}(t))}function c_(t,e){return function(n){return new Dn(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function eR(t){const e=Dn.fromString(t);return pn(iR(e)),e}function V0(t,e){return c_(t.databaseId,e.path)}function Mv(t,e){const n=eR(e);if(n.get(1)!==t.databaseId.projectId)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new et(tR(n))}function B0(t,e){return c_(t.databaseId,e)}function Rj(t){const e=eR(t);return e.length===4?Dn.emptyPath():tR(e)}function j0(t){return new Dn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tR(t){return pn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cS(t,e,n){return{name:V0(t,e),fields:n.value.mapValue.fields}}function Oj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ot()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(pn(u===void 0||typeof u=="string"),wi.fromBase64String(u||"")):(pn(u===void 0||u instanceof Uint8Array),wi.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?de.UNKNOWN:XP(l.code);return new Pe(u,l.message||"")}(o);n=new JP(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Mv(t,r.document.name),s=ms(r.document.updateTime),o=r.document.createTime?ms(r.document.createTime):pt.min(),a=new Jr({mapValue:{fields:r.document.fields}}),l=Ks.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Gf(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Mv(t,r.document),s=r.readTime?ms(r.readTime):pt.min(),o=Ks.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Gf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Mv(t,r.document),s=r.removedTargetIds||[];n=new Gf([],s,i,null)}else{if(!("filter"in e))return ot();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Tj(i,s),a=r.targetId;n=new QP(a,o)}}return n}function Nj(t,e){let n;if(e instanceof Ch)n={update:cS(t,e.key,e.value)};else if(e instanceof o_)n={delete:V0(t,e.key)};else if(e instanceof Zo)n={update:cS(t,e.key,e.data),updateMask:Hj(e.fieldMask)};else{if(!(e instanceof wj))return ot();n={verify:V0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Fp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof zd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Kd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Vp)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw ot()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Pj(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ot()}(t,e.precondition)),n}function Mj(t,e){return t&&t.length>0?(pn(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?ms(r.updateTime):ms(i);return s.isEqual(pt.min())&&(s=ms(i)),new gj(s,r.transformResults||[])}(n,e))):[]}function $j(t,e){return{documents:[B0(t,e.path)]}}function Lj(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=B0(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=B0(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return rR(Gs.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Ll(c.field),direction:Vj(c.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=F0(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function Uj(t){let e=Rj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pn(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(c){const d=nR(c);return d instanceof Gs&&OP(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(d){return new hu(Ul(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(c)));let a=null;n.limit&&(a=function(c){let d;return d=typeof c=="object"?c.value:c,mg(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(c){const d=!!c.before,h=c.values||[];return new Ou(h,d)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const d=!c.before,h=c.values||[];return new Ou(h,d)}(n.endAt)),ij(e,i,o,s,a,"F",l,u)}function Fj(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nR(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ul(e.unaryFilter.field);return rr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ul(e.unaryFilter.field);return rr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ul(e.unaryFilter.field);return rr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ul(e.unaryFilter.field);return rr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}(t):t.fieldFilter!==void 0?function(e){return rr.create(Ul(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Gs.create(e.compositeFilter.filters.map(n=>nR(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ot()}}(e.compositeFilter.op))}(t):ot()}function Vj(t){return Aj[t]}function Bj(t){return kj[t]}function jj(t){return Dj[t]}function Ll(t){return{fieldPath:t.canonicalString()}}function Ul(t){return _s.fromServerFormat(t.fieldPath)}function rR(t){return t instanceof rr?function(e){if(e.op==="=="){if(XE(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NAN"}};if(qE(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(XE(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NOT_NAN"}};if(qE(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(e.field),op:Bj(e.op),value:e.value}}}(t):t instanceof Gs?function(e){const n=e.getFilters().map(r=>rR(r));return n.length===1?n[0]:{compositeFilter:{op:jj(e.op),filters:n}}}(t):ot()}function Hj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d_=class Uc{constructor(e,n,r,i,s=pt.min(),o=pt.min(),a=wi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Uc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Uc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wj=class{constructor(e){this.fe=e}};function Yj(t){const e=Uj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Up(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zj=class{constructor(){this.rn=new Kj}addToCollectionParentIndex(e,n){return this.rn.add(n),De.resolve()}getCollectionParents(e,n){return De.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return De.resolve()}deleteFieldIndex(e,n){return De.resolve()}getDocumentsMatchingTarget(e,n){return De.resolve(null)}getIndexType(e,n){return De.resolve(0)}getFieldIndexes(e,n){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,n){return De.resolve(Hd.min())}getMinOffsetFromCollectionGroup(e,n){return De.resolve(Hd.min())}updateCollectionGroup(e,n,r){return De.resolve()}updateIndexEntries(e,n){return De.resolve()}},Kj=class{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new gi(Dn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gi(Dn.comparator)).toArray()}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H0=class W0{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new W0(0)}static Mn(){return new W0(-1)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gj=class{constructor(){this.changes=new rc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ks.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?De.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xj=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&id(r.mutation,i,us.empty(),jn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,bt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=bt()){const i=_a();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=$c();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=_a();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,bt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Xs();const o=rd(),a=rd();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Zo)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),id(c.mutation,u,c.mutation.getFieldMask(),jn.now())):o.set(u.key,us.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new qj(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=rd();let i=new Yn((o,a)=>o-a),s=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||us.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||bt()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=BP();c.forEach(h=>{if(!s.has(h)){const f=GP(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return De.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return et.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):s_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):De.resolve(_a());let a=-1,l=s;return o.next(u=>De.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?De.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,bt())).next(c=>({batchId:a,changes:VP(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new et(n)).next(r=>{let i=$c();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=$c();return this.indexManager.getCollectionParents(e,i).next(o=>De.forEach(o,a=>{const l=function(u,c){return new hl(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,Ks.newInvalidDocument(u)))});let o=$c();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&id(u.mutation,l,us.empty(),jn.now()),wg(n,l)&&(o=o.insert(a,l))}),o})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qj=class{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return De.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:ms(r.createTime)}),De.resolve()}getNamedQuery(e,n){return De.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:Yj(r.bundledQuery),readTime:ms(r.readTime)}}(n)),De.resolve()}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jj=class{constructor(){this.overlays=new Yn(et.comparator),this.ls=new Map}getOverlay(e,n){return De.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_a();return De.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),De.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),De.resolve()}getOverlaysForCollection(e,n,r){const i=_a(),s=n.length+1,o=new et(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return De.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Yn((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=_a(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=_a(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return De.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _j(n,r));let s=this.ls.get(n);s===void 0&&(s=bt(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h_=class{constructor(){this.fs=new gi(tr.ds),this.ws=new gi(tr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new tr(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new tr(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new et(new Dn([])),r=new tr(n,e),i=new tr(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new et(new Dn([])),r=new tr(n,e),i=new tr(n,e+1);let s=bt();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new tr(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}};class tr{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return et.comparator(e.key,n.key)||Bt(e.As,n.As)}static _s(e,n){return Bt(e.As,n.As)||et.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new gi(tr.ds)}checkEmpty(e){return De.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bj(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new tr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return De.resolve(o)}lookupMutationBatch(e,n){return De.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.bs(r),s=i<0?0:i;return De.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tr(n,0),i=new tr(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),De.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gi(Bt);return n.forEach(i=>{const s=new tr(i,0),o=new tr(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),De.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;et.isDocumentKey(s)||(s=s.child(""));const o=new tr(new et(s),0);let a=new gi(Bt);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.As)),!0)},o),De.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pn(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return De.forEach(n.mutations,i=>{const s=new tr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new tr(n,0),i=this.Rs.firstAfterOrEqual(r);return De.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.Ds=e,this.docs=new Yn(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return De.resolve(r?r.document.mutableCopy():Ks.newInvalidDocument(n))}getEntries(e,n){let r=Xs();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ks.newInvalidDocument(i))}),De.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Xs();const o=n.path,a=new et(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||BB(VB(c),r)<=0||(i.has(c.key)||wg(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return De.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ot()}Cs(e,n){return De.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new t9(this)}getSize(e){return De.resolve(this.size)}}class t9 extends Gj{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),De.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e){this.persistence=e,this.xs=new rc(n=>t_(n),n_),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new h_,this.targetCount=0,this.Ms=H0.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),De.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new H0(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,De.resolve()}updateTargetData(e,n){return this.Fn(n),De.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),De.waitFor(s).next(()=>i)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return De.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),De.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),De.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),De.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return De.resolve(r)}containsKey(e,n){return De.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e,n){this.$s={},this.overlays={},this.Os=new Jb(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new n9(this),this.indexManager=new zj,this.remoteDocumentCache=function(r){return new e9(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new Wj(n),this.qs=new Qj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new Zj(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){Ke("MemoryPersistence","Starting transaction:",e);const i=new i9(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return De.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class i9 extends HB{constructor(e){super(),this.currentSequenceNumber=e}}class f_{constructor(e){this.persistence=e,this.Qs=new h_,this.js=null}static zs(e){return new f_(e)}get Ws(){if(this.js)return this.js;throw ot()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),De.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),De.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),De.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.Ws,r=>{const i=et.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,pt.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return De.or([()=>De.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=bt(),i=bt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new p_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(eS(n))return De.resolve(null);let r=qs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Up(n,null,"F"),r=qs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=bt(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,Up(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,i){return eS(n)||i.isEqual(pt.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(YE()<=Nt.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),U0(n)),this.Wi(e,o,n,FB(i,-1)))})}ji(e,n){let r=new gi(UP(e));return n.forEach((i,s)=>{wg(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return YE()<=Nt.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",U0(n)),this.Ui.getDocumentsMatchingQuery(e,n,Hd.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new Yn(Bt),this.Yi=new rc(s=>t_(s),n_),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xj(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function a9(t,e,n,r){return new o9(t,e,n,r)}async function sR(t,e){const n=ft(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=bt();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function l9(t,e){const n=ft(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,d=c.keys();let h=De.resolve();return d.forEach(f=>{h=h.next(()=>u.getEntry(a,f)).next(p=>{const m=l.docVersions.get(f);pn(m!==null),p.version.compareTo(m)<0&&(c.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=bt();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function oR(t){const e=ft(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function u9(t,e){const n=ft(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(wi.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),function(p,m,v){return p.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,f,c)&&a.push(n.Bs.updateTargetData(s,f))});let l=Xs(),u=bt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(c9(s,o,e.documentUpdates).next(c=>{l=c.nr,u=c.sr})),!r.isEqual(pt.min())){const c=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return De.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ji=i,s))}function c9(t,e,n){let r=bt(),i=bt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Xs();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(pt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ke("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{nr:o,sr:i}})}function d9(t,e){const n=ft(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function h9(t,e){const n=ft(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,De.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new d_(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function Y0(t,e,n){const r=ft(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Sh(o))throw o;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function dS(t,e,n){const r=ft(t);let i=pt.min(),s=bt();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=ft(a),d=c.Yi.get(u);return d!==void 0?De.resolve(c.Ji.get(d)):c.Bs.getTargetData(l,u)}(r,o,qs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:pt.min(),n?s:bt())).next(a=>(f9(r,sj(e),a),{documents:a,ir:s})))}function f9(t,e,n){let r=t.Xi.get(e)||pt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}class hS{constructor(){this.activeTargetIds=dj()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class p9{constructor(){this.Hr=new hS,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new hS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf=null;function $v(){return gf===null?gf=268435456+Math.round(2147483648*Math.random()):gf++,"0x"+gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="WebChannelConnection";class y9 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=$v(),a=this.To(e,n);Ke("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,i,s),this.Ao(e,a,l,r).then(u=>(Ke("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw Du("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){const r=g9[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=$v();return new Promise((o,a)=>{const l=new kB;l.setWithCredentials(!0),l.listenOnce(CB.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nv.NO_ERROR:const c=l.getResponseJson();Ke(wr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Nv.TIMEOUT:Ke(wr,`RPC '${e}' ${s} timed out`),a(new Pe(de.DEADLINE_EXCEEDED,"Request time out"));break;case Nv.HTTP_ERROR:const d=l.getStatus();if(Ke(wr,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const p=function(m){const v=m.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(v)>=0?v:de.UNKNOWN}(f.status);a(new Pe(p,f.message))}else a(new Pe(de.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Pe(de.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Ke(wr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ke(wr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const i=$v(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EB(),a=SB(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new AB({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Ke(wr,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let h=!1,f=!1;const p=new v9({ro:v=>{f?Ke(wr,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(Ke(wr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Ke(wr,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},oo:()=>d.close()}),m=(v,b,g)=>{v.listen(b,_=>{try{g(_)}catch(y){setTimeout(()=>{throw y},0)}})};return m(d,hf.EventType.OPEN,()=>{f||Ke(wr,`RPC '${e}' stream ${i} transport opened.`)}),m(d,hf.EventType.CLOSE,()=>{f||(f=!0,Ke(wr,`RPC '${e}' stream ${i} transport closed`),p.wo())}),m(d,hf.EventType.ERROR,v=>{f||(f=!0,Du(wr,`RPC '${e}' stream ${i} transport errored:`,v),p.wo(new Pe(de.UNAVAILABLE,"The operation could not be completed")))}),m(d,hf.EventType.MESSAGE,v=>{var b;if(!f){const g=v.data[0];pn(!!g);const _=g,y=_.error||((b=_[0])===null||b===void 0?void 0:b.error);if(y){Ke(wr,`RPC '${e}' stream ${i} received error:`,y);const w=y.status;let T=function(A){const I=Un[A];if(I!==void 0)return XP(I)}(w),P=y.message;T===void 0&&(T=de.INTERNAL,P="Unknown error status: "+w+" with message "+y.message),f=!0,p.wo(new Pe(T,P)),d.close()}else Ke(wr,`RPC '${e}' stream ${i} received:`,g),p._o(g)}}),m(a,IB.STAT_EVENT,v=>{v.stat===HE.PROXY?Ke(wr,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===HE.NOPROXY&&Ke(wr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Lv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){return new xj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,i,s,o,a,l){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new aR(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(zs(n.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new Pe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w9 extends lR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=Oj(this.serializer,e),r=function(i){if(!("targetChange"in i))return pt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?pt.min():s.readTime?ms(s.readTime):pt.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=j0(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=$0(a)?{documents:$j(i,a)}:{query:Lj(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=ZP(i,s.resumeToken);const l=F0(i,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(pt.min())>0){o.readTime=Bp(i,s.snapshotVersion.toTimestamp());const l=F0(i,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=Fj(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=j0(this.serializer),n.removeTarget=e,this.Wo(n)}}class b9 extends lR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(pn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=Mj(e.writeResults,e.commitTime),r=ms(e.commitTime);return this.listener.cu(r,n)}return pn(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=j0(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Nj(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(de.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(de.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class T9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(zs(n),this.mu=!1):Ke("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{fl(this)&&(Ke("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ft(a);l.vu.add(4),await Ah(l),l.bu.set("Unknown"),l.vu.delete(4),await Sg(l)}(this))})}),this.bu=new T9(r,i)}}async function Sg(t){if(fl(t))for(const e of t.Ru)await e(!0)}async function Ah(t){for(const e of t.Ru)await e(!1)}function uR(t,e){const n=ft(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),v_(n)?g_(n):ic(n).Ko()&&m_(n,e))}function cR(t,e){const n=ft(t),r=ic(n);n.Au.delete(e),r.Ko()&&dR(n,e),n.Au.size===0&&(r.Ko()?r.jo():fl(n)&&n.bu.set("Unknown"))}function m_(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ic(t).su(e)}function dR(t,e){t.Vu.qt(e),ic(t).iu(e)}function g_(t){t.Vu=new Ij({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),ic(t).start(),t.bu.gu()}function v_(t){return fl(t)&&!ic(t).Uo()&&t.Au.size>0}function fl(t){return ft(t).vu.size===0}function hR(t){t.Vu=void 0}async function S9(t){t.Au.forEach((e,n)=>{m_(t,e)})}async function C9(t,e){hR(t),v_(t)?(t.bu.Iu(e),g_(t)):t.bu.set("Unknown")}async function I9(t,e,n){if(t.bu.set("Online"),e instanceof JP&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jp(t,r)}else if(e instanceof Gf?t.Vu.Ht(e):e instanceof QP?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(pt.min()))try{const r=await oR(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.Au.get(l);u&&i.Au.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const u=i.Au.get(a);if(!u)return;i.Au.set(a,u.withResumeToken(wi.EMPTY_BYTE_STRING,u.snapshotVersion)),dR(i,a);const c=new d_(u.target,a,l,u.sequenceNumber);m_(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),await jp(t,r)}}async function jp(t,e,n){if(!Sh(e))throw e;t.vu.add(1),await Ah(t),t.bu.set("Offline"),n||(n=()=>oR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ke("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Sg(t)})}function fR(t,e){return e().catch(n=>jp(t,n,e))}async function Cg(t){const e=ft(t),n=Wo(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;A9(e);)try{const i=await d9(e.localStore,r);if(i===null){e.Eu.length===0&&n.jo();break}r=i.batchId,k9(e,i)}catch(i){await jp(e,i)}pR(e)&&mR(e)}function A9(t){return fl(t)&&t.Eu.length<10}function k9(t,e){t.Eu.push(e);const n=Wo(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function pR(t){return fl(t)&&!Wo(t).Uo()&&t.Eu.length>0}function mR(t){Wo(t).start()}async function D9(t){Wo(t).hu()}async function x9(t){const e=Wo(t);for(const n of t.Eu)e.uu(n.mutations)}async function P9(t,e,n){const r=t.Eu.shift(),i=a_.from(r,e,n);await fR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cg(t)}async function R9(t,e){e&&Wo(t).ou&&await async function(n,r){if(i=r.code,Ej(i)&&i!==de.ABORTED){const s=n.Eu.shift();Wo(n).Qo(),await fR(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Cg(n)}var i}(t,e),pR(t)&&mR(t)}async function pS(t,e){const n=ft(t);n.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=fl(n);n.vu.add(3),await Ah(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Sg(n)}async function O9(t,e){const n=ft(t);e?(n.vu.delete(2),await Sg(n)):e||(n.vu.add(2),await Ah(n),n.bu.set("Unknown"))}function ic(t){return t.Su||(t.Su=function(e,n,r){const i=ft(e);return i.fu(),new w9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:S9.bind(null,t),ao:C9.bind(null,t),nu:I9.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),v_(t)?g_(t):t.bu.set("Unknown")):(await t.Su.stop(),hR(t))})),t.Su}function Wo(t){return t.Du||(t.Du=function(e,n,r){const i=ft(e);return i.fu(),new b9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:D9.bind(null,t),ao:R9.bind(null,t),au:x9.bind(null,t),cu:P9.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Cg(t)):(await t.Du.stop(),t.Eu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new y_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function w_(t,e){if(zs("AsyncQueue",`${e}: ${t}`),Sh(t))return new Pe(de.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||et.comparator(n.key,r.key):(n,r)=>et.comparator(n.key,r.key),this.keyedMap=$c(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new fu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.Cu=new Yn(et.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):ot():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nu{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nu(e,n,fu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(){this.Nu=void 0,this.listeners=[]}}class M9{constructor(){this.queries=new rc(e=>LP(e),yg),this.onlineState="Unknown",this.ku=new Set}}async function gR(t,e){const n=ft(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new N9),i)try{s.Nu=await n.onListen(r)}catch(o){const a=w_(o,`Initialization of query '${U0(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&b_(n)}async function vR(t,e){const n=ft(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function $9(t,e){const n=ft(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&b_(n)}function L9(t,e,n){const r=ft(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function b_(t){t.ku.forEach(e=>{e.next()})}class yR{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Nu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.key=e}}class bR{constructor(e){this.key=e}}class U9{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=bt(),this.mutatedKeys=bt(),this.tc=UP(e),this.ec=new fu(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new mS,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=wg(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;h&&f?h.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),v=!0):this.rc(h,f)||(r.track({type:2,doc:f}),v=!0,(l&&this.tc(f,l)>0||u&&this.tc(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),v=!0):h&&!f&&(r.track({type:1,doc:h}),v=!0,(l||u)&&(a=!0)),v&&(f?(o=o.add(f),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((u,c)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return f(d)-f(h)}(u.type,c.type)||this.tc(u.doc,c.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,s.length!==0||l?{snapshot:new Nu(this.query,e.ec,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new mS,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=bt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new bR(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new wR(r))}),n}hc(e){this.Yu=e.ir,this.Zu=bt();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Nu.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class F9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class V9{constructor(e){this.key=e,this.fc=!1}}class B9{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new rc(a=>LP(a),yg),this._c=new Map,this.mc=new Set,this.gc=new Yn(et.comparator),this.yc=new Map,this.Ic=new h_,this.Tc={},this.Ec=new Map,this.Ac=H0.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function j9(t,e){const n=J9(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=await h9(n.localStore,qs(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await H9(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&uR(n.remoteStore,o)}return i}async function H9(t,e,n,r,i){t.Rc=(d,h,f)=>async function(p,m,v,b){let g=m.view.sc(v);g.zi&&(g=await dS(p.localStore,m.query,!1).then(({documents:w})=>m.view.sc(w,g)));const _=b&&b.targetChanges.get(m.targetId),y=m.view.applyChanges(g,p.isPrimaryClient,_);return vS(p,m.targetId,y.cc),y.snapshot}(t,d,h,f);const s=await dS(t.localStore,e,!0),o=new U9(e,s.ir),a=o.sc(s.documents),l=Ih.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);vS(t,n,u.cc);const c=new F9(e,n,o);return t.wc.set(e,c),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function W9(t,e){const n=ft(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!yg(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Y0(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),cR(n.remoteStore,r.targetId),z0(n,r.targetId)}).catch(Eh)):(z0(n,r.targetId),await Y0(n.localStore,r.targetId,!0))}async function Y9(t,e,n){const r=Z9(t);try{const i=await function(s,o){const a=ft(s),l=jn.now(),u=o.reduce((h,f)=>h.add(f.key),bt());let c,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Xs(),p=bt();return a.Zi.getEntries(h,u).next(m=>{f=m,f.forEach((v,b)=>{b.isValidDocument()||(p=p.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(m=>{c=m;const v=[];for(const b of o){const g=yj(b,c.get(b.key).overlayedDocument);g!=null&&v.push(new Zo(b.key,g,kP(g.value.mapValue),Di.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,v,o)}).next(m=>{d=m;const v=m.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(h,m.batchId,v)})}).then(()=>({batchId:d.batchId,changes:VP(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new Yn(Bt)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(r,i.batchId,n),await kh(r,i.changes),await Cg(r.remoteStore)}catch(i){const s=w_(i,"Failed to persist write");n.reject(s)}}async function _R(t,e){const n=ft(t);try{const r=await u9(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(pn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?pn(o.fc):i.removedDocuments.size>0&&(pn(o.fc),o.fc=!1))}),await kh(n,r,e)}catch(r){await Eh(r)}}function gS(t,e,n){const r=ft(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=ft(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const d of c.listeners)d.Mu(o)&&(l=!0)}),l&&b_(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function z9(t,e,n){const r=ft(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new Yn(et.comparator);o=o.insert(s,Ks.newNoDocument(s,pt.min()));const a=bt().add(s),l=new Tg(pt.min(),new Map,new Yn(Bt),o,a);await _R(r,l),r.gc=r.gc.remove(s),r.yc.delete(e),__(r)}else await Y0(r.localStore,e,!1).then(()=>z0(r,e,n)).catch(Eh)}async function K9(t,e){const n=ft(t),r=e.batch.batchId;try{const i=await l9(n.localStore,e);ER(n,r,null),TR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kh(n,i)}catch(i){await Eh(i)}}async function G9(t,e,n){const r=ft(t);try{const i=await function(s,o){const a=ft(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(pn(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);ER(r,e,n),TR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kh(r,i)}catch(i){await Eh(i)}}function TR(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function ER(t,e,n){const r=ft(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function z0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||SR(t,r)})}function SR(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(cR(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),__(t))}function vS(t,e,n){for(const r of n)r instanceof wR?(t.Ic.addReference(r.key,e),q9(t,r)):r instanceof bR?(Ke("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||SR(t,r.key)):ot()}function q9(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(Ke("SyncEngine","New document in limbo: "+n),t.mc.add(r),__(t))}function __(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new et(Dn.fromString(e)),r=t.Ac.next();t.yc.set(r,new V9(n)),t.gc=t.gc.insert(n,r),uR(t.remoteStore,new d_(qs(r_(n.path)),r,"TargetPurposeLimboResolution",Jb.ct))}}async function kh(t,e,n){const r=ft(t),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=p_.Li(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.dc.nu(i),await async function(a,l){const u=ft(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>De.forEach(l,d=>De.forEach(d.Fi,h=>u.persistence.referenceDelegate.addReference(c,d.targetId,h)).next(()=>De.forEach(d.Bi,h=>u.persistence.referenceDelegate.removeReference(c,d.targetId,h)))))}catch(c){if(!Sh(c))throw c;Ke("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const d=c.targetId;if(!c.fromCache){const h=u.Ji.get(d),f=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(f);u.Ji=u.Ji.insert(d,p)}}}(r.localStore,s))}async function X9(t,e){const n=ft(t);if(!n.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=await sR(n.localStore,e);n.currentUser=e,function(i,s){i.Ec.forEach(o=>{o.forEach(a=>{a.reject(new Pe(de.CANCELLED,s))})}),i.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kh(n,r.er)}}function Q9(t,e){const n=ft(t),r=n.yc.get(e);if(r&&r.fc)return bt().add(r.key);{let i=bt();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}function J9(t){const e=ft(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_R.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z9.bind(null,e),e.dc.nu=$9.bind(null,e.eventManager),e.dc.Pc=L9.bind(null,e.eventManager),e}function Z9(t){const e=ft(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G9.bind(null,e),e}let yS=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Eg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return a9(this.persistence,new s9,e.initialUser,this.serializer)}createPersistence(e){return new r9(f_.zs,this.serializer)}createSharedClientState(e){return new p9}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},eH=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X9.bind(null,this.syncEngine),await O9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new M9}createDatastore(e){const n=Eg(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new y9(i));var i;return function(s,o,a,l){return new _9(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>gS(this.syncEngine,a,0),o=fS.D()?new fS:new m9,new E9(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,u){const c=new B9(r,i,s,o,a,l);return u&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ft(e);Ke("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Ah(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CR=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_r.UNAUTHENTICATED,this.clientId=EP.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Ke("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ke("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=w_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uv(t,e){t.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await sR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rH(t);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>pS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>pS(e.remoteStore,s)),t._onlineComponents=e}function nH(t){return t.name==="FirebaseError"?t.code===de.FAILED_PRECONDITION||t.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function rH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!nH(n))throw n;Du("Error using user provided cache. Falling back to memory cache: "+n),await Uv(t,new yS)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),await Uv(t,new yS);return t._offlineComponents}async function IR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),await wS(t,t._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),await wS(t,new eH))),t._onlineComponents}function iH(t){return IR(t).then(e=>e.syncEngine)}async function AR(t){const e=await IR(t),n=e.eventManager;return n.onListen=j9.bind(null,e.syncEngine),n.onUnlisten=W9.bind(null,e.syncEngine),n}function sH(t,e,n={}){const r=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new CR({next:d=>{s.enqueueAndForget(()=>vR(i,c));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new Pe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&a.source==="server"?l.reject(new Pe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new yR(r_(o.path),u,{includeMetadataChanges:!0,Ku:!0});return gR(i,c)}(await AR(t),t.asyncQueue,e,n,r)),r.promise}function oH(t,e,n={}){const r=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new CR({next:d=>{s.enqueueAndForget(()=>vR(i,c)),d.fromCache&&a.source==="server"?l.reject(new Pe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new yR(o,u,{includeMetadataChanges:!0,Ku:!0});return gR(i,c)}(await AR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e,n){if(!n)throw new Pe(de.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aH(t,e,n,r){if(e===!0&&r===!0)throw new Pe(de.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _S(t){if(!et.isDocumentKey(t))throw new Pe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function TS(t){if(et.isDocumentKey(t))throw new Pe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ig(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ot()}function Ji(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ig(t);throw new Pe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function lH(t,e){if(e<=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Pe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Pe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Pe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Pe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class Ag{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ES({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ES(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new xB;switch(n.type){case"firstParty":return new NB(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Pe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=bS.get(e);n&&(Ke("ComponentProvider","Removing Datastore"),bS.delete(e),n.terminate())}(this),Promise.resolve()}}function uH(t,e,n,r={}){var i;const s=(t=Ji(t,Ag))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Du("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=_r.MOCK_USER;else{a=wD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Pe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new _r(u)}t._authCredentials=new PB(new TP(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wr(this.firestore,e,this._key)}}class no{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new no(this.firestore,e,this._query)}}class No extends no{constructor(e,n,r){super(e,n,r_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wr(this.firestore,null,new et(e))}withConverter(e){return new No(this.firestore,e,this._path)}}function $i(t,e,...n){if(t=jt(t),DR("collection","path",e),t instanceof Ag){const r=Dn.fromString(e,...n);return TS(r),new No(t,null,r)}{if(!(t instanceof Wr||t instanceof No))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dn.fromString(e,...n));return TS(r),new No(t.firestore,null,r)}}function Ut(t,e,...n){if(t=jt(t),arguments.length===1&&(e=EP.A()),DR("doc","path",e),t instanceof Ag){const r=Dn.fromString(e,...n);return _S(r),new Wr(t,null,new et(r))}{if(!(t instanceof Wr||t instanceof No))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dn.fromString(e,...n));return _S(r),new Wr(t.firestore,t instanceof No?t.converter:null,new et(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new aR(this,"async_queue_retry"),this.Xc=()=>{const n=Lv();n&&Ke("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Lv();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Lv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Bs;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Sh(e))throw e;Ke("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw zs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=y_.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&ot()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class pl extends Ag{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new cH,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xR(this),this._firestoreClient.terminate()}}function dH(t,e){const n=typeof t=="object"?t:Zu(),r=typeof t=="string"?t:e||"(default)",i=Is(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=gD("firestore");s&&uH(i,...s)}return i}function T_(t){return t._firestoreClient||xR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xR(t){var e,n,r;const i=t._freezeSettings(),s=function(o,a,l,u){return new zB(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,kR(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new tH(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mu(wi.fromBase64String(e))}catch(n){throw new Pe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mu(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Pe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _s(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Pe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Pe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH=/^__.*__$/;class fH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ch(e,this.data,n,this.fieldTransforms)}}class PR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function RR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class C_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new C_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Hp(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(RR(this.ca)&&hH.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class pH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Eg(e)}ya(e,n,r,i=!1){return new C_({ca:e,methodName:n,ga:r,path:_s.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dh(t){const e=t._freezeSettings(),n=Eg(t._databaseId);return new pH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function OR(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);I_("Data must be an object, but it was:",o,r);const a=LR(r,o);let l,u;if(s.merge)l=new us(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=K0(e,d,n);if(!o.contains(h))throw new Pe(de.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);FR(c,h)||c.push(h)}l=new us(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new fH(new Jr(a),l,u)}let NR=class MR extends E_{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof MR}};function mH(t,e,n,r){const i=t.ya(1,e,n);I_("Data must be an object, but it was:",i,r);const s=[],o=Jr.empty();dl(r,(l,u)=>{const c=A_(e,l,n);u=jt(u);const d=i.da(c);if(u instanceof NR)s.push(c);else{const h=xh(u,d);h!=null&&(s.push(c),o.set(c,h))}});const a=new us(s);return new PR(o,a,i.fieldTransforms)}function gH(t,e,n,r,i,s){const o=t.ya(1,e,n),a=[K0(e,r,n)],l=[i];if(s.length%2!=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(K0(e,s[h])),l.push(s[h+1]);const u=[],c=Jr.empty();for(let h=a.length-1;h>=0;--h)if(!FR(u,a[h])){const f=a[h];let p=l[h];p=jt(p);const m=o.da(f);if(p instanceof NR)u.push(f);else{const v=xh(p,m);v!=null&&(u.push(f),c.set(f,v))}}const d=new us(u);return new PR(c,d,o.fieldTransforms)}function $R(t,e,n,r=!1){return xh(n,t.ya(r?4:3,e))}function xh(t,e){if(UR(t=jt(t)))return I_("Unsupported field value:",e,t),LR(t,e);if(t instanceof E_)return function(n,r){if(!RR(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=xh(o,r.wa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=jt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return hj(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=jn.fromDate(n);return{timestampValue:Bp(r.serializer,i)}}if(n instanceof jn){const i=new jn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Bp(r.serializer,i)}}if(n instanceof S_)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Mu)return{bytesValue:ZP(r.serializer,n._byteString)};if(n instanceof Wr){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:c_(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${Ig(n)}`)}(t,e)}function LR(t,e){const n={};return CP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dl(t,(r,i)=>{const s=xh(i,e.ha(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function UR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jn||t instanceof S_||t instanceof Mu||t instanceof Wr||t instanceof E_)}function I_(t,e,n){if(!UR(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Ig(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function K0(t,e,n){if((e=jt(e))instanceof kg)return e._internalPath;if(typeof e=="string")return A_(t,e);throw Hp("Field path arguments must be of type string or ",t,!1,void 0,n)}const vH=new RegExp("[~\\*/\\[\\]]");function A_(t,e,n){if(e.search(vH)>=0)throw Hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kg(...e.split("."))._internalPath}catch{throw Hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Pe(de.INVALID_ARGUMENT,a+t+l)}function FR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k_=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},yH=class extends k_{data(){return super.data()}};function Dg(t,e){return typeof e=="string"?A_(t,e):e instanceof kg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Pe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}let D_=class{},xg=class extends D_{};function bH(t,e,...n){let r=[];e instanceof D_&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof _H).length,o=i.filter(a=>a instanceof VR).length;if(s>1||s>0&&o>0)throw new Pe(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}let VR=class BR extends xg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new BR(e,n,r)}_apply(e){const n=this._parse(e);return zR(e._query,n),new no(e.firestore,e.converter,L0(e._query,n))}_parse(e){const n=Dh(e.firestore);return function(i,s,o,a,l,u,c){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){AS(c,u);const h=[];for(const f of c)h.push(IS(a,i,f));d={arrayValue:{values:h}}}else d=IS(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||AS(c,u),d=$R(o,s,c,u==="in"||u==="not-in");return rr.create(l,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function SS(t,e,n){const r=e,i=Dg("where",t);return VR._create(i,r,n)}let _H=class jR extends D_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jR(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)zR(s,a),s=L0(s,a)}(e._query,n),new no(e.firestore,e.converter,L0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}},TH=class HR extends xg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new HR(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new hu(i,s);return function(a,l){if(i_(a)===null){const u=vg(a);u!==null&&KR(a,u,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new no(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new hl(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function CS(t,e="asc"){const n=e,r=Dg("orderBy",t);return TH._create(r,n)}let EH=class WR extends xg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new WR(e,n,r)}_apply(e){return new no(e.firestore,e.converter,Up(e._query,this._limit,this._limitType))}};function SH(t){return lH("limit",t),EH._create("limit",t,"F")}let CH=class YR extends xg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new YR(e,n,r)}_apply(e){const n=AH(e,this.type,this._docOrFields,this._inclusive);return new no(e.firestore,e.converter,function(r,i){return new hl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}};function IH(...t){return CH._create("startAfter",t,!1)}function AH(t,e,n,r){if(n[0]=jt(n[0]),n[0]instanceof k_)return function(i,s,o,a,l){if(!a)throw new Pe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const c of ka(i))if(c.field.isKeyField())u.push(Lp(s,a.key));else{const d=a.data.field(c.field);if(gg(d))throw new Pe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const h=c.field.canonicalString();throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}u.push(d)}return new Ou(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Dh(t.firestore);return function(s,o,a,l,u,c){const d=s.explicitOrderBy;if(u.length>d.length)throw new Pe(de.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<u.length;f++){const p=u[f];if(d[f].field.isKeyField()){if(typeof p!="string")throw new Pe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!s_(s)&&p.indexOf("/")!==-1)throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const m=s.path.child(Dn.fromString(p));if(!et.isDocumentKey(m))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);const v=new et(m);h.push(Lp(o,v))}else{const m=$R(a,l,p);h.push(m)}}return new Ou(h,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function IS(t,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new Pe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s_(e)&&n.indexOf("/")!==-1)throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Dn.fromString(n));if(!et.isDocumentKey(r))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lp(t,new et(r))}if(n instanceof Wr)return Lp(t,n._key);throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ig(n)}.`)}function AS(t,e){if(!Array.isArray(t)||t.length===0)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zR(t,e){if(e.isInequality()){const r=vg(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=i_(t);s!==null&&KR(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Pe(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Pe(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function KR(t,e,n){if(!n.isEqual(e))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}let kH=class{convertValue(e,n="none"){switch(qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ot()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return dl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new S_(Bn(e.latitude),Bn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wd(e));default:return null}}convertTimestamp(e){const n=Ho(e);return new jn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Dn.fromString(e);pn(iR(r));const i=new AP(r.get(1),r.get(3)),s=new et(r.popFirst(5));return i.isEqual(n)||zs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qR extends k_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qf extends qR{data(e={}){return super.data(e)}}class DH{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qf(this._firestore,this._userDataWriter,r.key,r,new Fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Pe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new qf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Fc(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new qf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Fc(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:xH(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(t){t=Ji(t,Wr);const e=Ji(t.firestore,pl);return sH(T_(e),t._key).then(n=>LH(e,t,n))}class XR extends kH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wr(this.firestore,null,n)}}function RH(t){t=Ji(t,no);const e=Ji(t.firestore,pl),n=T_(e),r=new XR(e);return wH(t._query),oH(n,t._query).then(i=>new DH(e,r,t,i))}function OH(t,e,n){t=Ji(t,Wr);const r=Ji(t.firestore,pl),i=GR(t.converter,e,n);return Pg(r,[OR(Dh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Di.none())])}function NH(t,e,n,...r){t=Ji(t,Wr);const i=Ji(t.firestore,pl),s=Dh(i);let o;return o=typeof(e=jt(e))=="string"||e instanceof kg?gH(s,"updateDoc",t._key,e,n,r):mH(s,"updateDoc",t._key,e),Pg(i,[o.toMutation(t._key,Di.exists(!0))])}function MH(t){return Pg(Ji(t.firestore,pl),[new o_(t._key,Di.none())])}function $H(t,e){const n=Ji(t.firestore,pl),r=Ut(t),i=GR(t.converter,e);return Pg(n,[OR(Dh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Di.exists(!1))]).then(()=>r)}function Pg(t,e){return function(n,r){const i=new Bs;return n.asyncQueue.enqueueAndForget(async()=>Y9(await iH(n),r,i)),i.promise}(T_(t),e)}function LH(t,e,n){const r=n.docs.get(e._key),i=new XR(t);return new qR(t,i,e._key,r,new Fc(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){nc=n})(Xo),si(new Yr("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new pl(new RB(n.getProvider("auth-internal")),new $B(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Pe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new AP(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),vr(WE,"3.13.0",t),vr(WE,"3.13.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="firebasestorage.googleapis.com",JR="storageBucket",UH=2*60*1e3,FH=10*60*1e3,VH=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends bi{constructor(e,n,r=0){super(Fv(e),`Firebase Storage: ${n} (${Fv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mn||(mn={}));function Fv(t){return"storage/"+t}function x_(){const t="An unknown error occurred, please check the error payload for server response.";return new Sn(mn.UNKNOWN,t)}function BH(t){return new Sn(mn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function jH(t){return new Sn(mn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Sn(mn.UNAUTHENTICATED,t)}function WH(){return new Sn(mn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YH(t){return new Sn(mn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ZR(){return new Sn(mn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eO(){return new Sn(mn.CANCELED,"User canceled the upload/download.")}function zH(t){return new Sn(mn.INVALID_URL,"Invalid URL '"+t+"'.")}function KH(t){return new Sn(mn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GH(){return new Sn(mn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JR+"' property when initializing the app?")}function tO(){return new Sn(mn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qH(){return new Sn(mn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function XH(){return new Sn(mn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QH(t){return new Sn(mn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function G0(t){return new Sn(mn.INVALID_ARGUMENT,t)}function nO(){return new Sn(mn.APP_DELETED,"The Firebase app was deleted.")}function JH(t){return new Sn(mn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sd(t,e){return new Sn(mn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mc(t){throw new Sn(mn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=di.makeFromUrl(e,n)}catch{return new di(e,"")}if(r.path==="")return r;throw KH(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(y){y.path_=decodeURIComponent(y.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${c}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},m=n===QR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",b=new RegExp(`^https?://${m}/${i}/${v}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let y=0;y<_.length;y++){const w=_[y],T=w.regex.exec(e);if(T){const P=T[w.indices.bucket];let A=T[w.indices.path];A||(A=""),r=new di(P,A),w.postModify(r);break}}if(r==null)throw zH(e);return r}}class ZH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eW(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...v){u||(u=!0,e.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,t(f,l())},v)}function h(){s&&clearTimeout(s)}function f(v,...b){if(u){h();return}if(v){h(),c.call(null,v,...b);return}if(l()||o){h(),c.call(null,v,...b);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let p=!1;function m(v){p||(p=!0,h(),!u&&(i!==null?(v||(a=2),clearTimeout(i),d(0)):v||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function tW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nW(t){return t!==void 0}function rW(t){return typeof t=="function"}function iW(t){return typeof t=="object"&&!Array.isArray(t)}function Rg(t){return typeof t=="string"||t instanceof String}function kS(t){return P_()&&t instanceof Blob}function P_(){return typeof Blob<"u"&&!C3()}function DS(t,e,n,r){if(r<e)throw G0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw G0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function rO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Da;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Da||(Da={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e,n,r,i,s,o,a,l,u,c,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Da.NO_ERROR,l=s.getStatus();if(!a||iO(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Da.ABORT;r(!1,new vf(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new vf(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());nW(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=x_();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?nO():eO();o(l)}else{const l=ZR();o(l)}};this.canceled_?n(!1,new vf(!1,null,!0)):this.backoffId_=eW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function oW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cW(t,e,n,r,i,s,o=!0){const a=rO(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return lW(u,e),oW(u,n),aW(u,s),uW(u,r),new sW(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hW(...t){const e=dW();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(P_())return new Blob(t);throw new Sn(mn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(t){if(typeof atob>"u")throw QH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vv{constructor(e,n){this.data=e,this.contentType=n||null}}function mW(t,e){switch(t){case cs.RAW:return new Vv(sO(e));case cs.BASE64:case cs.BASE64URL:return new Vv(oO(t,e));case cs.DATA_URL:return new Vv(vW(e),yW(e))}throw x_()}function sO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function gW(t){let e;try{e=decodeURIComponent(t)}catch{throw sd(cs.DATA_URL,"Malformed data URL.")}return sO(e)}function oO(t,e){switch(t){case cs.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw sd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case cs.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw sd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=pW(e)}catch(i){throw i.message.includes("polyfill")?i:sd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class aO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw sd(cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=wW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function vW(t){const e=new aO(t);return e.base64?oO(cs.BASE64,e.rest):gW(e.rest)}function yW(t){return new aO(t).contentType}function wW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){let r=0,i="";kS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(kS(this.data_)){const r=this.data_,i=fW(r,e,n);return i===null?null:new To(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new To(r,!0)}}static getBlob(...e){if(P_()){const n=e.map(r=>r instanceof To?r.data_:r);return new To(hW.apply(null,n))}else{const n=e.map(o=>Rg(o)?mW(cs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new To(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){let e;try{e=JSON.parse(t)}catch{return null}return iW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _W(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function uO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(t,e){return e}class Mr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||TW}}let yf=null;function EW(t){return!Rg(t)||t.length<2?t:uO(t)}function cO(){if(yf)return yf;const t=[];t.push(new Mr("bucket")),t.push(new Mr("generation")),t.push(new Mr("metageneration")),t.push(new Mr("name","fullPath",!0));function e(s,o){return EW(o)}const n=new Mr("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Mr("size");return i.xform=r,t.push(i),t.push(new Mr("timeCreated")),t.push(new Mr("updated")),t.push(new Mr("md5Hash",null,!0)),t.push(new Mr("cacheControl",null,!0)),t.push(new Mr("contentDisposition",null,!0)),t.push(new Mr("contentEncoding",null,!0)),t.push(new Mr("contentLanguage",null,!0)),t.push(new Mr("contentType",null,!0)),t.push(new Mr("metadata","customMetadata",!0)),yf=t,yf}function SW(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new di(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function CW(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return SW(r,t),r}function dO(t,e,n){const r=lO(e);return r===null?null:CW(t,r,n)}function IW(t,e,n,r){const i=lO(e);if(i===null||!Rg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,d=t.fullPath,h="/b/"+o(c)+"/o/"+o(d),f=sc(h,n,r),p=rO({alt:"media",token:u});return f+p})[0]}function hO(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class ml{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){if(!t)throw x_()}function R_(t,e){function n(r,i){const s=dO(t,i,e);return js(s!==null),s}return n}function AW(t,e){function n(r,i){const s=dO(t,i,e);return js(s!==null),IW(s,i,t.host,t._protocol)}return n}function Ph(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=WH():i=HH():n.getStatus()===402?i=jH(t.bucket):n.getStatus()===403?i=YH(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function O_(t){const e=Ph(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=BH(t.path)),s.serverResponse=i.serverResponse,s}return n}function kW(t,e,n){const r=e.fullServerUrl(),i=sc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ml(i,s,R_(t,n),o);return a.errorHandler=O_(e),a}function DW(t,e,n){const r=e.fullServerUrl(),i=sc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ml(i,s,AW(t,n),o);return a.errorHandler=O_(e),a}function xW(t,e){const n=e.fullServerUrl(),r=sc(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new ml(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=O_(e),a}function PW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function fO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=PW(null,e)),r}function RW(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let y=0;y<2;y++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=fO(e,r,i),c=hO(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=To.getBlob(d,r,h);if(f===null)throw tO();const p={name:u.fullPath},m=sc(s,t.host,t._protocol),v="POST",b=t.maxUploadRetryTime,g=new ml(m,v,R_(t,n),b);return g.urlParams=p,g.headers=o,g.body=f.uploadData(),g.errorHandler=Ph(e),g}class Wp{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function N_(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{js(!1)}return js(!!n&&(e||["active"]).indexOf(n)!==-1),n}function OW(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=fO(e,r,i),a={name:o.fullPath},l=sc(s,t.host,t._protocol),u="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=hO(o,n),h=t.maxUploadRetryTime;function f(m){N_(m);let v;try{v=m.getResponseHeader("X-Goog-Upload-URL")}catch{js(!1)}return js(Rg(v)),v}const p=new ml(l,u,f,h);return p.urlParams=a,p.headers=c,p.body=d,p.errorHandler=Ph(e),p}function NW(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const c=N_(u,["active","final"]);let d=null;try{d=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{js(!1)}d||js(!1);const h=Number(d);return js(!isNaN(h)),new Wp(h,r.size(),c==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ml(n,o,s,a);return l.headers=i,l.errorHandler=Ph(e),l}const xS=256*1024;function MW(t,e,n,r,i,s,o,a){const l=new Wp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw qH();const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const d=l.current,h=d+c;let f="";c===0?f="finalize":u===c?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(d,h);if(m===null)throw tO();function v(y,w){const T=N_(y,["active","final"]),P=l.current+c,A=r.size();let I;return T==="final"?I=R_(e,s)(y,w):I=null,new Wp(P,A,T==="final",I)}const b="POST",g=e.maxUploadRetryTime,_=new ml(n,b,v,g);return _.headers=p,_.body=m.uploadData(),_.progressCallback=a||null,_.errorHandler=Ph(t),_}const Qr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Bv(t){switch(t){case"running":case"pausing":case"canceling":return Qr.RUNNING;case"paused":return Qr.PAUSED;case"success":return Qr.SUCCESS;case"canceled":return Qr.CANCELED;case"error":return Qr.ERROR;default:return Qr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e,n,r){if(rW(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class LW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Da.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Da.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Da.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw mc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UW extends LW{initXhr(){this.xhr_.responseType="text"}}function ma(){return new UW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=cO(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(mn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(iO(i.status,[]))if(s)i=ZR();else{this.sleepTime=Math.max(this.sleepTime*2,VH),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(mn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=OW(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ma,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=NW(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ma,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=xS*this._chunkMultiplier,n=new Wp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=MW(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ma,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){xS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=kW(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ma,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=RW(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ma,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=eO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Bv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new $W(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Bv(this._state)){case Qr.SUCCESS:Cl(this._resolve.bind(null,this.snapshot))();break;case Qr.CANCELED:case Qr.ERROR:const n=this._reject;Cl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Bv(this._state)){case Qr.RUNNING:case Qr.PAUSED:e.next&&Cl(e.next.bind(e,this.snapshot))();break;case Qr.SUCCESS:e.complete&&Cl(e.complete.bind(e))();break;case Qr.CANCELED:case Qr.ERROR:e.error&&Cl(e.error.bind(e,this._error))();break;default:e.error&&Cl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this._service=e,n instanceof di?this._location=n:this._location=di.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xa(e,n)}get root(){const e=new di(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uO(this._location.path)}get storage(){return this._service}get parent(){const e=bW(this._location.path);if(e===null)return null;const n=new di(this._location.bucket,e);return new Xa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw JH(e)}}function VW(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new FW(t,new To(e),n)}function BW(t){t._throwIfRoot("getDownloadURL");const e=DW(t.storage,t._location,cO());return t.storage.makeRequestWithTokens(e,ma).then(n=>{if(n===null)throw XH();return n})}function jW(t){t._throwIfRoot("deleteObject");const e=xW(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ma)}function HW(t,e){const n=_W(t._location.path,e),r=new di(t._location.bucket,n);return new Xa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(t){return/^[A-Za-z]+:\/\//.test(t)}function YW(t,e){return new Xa(t,e)}function pO(t,e){if(t instanceof M_){const n=t;if(n._bucket==null)throw GH();const r=new Xa(n,n._bucket);return e!=null?pO(r,e):r}else return e!==void 0?HW(t,e):t}function zW(t,e){if(e&&WW(e)){if(t instanceof M_)return YW(t,e);throw G0("To use ref(service, url), the first argument must be a Storage instance.")}else return pO(t,e)}function PS(t,e){const n=e==null?void 0:e[JR];return n==null?null:di.makeFromBucketSpec(n,t)}function KW(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:wD(i,t.app.options.projectId))}class M_{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=QR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UH,this._maxUploadRetryTime=FH,this._requests=new Set,i!=null?this._bucket=di.makeFromBucketSpec(i,this._host):this._bucket=PS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=di.makeFromBucketSpec(this._url,e):this._bucket=PS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xa(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new ZH(nO());{const o=cW(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const RS="@firebase/storage",OS="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="storage";function GW(t,e,n){return t=jt(t),VW(t,e,n)}function qW(t){return t=jt(t),BW(t)}function XW(t){return t=jt(t),jW(t)}function QW(t,e){return t=jt(t),zW(t,e)}function JW(t=Zu(),e){t=jt(t);const r=Is(t,mO).getImmediate({identifier:e}),i=gD("storage");return i&&ZW(r,...i),r}function ZW(t,e,n,r={}){KW(t,e,n,r)}function e8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new M_(n,r,i,e,Xo)}function t8(){si(new Yr(mO,e8,"PUBLIC").setMultipleInstances(!0)),vr(RS,OS,""),vr(RS,OS,"esm2017")}t8();const gO=1e3,q0=gO*60,X0=q0*60,Yp=X0*24,zp=Yp*365,vO=async t=>{const e=await PH(t),n=e.data();return n?{id:e.id,...n}:null},Il=async(t,e)=>{const n=await RH(e?bH(t,...e):t);return Promise.all(n.docs.map(r=>vO(r.ref)))},Si=vO,n8=$H,Kp=OH,bo=NH,Vc=MH,Q0=t=>QW(JW(),t),NS=t=>t.sort((e,n)=>{const r=(n.order||0)-(e.order||0);return r!==0?r:e.date&&n.date?n.date.getTime()-e.date.getTime():0}),r8=(t,e,n,r)=>{setTimeout(()=>{t.forEach((i,s)=>{setTimeout(()=>{r(i)},s*n)})},e)},Wi=(t,e)=>{if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(r===void 0||i===void 0)return!1;if(r===null&&i===null)continue;if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;const s=r.sort(),o=i.sort();if(s.some((a,l)=>!Wi(a,o[l])||o.some((u,c)=>!Wi(u,s[c]))))return!1}else if(r instanceof Date&&i instanceof Date){if(r.getTime()!==i.getTime())return!1}else if(typeof r=="object"){if(!Wi(r,i))return!1}else if(r!==i)return!1}return!0},J0=t=>{const e=Math.round((Date.now()-t.getTime())/1e3);if(e<30)return"Just now";if(e<60)return`${e} second${e!==1?"s":""} ago`;if(e<60*60){const n=Math.floor(e/60);return`${n} minute${n!==1?"s":""} ago`}else if(e<60*60*24){const n=Math.floor(e/3600);return`${n} hour${n!==1?"s":""} ago`}else{if(e<60*60*24*2)return"Yesterday";{const r=new Date().getTime()-t.getTime(),i=r/zp,o=r%zp/Yp,a=i<=1?{month:"long",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"},l=t.toLocaleDateString(void 0,a);if(o<=7){const u={weekday:"long"};return t.toLocaleDateString(void 0,u)}else return l}}},Xf=(t,e)=>{if(t){var n=t.getBoundingClientRect().top,r=n+window.scrollY-15;setTimeout(()=>{window.scrollTo({top:r,behavior:"smooth"})},e??1e3)}},i8=()=>{var r;const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const n=t.offsetWidth-e.offsetWidth;return(r=t.parentNode)==null||r.removeChild(t),n},po=t=>{var n;const e=!!((n=t==null?void 0:t.allowedUserIds)!=null&&n.length);return{isPrivate:e,visibility:e?"private":"public"}},Fl=t=>Array.isArray(t)?t:[t],s8=()=>{const t=document.activeElement;t instanceof HTMLElement&&t.blur()},Z0=t=>t.join(", ").replace(/,([^,]*)$/," and$1");function $_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o8=yO,wO=new qo("auth","Firebase",yO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=new Ju("@firebase/auth");function a8(t,...e){Gp.logLevel<=Nt.WARN&&Gp.warn(`Auth (${Xo}): ${t}`,...e)}function Qf(t,...e){Gp.logLevel<=Nt.ERROR&&Gp.error(`Auth (${Xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t,...e){throw L_(t,...e)}function gs(t,...e){return L_(t,...e)}function l8(t,e,n){const r=Object.assign(Object.assign({},o8()),{[e]:n});return new qo("auth","Firebase",r).create(e,{appName:t.name})}function L_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wO.create(t,...e)}function tt(t,e,...n){if(!t)throw L_(e,...n)}function Ns(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qf(e),new Error(e)}function Qs(t,e){t||Ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function u8(){return MS()==="http:"||MS()==="https:"}function MS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u8()||bD()||"connection"in navigator)?navigator.onLine:!0}function d8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qs(n>e,"Short delay should be less than long delay!"),this.isMobile=gb()||_D()}get(){return c8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t,e){Qs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8=new Rh(3e4,6e4);function gl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vl(t,e,n,r,i={}){return _O(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Qu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),bO.fetch()(TO(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function _O(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},h8),e);try{const i=new p8(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw wf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw wf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw wf(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw l8(t,c,u);Zi(t,c)}}catch(i){if(i instanceof bi)throw i;Zi(t,"network-request-failed",{message:String(i)})}}async function Oh(t,e,n,r,i={}){const s=await vl(t,e,n,r,i);return"mfaPendingCredential"in s&&Zi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function TO(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?U_(t.config,i):`${t.config.apiScheme}://${i}`}class p8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gs(this.auth,"network-request-failed")),f8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gs(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m8(t,e){return vl(t,"POST","/v1/accounts:delete",e)}async function g8(t,e){return vl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function v8(t,e=!1){const n=jt(t),r=await n.getIdToken(e),i=F_(r);tt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:od(jv(i.auth_time)),issuedAtTime:od(jv(i.iat)),expirationTime:od(jv(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function jv(t){return Number(t)*1e3}function F_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qf("JWT malformed, contained fewer than 3 sections"),null;try{const i=Sp(n);return i?JSON.parse(i):(Qf("Failed to decode base64 JWT payload"),null)}catch(i){return Qf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function y8(t){const e=F_(t);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bi&&w8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function w8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=od(this.lastLoginAt),this.creationTime=od(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await $u(t,g8(n,{idToken:r}));tt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?E8(s.providerUserInfo):[],a=T8(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new EO(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function _8(t){const e=jt(t);await qp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function T8(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function E8(t){return t.map(e=>{var{providerId:n}=e,r=$_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(t,e){const n=await _O(t,{},async()=>{const r=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=TO(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",bO.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y8(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return tt(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await S8(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Gd;return r&&(tt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(tt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(tt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gd,this.toJSON())}_performRefresh(){return Ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t,e){tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=$_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new b8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new EO(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await $u(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return v8(this,e)}reload(){return _8(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await $u(this,m8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,g=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:y,isAnonymous:w,providerData:T,stsTokenManager:P}=n;tt(_&&P,e,"internal-error");const A=Gd.fromJSON(this.name,P);tt(typeof _=="string",e,"internal-error"),lo(d,e.name),lo(h,e.name),tt(typeof y=="boolean",e,"internal-error"),tt(typeof w=="boolean",e,"internal-error"),lo(f,e.name),lo(p,e.name),lo(m,e.name),lo(v,e.name),lo(b,e.name),lo(g,e.name);const I=new xa({uid:_,auth:e,email:h,emailVerified:y,displayName:d,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:A,createdAt:b,lastLoginAt:g});return T&&Array.isArray(T)&&(I.providerData=T.map(E=>Object.assign({},E))),v&&(I._redirectEventId=v),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Gd;i.updateFromServerResponse(n);const s=new xa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qp(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new Map;function Ms(t){Qs(t instanceof Function,"Expected a class definition");let e=$S.get(t);return e?(Qs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$S.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}SO.type="NONE";const LS=SO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t,e,n){return`firebase:${t}:${e}:${n}`}class pu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Jf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new pu(Ms(LS),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ms(LS);const o=Jf(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=xa._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new pu(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new pu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DO(e))return"Blackberry";if(xO(e))return"Webos";if(V_(e))return"Safari";if((e.includes("chrome/")||IO(e))&&!e.includes("edge/"))return"Chrome";if(kO(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CO(t=Nr()){return/firefox\//i.test(t)}function V_(t=Nr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IO(t=Nr()){return/crios\//i.test(t)}function AO(t=Nr()){return/iemobile/i.test(t)}function kO(t=Nr()){return/android/i.test(t)}function DO(t=Nr()){return/blackberry/i.test(t)}function xO(t=Nr()){return/webos/i.test(t)}function Og(t=Nr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function C8(t=Nr()){var e;return Og(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function I8(){return I3()&&document.documentMode===10}function PO(t=Nr()){return Og(t)||kO(t)||xO(t)||DO(t)||/windows phone/i.test(t)||AO(t)}function A8(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t,e=[]){let n;switch(t){case"Browser":n=US(Nr());break;case"Worker":n=`${US(Nr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xo}/${r}`}async function OO(t,e){return vl(t,"GET","/v2/recaptchaConfig",gl(t,e))}function FS(t){return t!==void 0&&t.enterprise!==void 0}class NO{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function MO(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=gs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",k8().appendChild(r)})}function D8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const x8="https://www.google.com/recaptcha/enterprise.js?render=",P8="recaptcha-enterprise",R8="NO_RECAPTCHA";class $O{constructor(e){this.type=P8,this.auth=yl(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{OO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new NO(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;FS(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(R8)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&FS(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}MO(x8+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function Lu(t,e,n,r=!1){const i=new $O(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VS(this),this.idTokenSubscription=new VS(this),this.beforeStateQueue=new O8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ms(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await pu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=d8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?jt(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ms(e))})}async initializeRecaptchaConfig(){const e=await OO(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new NO(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new $O(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ms(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await pu.create(this,[Ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return tt(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&a8(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yl(t){return jt(t)}class VS{constructor(e){this.auth=e,this.observer=null,this.addObserver=N3(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t,e){const n=Is(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Pd(s,e??{}))return i;Zi(i,"already-initialized")}return n.initialize({options:e})}function M8(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ms);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $8(t,e,n){const r=yl(t);tt(r._canInitEmulator,r,"emulator-config-failed"),tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=UO(e),{host:o,port:a}=L8(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||U8()}function UO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function L8(t){const e=UO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:BS(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:BS(o)}}}function BS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function U8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ns("not implemented")}_getIdTokenResponse(e){return Ns("not implemented")}_linkToIdToken(e,n){return Ns("not implemented")}_getReauthenticationResolver(e){return Ns("not implemented")}}async function FO(t,e){return vl(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hv(t,e){return Oh(t,"POST","/v1/accounts:signInWithPassword",gl(t,e))}async function F8(t,e){return vl(t,"POST","/v1/accounts:sendOobCode",gl(t,e))}async function Wv(t,e){return F8(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V8(t,e){return Oh(t,"POST","/v1/accounts:signInWithEmailLink",gl(t,e))}async function B8(t,e){return Oh(t,"POST","/v1/accounts:signInWithEmailLink",gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends B_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new qd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new qd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await Lu(e,r,"signInWithPassword");return Hv(e,i)}else return Hv(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await Lu(e,r,"signInWithPassword");return Hv(e,s)}else return Promise.reject(i)});case"emailLink":return V8(e,{email:this._email,oobCode:this._password});default:Zi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return FO(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return B8(e,{idToken:n,email:this._email,oobCode:this._password});default:Zi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(t,e){return Oh(t,"POST","/v1/accounts:signInWithIdp",gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8="http://localhost";class Qa extends B_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=$_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Qa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mu(e,n)}buildRequest(){const e={requestUri:j8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function W8(t){const e=Pc(Rc(t)).link,n=e?Pc(Rc(e)).deep_link_id:null,r=Pc(Rc(t)).deep_link_id;return(r?Pc(Rc(r)).link:null)||r||n||e||t}class j_{constructor(e){var n,r,i,s,o,a;const l=Pc(Rc(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=H8((i=l.mode)!==null&&i!==void 0?i:null);tt(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=W8(e);try{return new j_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(e,n){return qd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=j_.parseLink(n);return tt(r,"argument-error"),qd._fromEmailAndCode(e,r.code,r.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends VO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Nh{constructor(){super("facebook.com")}static credential(e){return Qa._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Nh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qa._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return So.credential(n,r)}catch{return null}}}So.GOOGLE_SIGN_IN_METHOD="google.com";So.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Nh{constructor(){super("github.com")}static credential(e){return Qa._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Co.credential(e.oauthAccessToken)}catch{return null}}}Co.GITHUB_SIGN_IN_METHOD="github.com";Co.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Nh{constructor(){super("twitter.com")}static credential(e,n){return Qa._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Io.credential(n,r)}catch{return null}}}Io.TWITTER_SIGN_IN_METHOD="twitter.com";Io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yv(t,e){return Oh(t,"POST","/v1/accounts:signUp",gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await xa._fromIdTokenResponse(e,r,i),o=jS(r);return new Ja({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=jS(r);return new Ja({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function jS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp extends bi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Xp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Xp(e,n,r,i)}}function BO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xp._fromErrorAndOperation(t,s,e,r):s})}async function Y8(t,e,n=!1){const r=await $u(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ja._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await $u(t,BO(r,i,e,t),n);tt(s.idToken,r,"internal-error");const o=F_(s.idToken);tt(o,r,"internal-error");const{sub:a}=o;return tt(t.uid===a,r,"user-mismatch"),Ja._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(t,e,n=!1){const r="signIn",i=await BO(t,r,e),s=await Ja._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function z8(t,e){return HO(yl(t),e)}async function HS(t,e){return jO(jt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e,n){var r;tt(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),tt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(tt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K8(t,e,n){var r;const i=yl(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await Lu(i,s,"getOobCode",!0);n&&zv(i,o,n),await Wv(i,o)}else n&&zv(i,s,n),await Wv(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const a=await Lu(i,s,"getOobCode",!0);n&&zv(i,a,n),await Wv(i,a)}else return Promise.reject(o)})}async function G8(t,e,n){var r;const i=yl(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await Lu(i,s,"signUpPassword");o=Yv(i,u)}else o=Yv(i,s).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const c=await Lu(i,s,"signUpPassword");return Yv(i,c)}else return Promise.reject(u)});const a=await o.catch(u=>Promise.reject(u)),l=await Ja._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function q8(t,e,n){return z8(jt(t),Yo.credential(e,n))}function X8(t,e){return WO(jt(t),e,null)}function Q8(t,e){return WO(jt(t),null,e)}async function WO(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await $u(t,FO(r,s));await t._updateTokensIfNecessary(o,!0)}function YO(t,e,n,r){return jt(t).onIdTokenChanged(e,n,r)}function J8(t,e,n){return jt(t).beforeAuthStateChanged(e,n)}function Z8(t){return jt(t).signOut()}async function e7(t){return jt(t).delete()}const Qp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qp,"1"),this.storage.removeItem(Qp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(){const t=Nr();return V_(t)||Og(t)}const n7=1e3,r7=10;class KO extends zO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=t7()&&A8(),this.fallbackToPolling=PO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);I8()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,r7):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},n7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KO.type="LOCAL";const GO=KO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO extends zO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qO.type="SESSION";const H_=qO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ng(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await i7(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ng.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=W_("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(){return window}function o7(t){vs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(){return typeof vs().WorkerGlobalScope<"u"&&typeof vs().importScripts=="function"}async function a7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function l7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function u7(){return XO()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="firebaseLocalStorageDb",c7=1,Jp="firebaseLocalStorage",JO="fbase_key";class Mh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mg(t,e){return t.transaction([Jp],e?"readwrite":"readonly").objectStore(Jp)}function d7(){const t=indexedDB.deleteDatabase(QO);return new Mh(t).toPromise()}function tw(){const t=indexedDB.open(QO,c7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jp,{keyPath:JO})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jp)?e(r):(r.close(),await d7(),e(await tw()))})})}async function WS(t,e,n){const r=Mg(t,!0).put({[JO]:e,value:n});return new Mh(r).toPromise()}async function h7(t,e){const n=Mg(t,!1).get(e),r=await new Mh(n).toPromise();return r===void 0?null:r.value}function YS(t,e){const n=Mg(t,!0).delete(e);return new Mh(n).toPromise()}const f7=800,p7=3;class ZO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>p7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ng._getInstance(u7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await a7(),!this.activeServiceWorker)return;this.sender=new s7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tw();return await WS(e,Qp,"1"),await YS(e,Qp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>YS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Mg(i,!1).getAll();return new Mh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZO.type="LOCAL";const eN=ZO;new Rh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(t,e){return e?Ms(e):(tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_ extends B_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g7(t){return HO(t.auth,new Y_(t),t.bypassAuthState)}function v7(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),jO(n,new Y_(t),t.bypassAuthState)}async function y7(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),Y8(n,new Y_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g7;case"linkViaPopup":case"linkViaRedirect":return y7;case"reauthViaPopup":case"reauthViaRedirect":return v7;default:Zi(this.auth,"internal-error")}}resolve(e){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=new Rh(2e3,1e4);class zl extends tN{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,zl.currentPopupAction&&zl.currentPopupAction.cancel(),zl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Qs(this.filter.length===1,"Popup operations only handle one event");const e=W_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w7.get())};e()}}zl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7="pendingRedirect",Zf=new Map;class _7 extends tN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zf.get(this.auth._key());if(!e){try{const r=await T7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zf.set(this.auth._key(),e)}return this.bypassAuthState||Zf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T7(t,e){const n=C7(e),r=S7(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function E7(t,e){Zf.set(t._key(),e)}function S7(t){return Ms(t._redirectPersistence)}function C7(t){return Jf(b7,t.config.apiKey,t.name)}async function I7(t,e,n=!1){const r=yl(t),i=m7(r,e),o=await new _7(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=10*60*1e3;class k7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A7&&this.cachedEventUids.clear(),this.cachedEventUids.has(zS(e))}saveEventToCache(e){this.cachedEventUids.add(zS(e)),this.lastProcessedEventTime=Date.now()}}function zS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x7(t,e={}){return vl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R7=/^https?/;async function O7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await x7(t);for(const n of e)try{if(N7(n))return}catch{}Zi(t,"unauthorized-domain")}function N7(t){const e=ew(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!R7.test(n))return!1;if(P7.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=new Rh(3e4,6e4);function KS(){const t=vs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $7(t){return new Promise((e,n)=>{var r,i,s;function o(){KS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KS(),n(gs(t,"network-request-failed"))},timeout:M7.get()})}if(!((i=(r=vs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vs().gapi)===null||s===void 0)&&s.load)o();else{const a=D8("iframefcb");return vs()[a]=()=>{gapi.load?o():n(gs(t,"network-request-failed"))},MO(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ep=null,e})}let ep=null;function L7(t){return ep=ep||$7(t),ep}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7=new Rh(5e3,15e3),F7="__/auth/iframe",V7="emulator/auth/iframe",B7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H7(t){const e=t.config;tt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?U_(e,V7):`https://${t.config.authDomain}/${F7}`,r={apiKey:e.apiKey,appName:t.name,v:Xo},i=j7.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qu(r).slice(1)}`}async function W7(t){const e=await L7(t),n=vs().gapi;return tt(n,t,"internal-error"),e.open({where:document.body,url:H7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B7,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=gs(t,"network-request-failed"),a=vs().setTimeout(()=>{s(o)},U7.get());function l(){vs().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},z7=500,K7=600,G7="_blank",q7="http://localhost";class GS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X7(t,e,n,r=z7,i=K7){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Y7),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Nr().toLowerCase();n&&(a=IO(u)?G7:n),CO(u)&&(e=e||q7,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(C8(u)&&a!=="_self")return Q7(e||"",a),new GS(null);const d=window.open(e||"",a,c);tt(d,t,"popup-blocked");try{d.focus()}catch{}return new GS(d)}function Q7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7="__/auth/handler",Z7="emulator/auth/handler",eY=encodeURIComponent("fac");async function qS(t,e,n,r,i,s){tt(t.config.authDomain,t,"auth-domain-config-required"),tt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xo,eventId:i};if(e instanceof VO){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",e0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof Nh){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${eY}=${encodeURIComponent(l)}`:"";return`${tY(t)}?${Qu(a).slice(1)}${u}`}function tY({config:t}){return t.emulator?U_(t,Z7):`https://${t.authDomain}/${J7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="webStorageSupport";class nY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H_,this._completeRedirectFn=I7,this._overrideRedirectResult=E7}async _openPopup(e,n,r,i){var s;Qs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await qS(e,n,r,ew(),i);return X7(e,o,W_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await qS(e,n,r,ew(),i);return o7(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await W7(e),r=new k7(e);return n.register("authEvent",i=>(tt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kv,{type:Kv},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Kv];o!==void 0&&n(!!o),Zi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=O7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PO()||V_()||Og()}}const rN=nY;var XS="@firebase/auth",QS="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function sY(t){si(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;tt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RO(t)},u=new N8(r,i,s,l);return M8(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),si(new Yr("auth-internal",e=>{const n=yl(e.getProvider("auth").getImmediate());return(r=>new rY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(XS,QS,iY(t)),vr(XS,QS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oY=5*60,aY=yD("authIdTokenMaxAge")||oY;let JS=null;const lY=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>aY)return;const i=n==null?void 0:n.token;JS!==i&&(JS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uY(t=Zu()){const e=Is(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LO(t,{popupRedirectResolver:rN,persistence:[eN,GO,H_]}),r=yD("authTokenSyncURL");if(r){const s=lY(r);J8(n,s,()=>s(n.currentUser)),YO(n,o=>s(o))}const i=mD("auth");return i&&$8(n,`http://${i}`),n}sY("Browser");const iN=Symbol("firebaseApp");function sN(t){return Ss()&&Hr(iN,null)||Zu(t)}const bf=new WeakMap;function cY(t,e){if(!bf.has(t)){const n=Dm(!0);bf.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),bf.delete(t)}}return bf.get(t)}const dY=new WeakMap,_f=new WeakMap;function hY(t){const e=sN(t);if(!_f.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{_f.set(e,s),n(s.value)}];_f.set(e,i)}return _f.get(e)}function fY(t,e){YO(e,n=>{const r=hY();t.value=n,Array.isArray(r)&&r[1](t)})}var ZS={};const eC="@firebase/database",tC="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oN="";function pY(t){oN=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mY{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:xd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gY{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return to(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mY(e)}}catch{}return new gY},Ta=aN("localStorage"),nw=aN("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=new Ju("@firebase/database"),vY=function(){let t=1;return function(){return t++}}(),lN=function(t){const e=U3(t),n=new O3;n.update(e);const r=n.digest();return zm.encodeByteArray(r)},$h=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=$h.apply(null,r):typeof r=="object"?e+=pr(r):e+=r,e+=" "}return e};let Pa=null,nC=!0;const yY=function(t,e){Oe(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(gu.logLevel=Nt.VERBOSE,Pa=gu.log.bind(gu),e&&nw.set("logging_enabled",!0)):typeof t=="function"?Pa=t:(Pa=null,nw.remove("logging_enabled"))},Er=function(...t){if(nC===!0&&(nC=!1,Pa===null&&nw.get("logging_enabled")===!0&&yY(!0)),Pa){const e=$h.apply(null,t);Pa(e)}},Lh=function(t){return function(...e){Er(t,...e)}},rw=function(...t){const e="FIREBASE INTERNAL ERROR: "+$h(...t);gu.error(e)},Za=function(...t){const e=`FIREBASE FATAL ERROR: ${$h(...t)}`;throw gu.error(e),new Error(e)},vi=function(...t){const e="FIREBASE WARNING: "+$h(...t);gu.warn(e)},wY=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},uN=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},bY=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Uu="[MIN_NAME]",el="[MAX_NAME]",oc=function(t,e){if(t===e)return 0;if(t===Uu||e===el)return-1;if(e===Uu||t===el)return 1;{const n=rC(t),r=rC(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},_Y=function(t,e){return t===e?0:t<e?-1:1},gc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pr(e))},z_=function(t){if(typeof t!="object"||t===null)return pr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=pr(e[r]),n+=":",n+=z_(t[e[r]]);return n+="}",n},cN=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function xi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const dN=function(t){Oe(!uN(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(c.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},TY=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},EY=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},SY=new RegExp("^-?(0*)\\d{1,10}$"),CY=-2147483648,IY=2147483647,rC=function(t){if(SY.test(t)){const e=Number(t);if(e>=CY&&e<=IY)return e}return null},Uh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw vi("Exception was thrown by user callback.",n),e},Math.floor(0))}},AY=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ad=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kY{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Er("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vi(e)}}class iw{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}iw.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="5",hN="v",fN="s",pN="r",mN="f",gN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vN="ls",yN="p",sw="ac",wN="websocket",bN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xY{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ta.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ta.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function PY(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function _N(t,e,n){Oe(typeof e=="string","typeof type must == string"),Oe(typeof n=="object","typeof params must == object");let r;if(e===wN)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===bN)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);PY(t)&&(n.ns=t.namespace);const i=[];return xi(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RY{constructor(){this.counters_={}}incrementCounter(e,n=1){to(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return b3(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv={},qv={};function G_(t){const e=t.toString();return Gv[e]||(Gv[e]=new RY),Gv[e]}function OY(t,e){const n=t.toString();return qv[n]||(qv[n]=e()),qv[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Uh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="start",MY="close",$Y="pLPCommand",LY="pRTLPCB",TN="id",EN="pw",SN="ser",UY="cb",FY="seg",VY="ts",BY="d",jY="dframe",CN=1870,IN=30,HY=CN-IN,WY=25e3,YY=3e4;class Kl{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lh(e),this.stats_=G_(n),this.urlFn=l=>(this.appCheckToken&&(l[sw]=this.appCheckToken),_N(n,bN,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new NY(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(YY)),bY(()=>{if(this.isClosed_)return;this.scriptTagHolder=new q_((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===iC)this.id=a,this.password=l;else if(o===MY)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[iC]="t",r[SN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[UY]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hN]=K_,this.transportSessionId&&(r[fN]=this.transportSessionId),this.lastSessionId&&(r[vN]=this.lastSessionId),this.applicationId&&(r[yN]=this.applicationId),this.appCheckToken&&(r[sw]=this.appCheckToken),typeof location<"u"&&location.hostname&&gN.test(location.hostname)&&(r[pN]=mN);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kl.forceAllow_=!0}static forceDisallow(){Kl.forceDisallow_=!0}static isAvailable(){return Kl.forceAllow_?!0:!Kl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!TY()&&!EY()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=pr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=hD(n),i=cN(r,HY);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[jY]="t",r[TN]=e,r[EN]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=pr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class q_{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=vY(),window[$Y+this.uniqueCallbackIdentifier]=e,window[LY+this.uniqueCallbackIdentifier]=n,this.myIFrame=q_.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Er("frame writing exception"),a.stack&&Er(a.stack),Er(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Er("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[TN]=this.myID,e[EN]=this.myPW,e[SN]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+IN+r.length<=CN;){const o=this.pendingSegs.shift();r=r+"&"+FY+i+"="+o.seg+"&"+VY+i+"="+o.ts+"&"+BY+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(WY)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Er("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zY=16384,KY=45e3;let Zp=null;typeof MozWebSocket<"u"?Zp=MozWebSocket:typeof WebSocket<"u"&&(Zp=WebSocket);class Vi{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lh(this.connId),this.stats_=G_(n),this.connURL=Vi.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[hN]=K_,typeof location<"u"&&location.hostname&&gN.test(location.hostname)&&(o[pN]=mN),n&&(o[fN]=n),r&&(o[vN]=r),i&&(o[sw]=i),s&&(o[yN]=s),_N(e,wN,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ta.set("previous_websocket_failure",!0);try{let r;TD(),this.mySock=new Zp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Vi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Zp!==null&&!Vi.forceDisallow_}static previouslyFailed(){return Ta.isInMemoryStorage||Ta.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ta.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=xd(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=pr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=cN(n,zY);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(KY))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Vi.responsesRequiredToBeHealthy=2;Vi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Kl,Vi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Vi&&Vi.isAvailable();let r=n&&!Vi.previouslyFailed();if(e.webSocketOnly&&(n||vi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Vi];else{const i=this.transports_=[];for(const s of Xd.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Xd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GY=6e4,qY=5e3,XY=10*1024,QY=100*1024,Xv="t",sC="d",JY="s",oC="r",ZY="e",aC="o",lC="a",uC="n",cC="p",ez="h";class tz{constructor(e,n,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lh("c:"+this.id+":"),this.transportManager_=new Xd(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ad(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>QY?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>XY?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Xv in e){const n=e[Xv];n===lC?this.upgradeIfSecondaryHealthy_():n===oC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===aC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=gc("t",e),r=gc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:lC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:uC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=gc("t",e),r=gc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=gc(Xv,e);if(sC in e){const r=e[sC];if(n===ez){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===uC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===JY?this.onConnectionShutdown_(r):n===oC?this.onReset_(r):n===ZY?rw("Server Error: "+r):n===aC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rw("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),K_!==r&&vi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ad(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(GY))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ad(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(qY))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cC,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ta.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.allowedEvents_=e,this.listeners_={},Oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){Oe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends kN{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!gb()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new em}getInitialEvent(e){return Oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=32,hC=768;class gn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function en(){return new gn("")}function Dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function zo(t){return t.pieces_.length-t.pieceNum_}function dn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new gn(t.pieces_,e)}function DN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function nz(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function xN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function PN(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new gn(e,0)}function ir(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new gn(n,0)}function Et(t){return t.pieceNum_>=t.pieces_.length}function Ai(t,e){const n=Dt(t),r=Dt(e);if(n===null)return e;if(n===r)return Ai(dn(t),dn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function RN(t,e){if(zo(t)!==zo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ji(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(zo(t)>zo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class rz{constructor(e,n){this.errorPrefix_=n,this.parts_=xN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=qm(this.parts_[r]);ON(this)}}function iz(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=qm(e),ON(t)}function sz(t){const e=t.parts_.pop();t.byteLength_-=qm(e),t.parts_.length>0&&(t.byteLength_-=1)}function ON(t){if(t.byteLength_>hC)throw new Error(t.errorPrefix_+"has a key path longer than "+hC+" bytes ("+t.byteLength_+").");if(t.parts_.length>dC)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dC+") or object contains a cycle "+ca(t))}function ca(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends kN{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new X_}getInitialEvent(e){return Oe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=1e3,oz=60*5*1e3,fC=30*1e3,az=1.3,lz=3e4,uz="server_kill",pC=3;class Hs extends AN{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Hs.nextPersistentConnectionId_++,this.log_=Lh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vc,this.maxReconnectDelay_=oz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!TD())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");X_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&em.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(pr(s)),Oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Ha,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Oe(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;Hs.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&to(e,"w")){const r=Au(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();vi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||R3(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fC)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=P3(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):rw("Unrecognized action received from server: "+pr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>lz&&(this.reconnectDelay_=vc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*az)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Hs.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(d){Oe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Er("getToken() completed but was canceled"):(Er("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new tz(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{vi(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(uz)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&vi(d),l())}}}interrupt(e){Er("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Er("Resuming connection for reason: "+e),delete this.interruptReasons_[e],e0(this.interruptReasons_)&&(this.reconnectDelay_=vc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>z_(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new gn(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Er("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pC&&(this.reconnectDelay_=fC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Er("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+oN.replace(/\./g,"-")]=1,gb()?e["framework.cordova"]=1:_D()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=em.getInstance().currentlyOnline();return e0(this.interruptReasons_)&&e}}Hs.nextPersistentConnectionId_=0;Hs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new xt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new xt(Uu,e),i=new xt(Uu,n);return this.compare(r,i)!==0}minPost(){return xt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf;class NN extends $g{static get __EMPTY_NODE(){return Tf}static set __EMPTY_NODE(e){Tf=e}compare(e,n){return oc(e.name,n.name)}isDefinedOn(e){throw Xu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return xt.MIN}maxPost(){return new xt(el,Tf)}makePost(e,n){return Oe(typeof e=="string","KeyIndex indexValue must always be a string."),new xt(e,Tf)}toString(){return".key"}}const vu=new NN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nr.RED,this.left=i??ni.EMPTY_NODE,this.right=s??ni.EMPTY_NODE}copy(e,n,r,i,s){return new nr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ni.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ni.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nr.RED=!0;nr.BLACK=!1;class cz{copy(e,n,r,i,s){return this}insert(e,n,r){return new nr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ni{constructor(e,n=ni.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ni(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,nr.BLACK,null,null))}remove(e){return new ni(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ef(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ef(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ef(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ef(this.root_,null,this.comparator_,!0,e)}}ni.EMPTY_NODE=new cz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(t,e){return oc(t.name,e.name)}function Q_(t,e){return oc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ow;function hz(t){ow=t}const MN=function(t){return typeof t=="number"?"number:"+dN(t):"string:"+t},$N=function(t){if(t.isLeafNode()){const e=t.val();Oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&to(e,".sv"),"Priority must be a string or number.")}else Oe(t===ow||t.isEmpty(),"priority of unexpected type.");Oe(t===ow||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mC;class er{constructor(e,n=er.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$N(this.priorityNode_)}static set __childrenNodeConstructor(e){mC=e}static get __childrenNodeConstructor(){return mC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new er(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:er.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Et(e)?this:Dt(e)===".priority"?this.priorityNode_:er.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:er.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Dt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Oe(r!==".priority"||zo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,er.__childrenNodeConstructor.EMPTY_NODE.updateChild(dn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+MN(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=dN(this.value_):e+=this.value_,this.lazyHash_=lN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===er.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof er.__childrenNodeConstructor?-1:(Oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=er.VALUE_TYPE_ORDER.indexOf(n),s=er.VALUE_TYPE_ORDER.indexOf(r);return Oe(i>=0,"Unknown leaf type: "+n),Oe(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}er.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LN,UN;function fz(t){LN=t}function pz(t){UN=t}class mz extends $g{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?oc(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return xt.MIN}maxPost(){return new xt(el,new er("[PRIORITY-POST]",UN))}makePost(e,n){const r=LN(e);return new xt(n,new er("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ar=new mz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz=Math.log(2);class vz{constructor(e){const n=s=>parseInt(Math.log(s)/gz,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tm=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let d,h;if(c===0)return null;if(c===1)return d=t[l],h=n?n(d):d,new nr(h,d.node,nr.BLACK,null,null);{const f=parseInt(c/2,10)+l,p=i(l,f),m=i(f+1,u);return d=t[f],h=n?n(d):d,new nr(h,d.node,nr.BLACK,p,m)}},s=function(l){let u=null,c=null,d=t.length;const h=function(p,m){const v=d-p,b=d;d-=p;const g=i(v+1,b),_=t[v],y=n?n(_):_;f(new nr(y,_.node,m,null,g))},f=function(p){u?(u.left=p,u=p):(c=p,u=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),v=Math.pow(2,l.count-(p+1));m?h(v,nr.BLACK):(h(v,nr.BLACK),h(v,nr.RED))}return c},o=new vz(t.length),a=s(o);return new ni(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv;const Al={};class $s{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Oe(Al&&Ar,"ChildrenNode.ts has not been loaded"),Qv=Qv||new $s({".priority":Al},{".priority":Ar}),Qv}get(e){const n=Au(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ni?n:null}hasIndex(e){return to(this.indexSet_,e.toString())}addIndex(e,n){Oe(e!==vu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(xt.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=tm(r,e.getCompare()):a=Al;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new $s(c,u)}addToIndexes(e,n){const r=Cp(this.indexes_,(i,s)=>{const o=Au(this.indexSet_,s);if(Oe(o,"Missing index implementation for "+s),i===Al)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(xt.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),tm(a,o.getCompare())}else return Al;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new xt(e.name,a))),l.insert(e,e.node)}});return new $s(r,this.indexSet_)}removeFromIndexes(e,n){const r=Cp(this.indexes_,i=>{if(i===Al)return i;{const s=n.get(e.name);return s?i.remove(new xt(e.name,s)):i}});return new $s(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc;class Yt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&$N(this.priorityNode_),this.children_.isEmpty()&&Oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yc||(yc=new Yt(new ni(Q_),null,$s.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yc}updatePriority(e){return this.children_.isEmpty()?this:new Yt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?yc:n}}getChild(e){const n=Dt(e);return n===null?this:this.getImmediateChild(n).getChild(dn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Oe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new xt(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?yc:this.priorityNode_;return new Yt(i,o,s)}}updateChild(e,n){const r=Dt(e);if(r===null)return n;{Oe(Dt(e)!==".priority"||zo(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(dn(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Ar,(o,a)=>{n[o]=a.val(e),r++,s&&Yt.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+MN(this.getPriority().val())+":"),this.forEachChild(Ar,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":lN(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new xt(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new xt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new xt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,xt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,xt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fh?-1:0}withIndex(e){if(e===vu||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Yt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===vu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ar),i=n.getIterator(Ar);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===vu?null:this.indexMap_.get(e.toString())}}Yt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yz extends Yt{constructor(){super(new ni(Q_),Yt.EMPTY_NODE,$s.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yt.EMPTY_NODE}isEmpty(){return!1}}const Fh=new yz;Object.defineProperties(xt,{MIN:{value:new xt(Uu,Yt.EMPTY_NODE)},MAX:{value:new xt(el,Fh)}});NN.__EMPTY_NODE=Yt.EMPTY_NODE;er.__childrenNodeConstructor=Yt;hz(Fh);pz(Fh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=!0;function Sr(t,e=null){if(t===null)return Yt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new er(n,Sr(e))}if(!(t instanceof Array)&&wz){const n=[];let r=!1;if(xi(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Sr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new xt(o,l)))}}),n.length===0)return Yt.EMPTY_NODE;const s=tm(n,dz,o=>o.name,Q_);if(r){const o=tm(n,Ar.getCompare());return new Yt(s,Sr(e),new $s({".priority":o},{".priority":Ar}))}else return new Yt(s,Sr(e),$s.Default)}else{let n=Yt.EMPTY_NODE;return xi(t,(r,i)=>{if(to(t,r)&&r.substring(0,1)!=="."){const s=Sr(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Sr(e))}}fz(Sr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz extends $g{constructor(e){super(),this.indexPath_=e,Oe(!Et(e)&&Dt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?oc(e.name,n.name):s}makePost(e,n){const r=Sr(e),i=Yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new xt(n,i)}maxPost(){const e=Yt.EMPTY_NODE.updateChild(this.indexPath_,Fh);return new xt(el,e)}toString(){return xN(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z extends $g{compare(e,n){const r=e.node.compareTo(n.node);return r===0?oc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return xt.MIN}maxPost(){return xt.MAX}makePost(e,n){const r=Sr(e);return new xt(n,r)}toString(){return".value"}}const Tz=new _z;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(t){return{type:"value",snapshotNode:t}}function Sz(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Cz(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function gC(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Iz(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ar}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Uu}hasEnd(){return this.endSet_}getIndexEndValue(){return Oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:el}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ar}copy(){const e=new J_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vC(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ar?n="$priority":t.index_===Tz?n="$value":t.index_===vu?n="$key":(Oe(t.index_ instanceof bz,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=pr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+pr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=pr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+pr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function yC(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ar&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends AN{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Lh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=nm.getListenId_(e,r),a={};this.listens_[o]=a;const l=vC(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let d=c;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Au(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){const r=nm.getListenId_(e,n);delete this.listens_[r]}get(e){const n=vC(e._queryParams),r=e._path.toString(),i=new Ha;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Qu(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=xd(a.responseText)}catch{vi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&vi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(){return{value:null,children:new Map}}function FN(t,e,n){if(Et(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Dt(e);t.children.has(r)||t.children.set(r,rm());const i=t.children.get(r);e=dn(e),FN(i,e,n)}}function aw(t,e,n){t.value!==null?n(e,t.value):kz(t,(r,i)=>{const s=new gn(e.toString()+"/"+r);aw(i,s,n)})}function kz(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&xi(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=10*1e3,xz=30*1e3,Pz=5*60*1e3;class Rz{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Dz(e);const r=wC+(xz-wC)*Math.random();ad(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;xi(e,(i,s)=>{s>0&&to(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ad(this.reportStats_.bind(this),Math.floor(Math.random()*2*Pz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ds||(ds={}));function VN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function BN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ds.ACK_USER_WRITE,this.source=VN()}operationForChild(e){if(Et(this.path)){if(this.affectedTree.value!=null)return Oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new gn(e));return new im(en(),n,this.revert)}}else return Oe(Dt(this.path)===e,"operationForChild called for unrelated child."),new im(dn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ds.OVERWRITE}operationForChild(e){return Et(this.path)?new tl(this.source,en(),this.snap.getImmediateChild(e)):new tl(this.source,dn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ds.MERGE}operationForChild(e){if(Et(this.path)){const n=this.children.subtree(new gn(e));return n.isEmpty()?null:n.value?new tl(this.source,en(),n.value):new Qd(this.source,en(),n)}else return Oe(Dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qd(this.source,dn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Et(e))return this.isFullyInitialized()&&!this.filtered_;const n=Dt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Oz(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Iz(o.childName,o.snapshotNode))}),wc(t,i,"child_removed",e,r,n),wc(t,i,"child_added",e,r,n),wc(t,i,"child_moved",s,r,n),wc(t,i,"child_changed",e,r,n),wc(t,i,"value",e,r,n),i}function wc(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>Mz(t,a,l)),o.forEach(a=>{const l=Nz(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function Nz(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Mz(t,e,n){if(e.childName==null||n.childName==null)throw Xu("Should only compare child_ events.");const r=new xt(e.childName,e.snapshotNode),i=new xt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t,e){return{eventCache:t,serverCache:e}}function ld(t,e,n,r){return HN(new Z_(e,n,r),t.serverCache)}function WN(t,e,n,r){return HN(t.eventCache,new Z_(e,n,r))}function lw(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function nl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jv;const $z=()=>(Jv||(Jv=new ni(_Y)),Jv);class cn{constructor(e,n=$z()){this.value=e,this.children=n}static fromObject(e){let n=new cn(null);return xi(e,(r,i)=>{n=n.set(new gn(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:en(),value:this.value};if(Et(e))return null;{const r=Dt(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(dn(e),n);return s!=null?{path:ir(new gn(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Et(e))return this;{const n=Dt(e),r=this.children.get(n);return r!==null?r.subtree(dn(e)):new cn(null)}}set(e,n){if(Et(e))return new cn(n,this.children);{const r=Dt(e),s=(this.children.get(r)||new cn(null)).set(dn(e),n),o=this.children.insert(r,s);return new cn(this.value,o)}}remove(e){if(Et(e))return this.children.isEmpty()?new cn(null):new cn(null,this.children);{const n=Dt(e),r=this.children.get(n);if(r){const i=r.remove(dn(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new cn(null):new cn(this.value,s)}else return this}}get(e){if(Et(e))return this.value;{const n=Dt(e),r=this.children.get(n);return r?r.get(dn(e)):null}}setTree(e,n){if(Et(e))return n;{const r=Dt(e),s=(this.children.get(r)||new cn(null)).setTree(dn(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new cn(this.value,o)}}fold(e){return this.fold_(en(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ir(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,en(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Et(e))return null;{const s=Dt(e),o=this.children.get(s);return o?o.findOnPath_(dn(e),ir(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,en(),n)}foreachOnPath_(e,n,r){if(Et(e))return this;{this.value&&r(n,this.value);const i=Dt(e),s=this.children.get(i);return s?s.foreachOnPath_(dn(e),ir(n,i),r):new cn(null)}}foreach(e){this.foreach_(en(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ir(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.writeTree_=e}static empty(){return new Yi(new cn(null))}}function ud(t,e,n){if(Et(e))return new Yi(new cn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ai(i,e);return s=s.updateChild(o,n),new Yi(t.writeTree_.set(i,s))}else{const i=new cn(n),s=t.writeTree_.setTree(e,i);return new Yi(s)}}}function bC(t,e,n){let r=t;return xi(n,(i,s)=>{r=ud(r,ir(e,i),s)}),r}function _C(t,e){if(Et(e))return Yi.empty();{const n=t.writeTree_.setTree(e,new cn(null));return new Yi(n)}}function uw(t,e){return wl(t,e)!=null}function wl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ai(n.path,e)):null}function TC(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ar,(r,i)=>{e.push(new xt(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new xt(r,i.value))}),e}function Mo(t,e){if(Et(e))return t;{const n=wl(t,e);return n!=null?new Yi(new cn(n)):new Yi(t.writeTree_.subtree(e))}}function cw(t){return t.writeTree_.isEmpty()}function Fu(t,e){return YN(en(),t.writeTree_,e)}function YN(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(Oe(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=YN(ir(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ir(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){return QN(e,t)}function Lz(t,e,n,r,i){Oe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ud(t.visibleWrites,e,n)),t.lastWriteId=r}function Uz(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Fz(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Oe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Vz(a,r.path)?i=!1:ji(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Bz(t),!0;if(r.snap)t.visibleWrites=_C(t.visibleWrites,r.path);else{const a=r.children;xi(a,l=>{t.visibleWrites=_C(t.visibleWrites,ir(r.path,l))})}return!0}else return!1}function Vz(t,e){if(t.snap)return ji(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ji(ir(t.path,n),e))return!0;return!1}function Bz(t){t.visibleWrites=KN(t.allWrites,jz,en()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function jz(t){return t.visible}function KN(t,e,n){let r=Yi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)ji(n,o)?(a=Ai(n,o),r=ud(r,a,s.snap)):ji(o,n)&&(a=Ai(o,n),r=ud(r,en(),s.snap.getChild(a)));else if(s.children){if(ji(n,o))a=Ai(n,o),r=bC(r,a,s.children);else if(ji(o,n))if(a=Ai(o,n),Et(a))r=bC(r,en(),s.children);else{const l=Au(s.children,Dt(a));if(l){const u=l.getChild(dn(a));r=ud(r,en(),u)}}}else throw Xu("WriteRecord should have .snap or .children")}}return r}function GN(t,e,n,r,i){if(!r&&!i){const s=wl(t.visibleWrites,e);if(s!=null)return s;{const o=Mo(t.visibleWrites,e);if(cw(o))return n;if(n==null&&!uw(o,en()))return null;{const a=n||Yt.EMPTY_NODE;return Fu(o,a)}}}else{const s=Mo(t.visibleWrites,e);if(!i&&cw(s))return n;if(!i&&n==null&&!uw(s,en()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(ji(u.path,e)||ji(e,u.path))},a=KN(t.allWrites,o,e),l=n||Yt.EMPTY_NODE;return Fu(a,l)}}}function Hz(t,e,n){let r=Yt.EMPTY_NODE;const i=wl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ar,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Mo(t.visibleWrites,e);return n.forEachChild(Ar,(o,a)=>{const l=Fu(Mo(s,new gn(o)),a);r=r.updateImmediateChild(o,l)}),TC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Mo(t.visibleWrites,e);return TC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Wz(t,e,n,r,i){Oe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ir(e,n);if(uw(t.visibleWrites,s))return null;{const o=Mo(t.visibleWrites,s);return cw(o)?i.getChild(n):Fu(o,i.getChild(n))}}function Yz(t,e,n,r){const i=ir(e,n),s=wl(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Mo(t.visibleWrites,i);return Fu(o,r.getNode().getImmediateChild(n))}else return null}function zz(t,e){return wl(t.visibleWrites,e)}function Kz(t,e,n,r,i,s,o){let a;const l=Mo(t.visibleWrites,e),u=wl(l,en());if(u!=null)a=u;else if(n!=null)a=Fu(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const c=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&c.length<i;)d(f,r)!==0&&c.push(f),f=h.getNext();return c}else return[]}function Gz(){return{visibleWrites:Yi.empty(),allWrites:[],lastWriteId:-1}}function dw(t,e,n,r){return GN(t.writeTree,t.treePath,e,n,r)}function qN(t,e){return Hz(t.writeTree,t.treePath,e)}function EC(t,e,n,r){return Wz(t.writeTree,t.treePath,e,n,r)}function sm(t,e){return zz(t.writeTree,ir(t.treePath,e))}function qz(t,e,n,r,i,s){return Kz(t.writeTree,t.treePath,e,n,r,i,s)}function e1(t,e,n){return Yz(t.writeTree,t.treePath,e,n)}function XN(t,e){return QN(ir(t.treePath,e),t.writeTree)}function QN(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Oe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Oe(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,gC(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Cz(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Sz(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,gC(r,e.snapshotNode,i.oldSnap));else throw Xu("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const JN=new Qz;class t1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Z_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return e1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:nl(this.viewCache_),s=qz(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function Jz(t,e){Oe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Oe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Zz(t,e,n,r,i){const s=new Xz;let o,a;if(n.type===ds.OVERWRITE){const u=n;u.source.fromUser?o=hw(t,e,u.path,u.snap,r,i,s):(Oe(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Et(u.path),o=om(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===ds.MERGE){const u=n;u.source.fromUser?o=tK(t,e,u.path,u.children,r,i,s):(Oe(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=fw(t,e,u.path,u.children,r,i,a,s))}else if(n.type===ds.ACK_USER_WRITE){const u=n;u.revert?o=iK(t,e,u.path,r,i,s):o=nK(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===ds.LISTEN_COMPLETE)o=rK(t,e,n.path,r,s);else throw Xu("Unknown operation type: "+n.type);const l=s.getChanges();return eK(e,o,l),{viewCache:o,changes:l}}function eK(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=lw(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Ez(lw(e)))}}function ZN(t,e,n,r,i,s){const o=e.eventCache;if(sm(r,n)!=null)return e;{let a,l;if(Et(n))if(Oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=nl(e),c=u instanceof Yt?u:Yt.EMPTY_NODE,d=qN(r,c);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=dw(r,nl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=Dt(n);if(u===".priority"){Oe(zo(n)===1,"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const d=EC(r,n,c,l);d!=null?a=t.filter.updatePriority(c,d):a=o.getNode()}else{const c=dn(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const h=EC(r,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(u).updateChild(c,h):d=o.getNode().getImmediateChild(u)}else d=e1(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,c,i,s):a=o.getNode()}}return ld(e,a,o.isFullyInitialized()||Et(n),t.filter.filtersNodes())}}function om(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(Et(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),f,null)}else{const f=Dt(n);if(!l.isCompleteForPath(n)&&zo(n)>1)return e;const p=dn(n),v=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?u=c.updatePriority(l.getNode(),v):u=c.updateChild(l.getNode(),f,v,p,JN,null)}const d=WN(e,u,l.isFullyInitialized()||Et(n),c.filtersNodes()),h=new t1(i,d,s);return ZN(t,d,n,i,h,a)}function hw(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const c=new t1(i,e,s);if(Et(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ld(e,u,!0,t.filter.filtersNodes());else{const d=Dt(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=ld(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=dn(n),f=a.getNode().getImmediateChild(d);let p;if(Et(h))p=r;else{const m=c.getCompleteChild(d);m!=null?DN(h)===".priority"&&m.getChild(PN(h)).isEmpty()?p=m:p=m.updateChild(h,r):p=Yt.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),d,p,h,c,o);l=ld(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function SC(t,e){return t.eventCache.isCompleteForChild(e)}function tK(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=ir(n,l);SC(e,Dt(c))&&(a=hw(t,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=ir(n,l);SC(e,Dt(c))||(a=hw(t,a,c,u,i,s,o))}),a}function CC(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fw(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Et(n)?u=r:u=new cn(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(c.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=CC(t,f,h);l=om(t,l,new gn(d),p,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!c.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),m=CC(t,p,h);l=om(t,l,new gn(d),m,i,s,o,a)}}),l}function nK(t,e,n,r,i,s,o){if(sm(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Et(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return om(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Et(n)){let u=new cn(null);return l.getNode().forEachChild(vu,(c,d)=>{u=u.set(new gn(c),d)}),fw(t,e,n,u,i,s,a,o)}else return e}else{let u=new cn(null);return r.foreach((c,d)=>{const h=ir(n,c);l.isCompleteForPath(h)&&(u=u.set(c,l.getNode().getChild(h)))}),fw(t,e,n,u,i,s,a,o)}}function rK(t,e,n,r,i){const s=e.serverCache,o=WN(e,s.getNode(),s.isFullyInitialized()||Et(n),s.isFiltered());return ZN(t,o,n,r,JN,i)}function iK(t,e,n,r,i,s){let o;if(sm(r,n)!=null)return e;{const a=new t1(r,e,i),l=e.eventCache.getNode();let u;if(Et(n)||Dt(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=dw(r,nl(e));else{const d=e.serverCache.getNode();Oe(d instanceof Yt,"serverChildren would be complete if leaf node"),c=qN(r,d)}c=c,u=t.filter.updateFullNode(l,c,s)}else{const c=Dt(n);let d=e1(r,c,e.serverCache);d==null&&e.serverCache.isCompleteForChild(c)&&(d=l.getImmediateChild(c)),d!=null?u=t.filter.updateChild(l,c,d,dn(n),a,s):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(l,c,Yt.EMPTY_NODE,dn(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=dw(r,nl(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||sm(r,en())!=null,ld(e,u,o,t.filter.filtersNodes())}}function sK(t,e){const n=nl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Et(e)&&!n.getImmediateChild(Dt(e)).isEmpty())?n.getChild(e):null}function IC(t,e,n,r){e.type===ds.MERGE&&e.source.queryId!==null&&(Oe(nl(t.viewCache_),"We should always have a full cache before handling merges"),Oe(lw(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Zz(t.processor_,i,e,n,r);return Jz(t.processor_,s.viewCache),Oe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,oK(t,s.changes,s.viewCache.eventCache.getNode(),null)}function oK(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Oz(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AC;function aK(t){Oe(!AC,"__referenceConstructor has already been defined"),AC=t}function n1(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return Oe(s!=null,"SyncTree gave us an op for an invalid query."),IC(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(IC(o,e,n,r));return s}}function r1(t,e){let n=null;for(const r of t.views.values())n=n||sK(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kC;function lK(t){Oe(!kC,"__referenceConstructor has already been defined"),kC=t}class DC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cn(null),this.pendingWriteTree_=Gz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uK(t,e,n,r,i){return Lz(t.pendingWriteTree_,e,n,r,i),i?Ug(t,new tl(VN(),e,n)):[]}function Gl(t,e,n=!1){const r=Uz(t.pendingWriteTree_,e);if(Fz(t.pendingWriteTree_,e)){let s=new cn(null);return r.snap!=null?s=s.set(en(),!0):xi(r.children,o=>{s=s.set(new gn(o),!0)}),Ug(t,new im(r.path,s,n))}else return[]}function Lg(t,e,n){return Ug(t,new tl(BN(),e,n))}function cK(t,e,n){const r=cn.fromObject(n);return Ug(t,new Qd(BN(),e,r))}function dK(t,e,n,r){const i=rM(t,r);if(i!=null){const s=iM(i),o=s.path,a=s.queryId,l=Ai(o,e),u=new tl(jN(a),l,n);return sM(t,o,u)}else return[]}function hK(t,e,n,r){const i=rM(t,r);if(i){const s=iM(i),o=s.path,a=s.queryId,l=Ai(o,e),u=cn.fromObject(n),c=new Qd(jN(a),l,u);return sM(t,o,c)}else return[]}function eM(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Ai(o,e),u=r1(a,l);if(u)return u});return GN(i,e,s,n,!0)}function Ug(t,e){return tM(e,t.syncPointTree_,null,zN(t.pendingWriteTree_,en()))}function tM(t,e,n,r){if(Et(t.path))return nM(t,e,n,r);{const i=e.get(en());n==null&&i!=null&&(n=r1(i,en()));let s=[];const o=Dt(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,c=XN(r,o);s=s.concat(tM(a,l,u,c))}return i&&(s=s.concat(n1(i,t,r,n))),s}}function nM(t,e,n,r){const i=e.get(en());n==null&&i!=null&&(n=r1(i,en()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=XN(r,o),c=t.operationForChild(o);c&&(s=s.concat(nM(c,a,l,u)))}),i&&(s=s.concat(n1(i,t,r,n))),s}function rM(t,e){return t.tagToQueryMap.get(e)}function iM(t){const e=t.indexOf("$");return Oe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new gn(t.substr(0,e))}}function sM(t,e,n){const r=t.syncPointTree_.get(e);Oe(r,"Missing sync point for query tag that we're tracking");const i=zN(t.pendingWriteTree_,e);return n1(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new i1(n)}node(){return this.node_}}class s1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ir(this.path_,e);return new s1(this.syncTree_,n)}node(){return eM(this.syncTree_,this.path_)}}const fK=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},xC=function(t,e,n){if(!t||typeof t!="object")return t;if(Oe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return pK(t[".sv"],e,n);if(typeof t[".sv"]=="object")return mK(t[".sv"],e);Oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},pK=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Oe(!1,"Unexpected server value: "+t)}},mK=function(t,e,n){t.hasOwnProperty("increment")||Oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Oe(!1,"Unexpected increment value: "+r);const i=e.node();if(Oe(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},gK=function(t,e,n,r){return o1(e,new s1(n,t),r)},vK=function(t,e,n){return o1(t,new i1(e),n)};function o1(t,e,n){const r=t.getPriority().val(),i=xC(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=xC(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new er(a,Sr(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new er(i))),o.forEachChild(Ar,(a,l)=>{const u=o1(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function l1(t,e){let n=e instanceof gn?e:new gn(e),r=t,i=Dt(n);for(;i!==null;){const s=Au(r.node.children,i)||{children:{},childCount:0};r=new a1(i,r,s),n=dn(n),i=Dt(n)}return r}function ac(t){return t.node.value}function oM(t,e){t.node.value=e,pw(t)}function aM(t){return t.node.childCount>0}function yK(t){return ac(t)===void 0&&!aM(t)}function Fg(t,e){xi(t.node.children,(n,r)=>{e(new a1(n,t,r))})}function lM(t,e,n,r){n&&!r&&e(t),Fg(t,i=>{lM(i,e,!0,r)}),n&&r&&e(t)}function wK(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Vh(t){return new gn(t.parent===null?t.name:Vh(t.parent)+"/"+t.name)}function pw(t){t.parent!==null&&bK(t.parent,t.name,t)}function bK(t,e,n){const r=yK(n),i=to(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,pw(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,pw(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K=/[\[\].#$\/\u0000-\u001F\u007F]/,TK=/[\[\].#$\u0000-\u001F\u007F]/,Zv=10*1024*1024,uM=function(t){return typeof t=="string"&&t.length!==0&&!_K.test(t)},EK=function(t){return typeof t=="string"&&t.length!==0&&!TK.test(t)},SK=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),EK(t)},cM=function(t,e,n){const r=n instanceof gn?new rz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ca(r));if(typeof e=="function")throw new Error(t+"contains a function "+ca(r)+" with contents = "+e.toString());if(uN(e))throw new Error(t+"contains "+e.toString()+" "+ca(r));if(typeof e=="string"&&e.length>Zv/3&&qm(e)>Zv)throw new Error(t+"contains a string greater than "+Zv+" utf8 bytes "+ca(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(xi(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!uM(o)))throw new Error(t+" contains an invalid key ("+o+") "+ca(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);iz(r,o),cM(t,a,r),sz(r)}),i&&s)throw new Error(t+' contains ".value" child '+ca(r)+" in addition to actual children.")}},CK=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!uM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!SK(n))throw new Error(L3(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function AK(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!RN(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function bl(t,e,n){AK(t,n),kK(t,r=>ji(r,e)||ji(e,r))}function kK(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(DK(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function DK(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Pa&&Er("event: "+n.toString()),Uh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK="repo_interrupt",PK=25;class RK{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new IK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rm(),this.transactionQueueTree_=new a1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function OK(t,e,n){if(t.stats_=G_(t.repoInfo_),t.forceRestClient_||AY())t.server_=new nm(t.repoInfo_,(r,i,s,o)=>{PC(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>RC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Hs(t.repoInfo_,e,(r,i,s,o)=>{PC(t,r,i,s,o)},r=>{RC(t,r)},r=>{MK(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=OY(t.repoInfo_,()=>new Rz(t.stats_,t.server_)),t.infoData_=new Az,t.infoSyncTree_=new DC({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Lg(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),u1(t,"connected",!1),t.serverSyncTree_=new DC({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);bl(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function NK(t){const n=t.infoData_.getNode(new gn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function dM(t){return fK({timestamp:NK(t)})}function PC(t,e,n,r,i){t.dataUpdateCount++;const s=new gn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Cp(n,u=>Sr(u));o=hK(t.serverSyncTree_,s,l,i)}else{const l=Sr(n);o=dK(t.serverSyncTree_,s,l,i)}else if(r){const l=Cp(n,u=>Sr(u));o=cK(t.serverSyncTree_,s,l)}else{const l=Sr(n);o=Lg(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=d1(t,s)),bl(t.eventQueue_,a,o)}function RC(t,e){u1(t,"connected",e),e===!1&&LK(t)}function MK(t,e){xi(e,(n,r)=>{u1(t,n,r)})}function u1(t,e,n){const r=new gn("/.info/"+e),i=Sr(n);t.infoData_.updateSnapshot(r,i);const s=Lg(t.infoSyncTree_,r,i);bl(t.eventQueue_,r,s)}function $K(t){return t.nextWriteId_++}function LK(t){hM(t,"onDisconnectEvents");const e=dM(t),n=rm();aw(t.onDisconnect_,en(),(i,s)=>{const o=gK(i,s,t.serverSyncTree_,e);FN(n,i,o)});let r=[];aw(n,en(),(i,s)=>{r=r.concat(Lg(t.serverSyncTree_,i,s));const o=BK(t,i);d1(t,o)}),t.onDisconnect_=rm(),bl(t.eventQueue_,en(),r)}function UK(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xK)}function hM(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Er(n,...e)}function fM(t,e,n){return eM(t.serverSyncTree_,e,n)||Yt.EMPTY_NODE}function c1(t,e=t.transactionQueueTree_){if(e||Vg(t,e),ac(e)){const n=mM(t,e);Oe(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&FK(t,Vh(e),n)}else aM(e)&&Fg(e,n=>{c1(t,n)})}function FK(t,e,n){const r=n.map(u=>u.currentWriteId),i=fM(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];Oe(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=Ai(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{hM(t,"transaction put response",{path:l.toString(),status:u});let c=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,c=c.concat(Gl(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Vg(t,l1(t.transactionQueueTree_,e)),c1(t,t.transactionQueueTree_),bl(t.eventQueue_,e,c);for(let h=0;h<d.length;h++)Uh(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{vi("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}d1(t,e)}},o)}function d1(t,e){const n=pM(t,e),r=Vh(n),i=mM(t,n);return VK(t,i,r),r}function VK(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Ai(n,l.path);let c=!1,d;if(Oe(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)c=!0,d=l.abortReason,i=i.concat(Gl(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=PK)c=!0,d="maxretry",i=i.concat(Gl(t.serverSyncTree_,l.currentWriteId,!0));else{const h=fM(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){cM("transaction failed: Data returned ",f,l.path);let p=Sr(f);typeof f=="object"&&f!=null&&to(f,".priority")||(p=p.updatePriority(h.getPriority()));const v=l.currentWriteId,b=dM(t),g=vK(p,h,b);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=g,l.currentWriteId=$K(t),o.splice(o.indexOf(v),1),i=i.concat(uK(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),i=i.concat(Gl(t.serverSyncTree_,v,!0))}else c=!0,d="nodata",i=i.concat(Gl(t.serverSyncTree_,l.currentWriteId,!0))}bl(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Vg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Uh(r[a]);c1(t,t.transactionQueueTree_)}function pM(t,e){let n,r=t.transactionQueueTree_;for(n=Dt(e);n!==null&&ac(r)===void 0;)r=l1(r,n),e=dn(e),n=Dt(e);return r}function mM(t,e){const n=[];return gM(t,e,n),n.sort((r,i)=>r.order-i.order),n}function gM(t,e,n){const r=ac(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Fg(e,i=>{gM(t,i,n)})}function Vg(t,e){const n=ac(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,oM(e,n.length>0?n:void 0)}Fg(e,r=>{Vg(t,r)})}function BK(t,e){const n=Vh(pM(t,e)),r=l1(t.transactionQueueTree_,e);return wK(r,i=>{ey(t,i)}),ey(t,r),lM(r,i=>{ey(t,i)}),n}function ey(t,e){const n=ac(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Oe(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(Oe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Gl(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?oM(e,void 0):n.length=s+1,bl(t.eventQueue_,Vh(e),i);for(let o=0;o<r.length;o++)Uh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function HK(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vi(`Invalid query segment '${n}' in query '${t}'`)}return e}const OC=function(t,e){const n=WK(t),r=n.namespace;n.domain==="firebase.com"&&Za(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Za("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||wY();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new xY(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new gn(n.pathString)}},WK=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(i=jK(t.substring(c,d)));const h=HK(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Et(this._path)?null:DN(this._path)}get ref(){return new lc(this._repo,this._path)}get _queryIdentifier(){const e=yC(this._queryParams),n=z_(e);return n==="{}"?"default":n}get _queryObject(){return yC(this._queryParams)}isEqual(e){if(e=jt(e),!(e instanceof h1))return!1;const n=this._repo===e._repo,r=RN(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+nz(this._path)}}class lc extends h1{constructor(e,n){super(e,n,new J_,!1)}get parent(){const e=PN(this._path);return e===null?null:new lc(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}aK(lc);lK(lc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK="FIREBASE_DATABASE_EMULATOR_HOST",mw={};let zK=!1;function KK(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Za("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Er("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=OC(s,i),a=o.repoInfo,l,u;typeof process<"u"&&ZS&&(u=ZS[YK]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=OC(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new iw(iw.OWNER):new DY(t.name,t.options,e);CK("Invalid Firebase Database URL",o),Et(o.path)||Za("Database URL must point to the root of a Firebase Database (not including a child path).");const d=qK(a,t,c,new kY(t.name,n));return new XK(d,t)}function GK(t,e){const n=mw[e];(!n||n[t.key]!==t)&&Za(`Database ${e}(${t.repoInfo_}) has already been deleted.`),UK(t),delete n[t.key]}function qK(t,e,n,r){let i=mw[e.name];i||(i={},mw[e.name]=i);let s=i[t.toURLString()];return s&&Za("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new RK(t,zK,n,r),i[t.toURLString()]=s,s}class XK{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(OK(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lc(this._repo,en())),this._rootInternal}_delete(){return this._rootInternal!==null&&(GK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Za("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QK(t){pY(Xo),si(new Yr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return KK(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),vr(eC,tC,t),vr(eC,tC,"esm2017")}Hs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Hs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};QK();function vM(t){return dH(sN(t))}function JK(t){return eG({initialUser:t,dependencies:{popupRedirectResolver:rN,persistence:[eN,GO,H_]}})}const ZK=Symbol("VueFireAuth");function eG({dependencies:t,initialUser:e}){return(n,r)=>{const[i,s]=tG(n,r,e,t);fY(i,s)}}function tG(t,e,n,r,i=LO(t,r)){const s=cY(t,e).run(()=>re(n));return dY.set(t,s),e.provide(ZK,i),[s,i]}function nG(t,{firebaseApp:e,modules:n=[]}){t.provide(iN,e);for(const r of n)r(e,t)}const rG=""+new URL("bundle.css",import.meta.url).href,yM={name:"Sander Derks",role:"Full-Stack Developer",service:"Software Development",location:{country:"The Netherlands",city:"Nijmegen"}},iG={avatarUrl:rG,headerDescriptionGuest:["Loading"],headerDescriptionUser:["Loading"],blogDescriptionGuest:["Loading"],blogDescriptionUser:["Loading"],blogLoginGuest:"",dashboardDescription:["Loading"],privacyStatement:["Loading"],footerCopyright:"Sander Derks. All rights reserved."},sG=[{name:"",description:"Loading...",technologies:[],loading:!0},{name:"",description:"Loading...",technologies:[],loading:!0},{name:"",description:"Loading...",technologies:[],loading:!0},{name:"",description:"Loading...",technologies:[],loading:!0}],oG=[{id:"1",name:"Loading...",url:"#",loading:!0},{id:"2",name:"Loading...",url:"#",loading:!0},{id:"3",name:"Loading...",url:"#",loading:!0}],wM=[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}];var Vn;(t=>{t.mapIncoming=async e=>{var n,r,i,s,o,a;return{...e,alignment:e.alignment??"center",date:e.date.toDate(),dateUpdated:((n=e.dateUpdated)==null?void 0:n.toDate())??null,datePinned:((r=e.datePinned)==null?void 0:r.toDate())??null,reactions:await Promise.all((await Promise.all(((i=e.reactions)==null?void 0:i.map(async l=>await Si(l)))??[])).map(async l=>am.mapIncoming(l,e.id)).filter(l=>!!l)),sections:((s=e.sections)==null?void 0:s.map(l=>{var u,c;return{...l,subTitle:l.subTitle??"",alignment:l.alignment??"center",countdown:((u=l.countdown)==null?void 0:u.toDate())??null,timer:((c=l.timer)==null?void 0:c.toDate())??null,coverImageUrl:l.coverImageUrl??"",bullets:l.bullets??[]}}))??[],countdown:((o=e.countdown)==null?void 0:o.toDate())??null,timer:((a=e.timer)==null?void 0:a.toDate())??null,archived:e.archived??!1}},t.convert=e=>({title:e.title,description:e.description,descriptionFooter:e.descriptionFooter??"",alignment:e.alignment??"left",sections:e.sections??[],date:e.date,dateUpdated:e.dateUpdated,datePinned:e.datePinned,locked:e.locked??!1,colorPrimary:e.colorPrimary??"",colorSecondary:e.colorSecondary??"",colorTertiary:e.colorTertiary??"",opacityPrimary:e.opacityPrimary??"",opacitySecondary:e.opacitySecondary??"",opacityTertiary:e.opacityTertiary??"",coverImageUrl:e.coverImageUrl??"",allowedUserIds:e.allowedUserIds??[],countdown:e.countdown,timer:e.timer,archived:e.archived}),(e=>{e.convert=n=>({title:n.title,description:n.description,descriptionFooter:n.descriptionFooter,sections:n.sections,coverImageUrl:n.coverImageUrl,countdown:n.countdown,timer:n.timer}),e.instanceOf=n=>["title","description","descriptionFooter","sections","coverImageUrl","countdown","timer"].every(r=>r in n)})(t.Content||(t.Content={})),(e=>{e.convert=n=>({alignment:n.alignment,colorPrimary:n.colorPrimary,colorSecondary:n.colorSecondary,colorTertiary:n.colorTertiary,opacityPrimary:n.opacityPrimary,opacitySecondary:n.opacitySecondary,opacityTertiary:n.opacityTertiary}),e.instanceOf=n=>["alignment","colorPrimary","colorSecondary","colorTertiary","opacityPrimary","opacitySecondary","opacityTertiary"].every(r=>r in n)})(t.Styling||(t.Styling={})),(e=>{e.convert=n=>({locked:n.locked,allowedUserIds:n.allowedUserIds,archived:n.archived,datePinned:n.datePinned}),e.instanceOf=n=>["locked","archived","datePinned"].every(r=>r in n)})(t.Settings||(t.Settings={}))})(Vn||(Vn={}));var am;(t=>{t.mapIncoming=async(e,n)=>{if(!e)return null;const r=await Si(e.user);return r?{...e,user:r,postId:n,date:e.date.toDate()}:null},t.convert=e=>({userId:e.user.id,postId:e.postId,message:e.message,date:e.date})})(am||(am={}));var gw;(t=>{t.convert=e=>({displayName:e.displayName,avatar:e.avatar??""})})(gw||(gw={}));const lm=[{value:"bg-gray-900",label:"Default",background:"bg-gray-900",text:"text-gray-900"},{value:"bg-red-700",label:"Important",background:"bg-red-700",text:"text-red-700"},{value:"bg-orange-500",label:"Orange",background:"bg-orange-500",text:"text-orange-500"},{value:"bg-yellow-900",label:"Amber",background:"bg-yellow-900",text:"text-yellow-900"},{value:"bg-yellow-500",label:"Yellow",background:"bg-yellow-500",text:"text-yellow-500"},{value:"bg-green-500",label:"Green",background:"bg-green-500",text:"text-green-500"},{value:"bg-cyan-500",label:"Aqua",background:"bg-cyan-500",text:"text-cyan-500"},{value:"bg-blue-600",label:"Blue",background:"bg-blue-600",text:"text-blue-600"},{value:"bg-purple-600",label:"Purple",background:"bg-purple-600",text:"text-purple-600"},{value:"bg-pink-600",label:"Pink",background:"bg-pink-600",text:"text-pink-600"}],aG=t=>lm.map((e,n)=>n===0?{value:"",label:"Match Primary",background:(t==null?void 0:t.background)||"bg-gray-900",text:(t==null?void 0:t.text)||"text-gray-900"}:e),lG=lm.map((t,e)=>e===0?{value:"",label:"Default",background:"bg-gray-700"}:t),ty=[{value:"",label:"Default"},{value:"bg-opacity-10",label:"10"},{value:"bg-opacity-20",label:"20"},{value:"bg-opacity-30",label:"30"},{value:"bg-opacity-40",label:"40"},{value:"bg-opacity-50",label:"50"},{value:"bg-opacity-60",label:"60"},{value:"bg-opacity-70",label:"70"},{value:"bg-opacity-80",label:"80"},{value:"bg-opacity-90",label:"90"},{value:"bg-opacity-100",label:"100"}],Wt=vM(),Zt={content:$i(Wt,"content"),projects:$i(Wt,"projects"),menuItems:t=>$i(Wt,t?"menuItemsPrivate":"menuItems"),menuItemsPrivate:$i(Wt,"menuItemsPrivate"),blogPosts:t=>$i(Wt,t?"blogPostsPrivate":"blogPosts"),blogPostsPrivate:$i(Wt,"blogPostsPrivate"),blogReactions:t=>$i(Wt,t?"blogReactionsPrivate":"blogReactions"),usersPublic:$i(Wt,"usersPublic"),files:$i(Wt,"files")},Jn=vx("main",{state:()=>({profile:yM,content:iG,menuItems:oG,projects:sG,blogPosts:{data:{public:[],private:[],single:null},isLastPage:!1,visibility:"public",fetchLoading:!1,mutationLoading:!1},publicUsers:[],online:!0,debug:!1,fetchAllLoading:!1}),getters:{filteredProjects:t=>t.projects.filter(e=>!e.loading),filteredMenuItems:t=>t.menuItems.filter(e=>!e.loading),visibleMenuItems:t=>t.menuItems.filter(e=>!e.invisible),allBlogPosts:t=>[...t.blogPosts.data.public,...t.blogPosts.data.private],visibleBlogPosts:t=>t.blogPosts.data[t.blogPosts.visibility]},actions:{async fetchAll(t,e){try{this.fetchAllLoading||(this.fetchAllLoading=!0,console.log("attempt to fetch all"),(this.debug||this.online&&(!this.filteredProjects.length||!this.filteredMenuItems.length||e))&&(console.log("fetch all"),this.blogPosts.data={public:[],private:[],single:null},this.blogPosts.visibility="public",await Promise.all([this.fetchProjects(),this.fetchMenuItems(t),this.fetchBlogPosts(t),this.fetchContent(),this.fetchPublicUsers()])))}catch(n){Ye.firebaseError(this.debug,n)}finally{this.fetchAllLoading=!1}},async fetchContent(){try{const t=await Si(Ut(Wt,Zt.content.id,"production"));this.content={...this.content,...t||{}}}catch(t){Ye.firebaseError(this.debug,t)}},async fetchProjects(){try{const t=await Promise.all((await Il(Zt.projects)).map(async e=>({...e,technologies:await Promise.all(e.technologies.map(async n=>await Si(n)))})));this.projects=t.length?NS(t):this.projects}catch(t){Ye.firebaseError(this.debug,t)}},moveProject(t,e){const n=this.projects.splice(t,1)[0];this.projects.splice(e,0,n)},async fetchMenuItems(t){try{let e=await Il(Zt.menuItems());if(t)try{e=e.concat(await Il(Zt.menuItemsPrivate,[SS("allowedUserIds","array-contains",Ut(Wt,Zt.usersPublic.id,t).id)]))}catch{}return this.menuItems=e.length?NS(e):this.menuItems,this.menuItems}catch(e){Ye.firebaseError(this.debug,e)}},async fetchBlogPosts(t,e={}){try{this.blogPosts.fetchLoading=!0;const r=e.visibility??this.blogPosts.visibility,i=this.blogPosts.data[r][this.blogPosts.data[r].length-1],s=[CS("datePinned","desc"),CS("date","desc"),SH(e.amount||3)];this.visibleBlogPosts.length||(this.blogPosts.isLastPage=!1),e.amount&&(this.blogPosts.data[r]=[]),!e.amount&&i&&s.push(IH(i.datePinned,i.date));var n=[];r==="private"&&t?n=await Il(Zt.blogPostsPrivate,[SS("allowedUserIds","array-contains",Ut(Wt,Zt.usersPublic.id,t).id),...s]):r==="public"&&(n=await Il(Zt.blogPosts(!1),s));const o=await Promise.all(n.map(async a=>await Vn.mapIncoming(a)));if(e.amount)this.blogPosts.data[r]=o;else for(const a of o)this.blogPosts.data[r].push(a);o.length<3&&(this.blogPosts.isLastPage=!0)}catch(r){Ye.firebaseError(this.debug,r)}finally{this.blogPosts.fetchLoading=!1}},async fetchBlogPost(t,e){try{console.log("attempt to fetch single"),this.blogPosts.fetchLoading=!0;var n=await Si(Ut(Zt.blogPosts(!!(e!=null&&e.isPrivate)),t));return n||(n=await Si(Ut(Zt.blogPostsPrivate,t))),n?(this.blogPosts.data.single=await Vn.mapIncoming(n),this.blogPosts.data.single):null}catch(r){return Ye.firebaseError(this.debug,r),null}finally{this.blogPosts.fetchLoading=!1}},async fetchPublicUsers(){try{this.publicUsers=await Il(Zt.usersPublic)}catch(t){return Ye.firebaseError(this.debug,t),null}},async fetchPublicUser(t){try{return await Si(Ut(Wt,Zt.usersPublic.id,t))}catch(e){return Ye.firebaseError(this.debug,e),null}},async allowedPublicUsers(t){try{return(await Promise.all(t.map(async n=>{const r=await this.fetchPublicUser(n);return r?{...r,displayName:r.displayName||"Anonymous"}:null}))).filter(Boolean)}catch{return[]}},async createBlogPost(t,e,n,r={includeTime:!1,fetch:!0}){try{this.blogPosts.mutationLoading=!0;const i=po(e);return await Kp(Ut(Wt,Zt.blogPosts(i.isPrivate).id,t),{...e,date:r!=null&&r.includeTime?e.date:jn.now(),dateUpdated:r!=null&&r.includeTime?e.dateUpdated:null,countdown:e.countdown?jn.fromDate(e.countdown):null,timer:e.timer?jn.fromDate(e.timer):null}),this.blogPosts.visibility=i.visibility,r!=null&&r.fetch&&this.fetchBlogPosts(n,{amount:this.visibleBlogPosts.length+1}),Ye.success("Successfully created Post"),!0}catch(i){return Ye.firebaseError(this.debug,i),!1}finally{this.blogPosts.mutationLoading=!1}},async updateBlogPost(t,e,n,r){try{this.blogPosts.mutationLoading=!0;const i=Zt.blogPosts(n.isPrivate).id;let s="";if(Vn.Content.instanceOf(e)&&(await bo(Ut(Wt,i,t),{...Vn.Content.convert(e),dateUpdated:jn.now()}),s="content"),Vn.Styling.instanceOf(e)&&(await bo(Ut(Wt,i,t),{...Vn.Styling.convert(e)}),s="styling"),Vn.Settings.instanceOf(e)&&(await bo(Ut(Wt,i,t),{...Vn.Settings.convert(e)}),s="settings"),s==="content"||s==="styling"){const o=await this.fetchBlogPost(t,n);this.blogPosts.data[n.visibility]=this.blogPosts.data[n.visibility].map(a=>a.id===(o==null?void 0:o.id)?o:a)}else this.fetchBlogPosts(r,{amount:this.blogPosts.data[n.visibility].length});return s}catch(i){Ye.firebaseError(this.debug,i)}finally{this.blogPosts.mutationLoading=!1}},async toggleBlogPostVisibility(t,e,n,r,i){try{this.blogPosts.mutationLoading=!0;const s=this.allBlogPosts.find(o=>o.id===t);if(await this.deleteBlogPost(t,{includeFiles:!1,includeReactions:!1}),s&&await this.createBlogPost(t,e,i,{includeTime:!0,fetch:!1})){let o;do this.blogPosts.data[r]=[],await this.fetchBlogPosts(i,{visibility:r}),o=this.allBlogPosts.find(a=>a.id===t);while(!o);if(this.blogPosts.visibility=r,o){for(const a of n)await this.deleteBlogReaction(a.id,s,{mutatePost:!1,fetch:!1})||Ye.error("Failed to delete old Reaction",{debug:this.debug}),await this.createBlogReaction(o,am.convert(a),{includeTime:!0,fetch:!1})||Ye.error("Failed to re-create Reaction",{debug:this.debug});for(const a of this.getFilesOfPost(s)){const l=Q0(a);await this.updateFileInfo(l.name,o)||Ye.error("Failed to move Image",{debug:this.debug})}return this.fetchBlogPosts(i,{amount:this.visibleBlogPosts.length}),!0}else return Ye.error("Failed to re-create Post",{debug:this.debug}),!1}else return Ye.error("Failed to re-create Post",{debug:this.debug}),!1}catch(s){return Ye.firebaseError(this.debug,s),!1}finally{this.blogPosts.mutationLoading=!1}},async deleteBlogPost(t,e={includeFiles:!0,includeReactions:!0}){try{const n=this.allBlogPosts.find(r=>r.id===t);if(n){e.includeReactions&&await this.deleteBlogReactionsOfBlogPost(n),e.includeFiles&&await this.deleteFilesOfBlogPost(n);const r=po(n);return await Vc(Ut(Wt,Zt.blogPosts(r.isPrivate).id,t)),this.blogPosts.data[r.visibility]=this.blogPosts.data[r.visibility].filter(i=>i.id!==t),Ye.success("Successfully deleted Post"),!0}return!1}catch(n){return Ye.firebaseError(this.debug,n),!1}},async createBlogReaction(t,e,n={includeTime:!1,fetch:!0}){try{const r=po(t),i=Ut(Wt,Zt.blogPosts(r.isPrivate).id,t.id),s=await Si(i);if(s){const o=await n8(Zt.blogReactions(r.isPrivate),{user:Ut(Wt,Zt.usersPublic.id,e.userId),message:e.message,date:n!=null&&n.includeTime?e.date:jn.now(),post:i});if(await bo(Ut(Wt,Zt.blogPosts(r.isPrivate).id,s.id),{reactions:[...s.reactions??[],o]}),n!=null&&n.fetch){const a=await this.fetchBlogPost(s.id,r);this.blogPosts.data[r.visibility]=this.blogPosts.data[r.visibility].map(l=>l.id===s.id?a??l:l)}return Ye.success("Successfully created Reaction"),!0}return!1}catch(r){return Ye.firebaseError(this.debug,r),!1}},async deleteBlogReaction(t,e,n={mutatePost:!0,fetch:!0}){var r;try{const i=po(e);if(n.mutatePost){const s=Ut(Wt,Zt.blogPosts(i.isPrivate).id,e.id),o=await Si(s);o&&await bo(s,{reactions:((r=o.reactions)==null?void 0:r.filter(a=>a.id!==t))??[]})}return await Vc(Ut(Wt,Zt.blogReactions(i.isPrivate).id,t)),n!=null&&n.fetch&&(e.reactions=e.reactions.filter(s=>s.id!==t),this.blogPosts.data[i.visibility]=this.blogPosts.data[i.visibility].map(s=>s.id===e.id?e:s)),Ye.success("Successfully deleted Reaction"),!0}catch(i){return Ye.firebaseError(this.debug,i),!1}},async deleteBlogReactionsOfBlogPost(t){try{const e=po(t),n=(t==null?void 0:t.reactions)??[];for(const r of n)await Vc(Ut(Wt,Zt.blogReactions(e.isPrivate).id,r.id));return n.length&&Ye.success(`Successfully deleted ${n.length} Reaction${n.length!==1?"s":""}`),!0}catch(e){return Ye.firebaseError(this.debug,e),!1}},getFilesOfPost(t,e){var r,i;const n=[];if(t.coverImageUrl&&(!e||!e.coverImageUrl)&&n.push(t.coverImageUrl),t.sections.length)for(const[s,o]of t.sections.entries()){const a=(i=(r=e==null?void 0:e.sections)==null?void 0:r[s])==null?void 0:i.coverImageUrl,l=o.coverImageUrl;l&&(!e||!a)&&n.push(l)}return n},async fetchFileInfo(t){try{return await Si(Ut(Wt,Zt.files.path,t))}catch(e){return Ye.firebaseError(this.debug,e),null}},async uploadFile(t,e,n,r,i,s,o){return await this.createFileInfo(t.name,r,i,s,o)&&await this.createFile(t,e,n)},async createFile(t,e,n){try{const r=GW(t,e);return r.on("state_changed",i=>{const s=i.bytesTransferred/i.totalBytes*100;n(s)}),await r,Ye.success("Successfully uploaded File"),!0}catch(r){return Ye.firebaseError(this.debug,r),!1}},async createFileInfo(t,e,n,r,i){try{let s;if(i){const o=po(i);s=Ut(Wt,Zt.blogPosts(o.isPrivate).id,i.id)}return await Kp(Ut(Wt,Zt.files.path,t),{name:e,owner:n,post:s??null,public:r??!1}),!0}catch(s){return Ye.firebaseError(this.debug,s),!1}},async updateFileInfo(t,e){try{let n;if(e){const r=po(e);n=Ut(Wt,Zt.blogPosts(r.isPrivate).id,e.id)}return await bo(Ut(Wt,Zt.files.path,t),{post:n??null}),!0}catch(n){return Ye.firebaseError(this.debug,n),!1}},async deleteFile(t,e=!1){try{return await Vc(Ut(Wt,Zt.files.path,t.name)),await XW(t),e||Ye.success("Successfully deleted File"),!0}catch(n){return Ye.firebaseError(this.debug,n),!1}},async deleteFilesOfBlogPost(t,e){try{const n=this.getFilesOfPost(t,e);for(const r of n)await this.deleteFile(Q0(r),!0);return n.length&&Ye.success(`Successfully deleted ${n.length} File${n.length!==1?"s":""}`),!0}catch(n){return Ye.firebaseError(this.debug,n),!1}},toggleOnline(){this.online=!this.online},toggleDebug(){this.debug=!this.debug}},persist:{enabled:!0}}),Vl=uY(hx);Vl.onAuthStateChanged(t=>{Qn().fetchUser(t);const e=Jn();e.$patch({blogPosts:{...e.blogPosts,data:{...e.blogPosts.data,private:[]}}}),e.fetchAll(t==null?void 0:t.uid,!0)});const xs=vM(),sa={users:$i(xs,"users"),usersPublic:$i(xs,"usersPublic")},Qn=vx("auth",{state:()=>({currentUser:null,publicUser:null,firebaseUser:Vl.currentUser,loginLoading:!1,mutationLoading:!1,logoutLoading:!1}),getters:{isOwner:t=>{var e;return((e=t.firebaseUser)==null?void 0:e.uid)==="wEaq28Vfx8aygJ6TUi0hDrNut1F2"}},actions:{async fetchUser(t){if(this.firebaseUser=t,t){this.publicUser=await Si(Ut(xs,sa.usersPublic.id,t.uid));const e=await Si(Ut(xs,sa.users.id,t.uid));e!=null&&(this.currentUser={firstName:e.firstName||"",lastName:e.lastName||""})}},async login(t,e){try{this.loginLoading=!0;const{user:n}=await q8(Vl,t,e);await this.fetchUser(n),Ye.success("Successfully logged in",{route:"dashboard"})}catch(n){Ye.firebaseError(!1,n)}finally{this.loginLoading=!1}},async register(t,e,n){try{this.loginLoading=!0;const{user:r}=await G8(Vl,t,e);await Kp(Ut(xs,sa.users.id,r.uid),{firstName:n}),await this.updatePublicUser({displayName:"Anonymous",avatar:""}),await this.fetchUser(r),Ye.success("Successfully created your account",{route:"dashboard"})}catch(r){Ye.firebaseError(!1,r)}finally{this.loginLoading=!1}},async updateMail(t,e){try{if(this.loginLoading=!0,this.firebaseUser&&this.firebaseUser.email){const n=Yo.credential(this.firebaseUser.email,e);await HS(this.firebaseUser,n),await X8(this.firebaseUser,t),Ye.success("Successfully changed your e-mail")}}catch(n){Ye.firebaseError(!1,n)}finally{this.loginLoading=!1}},async updatePassword(t,e){try{if(this.loginLoading=!0,this.firebaseUser&&this.firebaseUser.email){const n=Yo.credential(this.firebaseUser.email,e);await HS(this.firebaseUser,n),await Q8(this.firebaseUser,t),Ye.success("Successfully changed your password")}}catch(n){Ye.firebaseError(!1,n)}finally{this.loginLoading=!1}},async resetPassword(t){try{await K8(Vl,t),Ye.success("Successfully requested password reset")}catch(e){Ye.firebaseError(!1,e)}},async updateUser(t){try{this.mutationLoading=!0,this.currentUser&&this.firebaseUser&&(Wi(this.currentUser,t)?Ye.warning("Nothing changed in your details"):(await bo(Ut(xs,sa.users.id,this.firebaseUser.uid),t),await this.fetchUser(this.firebaseUser),Ye.success("Successfully updated your profile")))}catch(e){Ye.firebaseError(!1,e)}finally{this.mutationLoading=!1}},async updatePublicUser(t){try{this.mutationLoading=!0,this.publicUser?Wi(this.publicUser,t)?Ye.warning("Nothing changed in your public profile"):(await bo(Ut(xs,sa.usersPublic.id,this.publicUser.id),{displayName:t.displayName,avatar:t.avatar}),await this.fetchUser(this.firebaseUser),Ye.success("Successfully updated your public profile")):this.firebaseUser?(await Kp(Ut(xs,sa.usersPublic.id,this.firebaseUser.uid),{displayName:t.displayName,avatar:t.avatar}),await this.fetchUser(this.firebaseUser),Ye.success("Successfully updated your public profile")):Ye.firebaseError(!1)}catch(e){Ye.firebaseError(!1,e)}finally{this.mutationLoading=!1}},async logout(){try{this.logoutLoading=!0,await Z8(Vl),this.currentUser=null,this.publicUser=null,Ye.success("Successfully logged out",{route:"home"})}catch(t){Ye.firebaseError(!1,t)}finally{this.logoutLoading=!1}},async deleteAccount(){try{this.logoutLoading=!0,this.currentUser&&this.firebaseUser&&(await Vc(Ut(xs,sa.users.id,this.firebaseUser.uid)),await e7(this.firebaseUser),this.currentUser=null,this.publicUser=null,Ye.success("Successfully deleted your account",{route:"home"}))}catch(t){Ye.firebaseError(!1,t)}finally{this.logoutLoading=!1}}},persist:{enabled:!0}});function uG(t,e){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[J("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z","clip-rule":"evenodd"})])}function cG(t,e){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[J("path",{"fill-rule":"evenodd",d:"M6 3.75A2.75 2.75 0 0 1 8.75 1h2.5A2.75 2.75 0 0 1 14 3.75v.443c.572.055 1.14.122 1.706.2C17.053 4.582 18 5.75 18 7.07v3.469c0 1.126-.694 2.191-1.83 2.54-1.952.599-4.024.921-6.17.921s-4.219-.322-6.17-.921C2.694 12.73 2 11.665 2 10.539V7.07c0-1.321.947-2.489 2.294-2.676A41.047 41.047 0 0 1 6 4.193V3.75Zm6.5 0v.325a41.622 41.622 0 0 0-5 0V3.75c0-.69.56-1.25 1.25-1.25h2.5c.69 0 1.25.56 1.25 1.25ZM10 10a1 1 0 0 0-1 1v.01a1 1 0 0 0 1 1h.01a1 1 0 0 0 1-1V11a1 1 0 0 0-1-1H10Z","clip-rule":"evenodd"}),J("path",{d:"M3 15.055v-.684c.126.053.255.1.39.142 2.092.642 4.313.987 6.61.987 2.297 0 4.518-.345 6.61-.987.135-.041.264-.089.39-.142v.684c0 1.347-.985 2.53-2.363 2.686a41.454 41.454 0 0 1-9.274 0C3.985 17.585 3 16.402 3 15.055Z"})])}function dG(t,e){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[J("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function hG(t,e){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[J("path",{"fill-rule":"evenodd",d:"m9.69 18.933.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 0 0 .281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 1 0 3 9c0 3.492 1.698 5.988 3.355 7.584a13.731 13.731 0 0 0 2.273 1.765 11.842 11.842 0 0 0 .976.544l.062.029.018.008.006.003ZM10 11.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5Z","clip-rule":"evenodd"})])}function fG(t,e){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[J("path",{d:"M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z"})])}function pG(t,e){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[J("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})])}const mG=["href"],gG=Ee({__name:"ButtonWrapper",props:{class:{},activeClass:{},url:{}},setup(t){return(e,n)=>{const r=Zs("RouterLink");return e.url?(x(),z(Ae,{key:0},[e.url.startsWith("http")?(x(),z("a",{key:1,class:Me(e.class),href:e.url},[xe(e.$slots,"default")],10,mG)):(x(),ce(r,{key:0,class:Me(e.class),"active-class":e.activeClass,to:{path:e.url}},{default:fe(()=>[xe(e.$slots,"default")]),_:3},8,["class","active-class","to"]))],64)):xe(e.$slots,"default",{key:1,class:Me(e.class)})}}}),vG=["type","disabled"],yG={class:Me("w-full flex flex-column justify-center")},_t=Ee({__name:"CustomButton",props:{class:{},url:{},type:{},activeClass:{},style:{type:[Boolean,null,String,Object,Array]},outlined:{type:Boolean},list:{type:Boolean},action:{},bold:{type:Boolean},loading:{type:Boolean}},emits:["click"],setup(t){const e=t,n=Z(()=>{switch(e.type){case"primary":return e.outlined?e.list?"button-outlined-list-primary":"button-outlined-primary":"button-primary";case"secondary":return e.outlined?e.list?"button-outlined-list-secondary":"button-outlined-secondary":"button-secondary";case"danger":return e.outlined?e.list?"button-outlined-list-danger":"button-outlined-danger":"button-danger";case"action-positive":return e.outlined?"button-outlined-action-positive":"button-action-positive";case"orange":return e.outlined?"button-outlined-orange":"button-orange";default:return e.outlined?e.list?"button-outlined-list-primary":"button-outlined-primary":"button-primary"}});return(r,i)=>(x(),ce(gG,{class:Me([n.value,"md:mt-0 py-2 px-4 rounded-full",r.list?"flex flex-column justify-center":"",...k(Fl)(e.class)]),activeClass:r.activeClass,url:r.url},{default:fe(({class:s})=>[J("button",{class:Me(s),style:Gn(r.style),type:r.action??"button",disabled:r.loading,onClick:i[0]||(i[0]=o=>r.$emit("click"))},[J("span",yG,[r.loading?(x(),ce(k(uG),{key:0,class:"my-1 mr-2.5 h-5 w-5 animate-spin"})):ne("",!0),xe(r.$slots,"default")])],14,vG)]),_:3},8,["class","activeClass","url"]))}}),bc=Ee({__name:"CountdownNumber",props:{time:{},animate:{type:Boolean},direction:{}},setup(t){return(e,n)=>(x(),z("span",{class:Me({"animation ease-in animate-timer-up":e.animate&&e.direction==="up","animation ease-in animate-timer-down":e.animate&&e.direction==="down"})},Je(e.time),3))}}),wG=Ee({__name:"CountdownWrapper",props:{time:{},direction:{}},setup(t){const e=t,n=m=>(e.direction==="up"?m=Math.abs(m):m=Math.max(0,m),Math.floor(m)),r=re(0),i=Z(()=>n(r.value/zp)),s=Z(()=>r.value%zp),o=Z(()=>n(s.value/Yp)),a=Z(()=>s.value%Yp),l=Z(()=>n(a.value/X0)),u=Z(()=>a.value%X0),c=Z(()=>n(u.value/q0)),d=Z(()=>u.value%q0),h=Z(()=>n(d.value/gO)),f=Z(()=>i.value===0&&o.value===0&&l.value===0&&c.value===0&&h.value===0),p=()=>{r.value=e.time-new Date().getTime(),setTimeout(p,1e3)};return zt(()=>{p()}),(m,v)=>xe(m.$slots,"default",{years:i.value,days:o.value,hours:l.value,minutes:c.value,seconds:h.value,isTimeUp:f.value,daysIsLast:m.direction==="down"?o.value===364:o.value===0,hoursIsLast:m.direction==="down"?l.value===23:o.value===0,minutesIsLast:m.direction==="down"?c.value===59:c.value===0,secondsIsLast:m.direction==="down"?h.value===59:h.value===0})}}),bG={class:"grid grid-flow-col text-center"},_G={key:0,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},TG={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},EG={key:1,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},SG={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},CG={key:2,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},IG={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},AG={key:3,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},kG={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},DG={key:4,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},xG={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},Sf=Ee({__name:"Countdown",props:{time:{},direction:{},alignment:{}},setup(t){const e=t;return(n,r)=>(x(),z("div",{class:Me({block:!n.alignment,flex:!!n.alignment,"justify-start":n.alignment==="left","justify-center":n.alignment==="center","justify-end":n.alignment==="right"})},[ee(wG,{time:e.time,direction:n.direction},{default:fe(({years:i,days:s,hours:o,minutes:a,seconds:l,isTimeUp:u,daysIsLast:c,hoursIsLast:d,minutesIsLast:h,secondsIsLast:f})=>[J("div",bG,[i>0?(x(),z("div",_G,[J("span",TG,[ee(bc,{time:i,animate:i>=0&&c&&d&&h&&f,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" years ")])):ne("",!0),i>0||s>0||u?(x(),z("div",EG,[J("span",SG,[ee(bc,{time:s,animate:s>=0&&d&&h&&f,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" days ")])):ne("",!0),i>0||s>0||o>0||u?(x(),z("div",CG,[J("span",IG,[ee(bc,{time:o,animate:o>=0&&h&&f,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" hrs ")])):ne("",!0),i>0||s>0||o>0||a>0||u?(x(),z("div",AG,[J("span",kG,[ee(bc,{time:a,animate:a>=0&&f,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" mins ")])):ne("",!0),i>0||s>0||o>0||a>0||l>0||u?(x(),z("div",DG,[J("span",xG,[ee(bc,{time:l,animate:!u,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" secs ")])):ne("",!0)])]),_:1},8,["time","direction"])],2))}}),PG={class:"flex justify-between"},RG={class:"flex flex-col"},OG={class:"flex justify-between"},NG={class:"xl:flex"},MG={key:0,class:"flex gap-2"},$G=["src"],LG=["href"],UG={class:"text-2xl group-hover/bubble:underline font-bold mb-2"},FG={key:1,class:"flex gap-2"},VG=["src"],BG={key:0,class:"xl:mt-2"},Rr=Ee({__name:"Bubble",props:{title:{},subTitle:{},url:{},description:{},avatar:{},loading:{type:Boolean},titleProps:{},subTitleProps:{},descriptionProps:{}},setup(t){return(e,n)=>(x(),z("div",{class:Me(["group/bubble color-primary rounded-3xl p-5 md:p-10",e.url?"hover:bg-opacity-30":null,e.loading?"animate-pulse":null])},[J("div",PG,[J("div",RG,[J("div",OG,[J("div",NG,[e.url?(x(),z("div",MG,[e.avatar?(x(),z("img",{key:0,class:"rounded-full h-10 w-10",src:e.avatar},null,8,$G)):ne("",!0),J("a",{href:e.url},[J("h2",UG,Je(e.title),1)],8,LG)])):e.title?(x(),z("div",FG,[e.avatar?(x(),z("img",{key:0,class:"rounded-full border border-gray-400 h-10 w-10",src:e.avatar},null,8,VG)):ne("",!0),J("h2",Xt({class:"text-2xl font-bold mb-2 xl:whitespace-nowrap"},e.titleProps),Je(e.title),17)])):ne("",!0),e.subTitle?(x(),z("p",Xt({key:2,class:"text-sm text-gray-300 mt-2 mb-2 xl:ms-2 xl:mt-2 xl:whitespace-nowrap"},e.subTitleProps),Je(e.subTitle),17)):ne("",!0)])]),e.description?(x(),z("div",BG,[(x(!0),z(Ae,null,dt(Array.isArray(e.description)?e.description:[e.description],r=>(x(),z("p",Xt({class:"text-gray-400 mb-2"},e.descriptionProps),Je(r),17))),256))])):ne("",!0)]),xe(e.$slots,"right")]),xe(e.$slots,"default")],2))}}),jG={key:0,class:"text-red-600"},f1=Ee({__name:"ErrorMessage",props:{name:{},error:{}},setup(t){return(e,n)=>e.error?(x(),z("p",jG,Je(e.error),1)):ne("",!0)}});var p1=(t=>(t.Required="Required",t.Numeric="Numeric",t.Min="Min",t.Max="Max",t.Email="Email",t.MinLength="MinLength",t.MaxLength="MaxLength",t.EqualTo="EqualTo",t))(p1||{});const kt={Required:{type:"Required",test:({value:t})=>!!t.length,error:()=>"Required"},Numeric:{type:"Numeric",test:({value:t})=>/^-?[0-9]\d*(\.\d+)?$/.test(t),error:()=>"Must be numeric"},Min:{type:"Min",test:({value:t,minValue:e})=>e?Number(t)>=e:!0,error:({minValue:t})=>`Must be at least ${t}`},Max:{type:"Max",test:({value:t,maxValue:e})=>e?Number(t)<=e:!0,error:({maxValue:t})=>`May not be more than ${t}`},Email:{type:"Email",test:({value:t})=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),error:()=>"Must be an e-mail address"},MinLength:{type:"MinLength",test:({value:t,minLength:e})=>!t.length||t.length>=(e||3),error:({minLength:t})=>`Must be at least ${t} characters`},MaxLength:{type:"MaxLength",test:({value:t,maxLength:e})=>!t.length||t.length<=(e||50),error:({maxLength:t})=>`May not be more than ${t} characters`},EqualTo:{type:"EqualTo",test:({value:t,compare:e})=>!t.length||!e||t===e.value,error:()=>"Fields don't match",compareError:({compare:t})=>t?"Must be equal to "+(t==null?void 0:t.name):""}},HG=Ee({__name:"TrashIcon",setup(t){return(e,n)=>(x(),ce(k(pG),{class:"h-7 w-7"}))}}),bM=Ee({__name:"DeleteButton",emits:["click"],setup(t,{emit:e}){return(n,r)=>(x(),ce(_t,{class:"w-fit flex justify-center !rounded",type:"danger",outlined:"",onClick:r[0]||(r[0]=i=>n.$emit("click"))},{default:fe(()=>[ee(HG)]),_:1}))}}),WG={class:"m-4"},YG=["for"],zG={class:"flex"},qn=Ee({__name:"TextField",props:{id:{},name:{},label:{},placeholder:{},modelValue:{},error:{},rules:{},inputProps:{},labelProps:{},minLength:{},maxLength:{},minValue:{},maxValue:{},compare:{},deleteButton:{type:Boolean}},emits:["update:modelValue","update:error","update:delete"],setup(t,{expose:e,emit:n}){const r=t,i=Z(()=>{const c=r.modelValue;return c?typeof c=="string"?c.endsWith("  ")?c.trim():c:typeof c=="number"?c||0:c||"":r.modelValue||""}),s=Z(()=>r.label?r.label+((r.rules??[]).some(c=>c.type===p1.Required)?" *":""):void 0),o=Z(()=>r.name+(r.id?"."+r.id:"")),a=c=>{const d=c.target.value;u("update:modelValue",d),l(d)},l=async c=>{const d=c||i.value,h=r.rules||[];typeof r.minValue=="number"&&h.push(kt.Min),typeof r.maxValue=="number"&&h.push(kt.Max),typeof r.minLength=="number"&&h.push(kt.MinLength),typeof r.maxLength=="number"&&h.push(kt.MaxLength),r.compare&&h.push(kt.EqualTo);const f={value:d.toString(),minValue:r.minValue,maxValue:r.maxValue,minLength:r.minLength,maxLength:r.maxLength,compare:r.compare},p=h.filter(m=>!m.test(f)).map(m=>{var v;return((v=m.compareError)==null?void 0:v.call(m,f))||m.error(f)})||[];u("update:error",p[0]||"")},u=n;return e({test:l}),(c,d)=>{var h,f;return x(),z("div",WG,[c.label?(x(),z("label",Xt({key:0,class:"block text-sm font-bold mb-2",for:o.value},c.labelProps),Je(s.value),17,YG)):ne("",!0),J("div",zG,[(x(),ce(uh(((h=c.inputProps)==null?void 0:h.type)==="textarea"?"textarea":"input"),Xt({id:o.value,ref:"input",value:i.value,class:"input-field",type:((f=c.inputProps)==null?void 0:f.type)||"text",placeholder:c.placeholder,onInput:a},c.inputProps),null,16,["id","value","type","placeholder"])),c.deleteButton?(x(),ce(bM,{key:0,class:"h-fit",onClick:d[0]||(d[0]=p=>u("update:delete"))})):ne("",!0)]),c.error?(x(),ce(f1,{key:1,name:c.name,error:c.error},null,8,["name","error"])):ne("",!0)])}}}),KG={class:"flex flex-col"},GG=Ee({__name:"BlogReaction",props:{post:{},reaction:{}},setup(t){const e=t,{publicUser:n,isOwner:r}=Qt(Qn()),{deleteBlogReaction:i}=Jn();return(s,o)=>(x(),ce(Rr,{class:Me(["p-5 mb-5 w-full md:w-3/4",e.post.colorTertiary||"",e.post.opacityTertiary||"bg-opacity-50"]),titleProps:{class:"!text-base mt-1"},title:e.reaction.user.displayName||"Unknown user",subTitle:k(J0)(new Date(e.reaction.date)),avatar:e.reaction.user.avatar,description:e.reaction.message},gr({_:2},[k(n)&&e.reaction.user.id===k(n).id||k(r)?{name:"right",fn:fe(()=>[J("div",KG,[e.post.locked?ne("",!0):(x(),ce(_t,{key:0,type:"danger",outlined:"",class:"h-fit",onClick:o[0]||(o[0]=a=>k(i)(e.reaction.id,e.post))},{default:fe(()=>[Qe(" Delete ")]),_:1}))])]),key:"0"}:void 0]),1032,["class","title","subTitle","avatar","description"]))}}),qG={class:"grid justify-items-center p-5"},XG=Ee({__name:"BlogReactions",props:{post:{}},setup(t){const e=t,{publicUser:n}=Qt(Qn()),r=Jn(),{content:i}=Qt(r),{createBlogReaction:s}=r,o=re(),a=On({reaction:{value:"",error:""}}),l=async()=>{await o.value.test(),!a.reaction.error&&n.value&&await s(e.post,{userId:n.value.id,postId:e.post.id,message:a.reaction.value,date:new Date})&&(a.reaction.value=""),s8()};return(u,c)=>(x(),z("form",{action:"",onSubmit:Mt(l,["prevent"])},[J("div",qG,[(x(!0),z(Ae,null,dt(u.post.reactions,d=>(x(),ce(GG,{post:u.post,reaction:d},null,8,["post","reaction"]))),256)),!k(n)||u.post.reactions.filter(d=>d.user.id===k(n).id).length<8?(x(),ce(Rr,{key:0,class:Me(["p-5 flex justify-center w-full md:w-3/4",u.post.colorTertiary||"bg-gray-700",u.post.opacityTertiary||"bg-opacity-50"])},{default:fe(()=>[ee(qn,{class:"w-5/6",id:u.post.id,inputProps:{class:["rounded-xl border-none !placeholder-gray-300",u.post.colorSecondary||u.post.colorPrimary||"bg-gray-600",u.post.opacitySecondary||"!bg-opacity-20",!u.post.locked&&k(n)?"hover:!bg-gray-700 focus:!bg-gray-600 focus:!text-white focus:!placeholder-gray-200":"!bg-gray-900 !bg-opacity-50"],disabled:!k(n)||u.post.locked},ref_key:"reaction",ref:o,name:"reaction",placeholder:u.post.locked?"Locked for comments":k(n)?"Reply":k(i).blogLoginGuest,modelValue:a.reaction.value,"onUpdate:modelValue":c[0]||(c[0]=d=>a.reaction.value=d),error:a.reaction.error,"onUpdate:error":c[1]||(c[1]=d=>a.reaction.error=d),rules:[k(kt).Required],onClick:c[2]||(c[2]=()=>!k(n)&&!u.post.locked?k(D1).push({name:"login"}):{})},null,8,["id","inputProps","placeholder","modelValue","error","rules"])]),_:1},8,["class"])):ne("",!0)])],32))}}),QG=Ee({__name:"BlogPostBullets",props:{bullets:{},alignment:{}},setup(t){return(e,n)=>(x(),z("div",null,[J("div",{class:Me({block:!e.alignment,flex:!!e.alignment,"justify-start":e.alignment==="left","justify-center":e.alignment==="center","justify-end":e.alignment==="right"})},[J("ul",{class:Me(["list-disc",{"ms-5":e.alignment==="left"}])},[(x(!0),z(Ae,null,dt(e.bullets,r=>(x(),z("li",null,Je(r),1))),256))],2)],2)]))}}),JG=["href"],ZG={class:"break-all"},eq={key:1},tq={key:2},Cf=Ee({__name:"BlogPostDescription",props:{class:{},description:{},alignment:{}},setup(t){const e=t,n=r=>{try{const i=new URL(r);return i.protocol==="http:"||i.protocol==="https:"}catch{return!1}};return(r,i)=>(x(!0),z(Ae,null,dt(e.description.split(`
`).map(s=>s.trim()),s=>(x(),z("div",{class:Me(["text-lg",e.class])},[J("div",{class:Me({block:!r.alignment,flex:!!r.alignment,"justify-start":r.alignment==="left","justify-center":r.alignment==="center","justify-end":r.alignment==="right"})},[n(s)?(x(),z("a",{key:0,href:s,class:"underline hover:no-underline"},[J("span",ZG,Je(s),1)],8,JG)):s?(x(),z("p",eq,Je(s),1)):(x(),z("br",tq))],2)],2))),256))}});/*!
 * Viewer.js v1.11.6
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:16:38.052Z
 */function NC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NC(Object(n),!0).forEach(function(r){iq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vw(t){"@babel/helpers - typeof";return vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vw(t)}function nq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_M(r.key),r)}}function rq(t,e,n){return e&&MC(t.prototype,e),n&&MC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function iq(t,e,n){return e=_M(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sq(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _M(t){var e=sq(t,"string");return typeof e=="symbol"?e:String(e)}var $C={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},oq='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',Bg=typeof window<"u"&&typeof window.document<"u",Js=Bg?window:{},yu=Bg&&Js.document.documentElement?"ontouchstart"in Js.document.documentElement:!1,g1=Bg?"PointerEvent"in Js:!1,mt="viewer",tp="move",TM="switch",Bc="zoom",If="".concat(mt,"-active"),aq="".concat(mt,"-close"),np="".concat(mt,"-fade"),yw="".concat(mt,"-fixed"),lq="".concat(mt,"-fullscreen"),LC="".concat(mt,"-fullscreen-exit"),ga="".concat(mt,"-hide"),uq="".concat(mt,"-hide-md-down"),cq="".concat(mt,"-hide-sm-down"),dq="".concat(mt,"-hide-xs-down"),Ti="".concat(mt,"-in"),cd="".concat(mt,"-invisible"),wu="".concat(mt,"-loading"),hq="".concat(mt,"-move"),UC="".concat(mt,"-open"),kl="".concat(mt,"-show"),An="".concat(mt,"-transition"),Vu="click",ww="dblclick",FC="dragstart",VC="focusin",BC="keydown",Ii="load",Ra="error",fq=yu?"touchend touchcancel":"mouseup",pq=yu?"touchmove":"mousemove",mq=yu?"touchstart":"mousedown",jC=g1?"pointerdown":mq,HC=g1?"pointermove":pq,WC=g1?"pointerup pointercancel":fq,YC="resize",Li="transitionend",zC="wheel",KC="ready",GC="show",qC="shown",XC="hide",QC="hidden",JC="view",Jd="viewed",ZC="move",eI="moved",tI="rotate",nI="rotated",rI="scale",iI="scaled",sI="zoom",oI="zoomed",aI="play",lI="stop",um="".concat(mt,"Action"),v1=/\s\s*/,Af=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function Zd(t){return typeof t=="string"}var gq=Number.isNaN||Js.isNaN;function Tn(t){return typeof t=="number"&&!gq(t)}function ql(t){return typeof t>"u"}function Bu(t){return vw(t)==="object"&&t!==null}var vq=Object.prototype.hasOwnProperty;function Xl(t){if(!Bu(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&vq.call(n,"isPrototypeOf")}catch{return!1}}function nn(t){return typeof t=="function"}function on(t,e){if(t&&nn(e))if(Array.isArray(t)||Tn(t.length)){var n=t.length,r;for(r=0;r<n&&e.call(t,t[r],r,t)!==!1;r+=1);}else Bu(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)});return t}var hi=Object.assign||function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Bu(e)&&r.length>0&&r.forEach(function(s){Bu(s)&&Object.keys(s).forEach(function(o){e[o]=s[o]})}),e},yq=/^(?:width|height|left|top|marginLeft|marginTop)$/;function Hi(t,e){var n=t.style;on(e,function(r,i){yq.test(i)&&Tn(r)&&(r+="px"),n[i]=r})}function wq(t){return Zd(t)?t.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function Bl(t,e){return!t||!e?!1:t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function st(t,e){if(!(!t||!e)){if(Tn(t.length)){on(t,function(r){st(r,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function Ft(t,e){if(!(!t||!e)){if(Tn(t.length)){on(t,function(n){Ft(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function eh(t,e,n){if(e){if(Tn(t.length)){on(t,function(r){eh(r,e,n)});return}n?st(t,e):Ft(t,e)}}var bq=/([a-z\d])([A-Z])/g;function y1(t){return t.replace(bq,"$1-$2").toLowerCase()}function Ql(t,e){return Bu(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(y1(e)))}function bw(t,e,n){Bu(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(y1(e)),n)}var EM=function(){var t=!1;if(Bg){var e=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(s){e=s}});Js.addEventListener("test",n,r),Js.removeEventListener("test",n,r)}return t}();function rn(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(v1).forEach(function(s){if(!EM){var o=t.listeners;o&&o[s]&&o[s][n]&&(i=o[s][n],delete o[s][n],Object.keys(o[s]).length===0&&delete o[s],Object.keys(o).length===0&&delete t.listeners)}t.removeEventListener(s,i,r)})}function ct(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(v1).forEach(function(s){if(r.once&&!EM){var o=t.listeners,a=o===void 0?{}:o;i=function(){delete a[s][n],t.removeEventListener(s,i,r);for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];n.apply(t,c)},a[s]||(a[s]={}),a[s][n]&&t.removeEventListener(s,a[s][n],r),a[s][n]=i,t.listeners=a}t.addEventListener(s,i,r)})}function Nn(t,e,n,r){var i;return nn(Event)&&nn(CustomEvent)?i=new CustomEvent(e,m1({bubbles:!0,cancelable:!0,detail:n},r)):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(i)}function _q(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function rp(t){var e=t.rotate,n=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,o=[];Tn(i)&&i!==0&&o.push("translateX(".concat(i,"px)")),Tn(s)&&s!==0&&o.push("translateY(".concat(s,"px)")),Tn(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),Tn(n)&&n!==1&&o.push("scaleX(".concat(n,")")),Tn(r)&&r!==1&&o.push("scaleY(".concat(r,")"));var a=o.length?o.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function Tq(t){return Zd(t)?decodeURIComponent(t.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var ny=Js.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(Js.navigator.userAgent);function SM(t,e,n){var r=document.createElement("img");if(t.naturalWidth&&!ny)return n(t.naturalWidth,t.naturalHeight),r;var i=document.body||document.documentElement;return r.onload=function(){n(r.width,r.height),ny||i.removeChild(r)},on(e.inheritedAttributes,function(s){var o=t.getAttribute(s);o!==null&&r.setAttribute(s,o)}),r.src=t.src,ny||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i.appendChild(r)),r}function kf(t){switch(t){case 2:return dq;case 3:return cq;case 4:return uq;default:return""}}function Eq(t){var e=m1({},t),n=[];return on(t,function(r,i){delete e[i],on(e,function(s){var o=Math.abs(r.startX-s.startX),a=Math.abs(r.startY-s.startY),l=Math.abs(r.endX-s.endX),u=Math.abs(r.endY-s.endY),c=Math.sqrt(o*o+a*a),d=Math.sqrt(l*l+u*u),h=(d-c)/c;n.push(h)})}),n.sort(function(r,i){return Math.abs(r)<Math.abs(i)}),n[0]}function Df(t,e){var n=t.pageX,r=t.pageY,i={endX:n,endY:r};return e?i:m1({timeStamp:Date.now(),startX:n,startY:r},i)}function Sq(t){var e=0,n=0,r=0;return on(t,function(i){var s=i.startX,o=i.startY;e+=s,n+=o,r+=1}),e/=r,n/=r,{pageX:e,pageY:n}}var Cq={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,n=e.body||e.documentElement;this.body=n,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=n.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(n).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e=this.options,n=this.parent,r;e.inline&&(r={width:Math.max(n.offsetWidth,e.minWidth),height:Math.max(n.offsetHeight,e.minHeight)},this.parentData=r),(this.fulled||!r)&&(r=this.containerData),this.viewerData=hi({},r)},renderViewer:function(){this.options.inline&&!this.fulled&&Hi(this.viewer,this.viewerData)},initList:function(){var e=this,n=this.element,r=this.options,i=this.list,s=[];i.innerHTML="",on(this.images,function(o,a){var l=o.src,u=o.alt||Tq(l),c=e.getImageURL(o);if(l||c){var d=document.createElement("li"),h=document.createElement("img");on(r.inheritedAttributes,function(f){var p=o.getAttribute(f);p!==null&&h.setAttribute(f,p)}),r.navbar&&(h.src=l||c),h.alt=u,h.setAttribute("data-original-url",c||l),d.setAttribute("data-index",a),d.setAttribute("data-viewer-action","view"),d.setAttribute("role","button"),r.keyboard&&d.setAttribute("tabindex",0),d.appendChild(h),i.appendChild(d),s.push(d)}}),this.items=s,on(s,function(o){var a=o.firstElementChild,l,u;bw(a,"filled",!0),r.loading&&st(o,wu),ct(a,Ii,l=function(d){rn(a,Ra,u),r.loading&&Ft(o,wu),e.loadImage(d)},{once:!0}),ct(a,Ra,u=function(){rn(a,Ii,l),r.loading&&Ft(o,wu)},{once:!0})}),r.transition&&ct(n,Jd,function(){st(i,An)},{once:!0})},renderList:function(){var e=this.index,n=this.items[e];if(n){var r=n.nextElementSibling,i=parseInt(window.getComputedStyle(r||n).marginLeft,10),s=n.offsetWidth,o=s+i;Hi(this.list,hi({width:o*this.length-i},rp({translateX:(this.viewerData.width-s)/2-o*e})))}},resetList:function(){var e=this.list;e.innerHTML="",Ft(e,An),Hi(e,rp({translateX:0}))},initImage:function(e){var n=this,r=this.options,i=this.image,s=this.viewerData,o=this.footer.offsetHeight,a=s.width,l=Math.max(s.height-o,o),u=this.imageData||{},c;this.imageInitializing={abort:function(){c.onload=null}},c=SM(i,r,function(d,h){var f=d/h,p=Math.max(0,Math.min(1,r.initialCoverage)),m=a,v=l;n.imageInitializing=!1,l*f>a?v=a/f:m=l*f,p=Tn(p)?p:.9,m=Math.min(m*p,d),v=Math.min(v*p,h);var b=(a-m)/2,g=(l-v)/2,_={left:b,top:g,x:b,y:g,width:m,height:v,oldRatio:1,ratio:m/d,aspectRatio:f,naturalWidth:d,naturalHeight:h},y=hi({},_);r.rotatable&&(_.rotate=u.rotate||0,y.rotate=0),r.scalable&&(_.scaleX=u.scaleX||1,_.scaleY=u.scaleY||1,y.scaleX=1,y.scaleY=1),n.imageData=_,n.initialImageData=y,e&&e()})},renderImage:function(e){var n=this,r=this.image,i=this.imageData;if(Hi(r,hi({width:i.width,height:i.height,marginLeft:i.x,marginTop:i.y},rp(i))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&Bl(r,An)){var s=function(){n.imageRendering=!1,e()};this.imageRendering={abort:function(){rn(r,Li,s)}},ct(r,Li,s,{once:!0})}else e()},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},Iq={bind:function(){var e=this.options,n=this.viewer,r=this.canvas,i=this.element.ownerDocument;ct(n,Vu,this.onClick=this.click.bind(this)),ct(n,FC,this.onDragStart=this.dragstart.bind(this)),ct(r,jC,this.onPointerDown=this.pointerdown.bind(this)),ct(i,HC,this.onPointerMove=this.pointermove.bind(this)),ct(i,WC,this.onPointerUp=this.pointerup.bind(this)),ct(i,BC,this.onKeyDown=this.keydown.bind(this)),ct(window,YC,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&ct(n,zC,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&ct(r,ww,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,n=this.viewer,r=this.canvas,i=this.element.ownerDocument;rn(n,Vu,this.onClick),rn(n,FC,this.onDragStart),rn(r,jC,this.onPointerDown),rn(i,HC,this.onPointerMove),rn(i,WC,this.onPointerUp),rn(i,BC,this.onKeyDown),rn(window,YC,this.onResize),e.zoomable&&e.zoomOnWheel&&rn(n,zC,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&rn(r,ww,this.onDblclick)}},Aq={click:function(e){var n=this.options,r=this.imageData,i=e.target,s=Ql(i,um);switch(!s&&i.localName==="img"&&i.parentElement.localName==="li"&&(i=i.parentElement,s=Ql(i,um)),yu&&e.isTrusted&&i===this.canvas&&clearTimeout(this.clickCanvasTimeout),s){case"mix":this.played?this.stop():n.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(Ql(i,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(n.loop);break;case"play":this.play(n.fullscreen);break;case"next":this.next(n.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-r.scaleX||-1);break;case"flip-vertical":this.scaleY(-r.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(yu&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var n=this.element,r=this.options,i=this.image,s=this.index,o=this.viewerData;Ft(i,cd),r.loading&&Ft(this.canvas,wu),i.style.cssText="height:0;"+"margin-left:".concat(o.width/2,"px;")+"margin-top:".concat(o.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){eh(i,hq,r.movable),eh(i,An,r.transition),e.renderImage(function(){e.viewed=!0,e.viewing=!1,nn(r.viewed)&&ct(n,Jd,r.viewed,{once:!0}),Nn(n,Jd,{originalImage:e.images[s],index:s,image:i},{cancelable:!1})})})},loadImage:function(e){var n=e.target,r=n.parentNode,i=r.offsetWidth||30,s=r.offsetHeight||50,o=!!Ql(n,"filled");SM(n,this.options,function(a,l){var u=a/l,c=i,d=s;s*u>i?o?c=s*u:d=i/u:o?d=i/u:c=s*u,Hi(n,hi({width:c,height:d},rp({translateX:(i-c)/2,translateY:(s-d)/2})))})},keydown:function(e){var n=this.options;if(n.keyboard){var r=e.keyCode||e.which||e.charCode;switch(r){case 13:this.viewer.contains(e.target)&&this.click(e);break}if(this.fulled)switch(r){case 27:this.played?this.stop():n.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(n.loop);break;case 38:e.preventDefault(),this.zoom(n.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(n.loop);break;case 40:e.preventDefault(),this.zoom(-n.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle());break}}},dragstart:function(e){e.target.localName==="img"&&e.preventDefault()},pointerdown:function(e){var n=this.options,r=this.pointers,i=e.buttons,s=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Tn(i)&&i!==1||Tn(s)&&s!==0||e.ctrlKey))){e.preventDefault(),e.changedTouches?on(e.changedTouches,function(a){r[a.identifier]=Df(a)}):r[e.pointerId||0]=Df(e);var o=n.movable?tp:!1;n.zoomOnTouch&&n.zoomable&&Object.keys(r).length>1?o=Bc:n.slideOnTouch&&(e.pointerType==="touch"||e.type==="touchstart")&&this.isSwitchable()&&(o=TM),n.transition&&(o===tp||o===Bc)&&Ft(this.image,An),this.action=o}},pointermove:function(e){var n=this.pointers,r=this.action;!this.viewed||!r||(e.preventDefault(),e.changedTouches?on(e.changedTouches,function(i){hi(n[i.identifier]||{},Df(i,!0))}):hi(n[e.pointerId||0]||{},Df(e,!0)),this.change(e))},pointerup:function(e){var n=this,r=this.options,i=this.action,s=this.pointers,o;e.changedTouches?on(e.changedTouches,function(a){o=s[a.identifier],delete s[a.identifier]}):(o=s[e.pointerId||0],delete s[e.pointerId||0]),i&&(e.preventDefault(),r.transition&&(i===tp||i===Bc)&&st(this.image,An),this.action=!1,yu&&i!==Bc&&o&&Date.now()-o.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),r.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){Nn(n.image,ww,{originalEvent:e})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){n.imageClicked=!1},500)):(this.imageClicked=!1,r.backdrop&&r.backdrop!=="static"&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){Nn(n.canvas,Vu,{originalEvent:e})},50)))))},resize:function(){var e=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}on(this.player.getElementsByTagName("img"),function(n){ct(n,Ii,e.loadImage.bind(e),{once:!0}),Nn(n,Ii)})}},wheel:function(e){var n=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50);var r=Number(this.options.zoomRatio)||.1,i=1;e.deltaY?i=e.deltaY>0?1:-1:e.wheelDelta?i=-e.wheelDelta/120:e.detail&&(i=e.detail>0?1:-1),this.zoom(-i*r,!0,null,e)}}},kq={show:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.element,r=this.options;if(r.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(nn(r.show)&&ct(n,GC,r.show,{once:!0}),Nn(n,GC)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var i=this.viewer;if(Ft(i,ga),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",this.title.id),i.setAttribute("aria-modal",!0),i.removeAttribute("aria-hidden"),r.transition&&!e){var s=this.shown.bind(this);this.transitioning={abort:function(){rn(i,Li,s),Ft(i,Ti)}},st(i,An),i.initialOffsetWidth=i.offsetWidth,ct(i,Li,s,{once:!0}),st(i,Ti)}else st(i,Ti),this.shown();return this},hide:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.element,i=this.options;if(i.inline||this.hiding||!(this.isShown||this.showing))return this;if(nn(i.hide)&&ct(r,XC,i.hide,{once:!0}),Nn(r,XC)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var s=this.viewer,o=this.image,a=function(){Ft(s,Ti),e.hidden()};if(i.transition&&!n){var l=function c(d){d&&d.target===s&&(rn(s,Li,c),e.hidden())},u=function(){Bl(s,An)?(ct(s,Li,l),Ft(s,Ti)):a()};this.transitioning={abort:function(){e.viewed&&Bl(o,An)?rn(o,Li,u):Bl(s,An)&&rn(s,Li,l)}},this.viewed&&Bl(o,An)?(ct(o,Li,u,{once:!0}),this.zoomTo(0,!1,null,null,!0)):u()}else a();return this},view:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(n=Number(n)||0,this.hiding||this.played||n<0||n>=this.length||this.viewed&&n===this.index)return this;if(!this.isShown)return this.index=n,this.show();this.viewing&&this.viewing.abort();var r=this.element,i=this.options,s=this.title,o=this.canvas,a=this.items[n],l=a.querySelector("img"),u=Ql(l,"originalUrl"),c=l.getAttribute("alt"),d=document.createElement("img");if(on(i.inheritedAttributes,function(v){var b=l.getAttribute(v);b!==null&&d.setAttribute(v,b)}),d.src=u,d.alt=c,nn(i.view)&&ct(r,JC,i.view,{once:!0}),Nn(r,JC,{originalImage:this.images[n],index:n,image:d})===!1||!this.isShown||this.hiding||this.played)return this;var h=this.items[this.index];h&&(Ft(h,If),h.removeAttribute("aria-selected")),st(a,If),a.setAttribute("aria-selected",!0),i.focus&&a.focus(),this.image=d,this.viewed=!1,this.index=n,this.imageData={},st(d,cd),i.loading&&st(o,wu),o.innerHTML="",o.appendChild(d),this.renderList(),s.innerHTML="";var f=function(){var b=e.imageData,g=Array.isArray(i.title)?i.title[1]:i.title;s.innerHTML=wq(nn(g)?g.call(e,d,b):"".concat(c," (").concat(b.naturalWidth,"  ").concat(b.naturalHeight,")"))},p,m;return ct(r,Jd,f,{once:!0}),this.viewing={abort:function(){rn(r,Jd,f),d.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(d.src="",rn(d,Ii,p),e.timeout&&clearTimeout(e.timeout))}},d.complete?this.load():(ct(d,Ii,p=function(){rn(d,Ra,m),e.load()},{once:!0}),ct(d,Ra,m=function(){rn(d,Ii,p),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),Ft(d,cd),i.loading&&Ft(e.canvas,wu)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){Ft(d,cd),e.timeout=!1},1e3)),this},prev:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.index-1;return n<0&&(n=e?this.length-1:0),this.view(n),this},next:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.length-1,r=this.index+1;return r>n&&(r=e?0:n),this.view(r),this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.imageData;return this.moveTo(ql(e)?e:r.x+Number(e),ql(n)?n:r.y+Number(n)),this},moveTo:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=this.element,o=this.options,a=this.imageData;if(e=Number(e),r=Number(r),this.viewed&&!this.played&&o.movable){var l=a.x,u=a.y,c=!1;if(Tn(e)?c=!0:e=l,Tn(r)?c=!0:r=u,c){if(nn(o.move)&&ct(s,ZC,o.move,{once:!0}),Nn(s,ZC,{x:e,y:r,oldX:l,oldY:u,originalEvent:i})===!1)return this;a.x=e,a.y=r,a.left=e,a.top=r,this.moving=!0,this.renderImage(function(){n.moving=!1,nn(o.moved)&&ct(s,eI,o.moved,{once:!0}),Nn(s,eI,{x:e,y:r,oldX:l,oldY:u,originalEvent:i},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var n=this,r=this.element,i=this.options,s=this.imageData;if(e=Number(e),Tn(e)&&this.viewed&&!this.played&&i.rotatable){var o=s.rotate;if(nn(i.rotate)&&ct(r,tI,i.rotate,{once:!0}),Nn(r,tI,{degree:e,oldDegree:o})===!1)return this;s.rotate=e,this.rotating=!0,this.renderImage(function(){n.rotating=!1,nn(i.rotated)&&ct(r,nI,i.rotated,{once:!0}),Nn(r,nI,{degree:e,oldDegree:o},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.element,s=this.options,o=this.imageData;if(e=Number(e),r=Number(r),this.viewed&&!this.played&&s.scalable){var a=o.scaleX,l=o.scaleY,u=!1;if(Tn(e)?u=!0:e=a,Tn(r)?u=!0:r=l,u){if(nn(s.scale)&&ct(i,rI,s.scale,{once:!0}),Nn(i,rI,{scaleX:e,scaleY:r,oldScaleX:a,oldScaleY:l})===!1)return this;o.scaleX=e,o.scaleY=r,this.scaling=!0,this.renderImage(function(){n.scaling=!1,nn(s.scaled)&&ct(i,iI,s.scaled,{once:!0}),Nn(i,iI,{scaleX:e,scaleY:r,oldScaleX:a,oldScaleY:l},{cancelable:!1})})}}return this},zoom:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=this.imageData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(s.width*e/s.naturalWidth,n,r,i),this},zoomTo:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this.element,l=this.options,u=this.pointers,c=this.imageData,d=c.x,h=c.y,f=c.width,p=c.height,m=c.naturalWidth,v=c.naturalHeight;if(e=Math.max(0,e),Tn(e)&&this.viewed&&!this.played&&(o||l.zoomable)){if(!o){var b=Math.max(.01,l.minZoomRatio),g=Math.min(100,l.maxZoomRatio);e=Math.min(Math.max(e,b),g)}if(s)switch(s.type){case"wheel":l.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1);break}var _=m*e,y=v*e,w=_-f,T=y-p,P=c.ratio;if(nn(l.zoom)&&ct(a,sI,l.zoom,{once:!0}),Nn(a,sI,{ratio:e,oldRatio:P,originalEvent:s})===!1)return this;if(this.zooming=!0,s){var A=_q(this.viewer),I=u&&Object.keys(u).length>0?Sq(u):{pageX:s.pageX,pageY:s.pageY};c.x-=w*((I.pageX-A.left-d)/f),c.y-=T*((I.pageY-A.top-h)/p)}else Xl(i)&&Tn(i.x)&&Tn(i.y)?(c.x-=w*((i.x-d)/f),c.y-=T*((i.y-h)/p)):(c.x-=w/2,c.y-=T/2);c.left=c.x,c.top=c.y,c.width=_,c.height=y,c.oldRatio=P,c.ratio=e,this.renderImage(function(){n.zooming=!1,nn(l.zoomed)&&ct(a,oI,l.zoomed,{once:!0}),Nn(a,oI,{ratio:e,oldRatio:P,originalEvent:s},{cancelable:!1})}),r&&this.tooltip()}return this},play:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var r=this.element,i=this.options;if(nn(i.play)&&ct(r,aI,i.play,{once:!0}),Nn(r,aI)===!1)return this;var s=this.player,o=this.loadImage.bind(this),a=[],l=0,u=0;if(this.played=!0,this.onLoadWhenPlay=o,n&&this.requestFullscreen(n),st(s,kl),on(this.items,function(h,f){var p=h.querySelector("img"),m=document.createElement("img");m.src=Ql(p,"originalUrl"),m.alt=p.getAttribute("alt"),m.referrerPolicy=p.referrerPolicy,l+=1,st(m,np),eh(m,An,i.transition),Bl(h,If)&&(st(m,Ti),u=f),a.push(m),ct(m,Ii,o,{once:!0}),s.appendChild(m)}),Tn(i.interval)&&i.interval>0){var c=function h(){clearTimeout(e.playing.timeout),Ft(a[u],Ti),u-=1,u=u>=0?u:l-1,st(a[u],Ti),e.playing.timeout=setTimeout(h,i.interval)},d=function h(){clearTimeout(e.playing.timeout),Ft(a[u],Ti),u+=1,u=u<l?u:0,st(a[u],Ti),e.playing.timeout=setTimeout(h,i.interval)};l>1&&(this.playing={prev:c,next:d,timeout:setTimeout(d,i.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var n=this.element,r=this.options;if(nn(r.stop)&&ct(n,lI,r.stop,{once:!0}),Nn(n,lI)===!1)return this;var i=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,on(i.getElementsByTagName("img"),function(s){rn(s,Ii,e.onLoadWhenPlay)}),Ft(i,kl),i.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,n=this.options,r=this.viewer,i=this.image,s=this.list;return!this.isShown||this.played||this.fulled||!n.inline?this:(this.fulled=!0,this.open(),st(this.button,LC),n.transition&&(Ft(s,An),this.viewed&&Ft(i,An)),st(r,yw),r.setAttribute("role","dialog"),r.setAttribute("aria-labelledby",this.title.id),r.setAttribute("aria-modal",!0),r.removeAttribute("style"),Hi(r,{zIndex:n.zIndex}),n.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=hi({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){st(i,An),st(s,An)},0)})}),this)},exit:function(){var e=this,n=this.options,r=this.viewer,i=this.image,s=this.list;return!this.isShown||this.played||!this.fulled||!n.inline?this:(this.fulled=!1,this.close(),Ft(this.button,LC),n.transition&&(Ft(s,An),this.viewed&&Ft(i,An)),n.focus&&this.clearEnforceFocus(),r.removeAttribute("role"),r.removeAttribute("aria-labelledby"),r.removeAttribute("aria-modal"),Ft(r,yw),Hi(r,{zIndex:n.zIndexInline}),this.viewerData=hi({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){st(i,An),st(s,An)},0)})}),this)},tooltip:function(){var e=this,n=this.options,r=this.tooltipBox,i=this.imageData;return!this.viewed||this.played||!n.tooltip?this:(r.textContent="".concat(Math.round(i.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):n.transition?(this.fading&&Nn(r,Li),st(r,kl),st(r,np),st(r,An),r.removeAttribute("aria-hidden"),r.initialOffsetWidth=r.offsetWidth,st(r,Ti)):(st(r,kl),r.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){n.transition?(ct(r,Li,function(){Ft(r,kl),Ft(r,np),Ft(r,An),r.setAttribute("aria-hidden",!0),e.fading=!1},{once:!0}),Ft(r,Ti),e.fading=!0):(Ft(r,kl),r.setAttribute("aria-hidden",!0)),e.tooltipping=!1},1e3),this)},toggle:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=hi({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,n=this.element,r=this.options,i=this.isImg;if(i&&!n.parentNode)return this.destroy();var s=[];if(on(i?[n]:n.querySelectorAll("img"),function(u){nn(r.filter)?r.filter.call(e,u)&&s.push(u):e.getImageURL(u)&&s.push(u)}),!s.length)return this;if(this.images=s,this.length=s.length,this.ready){var o=[];if(on(this.items,function(u,c){var d=u.querySelector("img"),h=s[c];h&&d?(h.src!==d.src||h.alt!==d.alt)&&o.push(c):o.push(c)}),Hi(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var a=o.indexOf(this.index);if(a>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-a,this.length-1),0));else{var l=this.items[this.index];st(l,If),l.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,n=this.options;return e[mt]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),n.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):n.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),n.inline||rn(e,Vu,this.onStart),e[mt]=void 0,this):this}},Dq={getImageURL:function(e){var n=this.options.url;return Zd(n)?n=e.getAttribute(n):nn(n)?n=n.call(this,e):n="",n},enforceFocus:function(){var e=this;this.clearEnforceFocus(),ct(document,VC,this.onFocusin=function(n){var r=e.viewer,i=n.target;if(!(i===document||i===r||r.contains(i))){for(;i;){if(i.getAttribute("tabindex")!==null||i.getAttribute("aria-modal")==="true")return;i=i.parentElement}r.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(rn(document,VC,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;st(e,UC),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;Ft(e,UC),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,n=this.options,r=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,n.focus&&(r.focus(),this.enforceFocus()),nn(n.shown)&&ct(e,qC,n.shown,{once:!0}),Nn(e,qC)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,n=this.options,r=this.viewer;n.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),st(r,ga),r.removeAttribute("role"),r.removeAttribute("aria-labelledby"),r.removeAttribute("aria-modal"),r.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(nn(n.hidden)&&ct(e,QC,n.hidden,{once:!0}),Nn(e,QC,null,{cancelable:!1}))},requestFullscreen:function(e){var n=this.element.ownerDocument;if(this.fulled&&!(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)){var r=n.documentElement;r.requestFullscreen?Xl(e)?r.requestFullscreen(e):r.requestFullscreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen&&r.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var n=this.options,r=this.pointers,i=r[Object.keys(r)[0]];if(i){var s=i.endX-i.startX,o=i.endY-i.startY;switch(this.action){case tp:(s!==0||o!==0)&&(this.pointerMoved=!0,this.move(s,o,e));break;case Bc:this.zoom(Eq(r),!1,null,e);break;case TM:{this.action="switched";var a=Math.abs(s);a>1&&a>Math.abs(o)&&(this.pointers={},s>1?this.prev(n.loop):s<-1&&this.next(n.loop));break}}on(r,function(l){l.startX=l.endX,l.startY=l.endY})}},isSwitchable:function(){var e=this.imageData,n=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=n.width&&e.height<=n.height}},xq=Js.Viewer,Pq=function(t){return function(){return t+=1,t}}(-1),ju=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(nq(this,t),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=hi({},$C,Xl(n)&&n),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=Pq(),this.init()}return rq(t,[{key:"init",value:function(){var n=this,r=this.element,i=this.options;if(!r[mt]){r[mt]=this,i.focus&&!i.keyboard&&(i.focus=!1);var s=r.localName==="img",o=[];if(on(s?[r]:r.querySelectorAll("img"),function(u){nn(i.filter)?i.filter.call(n,u)&&o.push(u):n.getImageURL(u)&&o.push(u)}),this.isImg=s,this.length=o.length,this.images=o,this.initBody(),ql(document.createElement(mt).style.transition)&&(i.transition=!1),i.inline){var a=0,l=function(){if(a+=1,a===n.length){var c;n.initializing=!1,n.delaying={abort:function(){clearTimeout(c)}},c=setTimeout(function(){n.delaying=!1,n.build()},0)}};this.initializing={abort:function(){on(o,function(c){c.complete||(rn(c,Ii,l),rn(c,Ra,l))})}},on(o,function(u){if(u.complete)l();else{var c,d;ct(u,Ii,c=function(){rn(u,Ra,d),l()},{once:!0}),ct(u,Ra,d=function(){rn(u,Ii,c),l()},{once:!0})}})}else ct(r,Vu,this.onStart=function(u){var c=u.target;c.localName==="img"&&(!nn(i.filter)||i.filter.call(n,c))&&n.view(n.images.indexOf(c))})}}},{key:"build",value:function(){if(!this.ready){var n=this.element,r=this.options,i=n.parentNode,s=document.createElement("div");s.innerHTML=oq;var o=s.querySelector(".".concat(mt,"-container")),a=o.querySelector(".".concat(mt,"-title")),l=o.querySelector(".".concat(mt,"-toolbar")),u=o.querySelector(".".concat(mt,"-navbar")),c=o.querySelector(".".concat(mt,"-button")),d=o.querySelector(".".concat(mt,"-canvas"));if(this.parent=i,this.viewer=o,this.title=a,this.toolbar=l,this.navbar=u,this.button=c,this.canvas=d,this.footer=o.querySelector(".".concat(mt,"-footer")),this.tooltipBox=o.querySelector(".".concat(mt,"-tooltip")),this.player=o.querySelector(".".concat(mt,"-player")),this.list=o.querySelector(".".concat(mt,"-list")),o.id="".concat(mt).concat(this.id),a.id="".concat(mt,"Title").concat(this.id),st(a,r.title?kf(Array.isArray(r.title)?r.title[0]:r.title):ga),st(u,r.navbar?kf(r.navbar):ga),eh(c,ga,!r.button),r.keyboard&&c.setAttribute("tabindex",0),r.backdrop&&(st(o,"".concat(mt,"-backdrop")),!r.inline&&r.backdrop!=="static"&&bw(d,um,"hide")),Zd(r.className)&&r.className&&r.className.split(v1).forEach(function(_){st(o,_)}),r.toolbar){var h=document.createElement("ul"),f=Xl(r.toolbar),p=Af.slice(0,3),m=Af.slice(7,9),v=Af.slice(9);f||st(l,kf(r.toolbar)),on(f?r.toolbar:Af,function(_,y){var w=f&&Xl(_),T=f?y1(y):_,P=w&&!ql(_.show)?_.show:_;if(!(!P||!r.zoomable&&p.indexOf(T)!==-1||!r.rotatable&&m.indexOf(T)!==-1||!r.scalable&&v.indexOf(T)!==-1)){var A=w&&!ql(_.size)?_.size:_,I=w&&!ql(_.click)?_.click:_,E=document.createElement("li");r.keyboard&&E.setAttribute("tabindex",0),E.setAttribute("role","button"),st(E,"".concat(mt,"-").concat(T)),nn(I)||bw(E,um,T),Tn(P)&&st(E,kf(P)),["small","large"].indexOf(A)!==-1?st(E,"".concat(mt,"-").concat(A)):T==="play"&&st(E,"".concat(mt,"-large")),nn(I)&&ct(E,Vu,I),h.appendChild(E)}}),l.appendChild(h)}else st(l,ga);if(!r.rotatable){var b=l.querySelectorAll('li[class*="rotate"]');st(b,cd),on(b,function(_){l.appendChild(_)})}if(r.inline)st(c,lq),Hi(o,{zIndex:r.zIndexInline}),window.getComputedStyle(i).position==="static"&&Hi(i,{position:"relative"}),i.insertBefore(o,n.nextSibling);else{st(c,aq),st(o,yw),st(o,np),st(o,ga),Hi(o,{zIndex:r.zIndex});var g=r.container;Zd(g)&&(g=n.ownerDocument.querySelector(g)),g||(g=this.body),g.appendChild(o)}if(r.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,nn(r.ready)&&ct(n,KC,r.ready,{once:!0}),Nn(n,KC)===!1){this.ready=!1;return}this.ready&&r.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=xq,t}},{key:"setDefaults",value:function(n){hi($C,Xl(n)&&n)}}]),t}();hi(ju.prototype,Cq,Iq,Aq,kq,Dq);var Rq=typeof global=="object"&&global&&global.Object===Object&&global;const CM=Rq;var Oq=typeof self=="object"&&self&&self.Object===Object&&self,Nq=CM||Oq||Function("return this")();const jg=Nq;var Mq=jg.Symbol;const cm=Mq;var IM=Object.prototype,$q=IM.hasOwnProperty,Lq=IM.toString,_c=cm?cm.toStringTag:void 0;function Uq(t){var e=$q.call(t,_c),n=t[_c];try{t[_c]=void 0;var r=!0}catch{}var i=Lq.call(t);return r&&(e?t[_c]=n:delete t[_c]),i}var Fq=Object.prototype,Vq=Fq.toString;function Bq(t){return Vq.call(t)}var jq="[object Null]",Hq="[object Undefined]",uI=cm?cm.toStringTag:void 0;function Hg(t){return t==null?t===void 0?Hq:jq:uI&&uI in Object(t)?Uq(t):Bq(t)}function Wg(t){return t!=null&&typeof t=="object"}var Wq="[object Symbol]";function Yq(t){return typeof t=="symbol"||Wg(t)&&Hg(t)==Wq}var zq=Array.isArray;const Kq=zq;var Gq=/\s/;function qq(t){for(var e=t.length;e--&&Gq.test(t.charAt(e)););return e}var Xq=/^\s+/;function Qq(t){return t&&t.slice(0,qq(t)+1).replace(Xq,"")}function rl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var cI=NaN,Jq=/^[-+]0x[0-9a-f]+$/i,Zq=/^0b[01]+$/i,eX=/^0o[0-7]+$/i,tX=parseInt;function dI(t){if(typeof t=="number")return t;if(Yq(t))return cI;if(rl(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=rl(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Qq(t);var n=Zq.test(t);return n||eX.test(t)?tX(t.slice(2),n?2:8):Jq.test(t)?cI:+t}function AM(t){return t}var nX="[object AsyncFunction]",rX="[object Function]",iX="[object GeneratorFunction]",sX="[object Proxy]";function kM(t){if(!rl(t))return!1;var e=Hg(t);return e==rX||e==iX||e==nX||e==sX}var oX=jg["__core-js_shared__"];const ry=oX;var hI=function(){var t=/[^.]+$/.exec(ry&&ry.keys&&ry.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function aX(t){return!!hI&&hI in t}var lX=Function.prototype,uX=lX.toString;function cX(t){if(t!=null){try{return uX.call(t)}catch{}try{return t+""}catch{}}return""}var dX=/[\\^$.*+?()[\]{}|]/g,hX=/^\[object .+?Constructor\]$/,fX=Function.prototype,pX=Object.prototype,mX=fX.toString,gX=pX.hasOwnProperty,vX=RegExp("^"+mX.call(gX).replace(dX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yX(t){if(!rl(t)||aX(t))return!1;var e=kM(t)?vX:hX;return e.test(cX(t))}function wX(t,e){return t==null?void 0:t[e]}function bX(t,e){var n=wX(t,e);return yX(n)?n:void 0}function _X(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var TX=800,EX=16,SX=Date.now;function CX(t){var e=0,n=0;return function(){var r=SX(),i=EX-(r-n);if(n=r,i>0){if(++e>=TX)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function IX(t){return function(){return t}}var AX=function(){try{var t=bX(Object,"defineProperty");return t({},"",{}),t}catch{}}();const dm=AX;var kX=dm?function(t,e){return dm(t,"toString",{configurable:!0,enumerable:!1,value:IX(e),writable:!0})}:AM;const DX=kX;var xX=CX(DX);const PX=xX;var RX=9007199254740991,OX=/^(?:0|[1-9]\d*)$/;function DM(t,e){var n=typeof t;return e=e??RX,!!e&&(n=="number"||n!="symbol"&&OX.test(t))&&t>-1&&t%1==0&&t<e}function xM(t,e,n){e=="__proto__"&&dm?dm(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function w1(t,e){return t===e||t!==t&&e!==e}var NX=Object.prototype,MX=NX.hasOwnProperty;function PM(t,e,n){var r=t[e];(!(MX.call(t,e)&&w1(r,n))||n===void 0&&!(e in t))&&xM(t,e,n)}function $X(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?xM(n,a,l):PM(n,a,l)}return n}var fI=Math.max;function LX(t,e,n){return e=fI(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=fI(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),_X(t,this,a)}}function RM(t,e){return PX(LX(t,e,AM),t+"")}var UX=9007199254740991;function OM(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=UX}function Yg(t){return t!=null&&OM(t.length)&&!kM(t)}function NM(t,e,n){if(!rl(n))return!1;var r=typeof e;return(r=="number"?Yg(n)&&DM(e,n.length):r=="string"&&e in n)?w1(n[e],t):!1}function FX(t){return RM(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&NM(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var VX=Object.prototype;function b1(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||VX;return t===n}function BX(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var jX="[object Arguments]";function pI(t){return Wg(t)&&Hg(t)==jX}var MM=Object.prototype,HX=MM.hasOwnProperty,WX=MM.propertyIsEnumerable,YX=pI(function(){return arguments}())?pI:function(t){return Wg(t)&&HX.call(t,"callee")&&!WX.call(t,"callee")};const zX=YX;function KX(){return!1}var $M=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mI=$M&&typeof module=="object"&&module&&!module.nodeType&&module,GX=mI&&mI.exports===$M,gI=GX?jg.Buffer:void 0,qX=gI?gI.isBuffer:void 0,XX=qX||KX;const QX=XX;var JX="[object Arguments]",ZX="[object Array]",eQ="[object Boolean]",tQ="[object Date]",nQ="[object Error]",rQ="[object Function]",iQ="[object Map]",sQ="[object Number]",oQ="[object Object]",aQ="[object RegExp]",lQ="[object Set]",uQ="[object String]",cQ="[object WeakMap]",dQ="[object ArrayBuffer]",hQ="[object DataView]",fQ="[object Float32Array]",pQ="[object Float64Array]",mQ="[object Int8Array]",gQ="[object Int16Array]",vQ="[object Int32Array]",yQ="[object Uint8Array]",wQ="[object Uint8ClampedArray]",bQ="[object Uint16Array]",_Q="[object Uint32Array]",un={};un[fQ]=un[pQ]=un[mQ]=un[gQ]=un[vQ]=un[yQ]=un[wQ]=un[bQ]=un[_Q]=!0;un[JX]=un[ZX]=un[dQ]=un[eQ]=un[hQ]=un[tQ]=un[nQ]=un[rQ]=un[iQ]=un[sQ]=un[oQ]=un[aQ]=un[lQ]=un[uQ]=un[cQ]=!1;function TQ(t){return Wg(t)&&OM(t.length)&&!!un[Hg(t)]}function EQ(t){return function(e){return t(e)}}var LM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dd=LM&&typeof module=="object"&&module&&!module.nodeType&&module,SQ=dd&&dd.exports===LM,iy=SQ&&CM.process,CQ=function(){try{var t=dd&&dd.require&&dd.require("util").types;return t||iy&&iy.binding&&iy.binding("util")}catch{}}();const vI=CQ;var yI=vI&&vI.isTypedArray,IQ=yI?EQ(yI):TQ;const AQ=IQ;var kQ=Object.prototype,DQ=kQ.hasOwnProperty;function UM(t,e){var n=Kq(t),r=!n&&zX(t),i=!n&&!r&&QX(t),s=!n&&!r&&!i&&AQ(t),o=n||r||i||s,a=o?BX(t.length,String):[],l=a.length;for(var u in t)(e||DQ.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||DM(u,l)))&&a.push(u);return a}function xQ(t,e){return function(n){return t(e(n))}}var PQ=xQ(Object.keys,Object);const RQ=PQ;var OQ=Object.prototype,NQ=OQ.hasOwnProperty;function MQ(t){if(!b1(t))return RQ(t);var e=[];for(var n in Object(t))NQ.call(t,n)&&n!="constructor"&&e.push(n);return e}function $Q(t){return Yg(t)?UM(t):MQ(t)}var LQ=Object.prototype,UQ=LQ.hasOwnProperty,FQ=FX(function(t,e){if(b1(e)||Yg(e)){$X(e,$Q(e),t);return}for(var n in e)UQ.call(e,n)&&PM(t,n,e[n])});const VQ=FQ;function BQ(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var jQ=Object.prototype,HQ=jQ.hasOwnProperty;function WQ(t){if(!rl(t))return BQ(t);var e=b1(t),n=[];for(var r in t)r=="constructor"&&(e||!HQ.call(t,r))||n.push(r);return n}function YQ(t){return Yg(t)?UM(t,!0):WQ(t)}var zQ=function(){return jg.Date.now()};const sy=zQ;var KQ="Expected a function",GQ=Math.max,qQ=Math.min;function XQ(t,e,n){var r,i,s,o,a,l,u=0,c=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(KQ);e=dI(e)||0,rl(n)&&(c=!!n.leading,d="maxWait"in n,s=d?GQ(dI(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function f(T){var P=r,A=i;return r=i=void 0,u=T,o=t.apply(A,P),o}function p(T){return u=T,a=setTimeout(b,e),c?f(T):o}function m(T){var P=T-l,A=T-u,I=e-P;return d?qQ(I,s-A):I}function v(T){var P=T-l,A=T-u;return l===void 0||P>=e||P<0||d&&A>=s}function b(){var T=sy();if(v(T))return g(T);a=setTimeout(b,m(T))}function g(T){return a=void 0,h&&r?f(T):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function y(){return a===void 0?o:g(sy())}function w(){var T=sy(),P=v(T);if(r=arguments,i=this,l=T,P){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(b,e),f(l)}return a===void 0&&(a=setTimeout(b,e)),o}return w.cancel=_,w.flush=y,w}var FM=Object.prototype,QQ=FM.hasOwnProperty,JQ=RM(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&NM(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],o=YQ(s),a=-1,l=o.length;++a<l;){var u=o[a],c=t[u];(c===void 0||w1(c,FM[u])&&!QQ.call(t,u))&&(t[u]=s[u])}return t});const ZQ=JQ,eJ=({images:t=[],options:e})=>{e=VQ(e,{inline:!1});const n=document.createElement("div"),r=Ba("div",{style:{display:"none"},class:["__viewer-token"]},t.map(a=>Ba("img",typeof a=="string"?{src:a}:a)));ja(r,n);const i=n.firstElementChild;document.body.appendChild(i);const s=new ju(i,e),o=s.destroy.bind(s);return s.destroy=function(){return o(),ja(null,n),s},s.show(),i.addEventListener("hidden",function(){this.viewer===s&&s.destroy()}),s},tJ=({name:t="viewer",debug:e=!1}={})=>{async function n(c,d,h=!1,f=!1){await Wn(),!(f&&!r(c))&&(h||!c[`$${t}`]?(o(c),c[`$${t}`]=new ju(c,d),u("Viewer created")):(c[`$${t}`].update(),u("Viewer updated")))}function r(c){const d=c.innerHTML.match(/<img([\w\W]+?)[\\/]?>/g),h=d?d.join(""):void 0;return c.__viewerImageDiffCache===h?(u("Element change detected, but image(s) has not changed"),!1):(u("Image change detected"),c.__viewerImageDiffCache=h,!0)}function i(c,d,h,f){a(c);const p=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!p){u("Observer not supported");return}const m=new p(b=>{b.forEach(g=>{u(`Viewer mutation:${g.type}`),h(c,d,f,!0)})}),v={attributes:!0,childList:!0,characterData:!0,subtree:!0};m.observe(c,v),c.__viewerMutationObserver=m,u("Observer created")}function s(c,d,h,f){c.__viewerUnwatch=St(()=>d.value,(p,m)=>{u("Change detected by watcher: ",d.value),f(c,p,!0,!1)},{deep:!0}),u("Watcher created, expression: ",d.value)}function o(c){!c[`$${t}`]||(c[`$${t}`].destroy(),delete c[`$${t}`],u("Viewer destroyed"))}function a(c){!c.__viewerMutationObserver||(c.__viewerMutationObserver.disconnect(),delete c.__viewerMutationObserver,u("observer destroyed"))}function l(c){!c.__viewerUnwatch||(c.__viewerUnwatch(),delete c.__viewerUnwatch,u("Watcher destroyed"))}function u(...c){e&&console.log(...c)}return{mounted(c,d,h){u("Viewer bind");const f=XQ(n,50);f(c,d.value),s(c,d,h,f),d.modifiers.static||i(c,d.value,f,d.modifiers.rebuild)},unmounted(c){u("Viewer unbind"),a(c),l(c),o(c)}}},nJ=Ee({name:"Viewer",props:{images:{type:Array,default:()=>[]},rebuild:{type:Boolean,default:!1},trigger:{type:Object,default:null},options:{type:Object,default:()=>null}},emits:["inited"],setup(t,{emit:e}){let n;const r=re();function i(){n=new ju(r.value,t.options),e("inited",n)}function s(){n&&n.destroy()}function o(){s(),i()}function a(){n?(n.update(),e("inited",n)):i()}function l(){t.rebuild?o():a()}const u={deep:!0};return St(()=>t.images,()=>{Wn(()=>{l()})},u),St(()=>t.trigger,()=>{Wn(()=>{l()})},u),St(()=>t.options,()=>{Wn(()=>{o()})},u),zt(()=>i()),Ko(()=>s()),{root:r,createViewer:i,rebuildViewer:o,updateViewer:a,destroyViewer:s}}}),rJ=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},iJ={ref:"root"};function sJ(t,e,n,r,i,s){return x(),z("div",iJ,[xe(t.$slots,"default",{images:t.images,options:t.options})],512)}const VM=rJ(nJ,[["render",sJ]]),oJ={install(t,{name:e="viewer",debug:n=!1,defaultOptions:r}={}){r&&ju.setDefaults(r),t.config.globalProperties[`$${e}Api`]=eJ,t.component(e,ZQ(VM,{name:e})),t.directive(e,tJ({name:e,debug:n}))},setDefaults(t){ju.setDefaults(t)}},aJ=["src"],wI=Ee({__name:"BlogPostImage",props:{post:{},coverImageUrl:{},maxHeight:{},maxWidth:{},alignment:{}},setup(t){const e=t,n=re(0),r=re(0),i=Z(()=>n.value>r.value),s=Z(()=>n.value>r.value*1.5),o=Z(()=>r.value>n.value),a=Z(()=>r.value>n.value*1.5);return zt(()=>{const l=new Image;l.src=e.coverImageUrl,l.onload=()=>{n.value=l.height,r.value=l.width}}),(l,u)=>(x(),z("div",{class:Me({flex:!0,"justify-start":l.alignment==="left","justify-center":l.alignment===void 0||l.alignment==="center","justify-end":l.alignment==="right"})},[ee(Rr,{class:Me(["!p-5 my-5 w-fit",l.post.colorTertiary||"",l.post.opacityTertiary||"bg-opacity-50"])},{default:fe(()=>[ee(k(VM),null,{default:fe(()=>[J("img",{class:"cover-image",src:l.coverImageUrl,style:Gn({maxHeight:i.value?l.maxHeight??a.value?"60vh":"40h":"50vh",maxWidth:o.value?l.maxWidth??s.value?"60vw":"40vw":"50vw"})},null,12,aJ)]),_:1})]),_:1},8,["class"])],2))}}),hm=Ee({__name:"ArrowIcon",props:{rotate:{type:Boolean},size:{}},setup(t){return(e,n)=>(x(),ce(k(dG),{class:Me(["sm:block animation",{"rotate-180":e.rotate,"mt-0.5 mr-2.5 h-5 w-5":!e.size||e.size==="sm","h-10 w-10":e.size==="md","h-20 w-20":e.size==="xl"}])},null,8,["class"]))}}),lJ=Ee({__name:"BlogPostSectionTitle",props:{class:{},alignment:{},isExpandable:{type:Boolean},isExpanded:{type:Boolean}},emits:["click"],setup(t){const e=t;return(n,r)=>(x(),z("div",{class:Me(["font-bold text-lg md:text-2xl",{"hover:underline cursor-pointer":n.isExpandable},e.class])},[J("div",{class:Me({block:!n.alignment,flex:!!n.alignment,"justify-start":n.alignment==="left","justify-center":n.alignment==="center","justify-end":n.alignment==="right"})},[J("span",{class:"flex",onClick:r[0]||(r[0]=i=>n.$emit("click"))},[n.isExpandable&&n.alignment==="right"?(x(),ce(hm,{key:0,rotate:n.isExpanded,size:"md"},null,8,["rotate"])):ne("",!0),xe(n.$slots,"default"),n.isExpandable&&(n.alignment==="left"||n.alignment==="center")?(x(),ce(hm,{key:1,rotate:n.isExpanded,size:"md"},null,8,["rotate"])):ne("",!0)])],2)],2))}}),uJ=t=>(Jw("data-v-5d4da285"),t=t(),Zw(),t),cJ={class:"flex justify-between h-fit mt-2 gap-2"},dJ={class:"flex flex-wrap gap-3"},hJ={class:"w-full"},fJ={key:0,class:"w-fit flex flex-col justify-start ms-5 gap-2"},pJ={key:0},mJ={class:"flex gap-3"},gJ=uJ(()=>J("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"h-6"},[J("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})],-1)),vJ=Ee({__name:"BlogPost",props:{post:{}},emits:["editClicked","deleteClicked"],setup(t){const e=t,{publicUsers:n}=Qt(Jn()),{firebaseUser:r,isOwner:i}=Qt(Qn()),s=re(),o=Z(()=>{var u;return(u=e.post.allowedUserIds)!=null&&u.length?n.value.filter(c=>{var d;return(d=e.post.allowedUserIds)==null?void 0:d.includes(c.id)}):[]}),a=u=>{s.value===u?s.value=void 0:s.value=u},l=()=>{const u=document.createElement("textarea"),{protocol:c,hostname:d,port:h,pathname:f}=window.location,p=`${c}//${d}`+(d==="localhost"?`:${h}`:"")+f;u.value=`${p}/${e.post.id}`,document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),Ye.success("Copied link!")};return(u,c)=>(x(),ce(Rr,{id:u.post.id,class:Me(["min-h-[90vh] border-4 border-transparent",u.post.colorPrimary||"bg-gray-900",u.post.opacityPrimary||"bg-opacity-30"]),title:u.post.title,subTitle:k(J0)(new Date(u.post.date))+(u.post.dateUpdated?" - updated "+k(J0)(new Date(u.post.dateUpdated)):"")+(u.post.datePinned?" - [PINNED]":"")+(u.post.locked?" - [LOCKED]":""),loading:u.post.loading},{right:fe(()=>[J("div",mJ,[ee(_t,{class:"border-none bg-gray-500 text-purple-100 bg-opacity-10 h-fit",type:"secondary",outlined:"",onClick:l},{default:fe(()=>[gJ]),_:1})])]),default:fe(()=>{var d;return[J("div",cJ,[J("div",dJ,[(x(!0),z(Ae,null,dt(o.value,h=>{var f;return x(),ce(Rr,{class:"h-fit !p-0 !px-4 !py-1 bg-red-800 bg-opacity-50","sub-title":h.id===((f=k(r))==null?void 0:f.uid)?"You":h.displayName,"sub-title-props":{class:"xl:!ms-0"}},null,8,["sub-title"])}),256))]),k(i)?(x(),z("div",{key:0,class:Me(["flex justify-end lg:hidden h-fit ms-5 gap-3",(d=u.post.allowedUserIds)!=null&&d.length?"flex-col md:flex-row":"flex-row"])},[ee(_t,{class:"min-w-80",onClick:c[0]||(c[0]=h=>u.$emit("editClicked"))},{default:fe(()=>[Qe(" Edit ")]),_:1}),ee(_t,{class:"min-w-80",type:"danger",outlined:"",onClick:c[1]||(c[1]=h=>u.$emit("deleteClicked"))},{default:fe(()=>[Qe(" Delete ")]),_:1})],2)):ne("",!0)]),ee(Rr,{class:Me(["min-h-[125px] md:min-h-[160px] p-5 mt-5",u.post.colorSecondary||u.post.colorPrimary,u.post.opacitySecondary||"bg-opacity-25"])},{default:fe(()=>[J("div",{class:Me(["flex relative",u.post.countdown||u.post.alignment==="center"?"flex justify-between":""])},[J("div",hJ,[u.post.countdown?(x(),ce(Sf,{key:0,time:new Date(u.post.countdown).getTime(),direction:"down",alignment:u.post.alignment},null,8,["time","alignment"])):ne("",!0),u.post.timer?(x(),ce(Sf,{key:1,time:new Date(u.post.timer).getTime(),direction:"up",alignment:u.post.alignment},null,8,["time","alignment"])):ne("",!0),u.post.description?(x(),ce(Cf,{key:2,description:u.post.description,alignment:u.post.alignment},null,8,["description","alignment"])):ne("",!0)]),J("div",{class:Me(["hidden lg:flex w-full justify-end",u.post.countdown||u.post.alignment==="center"?"absolute":""])},[k(i)?(x(),z("div",fJ,[ee(_t,{class:"col-span-full md:col-span-2 md:col-start-3",onClick:c[2]||(c[2]=h=>u.$emit("editClicked"))},{default:fe(()=>[Qe(" Edit ")]),_:1}),ee(_t,{class:"col-span-full md:col-span-2 md:col-start-3",type:"danger",outlined:"",onClick:c[3]||(c[3]=h=>u.$emit("deleteClicked"))},{default:fe(()=>[Qe(" Delete ")]),_:1})])):ne("",!0)],2)],2),u.post.coverImageUrl?(x(),ce(wI,{key:0,post:u.post,"cover-image-url":u.post.coverImageUrl},null,8,["post","cover-image-url"])):ne("",!0),u.post.descriptionFooter?(x(),ce(Cf,{key:1,class:"mb-5",description:u.post.descriptionFooter,alignment:u.post.alignment},null,8,["description","alignment"])):ne("",!0),(x(!0),z(Ae,null,dt(u.post.sections,(h,f)=>(x(),z("div",null,[h.title?(x(),ce(lJ,{key:0,alignment:h.alignment,"is-expandable":!!h.description||!!h.coverImageUrl||!!h.bullets.length,"is-expanded":s.value===f,onClick:p=>a(f)},{default:fe(()=>[Qe(Je(h.title),1)]),_:2},1032,["alignment","is-expandable","is-expanded","onClick"])):ne("",!0),h.subTitle?(x(),ce(Cf,{key:1,class:"mb-5",description:h.subTitle,alignment:h.alignment},null,8,["description","alignment"])):ne("",!0),ee(Cs,null,{default:fe(()=>[s.value===f?(x(),z("div",pJ,[h.description?(x(),ce(Cf,{key:0,description:h.description,alignment:h.alignment},null,8,["description","alignment"])):ne("",!0),h.coverImageUrl?(x(),ce(wI,{key:1,post:u.post,"cover-image-url":h.coverImageUrl,alignment:h.alignment,"max-height":"30vh"},null,8,["post","cover-image-url","alignment"])):ne("",!0),ee(QG,{bullets:h.bullets,alignment:h.alignment},null,8,["bullets","alignment"])])):ne("",!0)]),_:2},1024),h.countdown?(x(),ce(Sf,{key:2,time:new Date(h.countdown).getTime(),direction:"down",alignment:h.alignment},null,8,["time","alignment"])):ne("",!0),h.timer?(x(),ce(Sf,{key:3,time:new Date(h.timer).getTime(),direction:"up",alignment:h.alignment},null,8,["time","alignment"])):ne("",!0)]))),256))]),_:1},8,["class"]),ee(XG,{post:u.post},null,8,["post"])]}),_:1},8,["id","class","title","subTitle","loading"]))}}),BM=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},jM=BM(vJ,[["__scopeId","data-v-5d4da285"]]),yJ={key:0,class:"flex justify-center mt-5"},wJ={class:"grid grid-cols-6 mb-5 gap-5"},bJ=Ee({__name:"BlogDetails",setup(t){const e=mb(),n=Z(()=>e.params.postId),r=Jn(),{fetchBlogPost:i}=r,{blogPosts:s}=Qt(r);return zt(()=>{var o,a;n.value&&((o=s.value.data.single)==null?void 0:o.id)!==n.value&&((a=s.value.data.single)==null?void 0:a.id)!==n.value&&i(n.value)}),(o,a)=>k(s).fetchLoading?(x(),z("div",yJ,[ee(_t,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:k(s).fetchLoading},{default:fe(()=>[Qe(" Loading... ")]),_:1},8,["loading"])])):(x(),z(Ae,{key:1},[J("div",wJ,[ee(_t,{class:"col-span-full md:col-start-2 md:col-span-4 lg:col-start-3 lg:col-span-2",type:"orange",url:"/blog"},{default:fe(()=>[Qe(" All Posts ")]),_:1})]),k(s).data.single?(x(),ce(jM,{key:0,post:k(s).data.single},null,8,["post"])):ne("",!0)],64))}}),_J={key:0,class:"fixed z-10 inset-0 flex items-center justify-center overflow-auto"},TJ={class:"relative w-full md:w-3/4 lg:w-1/2 max-h-screen"},EJ={class:"bg-gray-800 border border-gray-500 rounded-2xl p-5"},SJ={class:"p-8"},CJ={class:"title-secondary"},IJ={class:"mt-4 text-gray-300"},AJ={class:"my-2"},kJ={class:"grid grid-cols-4 mt-10 gap-3"},_1=Ee({__name:"Dialog",props:{isOpen:{type:Boolean},title:{},description:{},confirmText:{},confirmLoading:{type:Boolean},confirmProps:{}},emits:["confirm","cancel"],setup(t){const e=t;return hh(()=>{document.body.style.overflow=""}),St(()=>e.isOpen,()=>{e.isOpen?(document.body.style.overflow="hidden",document.body.style.marginRight=`${i8()}px`):(document.body.style.marginRight="",document.body.style.overflow="")}),(n,r)=>n.isOpen?(x(),z("div",_J,[J("div",{class:"fixed inset-0 bg-gray-900 opacity-50 animation",onClick:r[0]||(r[0]=i=>n.$emit("cancel"))}),J("div",TJ,[J("div",EJ,[J("div",SJ,[J("h3",CJ,Je(n.title),1),J("div",IJ,[(x(!0),z(Ae,null,dt(Array.isArray(n.description)?[...n.description]:[n.description],i=>(x(),z("p",AJ,Je(i),1))),256))]),xe(n.$slots,"default")]),J("div",kJ,[ee(_t,{class:Me(["col-span-full",n.confirmText?"md:col-span-2":""]),outlined:"",onClick:r[1]||(r[1]=i=>n.$emit("cancel"))},{default:fe(()=>[Qe(" Cancel ")]),_:1},8,["class"]),n.confirmText?(x(),ce(_t,Xt({key:0,class:"col-span-full md:col-span-2 md:col-start-3",loading:n.confirmLoading},n.confirmProps,{onClick:r[2]||(r[2]=i=>n.$emit("confirm"))}),{default:fe(()=>[Qe(Je(n.confirmText),1)]),_:1},16,["loading"])):ne("",!0)])])])])):ne("",!0)}});let xf;const DJ=new Uint8Array(16);function xJ(){if(!xf&&(xf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!xf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xf(DJ)}const ur=[];for(let t=0;t<256;++t)ur.push((t+256).toString(16).slice(1));function PJ(t,e=0){return ur[t[e+0]]+ur[t[e+1]]+ur[t[e+2]]+ur[t[e+3]]+"-"+ur[t[e+4]]+ur[t[e+5]]+"-"+ur[t[e+6]]+ur[t[e+7]]+"-"+ur[t[e+8]]+ur[t[e+9]]+"-"+ur[t[e+10]]+ur[t[e+11]]+ur[t[e+12]]+ur[t[e+13]]+ur[t[e+14]]+ur[t[e+15]]}const RJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bI={randomUUID:RJ};function fm(t,e,n){if(bI.randomUUID&&!e&&!t)return bI.randomUUID();t=t||{};const r=t.random||(t.rng||xJ)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return PJ(r)}const OJ={class:"flex m-4 justify-center"},th=Ee({__name:"Spoiler",props:{text:{},buttonType:{}},setup(t){const e=re(!1);return(n,r)=>(x(),z(Ae,null,[J("div",OJ,[ee(_t,{class:"w-3/4 md:w-2/3 flex justify-center",type:n.buttonType,outlined:"",onClick:r[0]||(r[0]=i=>e.value=!e.value)},{default:fe(()=>[ee(hm,{rotate:e.value},null,8,["rotate"]),Qe(" "+Je(n.text),1)]),_:1},8,["type"])]),ps(J("div",null,[xe(n.$slots,"default")],512),[[Vs,e.value]])],64))}}),NJ={class:"m-4"},MJ=["for"],pm=Ee({__name:"DateField",props:{id:{},name:{},label:{},modelValue:{},labelProps:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=Z({get:()=>r.modelValue,set:l=>{a("update:modelValue",l)}}),s=Z(()=>r.name+(r.id!==void 0?"."+r.id:"")),o=()=>{},a=n;return e({test:o}),(l,u)=>{const c=Zs("VueDatePicker");return x(),z("div",NJ,[l.label?(x(),z("label",Xt({key:0,class:"block text-sm font-bold mb-2",for:"dp-input-"+s.value},l.labelProps),Je(l.label),17,MJ)):ne("",!0),ee(c,{uid:s.value,class:"input-field px-5",modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=d=>i.value=d)},null,8,["uid","modelValue"])])}}}),$J={class:"m-4"},LJ=["for"],UJ={class:"flex justify-between gap-1"},FJ=["id","disabled"],VJ={key:2},BJ={class:"flex justify-center"},jJ=["src"],T1=Ee({__name:"FileUpload",props:{id:{},name:{},label:{},modelValue:{},error:{},isPublic:{type:Boolean},blogPost:{},imageProps:{},imageContainerProps:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,{firebaseUser:i}=Qt(Qn()),{fetchFileInfo:s,uploadFile:o,deleteFile:a}=Jn(),l=re(),u=re(null),c=re(0),d=Z(()=>Q0(r.modelValue||"uploads/"+fm())),h=Z(()=>d.value.name),f=re(),p=re(""),m=y=>{const w=y.target;w.files&&w.files.length>0&&(u.value=w.files[0],p.value=u.value.name,v())},v=async()=>{var y,w;u.value&&((y=i.value)!=null&&y.uid)&&await o(d.value,u.value,T=>c.value=T,p.value,(w=i.value)==null?void 0:w.uid,r.isPublic,r.blogPost)&&(_("update:modelValue",await qW(d.value)),u.value=null,c.value=0)},b=async()=>{await a(d.value)?(window.URL.revokeObjectURL(r.modelValue),l.value.value=null,_("update:modelValue","")):_("update:error","Failed to delete File reference")},g=()=>{};St(()=>r.modelValue,async()=>{var y;f.value=r.modelValue?await s(h.value):void 0,p.value=((y=f.value)==null?void 0:y.name)??""},{immediate:!0});const _=n;return e({test:g}),(y,w)=>(x(),z("div",$J,[y.label?(x(),z("label",{key:0,class:"block text-sm font-bold mb-2",for:`${y.id}`},Je(y.label),9,LJ)):ne("",!0),J("div",UJ,[J("input",{id:`${y.id}`,ref_key:"fileUpload",ref:l,type:"file",accept:"image/*",onChange:m,class:"input-field",disabled:!!f.value},null,40,FJ),f.value?(x(),ce(bM,{key:0,onClick:b})):ne("",!0)]),y.error?(x(),ce(f1,{key:1,name:y.name,error:y.error},null,8,["name","error"])):ne("",!0),c.value>0?(x(),z("div",VJ,"Uploading: "+Je(c.value.toFixed(2))+"%",1)):ne("",!0),J("div",BJ,[J("div",xn(sr(y.imageContainerProps)),[f.value?(x(),z("img",Xt({key:0,class:"mt-4 simple-field w-full min-w-25 md:max-w-fit",src:y.modelValue},y.imageProps),null,16,jJ)):ne("",!0)],16)])]))}}),HJ={class:"m-4"},WJ=["for"],YJ=["id","name","multiple"],zJ=["value"],Tr=Ee({__name:"SelectField",props:{id:{},name:{},label:{},modelValue:{},error:{},rules:{},options:{},multiple:{type:Boolean}},emits:["update:modelValue","update:arrayValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=re(),s=Z(()=>(r.rules??[]).some(h=>h.type===p1.Required)),o=Z({get:()=>{if(r.multiple){const h=Array.isArray(r.modelValue)?r.modelValue:[];return h.length?h:s.value?r.options.length?[r.options[0].value]:[]:[]}else{const h=typeof r.modelValue=="string"||typeof r.modelValue=="number"?r.modelValue:"";return h||(s.value&&r.options.length?r.options[0].value:"")}},set:h=>{var f;d("update:modelValue",Fl(h)[0]),d("update:arrayValue",Fl(h)),r.multiple||(f=i.value)==null||f.blur()}}),a=Z(()=>r.options.find(({value:h})=>h===o.value)),l=Z(()=>r.label+(s.value?" *":"")),u=Z(()=>r.name+(r.id?"."+r.id:"")),c=async()=>{const h=r.rules||[];let f="";for(const p of Fl(o.value)){const m={value:p.toString()},v=h.filter(b=>!b.test(m)).map(b=>b.error(m))||[];if(v[0]){f=v[0];break}}d("update:error",f)};zt(()=>{s.value&&(d("update:modelValue",Fl(o.value)[0]),d("update:arrayValue",Fl(o.value)))});const d=n;return e({test:c}),(h,f)=>{var p,m;return x(),z("div",HJ,[J("label",{class:"block text-sm font-bold mb-2",for:u.value},Je(l.value),9,WJ),ps(J("select",{ref_key:"select",ref:i,id:u.value,name:h.name,"onUpdate:modelValue":f[0]||(f[0]=v=>o.value=v),class:Me(["w-full px-4 py-2 select-field block",(p=a.value)==null?void 0:p.background,(m=a.value)!=null&&m.background?"text-white focus:text-black bg-opacity-50":"",h.multiple?"bg-white":""]),multiple:h.multiple},[(x(!0),z(Ae,null,dt(h.options,({value:v,label:b,background:g,text:_},y)=>(x(),z("option",{value:v??y,class:Me(["h-20 select-field",g,g?"bg-opacity-50":"bg-opacity-40",_])},Je(b),11,zJ))),256))],10,YJ),[[hb,o.value]]),h.error?(x(),ce(f1,{key:0,name:h.name,error:h.error},null,8,["name","error"])):ne("",!0)])}}});var KJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function HM(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var WM={exports:{}};const qJ=HM(nF);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function _I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_I(Object(n),!0).forEach(function(r){XJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ip(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ip=function(e){return typeof e}:ip=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function XJ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pi(){return Pi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pi.apply(this,arguments)}function QJ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function JJ(t,e){if(t==null)return{};var n=QJ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZJ(t){return eZ(t)||tZ(t)||nZ(t)||rZ()}function eZ(t){if(Array.isArray(t))return _w(t)}function tZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nZ(t,e){if(t){if(typeof t=="string")return _w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _w(t,e)}}function _w(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var iZ="1.14.0";function Ws(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ro=Ws(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Bh=Ws(/Edge/i),TI=Ws(/firefox/i),hd=Ws(/safari/i)&&!Ws(/chrome/i)&&!Ws(/android/i),YM=Ws(/iP(ad|od|hone)/i),sZ=Ws(/chrome/i)&&Ws(/android/i),zM={capture:!1,passive:!1};function wt(t,e,n){t.addEventListener(e,n,!ro&&zM)}function vt(t,e,n){t.removeEventListener(e,n,!ro&&zM)}function mm(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function oZ(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ui(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&mm(t,e):mm(t,e))||r&&t===n)return t;if(t===n)break}while(t=oZ(t))}return null}var EI=/\s+/g;function _n(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(EI," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(EI," ")}}function ze(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Oa(t,e){var n="";if(typeof t=="string")n=t;else do{var r=ze(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function KM(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function ys(){var t=document.scrollingElement;return t||document.documentElement}function yn(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,u,c,d;if(t!==window&&t.parentNode&&t!==ys()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,c=s.height,d=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!ro))do if(i&&i.getBoundingClientRect&&(ze(i,"transform")!=="none"||n&&ze(i,"position")!=="static")){var h=i.getBoundingClientRect();o-=h.top+parseInt(ze(i,"border-top-width")),a-=h.left+parseInt(ze(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var f=Oa(i||t),p=f&&f.a,m=f&&f.d;f&&(o/=m,a/=p,d/=p,c/=m,l=o+c,u=a+d)}return{top:o,left:a,bottom:l,right:u,width:d,height:c}}}function SI(t,e,n){for(var r=ko(t,!0),i=yn(t)[e];r;){var s=yn(r)[n],o=void 0;if(n==="top"||n==="left"?o=i>=s:o=i<=s,!o)return r;if(r===ys())break;r=ko(r,!1)}return!1}function Hu(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==nt.ghost&&(r||o[s]!==nt.dragged)&&Ui(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function E1(t,e){for(var n=t.lastElementChild;n&&(n===nt.ghost||ze(n,"display")==="none"||e&&!mm(n,e));)n=n.previousElementSibling;return n||null}function kn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==nt.clone&&(!e||mm(t,e))&&n++;return n}function CI(t){var e=0,n=0,r=ys();if(t)do{var i=Oa(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function aZ(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function ko(t,e){if(!t||!t.getBoundingClientRect)return ys();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=ze(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ys();if(r||e)return n;r=!0}}while(n=n.parentNode);return ys()}function lZ(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function oy(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var fd;function GM(t,e){return function(){if(!fd){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),fd=setTimeout(function(){fd=void 0},e)}}}function uZ(){clearTimeout(fd),fd=void 0}function qM(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function S1(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function II(t,e){ze(t,"position","absolute"),ze(t,"top",e.top),ze(t,"left",e.left),ze(t,"width",e.width),ze(t,"height",e.height)}function ay(t){ze(t,"position",""),ze(t,"top",""),ze(t,"left",""),ze(t,"width",""),ze(t,"height","")}var Ir="Sortable"+new Date().getTime();function cZ(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(ze(i,"display")==="none"||i===nt.ghost)){t.push({target:i,rect:yn(i)});var s=Es({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=Oa(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(aZ(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,u=a.target,c=u.fromRect,d=yn(u),h=u.prevFromRect,f=u.prevToRect,p=a.rect,m=Oa(u,!0);m&&(d.top-=m.f,d.left-=m.e),u.toRect=d,u.thisAnimationDuration&&oy(h,d)&&!oy(c,d)&&(p.top-d.top)/(p.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(l=hZ(p,h,f,i.options)),oy(d,c)||(u.prevFromRect=c,u.prevToRect=d,l||(l=i.options.animation),i.animate(u,p,d,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){ze(r,"transition",""),ze(r,"transform","");var a=Oa(this.el),l=a&&a.a,u=a&&a.d,c=(i.left-s.left)/(l||1),d=(i.top-s.top)/(u||1);r.animatingX=!!c,r.animatingY=!!d,ze(r,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=dZ(r),ze(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ze(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){ze(r,"transition",""),ze(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function dZ(t){return t.offsetWidth}function hZ(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Dl=[],ly={initializeByDefault:!0},jh={mount:function(e){for(var n in ly)ly.hasOwnProperty(n)&&!(n in e)&&(e[n]=ly[n]);Dl.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Dl.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Dl.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Es({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Es({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Dl.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,Pi(r,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Dl.forEach(function(i){typeof i.eventProperties=="function"&&Pi(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Dl.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function jc(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[Ir],!!e){var m,v=e.options,b="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ro&&!Bh?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||n,m.from=a||n,m.item=i||n,m.clone=s,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=d,m.originalEvent=h,m.pullMode=f?f.lastPutMode:void 0;var g=Es(Es({},p),jh.getEventProperties(r,e));for(var _ in g)m[_]=g[_];n&&n.dispatchEvent(m),v[b]&&v[b].call(e,m)}}var fZ=["evt"],Kr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=JJ(r,fZ);jh.pluginEvent.bind(nt)(e,n,Es({dragEl:Ie,parentEl:Cn,ghostEl:ht,rootEl:vn,nextEl:da,lastDownEl:sp,cloneEl:In,cloneHidden:Ao,dragStarted:Hc,putSortable:cr,activeSortable:nt.active,originalEvent:i,oldIndex:Jl,oldDraggableIndex:pd,newIndex:ai,newDraggableIndex:_o,hideGhostForTarget:ZM,unhideGhostForTarget:e2,cloneNowHidden:function(){Ao=!0},cloneNowShown:function(){Ao=!1},dispatchSortableEvent:function(a){Ur({sortable:n,name:a,originalEvent:i})}},s))};function Ur(t){jc(Es({putSortable:cr,cloneEl:In,targetEl:Ie,rootEl:vn,oldIndex:Jl,oldDraggableIndex:pd,newIndex:ai,newDraggableIndex:_o},t))}var Ie,Cn,ht,vn,da,sp,In,Ao,Jl,ai,pd,_o,Pf,cr,jl=!1,gm=!1,vm=[],oa,Oi,uy,cy,AI,kI,Hc,xl,md,gd=!1,Rf=!1,op,br,dy=[],Tw=!1,ym=[],zg=typeof document<"u",Of=YM,DI=Bh||ro?"cssFloat":"float",pZ=zg&&!sZ&&!YM&&"draggable"in document.createElement("div"),XM=function(){if(zg){if(ro)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),QM=function(e,n){var r=ze(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Hu(e,0,n),o=Hu(e,1,n),a=s&&ze(s),l=o&&ze(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+yn(s).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+yn(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[DI]==="none"||o&&r[DI]==="none"&&u+c>i)?"vertical":"horizontal"},mZ=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return i===a||s===l||i+o/2===a+u/2},gZ=function(e,n){var r;return vm.some(function(i){var s=i[Ir].options.emptyInsertThreshold;if(!(!s||E1(i))){var o=yn(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},JM=function(e){function n(s,o){return function(a,l,u,c){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||d))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,u,c),o)(a,l,u,c);var h=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===h||s.join&&s.indexOf(h)>-1}}var r={},i=e.group;(!i||ip(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},ZM=function(){!XM&&ht&&ze(ht,"display","none")},e2=function(){!XM&&ht&&ze(ht,"display","")};zg&&document.addEventListener("click",function(t){if(gm)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),gm=!1,!1},!0);var aa=function(e){if(Ie){e=e.touches?e.touches[0]:e;var n=gZ(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Ir]._onDragOver(r)}}},vZ=function(e){Ie&&Ie.parentNode[Ir]._isOutsideThisEl(e.target)};function nt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Pi({},e),t[Ir]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return QM(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:nt.supportPointer!==!1&&"PointerEvent"in window&&!hd,emptyInsertThreshold:5};jh.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);JM(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:pZ,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?wt(t,"pointerdown",this._onTapStart):(wt(t,"mousedown",this._onTapStart),wt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(wt(t,"dragover",this),wt(t,"dragenter",this)),vm.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Pi(this,cZ())}nt.prototype={constructor:nt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(xl=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Ie):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(CZ(r),!Ie&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&hd&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ui(l,i.draggable,r,!1),!(l&&l.animated)&&sp!==l)){if(Jl=kn(l),pd=kn(l,i.draggable),typeof c=="function"){if(c.call(this,e,l,this)){Ur({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),Kr("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=Ui(u,d.trim(),r,!1),d)return Ur({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),Kr("filter",n,{evt:e}),!0}),c)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Ui(u,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Ie&&r.parentNode===s){var u=yn(r);if(vn=s,Ie=r,Cn=Ie.parentNode,da=Ie.nextSibling,sp=r,Pf=o.group,nt.dragged=Ie,oa={target:Ie,clientX:(n||e).clientX,clientY:(n||e).clientY},AI=oa.clientX-u.left,kI=oa.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Ie.style["will-change"]="all",l=function(){if(Kr("delayEnded",i,{evt:e}),nt.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!TI&&i.nativeDraggable&&(Ie.draggable=!0),i._triggerDragStart(e,n),Ur({sortable:i,name:"choose",originalEvent:e}),_n(Ie,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){KM(Ie,c.trim(),hy)}),wt(a,"dragover",aa),wt(a,"mousemove",aa),wt(a,"touchmove",aa),wt(a,"mouseup",i._onDrop),wt(a,"touchend",i._onDrop),wt(a,"touchcancel",i._onDrop),TI&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ie.draggable=!0),Kr("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Bh||ro))){if(nt.eventCanceled){this._onDrop();return}wt(a,"mouseup",i._disableDelayedDrag),wt(a,"touchend",i._disableDelayedDrag),wt(a,"touchcancel",i._disableDelayedDrag),wt(a,"mousemove",i._delayedDragTouchMoveHandler),wt(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&wt(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ie&&hy(Ie),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;vt(e,"mouseup",this._disableDelayedDrag),vt(e,"touchend",this._disableDelayedDrag),vt(e,"touchcancel",this._disableDelayedDrag),vt(e,"mousemove",this._delayedDragTouchMoveHandler),vt(e,"touchmove",this._delayedDragTouchMoveHandler),vt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?wt(document,"pointermove",this._onTouchMove):n?wt(document,"touchmove",this._onTouchMove):wt(document,"mousemove",this._onTouchMove):(wt(Ie,"dragend",this),wt(vn,"dragstart",this._onDragStart));try{document.selection?ap(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(jl=!1,vn&&Ie){Kr("dragStarted",this,{evt:n}),this.nativeDraggable&&wt(document,"dragover",vZ);var r=this.options;!e&&_n(Ie,r.dragClass,!1),_n(Ie,r.ghostClass,!0),nt.active=this,e&&this._appendGhost(),Ur({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Oi){this._lastX=Oi.clientX,this._lastY=Oi.clientY,ZM();for(var e=document.elementFromPoint(Oi.clientX,Oi.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Oi.clientX,Oi.clientY),e!==n);)n=e;if(Ie.parentNode[Ir]._isOutsideThisEl(e),n)do{if(n[Ir]){var r=void 0;if(r=n[Ir]._onDragOver({clientX:Oi.clientX,clientY:Oi.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);e2()}},_onTouchMove:function(e){if(oa){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=ht&&Oa(ht,!0),a=ht&&o&&o.a,l=ht&&o&&o.d,u=Of&&br&&CI(br),c=(s.clientX-oa.clientX+i.x)/(a||1)+(u?u[0]-dy[0]:0)/(a||1),d=(s.clientY-oa.clientY+i.y)/(l||1)+(u?u[1]-dy[1]:0)/(l||1);if(!nt.active&&!jl){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ht){o?(o.e+=c-(uy||0),o.f+=d-(cy||0)):o={a:1,b:0,c:0,d:1,e:c,f:d};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ze(ht,"webkitTransform",h),ze(ht,"mozTransform",h),ze(ht,"msTransform",h),ze(ht,"transform",h),uy=c,cy=d,Oi=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ht){var e=this.options.fallbackOnBody?document.body:vn,n=yn(Ie,!0,Of,!0,e),r=this.options;if(Of){for(br=e;ze(br,"position")==="static"&&ze(br,"transform")==="none"&&br!==document;)br=br.parentNode;br!==document.body&&br!==document.documentElement?(br===document&&(br=ys()),n.top+=br.scrollTop,n.left+=br.scrollLeft):br=ys(),dy=CI(br)}ht=Ie.cloneNode(!0),_n(ht,r.ghostClass,!1),_n(ht,r.fallbackClass,!0),_n(ht,r.dragClass,!0),ze(ht,"transition",""),ze(ht,"transform",""),ze(ht,"box-sizing","border-box"),ze(ht,"margin",0),ze(ht,"top",n.top),ze(ht,"left",n.left),ze(ht,"width",n.width),ze(ht,"height",n.height),ze(ht,"opacity","0.8"),ze(ht,"position",Of?"absolute":"fixed"),ze(ht,"zIndex","100000"),ze(ht,"pointerEvents","none"),nt.ghost=ht,e.appendChild(ht),ze(ht,"transform-origin",AI/parseInt(ht.style.width)*100+"% "+kI/parseInt(ht.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Kr("dragStart",this,{evt:e}),nt.eventCanceled){this._onDrop();return}Kr("setupClone",this),nt.eventCanceled||(In=S1(Ie),In.draggable=!1,In.style["will-change"]="",this._hideClone(),_n(In,this.options.chosenClass,!1),nt.clone=In),r.cloneId=ap(function(){Kr("clone",r),!nt.eventCanceled&&(r.options.removeCloneOnHide||vn.insertBefore(In,Ie),r._hideClone(),Ur({sortable:r,name:"clone"}))}),!n&&_n(Ie,s.dragClass,!0),n?(gm=!0,r._loopId=setInterval(r._emulateDragOver,50)):(vt(document,"mouseup",r._onDrop),vt(document,"touchend",r._onDrop),vt(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Ie)),wt(document,"drop",r),ze(Ie,"transform","translateZ(0)")),jl=!0,r._dragStartId=ap(r._dragStarted.bind(r,n,e)),wt(document,"selectstart",r),Hc=!0,hd&&ze(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,u=nt.active,c=Pf===l,d=a.sort,h=cr||u,f,p=this,m=!1;if(Tw)return;function v(Y,$){Kr(Y,p,Es({evt:e,isOwner:c,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:d,fromSortable:h,target:r,completed:g,onMove:function(X,Q){return Nf(vn,n,Ie,i,X,yn(X),e,Q)},changed:_},$))}function b(){v("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function g(Y){return v("dragOverCompleted",{insertion:Y}),Y&&(c?u._hideClone():u._showClone(p),p!==h&&(_n(Ie,cr?cr.options.ghostClass:u.options.ghostClass,!1),_n(Ie,a.ghostClass,!0)),cr!==p&&p!==nt.active?cr=p:p===nt.active&&cr&&(cr=null),h===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){v("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===Ie&&!Ie.animated||r===n&&!r.animated)&&(xl=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Ie.parentNode[Ir]._isOutsideThisEl(e.target),!Y&&aa(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function _(){ai=kn(Ie),_o=kn(Ie,a.draggable),Ur({sortable:p,name:"change",toEl:n,newIndex:ai,newDraggableIndex:_o,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Ui(r,a.draggable,n,!0),v("dragOver"),nt.eventCanceled)return m;if(Ie.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return g(!1);if(gm=!1,u&&!a.disabled&&(c?d||(o=Cn!==vn):cr===this||(this.lastPutMode=Pf.checkPull(this,u,Ie,e))&&l.checkPut(this,u,Ie,e))){if(f=this._getDirection(e,r)==="vertical",i=yn(Ie),v("dragOverValid"),nt.eventCanceled)return m;if(o)return Cn=vn,b(),this._hideClone(),v("revert"),nt.eventCanceled||(da?vn.insertBefore(Ie,da):vn.appendChild(Ie)),g(!0);var y=E1(n,a.draggable);if(!y||_Z(e,f,this)&&!y.animated){if(y===Ie)return g(!1);if(y&&n===e.target&&(r=y),r&&(s=yn(r)),Nf(vn,n,Ie,i,r,s,e,!!r)!==!1)return b(),n.appendChild(Ie),Cn=n,_(),g(!0)}else if(y&&bZ(e,f,this)){var w=Hu(n,0,a,!0);if(w===Ie)return g(!1);if(r=w,s=yn(r),Nf(vn,n,Ie,i,r,s,e,!1)!==!1)return b(),n.insertBefore(Ie,w),Cn=n,_(),g(!0)}else if(r.parentNode===n){s=yn(r);var T=0,P,A=Ie.parentNode!==n,I=!mZ(Ie.animated&&Ie.toRect||i,r.animated&&r.toRect||s,f),E=f?"top":"left",U=SI(r,"top","top")||SI(Ie,"top","top"),F=U?U.scrollTop:void 0;xl!==r&&(P=s[E],gd=!1,Rf=!I&&a.invertSwap||A),T=TZ(e,r,s,f,I?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Rf,xl===r);var N;if(T!==0){var D=kn(Ie);do D-=T,N=Cn.children[D];while(N&&(ze(N,"display")==="none"||N===ht))}if(T===0||N===r)return g(!1);xl=r,md=T;var O=r.nextElementSibling,R=!1;R=T===1;var B=Nf(vn,n,Ie,i,r,s,e,R);if(B!==!1)return(B===1||B===-1)&&(R=B===1),Tw=!0,setTimeout(wZ,30),b(),R&&!O?n.appendChild(Ie):r.parentNode.insertBefore(Ie,R?O:r),U&&qM(U,0,F-U.scrollTop),Cn=Ie.parentNode,P!==void 0&&!Rf&&(op=Math.abs(P-yn(r)[E])),_(),g(!0)}if(n.contains(Ie))return g(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){vt(document,"mousemove",this._onTouchMove),vt(document,"touchmove",this._onTouchMove),vt(document,"pointermove",this._onTouchMove),vt(document,"dragover",aa),vt(document,"mousemove",aa),vt(document,"touchmove",aa)},_offUpEvents:function(){var e=this.el.ownerDocument;vt(e,"mouseup",this._onDrop),vt(e,"touchend",this._onDrop),vt(e,"pointerup",this._onDrop),vt(e,"touchcancel",this._onDrop),vt(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(ai=kn(Ie),_o=kn(Ie,r.draggable),Kr("drop",this,{evt:e}),Cn=Ie&&Ie.parentNode,ai=kn(Ie),_o=kn(Ie,r.draggable),nt.eventCanceled){this._nulling();return}jl=!1,Rf=!1,gd=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ew(this.cloneId),Ew(this._dragStartId),this.nativeDraggable&&(vt(document,"drop",this),vt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),hd&&ze(document.body,"user-select",""),ze(Ie,"transform",""),e&&(Hc&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ht&&ht.parentNode&&ht.parentNode.removeChild(ht),(vn===Cn||cr&&cr.lastPutMode!=="clone")&&In&&In.parentNode&&In.parentNode.removeChild(In),Ie&&(this.nativeDraggable&&vt(Ie,"dragend",this),hy(Ie),Ie.style["will-change"]="",Hc&&!jl&&_n(Ie,cr?cr.options.ghostClass:this.options.ghostClass,!1),_n(Ie,this.options.chosenClass,!1),Ur({sortable:this,name:"unchoose",toEl:Cn,newIndex:null,newDraggableIndex:null,originalEvent:e}),vn!==Cn?(ai>=0&&(Ur({rootEl:Cn,name:"add",toEl:Cn,fromEl:vn,originalEvent:e}),Ur({sortable:this,name:"remove",toEl:Cn,originalEvent:e}),Ur({rootEl:Cn,name:"sort",toEl:Cn,fromEl:vn,originalEvent:e}),Ur({sortable:this,name:"sort",toEl:Cn,originalEvent:e})),cr&&cr.save()):ai!==Jl&&ai>=0&&(Ur({sortable:this,name:"update",toEl:Cn,originalEvent:e}),Ur({sortable:this,name:"sort",toEl:Cn,originalEvent:e})),nt.active&&((ai==null||ai===-1)&&(ai=Jl,_o=pd),Ur({sortable:this,name:"end",toEl:Cn,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Kr("nulling",this),vn=Ie=Cn=ht=da=In=sp=Ao=oa=Oi=Hc=ai=_o=Jl=pd=xl=md=cr=Pf=nt.dragged=nt.ghost=nt.clone=nt.active=null,ym.forEach(function(e){e.checked=!0}),ym.length=uy=cy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Ie&&(this._onDragOver(e),yZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Ui(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||SZ(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Ui(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Ui(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=jh.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&JM(r)},destroy:function(){Kr("destroy",this);var e=this.el;e[Ir]=null,vt(e,"mousedown",this._onTapStart),vt(e,"touchstart",this._onTapStart),vt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(vt(e,"dragover",this),vt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),vm.splice(vm.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ao){if(Kr("hideClone",this),nt.eventCanceled)return;ze(In,"display","none"),this.options.removeCloneOnHide&&In.parentNode&&In.parentNode.removeChild(In),Ao=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ao){if(Kr("showClone",this),nt.eventCanceled)return;Ie.parentNode==vn&&!this.options.group.revertClone?vn.insertBefore(In,Ie):da?vn.insertBefore(In,da):vn.appendChild(In),this.options.group.revertClone&&this.animate(Ie,In),ze(In,"display",""),Ao=!1}}};function yZ(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Nf(t,e,n,r,i,s,o,a){var l,u=t[Ir],c=u.options.onMove,d;return window.CustomEvent&&!ro&&!Bh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||yn(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),c&&(d=c.call(u,l,o)),d}function hy(t){t.draggable=!1}function wZ(){Tw=!1}function bZ(t,e,n){var r=yn(Hu(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function _Z(t,e,n){var r=yn(E1(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function TZ(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,u=r?n.height:n.width,c=r?n.top:n.left,d=r?n.bottom:n.right,h=!1;if(!o){if(a&&op<u*i){if(!gd&&(md===1?l>c+u*s/2:l<d-u*s/2)&&(gd=!0),gd)h=!0;else if(md===1?l<c+op:l>d-op)return-md}else if(l>c+u*(1-i)/2&&l<d-u*(1-i)/2)return EZ(e)}return h=h||o,h&&(l<c+u*s/2||l>d-u*s/2)?l>c+u/2?1:-1:0}function EZ(t){return kn(Ie)<kn(t)?1:-1}function SZ(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function CZ(t){ym.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&ym.push(r)}}function ap(t){return setTimeout(t,0)}function Ew(t){return clearTimeout(t)}zg&&wt(document,"touchmove",function(t){(nt.active||jl)&&t.cancelable&&t.preventDefault()});nt.utils={on:wt,off:vt,css:ze,find:KM,is:function(e,n){return!!Ui(e,n,e,!1)},extend:lZ,throttle:GM,closest:Ui,toggleClass:_n,clone:S1,index:kn,nextTick:ap,cancelNextTick:Ew,detectDirection:QM,getChild:Hu};nt.get=function(t){return t[Ir]};nt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(nt.utils=Es(Es({},nt.utils),r.utils)),jh.mount(r)})};nt.create=function(t,e){return new nt(t,e)};nt.version=iZ;var Fn=[],Wc,Sw,Cw=!1,fy,py,wm,Yc;function IZ(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?wt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?wt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?wt(document,"touchmove",this._handleFallbackAutoScroll):wt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?vt(document,"dragover",this._handleAutoScroll):(vt(document,"pointermove",this._handleFallbackAutoScroll),vt(document,"touchmove",this._handleFallbackAutoScroll),vt(document,"mousemove",this._handleFallbackAutoScroll)),xI(),lp(),uZ()},nulling:function(){wm=Sw=Wc=Cw=Yc=fy=py=null,Fn.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(wm=n,r||this.options.forceAutoScrollFallback||Bh||ro||hd){my(n,this.options,a,r);var l=ko(a,!0);Cw&&(!Yc||s!==fy||o!==py)&&(Yc&&xI(),Yc=setInterval(function(){var u=ko(document.elementFromPoint(s,o),!0);u!==l&&(l=u,lp()),my(n,i.options,u,r)},10),fy=s,py=o)}else{if(!this.options.bubbleScroll||ko(a,!0)===ys()){lp();return}my(n,this.options,ko(a,!1),!1)}}},Pi(t,{pluginName:"scroll",initializeByDefault:!0})}function lp(){Fn.forEach(function(t){clearInterval(t.pid)}),Fn=[]}function xI(){clearInterval(Yc)}var my=GM(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=ys(),u=!1,c;Sw!==n&&(Sw=n,lp(),Wc=e.scroll,c=e.scrollFn,Wc===!0&&(Wc=ko(n,!0)));var d=0,h=Wc;do{var f=h,p=yn(f),m=p.top,v=p.bottom,b=p.left,g=p.right,_=p.width,y=p.height,w=void 0,T=void 0,P=f.scrollWidth,A=f.scrollHeight,I=ze(f),E=f.scrollLeft,U=f.scrollTop;f===l?(w=_<P&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),T=y<A&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(w=_<P&&(I.overflowX==="auto"||I.overflowX==="scroll"),T=y<A&&(I.overflowY==="auto"||I.overflowY==="scroll"));var F=w&&(Math.abs(g-i)<=o&&E+_<P)-(Math.abs(b-i)<=o&&!!E),N=T&&(Math.abs(v-s)<=o&&U+y<A)-(Math.abs(m-s)<=o&&!!U);if(!Fn[d])for(var D=0;D<=d;D++)Fn[D]||(Fn[D]={});(Fn[d].vx!=F||Fn[d].vy!=N||Fn[d].el!==f)&&(Fn[d].el=f,Fn[d].vx=F,Fn[d].vy=N,clearInterval(Fn[d].pid),(F!=0||N!=0)&&(u=!0,Fn[d].pid=setInterval((function(){r&&this.layer===0&&nt.active._onTouchMove(wm);var O=Fn[this.layer].vy?Fn[this.layer].vy*a:0,R=Fn[this.layer].vx?Fn[this.layer].vx*a:0;typeof c=="function"&&c.call(nt.dragged.parentNode[Ir],R,O,t,wm,Fn[this.layer].el)!=="continue"||qM(Fn[this.layer].el,R,O)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==l&&(h=ko(h,!1)));Cw=u}},30),t2=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=r||s;a();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(d)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function C1(){}C1.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Hu(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:t2};Pi(C1,{pluginName:"revertOnSpill"});function I1(){}I1.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:t2};Pi(I1,{pluginName:"removeOnSpill"});var Ei;function AZ(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;Ei=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var u=this.sortable.el,c=this.options;if(i&&i!==u){var d=Ei;s(i)!==!1?(_n(i,c.swapClass,!0),Ei=i):Ei=null,d&&d!==Ei&&_n(d,c.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;Ei&&_n(Ei,a.swapClass,!1),Ei&&(a.swap||i&&i.options.swap)&&s!==Ei&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),kZ(s,Ei),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Ei=null}},Pi(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Ei}}})}function kZ(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=kn(t),s=kn(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var ut=[],oi=[],Tc,Ni,Ec=!1,Gr=!1,Pl=!1,sn,Sc,Mf;function DZ(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?wt(document,"pointerup",this._deselectMultiDrag):(wt(document,"mouseup",this._deselectMultiDrag),wt(document,"touchend",this._deselectMultiDrag)),wt(document,"keydown",this._checkKeyDown),wt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";ut.length&&Ni===e?ut.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;sn=r},delayEnded:function(){this.isMultiDrag=~ut.indexOf(sn)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<ut.length;s++)oi.push(S1(ut[s])),oi[s].sortableIndex=ut[s].sortableIndex,oi[s].draggable=!1,oi[s].style["will-change"]="",_n(oi[s],this.options.selectedClass,!1),ut[s]===sn&&_n(oi[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ut.length&&Ni===r&&(PI(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(PI(!1,i),oi.forEach(function(o){ze(o,"display","")}),r(),Mf=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(oi.forEach(function(o){ze(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),Mf=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Ni&&Ni.multiDrag._deselectMultiDrag(),ut.forEach(function(r){r.sortableIndex=kn(r)}),ut=ut.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Pl=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){ut.forEach(function(o){o!==sn&&ze(o,"position","absolute")});var s=yn(sn,!1,!0,!0);ut.forEach(function(o){o!==sn&&II(o,s)}),Gr=!0,Ec=!0}i.animateAll(function(){Gr=!1,Ec=!1,r.options.animation&&ut.forEach(function(o){ay(o)}),r.options.sort&&$f()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Gr&&~ut.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;ut.length>1&&(ut.forEach(function(a){s.addAnimationState({target:a,rect:Gr?yn(a):o}),ay(a),a.fromRect=o,r.removeAnimationState(a)}),Gr=!1,xZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,u=this.options;if(s){if(i&&o._hideClone(),Ec=!1,u.animation&&ut.length>1&&(Gr||!i&&!o.options.sort&&!l)){var c=yn(sn,!1,!0,!0);ut.forEach(function(h){h!==sn&&(II(h,c),a.appendChild(h))}),Gr=!0}if(!i)if(Gr||$f(),ut.length>1){var d=Mf;o._showClone(r),o.options.animation&&!Mf&&d&&oi.forEach(function(h){o.addAnimationState({target:h,rect:Sc}),h.fromRect=Sc,h.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(ut.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Sc=Pi({},r);var o=Oa(sn,!0);Sc.top-=o.f,Sc.left-=o.e}},dragOverAnimationComplete:function(){Gr&&(Gr=!1,$f())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,u=n.putSortable,c=u||this.sortable;if(r){var d=this.options,h=s.children;if(!Pl)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),_n(sn,d.selectedClass,!~ut.indexOf(sn)),~ut.indexOf(sn))ut.splice(ut.indexOf(sn),1),Tc=null,jc({sortable:o,rootEl:i,name:"deselect",targetEl:sn,originalEvt:r});else{if(ut.push(sn),jc({sortable:o,rootEl:i,name:"select",targetEl:sn,originalEvt:r}),r.shiftKey&&Tc&&o.el.contains(Tc)){var f=kn(Tc),p=kn(sn);if(~f&&~p&&f!==p){var m,v;for(p>f?(v=f,m=p):(v=p,m=f+1);v<m;v++)~ut.indexOf(h[v])||(_n(h[v],d.selectedClass,!0),ut.push(h[v]),jc({sortable:o,rootEl:i,name:"select",targetEl:h[v],originalEvt:r}))}}else Tc=sn;Ni=c}if(Pl&&this.isMultiDrag){if(Gr=!1,(s[Ir].options.sort||s!==i)&&ut.length>1){var b=yn(sn),g=kn(sn,":not(."+this.options.selectedClass+")");if(!Ec&&d.animation&&(sn.thisAnimationDuration=null),c.captureAnimationState(),!Ec&&(d.animation&&(sn.fromRect=b,ut.forEach(function(y){if(y.thisAnimationDuration=null,y!==sn){var w=Gr?yn(y):b;y.fromRect=w,c.addAnimationState({target:y,rect:w})}})),$f(),ut.forEach(function(y){h[g]?s.insertBefore(y,h[g]):s.appendChild(y),g++}),l===kn(sn))){var _=!1;ut.forEach(function(y){if(y.sortableIndex!==kn(y)){_=!0;return}}),_&&a("update")}ut.forEach(function(y){ay(y)}),c.animateAll()}Ni=c}(i===s||u&&u.lastPutMode!=="clone")&&oi.forEach(function(y){y.parentNode&&y.parentNode.removeChild(y)})}},nullingGlobal:function(){this.isMultiDrag=Pl=!1,oi.length=0},destroyGlobal:function(){this._deselectMultiDrag(),vt(document,"pointerup",this._deselectMultiDrag),vt(document,"mouseup",this._deselectMultiDrag),vt(document,"touchend",this._deselectMultiDrag),vt(document,"keydown",this._checkKeyDown),vt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Pl<"u"&&Pl)&&Ni===this.sortable&&!(n&&Ui(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;ut.length;){var r=ut[0];_n(r,this.options.selectedClass,!1),ut.shift(),jc({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvt:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Pi(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Ir];!r||!r.options.multiDrag||~ut.indexOf(n)||(Ni&&Ni!==r&&(Ni.multiDrag._deselectMultiDrag(),Ni=r),_n(n,r.options.selectedClass,!0),ut.push(n))},deselect:function(n){var r=n.parentNode[Ir],i=ut.indexOf(n);!r||!r.options.multiDrag||!~i||(_n(n,r.options.selectedClass,!1),ut.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return ut.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Gr&&s!==sn?o=-1:Gr?o=kn(s,":not(."+n.options.selectedClass+")"):o=kn(s),i.push({multiDragElement:s,index:o})}),{items:ZJ(ut),clones:[].concat(oi),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function xZ(t,e){ut.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function PI(t,e){oi.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function $f(){ut.forEach(function(t){t!==sn&&t.parentNode&&t.parentNode.removeChild(t)})}nt.mount(new IZ);nt.mount(I1,C1);const PZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:DZ,Sortable:nt,Swap:AZ,default:nt},Symbol.toStringTag,{value:"Module"})),RZ=HM(PZ);(function(t,e){(function(r,i){t.exports=i(qJ,RZ)})(typeof self<"u"?self:KJ,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,u){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:u})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var c in a)o.d(u,c,(function(d){return a[d]}).bind(null,c));return u},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),u={};u[l]="z",i.exports=String(u)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,u,c){if(a(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(d){return l.call(u,d)};case 2:return function(d,h){return l.call(u,d,h)};case 3:return function(d,h,f){return l.call(u,d,h,f)}}return function(){return l.apply(u,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(h){try{return l(h)}catch{return c.slice()}};i.exports.f=function(f){return c&&u.call(f)=="[object Window]"?d(f):l(a(f))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),u=o("5c6c"),c=o("fc6a"),d=o("c04e"),h=o("5135"),f=o("0cfb"),p=Object.getOwnPropertyDescriptor;s.f=a?p:function(v,b){if(v=c(v),b=d(b,!0),f)try{return p(v,b)}catch{}if(h(v,b))return u(!l.f.call(v,b),v[b])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,u=o("a640"),c=o("ae40"),d=u("reduce"),h=c("reduce",{1:0});a({target:"Array",proto:!0,forced:!d||!h},{reduce:function(p){return l(this,p,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(u,c){var d=u.exec;if(typeof d=="function"){var h=d.call(u,c);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("17c2"),c=o("9112");for(var d in l){var h=a[d],f=h&&h.prototype;if(f&&f.forEach!==u)try{c(f,"forEach",u)}catch{f.forEach=u}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),u=o("ae40"),c=l("forEach"),d=u("forEach");i.exports=!c||!d?function(f){return a(this,f,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),u=!1;try{var c=0,d={next:function(){return{done:!!c++}},return:function(){u=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}i.exports=function(h,f){if(!f&&!u)return!1;var p=!1;try{var m={};m[l]=function(){return{next:function(){return{done:p=!0}}}},h(m)}catch{}return p}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),u=o("2d00"),c=l("species");i.exports=function(d){return u>=51||!a(function(){var h=[],f=h.constructor={};return f[c]=function(){return{foo:1}},h[d](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,u=Math.min;i.exports=function(c,d){var h=a(c);return h<0?l(h+d,0):u(h,d)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,u=o("9112"),c=o("6eeb"),d=o("ce4e"),h=o("e893"),f=o("94ca");i.exports=function(p,m){var v=p.target,b=p.global,g=p.stat,_,y,w,T,P,A;if(b?y=a:g?y=a[v]||d(v,{}):y=(a[v]||{}).prototype,y)for(w in m){if(P=m[w],p.noTargetGet?(A=l(y,w),T=A&&A.value):T=y[w],_=f(b?w:v+(g?".":"#")+w,p.forced),!_&&T!==void 0){if(typeof P==typeof T)continue;h(P,T)}(p.sham||T&&T.sham)&&u(P,"sham",!0),c(y,w,P,p)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),u=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(d){return a(d,u)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),u=o("d039"),c=o("ad6d"),d="toString",h=RegExp.prototype,f=h[d],p=u(function(){return f.call({source:"a",flags:"b"})!="/a/b"}),m=f.name!=d;(p||m)&&a(RegExp.prototype,d,function(){var b=l(this),g=String(b.source),_=b.flags,y=String(_===void 0&&b instanceof RegExp&&!("flags"in h)?c.call(b):_);return"/"+g+"/"+y},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,u=o("50c4"),c=o("5a34"),d=o("1d80"),h=o("ab13"),f=o("c430"),p="".startsWith,m=Math.min,v=h("startsWith"),b=!f&&!v&&!!function(){var g=l(String.prototype,"startsWith");return g&&!g.writable}();a({target:"String",proto:!0,forced:!b&&!v},{startsWith:function(_){var y=String(d(this));c(_);var w=u(m(arguments.length>1?arguments[1]:void 0,y.length)),T=String(_);return p?p.call(y,T,w):y.slice(w,w+T.length)===T}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),u=a.process,c=u&&u.versions,d=c&&c.v8,h,f;d?(h=d.split("."),f=h[0]+h[1]):l&&(h=l.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=l.match(/Chrome\/(\d+)/),h&&(f=h[1]))),i.exports=f&&+f},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),u=o("b622"),c=u("iterator");i.exports=function(d){if(d!=null)return d[c]||d["@@iterator"]||l[a(d)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("825a"),c=o("df75");i.exports=a?Object.defineProperties:function(h,f){u(h);for(var p=c(f),m=p.length,v=0,b;m>v;)l.f(h,b=p[v++],f[b]);return h}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),u=o("7dd0"),c="String Iterator",d=l.set,h=l.getterFor(c);u(String,"String",function(f){d(this,{type:c,string:String(f),index:0})},function(){var p=h(this),m=p.string,v=p.index,b;return v>=m.length?{value:void 0,done:!0}:(b=a(m,v),p.index+=b.length,{value:b,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),u=o("9bf2"),c=a("unscopables"),d=Array.prototype;d[c]==null&&u.f(d,c,{configurable:!0,value:l(null)}),i.exports=function(h){d[c][h]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),u=o("b622"),c=u("match");i.exports=function(d){var h;return a(d)&&((h=d[c])!==void 0?!!h:l(d)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),u=o("23cb"),c=function(d){return function(h,f,p){var m=a(h),v=l(m.length),b=u(p,v),g;if(d&&f!=f){for(;v>b;)if(g=m[b++],g!=g)return!0}else for(;v>b;b++)if((d||b in m)&&m[b]===f)return d||b||0;return!d&&-1}};i.exports={includes:c(!0),indexOf:c(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,u=o("1dde"),c=o("ae40"),d=u("filter"),h=c("filter");a({target:"Array",proto:!0,forced:!d||!h},{filter:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),u=o("9bdd"),c=o("e95a"),d=o("50c4"),h=o("8418"),f=o("35a1");i.exports=function(m){var v=l(m),b=typeof this=="function"?this:Array,g=arguments.length,_=g>1?arguments[1]:void 0,y=_!==void 0,w=f(v),T=0,P,A,I,E,U,F;if(y&&(_=a(_,g>2?arguments[2]:void 0,2)),w!=null&&!(b==Array&&c(w)))for(E=w.call(v),U=E.next,A=new b;!(I=U.call(E)).done;T++)F=y?u(E,_,[I.value,T],!0):I.value,h(A,T,F);else for(P=d(v.length),A=new b(P);P>T;T++)F=y?_(v[T],T):v[T],h(A,T,F);return A.length=T,A}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(c){return l(c)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(u){return u>0?l(a(u),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),u=o("7b0b"),c=o("50c4"),d=o("a691"),h=o("1d80"),f=o("8aa5"),p=o("14c3"),m=Math.max,v=Math.min,b=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g,y=function(w){return w===void 0?w:String(w)};a("replace",2,function(w,T,P,A){var I=A.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,E=A.REPLACE_KEEPS_$0,U=I?"$":"$0";return[function(D,O){var R=h(this),B=D==null?void 0:D[w];return B!==void 0?B.call(D,R,O):T.call(String(R),D,O)},function(N,D){if(!I&&E||typeof D=="string"&&D.indexOf(U)===-1){var O=P(T,N,this,D);if(O.done)return O.value}var R=l(N),B=String(this),Y=typeof D=="function";Y||(D=String(D));var $=R.global;if($){var S=R.unicode;R.lastIndex=0}for(var X=[];;){var Q=p(R,B);if(Q===null||(X.push(Q),!$))break;var pe=String(Q[0]);pe===""&&(R.lastIndex=f(B,c(R.lastIndex),S))}for(var me="",te=0,V=0;V<X.length;V++){Q=X[V];for(var W=String(Q[0]),se=m(v(d(Q.index),B.length),0),G=[],ue=1;ue<Q.length;ue++)G.push(y(Q[ue]));var ve=Q.groups;if(Y){var ie=[W].concat(G,se,B);ve!==void 0&&ie.push(ve);var C=String(D.apply(void 0,ie))}else C=F(W,B,se,G,ve,D);se>=te&&(me+=B.slice(te,se)+C,te=se+W.length)}return me+B.slice(te)}];function F(N,D,O,R,B,Y){var $=O+N.length,S=R.length,X=_;return B!==void 0&&(B=u(B),X=g),T.call(Y,X,function(Q,pe){var me;switch(pe.charAt(0)){case"$":return"$";case"&":return N;case"`":return D.slice(0,O);case"'":return D.slice($);case"<":me=B[pe.slice(1,-1)];break;default:var te=+pe;if(te===0)return Q;if(te>S){var V=b(te/10);return V===0?Q:V<=S?R[V-1]===void 0?pe.charAt(1):R[V-1]+pe.charAt(1):Q}me=R[te-1]}return me===void 0?"":me})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),u=o("7418"),c=o("825a");i.exports=a("Reflect","ownKeys")||function(h){var f=l.f(c(h)),p=u.f;return p?f.concat(p(h)):f}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),u=o("7b0b"),c=o("50c4"),d=o("1c0b"),h=o("65f0");a({target:"Array",proto:!0},{flatMap:function(p){var m=u(this),v=c(m.length),b;return d(p),b=h(m,0),b.length=l(b,m,m,v,0,1,p,arguments.length>1?arguments[1]:void 0),b}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),u=function(c){return function(d,h){var f=String(l(d)),p=a(h),m=f.length,v,b;return p<0||p>=m?c?"":void 0:(v=f.charCodeAt(p),v<55296||v>56319||p+1===m||(b=f.charCodeAt(p+1))<56320||b>57343?c?f.charAt(p):v:c?f.slice(p,p+2):(v-55296<<10)+(b-56320)+65536)}};i.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),u=o("b622"),c=u("species");i.exports=function(d,h){var f;return l(d)&&(f=d.constructor,typeof f=="function"&&(f===Array||l(f.prototype))?f=void 0:a(f)&&(f=f[c],f===null&&(f=void 0))),new(f===void 0?Array:f)(h===0?0:h)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),u=o("861d"),c=o("9112"),d=o("5135"),h=o("f772"),f=o("d012"),p=l.WeakMap,m,v,b,g=function(I){return b(I)?v(I):m(I,{})},_=function(I){return function(E){var U;if(!u(E)||(U=v(E)).type!==I)throw TypeError("Incompatible receiver, "+I+" required");return U}};if(a){var y=new p,w=y.get,T=y.has,P=y.set;m=function(I,E){return P.call(y,I,E),E},v=function(I){return w.call(y,I)||{}},b=function(I){return T.call(y,I)}}else{var A=h("state");f[A]=!0,m=function(I,E){return c(I,A,E),E},v=function(I){return d(I,A)?I[A]:{}},b=function(I){return d(I,A)}}i.exports={set:m,get:v,has:b,enforce:g,getterFor:_}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),u=o("5135"),c=o("ce4e"),d=o("8925"),h=o("69f3"),f=h.get,p=h.enforce,m=String(String).split("String");(i.exports=function(v,b,g,_){var y=_?!!_.unsafe:!1,w=_?!!_.enumerable:!1,T=_?!!_.noTargetGet:!1;if(typeof g=="function"&&(typeof b=="string"&&!u(g,"name")&&l(g,"name",b),p(g).source=m.join(typeof b=="string"?b:"")),v===a){w?v[b]=g:c(b,g);return}else y?!T&&v[b]&&(w=!0):delete v[b];w?v[b]=g:l(v,b,g)})(Function.prototype,"toString",function(){return typeof this=="function"&&f(this).source||d(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),u=o("fc6a"),c=o("d1e7").f,d=function(h){return function(f){for(var p=u(f),m=l(p),v=m.length,b=0,g=[],_;v>b;)_=m[b++],(!a||c.call(p,_))&&g.push(h?[_,p[_]]:p[_]);return g}};i.exports={entries:d(!0),values:d(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),u=o("e538"),c=o("9bf2").f;i.exports=function(d){var h=a.Symbol||(a.Symbol={});l(h,d)||c(h,d,{value:u.f(d)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),u=o("7839"),c=o("d012"),d=o("1be4"),h=o("cc12"),f=o("f772"),p=">",m="<",v="prototype",b="script",g=f("IE_PROTO"),_=function(){},y=function(I){return m+b+p+I+m+"/"+b+p},w=function(I){I.write(y("")),I.close();var E=I.parentWindow.Object;return I=null,E},T=function(){var I=h("iframe"),E="java"+b+":",U;return I.style.display="none",d.appendChild(I),I.src=String(E),U=I.contentWindow.document,U.open(),U.write(y("document.F=Object")),U.close(),U.F},P,A=function(){try{P=document.domain&&new ActiveXObject("htmlfile")}catch{}A=P?w(P):T();for(var I=u.length;I--;)delete A[v][u[I]];return A()};c[g]=!0,i.exports=Object.create||function(E,U){var F;return E!==null?(_[v]=a(E),F=new _,_[v]=null,F[g]=E):F=A(),U===void 0?F:l(F,U)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),u=o("e163"),c=o("d2bb"),d=o("d44e"),h=o("9112"),f=o("6eeb"),p=o("b622"),m=o("c430"),v=o("3f8c"),b=o("ae93"),g=b.IteratorPrototype,_=b.BUGGY_SAFARI_ITERATORS,y=p("iterator"),w="keys",T="values",P="entries",A=function(){return this};i.exports=function(I,E,U,F,N,D,O){l(U,E,F);var R=function(V){if(V===N&&X)return X;if(!_&&V in $)return $[V];switch(V){case w:return function(){return new U(this,V)};case T:return function(){return new U(this,V)};case P:return function(){return new U(this,V)}}return function(){return new U(this)}},B=E+" Iterator",Y=!1,$=I.prototype,S=$[y]||$["@@iterator"]||N&&$[N],X=!_&&S||R(N),Q=E=="Array"&&$.entries||S,pe,me,te;if(Q&&(pe=u(Q.call(new I)),g!==Object.prototype&&pe.next&&(!m&&u(pe)!==g&&(c?c(pe,g):typeof pe[y]!="function"&&h(pe,y,A)),d(pe,B,!0,!0),m&&(v[B]=A))),N==T&&S&&S.name!==T&&(Y=!0,X=function(){return S.call(this)}),(!m||O)&&$[y]!==X&&h($,y,X),v[E]=X,N)if(me={values:R(T),keys:D?X:R(w),entries:R(P)},O)for(te in me)(_||Y||!(te in $))&&f($,te,me[te]);else a({target:E,proto:!0,forced:_||Y},me);return me}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),u=a.WeakMap;i.exports=typeof u=="function"&&/native code/.test(l(u))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),u=o("5c6c");i.exports=function(c,d,h){var f=a(d);f in c?l.f(c,f,u(0,h)):c[f]=h}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,u;(function(c,d){l=[],a=d,u=typeof a=="function"?a.apply(s,l):a,u!==void 0&&(i.exports=u)})(typeof self<"u"?self:this,function(){function c(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(P){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,f=/@([^@]*):(\d+):(\d+)\s*$/ig,p=h.exec(P.stack)||f.exec(P.stack),m=p&&p[1]||!1,v=p&&p[2]||!1,b=document.location.href.replace(document.location.hash,""),g,_,y,w=document.getElementsByTagName("script");m===b&&(g=document.documentElement.outerHTML,_=new RegExp("(?:[^\\n]+?\\n){0,"+(v-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),y=g.replace(_,"$1").trim());for(var T=0;T<w.length;T++)if(w[T].readyState==="interactive"||w[T].src===m||m===b&&w[T].innerHTML&&w[T].innerHTML.trim()===y)return w[T];return null}}return c})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,u,c){return u+(c?a(l,u).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("5c6c");i.exports=a?function(c,d,h){return l.f(c,d,u(1,h))}:function(c,d,h){return c[d]=h,c}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),u=RegExp.prototype.exec,c=String.prototype.replace,d=u,h=function(){var v=/a/,b=/b*/g;return u.call(v,"a"),u.call(b,"a"),v.lastIndex!==0||b.lastIndex!==0}(),f=l.UNSUPPORTED_Y||l.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,m=h||p||f;m&&(d=function(b){var g=this,_,y,w,T,P=f&&g.sticky,A=a.call(g),I=g.source,E=0,U=b;return P&&(A=A.replace("y",""),A.indexOf("g")===-1&&(A+="g"),U=String(b).slice(g.lastIndex),g.lastIndex>0&&(!g.multiline||g.multiline&&b[g.lastIndex-1]!==`
`)&&(I="(?: "+I+")",U=" "+U,E++),y=new RegExp("^(?:"+I+")",A)),p&&(y=new RegExp("^"+I+"$(?!\\s)",A)),h&&(_=g.lastIndex),w=u.call(P?y:g,U),P?w?(w.input=w.input.slice(E),w[0]=w[0].slice(E),w.index=g.lastIndex,g.lastIndex+=w[0].length):g.lastIndex=0:h&&w&&(g.lastIndex=g.global?w.index+w[0].length:_),p&&w&&w.length>1&&c.call(w[0],y,function(){for(T=1;T<arguments.length-2;T++)arguments[T]===void 0&&(w[T]=void 0)}),w}),i.exports=d},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,u=function(p,m){var v=d[c(p)];return v==f?!0:v==h?!1:typeof m=="function"?a(m):!!m},c=u.normalize=function(p){return String(p).replace(l,".").toLowerCase()},d=u.data={},h=u.NATIVE="N",f=u.POLYFILL="P";i.exports=u},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("e8b5"),c=o("861d"),d=o("7b0b"),h=o("50c4"),f=o("8418"),p=o("65f0"),m=o("1dde"),v=o("b622"),b=o("2d00"),g=v("isConcatSpreadable"),_=9007199254740991,y="Maximum allowed index exceeded",w=b>=51||!l(function(){var I=[];return I[g]=!1,I.concat()[0]!==I}),T=m("concat"),P=function(I){if(!c(I))return!1;var E=I[g];return E!==void 0?!!E:u(I)},A=!w||!T;a({target:"Array",proto:!0,forced:A},{concat:function(E){var U=d(this),F=p(U,0),N=0,D,O,R,B,Y;for(D=-1,R=arguments.length;D<R;D++)if(Y=D===-1?U:arguments[D],P(Y)){if(B=h(Y.length),N+B>_)throw TypeError(y);for(O=0;O<B;O++,N++)O in Y&&f(F,N,Y[O])}else{if(N>=_)throw TypeError(y);f(F,N++,Y)}return F.length=N,F}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,u,c,d){try{return d?u(a(c)[0],c[1]):u(c)}catch(f){var h=l.return;throw h!==void 0&&a(h.call(l)),f}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),u=o("825a"),c=o("c04e"),d=Object.defineProperty;s.f=a?d:function(f,p,m){if(u(f),p=c(p,!0),u(m),l)try{return d(f,p,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(f[p]=m.value),f}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),u=o("5c6c"),c=o("d44e"),d=o("3f8c"),h=function(){return this};i.exports=function(f,p,m){var v=p+" Iterator";return f.prototype=l(a,{next:u(1,m)}),c(f,v,!1,!0),d[v]=h,f}},"9f7f":function(i,s,o){var a=o("d039");function l(u,c){return RegExp(u,c)}s.UNSUPPORTED_Y=a(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),u=o("0366"),c=function(d,h,f,p,m,v,b,g){for(var _=m,y=0,w=b?u(b,g,3):!1,T;y<p;){if(y in f){if(T=w?w(f[y],y,h):f[y],v>0&&a(T))_=c(d,h,T,l(T.length),_,v-1)-1;else{if(_>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[_]=T}_++}y++}return _};i.exports=c},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),u=o("a691"),c=o("50c4"),d=o("7b0b"),h=o("65f0"),f=o("8418"),p=o("1dde"),m=o("ae40"),v=p("splice"),b=m("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,_=Math.min,y=9007199254740991,w="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!v||!b},{splice:function(P,A){var I=d(this),E=c(I.length),U=l(P,E),F=arguments.length,N,D,O,R,B,Y;if(F===0?N=D=0:F===1?(N=0,D=E-U):(N=F-2,D=_(g(u(A),0),E-U)),E+N-D>y)throw TypeError(w);for(O=h(I,D),R=0;R<D;R++)B=U+R,B in I&&f(O,R,I[B]);if(O.length=D,N<D){for(R=U;R<E-D;R++)B=R+D,Y=R+N,B in I?I[Y]=I[B]:delete I[Y];for(R=E;R>E-D+N;R--)delete I[R-1]}else if(N>D)for(R=E-D;R>U;R--)B=R+D-1,Y=R+N-1,B in I?I[Y]=I[B]:delete I[Y];for(R=0;R<N;R++)I[R+U]=arguments[R+2];return I.length=E-D+N,O}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),u=o("d066"),c=o("c430"),d=o("83ab"),h=o("4930"),f=o("fdbf"),p=o("d039"),m=o("5135"),v=o("e8b5"),b=o("861d"),g=o("825a"),_=o("7b0b"),y=o("fc6a"),w=o("c04e"),T=o("5c6c"),P=o("7c73"),A=o("df75"),I=o("241c"),E=o("057f"),U=o("7418"),F=o("06cf"),N=o("9bf2"),D=o("d1e7"),O=o("9112"),R=o("6eeb"),B=o("5692"),Y=o("f772"),$=o("d012"),S=o("90e3"),X=o("b622"),Q=o("e538"),pe=o("746f"),me=o("d44e"),te=o("69f3"),V=o("b727").forEach,W=Y("hidden"),se="Symbol",G="prototype",ue=X("toPrimitive"),ve=te.set,ie=te.getterFor(se),C=Object[G],M=l.Symbol,j=u("JSON","stringify"),oe=F.f,ae=N.f,be=E.f,Se=D.f,ye=B("symbols"),_e=B("op-symbols"),ge=B("string-to-symbol-registry"),ke=B("symbol-to-string-registry"),Le=B("wks"),Be=l.QObject,qe=!Be||!Be[G]||!Be[G].findChild,it=d&&p(function(){return P(ae({},"a",{get:function(){return ae(this,"a",{value:7}).a}})).a!=7})?function(We,Ue,Xe){var Tt=oe(C,Ue);Tt&&delete C[Ue],ae(We,Ue,Xe),Tt&&We!==C&&ae(C,Ue,Tt)}:ae,K=function(We,Ue){var Xe=ye[We]=P(M[G]);return ve(Xe,{type:se,tag:We,description:Ue}),d||(Xe.description=Ue),Xe},L=f?function(We){return typeof We=="symbol"}:function(We){return Object(We)instanceof M},H=function(Ue,Xe,Tt){Ue===C&&H(_e,Xe,Tt),g(Ue);var Pt=w(Xe,!0);return g(Tt),m(ye,Pt)?(Tt.enumerable?(m(Ue,W)&&Ue[W][Pt]&&(Ue[W][Pt]=!1),Tt=P(Tt,{enumerable:T(0,!1)})):(m(Ue,W)||ae(Ue,W,T(1,{})),Ue[W][Pt]=!0),it(Ue,Pt,Tt)):ae(Ue,Pt,Tt)},q=function(Ue,Xe){g(Ue);var Tt=y(Xe),Pt=A(Tt).concat(Te(Tt));return V(Pt,function(zr){(!d||Re.call(Tt,zr))&&H(Ue,zr,Tt[zr])}),Ue},le=function(Ue,Xe){return Xe===void 0?P(Ue):q(P(Ue),Xe)},Re=function(Ue){var Xe=w(Ue,!0),Tt=Se.call(this,Xe);return this===C&&m(ye,Xe)&&!m(_e,Xe)?!1:Tt||!m(this,Xe)||!m(ye,Xe)||m(this,W)&&this[W][Xe]?Tt:!0},He=function(Ue,Xe){var Tt=y(Ue),Pt=w(Xe,!0);if(!(Tt===C&&m(ye,Pt)&&!m(_e,Pt))){var zr=oe(Tt,Pt);return zr&&m(ye,Pt)&&!(m(Tt,W)&&Tt[W][Pt])&&(zr.enumerable=!0),zr}},he=function(Ue){var Xe=be(y(Ue)),Tt=[];return V(Xe,function(Pt){!m(ye,Pt)&&!m($,Pt)&&Tt.push(Pt)}),Tt},Te=function(Ue){var Xe=Ue===C,Tt=be(Xe?_e:y(Ue)),Pt=[];return V(Tt,function(zr){m(ye,zr)&&(!Xe||m(C,zr))&&Pt.push(ye[zr])}),Pt};if(h||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor");var Ue=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Xe=S(Ue),Tt=function(Pt){this===C&&Tt.call(_e,Pt),m(this,W)&&m(this[W],Xe)&&(this[W][Xe]=!1),it(this,Xe,T(1,Pt))};return d&&qe&&it(C,Xe,{configurable:!0,set:Tt}),K(Xe,Ue)},R(M[G],"toString",function(){return ie(this).tag}),R(M,"withoutSetter",function(We){return K(S(We),We)}),D.f=Re,N.f=H,F.f=He,I.f=E.f=he,U.f=Te,Q.f=function(We){return K(X(We),We)},d&&(ae(M[G],"description",{configurable:!0,get:function(){return ie(this).description}}),c||R(C,"propertyIsEnumerable",Re,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:M}),V(A(Le),function(We){pe(We)}),a({target:se,stat:!0,forced:!h},{for:function(We){var Ue=String(We);if(m(ge,Ue))return ge[Ue];var Xe=M(Ue);return ge[Ue]=Xe,ke[Xe]=Ue,Xe},keyFor:function(Ue){if(!L(Ue))throw TypeError(Ue+" is not a symbol");if(m(ke,Ue))return ke[Ue]},useSetter:function(){qe=!0},useSimple:function(){qe=!1}}),a({target:"Object",stat:!0,forced:!h,sham:!d},{create:le,defineProperty:H,defineProperties:q,getOwnPropertyDescriptor:He}),a({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:he,getOwnPropertySymbols:Te}),a({target:"Object",stat:!0,forced:p(function(){U.f(1)})},{getOwnPropertySymbols:function(Ue){return U.f(_(Ue))}}),j){var Ce=!h||p(function(){var We=M();return j([We])!="[null]"||j({a:We})!="{}"||j(Object(We))!="{}"});a({target:"JSON",stat:!0,forced:Ce},{stringify:function(Ue,Xe,Tt){for(var Pt=[Ue],zr=1,Zg;arguments.length>zr;)Pt.push(arguments[zr++]);if(Zg=Xe,!(!b(Xe)&&Ue===void 0||L(Ue)))return v(Xe)||(Xe=function(Y2,zh){if(typeof Zg=="function"&&(zh=Zg.call(this,Y2,zh)),!L(zh))return zh}),Pt[1]=Xe,j.apply(null,Pt)}})}M[G][ue]||O(M[G],ue,M[G].valueOf),me(M,se),$[W]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),u=o("1c7e"),c=!u(function(d){Array.from(d)});a({target:"Array",stat:!0,forced:c},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,u){var c=[][l];return!!c&&a(function(){c.call(null,u||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(u){var c=/./;try{"/./"[u](c)}catch{try{return c[l]=!1,"/./"[u](c)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("5135"),c=Object.defineProperty,d={},h=function(f){throw f};i.exports=function(f,p){if(u(d,f))return d[f];p||(p={});var m=[][f],v=u(p,"ACCESSORS")?p.ACCESSORS:!1,b=u(p,0)?p[0]:h,g=u(p,1)?p[1]:void 0;return d[f]=!!m&&!l(function(){if(v&&!a)return!0;var _={length:-1};v?c(_,1,{enumerable:!0,get:h}):_[1]=1,m.call(_,b,g)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),u=o("5135"),c=o("b622"),d=o("c430"),h=c("iterator"),f=!1,p=function(){return this},m,v,b;[].keys&&(b=[].keys(),"next"in b?(v=a(a(b)),v!==Object.prototype&&(m=v)):f=!0),m==null&&(m={}),!d&&!u(m,h)&&l(m,h,p),i.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:f}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,u=Function.prototype,c=u.toString,d=/^\s*function ([^ (]*)/,h="name";a&&!(h in u)&&l(u,h,{configurable:!0,get:function(){try{return c.call(this).match(d)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),u=o("5135"),c=o("90e3"),d=o("4930"),h=o("fdbf"),f=l("wks"),p=a.Symbol,m=h?p:p&&p.withoutSetter||c;i.exports=function(v){return u(f,v)||(d&&u(p,v)?f[v]=p[v]:f[v]=m("Symbol."+v)),f[v]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),u=o("df75"),c=o("d039"),d=c(function(){u(1)});a({target:"Object",stat:!0,forced:d},{keys:function(f){return u(l(f))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),u=o("7b0b"),c=o("50c4"),d=o("65f0"),h=[].push,f=function(p){var m=p==1,v=p==2,b=p==3,g=p==4,_=p==6,y=p==5||_;return function(w,T,P,A){for(var I=u(w),E=l(I),U=a(T,P,3),F=c(E.length),N=0,D=A||d,O=m?D(w,F):v?D(w,0):void 0,R,B;F>N;N++)if((y||N in E)&&(R=E[N],B=U(R,N,I),p)){if(m)O[N]=B;else if(B)switch(p){case 3:return!0;case 5:return R;case 6:return N;case 2:h.call(O,R)}else if(g)return!1}return _?-1:b||g?g:O}};i.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,u){if(!a(l))return l;var c,d;if(u&&typeof(c=l.toString)=="function"&&!a(d=c.call(l))||typeof(c=l.valueOf)=="function"&&!a(d=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!a(d=c.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),u="__core-js_shared__",c=a[u]||l(u,{});i.exports=c},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,u=o("44d2"),c=o("ae40"),d="findIndex",h=!0,f=c(d);d in[]&&Array(1)[d](function(){h=!1}),a({target:"Array",proto:!0,forced:h||!f},{findIndex:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),u(d)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,u=o("a640"),c=o("ae40"),d=[].indexOf,h=!!d&&1/[1].indexOf(1,-0)<0,f=u("indexOf"),p=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:h||!f||!p},{indexOf:function(v){return h?d.apply(this,arguments)||0:l(this,v,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),u=o("4d64").indexOf,c=o("d012");i.exports=function(d,h){var f=l(d),p=0,m=[],v;for(v in f)!a(c,v)&&a(f,v)&&m.push(v);for(;h.length>p;)a(f,v=h[p++])&&(~u(m,v)||m.push(v));return m}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,u=o("44d2"),c=o("ae40"),d=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!d},{includes:function(f){return l(this,f,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),u=a.document,c=l(u)&&l(u.createElement);i.exports=function(d){return c?u.createElement(d):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(u,c){try{l(a,u,c)}catch{a[u]=c}return c}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),u=function(c){return typeof c=="function"?c:void 0};i.exports=function(c,d){return arguments.length<2?u(a[c])||u(l[c]):a[c]&&a[c][d]||l[c]&&l[c][d]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);s.f=u?function(d){var h=l(this,d);return!!h&&h.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,c={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(c,[]),u=c instanceof Array}catch{}return function(f,p){return a(f),l(p),u?d.call(f,p):f.__proto__=p,f}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),u=o("b041");a||l(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),u=o("b622"),c=u("toStringTag");i.exports=function(d,h,f){d&&!l(d=f?d:d.prototype,c)&&a(d,c,{configurable:!0,value:h})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),u=o("44ad"),c=o("50c4"),d=function(h){return function(f,p,m,v){a(p);var b=l(f),g=u(b),_=c(b.length),y=h?_-1:0,w=h?-1:1;if(m<2)for(;;){if(y in g){v=g[y],y+=w;break}if(y+=w,h?y<0:_<=y)throw TypeError("Reduce of empty array with no initial value")}for(;h?y>=0:_>y;y+=w)y in g&&(v=p(v,g[y],y,b));return v}};i.exports={left:d(!1),right:d(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),u=o("b622"),c=o("9263"),d=o("9112"),h=u("species"),f=!l(function(){var g=/./;return g.exec=function(){var _=[];return _.groups={a:"7"},_},"".replace(g,"$<a>")!=="7"}),p=function(){return"a".replace(/./,"$0")==="$0"}(),m=u("replace"),v=function(){return/./[m]?/./[m]("a","$0")==="":!1}(),b=!l(function(){var g=/(?:)/,_=g.exec;g.exec=function(){return _.apply(this,arguments)};var y="ab".split(g);return y.length!==2||y[0]!=="a"||y[1]!=="b"});i.exports=function(g,_,y,w){var T=u(g),P=!l(function(){var N={};return N[T]=function(){return 7},""[g](N)!=7}),A=P&&!l(function(){var N=!1,D=/a/;return g==="split"&&(D={},D.constructor={},D.constructor[h]=function(){return D},D.flags="",D[T]=/./[T]),D.exec=function(){return N=!0,null},D[T](""),!N});if(!P||!A||g==="replace"&&!(f&&p&&!v)||g==="split"&&!b){var I=/./[T],E=y(T,""[g],function(N,D,O,R,B){return D.exec===c?P&&!B?{done:!0,value:I.call(D,O,R)}:{done:!0,value:N.call(O,D,R)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:v}),U=E[0],F=E[1];a(String.prototype,g,U),a(RegExp.prototype,T,_==2?function(N,D){return F.call(N,this,D)}:function(N){return F.call(N,this)})}w&&d(RegExp.prototype[T],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,u=o("1dde"),c=o("ae40"),d=u("map"),h=c("map");a({target:"Array",proto:!0,forced:!d||!h},{map:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(u){return u&&u.Math==Math&&u};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("56ef"),c=o("fc6a"),d=o("06cf"),h=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(p){for(var m=c(p),v=d.f,b=u(m),g={},_=0,y,w;b.length>_;)w=v(m,y=b[_++]),w!==void 0&&h(g,y,w);return g}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return u});function l(){return typeof window<"u"?window.console:a.console}var u=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("e260"),c=o("9112"),d=o("b622"),h=d("iterator"),f=d("toStringTag"),p=u.values;for(var m in l){var v=a[m],b=v&&v.prototype;if(b){if(b[h]!==p)try{c(b,h,p)}catch{b[h]=p}if(b[f]||c(b,f,m),l[m]){for(var g in u)if(b[g]!==u[g])try{c(b,g,u[g])}catch{b[g]=u[g]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(c){return a(c,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("da84"),c=o("5135"),d=o("861d"),h=o("9bf2").f,f=o("e893"),p=u.Symbol;if(l&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var m={},v=function(){var T=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),P=this instanceof v?new p(T):T===void 0?p():p(T);return T===""&&(m[P]=!0),P};f(v,p);var b=v.prototype=p.prototype;b.constructor=v;var g=b.toString,_=String(p("test"))=="Symbol(test)",y=/^Symbol\((.*)\)[^)]+$/;h(b,"description",{configurable:!0,get:function(){var T=d(this)?this.valueOf():this,P=g.call(T);if(c(m,T))return"";var A=_?P.slice(7,-1):P.replace(y,"$1");return A===""?void 0:A}}),a({global:!0,forced:!0},{Symbol:v})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),u=o("f772"),c=o("e177"),d=u("IE_PROTO"),h=Object.prototype;i.exports=c?Object.getPrototypeOf:function(f){return f=l(f),a(f,d)?f[d]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?h:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),u=o("3f8c"),c=o("69f3"),d=o("7dd0"),h="Array Iterator",f=c.set,p=c.getterFor(h);i.exports=d(Array,"Array",function(m,v){f(this,{type:h,target:a(m),index:0,kind:v})},function(){var m=p(this),v=m.target,b=m.kind,g=m.index++;return!v||g>=v.length?(m.target=void 0,{value:void 0,done:!0}):b=="keys"?{value:g,done:!1}:b=="values"?{value:v[g],done:!1}:{value:[g,v[g]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("fc6a"),c=o("06cf").f,d=o("83ab"),h=l(function(){c(1)}),f=!d||h;a({target:"Object",stat:!0,forced:f,sham:!d},{getOwnPropertyDescriptor:function(m,v){return c(u(m),v)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),u=o("06cf"),c=o("9bf2");i.exports=function(d,h){for(var f=l(h),p=c.f,m=u.f,v=0;v<f.length;v++){var b=f[v];a(d,b)||p(d,b,m(h,b))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(u){return a(u)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),u=a("iterator"),c=Array.prototype;i.exports=function(d){return d!==void 0&&(l.Array===d||c[u]===d)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),u=o("b622"),c=u("toStringTag"),d=l(function(){return arguments}())=="Arguments",h=function(f,p){try{return f[p]}catch{}};i.exports=a?l:function(f){var p,m,v;return f===void 0?"Undefined":f===null?"Null":typeof(m=h(p=Object(f),c))=="string"?m:d?l(p):(v=l(p))=="Object"&&typeof p.callee=="function"?"Arguments":v}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),u=a("keys");i.exports=function(c){return u[c]||(u[c]=l(c))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(o.p=u[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function c(L,H,q){return H in L?Object.defineProperty(L,H,{value:q,enumerable:!0,configurable:!0,writable:!0}):L[H]=q,L}function d(L,H){var q=Object.keys(L);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(L);H&&(le=le.filter(function(Re){return Object.getOwnPropertyDescriptor(L,Re).enumerable})),q.push.apply(q,le)}return q}function h(L){for(var H=1;H<arguments.length;H++){var q=arguments[H]!=null?arguments[H]:{};H%2?d(Object(q),!0).forEach(function(le){c(L,le,q[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(q)):d(Object(q)).forEach(function(le){Object.defineProperty(L,le,Object.getOwnPropertyDescriptor(q,le))})}return L}function f(L){if(Array.isArray(L))return L}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function p(L,H){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(L)))){var q=[],le=!0,Re=!1,He=void 0;try{for(var he=L[Symbol.iterator](),Te;!(le=(Te=he.next()).done)&&(q.push(Te.value),!(H&&q.length===H));le=!0);}catch(Ce){Re=!0,He=Ce}finally{try{!le&&he.return!=null&&he.return()}finally{if(Re)throw He}}return q}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function m(L,H){(H==null||H>L.length)&&(H=L.length);for(var q=0,le=new Array(H);q<H;q++)le[q]=L[q];return le}function v(L,H){if(L){if(typeof L=="string")return m(L,H);var q=Object.prototype.toString.call(L).slice(8,-1);if(q==="Object"&&L.constructor&&(q=L.constructor.name),q==="Map"||q==="Set")return Array.from(L);if(q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q))return m(L,H)}}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(L,H){return f(L)||p(L,H)||v(L,H)||b()}function _(L){if(Array.isArray(L))return m(L)}function y(L){if(typeof Symbol<"u"&&Symbol.iterator in Object(L))return Array.from(L)}function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(L){return _(L)||y(L)||v(L)||w()}var P=o("a352"),A=o.n(P);function I(L){L.parentElement!==null&&L.parentElement.removeChild(L)}function E(L,H,q){var le=q===0?L.children[0]:L.children[q-1].nextSibling;L.insertBefore(H,le)}var U=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function F(L){var H=Object.create(null);return function(le){var Re=H[le];return Re||(H[le]=L(le))}}var N=/-(\w)/g,D=F(function(L){return L.replace(N,function(H,q){return q.toUpperCase()})});o("5db7"),o("73d9");var O=["Start","Add","Remove","Update","End"],R=["Choose","Unchoose","Sort","Filter","Clone"],B=["Move"],Y=[B,O,R].flatMap(function(L){return L}).map(function(L){return"on".concat(L)}),$={manage:B,manageAndEmit:O,emit:R};function S(L){return Y.indexOf(L)!==-1}o("caad"),o("2ca0");var X=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Q(L){return X.includes(L)}function pe(L){return["transition-group","TransitionGroup"].includes(L)}function me(L){return["id","class","role","style"].includes(L)||L.startsWith("data-")||L.startsWith("aria-")||L.startsWith("on")}function te(L){return L.reduce(function(H,q){var le=g(q,2),Re=le[0],He=le[1];return H[Re]=He,H},{})}function V(L){var H=L.$attrs,q=L.componentData,le=q===void 0?{}:q,Re=te(Object.entries(H).filter(function(He){var he=g(He,2),Te=he[0];return he[1],me(Te)}));return h(h({},Re),le)}function W(L){var H=L.$attrs,q=L.callBackBuilder,le=te(se(H));Object.entries(q).forEach(function(He){var he=g(He,2),Te=he[0],Ce=he[1];$[Te].forEach(function(We){le["on".concat(We)]=Ce(We)})});var Re="[data-draggable]".concat(le.draggable||"");return h(h({},le),{},{draggable:Re})}function se(L){return Object.entries(L).filter(function(H){var q=g(H,2),le=q[0];return q[1],!me(le)}).map(function(H){var q=g(H,2),le=q[0],Re=q[1];return[D(le),Re]}).filter(function(H){var q=g(H,2),le=q[0];return q[1],!S(le)})}o("c740");function G(L,H){if(!(L instanceof H))throw new TypeError("Cannot call a class as a function")}function ue(L,H){for(var q=0;q<H.length;q++){var le=H[q];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(L,le.key,le)}}function ve(L,H,q){return H&&ue(L.prototype,H),q&&ue(L,q),L}var ie=function(H){var q=H.el;return q},C=function(H,q){return H.__draggable_context=q},M=function(H){return H.__draggable_context},j=function(){function L(H){var q=H.nodes,le=q.header,Re=q.default,He=q.footer,he=H.root,Te=H.realList;G(this,L),this.defaultNodes=Re,this.children=[].concat(T(le),T(Re),T(He)),this.externalComponent=he.externalComponent,this.rootTransition=he.transition,this.tag=he.tag,this.realList=Te}return ve(L,[{key:"render",value:function(q,le){var Re=this.tag,He=this.children,he=this._isRootComponent,Te=he?{default:function(){return He}}:He;return q(Re,le,Te)}},{key:"updated",value:function(){var q=this.defaultNodes,le=this.realList;q.forEach(function(Re,He){C(ie(Re),{element:le[He],index:He})})}},{key:"getUnderlyingVm",value:function(q){return M(q)}},{key:"getVmIndexFromDomIndex",value:function(q,le){var Re=this.defaultNodes,He=Re.length,he=le.children,Te=he.item(q);if(Te===null)return He;var Ce=M(Te);if(Ce)return Ce.index;if(He===0)return 0;var We=ie(Re[0]),Ue=T(he).findIndex(function(Xe){return Xe===We});return q<Ue?0:He}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),L}(),oe=o("8bbf");function ae(L,H){var q=L[H];return q?q():[]}function be(L){var H=L.$slots,q=L.realList,le=L.getKey,Re=q||[],He=["header","footer"].map(function(Xe){return ae(H,Xe)}),he=g(He,2),Te=he[0],Ce=he[1],We=H.item;if(!We)throw new Error("draggable element must have an item slot");var Ue=Re.flatMap(function(Xe,Tt){return We({element:Xe,index:Tt}).map(function(Pt){return Pt.key=le(Xe),Pt.props=h(h({},Pt.props||{}),{},{"data-draggable":!0}),Pt})});if(Ue.length!==Re.length)throw new Error("Item slot must have only one child");return{header:Te,footer:Ce,default:Ue}}function Se(L){var H=pe(L),q=!Q(L)&&!H;return{transition:H,externalComponent:q,tag:q?Object(oe.resolveComponent)(L):H?oe.TransitionGroup:L}}function ye(L){var H=L.$slots,q=L.tag,le=L.realList,Re=L.getKey,He=be({$slots:H,realList:le,getKey:Re}),he=Se(q);return new j({nodes:He,root:he,realList:le})}function _e(L,H){var q=this;Object(oe.nextTick)(function(){return q.$emit(L.toLowerCase(),H)})}function ge(L){var H=this;return function(q,le){if(H.realList!==null)return H["onDrag".concat(L)](q,le)}}function ke(L){var H=this,q=ge.call(this,L);return function(le,Re){q.call(H,le,Re),_e.call(H,L,le)}}var Le=null,Be={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(H){return H}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},qe=["update:modelValue","change"].concat(T([].concat(T($.manageAndEmit),T($.emit)).map(function(L){return L.toLowerCase()}))),it=Object(oe.defineComponent)({name:"draggable",inheritAttrs:!1,props:Be,emits:qe,data:function(){return{error:!1}},render:function(){try{this.error=!1;var H=this.$slots,q=this.$attrs,le=this.tag,Re=this.componentData,He=this.realList,he=this.getKey,Te=ye({$slots:H,tag:le,realList:He,getKey:he});this.componentStructure=Te;var Ce=V({$attrs:q,componentData:Re});return Te.render(oe.h,Ce)}catch(We){return this.error=!0,Object(oe.h)("pre",{style:{color:"red"}},We.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&U.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var H=this;if(!this.error){var q=this.$attrs,le=this.$el,Re=this.componentStructure;Re.updated();var He=W({$attrs:q,callBackBuilder:{manageAndEmit:function(Ce){return ke.call(H,Ce)},emit:function(Ce){return _e.bind(H,Ce)},manage:function(Ce){return ge.call(H,Ce)}}}),he=le.nodeType===1?le:le.parentElement;this._sortable=new A.a(he,He),this.targetDomElement=he,he.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var H=this.list;return H||this.modelValue},getKey:function(){var H=this.itemKey;return typeof H=="function"?H:function(q){return q[H]}}},watch:{$attrs:{handler:function(H){var q=this._sortable;q&&se(H).forEach(function(le){var Re=g(le,2),He=Re[0],he=Re[1];q.option(He,he)})},deep:!0}},methods:{getUnderlyingVm:function(H){return this.componentStructure.getUnderlyingVm(H)||null},getUnderlyingPotencialDraggableComponent:function(H){return H.__draggable_component__},emitChanges:function(H){var q=this;Object(oe.nextTick)(function(){return q.$emit("change",H)})},alterList:function(H){if(this.list){H(this.list);return}var q=T(this.modelValue);H(q),this.$emit("update:modelValue",q)},spliceList:function(){var H=arguments,q=function(Re){return Re.splice.apply(Re,T(H))};this.alterList(q)},updatePosition:function(H,q){var le=function(He){return He.splice(q,0,He.splice(H,1)[0])};this.alterList(le)},getRelatedContextFromMoveEvent:function(H){var q=H.to,le=H.related,Re=this.getUnderlyingPotencialDraggableComponent(q);if(!Re)return{component:Re};var He=Re.realList,he={list:He,component:Re};if(q!==le&&He){var Te=Re.getUnderlyingVm(le)||{};return h(h({},Te),he)}return he},getVmIndexFromDomIndex:function(H){return this.componentStructure.getVmIndexFromDomIndex(H,this.targetDomElement)},onDragStart:function(H){this.context=this.getUnderlyingVm(H.item),H.item._underlying_vm_=this.clone(this.context.element),Le=H.item},onDragAdd:function(H){var q=H.item._underlying_vm_;if(q!==void 0){I(H.item);var le=this.getVmIndexFromDomIndex(H.newIndex);this.spliceList(le,0,q);var Re={element:q,newIndex:le};this.emitChanges({added:Re})}},onDragRemove:function(H){if(E(this.$el,H.item,H.oldIndex),H.pullMode==="clone"){I(H.clone);return}var q=this.context,le=q.index,Re=q.element;this.spliceList(le,1);var He={element:Re,oldIndex:le};this.emitChanges({removed:He})},onDragUpdate:function(H){I(H.item),E(H.from,H.item,H.oldIndex);var q=this.context.index,le=this.getVmIndexFromDomIndex(H.newIndex);this.updatePosition(q,le);var Re={element:this.context.element,oldIndex:q,newIndex:le};this.emitChanges({moved:Re})},computeFutureIndex:function(H,q){if(!H.element)return 0;var le=T(q.to.children).filter(function(Te){return Te.style.display!=="none"}),Re=le.indexOf(q.related),He=H.component.getVmIndexFromDomIndex(Re),he=le.indexOf(Le)!==-1;return he||!q.willInsertAfter?He:He+1},onDragMove:function(H,q){var le=this.move,Re=this.realList;if(!le||!Re)return!0;var He=this.getRelatedContextFromMoveEvent(H),he=this.computeFutureIndex(He,H),Te=h(h({},this.context),{},{futureIndex:he}),Ce=h(h({},H),{},{relatedContext:He,draggedContext:Te});return le(Ce,q)},onDragEnd:function(){Le=null}}}),K=it;s.default=K},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),u=o("e8b5"),c=o("23cb"),d=o("50c4"),h=o("fc6a"),f=o("8418"),p=o("b622"),m=o("1dde"),v=o("ae40"),b=m("slice"),g=v("slice",{ACCESSORS:!0,0:0,1:2}),_=p("species"),y=[].slice,w=Math.max;a({target:"Array",proto:!0,forced:!b||!g},{slice:function(P,A){var I=h(this),E=d(I.length),U=c(P,E),F=c(A===void 0?E:A,E),N,D,O;if(u(I)&&(N=I.constructor,typeof N=="function"&&(N===Array||u(N.prototype))?N=void 0:l(N)&&(N=N[_],N===null&&(N=void 0)),N===Array||N===void 0))return y.call(I,U,F);for(D=new(N===void 0?Array:N)(w(F-U,0)),O=0;U<F;U++,O++)U in I&&f(D,O,I[U]);return D.length=O,D}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(u){return a(l(u))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(WM);var OZ=WM.exports;const n2=GJ(OZ),NZ={key:0,class:"mb-5 p-4 border-y"},MZ={class:"flex"},$Z=Ee({__name:"StringListField",props:{name:{},label:{},placeholder:{},modelValue:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=re(""),s=Z({get:()=>r.modelValue,set:d=>{u("update:modelValue",d),i.value=""}}),o=d=>{if(d.moved){const{oldIndex:h,newIndex:f}=d.moved,p=[...s.value];if(p.length===2)s.value=[p[1],p[0]];else{const m=p.splice(h,1)[0];p.splice(f,0,m),s.value=p}}},a=()=>{i.value.length&&(s.value=[...s.value,i.value])},l=d=>{s.value.splice(d,1)},u=n;return e({test:()=>{}}),(d,h)=>(x(),z("div",null,[ee(qn,{id:d.name,name:d.name,label:d.label,modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=f=>i.value=f),max:200,placeholder:d.placeholder,onKeydown:h[1]||(h[1]=at(f=>a(),["enter"]))},null,8,["id","name","label","modelValue","placeholder"]),s.value.length?(x(),z("div",NZ,[ee(k(n2),{modelValue:s.value,itemKey:"index",onChange:o},{item:fe(({element:f,index:p})=>[J("div",MZ,[ee(qn,{class:"w-full",id:`${d.name}.${p}`,name:d.name,"model-value":f,max:200,"delete-button":"","onUpdate:modelValue":m=>s.value[p]=m.toString(),"onUpdate:delete":m=>l(p)},null,8,["id","name","model-value","onUpdate:modelValue","onUpdate:delete"])])]),_:1},8,["modelValue"])])):ne("",!0)]))}}),LZ={class:"mt-5 border border-gray-400 rounded-lg"},UZ={class:"px-5 pb-5"},FZ={class:"flex justify-evenly font-bold"},VZ=Ee({__name:"BlogPostContentSectionDialogSection",props:{selected:{},selectedBlogPost:{},index:{},isOpen:{type:Boolean}},emits:["update:selected","delete"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=re(),o=re(),a=re(),l=re(),u=re(),c=re(),d=re(),h=re(),f=()=>({selected:{title:{value:r.selected.title,error:""},subTitle:{value:r.selected.subTitle,error:""},description:{value:r.selected.description,error:""},coverImageUrl:{value:r.selected.coverImageUrl,error:""},alignment:{value:r.selected.alignment,error:""},countdown:{value:r.selected.countdown,error:""},timer:{value:r.selected.timer,error:""},bullets:{value:r.selected.bullets,error:""}}}),p=On(f()),m=async()=>(await Promise.all([s.value.test(),o.value.test(),a.value.test(),u.value.test(),l.value.test(),c.value.test(),d.value.test(),h.value.test()]),Object.keys(p.selected).map(v=>p.selected[v].error).every(v=>!v));return St(()=>r.selectedBlogPost,()=>{p.selected=f().selected}),St(()=>p.selected,()=>{i("update:selected",{title:p.selected.title.value,subTitle:p.selected.subTitle.value,description:p.selected.description.value,alignment:p.selected.alignment.value,coverImageUrl:p.selected.coverImageUrl.value,countdown:p.selected.countdown.value,timer:p.selected.timer.value,bullets:p.selected.bullets.value})},{deep:!0}),e({test:m}),(v,b)=>(x(),z("div",LZ,[v.isOpen?(x(),ce(th,{key:0,text:`Section ${v.index+1}`,"button-type":"orange"},{default:fe(()=>[J("div",UZ,[ee(qn,{ref_key:"title",ref:s,id:v.index,name:"title",label:"Section Title",modelValue:p.selected.title.value,"onUpdate:modelValue":b[0]||(b[0]=g=>p.selected.title.value=g),error:p.selected.title.error,"onUpdate:error":b[1]||(b[1]=g=>p.selected.title.error=g),max:50},null,8,["id","modelValue","error"]),ee(qn,{ref_key:"subTitle",ref:o,id:v.index,name:"subTitle",label:"Section Subtitle",modelValue:p.selected.subTitle.value,"onUpdate:modelValue":b[2]||(b[2]=g=>p.selected.subTitle.value=g),error:p.selected.subTitle.error,"onUpdate:error":b[3]||(b[3]=g=>p.selected.subTitle.error=g),max:200},null,8,["id","modelValue","error"]),ee(qn,{ref_key:"description",ref:a,id:v.index,name:"description",label:"Section Description",modelValue:p.selected.description.value,"onUpdate:modelValue":b[4]||(b[4]=g=>p.selected.description.value=g),error:p.selected.description.error,"onUpdate:error":b[5]||(b[5]=g=>p.selected.description.error=g),max:300,"input-props":{type:"textarea",rows:p.selected.description.value.split(`
`).length<=5?p.selected.description.value.split(`
`).length:5}},null,8,["id","modelValue","error","input-props"]),ee(Tr,{ref_key:"alignment",ref:l,id:v.index,name:"alignment",label:"Alignment",modelValue:p.selected.alignment.value,"onUpdate:modelValue":b[6]||(b[6]=g=>p.selected.alignment.value=g),error:p.selected.alignment.error,"onUpdate:error":b[7]||(b[7]=g=>p.selected.alignment.error=g),options:k(wM),rules:[k(kt).Required]},null,8,["id","modelValue","error","options","rules"]),ee(T1,{ref_key:"coverImageUrl",ref:u,id:v.index,name:"coverImageUrl",label:"Cover image",modelValue:p.selected.coverImageUrl.value,"onUpdate:modelValue":b[8]||(b[8]=g=>p.selected.coverImageUrl.value=g),error:p.selected.coverImageUrl.error,"onUpdate:error":b[9]||(b[9]=g=>p.selected.coverImageUrl.error=g)},null,8,["id","modelValue","error"]),ee(pm,{ref_key:"countdown",ref:c,id:v.index,name:"countdown",label:"Countdown",modelValue:p.selected.countdown.value,"onUpdate:modelValue":b[10]||(b[10]=g=>p.selected.countdown.value=g),error:p.selected.countdown.error,"onUpdate:error":b[11]||(b[11]=g=>p.selected.countdown.error=g)},null,8,["id","modelValue","error"]),ee(pm,{ref_key:"timer",ref:d,id:v.index,name:"timer",label:"Timer",modelValue:p.selected.timer.value,"onUpdate:modelValue":b[12]||(b[12]=g=>p.selected.timer.value=g),error:p.selected.timer.error,"onUpdate:error":b[13]||(b[13]=g=>p.selected.timer.error=g)},null,8,["id","modelValue","error"]),ee($Z,{ref_key:"bullets",ref:h,name:"bullets",label:"Section Bullets",placeholder:"New bullet...",modelValue:p.selected.bullets.value,"onUpdate:modelValue":b[14]||(b[14]=g=>p.selected.bullets.value=g)},null,8,["modelValue"]),J("div",FZ,[ee(_t,{class:"w-1/2",type:"danger",outlined:"",onClick:b[15]||(b[15]=g=>v.$emit("delete"))},{default:fe(()=>[Qe(" Delete ")]),_:1})])])]),_:1},8,["text"])):ne("",!0)]))}}),BZ={class:"mt-3 flex justify-center"},jZ=Ee({__name:"BlogPostContentDialogSection",props:{selected:{},selectedBlogPost:{},isOpen:{type:Boolean}},emits:["update:selected"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=re(),o=re(),a=re(),l=re(),u=re(),c=re(),d=re([]),h=()=>({selected:{title:{value:r.selected.title,error:""},description:{value:r.selected.description,error:""},descriptionFooter:{value:r.selected.descriptionFooter,error:""},coverImageUrl:{value:r.selected.coverImageUrl,error:""},countdown:{value:r.selected.countdown,error:""},timer:{value:r.selected.timer,error:""},sections:{value:r.selected.sections.map(g=>({id:fm(),...g})),error:""}}}),f=On(h()),p=()=>{f.selected.sections.value.push({id:fm(),title:"",subTitle:"",description:"",alignment:"left",coverImageUrl:"",countdown:null,timer:null,bullets:[]})},m=(g,_)=>{f.selected.sections.value.splice(_,1,{id:f.selected.sections.value[_].id,...g})},v=g=>{f.selected.sections.value.splice(g,1)},b=async()=>{for(const g of d.value)if(!await g.test())return!1;return await Promise.all([s.value.test(),o.value.test(),a.value.test(),l.value.test(),u.value.test(),c.value.test()]),Object.keys(f.selected).map(g=>f.selected[g].error).every(g=>!g)};return St(()=>r.selectedBlogPost,()=>{f.selected=h().selected}),St(()=>f.selected,()=>{i("update:selected",{title:f.selected.title.value,description:f.selected.description.value,descriptionFooter:f.selected.descriptionFooter.value,coverImageUrl:f.selected.coverImageUrl.value,countdown:f.selected.countdown.value,timer:f.selected.timer.value,sections:f.selected.sections.value})},{deep:!0}),e({test:b}),(g,_)=>(x(),z(Ae,null,[ee(qn,{ref_key:"title",ref:s,name:"title",label:"Title",placeholder:"Amazing Post",modelValue:f.selected.title.value,"onUpdate:modelValue":_[0]||(_[0]=y=>f.selected.title.value=y),error:f.selected.title.error,"onUpdate:error":_[1]||(_[1]=y=>f.selected.title.error=y),rules:[k(kt).Required],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),ee(qn,{ref_key:"description",ref:o,name:"description",label:"Description",placeholder:"Something about my post...",modelValue:f.selected.description.value,"onUpdate:modelValue":_[2]||(_[2]=y=>f.selected.description.value=y),error:f.selected.description.error,"onUpdate:error":_[3]||(_[3]=y=>f.selected.description.error=y),"max-length":500,"input-props":{type:"textarea",rows:f.selected.description.value.split(`
`).length<=5?f.selected.description.value.split(`
`).length:5}},null,8,["modelValue","error","input-props"]),ee(T1,{ref_key:"coverImageUrl",ref:l,id:"coverImageUrl",name:"coverImageUrl",label:"Cover image",modelValue:f.selected.coverImageUrl.value,"onUpdate:modelValue":_[4]||(_[4]=y=>f.selected.coverImageUrl.value=y),error:f.selected.coverImageUrl.error,"onUpdate:error":_[5]||(_[5]=y=>f.selected.coverImageUrl.error=y),"blog-post":g.selectedBlogPost??void 0},null,8,["modelValue","error","blog-post"]),g.isOpen?(x(),ce(th,{key:0,text:"Other content"},{default:fe(()=>[ee(qn,{ref_key:"descriptionFooter",ref:a,name:"descriptionFooter",label:"Footer",placeholder:"Some beautiful ending...",modelValue:f.selected.descriptionFooter.value,"onUpdate:modelValue":_[6]||(_[6]=y=>f.selected.descriptionFooter.value=y),error:f.selected.descriptionFooter.error,"onUpdate:error":_[7]||(_[7]=y=>f.selected.descriptionFooter.error=y),"max-length":300,"input-props":{type:"textarea",rows:f.selected.descriptionFooter.value.split(`
`).length<=5?f.selected.descriptionFooter.value.split(`
`).length:5}},null,8,["modelValue","error","input-props"]),ee(pm,{ref_key:"countdown",ref:u,name:"countdown",label:"Countdown",modelValue:f.selected.countdown.value,"onUpdate:modelValue":_[8]||(_[8]=y=>f.selected.countdown.value=y),error:f.selected.countdown.error,"onUpdate:error":_[9]||(_[9]=y=>f.selected.countdown.error=y)},null,8,["modelValue","error"]),ee(pm,{ref_key:"timer",ref:c,name:"timer",label:"Timer",modelValue:f.selected.timer.value,"onUpdate:modelValue":_[10]||(_[10]=y=>f.selected.timer.value=y),error:f.selected.timer.error,"onUpdate:error":_[11]||(_[11]=y=>f.selected.timer.error=y)},null,8,["modelValue","error"])]),_:1})):ne("",!0),g.isOpen?(x(),ce(th,{key:1,text:"Sections"},{default:fe(()=>[(x(!0),z(Ae,null,dt(f.selected.sections.value,(y,w)=>(x(),ce(VZ,{key:y.id,ref_for:!0,ref_key:"sections",ref:d,selected:y,"selected-blog-post":g.selectedBlogPost,index:w,"is-open":g.isOpen,"onUpdate:selected":T=>m(T,w),onDelete:T=>v(w)},null,8,["selected","selected-blog-post","index","is-open","onUpdate:selected","onDelete"]))),128)),J("div",BZ,[ee(_t,{class:"w-1/2",type:"action-positive",onClick:p},{default:fe(()=>[Qe(" Add Section ")]),_:1})])]),_:1})):ne("",!0)],64))}}),HZ={class:"m-4"},WZ=["for"],YZ=["id"],vd=Ee({__name:"CheckBoxField",props:{id:{},name:{},label:{},modelValue:{type:Boolean},inputProps:{},labelProps:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=Z({get:()=>r.modelValue,set:u=>{l("update:modelValue",u)}}),s=Z(()=>r.name+(r.id?"."+r.id:"")),o=async u=>{},a=u=>{u.stopPropagation(),l("update:modelValue",!r.modelValue)},l=n;return e({test:o}),(u,c)=>(x(),z("div",HZ,[u.label?(x(),z("label",Xt({key:0,class:"block text-sm font-bold mb-2",for:s.value},u.labelProps),Je(u.label),17,WZ)):ne("",!0),J("div",{class:"checkbox-field",onClick:a},[ps(J("input",Xt({id:s.value,ref:"input","onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d),type:"checkbox"},u.inputProps),null,16,YZ),[[Hm,i.value]])])]))}}),zZ=Ee({__name:"BlogPostSettingsDialogSection",props:{selected:{},selectedBlogPost:{},isOpen:{type:Boolean}},emits:["update:selected"],setup(t,{expose:e,emit:n}){const r=t,i=n,{firebaseUser:s,publicUser:o}=Qt(Qn()),a=Jn(),{allowedPublicUsers:l}=a,{publicUsers:u}=Qt(a),c=re(),d=re(),h=re(),f=re(),p=Z(()=>u.value.map(({id:y,displayName:w})=>({value:y,label:w}))),m=re([]),v=Z(()=>m.value.map(y=>y.displayName).join(", ")),b=()=>({selected:{allowedUserIds:{value:r.selected.allowedUserIds,error:""},locked:{value:r.selected.locked,error:""},archived:{value:r.selected.archived,error:""},pinned:{value:!!r.selected.datePinned,error:""}}}),g=On(b()),_=async()=>(g.selected.allowedUserIds.value.length&&!m.value.length&&(g.selected.allowedUserIds.error="Invalid user ID's"),await Promise.all([d.value.test(),h.value.test(),f.value.test()]),Object.keys(g.selected).map(y=>g.selected[y].error).every(y=>!y));return St(()=>g.selected.allowedUserIds.value,async y=>{m.value=await l(y)}),St(()=>r.selectedBlogPost,()=>{g.selected=b().selected}),St(()=>g.selected,()=>{var y,w;i("update:selected",{allowedUserIds:g.selected.allowedUserIds.value,locked:g.selected.locked.value,archived:g.selected.archived.value,datePinned:g.selected.pinned.value?(y=r.selected)!=null&&y.datePinned?((w=r.selected)==null?void 0:w.datePinned)??null:new Date:null})},{deep:!0}),e({test:_}),(y,w)=>y.isOpen?(x(),ce(th,{key:0,text:"Advanced"},{default:fe(()=>[ee(qn,{name:"allowedUserNames",label:"Allowed users","model-value":v.value,"input-props":{disabled:!0}},null,8,["model-value"]),ee(Tr,{ref_key:"allowedUsers",ref:c,name:"allowedUserIds",label:"Allowed users",options:[{value:k(s).uid,label:k(o).displayName},...p.value.filter(({value:T})=>{var P;return T!==((P=k(s))==null?void 0:P.uid)})],multiple:"","model-value":g.selected.allowedUserIds.value,error:g.selected.allowedUserIds.error,"onUpdate:error":w[0]||(w[0]=T=>g.selected.allowedUserIds.error=T),"onUpdate:arrayValue":w[1]||(w[1]=T=>g.selected.allowedUserIds.value=T)},null,8,["options","model-value","error"]),ee(vd,{ref_key:"pinned",ref:f,name:"pinned",label:"Pinned",modelValue:g.selected.pinned.value,"onUpdate:modelValue":w[2]||(w[2]=T=>g.selected.pinned.value=T)},null,8,["modelValue"]),ee(vd,{ref_key:"locked",ref:d,name:"locked",label:"Locked for commenting",modelValue:g.selected.locked.value,"onUpdate:modelValue":w[3]||(w[3]=T=>g.selected.locked.value=T)},null,8,["modelValue"]),ee(vd,{ref_key:"archived",ref:h,name:"archived",label:"Archived",modelValue:g.selected.archived.value,"onUpdate:modelValue":w[4]||(w[4]=T=>g.selected.archived.value=T)},null,8,["modelValue"])]),_:1})):ne("",!0)}}),KZ=Ee({__name:"BlogPostStylingDialogSection",props:{selected:{},selectedBlogPost:{},isOpen:{type:Boolean}},emits:["update:selected"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=re(),o=re(),a=re(),l=re(),u=re(),c=re(),d=re(),h=()=>({selected:{alignment:{value:r.selected.alignment,error:""},colorPrimary:{value:r.selected.colorPrimary,error:""},colorSecondary:{value:r.selected.colorSecondary,error:""},colorTertiary:{value:r.selected.colorTertiary,error:""},opacityPrimary:{value:r.selected.opacityPrimary,error:""},opacitySecondary:{value:r.selected.opacitySecondary,error:""},opacityTertiary:{value:r.selected.opacityTertiary,error:""}}}),f=On(h()),p=async()=>(await Promise.all([s.value.test(),o.value.test(),a.value.test(),l.value.test(),u.value.test(),c.value.test(),d.value.test()]),Object.keys(f.selected).map(m=>f.selected[m].error).every(m=>!m));return St(()=>r.selectedBlogPost,()=>{f.selected=h().selected}),St(()=>f.selected,()=>{i("update:selected",{alignment:f.selected.alignment.value,colorPrimary:f.selected.colorPrimary.value,colorSecondary:f.selected.colorSecondary.value,colorTertiary:f.selected.colorTertiary.value,opacityPrimary:f.selected.opacityPrimary.value,opacitySecondary:f.selected.opacitySecondary.value,opacityTertiary:f.selected.opacityTertiary.value})},{deep:!0}),e({test:p}),(m,v)=>m.isOpen?(x(),ce(th,{key:0,text:"Styling"},{default:fe(()=>[ee(Tr,{ref_key:"alignment",ref:s,name:"alignment",label:"Alignment",modelValue:f.selected.alignment.value,"onUpdate:modelValue":v[0]||(v[0]=b=>f.selected.alignment.value=b),error:f.selected.alignment.error,"onUpdate:error":v[1]||(v[1]=b=>f.selected.alignment.error=b),options:k(wM),rules:[k(kt).Required]},null,8,["modelValue","error","options","rules"]),ee(Tr,{ref_key:"colorPrimary",ref:o,name:"colorPrimary",label:"Primary Style",modelValue:f.selected.colorPrimary.value,"onUpdate:modelValue":v[2]||(v[2]=b=>f.selected.colorPrimary.value=b),error:f.selected.colorPrimary.error,"onUpdate:error":v[3]||(v[3]=b=>f.selected.colorPrimary.error=b),options:k(lm),rules:[k(kt).Required]},null,8,["modelValue","error","options","rules"]),ee(Tr,{ref_key:"opacityPrimary",ref:u,name:"opacityPrimary",label:"Primary Opacity",modelValue:f.selected.opacityPrimary.value,"onUpdate:modelValue":v[4]||(v[4]=b=>f.selected.opacityPrimary.value=b),error:f.selected.opacityPrimary.error,"onUpdate:error":v[5]||(v[5]=b=>f.selected.opacityPrimary.error=b),options:k(ty)},null,8,["modelValue","error","options"]),ee(Tr,{ref_key:"colorSecondary",ref:a,name:"colorSecondary",label:"Secondary Style",modelValue:f.selected.colorSecondary.value,"onUpdate:modelValue":v[6]||(v[6]=b=>f.selected.colorSecondary.value=b),error:f.selected.colorSecondary.error,"onUpdate:error":v[7]||(v[7]=b=>f.selected.colorSecondary.error=b),options:k(aG)(k(lm).find(b=>b.value===f.selected.colorPrimary.value))},null,8,["modelValue","error","options"]),ee(Tr,{ref_key:"opacitySecondary",ref:c,name:"opacitySecondary",label:"Secondary Opacity",modelValue:f.selected.opacitySecondary.value,"onUpdate:modelValue":v[8]||(v[8]=b=>f.selected.opacitySecondary.value=b),error:f.selected.opacitySecondary.error,"onUpdate:error":v[9]||(v[9]=b=>f.selected.opacitySecondary.error=b),options:k(ty)},null,8,["modelValue","error","options"]),ee(Tr,{ref_key:"colorTertiary",ref:l,name:"colorTertiary",label:"Tertiary Style",modelValue:f.selected.colorTertiary.value,"onUpdate:modelValue":v[10]||(v[10]=b=>f.selected.colorTertiary.value=b),error:f.selected.colorTertiary.error,"onUpdate:error":v[11]||(v[11]=b=>f.selected.colorTertiary.error=b),options:k(lG)},null,8,["modelValue","error","options"]),ee(Tr,{ref_key:"opacityTertiary",ref:d,name:"opacityTertiary",label:"Tertiary Opacity",modelValue:f.selected.opacityTertiary.value,"onUpdate:modelValue":v[12]||(v[12]=b=>f.selected.opacityTertiary.value=b),error:f.selected.opacityTertiary.error,"onUpdate:error":v[13]||(v[13]=b=>f.selected.opacityTertiary.error=b),options:k(ty)},null,8,["modelValue","error","options"])]),_:1})):ne("",!0)}}),GZ=Ee({__name:"BlogPostDialog",props:{isOpen:{type:Boolean},selected:{}},emits:["close","scroll-to-updated"],setup(t,{emit:e}){const n=t,{firebaseUser:r}=Qt(Qn()),i=Jn(),{createBlogPost:s,updateBlogPost:o,deleteFilesOfBlogPost:a,toggleBlogPostVisibility:l}=i,{blogPosts:u}=Qt(i),c=re(),d=re(),h=re(),f=re(),p=()=>{var D,O,R,B,Y,$,S,X,Q,pe,me,te,V,W,se,G,ue,ve;return{id:fm(),content:{title:((D=n.selected)==null?void 0:D.title)??"",description:((O=n.selected)==null?void 0:O.description)??"",descriptionFooter:((R=n.selected)==null?void 0:R.descriptionFooter)??"",coverImageUrl:((B=n.selected)==null?void 0:B.coverImageUrl)??"",timer:((Y=n.selected)==null?void 0:Y.timer)??null,countdown:(($=n.selected)==null?void 0:$.countdown)??null,sections:((S=n.selected)==null?void 0:S.sections)??[]},styling:{alignment:((X=n.selected)==null?void 0:X.alignment)??"center",colorPrimary:((Q=n.selected)==null?void 0:Q.colorPrimary)??"",colorSecondary:((pe=n.selected)==null?void 0:pe.colorSecondary)??"",colorTertiary:((me=n.selected)==null?void 0:me.colorTertiary)??"",opacityPrimary:((te=n.selected)==null?void 0:te.opacityPrimary)??"",opacitySecondary:((V=n.selected)==null?void 0:V.opacitySecondary)??"",opacityTertiary:((W=n.selected)==null?void 0:W.opacityTertiary)??""},settings:{locked:((se=n.selected)==null?void 0:se.locked)??!1,allowedUserIds:((G=n.selected)==null?void 0:G.allowedUserIds)??[],archived:((ue=n.selected)==null?void 0:ue.archived)??!1,datePinned:((ve=n.selected)==null?void 0:ve.datePinned)??null}}},m=On(p()),v=()=>{var D,O;return{id:m.id,date:((D=n.selected)==null?void 0:D.date)||new Date,dateUpdated:((O=n.selected)==null?void 0:O.dateUpdated)||new Date,...m.content,...m.styling,...m.settings,reactions:[]}},b=re(v()),g=Z(()=>Vn.Content.convert(b.value)),_=Z(()=>!!n.selected&&!Wi(Vn.Content.convert(Vn.convert(n.selected)),g.value)),y=Z(()=>Vn.Styling.convert(b.value)),w=Z(()=>!!n.selected&&!Wi(Vn.Styling.convert(Vn.convert(n.selected)),y.value)),T=Z(()=>Vn.Settings.convert(b.value)),P=Z(()=>!!n.selected&&!Wi(Vn.Settings.convert(Vn.convert(n.selected)),T.value)),A=Z(()=>{var D,O,R,B,Y,$;return!!((O=(D=n.selected)==null?void 0:D.allowedUserIds)!=null&&O.length)&&!((R=T.value.allowedUserIds)!=null&&R.length)||!((Y=(B=n.selected)==null?void 0:B.allowedUserIds)!=null&&Y.length)&&!!(($=T.value.allowedUserIds)!=null&&$.length)}),I=Z(()=>{const D=[];return _.value&&D.push("Content"),w.value&&D.push("Styling"),P.value&&D.push("Settings"),D.length?"Update "+Z0(D):void 0}),E=Z(()=>po(n.selected)),U=async()=>{var D,O,R,B,Y;if(await Promise.all([d.value.test(),h.value.test(),f.value.test()]),!n.selected)await s(m.id,b.value,(D=r.value)==null?void 0:D.uid)&&(N("close"),N("scroll-to-updated",m.id));else if(A.value){const $=n.selected.id;N("close"),await l($,Vn.convert(b.value),n.selected.reactions,b.value.allowedUserIds.length?"private":"public",(O=r.value)==null?void 0:O.uid)&&(Ye.success("Successfully updated Post Visibility"),N("scroll-to-updated",$))}else{const $=n.selected.id;let S=[];_.value&&S.push(await o($,g.value,E.value,(R=r.value)==null?void 0:R.uid)),w.value&&S.push(await o($,y.value,E.value,(B=r.value)==null?void 0:B.uid)),P.value&&(S.push(await o($,T.value,E.value,(Y=r.value)==null?void 0:Y.uid)),N("scroll-to-updated",$)),S=S.filter(X=>typeof X=="string"),S.length&&(Ye.success(`Successfully updated Post ${Z0(S)}`),N("close"))}},F=async()=>{a(b.value,n.selected??void 0),Object.assign(m,p()),N("close")};St(()=>n.selected,()=>{const D=p();m.id=D.id,m.content=D.content,m.styling=D.styling,m.settings=D.settings}),St(m,()=>{b.value=v()},{deep:!0});const N=e;return(D,O)=>(x(),ce(_1,{isOpen:D.isOpen,title:D.selected?"Update Post":"Create Post",description:D.selected?"Update this post":"Create a new post","confirm-text":D.selected?I.value:"Create","confirm-loading":k(u).mutationLoading,onConfirm:U,onCancel:F},{default:fe(()=>[J("form",{ref_key:"dialog",ref:c,class:"pt-6 mb-4 xl:px-36"},[ee(jZ,{ref_key:"content",ref:d,selected:m.content,"onUpdate:selected":O[0]||(O[0]=R=>m.content=R),"selected-blog-post":D.selected??void 0,"is-open":D.isOpen},null,8,["selected","selected-blog-post","is-open"]),ee(KZ,{ref_key:"styling",ref:h,selected:m.styling,"onUpdate:selected":O[1]||(O[1]=R=>m.styling=R),"selected-blog-post":D.selected??void 0,"is-open":D.isOpen},null,8,["selected","selected-blog-post","is-open"]),ee(zZ,{ref_key:"settings",ref:f,selected:m.settings,"onUpdate:selected":O[2]||(O[2]=R=>m.settings=R),"selected-blog-post":D.selected??void 0,"is-open":D.isOpen},null,8,["selected","selected-blog-post","is-open"])],512)]),_:1},8,["isOpen","title","description","confirm-text","confirm-loading"]))}}),qZ={key:0,class:"grid grid-cols-6 mb-5 gap-5"},XZ={key:1,class:"grid grid-cols-6 lg:hidden mb-5"},QZ={class:"grid gap-4 md:gap-10 xl:gap-20"},JZ={key:2,class:"flex justify-center mt-5"},ZZ=Ee({__name:"BlogPosts",setup(t){const e=Jn(),{deleteBlogPost:n,fetchBlogPosts:r}=e,{blogPosts:i,visibleBlogPosts:s}=Qt(e),{isOwner:o,firebaseUser:a}=Qt(Qn()),l=re(),u=re(),c=re(!1),d=re(!1),h=re(null),f=re(),p=()=>{h.value=null,c.value=!0},m=w=>{h.value=w,c.value=!0},v=w=>{h.value=w,d.value=!0},b=async w=>{await n(w)&&(d.value=!1,h.value=null)},g=()=>{c.value=!1,h.value=null},_=async w=>{var T;i.value.visibility!==w&&(i.value.visibility=w,i.value.isLastPage=!1,s.value.length||await r((T=a.value)==null?void 0:T.uid),Xf(l.value))},y=async()=>{var T;const w=s.value.length;await r((T=a.value)==null?void 0:T.uid),s.value[w]&&Xf(u.value[w])};return St(()=>{var w;return(w=u.value)==null?void 0:w.length},()=>{var w;if((w=u.value)!=null&&w.length&&f.value){const T=s.value.find(P=>P.id===f.value);if(T){const P=s.value.indexOf(T);Xf(u.value[P]),f.value=void 0}}}),(w,T)=>(x(),z(Ae,null,[J("div",{ref_key:"container",ref:l},[k(a)?(x(),z("div",qZ,[ee(_t,{class:"hidden lg:block col-span-2 xl:col-span-1",type:"orange",outlined:k(i).visibility!=="public",loading:k(i).fetchLoading,onClick:T[0]||(T[0]=P=>_("public"))},{default:fe(()=>[Qe(" Public Posts ")]),_:1},8,["outlined","loading"]),k(o)?(x(),ce(_t,{key:0,class:"col-span-full md:col-start-2 md:col-span-4 lg:col-start-3 lg:col-span-2",onClick:p},{default:fe(()=>[Qe(" New Post ")]),_:1})):ne("",!0),ee(_t,{type:"orange",class:"hidden lg:block col-start-5 col-span-2 xl:col-start-6 xl:col-span-1",outlined:k(i).visibility!=="private",loading:k(i).fetchLoading,onClick:T[1]||(T[1]=P=>_("private"))},{default:fe(()=>[Qe(" Private Posts ")]),_:1},8,["outlined","loading"])])):ne("",!0),k(a)?(x(),z("div",XZ,[ee(_t,{class:"col-span-3 md:col-start-2 md:col-span-2 rounded-r-none",type:"orange",outlined:k(i).visibility!=="public",loading:k(i).fetchLoading,onClick:T[2]||(T[2]=P=>_("public"))},{default:fe(()=>[Qe(" Public Posts ")]),_:1},8,["outlined","loading"]),ee(_t,{type:"orange",class:"col-span-3 md:col-start-4 md:col-span-2 rounded-l-none",outlined:k(i).visibility!=="private",loading:k(i).fetchLoading,onClick:T[3]||(T[3]=P=>_("private"))},{default:fe(()=>[Qe(" Private Posts ")]),_:1},8,["outlined","loading"])])):ne("",!0),J("div",QZ,[k(s).length?(x(!0),z(Ae,{key:0},dt(k(s),P=>(x(),z("div",{key:P.id,ref_for:!0,ref_key:"posts",ref:u},[ee(jM,{post:P,onEditClicked:A=>m(P),onDeleteClicked:A=>v(P)},null,8,["post","onEditClicked","onDeleteClicked"])]))),128)):k(i).fetchLoading?ne("",!0):(x(),ce(Rr,{key:1,class:"!bg-red-900 !bg-opacity-40",title:"No posts"}))]),k(i).isLastPage?ne("",!0):(x(),z("div",JZ,[ee(_t,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:k(i).fetchLoading,onClick:y},{default:fe(()=>[Qe(" Load more posts ")]),_:1},8,["loading"])]))],512),ee(GZ,{isOpen:c.value,selected:h.value,onClose:g,onScrollToUpdated:T[4]||(T[4]=P=>f.value=P)},null,8,["isOpen","selected"]),h.value?(x(),ce(_1,{key:0,title:"Delete Post",isOpen:d.value,description:[` Are you sure you want to delete this post called ' ${h.value.title}'?`,"This cannot be undone."],"confirm-text":"Confirm","confirm-props":{type:"danger",outlined:!0},onConfirm:T[5]||(T[5]=P=>b(h.value.id)),onCancel:T[6]||(T[6]=P=>d.value=!1)},null,8,["isOpen","description"])):ne("",!0)],64))}}),eee={class:"bg-black text-white shadow-md py-4"},tee={class:"container mx-auto text-center"},nee=Ee({__name:"Footer",setup(t){const{content:e}=Qt(Jn());return(n,r)=>(x(),z("footer",eee,[J("div",tee,[J("p",null," "+Je(new Date().getFullYear()+" "+k(e).footerCopyright),1)])]))}}),ree=Ee({__name:"DropDown",props:{isOpen:{type:Boolean},toggle:{type:Function}},setup(t){const e=Qn(),{currentUser:n}=Qt(e),{visibleMenuItems:r}=Qt(Jn());return(i,s)=>(x(),z(Ae,null,[ps(J("div",{class:"md:hidden w-screen h-screen z-10 bg-gray-900 opacity-25 fixed top-1/2 start-1/2 transform -translate-x-1/2 -translate-y-1/2 animation",onClick:s[0]||(s[0]=(...o)=>i.toggle&&i.toggle(...o))},null,512),[[Vs,i.isOpen]]),ps(J("div",{class:"md:hidden absolute z-20 w-3/4 start-1/2 transform -translate-x-1/2 mt-12 sm:mt-2 p-4 py-8 bg-gray-900 border border-indigo-600 rounded-xl",onClick:s[1]||(s[1]=(...o)=>i.toggle&&i.toggle(...o))},[(x(!0),z(Ae,null,dt(k(r),o=>(x(),ce(_t,{class:"w-full text-lg rounded-none first:rounded-t-xl",outlined:"",list:"",url:o.url,loading:o.loading},{default:fe(()=>[Qe(Je(o.name),1)]),_:2},1032,["url","loading"]))),256)),k(n)?(x(),ce(_t,{key:0,class:"w-full text-lg rounded-none first:rounded-t-xl",outlined:"",list:"",url:"dashboard"},{default:fe(()=>[Qe(" Dashboard ")]),_:1})):ne("",!0),k(n)?(x(),ce(_t,{key:1,class:"w-full text-lg rounded-none rounded-b-xl first:rounded-b-xl",outlined:"",list:"",type:"danger",onClick:k(e).logout},{default:fe(()=>[Qe(" Logout ")]),_:1},8,["onClick"])):(x(),ce(_t,{key:2,class:"w-full text-lg rounded-none rounded-b-xl first:rounded-b-xl",outlined:"",list:"",type:"secondary",url:"login"},{default:fe(()=>[Qe(" Login ")]),_:1}))],512),[[Vs,i.isOpen]])],64))}}),iee={key:0,class:Me(["flex items-center justify-between flex-wrap gap-3","sm:flex-col","lg:flex-row"])},see={class:"group fixed w-full px-10 sm:px-0 sm:relative md:hidden"},oee={class:"flex justify-between sm:justify-center"},aee=J("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"},null,-1),lee=[aee],uee=Ee({__name:"Menu",setup(t){const e=Qn(),{currentUser:n,logoutLoading:r}=Qt(e),{visibleMenuItems:i}=Qt(Jn()),s=re(),o=re(!1),a=()=>{o.value=!o.value,o.value&&Wn(()=>{var l;(l=s.value)==null||l.scrollIntoView({behavior:"smooth",block:"center"})})};return(l,u)=>k(i).length?(x(),z("div",iee,[(x(!0),z(Ae,null,dt(k(i),c=>(x(),ce(_t,{class:"hidden sm:flex sm:w-full lg:w-auto grow justify-center","active-class":"button-primary",outlined:"",url:c.url,loading:c.loading},{default:fe(()=>[Qe(Je(c.name),1)]),_:2},1032,["url","loading"]))),256)),k(n)?ne("",!0):(x(),ce(_t,{key:0,class:"hidden sm:flex sm:w-full lg:w-auto grow justify-center","active-class":"button-primary",type:"secondary",outlined:"",url:"login"},{default:fe(()=>[Qe(" Login ")]),_:1})),k(n)?(x(),ce(_t,{key:1,class:"hidden sm:flex sm:w-full lg:w-auto grow justify-center",type:"danger",outlined:"",loading:k(r),onClick:k(e).logout},{default:fe(()=>[Qe(" Logout ")]),_:1},8,["loading","onClick"])):ne("",!0),J("div",{ref_key:"dropdown",ref:s,class:"dropdown absolute sm:hidden w-full left-0 top-5 flex justify-end"},[J("div",see,[J("div",{class:Me(["flex animation",o.value?"justify-center":"justify-end"])},[ee(_t,{class:Me(["sm:w-full bg-black bg-opacity-50 sm:bg-transparent",o.value?"w-full":"w-fit hover:w-full"]),outlined:"",onClick:a},{default:fe(()=>[J("div",oee,[ee(hm,{rotate:o.value,class:Me(["group-hover:block",o.value?"block":"hidden"])},null,8,["rotate","class"]),J("p",{class:Me(["sm:block group-hover:block",o.value?"block":"hidden"])},"Menu",2),(x(),z("svg",{class:Me(["h-6 sm:hidden group-hover:hidden",o.value?"hidden":null]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},lee,2))])]),_:1},8,["class"])],2)]),ee(ree,{"is-open":o.value,toggle:()=>o.value=!o.value},null,8,["is-open","toggle"])],512)])):ne("",!0)}}),cee={class:Me(["w-fit md:w-1/3","mb-8 py-8 bg-transparent text-indigo-300","sm:mt-8 sm:mb-0 sm:p-4 sm:bg-black sm:bg-opacity-50 sm:rounded-3xl sm:rounded-e-none","lg:px-8 lg:mt-0 lg:rounded-br-3xl lg:rounded-t-none"])},dee={key:0,class:"hidden sm:flex justify-center mb-4"},hee={class:"hidden md:block w-4/5 space-y-2"},fee={class:"hidden font-semibold text-base md:first:block lg:block first:font-bold first:text-lg"},pee={class:"flex items-center justify-center w-full md:w-3/5 lg:w-1/5"},mee={key:1},gee={class:"hidden lg:grid col-span-5 space-y-2 mb-5"},vee={class:"font-semibold text-base first:font-bold first:text-lg"},yee=Ee({__name:"HeaderMain",setup(t){const{currentUser:e}=Qt(Qn()),{content:n}=Qt(Jn());return(r,i)=>{const s=Zs("RouterLink");return x(),z("div",cee,[k(e)?(x(),z("div",dee,[J("div",hee,[(x(!0),z(Ae,null,dt(k(n).headerDescriptionUser,o=>(x(),z("p",fee,Je(o.replace("%USER%",k(e).firstName+(k(e).lastName?" "+k(e).lastName:""))),1))),256))]),J("div",pee,[ee(s,{to:{name:"dashboard"}},{default:fe(()=>[ee(k(fG),{class:"w-16 h-16 rounded-full border-2 text-indigo-600 border-indigo-600 animation-scale"})]),_:1})])])):(x(),z("div",mee,[J("div",gee,[(x(!0),z(Ae,null,dt(k(n).headerDescriptionGuest,o=>(x(),z("p",vee,Je(o),1))),256))])])),ee(uee)])}}}),wee={class:"flex justify-between"},bee={class:"hidden sm:block w-full sm:min-w-fit"},_ee=["src","alt"],Tee={class:"w-fit sm:max-w-1/2"},Eee={class:"title-primary"},See={class:"title-secondary"},Cee={class:"title-tertiary absolute sm:relative mt-1 sm:mt-0 flex flex-col xl:flex-row xl:flex-wrap"},Iee={class:"mt-2 flex items-center whitespace-nowrap me-6"},Aee={class:"mt-2 flex items-center whitespace-nowrap"},kee={class:"sm:hidden min-w-fit mt-3"},Dee=["src","alt"],RI=Ee({__name:"HeaderTop",setup(t){const{profile:e,content:n}=Qt(Jn());return(r,i)=>{const s=Zs("RouterLink");return x(),z("div",wee,[J("div",bee,[ee(s,{to:{name:"home"}},{default:fe(()=>[J("img",{class:"h-32 w-32 md:h-48 md:w-48 rounded-full animation-scale mb-4 cursor-pointer",src:k(n).avatarUrl,alt:k(e).name},null,8,_ee)]),_:1})]),J("div",Tee,[J("h1",Eee,Je(k(e).name),1),J("h2",See,Je(k(e).service),1),J("div",Cee,[J("div",Iee,[ee(k(cG),{class:"mr-1.5 h-5 w-5 text-gray-400"}),Qe(" "+Je(k(e).role),1)]),J("div",Aee,[ee(k(hG),{class:"mr-1.5 h-5 w-5 text-gray-400"}),Qe(" "+Je(k(e).location.city)+", "+Je(k(e).location.country),1)])])]),J("div",kee,[ee(s,{to:{name:"home"}},{default:fe(()=>[J("img",{class:"h-32 w-32 md:h-48 md:w-48 rounded-full animation-scale mb-4 cursor-pointer",src:k(n).avatarUrl,alt:k(e).name},null,8,Dee)]),_:1})])])}}}),xee={class:"sm:flex sm:items-start sm:justify-between mb-20"},Pee={class:"w-full sm:w-1/3 lg:flex lg:justify-end"},Ree=Ee({__name:"Header",setup(t){return(e,n)=>(x(),z("div",xee,[ee(RI,{class:"hidden sm:block"}),J("div",Pee,[ee(yee,{class:Me(["sm:fixed sm:right-0 sm:mt-0 sm:top-5","md:absolute","lg:top-0 lg:right-auto"])})]),ee(RI,{class:"sm:hidden"})]))}}),Oee={class:"min-h-screen bg-gradient-to-t from-black to-blue-900 via-gray-800"},Nee={class:"mx-0 sm:mx-16 px-5 pb-5 sm:p-14 rounded-b-3xl text-white bg-blue-gray-900 bg-opacity-50 bg-gradient-to-b from-transparent to-black via-purple-900 border-opacity-100"},ea=Ee({__name:"Page",props:{scrollToContent:{type:Boolean,required:!1,default:!0}},setup(t){const e=t,n=mb(),r=re(),i=()=>{e.scrollToContent&&Xf(r.value)};return St(()=>n.fullPath,()=>{i()}),zt(()=>{i()}),(s,o)=>(x(),z(Ae,null,[J("div",Oee,[J("div",Nee,[J("header",null,[s.$slots.header?xe(s.$slots,"header",{key:0}):(x(),ce(Ree,{key:1}))]),J("main",null,[J("div",{ref_key:"content",ref:r},[xe(s.$slots,"content")],512)])])]),J("footer",null,[s.$slots.footer?xe(s.$slots,"footer",{key:0}):(x(),ce(nee,{key:1}))])],64))}}),Mee={class:"grid mt-10 md:mt-15"},$ee={class:"grid justify-center"},Lee={class:"text-lg md:text-xl text-white"},Uee=["innerHTML"],Fee={class:"grid my-5 xl:mx-20"},Vee=Ee({__name:"Blog",setup(t){const{publicUser:e}=Qt(Qn()),{menuItems:n,content:r}=Qt(Jn()),i=Z(()=>window.location.hash),s=mb();return(o,a)=>(x(),ce(ea,{"scroll-to-content":!i.value},{content:fe(()=>{var l;return[J("div",Mee,[J("div",$ee,[(x(!0),z(Ae,null,dt(k(e)?[...k(r).blogDescriptionUser.map(u=>u.replace("%USER%",k(e).displayName||"Unknown user")),...((l=k(n).find(u=>u.id==="nfNQM4SMESU2VOkJtcgY"))==null?void 0:l.description)||[]]:k(r).blogDescriptionGuest,u=>(x(),z("h1",Lee,[J("span",{innerHTML:u},null,8,Uee)]))),256))]),J("div",Fee,[k(s).params.postId?(x(),ce(bJ,{key:0})):(x(),ce(ZZ,{key:1}))])])]}),_:1},8,["scroll-to-content"]))}}),Bee=Ee({__name:"Blog",setup(t){return(e,n)=>(x(),ce(Vee))}}),jee={class:"flex flex-col items-center content-center"},Hee=Ee({__name:"CatCalc",setup(t){const e=On({calculator:{value:"average",error:""},catWeigth:{value:"",error:""},catAge:{value:"",error:""},catGender:{value:"male",error:""},catSize:{value:"",error:""},catFoodDry:{value:"",error:""},catFoodWet:{value:"",error:""},catFoodSnax:{value:"",error:""},catFoodSnaxPercentage:{value:"5",error:""}}),n=[{value:"average",label:"Average"},{value:"nvwa",label:"Nederlandse Voedsel- en Warenautoriteit"},{value:"royalcanin",label:"Royal Canin"},{value:"petsplace",label:"Pets Place"},{value:"rawz",label:"RAWZ"},{value:"petcube",label:"Petcube"}],r=[{value:"default",label:"Adult healthy",rerIndex:1.4},{value:"lazy",label:"Adult lazy",rerIndex:1},{value:"castrated",label:"Adult castrated",rerIndex:1.2},{value:"underweight",label:"Adult underfed",rerIndex:1.8},{value:"overweight",label:"Adult overfed",rerIndex:.8},{value:"kitten0.4",label:"Kitten 0-4 months",rerIndex:2.5},{value:"kitten1",label:"Kitten 4-12 months",rerIndex:2}],i=[{value:"male",label:"Male"},{value:"female",label:"Female"}],s=Z(()=>[{value:"35",label:"Small (<25cm)",factor:e.catGender.value==="male"?.9:.75},{value:"40",label:"Average (25-30cm)",factor:e.catGender.value==="male"?1:.9},{value:"45",label:"Big (30-35cm)",factor:e.catGender.value==="male"?1.125:1},{value:"65",label:"Pretty damn big (35-40cm)",factor:e.catGender.value==="male"?1.6:1.4},{value:"90",label:"Massive (>40cm)",factor:e.catGender.value==="male"?2.25:2}]),o={nvwa:[{weight:0,calories:0},{weight:1,calories:200},{weight:2,calories:200},{weight:3,calories:240},{weight:4,calories:280},{weight:5,calories:320},{weight:6,calories:360},{weight:7,calories:400},{weight:8,calories:440},{weight:9,calories:480},{weight:10,calories:520}],royalcanin:[{weight:0,calories:0},{weight:1,calories:225},{weight:2,calories:225},{weight:3,calories:275},{weight:4,calories:325},{weight:5,calories:375},{weight:6,calories:425},{weight:7,calories:475},{weight:8,calories:525},{weight:9,calories:575},{weight:10,calories:625}],petsplace:[{weight:0,calories:0},{weight:.5,calories:39},{weight:.9,calories:65},{weight:1.4,calories:88},{weight:1.8,calories:110},{weight:2.3,calories:130},{weight:2.7,calories:149},{weight:3.2,calories:167},{weight:3.6,calories:184},{weight:4.1,calories:200},{weight:4.5,calories:218},{weight:5,calories:234},{weight:5.5,calories:250},{weight:5.9,calories:265},{weight:6.4,calories:280},{weight:6.8,calories:295},{weight:7.3,calories:310},{weight:7.7,calories:324},{weight:8.2,calories:339},{weight:8.6,calories:353},{weight:9.1,calories:366},{weight:11.4,calories:433}],rawz:[{weight:0,calories:0},{weight:1,calories:183},{weight:2.268,calories:183},{weight:3.402,calories:245},{weight:4.536,calories:303},{weight:5.67,calories:362},{weight:6.804,calories:413},{weight:7.938,calories:462},{weight:9.072,calories:513}],petcube:[{weight:.45,calories:40},{weight:.9,calories:65},{weight:2.3,calories:140},{weight:3.15,calories:166},{weight:4.5,calories:250},{weight:6.8,calories:325},{weight:9.1,calories:400},{weight:11.25,calories:450}],average:[]},a=(w,T)=>{const A=o[w].sort((N,D)=>N.weight-D.weight);let I=A[A.length-2].weight,E=A[A.length-2].calories,U=A[A.length-1].weight,F=A[A.length-1].calories;for(let N=0;N<A.length-1;N++)if(T>=A[N].weight&&T<=A[N+1].weight){I=A[N].weight,E=A[N].calories,U=A[N+1].weight,F=A[N+1].calories;break}return{x1:I,y1:E,x2:U,y2:F}},l=(w,T)=>{const{x1:P,y1:A,x2:I,y2:E}=a(w,T);return A+(T-P)*(E-A)/(I-P)},u=()=>{const w=new Map;for(const A of Object.values(o).filter(I=>I!==o.average))for(const{weight:I,calories:E}of A)w.has(I)||w.set(I,{sum:0,count:0}),w.get(I).sum+=E,w.get(I).count++;return[0,1,2,3,4,5,6,7,8,9,10].filter(A=>w.has(A)).map(A=>({weight:A,calories:w.get(A).sum/w.get(A).count}))};o.average=u();const c=[{value:"default",label:"Average (340kcal)",calories:340},{value:"yarrah",label:"Yarrah Chicken (362kcal)",calories:361.5}],d=[{value:"",label:"None",calories:0},{value:"default",label:"Average (85kcal)",calories:85}],h=[{value:"",label:"None",calories:0},{value:"default",label:"Average (2kcal)",calories:2},{value:"yarrah",label:"Yarrah Mini Snack (2kcal)",calories:2},{value:"catstick",label:"Vitakraft Cat Stick (12kcal)",calories:12},{value:"milk_average",label:"Milk Average (40kcal/50ml)",calories:40}],f=Z(()=>l(e.calculator.value,Number(e.catWeigth.value))),p=Z(()=>{var w;return f.value*(((w=r.find(T=>T.value===e.catAge.value))==null?void 0:w.rerIndex)??1)}),m=Z(()=>{var w;return p.value*(((w=s.value.find(T=>T.value===e.catSize.value))==null?void 0:w.factor)??1)}),v=Z(()=>{const w=h.find(T=>T.value===e.catFoodSnax.value);return w!=null&&w.calories?m.value*(Number(e.catFoodSnaxPercentage.value)/100)/w.calories:void 0}),b=Z(()=>m.value*(1-Number(v.value?e.catFoodSnaxPercentage.value:0)/100)),g=Z(()=>{const w=d.find(T=>T.value===e.catFoodWet.value);return w!=null&&w.calories?b.value/4/w.calories*100:void 0}),_=Z(()=>b.value/4*(g.value?3:4)),y=Z(()=>{var w;return _.value/(((w=c.find(T=>T.value===e.catFoodDry.value))==null?void 0:w.calories)??c[0].calories)*100});return(w,T)=>(x(),ce(ea,null,{content:fe(()=>[ee(Rr,{class:"!bg-cyan-800 !bg-opacity-50 my-5",title:"Cat Calculator",description:"Do a Cat Calculation!"},{default:fe(()=>{var P;return[J("div",jee,[ee(Tr,{class:"w-3/4 md:w-1/2",name:"calculator",label:"Calculation based on",modelValue:e.calculator.value,"onUpdate:modelValue":T[0]||(T[0]=A=>e.calculator.value=A),error:e.calculator.error,"onUpdate:error":T[1]||(T[1]=A=>e.calculator.error=A),options:n,rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),ee(qn,{class:"w-3/4 md:w-1/2",name:"catWeigth",label:"Cat Weight (kg)",modelValue:e.catWeigth.value,"onUpdate:modelValue":T[2]||(T[2]=A=>e.catWeigth.value=A),error:e.catWeigth.error,"onUpdate:error":T[3]||(T[3]=A=>e.catWeigth.error=A),rules:[k(kt).Required,k(kt).Numeric],"min-value":1,"max-value":10,"input-props":{type:"number"}},null,8,["modelValue","error","rules"]),ee(Tr,{class:"w-3/4 md:w-1/2",name:"catAge",label:"Cat Age",modelValue:e.catAge.value,"onUpdate:modelValue":T[4]||(T[4]=A=>e.catAge.value=A),error:e.catAge.error,"onUpdate:error":T[5]||(T[5]=A=>e.catAge.error=A),options:r,rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),ee(Tr,{class:"w-3/4 md:w-1/2",name:"catGender",label:"Cat Gender",modelValue:e.catGender.value,"onUpdate:modelValue":T[6]||(T[6]=A=>e.catGender.value=A),error:e.catGender.error,"onUpdate:error":T[7]||(T[7]=A=>e.catGender.error=A),options:i,rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),ee(Tr,{class:"w-3/4 md:w-1/2",name:"catSize",label:"Cat Shoulder Height",modelValue:e.catSize.value,"onUpdate:modelValue":T[8]||(T[8]=A=>e.catSize.value=A),error:e.catSize.error,"onUpdate:error":T[9]||(T[9]=A=>e.catSize.error=A),options:s.value,rules:[k(kt).Required]},null,8,["modelValue","error","options","rules"]),ee(Rr,{class:"w-full md:w-1/2 my-5 border border-gray-400",description:"Required energy per day: "+m.value.toFixed(1)+" kcal"},null,8,["description"]),ee(Tr,{class:"w-3/4 md:w-1/2",name:"catFoodDry",label:"Dry Food",modelValue:e.catFoodDry.value,"onUpdate:modelValue":T[10]||(T[10]=A=>e.catFoodDry.value=A),error:e.catFoodDry.error,"onUpdate:error":T[11]||(T[11]=A=>e.catFoodDry.error=A),options:c,rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),ee(Tr,{class:"w-3/4 md:w-1/2",name:"catFoodWet",label:"Wet Food (25%)",modelValue:e.catFoodWet.value,"onUpdate:modelValue":T[12]||(T[12]=A=>e.catFoodWet.value=A),error:e.catFoodWet.error,"onUpdate:error":T[13]||(T[13]=A=>e.catFoodWet.error=A),options:d,rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),ee(Tr,{class:"w-3/4 md:w-1/2",name:"catFoodSnax",label:"Snacks",modelValue:e.catFoodSnax.value,"onUpdate:modelValue":T[14]||(T[14]=A=>e.catFoodSnax.value=A),error:e.catFoodSnax.error,"onUpdate:error":T[15]||(T[15]=A=>e.catFoodSnax.error=A),options:h,rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),e.catFoodSnax.value?(x(),ce(qn,{key:0,class:"w-3/4 md:w-1/2",name:"catFoodSnaxPercentage",label:"Snacks Percentage",modelValue:e.catFoodSnaxPercentage.value,"onUpdate:modelValue":T[16]||(T[16]=A=>e.catFoodSnaxPercentage.value=A),error:e.catFoodSnaxPercentage.error,"onUpdate:error":T[17]||(T[17]=A=>e.catFoodSnaxPercentage.error=A),rules:[k(kt).Required,k(kt).Numeric],"min-value":1,"max-value":10,"input-props":{type:"number"}},null,8,["modelValue","error","rules"])):ne("",!0),ee(Rr,{class:"w-full md:w-1/2 my-5 border border-gray-400",title:"Result","sub-title":"Based on constants from "+((P=n.find(A=>A.value===e.calculator.value))==null?void 0:P.label),description:["Required dry food per day: "+y.value.toFixed(1)+" g","","","Required dry food per meal: "+(y.value/(g.value?2:3)).toFixed(1)+" g",...g.value?["Required wet food per day: "+g.value.toFixed(1)+" g"]:[],...v.value?["Allowed snacks per day: "+v.value.toFixed(v.value<1?1:0)+" snacks"]:[],"","","","^ Mogu approved!"]},null,8,["sub-title","description"])])]}),_:1})]),_:1}))}}),Wee=Ee({__name:"CatCalc",setup(t){return(e,n)=>(x(),ce(Hee))}}),Yee={class:"min-w-0 flex-1"},zee=J("img",{class:"w-48 h-48 rounded-full animation-scale mb-4 cursor-pointer",src:"https://www.spigotmc.org/data/resource_icons/28/28103.jpg?1472586104",alt:"customvoting"},null,-1),Kee=Ee({__name:"CustomVoting",setup(t){return(e,n)=>{const r=Zs("RouterLink");return x(),ce(ea,null,{header:fe(()=>[J("div",Yee,[ee(r,{to:{name:"home"}},{default:fe(()=>[zee]),_:1})])]),content:fe(()=>[ee(Rr,{class:"!bg-yellow-700 !bg-opacity-50 my-5",title:"CustomVoting",description:"In Progress"})]),_:1})}}}),Gee=Ee({__name:"CustomVoting",setup(t){return(e,n)=>(x(),ce(Kee))}}),qee={class:"flex flex-col lg:justify-center lg:items-center py-10 text-md text-primary"},Xee={class:"m-1 lg:w-4/5"},A1=Ee({__name:"Privacy",setup(t){const{content:e}=Qt(Jn());return(n,r)=>(x(),z("div",qee,[(x(!0),z(Ae,null,dt(k(e).privacyStatement,i=>(x(),z("p",Xee,Je(i),1))),256))]))}}),k1=Ee({__name:"EmailField",props:{id:{},name:{},label:{},rules:{},modelValue:{},error:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=re(),s=Z({get:()=>r.modelValue,set:l=>{a("update:modelValue",l)}}),o=Z({get:()=>r.error,set:l=>{a("update:error",l??"")}}),a=n;return e({test:async()=>await i.value.test()}),(l,u)=>(x(),ce(qn,{ref_key:"email",ref:i,id:l.id,name:l.name,label:l.label,placeholder:"someone@example.com","input-props":{type:"email",autocomplete:"on"},modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=c=>s.value=c),error:o.value,"onUpdate:error":u[1]||(u[1]=c=>o.value=c),rules:[...l.rules,k(kt).Email]},null,8,["id","name","label","modelValue","error","rules"]))}}),Zl=Ee({__name:"PasswordField",props:{id:{},name:{},label:{},placeholder:{},rules:{},modelValue:{},error:{},min:{},max:{},compare:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=re(),s=Z({get:()=>r.modelValue,set:l=>{a("update:modelValue",l)}}),o=Z({get:()=>r.error,set:l=>{a("update:error",l??"")}}),a=n;return e({test:async()=>i.value.test()}),(l,u)=>(x(),ce(qn,{ref_key:"password",ref:i,id:l.id,name:l.name,label:l.label,placeholder:"******","input-props":{type:"password",autocomplete:"on"},modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=c=>s.value=c),error:o.value,"onUpdate:error":u[1]||(u[1]=c=>o.value=c),rules:l.rules,"min-length":l.min,"max-length":l.max,compare:l.compare},null,8,["id","name","label","modelValue","error","rules","min-length","max-length","compare"]))}}),Qee={class:"flex flex-wrap pt-6 pb-8 mb-4"},Jee={class:"basis-full lg:basis-1/2"},Zee={class:"flex gap-3 mt-10 flex-wrap"},ete={class:"basis-full lg:basis-1/2"},tte={class:"flex flex-col items-center content-center"},nte=Ee({__name:"Dashboard",setup(t){const e=Qn(),{currentUser:n,firebaseUser:r,publicUser:i,isOwner:s,mutationLoading:o}=Qt(e),a=Jn(),{fetchAll:l}=a,{content:u,online:c,debug:d}=Qt(a),h=re(!1),f=re(),p=re(),m=re(),v=re(),b=re(),g=re(),_=re(),y=re(),w=On({firstName:{value:"",error:""},lastName:{value:"",error:""},displayName:{value:"",error:""},email:{value:"",error:""},newPassword:{value:"",error:""},currentPassword:{value:"",error:""},repeatPassword:{value:"",error:""},avatar:{value:"",error:""}}),T=Z(()=>({firstName:w.firstName.value,lastName:w.lastName.value})),P=Z(()=>({displayName:w.displayName.value,avatar:w.avatar.value})),A=Z(()=>!!i.value&&!Wi(gw.convert(i.value),P.value)),I=Z(()=>{var F;return w.email.value!==((F=r.value)==null?void 0:F.email)}),E=Z(()=>{const F=[];return Wi(n.value,T.value)||F.push("Details"),A.value&&F.push("Public Profile"),I.value&&F.push("E-mail"),w.newPassword.value&&F.push("Password"),F.length?"Save "+Z0(F):void 0}),U=async()=>{var F;Object.keys(w).forEach(N=>w[N].error=""),w.newPassword.value&&(await Promise.all([b.value.test(),g.value.test(),_.value.test()]),!w.newPassword.error&&!w.currentPassword.error&&!w.repeatPassword.error&&(await e.updatePassword(w.newPassword.value,w.currentPassword.value),w.newPassword.value="",w.currentPassword.value="")),A.value&&(await m.value.test(),!w.displayName.error&&!w.avatar.error&&e.updatePublicUser({displayName:w.displayName.value,avatar:w.avatar.value})),I.value&&(await Promise.all([v.value.test(),g.value.test()]),!w.email.error&&!w.currentPassword.error&&(await e.updateMail(w.email.value,w.currentPassword.value),w.currentPassword.value="")),Wi(n.value,T.value)||(await Promise.all([f.value.test(),p.value.test()]),!w.firstName.error&&!w.lastName.error&&e.updateUser({firstName:w.firstName.value,lastName:w.lastName.value})),await l((F=r.value)==null?void 0:F.uid,!0)};return jA(()=>{var F,N,D,O,R;w.firstName.value=((F=n.value)==null?void 0:F.firstName)||"",w.lastName.value=((N=n.value)==null?void 0:N.lastName)||"",w.displayName.value=((D=i.value)==null?void 0:D.displayName)||"",w.email.value=((O=r.value)==null?void 0:O.email)||"",w.avatar.value=((R=i.value)==null?void 0:R.avatar)||""}),(F,N)=>(x(),ce(ea,null,{content:fe(()=>[k(n)&&k(r)?(x(),ce(Rr,{key:0,class:"!bg-cyan-800 !bg-opacity-50 my-5",title:"Welcome "+k(n).firstName+(k(n).lastName?" "+k(n).lastName:""),description:k(u).dashboardDescription},{default:fe(()=>[J("div",Qee,[J("div",Jee,[J("form",{onSubmit:N[19]||(N[19]=Mt(D=>U(),["prevent"]))},[ee(qn,{name:"accountType",label:"Account Type","model-value":k(s)?"Owner":"Member","input-props":{disabled:!0}},null,8,["model-value"]),ee(qn,{ref_key:"firstName",ref:f,name:"firstName",label:"First Name",placeholder:"Someone",modelValue:w.firstName.value,"onUpdate:modelValue":N[0]||(N[0]=D=>w.firstName.value=D),error:w.firstName.error,"onUpdate:error":N[1]||(N[1]=D=>w.firstName.error=D),rules:[k(kt).Required],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),ee(qn,{ref_key:"lastName",ref:p,name:"lastName",label:"Last Name",modelValue:w.lastName.value,"onUpdate:modelValue":N[2]||(N[2]=D=>w.lastName.value=D),error:w.lastName.error,"onUpdate:error":N[3]||(N[3]=D=>w.lastName.error=D),"min-length":3,"max-length":50},null,8,["modelValue","error"]),ee(qn,{ref_key:"displayName",ref:m,name:"displayName",label:"Public Username",modelValue:w.displayName.value,"onUpdate:modelValue":N[4]||(N[4]=D=>w.displayName.value=D),error:w.displayName.error,"onUpdate:error":N[5]||(N[5]=D=>w.displayName.error=D),rules:[k(kt).MinLength],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),ee(k1,{ref_key:"email",ref:v,name:"email",label:"E-mail",modelValue:w.email.value,"onUpdate:modelValue":N[6]||(N[6]=D=>w.email.value=D),error:w.email.error,"onUpdate:error":N[7]||(N[7]=D=>w.email.error=D),rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),I.value?(x(),ce(Zl,{key:0,ref_key:"currentPassword",ref:g,name:"currentPassword",label:"Current Password",modelValue:w.currentPassword.value,"onUpdate:modelValue":N[8]||(N[8]=D=>w.currentPassword.value=D),error:w.currentPassword.error,"onUpdate:error":N[9]||(N[9]=D=>w.currentPassword.error=D),rules:[k(kt).Required]},null,8,["modelValue","error","rules"])):ne("",!0),ee(Zl,{ref_key:"newPassword",ref:b,name:"newPassword",label:"New Password",modelValue:w.newPassword.value,"onUpdate:modelValue":N[10]||(N[10]=D=>w.newPassword.value=D),error:w.newPassword.error,"onUpdate:error":N[11]||(N[11]=D=>w.newPassword.error=D),min:6,max:50},null,8,["modelValue","error"]),w.newPassword.value?(x(),ce(Zl,{key:1,ref_key:"repeatPassword",ref:_,name:"repeatPassword",label:"Repeat New Password",modelValue:w.repeatPassword.value,"onUpdate:modelValue":N[12]||(N[12]=D=>w.repeatPassword.value=D),error:w.repeatPassword.error,"onUpdate:error":N[13]||(N[13]=D=>w.repeatPassword.error=D),rules:[k(kt).Required],compare:{value:w.newPassword.value,name:"New Password"}},null,8,["modelValue","error","rules","compare"])):ne("",!0),w.newPassword.value&&!I.value?(x(),ce(Zl,{key:2,ref_key:"currentPassword",ref:g,name:"currentPassword",label:"Current Password",modelValue:w.currentPassword.value,"onUpdate:modelValue":N[14]||(N[14]=D=>w.currentPassword.value=D),error:w.currentPassword.error,"onUpdate:error":N[15]||(N[15]=D=>w.currentPassword.error=D),rules:[k(kt).Required]},null,8,["modelValue","error","rules"])):ne("",!0),J("div",Zee,[E.value?(x(),ce(_t,{key:0,class:"w-full",action:"submit",loading:k(o)},{default:fe(()=>[Qe(Je(E.value),1)]),_:1},8,["loading"])):ne("",!0),k(s)?ne("",!0):(x(),ce(_t,{key:1,class:"w-full",type:"danger",outlined:"",onClick:N[16]||(N[16]=D=>h.value=!0)},{default:fe(()=>[Qe(" Delete account ")]),_:1}))]),k(s)?(x(),ce(vd,{key:3,name:"online",label:"Online",modelValue:k(c),"onUpdate:modelValue":N[17]||(N[17]=D=>an(c)?c.value=D:null)},null,8,["modelValue"])):ne("",!0),k(s)?(x(),ce(vd,{key:4,name:"debug",label:"Debug",modelValue:k(d),"onUpdate:modelValue":N[18]||(N[18]=D=>an(d)?d.value=D:null)},null,8,["modelValue"])):ne("",!0)],32)]),J("div",ete,[ee(T1,{ref_key:"avatar",ref:y,id:"avatar",name:"avatar",label:"Public Avatar",modelValue:w.avatar.value,"onUpdate:modelValue":N[20]||(N[20]=D=>w.avatar.value=D),error:w.avatar.error,"onUpdate:error":N[21]||(N[21]=D=>w.avatar.error=D),"is-public":"","image-props":{class:"rounded-full"},"image-container-props":{class:"!h-64 !w-64"}},null,8,["modelValue","error"])])]),J("div",tte,[ee(A1)])]),_:1},8,["title","description"])):ne("",!0),ee(_1,{title:"Delete Account",isOpen:h.value,description:["Are you sure you want to delete your account?","This cannot be undone."],"confirm-text":"Confirm","confirm-props":{type:"danger",outlined:!0},onConfirm:N[22]||(N[22]=D=>k(e).deleteAccount()),onCancel:N[23]||(N[23]=D=>h.value=!1)},null,8,["isOpen","description"])]),_:1}))}}),rte=Ee({__name:"Dashboard",setup(t){return(e,n)=>(x(),ce(nte))}}),ite=t=>(Jw("data-v-d69062a4"),t=t(),Zw(),t),ste=ite(()=>J("h3",{class:"title-secondary"},"My Work",-1)),ote=Ee({__name:"Projects",setup(t){const e=Jn(),{moveProject:n}=e,{projects:r}=Qt(e),i=o=>{o.moved&&n(o.moved.oldIndex,o.moved.newIndex)},s=()=>{Wn(()=>{const o=document.querySelectorAll(".transition-opacity");o.forEach(a=>{a.classList.replace("opacity-100","opacity-0")}),r8(Array.from(o),500,300,a=>{a.classList.replace("opacity-0","opacity-100")})})};return St(()=>r.value,(o,a)=>{o>a&&s()}),zt(()=>{s()}),(o,a)=>(x(),z(Ae,null,[ste,ee(k(n2),{class:"grid grid-cols-1 gap-4 my-5 sm:grid-cols-2 xl:grid-cols-3 cursor-pointer select-none","model-value":k(r),"item-key":"index",onChange:i,animation:150,delay:50},{item:fe(({element:l})=>[ee(Rr,{class:"border-4 border-transparent opacity-100 transition-opacity duration-1000 ease-in",title:l.name,url:l.url,description:l.description,loading:l.loading},{default:fe(()=>[(x(!0),z(Ae,null,dt(l.technologies,u=>(x(),ce(_t,{class:"m-1 md:mt-2 font-bold",style:Gn({backgroundColor:u.color})},{default:fe(()=>[Qe(Je(u.name),1)]),_:2},1032,["style"]))),256))]),_:2},1032,["title","url","description","loading"])]),_:1},8,["model-value"])],64))}}),ate=BM(ote,[["__scopeId","data-v-d69062a4"]]),lte={class:"grid mt-20"},ute=Ee({__name:"Home",setup(t){return(e,n)=>(x(),ce(ea,{"scroll-to-content":!1},{content:fe(()=>[J("div",lte,[ee(ate)])]),_:1}))}}),cte=Ee({__name:"Home",setup(t){return(e,n)=>(x(),ce(ute))}}),dte={class:"flex flex-col items-center content-center"},hte={class:"grid grid-cols-4 mt-10 gap-3"},fte=Ee({__name:"Login",setup(t){const e=Qn(),{loginLoading:n}=Qt(e),r=uD(),{initEmail:i,initPassword:s}=r.currentRoute.value.query,o=re(),a=re(),l=On({email:{value:(i==null?void 0:i.toString())||"",error:""},password:{value:(s==null?void 0:s.toString())||"",error:""}}),u=async()=>{Object.keys(l).forEach(d=>l[d].error=""),await Promise.all([o.value.test(),a.value.test()]),!l.email.error&&!l.password.error&&e.login(l.email.value,l.password.value)},c=async()=>{await o.value.test(),l.email.error||e.resetPassword(l.email.value)};return zt(()=>{r.replace({query:void 0})}),(d,h)=>{const f=Zs("RouterLink");return x(),ce(ea,null,{content:fe(()=>[ee(Rr,{class:"!bg-cyan-800 !bg-opacity-50 my-5",title:"Login",description:"Please login using your e-mail and password."},{default:fe(()=>[J("div",dte,[J("form",{class:"w-full lg:w-1/2 xl:w-1/3 px-8 pt-6 pb-8 mb-4",onSubmit:h[4]||(h[4]=Mt(p=>u(),["prevent"]))},[ee(k1,{ref_key:"email",ref:o,name:"email",label:"E-mail",modelValue:l.email.value,"onUpdate:modelValue":h[0]||(h[0]=p=>l.email.value=p),error:l.email.error,"onUpdate:error":h[1]||(h[1]=p=>l.email.error=p),rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),ee(Zl,{ref_key:"password",ref:a,name:"password",label:"Password",modelValue:l.password.value,"onUpdate:modelValue":h[2]||(h[2]=p=>l.password.value=p),error:l.password.error,"onUpdate:error":h[3]||(h[3]=p=>l.password.error=p),rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),J("div",hte,[ee(_t,{class:"col-span-full md:col-span-2",action:"submit",loading:k(n)},{default:fe(()=>[Qe(" Login ")]),_:1},8,["loading"]),ee(f,{class:"col-span-full md:col-span-2",to:{name:"register",query:{initEmail:l.email.value,initPassword:l.password.value}}},{default:fe(()=>[ee(_t,{class:"w-full",outlined:""},{default:fe(()=>[Qe(" Register ")]),_:1})]),_:1},8,["to"]),ee(_t,{class:"col-span-full md:col-span-2 md:col-start-3",outlined:"",onClick:c},{default:fe(()=>[Qe(" Forgot Password ")]),_:1})])],32),ee(A1)])]),_:1})]),_:1})}}}),pte=Ee({__name:"Login",setup(t){return(e,n)=>(x(),ce(fte))}}),mte=Ee({__name:"NotFound",setup(t){return(e,n)=>(x(),ce(ea,{"scroll-to-content":!1},{content:fe(()=>[ee(Rr,{class:"!bg-red-800 !bg-opacity-50 my-5",title:"Not found.",description:"Where are you going?"})]),_:1}))}}),gte=Ee({__name:"NotFound",setup(t){return(e,n)=>(x(),ce(mte))}}),vte={class:"flex flex-col items-center content-center"},yte={class:"grid grid-cols-2 mt-10 gap-3"},wte=Ee({__name:"Register",setup(t){const e=Qn(),{loginLoading:n}=Qt(e),r=uD(),{initEmail:i,initPassword:s}=r.currentRoute.value.query,o=re(),a=re(),l=re(),u=On({email:{value:(i==null?void 0:i.toString())||"",error:""},password:{value:(s==null?void 0:s.toString())||"",error:""},firstName:{value:"",error:""}}),c=async()=>{Object.keys(u).forEach(d=>u[d].error=""),await Promise.all([o.value.test(),a.value.test(),l.value.test()]),!u.email.error&&!u.password.error&&!u.firstName.error&&e.register(u.email.value,u.password.value,u.firstName.value)};return zt(()=>{r.replace({query:void 0})}),(d,h)=>{const f=Zs("RouterLink");return x(),ce(ea,null,{content:fe(()=>[ee(Rr,{class:"!bg-cyan-800 !bg-opacity-50 my-5",title:"Register",description:"Please register using your e-mail, password and first name."},{default:fe(()=>[J("div",vte,[J("form",{class:"w-full lg:w-1/2 xl:w-1/3 px-8 pt-6 pb-8 mb-4",onSubmit:h[6]||(h[6]=Mt(p=>c(),["prevent"]))},[ee(qn,{ref_key:"firstName",ref:l,name:"firstName",label:"First Name",placeholder:"Someone",modelValue:u.firstName.value,"onUpdate:modelValue":h[0]||(h[0]=p=>u.firstName.value=p),error:u.firstName.error,"onUpdate:error":h[1]||(h[1]=p=>u.firstName.error=p),rules:[k(kt).Required,k(kt).MinLength],"min-length":3,"max-length":25},null,8,["modelValue","error","rules"]),ee(k1,{ref_key:"email",ref:o,name:"email",label:"E-mail",modelValue:u.email.value,"onUpdate:modelValue":h[2]||(h[2]=p=>u.email.value=p),error:u.email.error,"onUpdate:error":h[3]||(h[3]=p=>u.email.error=p),rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),ee(Zl,{ref_key:"password",ref:a,name:"password",label:"Password",modelValue:u.password.value,"onUpdate:modelValue":h[4]||(h[4]=p=>u.password.value=p),error:u.password.error,"onUpdate:error":h[5]||(h[5]=p=>u.password.error=p),rules:[k(kt).Required]},null,8,["modelValue","error","rules"]),J("div",yte,[ee(_t,{class:"col-span-full md:col-span-1",action:"submit",loading:k(n)},{default:fe(()=>[Qe(" Register ")]),_:1},8,["loading"]),ee(f,{to:{name:"login",query:{initEmail:u.email.value,initPassword:u.password.value}},class:"col-span-full md:col-span-1"},{default:fe(()=>[ee(_t,{class:"w-full",outlined:""},{default:fe(()=>[Qe(" Login ")]),_:1})]),_:1},8,["to"])])],32),ee(A1)])]),_:1})]),_:1})}}}),bte=Ee({__name:"Register",setup(t){return(e,n)=>(x(),ce(wte))}}),Kg=m3({history:YF(""),routes:[{path:"/",name:"home",meta:{title:"Home"},component:cte,beforeEnter:(t,e,n)=>{var i;const r=decodeURIComponent(((i=t.query.path)==null?void 0:i.toString())||"");if(r){const s=r.split("/")[0];Kg.getRoutes().find(o=>o.path.startsWith(`/${s}`))?n({path:r}):n({name:"notfound"})}else n()}},{path:"/login",name:"login",meta:{title:"Login"},component:pte,beforeEnter:(t,e,n)=>{Qn().currentUser?n({name:"dashboard"}):n()}},{path:"/register",name:"register",meta:{title:"Register"},component:bte,beforeEnter:(t,e,n)=>{Qn().currentUser?n({name:"dashboard"}):n()}},{path:"/dashboard",name:"dashboard",meta:{title:"Dashboard"},component:rte,beforeEnter:(t,e,n)=>{Qn().currentUser?n():n({name:"login"})}},{path:"/blog/:postId?",name:"blog",meta:{title:"Blog"},component:Bee},{path:"/customvoting",name:"customvoting",meta:{title:"CustomVoting"},component:Gee},{path:"/cat-calc",name:"cat-calc",meta:{title:"CatCalc"},component:Wee},{path:"/:pathMatch(.*)*",name:"notfound",meta:{title:"404"},component:gte}],scrollBehavior(t,e,n){return t.hash?new Promise((r,i)=>{let s=10;const o=()=>{setTimeout(()=>{try{document.getElementById(t.hash.replace("#",""))?r({el:t.hash,behavior:"smooth",top:15}):(s--,s>0?o():i())}catch(a){i(a)}},1e3)};o()}):n||((t.name==="login"||t.name==="register")&&(e.name==="login"||e.name==="register")?!1:{top:0})}}),OI=yM.name;Kg.beforeEach(async(t,e,n)=>{var r,i;if(t!==e){const s=Jn();t.name&&(["home","login","register","dashboard","notfound"].includes(t.name.toString())||(i=await s.fetchMenuItems((r=Qn().firebaseUser)==null?void 0:r.uid))!=null&&i.some(o=>t.path.startsWith(o.url)))?n():n({name:"notfound"})}else n()});Kg.beforeResolve(t=>{document.title=OI+" | "+t.meta.title||OI});const D1=Kg;function Ri(t){"@babel/helpers - typeof";return Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ri(t)}function Ze(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ve(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Ge(t){Ve(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Ri(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Rs(t,e){Ve(2,arguments);var n=Ge(t),r=Ze(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function zi(t,e){Ve(2,arguments);var n=Ge(t),r=Ze(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+r+1,0);var o=s.getDate();return i>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),i),n)}function r2(t,e){if(Ve(2,arguments),!e||Ri(e)!=="object")return new Date(NaN);var n=e.years?Ze(e.years):0,r=e.months?Ze(e.months):0,i=e.weeks?Ze(e.weeks):0,s=e.days?Ze(e.days):0,o=e.hours?Ze(e.hours):0,a=e.minutes?Ze(e.minutes):0,l=e.seconds?Ze(e.seconds):0,u=Ge(t),c=r||n?zi(u,r+n*12):u,d=s||i?Rs(c,s+i*7):c,h=a+o*60,f=l+h*60,p=f*1e3,m=new Date(d.getTime()+p);return m}function _te(t,e){Ve(2,arguments);var n=Ge(t).getTime(),r=Ze(e);return new Date(n+r)}var Tte={};function As(){return Tte}function il(t,e){var n,r,i,s,o,a,l,u;Ve(1,arguments);var c=As(),d=Ze((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ge(t),f=h.getDay(),p=(f<d?7:0)+f-d;return h.setDate(h.getDate()-p),h.setHours(0,0,0,0),h}function bm(t){return Ve(1,arguments),il(t,{weekStartsOn:1})}function Ete(t){Ve(1,arguments);var e=Ge(t),n=e.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var i=bm(r),s=new Date(0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);var o=bm(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Ste(t){Ve(1,arguments);var e=Ete(t),n=new Date(0);n.setFullYear(e,0,4),n.setHours(0,0,0,0);var r=bm(n);return r}function _m(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function NI(t){Ve(1,arguments);var e=Ge(t);return e.setHours(0,0,0,0),e}var Cte=864e5;function Ite(t,e){Ve(2,arguments);var n=NI(t),r=NI(e),i=n.getTime()-_m(n),s=r.getTime()-_m(r);return Math.round((i-s)/Cte)}function Ate(t,e){Ve(2,arguments);var n=Ze(e),r=n*3;return zi(t,r)}function x1(t,e){Ve(2,arguments);var n=Ze(e);return zi(t,n*12)}var P1=6e4,R1=36e5,kte=1e3;function i2(t){return Ve(1,arguments),t instanceof Date||Ri(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function yd(t){if(Ve(1,arguments),!i2(t)&&typeof t!="number")return!1;var e=Ge(t);return!isNaN(Number(e))}function MI(t){Ve(1,arguments);var e=Ge(t),n=Math.floor(e.getMonth()/3)+1;return n}function s2(t,e){var n;Ve(1,arguments);var r=t||{},i=Ge(r.start),s=Ge(r.end),o=s.getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var a=[],l=i;l.setHours(0,0,0,0);var u=Number((n=e==null?void 0:e.step)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)a.push(Ge(l)),l.setDate(l.getDate()+u),l.setHours(0,0,0,0);return a}function nh(t){Ve(1,arguments);var e=Ge(t),n=e.getMonth(),r=n-n%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function Dte(t){Ve(1,arguments);var e=t||{},n=Ge(e.start),r=Ge(e.end),i=r.getTime();if(!(n.getTime()<=i))throw new RangeError("Invalid interval");var s=nh(n),o=nh(r);i=o.getTime();for(var a=[],l=s;l.getTime()<=i;)a.push(Ge(l)),l=Ate(l,1);return a}function xte(t){Ve(1,arguments);var e=Ge(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function Pte(t){Ve(1,arguments);var e=Ge(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Rte(t,e){var n,r,i,s,o,a,l,u;Ve(1,arguments);var c=As(),d=Ze((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ge(t),f=h.getDay(),p=(f<d?-7:0)+6-(f-d);return h.setDate(h.getDate()+p),h.setHours(23,59,59,999),h}function $I(t){Ve(1,arguments);var e=Ge(t),n=e.getMonth(),r=n-n%3+3;return e.setMonth(r,0),e.setHours(23,59,59,999),e}function o2(t,e){Ve(2,arguments);var n=Ze(e);return _te(t,-n)}var Ote=864e5;function Nte(t){Ve(1,arguments);var e=Ge(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/Ote)+1}function Wu(t){Ve(1,arguments);var e=1,n=Ge(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function a2(t){Ve(1,arguments);var e=Ge(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Wu(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=Wu(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Mte(t){Ve(1,arguments);var e=a2(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Wu(n);return r}var $te=6048e5;function l2(t){Ve(1,arguments);var e=Ge(t),n=Wu(e).getTime()-Mte(e).getTime();return Math.round(n/$te)+1}function sl(t,e){var n,r,i,s,o,a,l,u;Ve(1,arguments);var c=As(),d=Ze((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ge(t),f=h.getUTCDay(),p=(f<d?7:0)+f-d;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function O1(t,e){var n,r,i,s,o,a,l,u;Ve(1,arguments);var c=Ge(t),d=c.getUTCFullYear(),h=As(),f=Ze((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,f),p.setUTCHours(0,0,0,0);var m=sl(p,e),v=new Date(0);v.setUTCFullYear(d,0,f),v.setUTCHours(0,0,0,0);var b=sl(v,e);return c.getTime()>=m.getTime()?d+1:c.getTime()>=b.getTime()?d:d-1}function Lte(t,e){var n,r,i,s,o,a,l,u;Ve(1,arguments);var c=As(),d=Ze((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=O1(t,e),f=new Date(0);f.setUTCFullYear(h,0,d),f.setUTCHours(0,0,0,0);var p=sl(f,e);return p}var Ute=6048e5;function u2(t,e){Ve(1,arguments);var n=Ge(t),r=sl(n,e).getTime()-Lte(n,e).getTime();return Math.round(r/Ute)+1}function Kt(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Fte={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return Kt(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Kt(r+1,2)},d:function(e,n){return Kt(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Kt(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Kt(e.getUTCHours(),n.length)},m:function(e,n){return Kt(e.getUTCMinutes(),n.length)},s:function(e,n){return Kt(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return Kt(s,n.length)}};const uo=Fte;var Rl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vte={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return uo.y(e,n)},Y:function(e,n,r,i){var s=O1(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return Kt(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Kt(o,n.length)},R:function(e,n){var r=a2(e);return Kt(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Kt(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Kt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Kt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return uo.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return Kt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=u2(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):Kt(s,n.length)},I:function(e,n,r){var i=l2(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):Kt(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):uo.d(e,n)},D:function(e,n,r){var i=Nte(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Kt(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Kt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Kt(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return Kt(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=Rl.noon:i===0?s=Rl.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=Rl.evening:i>=12?s=Rl.afternoon:i>=4?s=Rl.morning:s=Rl.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return uo.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):uo.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Kt(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):Kt(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):uo.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):uo.s(e,n)},S:function(e,n){return uo.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return UI(o);case"XXXX":case"XX":return ha(o);case"XXXXX":case"XXX":default:return ha(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return UI(o);case"xxxx":case"xx":return ha(o);case"xxxxx":case"xxx":default:return ha(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+LI(o,":");case"OOOO":default:return"GMT"+ha(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+LI(o,":");case"zzzz":default:return"GMT"+ha(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return Kt(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return Kt(o,n.length)}};function LI(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e||"";return n+String(i)+o+Kt(s,2)}function UI(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Kt(Math.abs(t)/60,2)}return ha(t,e)}function ha(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=Kt(Math.floor(i/60),2),o=Kt(i%60,2);return r+s+n+o}var FI=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},c2=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Bte=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return FI(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",FI(i,n)).replace("{{time}}",c2(s,n))},Iw={p:c2,P:Bte},jte=["D","DD"],Hte=["YY","YYYY"];function d2(t){return jte.indexOf(t)!==-1}function h2(t){return Hte.indexOf(t)!==-1}function Tm(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Wte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Yte=function(e,n,r){var i,s=Wte[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const zte=Yte;function gy(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var Kte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Gte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Xte={date:gy({formats:Kte,defaultWidth:"full"}),time:gy({formats:Gte,defaultWidth:"full"}),dateTime:gy({formats:qte,defaultWidth:"full"})};const Qte=Xte;var Jte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zte=function(e,n,r,i){return Jte[e]};const ene=Zte;function Cc(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return i[u]}}var tne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ine={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},one={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ane=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},lne={ordinalNumber:ane,era:Cc({values:tne,defaultWidth:"wide"}),quarter:Cc({values:nne,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Cc({values:rne,defaultWidth:"wide"}),day:Cc({values:ine,defaultWidth:"wide"}),dayPeriod:Cc({values:sne,defaultWidth:"wide",formattingValues:one,defaultFormattingWidth:"wide"})};const une=lne;function Ic(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?dne(a,function(d){return d.test(o)}):cne(a,function(d){return d.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var c=e.slice(o.length);return{value:u,rest:c}}}function cne(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function dne(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function hne(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var fne=/^(\d+)(th|st|nd|rd)?/i,pne=/\d+/i,mne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gne={any:[/^b/i,/^(a|c)/i]},vne={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yne={any:[/1/i,/2/i,/3/i,/4/i]},wne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_ne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ene={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Sne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cne={ordinalNumber:hne({matchPattern:fne,parsePattern:pne,valueCallback:function(e){return parseInt(e,10)}}),era:Ic({matchPatterns:mne,defaultMatchWidth:"wide",parsePatterns:gne,defaultParseWidth:"any"}),quarter:Ic({matchPatterns:vne,defaultMatchWidth:"wide",parsePatterns:yne,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ic({matchPatterns:wne,defaultMatchWidth:"wide",parsePatterns:bne,defaultParseWidth:"any"}),day:Ic({matchPatterns:_ne,defaultMatchWidth:"wide",parsePatterns:Tne,defaultParseWidth:"any"}),dayPeriod:Ic({matchPatterns:Ene,defaultMatchWidth:"any",parsePatterns:Sne,defaultParseWidth:"any"})};const Ine=Cne;var Ane={code:"en-US",formatDistance:zte,formatLong:Qte,formatRelative:ene,localize:une,match:Ine,options:{weekStartsOn:0,firstWeekContainsDate:1}};const f2=Ane;var kne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xne=/^'([^]*?)'?$/,Pne=/''/g,Rne=/[a-zA-Z]/;function $o(t,e,n){var r,i,s,o,a,l,u,c,d,h,f,p,m,v,b,g,_,y;Ve(2,arguments);var w=String(e),T=As(),P=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:T.locale)!==null&&r!==void 0?r:f2,A=Ze((s=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(u=n.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&a!==void 0?a:T.firstWeekContainsDate)!==null&&o!==void 0?o:(d=T.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=Ze((f=(p=(m=(v=n==null?void 0:n.weekStartsOn)!==null&&v!==void 0?v:n==null||(b=n.locale)===null||b===void 0||(g=b.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&m!==void 0?m:T.weekStartsOn)!==null&&p!==void 0?p:(_=T.locale)===null||_===void 0||(y=_.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&f!==void 0?f:0);if(!(I>=0&&I<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!P.localize)throw new RangeError("locale must contain localize property");if(!P.formatLong)throw new RangeError("locale must contain formatLong property");var E=Ge(t);if(!yd(E))throw new RangeError("Invalid time value");var U=_m(E),F=o2(E,U),N={firstWeekContainsDate:A,weekStartsOn:I,locale:P,_originalDate:E},D=w.match(Dne).map(function(O){var R=O[0];if(R==="p"||R==="P"){var B=Iw[R];return B(O,P.formatLong)}return O}).join("").match(kne).map(function(O){if(O==="''")return"'";var R=O[0];if(R==="'")return One(O);var B=Vte[R];if(B)return!(n!=null&&n.useAdditionalWeekYearTokens)&&h2(O)&&Tm(O,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&d2(O)&&Tm(O,e,String(t)),B(F,O,P.localize,N);if(R.match(Rne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return O}).join("");return D}function One(t){var e=t.match(xne);return e?e[1].replace(Pne,"'"):t}function Nne(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function Mne(t){Ve(1,arguments);var e=Ge(t),n=e.getDay();return n}function $ne(t){Ve(1,arguments);var e=Ge(t),n=e.getFullYear(),r=e.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function Ki(t){Ve(1,arguments);var e=Ge(t),n=e.getHours();return n}var Lne=6048e5;function Une(t){Ve(1,arguments);var e=Ge(t),n=bm(e).getTime()-Ste(e).getTime();return Math.round(n/Lne)+1}function ws(t){Ve(1,arguments);var e=Ge(t),n=e.getMinutes();return n}function Rt(t){Ve(1,arguments);var e=Ge(t),n=e.getMonth();return n}function Yu(t){Ve(1,arguments);var e=Ge(t),n=e.getSeconds();return n}function Fne(t,e){var n,r,i,s,o,a,l,u;Ve(1,arguments);var c=Ge(t),d=c.getFullYear(),h=As(),f=Ze((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setFullYear(d+1,0,f),p.setHours(0,0,0,0);var m=il(p,e),v=new Date(0);v.setFullYear(d,0,f),v.setHours(0,0,0,0);var b=il(v,e);return c.getTime()>=m.getTime()?d+1:c.getTime()>=b.getTime()?d:d-1}function Vne(t,e){var n,r,i,s,o,a,l,u;Ve(1,arguments);var c=As(),d=Ze((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=Fne(t,e),f=new Date(0);f.setFullYear(h,0,d),f.setHours(0,0,0,0);var p=il(f,e);return p}var Bne=6048e5;function jne(t,e){Ve(1,arguments);var n=Ge(t),r=il(n,e).getTime()-Vne(n,e).getTime();return Math.round(r/Bne)+1}function gt(t){return Ve(1,arguments),Ge(t).getFullYear()}function rh(t,e){Ve(2,arguments);var n=Ge(t),r=Ge(e);return n.getTime()>r.getTime()}function ih(t,e){Ve(2,arguments);var n=Ge(t),r=Ge(e);return n.getTime()<r.getTime()}function eu(t,e){Ve(2,arguments);var n=Ge(t),r=Ge(e);return n.getTime()===r.getTime()}function VI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hne(t,e){if(t){if(typeof t=="string")return VI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VI(t,e)}}function BI(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Hne(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}}}function Fe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Aw(t,e){return Aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Aw(t,e)}function $t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Aw(t,e)}function Em(t){return Em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Em(t)}function p2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p2=function(){return!!t})()}function Wne(t,e){if(e&&(Ri(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fe(t)}function Lt(t){var e=p2();return function(){var r=Em(t),i;if(e){var s=Em(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Wne(this,i)}}function Ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yne(t,e){if(Ri(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ri(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m2(t){var e=Yne(t,"string");return Ri(e)=="symbol"?e:String(e)}function jI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m2(r.key),r)}}function It(t,e,n){return e&&jI(t.prototype,e),n&&jI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $e(t,e,n){return e=m2(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zne=10,g2=function(){function t(){Ct(this,t),$e(this,"priority",void 0),$e(this,"subPriority",0)}return It(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),Kne=function(t){$t(n,t);var e=Lt(n);function n(r,i,s,o,a){var l;return Ct(this,n),l=e.call(this),l.value=r,l.validateValue=i,l.setValue=s,l.priority=o,a&&(l.subPriority=a),l}return It(n,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,o){return this.setValue(i,s,this.value,o)}}]),n}(g2),Gne=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",zne),$e(Fe(r),"subPriority",-1),r}return It(n,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var o=new Date(0);return o.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),o.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),o}}]),n}(g2),Ht=function(){function t(){Ct(this,t),$e(this,"incompatibleTokens",void 0),$e(this,"priority",void 0),$e(this,"subPriority",void 0)}return It(t,[{key:"run",value:function(n,r,i,s){var o=this.parse(n,r,i,s);return o?{setter:new Kne(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(n,r,i){return!0}}]),t}(),qne=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",140),$e(Fe(r),"incompatibleTokens",["R","u","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"G":case"GG":case"GGG":return o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"});case"GGGGG":return o.era(i,{width:"narrow"});case"GGGG":default:return o.era(i,{width:"wide"})||o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,o){return s.era=o,i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),Mn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ss={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function $n(t,e){return t&&{value:e(t.value),rest:t.rest}}function En(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function os(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*R1+s*P1+o*kte),rest:e.slice(n[0].length)}}function v2(t){return En(Mn.anyDigitsSigned,t)}function Rn(t,e){switch(t){case 1:return En(Mn.singleDigit,e);case 2:return En(Mn.twoDigits,e);case 3:return En(Mn.threeDigits,e);case 4:return En(Mn.fourDigits,e);default:return En(new RegExp("^\\d{1,"+t+"}"),e)}}function Sm(t,e){switch(t){case 1:return En(Mn.singleDigitSigned,e);case 2:return En(Mn.twoDigitsSigned,e);case 3:return En(Mn.threeDigitsSigned,e);case 4:return En(Mn.fourDigitsSigned,e);default:return En(new RegExp("^-?\\d{1,"+t+"}"),e)}}function N1(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function y2(t,e){var n=e>0,r=n?e:1-e,i;if(r<=50)i=t||100;else{var s=r+50,o=Math.floor(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function w2(t){return t%400===0||t%4===0&&t%100!==0}var Xne=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",130),$e(Fe(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){var a=function(u){return{year:u,isTwoDigitYear:s==="yy"}};switch(s){case"y":return $n(Rn(4,i),a);case"yo":return $n(o.ordinalNumber(i,{unit:"year"}),a);default:return $n(Rn(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o){var a=i.getUTCFullYear();if(o.isTwoDigitYear){var l=y2(o.year,a);return i.setUTCFullYear(l,0,1),i.setUTCHours(0,0,0,0),i}var u=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(u,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),Qne=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",130),$e(Fe(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){var a=function(u){return{year:u,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return $n(Rn(4,i),a);case"Yo":return $n(o.ordinalNumber(i,{unit:"year"}),a);default:return $n(Rn(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o,a){var l=O1(i,a);if(o.isTwoDigitYear){var u=y2(o.year,l);return i.setUTCFullYear(u,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),sl(i,a)}var c=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(c,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),sl(i,a)}}]),n}(Ht),Jne=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",130),$e(Fe(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s){return Sm(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,o){var a=new Date(0);return a.setUTCFullYear(o,0,4),a.setUTCHours(0,0,0,0),Wu(a)}}]),n}(Ht),Zne=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",130),$e(Fe(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s){return Sm(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,o){return i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),ere=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",120),$e(Fe(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"Q":case"QQ":return Rn(s.length,i);case"Qo":return o.ordinalNumber(i,{unit:"quarter"});case"QQQ":return o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(i,{width:"wide",context:"formatting"})||o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),tre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",120),$e(Fe(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"q":case"qq":return Rn(s.length,i);case"qo":return o.ordinalNumber(i,{unit:"quarter"});case"qqq":return o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(i,{width:"wide",context:"standalone"})||o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),nre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),$e(Fe(r),"priority",110),r}return It(n,[{key:"parse",value:function(i,s,o){var a=function(u){return u-1};switch(s){case"M":return $n(En(Mn.month,i),a);case"MM":return $n(Rn(2,i),a);case"Mo":return $n(o.ordinalNumber(i,{unit:"month"}),a);case"MMM":return o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(i,{width:"wide",context:"formatting"})||o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),rre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",110),$e(Fe(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){var a=function(u){return u-1};switch(s){case"L":return $n(En(Mn.month,i),a);case"LL":return $n(Rn(2,i),a);case"Lo":return $n(o.ordinalNumber(i,{unit:"month"}),a);case"LLL":return o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(i,{width:"wide",context:"standalone"})||o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ht);function ire(t,e,n){Ve(2,arguments);var r=Ge(t),i=Ze(e),s=u2(r,n)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var sre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",100),$e(Fe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"w":return En(Mn.week,i);case"wo":return o.ordinalNumber(i,{unit:"week"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o,a){return sl(ire(i,o,a),a)}}]),n}(Ht);function ore(t,e){Ve(2,arguments);var n=Ge(t),r=Ze(e),i=l2(n)-r;return n.setUTCDate(n.getUTCDate()-i*7),n}var are=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",100),$e(Fe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"I":return En(Mn.week,i);case"Io":return o.ordinalNumber(i,{unit:"week"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o){return Wu(ore(i,o))}}]),n}(Ht),lre=[31,28,31,30,31,30,31,31,30,31,30,31],ure=[31,29,31,30,31,30,31,31,30,31,30,31],cre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",90),$e(Fe(r),"subPriority",1),$e(Fe(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"d":return En(Mn.date,i);case"do":return o.ordinalNumber(i,{unit:"date"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=w2(o),l=i.getUTCMonth();return a?s>=1&&s<=ure[l]:s>=1&&s<=lre[l]}},{key:"set",value:function(i,s,o){return i.setUTCDate(o),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),dre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",90),$e(Fe(r),"subpriority",1),$e(Fe(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"D":case"DD":return En(Mn.dayOfYear,i);case"Do":return o.ordinalNumber(i,{unit:"date"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=w2(o);return a?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,o){return i.setUTCMonth(0,o),i.setUTCHours(0,0,0,0),i}}]),n}(Ht);function M1(t,e,n){var r,i,s,o,a,l,u,c;Ve(2,arguments);var d=As(),h=Ze((r=(i=(s=(o=n==null?void 0:n.weekStartsOn)!==null&&o!==void 0?o:n==null||(a=n.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&i!==void 0?i:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ge(t),p=Ze(e),m=f.getUTCDay(),v=p%7,b=(v+7)%7,g=(b<h?7:0)+p-m;return f.setUTCDate(f.getUTCDate()+g),f}var hre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",90),$e(Fe(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"E":case"EE":case"EEE":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=M1(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),fre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",90),$e(Fe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o,a){var l=function(c){var d=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+d};switch(s){case"e":case"ee":return $n(Rn(s.length,i),l);case"eo":return $n(o.ordinalNumber(i,{unit:"day"}),l);case"eee":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeeee":return o.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=M1(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),pre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",90),$e(Fe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o,a){var l=function(c){var d=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+d};switch(s){case"c":case"cc":return $n(Rn(s.length,i),l);case"co":return $n(o.ordinalNumber(i,{unit:"day"}),l);case"ccc":return o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"ccccc":return o.day(i,{width:"narrow",context:"standalone"});case"cccccc":return o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(i,{width:"wide",context:"standalone"})||o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=M1(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Ht);function mre(t,e){Ve(2,arguments);var n=Ze(e);n%7===0&&(n=n-7);var r=1,i=Ge(t),s=i.getUTCDay(),o=n%7,a=(o+7)%7,l=(a<r?7:0)+n-s;return i.setUTCDate(i.getUTCDate()+l),i}var gre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",90),$e(Fe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){var a=function(u){return u===0?7:u};switch(s){case"i":case"ii":return Rn(s.length,i);case"io":return o.ordinalNumber(i,{unit:"day"});case"iii":return $n(o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiii":return $n(o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiiii":return $n(o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiii":default:return $n(o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,o){return i=mre(i,o),i.setUTCHours(0,0,0,0),i}}]),n}(Ht),vre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",80),$e(Fe(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"a":case"aa":case"aaa":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(N1(o),0,0,0),i}}]),n}(Ht),yre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",80),$e(Fe(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"b":case"bb":case"bbb":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(N1(o),0,0,0),i}}]),n}(Ht),wre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",80),$e(Fe(r),"incompatibleTokens",["a","b","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"B":case"BB":case"BBB":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(N1(o),0,0,0),i}}]),n}(Ht),bre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",70),$e(Fe(r),"incompatibleTokens",["H","K","k","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"h":return En(Mn.hour12h,i);case"ho":return o.ordinalNumber(i,{unit:"hour"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):!a&&o===12?i.setUTCHours(0,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}(Ht),_re=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",70),$e(Fe(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"H":return En(Mn.hour23h,i);case"Ho":return o.ordinalNumber(i,{unit:"hour"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,o){return i.setUTCHours(o,0,0,0),i}}]),n}(Ht),Tre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",70),$e(Fe(r),"incompatibleTokens",["h","H","k","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"K":return En(Mn.hour11h,i);case"Ko":return o.ordinalNumber(i,{unit:"hour"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}(Ht),Ere=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",70),$e(Fe(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"k":return En(Mn.hour24h,i);case"ko":return o.ordinalNumber(i,{unit:"hour"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,o){var a=o<=24?o%24:o;return i.setUTCHours(a,0,0,0),i}}]),n}(Ht),Sre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",60),$e(Fe(r),"incompatibleTokens",["t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"m":return En(Mn.minute,i);case"mo":return o.ordinalNumber(i,{unit:"minute"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCMinutes(o,0,0),i}}]),n}(Ht),Cre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",50),$e(Fe(r),"incompatibleTokens",["t","T"]),r}return It(n,[{key:"parse",value:function(i,s,o){switch(s){case"s":return En(Mn.second,i);case"so":return o.ordinalNumber(i,{unit:"second"});default:return Rn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCSeconds(o,0),i}}]),n}(Ht),Ire=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",30),$e(Fe(r),"incompatibleTokens",["t","T"]),r}return It(n,[{key:"parse",value:function(i,s){var o=function(l){return Math.floor(l*Math.pow(10,-s.length+3))};return $n(Rn(s.length,i),o)}},{key:"set",value:function(i,s,o){return i.setUTCMilliseconds(o),i}}]),n}(Ht),Are=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",10),$e(Fe(r),"incompatibleTokens",["t","T","x"]),r}return It(n,[{key:"parse",value:function(i,s){switch(s){case"X":return os(ss.basicOptionalMinutes,i);case"XX":return os(ss.basic,i);case"XXXX":return os(ss.basicOptionalSeconds,i);case"XXXXX":return os(ss.extendedOptionalSeconds,i);case"XXX":default:return os(ss.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}(Ht),kre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",10),$e(Fe(r),"incompatibleTokens",["t","T","X"]),r}return It(n,[{key:"parse",value:function(i,s){switch(s){case"x":return os(ss.basicOptionalMinutes,i);case"xx":return os(ss.basic,i);case"xxxx":return os(ss.basicOptionalSeconds,i);case"xxxxx":return os(ss.extendedOptionalSeconds,i);case"xxx":default:return os(ss.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}(Ht),Dre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",40),$e(Fe(r),"incompatibleTokens","*"),r}return It(n,[{key:"parse",value:function(i){return v2(i)}},{key:"set",value:function(i,s,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),n}(Ht),xre=function(t){$t(n,t);var e=Lt(n);function n(){var r;Ct(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$e(Fe(r),"priority",20),$e(Fe(r),"incompatibleTokens","*"),r}return It(n,[{key:"parse",value:function(i){return v2(i)}},{key:"set",value:function(i,s,o){return[new Date(o),{timestampIsSet:!0}]}}]),n}(Ht),Pre={G:new qne,y:new Xne,Y:new Qne,R:new Jne,u:new Zne,Q:new ere,q:new tre,M:new nre,L:new rre,w:new sre,I:new are,d:new cre,D:new dre,E:new hre,e:new fre,c:new pre,i:new gre,a:new vre,b:new yre,B:new wre,h:new bre,H:new _re,K:new Tre,k:new Ere,m:new Sre,s:new Cre,S:new Ire,X:new Are,x:new kre,t:new Dre,T:new xre},Rre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ore=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Nre=/^'([^]*?)'?$/,Mre=/''/g,$re=/\S/,Lre=/[a-zA-Z]/;function kw(t,e,n,r){var i,s,o,a,l,u,c,d,h,f,p,m,v,b,g,_,y,w;Ve(3,arguments);var T=String(t),P=String(e),A=As(),I=(i=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:A.locale)!==null&&i!==void 0?i:f2;if(!I.match)throw new RangeError("locale must contain match property");var E=Ze((o=(a=(l=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(c=r.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:A.firstWeekContainsDate)!==null&&a!==void 0?a:(h=A.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=Ze((p=(m=(v=(b=r==null?void 0:r.weekStartsOn)!==null&&b!==void 0?b:r==null||(g=r.locale)===null||g===void 0||(_=g.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&v!==void 0?v:A.weekStartsOn)!==null&&m!==void 0?m:(y=A.locale)===null||y===void 0||(w=y.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&p!==void 0?p:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(P==="")return T===""?Ge(n):new Date(NaN);var F={firstWeekContainsDate:E,weekStartsOn:U,locale:I},N=[new Gne],D=P.match(Ore).map(function(se){var G=se[0];if(G in Iw){var ue=Iw[G];return ue(se,I.formatLong)}return se}).join("").match(Rre),O=[],R=BI(D),B;try{var Y=function(){var G=B.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&h2(G)&&Tm(G,P,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&d2(G)&&Tm(G,P,t);var ue=G[0],ve=Pre[ue];if(ve){var ie=ve.incompatibleTokens;if(Array.isArray(ie)){var C=O.find(function(j){return ie.includes(j.token)||j.token===ue});if(C)throw new RangeError("The format string mustn't contain `".concat(C.fullToken,"` and `").concat(G,"` at the same time"))}else if(ve.incompatibleTokens==="*"&&O.length>0)throw new RangeError("The format string mustn't contain `".concat(G,"` and any other token at the same time"));O.push({token:ue,fullToken:G});var M=ve.run(T,G,I.match,F);if(!M)return{v:new Date(NaN)};N.push(M.setter),T=M.rest}else{if(ue.match(Lre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ue+"`");if(G==="''"?G="'":ue==="'"&&(G=Ure(G)),T.indexOf(G)===0)T=T.slice(G.length);else return{v:new Date(NaN)}}};for(R.s();!(B=R.n()).done;){var $=Y();if(Ri($)==="object")return $.v}}catch(se){R.e(se)}finally{R.f()}if(T.length>0&&$re.test(T))return new Date(NaN);var S=N.map(function(se){return se.priority}).sort(function(se,G){return G-se}).filter(function(se,G,ue){return ue.indexOf(se)===G}).map(function(se){return N.filter(function(G){return G.priority===se}).sort(function(G,ue){return ue.subPriority-G.subPriority})}).map(function(se){return se[0]}),X=Ge(n);if(isNaN(X.getTime()))return new Date(NaN);var Q=o2(X,_m(X)),pe={},me=BI(S),te;try{for(me.s();!(te=me.n()).done;){var V=te.value;if(!V.validate(Q,F))return new Date(NaN);var W=V.set(Q,pe,F);Array.isArray(W)?(Q=W[0],Nne(pe,W[1])):Q=W}}catch(se){me.e(se)}finally{me.f()}return Q}function Ure(t){return t.match(Nre)[1].replace(Mre,"'")}function HI(t,e){Ve(2,arguments);var n=nh(t),r=nh(e);return n.getTime()===r.getTime()}function Fre(t,e){Ve(2,arguments);var n=Ze(e);return Rs(t,-n)}function Vre(t,e){var n;Ve(1,arguments);var r=Ze((n=e==null?void 0:e.additionalDigits)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=Wre(t),s;if(i.date){var o=Yre(i.date,r);s=zre(o.restDateString,o.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var a=s.getTime(),l=0,u;if(i.time&&(l=Kre(i.time),isNaN(l)))return new Date(NaN);if(i.timezone){if(u=Gre(i.timezone),isNaN(u))return new Date(NaN)}else{var c=new Date(a+l),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(a+l+u)}var Lf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Bre=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,jre=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Hre=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Wre(t){var e={},n=t.split(Lf.dateTimeDelimiter),r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Lf.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Lf.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var i=Lf.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Yre(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function zre(t,e){if(e===null)return new Date(NaN);var n=t.match(Bre);if(!n)return new Date(NaN);var r=!!n[4],i=Ac(n[1]),s=Ac(n[2])-1,o=Ac(n[3]),a=Ac(n[4]),l=Ac(n[5])-1;if(r)return Zre(e,a,l)?qre(e,a,l):new Date(NaN);var u=new Date(0);return!Qre(e,s,o)||!Jre(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}function Ac(t){return t?parseInt(t):1}function Kre(t){var e=t.match(jre);if(!e)return NaN;var n=vy(e[1]),r=vy(e[2]),i=vy(e[3]);return eie(n,r,i)?n*R1+r*P1+i*1e3:NaN}function vy(t){return t&&parseFloat(t.replace(",","."))||0}function Gre(t){if(t==="Z")return 0;var e=t.match(Hre);if(!e)return 0;var n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return tie(r,i)?n*(r*R1+i*P1):NaN}function qre(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var Xre=[31,null,31,30,31,30,31,31,30,31,30,31];function b2(t){return t%400===0||t%4===0&&t%100!==0}function Qre(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Xre[e]||(b2(t)?29:28))}function Jre(t,e){return e>=1&&e<=(b2(t)?366:365)}function Zre(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function eie(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function tie(t,e){return e>=0&&e<=59}function _2(t,e){Ve(2,arguments);var n=Ge(t),r=Ze(e),i=n.getFullYear(),s=n.getDate(),o=new Date(0);o.setFullYear(i,r,15),o.setHours(0,0,0,0);var a=$ne(o);return n.setMonth(r,Math.min(s,a)),n}function fn(t,e){if(Ve(2,arguments),Ri(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var n=Ge(t);return isNaN(n.getTime())?new Date(NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=_2(n,e.month)),e.date!=null&&n.setDate(Ze(e.date)),e.hours!=null&&n.setHours(Ze(e.hours)),e.minutes!=null&&n.setMinutes(Ze(e.minutes)),e.seconds!=null&&n.setSeconds(Ze(e.seconds)),e.milliseconds!=null&&n.setMilliseconds(Ze(e.milliseconds)),n)}function T2(t,e){Ve(2,arguments);var n=Ge(t),r=Ze(e);return n.setHours(r),n}function $1(t,e){Ve(2,arguments);var n=Ge(t),r=Ze(e);return n.setMilliseconds(r),n}function E2(t,e){Ve(2,arguments);var n=Ge(t),r=Ze(e);return n.setMinutes(r),n}function L1(t,e){Ve(2,arguments);var n=Ge(t),r=Ze(e);return n.setSeconds(r),n}function hs(t,e){Ve(2,arguments);var n=Ge(t),r=Ze(e);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}function zu(t,e){Ve(2,arguments);var n=Ze(e);return zi(t,-n)}function nie(t,e){if(Ve(2,arguments),!e||Ri(e)!=="object")return new Date(NaN);var n=e.years?Ze(e.years):0,r=e.months?Ze(e.months):0,i=e.weeks?Ze(e.weeks):0,s=e.days?Ze(e.days):0,o=e.hours?Ze(e.hours):0,a=e.minutes?Ze(e.minutes):0,l=e.seconds?Ze(e.seconds):0,u=zu(t,r+n*12),c=Fre(u,s+i*7),d=a+o*60,h=l+d*60,f=h*1e3,p=new Date(c.getTime()-f);return p}function S2(t,e){Ve(2,arguments);var n=Ze(e);return x1(t,-n)}function uc(){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[J("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),J("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),J("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),J("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}uc.compatConfig={MODE:3};function C2(){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[J("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),J("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}C2.compatConfig={MODE:3};function U1(){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[J("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}U1.compatConfig={MODE:3};function F1(){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[J("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}F1.compatConfig={MODE:3};function V1(){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[J("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),J("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}V1.compatConfig={MODE:3};function B1(){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[J("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}B1.compatConfig={MODE:3};function j1(){return x(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[J("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}j1.compatConfig={MODE:3};function H1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I2={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(I2);var rie=I2.exports,Dw={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var i=Number(r);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}t.exports=e.default})(Dw,Dw.exports);var iie=Dw.exports;const sie=H1(iie);var xw={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){var i=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return i.setUTCFullYear(r.getFullYear()),r.getTime()-i.getTime()}t.exports=e.default})(xw,xw.exports);var oie=xw.exports;const WI=H1(oie);function aie(t,e){var n=die(e);return n.formatToParts?uie(n,t):cie(n,t)}var lie={year:0,month:1,day:2,hour:3,minute:4,second:5};function uie(t,e){try{for(var n=t.formatToParts(e),r=[],i=0;i<n.length;i++){var s=lie[n[i].type];s>=0&&(r[s]=parseInt(n[i].value,10))}return r}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function cie(t,e){var n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var yy={};function die(t){if(!yy[t]){var e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=e==="06/25/2014, 00:00:00"||e==="06/25/2014 00:00:00";yy[t]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return yy[t]}function W1(t,e,n,r,i,s,o){var a=new Date(0);return a.setUTCFullYear(t,e,n),a.setUTCHours(r,i,s,o),a}var YI=36e5,hie=6e4,wy={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Y1(t,e,n){var r,i;if(t===""||(r=wy.timezoneZ.exec(t),r))return 0;var s;if(r=wy.timezoneHH.exec(t),r)return s=parseInt(r[1],10),zI(s)?-(s*YI):NaN;if(r=wy.timezoneHHMM.exec(t),r){s=parseInt(r[1],10);var o=parseInt(r[2],10);return zI(s,o)?(i=Math.abs(s)*YI+o*hie,s>0?-i:i):NaN}if(mie(t)){e=new Date(e||Date.now());var a=n?e:fie(e),l=Pw(a,t),u=n?l:pie(e,l,t);return-u}return NaN}function fie(t){return W1(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function Pw(t,e){var n=aie(t,e),r=W1(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=t.getTime(),s=i%1e3;return i-=s>=0?s:1e3+s,r-i}function pie(t,e,n){var r=t.getTime(),i=r-e,s=Pw(new Date(i),n);if(e===s)return e;i-=s-e;var o=Pw(new Date(i),n);return s===o?s:Math.max(s,o)}function zI(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var KI={};function mie(t){if(KI[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),KI[t]=!0,!0}catch{return!1}}var A2=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,by=36e5,GI=6e4,gie=2,Vr={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:A2};function Rw(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var n=e||{},r=n.additionalDigits==null?gie:sie(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=vie(t),s=yie(i.date,r),o=s.year,a=s.restDateString,l=wie(a,o);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),c=0,d;if(i.time&&(c=bie(i.time),isNaN(c)))return new Date(NaN);if(i.timeZone||n.timeZone){if(d=Y1(i.timeZone||n.timeZone,new Date(u+c)),isNaN(d))return new Date(NaN)}else d=WI(new Date(u+c)),d=WI(new Date(u+c+d));return new Date(u+c+d)}else return new Date(NaN)}function vie(t){var e={},n=Vr.dateTimePattern.exec(t),r;if(n?(e.date=n[1],r=n[3]):(n=Vr.datePattern.exec(t),n?(e.date=n[1],r=n[2]):(e.date=null,r=t)),r){var i=Vr.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function yie(t,e){var n=Vr.YYY[e],r=Vr.YYYYY[e],i;if(i=Vr.YYYY.exec(t)||r.exec(t),i){var s=i[1];return{year:parseInt(s,10),restDateString:t.slice(s.length)}}if(i=Vr.YY.exec(t)||n.exec(t),i){var o=i[1];return{year:parseInt(o,10)*100,restDateString:t.slice(o.length)}}return{year:null}}function wie(t,e){if(e===null)return null;var n,r,i,s;if(t.length===0)return r=new Date(0),r.setUTCFullYear(e),r;if(n=Vr.MM.exec(t),n)return r=new Date(0),i=parseInt(n[1],10)-1,XI(e,i)?(r.setUTCFullYear(e,i),r):new Date(NaN);if(n=Vr.DDD.exec(t),n){r=new Date(0);var o=parseInt(n[1],10);return Eie(e,o)?(r.setUTCFullYear(e,0,o),r):new Date(NaN)}if(n=Vr.MMDD.exec(t),n){r=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return XI(e,i,a)?(r.setUTCFullYear(e,i,a),r):new Date(NaN)}if(n=Vr.Www.exec(t),n)return s=parseInt(n[1],10)-1,QI(e,s)?qI(e,s):new Date(NaN);if(n=Vr.WwwD.exec(t),n){s=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return QI(e,s,l)?qI(e,s,l):new Date(NaN)}return null}function bie(t){var e,n,r;if(e=Vr.HH.exec(t),e)return n=parseFloat(e[1].replace(",",".")),_y(n)?n%24*by:NaN;if(e=Vr.HHMM.exec(t),e)return n=parseInt(e[1],10),r=parseFloat(e[2].replace(",",".")),_y(n,r)?n%24*by+r*GI:NaN;if(e=Vr.HHMMSS.exec(t),e){n=parseInt(e[1],10),r=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return _y(n,r,i)?n%24*by+r*GI+i*1e3:NaN}return null}function qI(t,e,n){e=e||0,n=n||0;var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,s=e*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var _ie=[31,28,31,30,31,30,31,31,30,31,30,31],Tie=[31,29,31,30,31,30,31,31,30,31,30,31];function k2(t){return t%400===0||t%4===0&&t%100!==0}function XI(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;var r=k2(t);if(r&&n>Tie[e]||!r&&n>_ie[e])return!1}return!0}function Eie(t,e){if(e<1)return!1;var n=k2(t);return!(n&&e>366||!n&&e>365)}function QI(t,e,n){return!(e<0||e>52||n!=null&&(n<0||n>6))}function _y(t,e,n){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}var Ow={exports:{}},Nw={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s]);return r}t.exports=e.default})(Nw,Nw.exports);var Sie=Nw.exports;(function(t,e){var n=rie.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=n(Sie);function i(s){return(0,r.default)({},s)}t.exports=e.default})(Ow,Ow.exports);var Cie=Ow.exports;const Iie=H1(Cie);function Aie(t,e,n){var r=Rw(t,n),i=Y1(e,r,!0),s=new Date(r.getTime()-i),o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}function kie(t,e,n){if(typeof t=="string"&&!t.match(A2)){var r=Iie(n);return r.timeZone=e,Rw(t,r)}var i=Rw(t,n),s=W1(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()).getTime(),o=Y1(e,new Date(s));return new Date(s+o)}function JI(t){return e=>new Intl.DateTimeFormat(t,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${e}T00:00:00+00:00`)).slice(0,2)}function Die(t){return e=>$o(new Date(`2017-01-0${e}T00:00:00+00:00`),"EEEEEE",{locale:t})}const xie=(t,e,n)=>{const r=[1,2,3,4,5,6,7];let i;if(t!==null)try{i=r.map(Die(t))}catch{i=r.map(JI(e))}else i=r.map(JI(e));const s=i.slice(0,n),o=i.slice(n+1,i.length);return[i[n]].concat(...o).concat(...s)},z1=(t,e)=>{const n=[];for(let r=+t[0];r<=+t[1];r++)n.push({value:+r,text:`${r}`});return e?n.reverse():n},D2=(t,e,n)=>{const r=[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>{const o=s<10?`0${s}`:s;return new Date(`2017-${o}-01T00:00:00+00:00`)});if(t!==null)try{const s=n==="long"?"MMMM":"MMM";return r.map((o,a)=>{const l=$o(o,s,{locale:t});return{text:l.charAt(0).toUpperCase()+l.substring(1),value:a}})}catch{}const i=new Intl.DateTimeFormat(e,{month:n,timeZone:"UTC"});return r.map((s,o)=>{const a=i.format(s);return{text:a.charAt(0).toUpperCase()+a.substring(1),value:o}})},Pie=t=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][t],Kn=t=>{const e=k(t);return e!=null&&e.$el?e==null?void 0:e.$el:e},Rie=t=>Object.assign({type:"dot"},t),x2=t=>Array.isArray(t)?!!t[0]&&!!t[1]:!1,Cm={prop:t=>`"${t}" prop must be enabled!`,dateArr:t=>`You need to use array as "model-value" binding in order to support "${t}"`},Zn=t=>t,ZI=t=>t===0?t:!t||isNaN(+t)?null:+t,eA=t=>t===null,Oie=t=>{if(t)return[...t.querySelectorAll("input, button, select, textarea, a[href]")][0]},Nie=t=>{const e=[],n=r=>r.filter(i=>i);for(let r=0;r<t.length;r+=3){const i=[t[r],t[r+1],t[r+2]];e.push(n(i))}return e},sh=(t,e,n)=>{const r=n!=null,i=e!=null;if(!r&&!i)return!1;const s=+n,o=+e;return r&&i?+t>s||+t<o:r?+t>s:i?+t<o:!1},Ku=(t,e)=>Nie(t).map(n=>n.map(r=>{const{active:i,disabled:s,isBetween:o,highlighted:a}=e(r);return{...r,active:i,disabled:s,className:{dp__overlay_cell_active:i,dp__overlay_cell:!i,dp__overlay_cell_disabled:s,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:s&&i,dp__cell_in_between:o,"dp--highlighted":a}}})),Lo=(t,e,n=!1)=>{t&&e.allowStopPropagation&&(n&&t.stopImmediatePropagation(),t.stopPropagation())},Mie=()=>["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])","[data-datepicker-instance]"].join(", ");function $ie(t,e){let n=[...document.querySelectorAll(Mie())];n=n.filter(i=>!t.contains(i)||i.hasAttribute("data-datepicker-instance"));const r=n.indexOf(t);if(r>=0&&(e?r-1>=0:r+1<=n.length))return n[r+(e?-1:1)]}const Lie=(t,e)=>{let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}},tA=(t,e,n,r,i)=>{const s=kw(t,e.slice(0,t.length),new Date);return yd(s)&&i2(s)?r||i?s:fn(s,{hours:+n.hours,minutes:+(n==null?void 0:n.minutes),seconds:+(n==null?void 0:n.seconds),milliseconds:0}):null},Uie=(t,e,n,r,i)=>{const s=Array.isArray(n)?n[0]:n;if(typeof e=="string")return tA(t,e,s,r,i);if(Array.isArray(e)){let o=null;for(const a of e)if(o=tA(t,a,s,r,i),o)break;return o}return typeof e=="function"?e(t):null},we=t=>t?new Date(t):new Date,Fie=(t,e,n)=>{if(e){const i=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getDate().toString().padStart(2,"0"),o=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0"),l=n?t.getSeconds().toString().padStart(2,"0"):"00";return`${t.getFullYear()}-${i}-${s}T${o}:${a}:${l}.000Z`}const r=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());return new Date(r).toISOString()},Or=t=>{let e=we(JSON.parse(JSON.stringify(t)));return e=T2(e,0),e=E2(e,0),e=L1(e,0),e=$1(e,0),e},Uo=(t,e,n,r)=>{let i=t?we(t):we();return(e||e===0)&&(i=T2(i,+e)),(n||n===0)&&(i=E2(i,+n)),(r||r===0)&&(i=L1(i,+r)),$1(i,0)},mr=(t,e)=>!t||!e?!1:ih(Or(t),Or(e)),Vt=(t,e)=>!t||!e?!1:eu(Or(t),Or(e)),kr=(t,e)=>!t||!e?!1:rh(Or(t),Or(e)),Gg=(t,e,n)=>t!=null&&t[0]&&t!=null&&t[1]?kr(n,t[0])&&mr(n,t[1]):t!=null&&t[0]&&e?kr(n,t[0])&&mr(n,e)||mr(n,t[0])&&kr(n,e):!1,Bi=t=>{const e=fn(new Date(t),{date:1});return Or(e)},Ty=(t,e,n)=>e&&(n||n===0)?Object.fromEntries(["hours","minutes","seconds"].map(r=>r===e?[r,n]:[r,isNaN(+t[r])?void 0:+t[r]])):{hours:isNaN(+t.hours)?void 0:+t.hours,minutes:isNaN(+t.minutes)?void 0:+t.minutes,seconds:isNaN(+t.seconds)?void 0:+t.seconds},Na=t=>({hours:Ki(t),minutes:ws(t),seconds:Yu(t)}),P2=(t,e)=>{if(e){const n=gt(we(e));if(n>t)return 12;if(n===t)return Rt(we(e))}},R2=(t,e)=>{if(e){const n=gt(we(e));return n<t?-1:n===t?Rt(we(e)):void 0}},Gu=t=>{if(t)return gt(we(t))},Gi=(t,e)=>e?Aie(t,e):t,O2=(t,e)=>e?kie(t,e):t,Vie=t=>t instanceof Date?t:Vre(t),N2=(t,e)=>{const n=kr(t,e)?e:t,r=kr(e,t)?e:t;return s2({start:n,end:r})},Bie=t=>{const e=zi(t,1);return{month:Rt(e),year:gt(e)}},up=(t,e,n)=>{const r=il(Gi(t,e),{weekStartsOn:+n}),i=Rte(Gi(t,e),{weekStartsOn:+n});return[r,i]},M2=(t,e)=>{const n={hours:Ki(we()),minutes:ws(we()),seconds:e?Yu(we()):0};return Object.assign(n,t)},Do=(t,e,n)=>[fn(we(t),{date:1}),fn(we(),{month:e,year:n,date:1})],Ls=(t,e,n)=>{let r=t?we(t):we();return(e||e===0)&&(r=_2(r,e)),n&&(r=hs(r,n)),r},$2=(t,e,n,r,i)=>{if(!r||i&&!e||!i&&!n)return!1;const s=i?zi(t,1):zu(t,1),o=[Rt(s),gt(s)];return i?!Hie(...o,e):!jie(...o,n)},jie=(t,e,n)=>mr(...Do(n,t,e))||Vt(...Do(n,t,e)),Hie=(t,e,n)=>kr(...Do(n,t,e))||Vt(...Do(n,t,e)),L2=(t,e,n,r,i,s,o)=>{if(typeof e=="function"&&!o)return e(t);const a=n?{locale:n}:void 0;return Array.isArray(t)?`${$o(t[0],s,a)}${i&&!t[1]?"":r}${t[1]?$o(t[1],s,a):""}`:$o(t,s,a)},Ol=t=>{if(t)return null;throw new Error(Cm.prop("partial-range"))},Uf=(t,e)=>{if(e)return t();throw new Error(Cm.prop("range"))},Mw=t=>Array.isArray(t)?yd(t[0])&&(t[1]?yd(t[1]):!0):t?yd(t):!1,Wie=(t,e)=>fn(e??we(),{hours:+t.hours||0,minutes:+t.minutes||0,seconds:+t.seconds||0}),Ey=(t,e,n,r)=>{if(!t)return!0;if(r){const i=n==="max"?ih(t,e):rh(t,e),s={seconds:0,milliseconds:0};return i||eu(fn(t,s),fn(e,s))}return n==="max"?t.getTime()<=e.getTime():t.getTime()>=e.getTime()},Sy=(t,e,n)=>t?Wie(t,e):we(n??e),nA=(t,e,n,r,i)=>{if(Array.isArray(r)){const o=Sy(t,r[0],e),a=Sy(t,r[1],e);return Ey(r[0],o,n,!!e)&&Ey(r[1],a,n,!!e)&&i}const s=Sy(t,r,e);return Ey(r,s,n,!!e)&&i},Cy=t=>fn(we(),Na(t)),Yie=(t,e)=>Array.isArray(t)?t.map(n=>we(n)).filter(n=>gt(we(n))===e).map(n=>Rt(n)):[],U2=(t,e,n)=>typeof t=="function"?t({month:e,year:n}):!!t.months.find(r=>r.month===e&&r.year===n),K1=(t,e)=>typeof t=="function"?t(e):t.years.includes(e),kc=On({menuFocused:!1,shiftKeyInMenu:!1}),F2=()=>{const t=n=>{kc.menuFocused=n},e=n=>{kc.shiftKeyInMenu!==n&&(kc.shiftKeyInMenu=n)};return{control:Z(()=>({shiftKeyInMenu:kc.shiftKeyInMenu,menuFocused:kc.menuFocused})),setMenuFocused:t,setShiftKey:e}},ln=On({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),Iy=re(null),Ff=re(!1),Ay=re(!1),ky=re(!1),Dy=re(!1),$r=re(0),lr=re(0),ta=()=>{const t=Z(()=>Ff.value?[...ln.selectionGrid,ln.actionRow].filter(d=>d.length):Ay.value?[...ln.timePicker[0],...ln.timePicker[1],Dy.value?[]:[Iy.value],ln.actionRow].filter(d=>d.length):ky.value?[...ln.monthPicker,ln.actionRow]:[ln.monthYear,...ln.calendar,ln.time,ln.actionRow].filter(d=>d.length)),e=d=>{$r.value=d?$r.value+1:$r.value-1;let h=null;t.value[lr.value]&&(h=t.value[lr.value][$r.value]),h||($r.value=d?$r.value-1:$r.value+1)},n=d=>{lr.value===0&&!d||lr.value===t.value.length&&d||(lr.value=d?lr.value+1:lr.value-1,t.value[lr.value]?t.value[lr.value]&&!t.value[lr.value][$r.value]&&$r.value!==0&&($r.value=t.value[lr.value].length-1):lr.value=d?lr.value-1:lr.value+1)},r=d=>{let h=null;t.value[lr.value]&&(h=t.value[lr.value][$r.value]),h?h.focus({preventScroll:!Ff.value}):$r.value=d?$r.value-1:$r.value+1},i=()=>{e(!0),r(!0)},s=()=>{e(!1),r(!1)},o=()=>{n(!1),r(!0)},a=()=>{n(!0),r(!0)},l=(d,h)=>{ln[h]=d},u=(d,h)=>{ln[h]=d},c=()=>{$r.value=0,lr.value=0};return{buildMatrix:l,buildMultiLevelMatrix:u,setTimePickerBackRef:d=>{Iy.value=d},setSelectionGrid:d=>{Ff.value=d,c(),d||(ln.selectionGrid=[])},setTimePicker:(d,h=!1)=>{Ay.value=d,Dy.value=h,c(),d||(ln.timePicker[0]=[],ln.timePicker[1]=[])},setTimePickerElements:(d,h=0)=>{ln.timePicker[h]=d},arrowRight:i,arrowLeft:s,arrowUp:o,arrowDown:a,clearArrowNav:()=>{ln.monthYear=[],ln.calendar=[],ln.time=[],ln.actionRow=[],ln.selectionGrid=[],ln.timePicker[0]=[],ln.timePicker[1]=[],Ff.value=!1,Ay.value=!1,Dy.value=!1,ky.value=!1,c(),Iy.value=null},setMonthPicker:d=>{ky.value=d,c()},refSets:ln}},rA=t=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...t??{}}),zie=t=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",calendarWrap:"Calendar wrapper",calendarDays:"Calendar days",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:e=>`Increment ${e}`,decrementValue:e=>`Decrement ${e}`,openTpOverlay:e=>`Open ${e} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:()=>"",...t??{}}),iA=t=>t?typeof t=="boolean"?t?2:0:+t>=2?+t:2:0,Kie=t=>{const e=typeof t=="object"&&t,n={static:!0,solo:!1};if(!t)return{...n,count:iA(!1)};const r=e?t:{},i=e?r.count??!0:t,s=iA(i);return Object.assign(n,r,{count:s})},Gie=(t,e,n)=>t||(typeof n=="string"?n:e),qie=t=>typeof t=="boolean"?t?rA({}):!1:rA(t),Xie=t=>{const e={enterSubmit:!0,tabSubmit:!0,openMenu:!0,selectOnFocus:!1,rangeSeparator:" - "};return typeof t=="object"?{...e,...t??{},enabled:!0}:{...e,enabled:t}},Qie=t=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...t??{}}),Jie=t=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...t??{}}),Zie=t=>{const e={input:!1};return typeof t=="object"?{...e,...t??{},enabled:!0}:{enabled:t,...e}},ese=t=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,tabOutClosesMenu:!0,...t??{}}),tse=(t,e,n)=>{const r={dates:Array.isArray(t)?t.map(i=>we(i)):[],years:[],months:[],quarters:[],weeks:[],weekdays:e,options:{highlightDisabled:n}};return typeof t=="function"?t:{...r,...t??{}}},nse=t=>typeof t=="object"?{type:t.type,hideOnOffsetDates:t.hideOnOffsetDates??!1}:{type:t,hideOnOffsetDates:!1},Ln=t=>{const e=()=>{const b=t.enableSeconds?":ss":"";return t.is24?`HH:mm${b}`:`hh:mm${b} aa`},n=()=>t.format?t.format:t.monthPicker?"MM/yyyy":t.timePicker?e():t.weekPicker?"MM/dd/yyyy":t.yearPicker?"yyyy":t.quarterPicker?"QQQ/yyyy":t.enableTimePicker?`MM/dd/yyyy, ${e()}`:"MM/dd/yyyy",r=b=>M2(b,t.enableSeconds),i=()=>t.range?t.startTime&&Array.isArray(t.startTime)?[r(t.startTime[0]),r(t.startTime[1])]:null:t.startTime&&!Array.isArray(t.startTime)?r(t.startTime):null,s=Z(()=>Kie(t.multiCalendars)),o=Z(()=>i()),a=Z(()=>zie(t.ariaLabels)),l=Z(()=>Qie(t.filters)),u=Z(()=>qie(t.transitions)),c=Z(()=>Jie(t.actionRow)),d=Z(()=>Gie(t.previewFormat,t.format,n())),h=Z(()=>Xie(t.textInput)),f=Z(()=>Zie(t.inline)),p=Z(()=>ese(t.config)),m=Z(()=>tse(t.highlight,t.highlightWeekDays,t.highlightDisabledDays)),v=Z(()=>nse(t.weekNumbers));return{defaultedTransitions:u,defaultedMultiCalendars:s,defaultedStartTime:o,defaultedAriaLabels:a,defaultedFilters:l,defaultedActionRow:c,defaultedPreviewFormat:d,defaultedTextInput:h,defaultedInline:f,defaultedConfig:p,defaultedHighlight:m,defaultedWeekNumbers:v,getDefaultPattern:n,getDefaultStartTime:i}},rse=(t,e,n)=>{const r=re(),{defaultedTextInput:i,getDefaultPattern:s}=Ln(e),o=re(""),a=_u(e,"format");St(r,()=>{t("internal-model-change",r.value)}),St(a,()=>{D()});const l=S=>O2(S,e.timezone),u=S=>Gi(S,e.timezone),c=(S,X,Q=!1)=>L2(S,e.format,e.formatLocale,i.value.rangeSeparator,e.modelAuto,X??s(),Q),d=S=>S?e.modelType?R(S):{hours:Ki(S),minutes:ws(S),seconds:e.enableSeconds?Yu(S):0}:null,h=S=>e.modelType?R(S):{month:Rt(S),year:gt(S)},f=S=>Array.isArray(S)?e.multiDates?S.map(X=>p(X,hs(we(),X))):Uf(()=>[hs(we(),S[0]),S[1]?hs(we(),S[1]):Ol(e.partialRange)],e.range):hs(we(),+S),p=(S,X)=>(typeof S=="string"||typeof S=="number")&&e.modelType?O(S):X,m=S=>Array.isArray(S)?[p(S[0],Uo(null,+S[0].hours,+S[0].minutes,S[0].seconds)),p(S[1],Uo(null,+S[1].hours,+S[1].minutes,S[1].seconds))]:p(S,Uo(null,S.hours,S.minutes,S.seconds)),v=S=>Array.isArray(S)?e.multiDates?S.map(X=>p(X,Ls(null,+X.month,+X.year))):Uf(()=>[p(S[0],Ls(null,+S[0].month,+S[0].year)),p(S[1],S[1]?Ls(null,+S[1].month,+S[1].year):Ol(e.partialRange))],e.range):p(S,Ls(null,+S.month,+S.year)),b=S=>{if(Array.isArray(S))return S.map(X=>O(X));throw new Error(Cm.dateArr("multi-dates"))},g=S=>{if(Array.isArray(S))return[we(S[0]),we(S[1])];throw new Error(Cm.dateArr("week-picker"))},_=S=>e.modelAuto?Array.isArray(S)?[O(S[0]),O(S[1])]:e.autoApply?[O(S)]:[O(S),null]:Array.isArray(S)?Uf(()=>[O(S[0]),S[1]?O(S[1]):Ol(e.partialRange)],e.range):O(S),y=()=>{Array.isArray(r.value)&&e.range&&r.value.length===1&&r.value.push(Ol(e.partialRange))},w=()=>{const S=r.value;return[R(S[0]),S[1]?R(S[1]):Ol(e.partialRange)]},T=()=>r.value[1]?w():R(Zn(r.value[0])),P=()=>(r.value||[]).map(S=>R(S)),A=()=>(y(),e.modelAuto?T():e.multiDates?P():Array.isArray(r.value)?Uf(()=>w(),e.range):R(Zn(r.value))),I=S=>!S||Array.isArray(S)&&!S.length?null:e.timePicker?m(Zn(S)):e.monthPicker?v(Zn(S)):e.yearPicker?f(Zn(S)):e.multiDates?b(Zn(S)):e.weekPicker?g(Zn(S)):_(Zn(S)),E=S=>{const X=I(S);Mw(Zn(X))?(r.value=Zn(X),D()):(r.value=null,o.value="")},U=()=>{const S=X=>$o(X,i.value.format);return`${S(r.value[0])} ${i.value.rangeSeparator} ${r.value[1]?S(r.value[1]):""}`},F=()=>n.value&&r.value?Array.isArray(r.value)?U():$o(r.value,i.value.format):c(r.value),N=()=>r.value?e.multiDates?r.value.map(S=>c(S)).join("; "):i.value.enabled&&typeof i.value.format=="string"?F():c(r.value):"",D=()=>{!e.format||typeof e.format=="string"||i.value.enabled&&typeof i.value.format=="string"?o.value=N():o.value=e.format(r.value)},O=S=>{if(e.utc){const X=new Date(S);return e.utc==="preserve"?new Date(X.getTime()+X.getTimezoneOffset()*6e4):X}return e.modelType?e.modelType==="date"||e.modelType==="timestamp"?u(new Date(S)):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?kw(S,s(),new Date):u(kw(S,e.modelType,new Date)):u(new Date(S))},R=S=>S?e.utc?Fie(S,e.utc==="preserve",e.enableSeconds):e.modelType?e.modelType==="timestamp"?+l(S):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?c(l(S)):c(l(S),e.modelType,!0):l(S):"",B=(S,X=!1)=>{if(t("update:model-value",S),e.emitTimezone&&X){const Q=Array.isArray(S)?S.map(pe=>Gi(Zn(pe)),e.emitTimezone):Gi(Zn(S),e.emitTimezone);t("update:model-timezone-value",Q)}},Y=S=>Array.isArray(r.value)?e.multiDates?r.value.map(X=>S(X)):[S(r.value[0]),r.value[1]?S(r.value[1]):Ol(e.partialRange)]:S(Zn(r.value)),$=S=>B(Zn(Y(S)));return{inputValue:o,internalModelValue:r,checkBeforeEmit:()=>r.value?e.range?e.partialRange?r.value.length>=1:r.value.length===2:!!r.value:!1,parseExternalModelValue:E,formatInputValue:D,emitModelValue:()=>(D(),e.monthPicker?$(h):e.timePicker?$(d):e.yearPicker?$(gt):e.weekPicker?B(r.value.map(S=>R(S)),!0):B(A(),!0))}},ise=(t,e)=>{const{defaultedFilters:n}=Ln(t),{validateMonthYearInRange:r}=_l(t),i=(u,c)=>{let d=u;return n.value.months.includes(Rt(d))?(d=c?zi(u,1):zu(u,1),i(d,c)):d},s=(u,c)=>{let d=u;return n.value.years.includes(gt(d))?(d=c?x1(u,1):S2(u,1),s(d,c)):d},o=(u,c=!1)=>{const d=fn(new Date,{month:t.month,year:t.year});let h=u?zi(d,1):zu(d,1);t.disableYearSelect&&(h=hs(h,t.year));let f=Rt(h),p=gt(h);n.value.months.includes(f)&&(h=i(h,u),f=Rt(h),p=gt(h)),n.value.years.includes(p)&&(h=s(h,u),p=gt(h)),r(f,p,u,t.preventMinMaxNavigation)&&a(f,p,c)},a=(u,c,d)=>{e("update-month-year",{month:u,year:c,fromNav:d})},l=Z(()=>u=>$2(fn(new Date,{month:t.month,year:t.year}),t.maxDate,t.minDate,t.preventMinMaxNavigation,u));return{handleMonthYearChange:o,isDisabled:l,updateMonthYear:a}};var Hl=(t=>(t.center="center",t.left="left",t.right="right",t))(Hl||{}),Mi=(t=>(t.month="month",t.year="year",t))(Mi||{}),fa=(t=>(t.top="top",t.bottom="bottom",t))(fa||{}),Ma=(t=>(t.header="header",t.calendar="calendar",t.timePicker="timePicker",t))(Ma||{}),ns=(t=>(t.month="month",t.year="year",t.calendar="calendar",t.time="time",t.minutes="minutes",t.hours="hours",t.seconds="seconds",t))(ns||{});const sse=({menuRef:t,menuRefInner:e,inputRef:n,pickerWrapperRef:r,inline:i,emit:s,props:o,slots:a})=>{const l=re({}),u=re(!1),c=re({top:"0",left:"0"}),d=re(!1),h=_u(o,"teleportCenter");St(h,()=>{c.value=JSON.parse(JSON.stringify({})),y()});const f=O=>{if(o.teleport){const R=O.getBoundingClientRect();return{left:R.left+window.scrollX,top:R.top+window.scrollY}}return{top:0,left:0}},p=(O,R)=>{c.value.left=`${O+R-l.value.width}px`},m=O=>{c.value.left=`${O}px`},v=(O,R)=>{o.position===Hl.left&&m(O),o.position===Hl.right&&p(O,R),o.position===Hl.center&&(c.value.left=`${O+R/2-l.value.width/2}px`)},b=O=>{const{width:R,height:B}=O.getBoundingClientRect(),{top:Y,left:$}=o.altPosition?o.altPosition(O):f(O);return{top:+Y,left:+$,width:R,height:B}},g=()=>{c.value.left="50%",c.value.top="50%",c.value.transform="translate(-50%, -50%)",c.value.position="fixed",delete c.value.opacity},_=()=>{const O=Kn(n),{top:R,left:B,transform:Y}=o.altPosition(O);c.value={top:`${R}px`,left:`${B}px`,transform:Y??""}},y=(O=!0)=>{var R;if(!i.value.enabled){if(h.value)return g();if(o.altPosition!==null)return _();if(O){const B=o.teleport?(R=e.value)==null?void 0:R.$el:t.value;B&&(l.value=B.getBoundingClientRect()),s("recalculate-position")}return U()}},w=({inputEl:O,left:R,width:B})=>{window.screen.width>768&&!u.value&&v(R,B),A(O)},T=O=>{const{top:R,left:B,height:Y,width:$}=b(O);c.value.top=`${Y+R+ +o.offset}px`,d.value=!1,u.value||(c.value.left=`${B+$/2-l.value.width/2}px`),w({inputEl:O,left:B,width:$})},P=O=>{const{top:R,left:B,width:Y}=b(O);c.value.top=`${R-+o.offset-l.value.height}px`,d.value=!0,w({inputEl:O,left:B,width:Y})},A=O=>{if(o.autoPosition){const{left:R,width:B}=b(O),{left:Y,right:$}=l.value;if(!u.value){if(Math.abs(Y)!==Math.abs($)){if(Y<=0)return u.value=!0,m(R);if($>=document.documentElement.clientWidth)return u.value=!0,p(R,B)}return v(R,B)}}},I=()=>{const O=Kn(n);if(O){const{height:R}=l.value,{top:B,height:Y}=O.getBoundingClientRect(),$=window.innerHeight-B-Y,S=B;return R<=$?fa.bottom:R>$&&R<=S?fa.top:$>=S?fa.bottom:fa.top}return fa.bottom},E=O=>I()===fa.bottom?T(O):P(O),U=()=>{const O=Kn(n);if(O)return o.autoPosition?E(O):T(O)},F=function(O){if(O){const R=O.scrollHeight>O.clientHeight,B=window.getComputedStyle(O).overflowY.indexOf("hidden")!==-1;return R&&!B}return!0},N=function(O){return!O||O===document.body||O.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:F(O)?O:N(O.parentNode)},D=O=>{if(O)switch(o.position){case Hl.left:return{left:0,transform:"translateX(0)"};case Hl.right:return{left:`${O.width}px`,transform:"translateX(-100%)"};default:return{left:`${O.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:d,menuStyle:c,xCorrect:u,setMenuPosition:y,getScrollableParent:N,shadowRender:(O,R)=>{var B,Y,$;const S=document.createElement("div"),X=(B=Kn(n))==null?void 0:B.getBoundingClientRect();S.setAttribute("id","dp--temp-container");const Q=(Y=r.value)!=null&&Y.clientWidth?r.value:document.body;Q.append(S);const pe=D(X),me=Ba(O,{...R,shadow:!0,style:{opacity:0,position:"absolute",...pe}},Object.fromEntries(Object.keys(a).filter(te=>["right-sidebar","left-sidebar"].includes(te)).map(te=>[te,a[te]])));ja(me,S),l.value=($=me.el)==null?void 0:$.getBoundingClientRect(),ja(null,S),Q.removeChild(S)}}},co=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]}],ose=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],ase={all:()=>co,monthYear:()=>co.filter(t=>t.use.includes("month-year")),input:()=>ose,timePicker:()=>co.filter(t=>t.use.includes("time")),action:()=>co.filter(t=>t.use.includes("action")),calendar:()=>co.filter(t=>t.use.includes("calendar")),menu:()=>co.filter(t=>t.use.includes("menu")),shared:()=>co.filter(t=>t.use.includes("shared")),yearMode:()=>co.filter(t=>t.use.includes("year-mode"))},fi=(t,e,n)=>{const r=[];return ase[e]().forEach(i=>{t[i.name]&&r.push(i.name)}),n!=null&&n.length&&n.forEach(i=>{i.slot&&r.push(i.slot)}),r},Hh=t=>{const e=Z(()=>r=>t.value?r?t.value.open:t.value.close:""),n=Z(()=>r=>t.value?r?t.value.menuAppearTop:t.value.menuAppearBottom:"");return{transitionName:e,showTransition:!!t.value,menuTransition:n}},Wh=(t,e)=>{const n=we(Gi(new Date,t.timezone)),r=re([{month:Rt(n),year:gt(n)}]),i=On({hours:t.range?[Ki(n),Ki(n)]:Ki(n),minutes:t.range?[ws(n),ws(n)]:ws(n),seconds:t.range?[0,0]:0}),s=Z({get:()=>t.internalModelValue,set:l=>{!t.readonly&&!t.disabled&&e("update:internal-model-value",l)}}),o=Z(()=>l=>r.value[l]?r.value[l].month:0),a=Z(()=>l=>r.value[l]?r.value[l].year:0);return{calendars:r,time:i,modelValue:s,month:o,year:a}},lse=(t,e)=>{const{defaultedMultiCalendars:n,defaultedHighlight:r}=Ln(e),{isDisabled:i,matchDate:s}=_l(e),o=re(null),a=re(we(Gi(new Date,e.timezone))),l=$=>{!$.current&&e.hideOffsetDates||(o.value=$.value)},u=()=>{o.value=null},c=$=>Array.isArray(t.value)&&e.range&&t.value[0]&&o.value?$?kr(o.value,t.value[0]):mr(o.value,t.value[0]):!0,d=($,S)=>{const X=()=>t.value?S?t.value[0]||null:t.value[1]:null,Q=t.value&&Array.isArray(t.value)?X():null;return Vt(we($.value),Q)},h=$=>{const S=Array.isArray(t.value)?t.value[0]:null;return $?!mr(o.value??null,S):!0},f=($,S=!0)=>(e.range||e.weekPicker)&&Array.isArray(t.value)&&t.value.length===2?e.hideOffsetDates&&!$.current?!1:Vt(we($.value),t.value[S?0:1]):e.range?d($,S)&&h(S)||Vt($.value,Array.isArray(t.value)?t.value[0]:null)&&c(S):!1,p=($,S,X)=>Array.isArray(t.value)&&t.value[0]&&t.value.length===1?$?!1:X?kr(t.value[0],S.value):mr(t.value[0],S.value):!1,m=$=>!t.value||e.hideOffsetDates&&!$.current?!1:e.range?e.modelAuto&&Array.isArray(t.value)?Vt($.value,t.value[0]?t.value[0]:a.value):!1:e.multiDates&&Array.isArray(t.value)?t.value.some(S=>Vt(S,$.value)):Vt($.value,t.value?t.value:a.value),v=$=>{if(e.autoRange||e.weekPicker){if(o.value){if(e.hideOffsetDates&&!$.current)return!1;const S=Rs(o.value,+e.autoRange),X=up(we(o.value),e.timezone,e.weekStart);return e.weekPicker?Vt(X[1],we($.value)):Vt(S,we($.value))}return!1}return!1},b=$=>{if(e.autoRange||e.weekPicker){if(o.value){const S=Rs(o.value,+e.autoRange);if(e.hideOffsetDates&&!$.current)return!1;const X=up(we(o.value),e.timezone,e.weekStart);return e.weekPicker?kr($.value,X[0])&&mr($.value,X[1]):kr($.value,o.value)&&mr($.value,S)}return!1}return!1},g=$=>{if(e.autoRange||e.weekPicker){if(o.value){if(e.hideOffsetDates&&!$.current)return!1;const S=up(we(o.value),e.timezone,e.weekStart);return e.weekPicker?Vt(S[0],$.value):Vt(o.value,$.value)}return!1}return!1},_=$=>Gg(t.value,o.value,$.value),y=()=>e.modelAuto&&Array.isArray(e.internalModelValue)?!!e.internalModelValue[0]:!1,w=()=>e.modelAuto?x2(e.internalModelValue):!0,T=$=>{if(Array.isArray(t.value)&&t.value.length||e.weekPicker)return!1;const S=e.range?!f($)&&!f($,!1):!0;return!i($.value)&&!m($)&&!(!$.current&&e.hideOffsetDates)&&S},P=$=>e.range?e.modelAuto?y()&&m($):!1:m($),A=$=>{var S;return r.value?typeof r.value=="function"?r.value($.value):s($.value,(S=e.arrMapValues)!=null&&S.highlightedDates?e.arrMapValues.highlightedDates:r.value.dates):!1},I=$=>{const S=i($.value);return S&&(typeof r.value=="function"?!r.value($.value,S):!r.value.options.highlightDisabled)},E=$=>{var S;return typeof r.value=="function"?r.value($.value):(S=r.value.weekdays)==null?void 0:S.includes($.value.getDay())},U=$=>(e.range||e.weekPicker)&&(!(n.value.count>0)||$.current)&&w()&&!(!$.current&&e.hideOffsetDates)&&!m($)?_($):!1,F=$=>{const{isRangeStart:S,isRangeEnd:X}=O($),Q=e.range?S||X:!1;return{dp__cell_offset:!$.current,dp__pointer:!e.disabled&&!(!$.current&&e.hideOffsetDates)&&!i($.value),dp__cell_disabled:i($.value),dp__cell_highlight:!I($)&&(A($)||E($))&&!P($)&&!Q&&!g($)&&!(U($)&&e.weekPicker)&&!X,dp__cell_highlight_active:!I($)&&(A($)||E($))&&P($),dp__today:!e.noToday&&Vt($.value,a.value)&&$.current}},N=$=>({dp__active_date:P($),dp__date_hover:T($)}),D=$=>({...R($),...B($),dp__range_between_week:U($)&&e.weekPicker}),O=$=>{const S=n.value.count>0?$.current&&f($)&&w():f($)&&w(),X=n.value.count>0?$.current&&f($,!1)&&w():f($,!1)&&w();return{isRangeStart:S,isRangeEnd:X}},R=$=>{const{isRangeStart:S,isRangeEnd:X}=O($);return{dp__range_start:S,dp__range_end:X,dp__range_between:U($)&&!e.weekPicker,dp__date_hover_start:p(T($),$,!0),dp__date_hover_end:p(T($),$,!1)}},B=$=>({...R($),dp__cell_auto_range:b($),dp__cell_auto_range_start:g($),dp__cell_auto_range_end:v($)}),Y=$=>e.range?e.autoRange?B($):e.modelAuto?{...N($),...R($)}:R($):e.weekPicker?D($):N($);return{setHoverDate:l,clearHoverDate:u,getDayClassData:$=>e.hideOffsetDates&&!$.current?{}:{...F($),...Y($),[e.dayClass?e.dayClass($.value):""]:!0,[e.calendarCellClassName]:!!e.calendarCellClassName}}},_l=t=>{const{defaultedFilters:e,defaultedHighlight:n}=Ln(t),r=()=>{if(t.timezone)return t.timezone;if(t.utc)return"UTC"},i=E=>{const U=Or(s(we(E))).toISOString(),[F]=U.split("T");return F},s=E=>t.utc==="preserve"?O2(E,r()):Gi(E,r()),o=E=>{var U;const F=t.maxDate?kr(E,s(we(t.maxDate))):!1,N=t.minDate?mr(E,s(we(t.minDate))):!1,D=c(s(E),(U=t.arrMapValues)!=null&&U.disabledDates?t.arrMapValues.disabledDates:t.disabledDates),O=e.value.months.map(S=>+S).includes(Rt(E)),R=t.disabledWeekDays.length?t.disabledWeekDays.some(S=>+S===Mne(E)):!1,B=h(E),Y=gt(E),$=Y<+t.yearRange[0]||Y>+t.yearRange[1];return!(F||N||D||O||$||R||B)},a=(E,U)=>mr(...Do(t.minDate,E,U))||Vt(...Do(t.minDate,E,U)),l=(E,U)=>kr(...Do(t.maxDate,E,U))||Vt(...Do(t.maxDate,E,U)),u=(E,U,F)=>{let N=!1;return t.maxDate&&F&&l(E,U)&&(N=!0),t.minDate&&!F&&a(E,U)&&(N=!0),N},c=(E,U)=>E?U instanceof Map?!!U.get(i(E)):Array.isArray(U)?U.some(F=>Vt(s(we(F)),E)):U?U(we(JSON.parse(JSON.stringify(E)))):!1:!0,d=(E,U,F,N)=>{let D=!1;return N?t.minDate&&t.maxDate?D=u(E,U,F):(t.minDate&&a(E,U)||t.maxDate&&l(E,U))&&(D=!0):D=!0,D},h=E=>{var U,F,N,D,O;return Array.isArray(t.allowedDates)&&!((U=t.allowedDates)!=null&&U.length)?!0:(F=t.arrMapValues)!=null&&F.allowedDates?!c(E,(N=t.arrMapValues)==null?void 0:N.allowedDates):(D=t.allowedDates)!=null&&D.length?!((O=t.allowedDates)!=null&&O.some(R=>Vt(Or(R),s(Or(E))))):!1},f=E=>!o(E),p=E=>t.noDisabledRange?!s2({start:E[0],end:E[1]}).some(U=>f(U)):!0,m=(E,U,F=0)=>{if(Array.isArray(U)&&U[F]){const N=Ite(E,U[F]),D=N2(U[F],E),O=D.length===1?0:D.filter(B=>f(B)).length,R=Math.abs(N)-O;if(t.minRange&&t.maxRange)return R>=+t.minRange&&R<=+t.maxRange;if(t.minRange)return R>=+t.minRange;if(t.maxRange)return R<=+t.maxRange}return!0},v=E=>new Map(E.map(U=>[i(U),!0])),b=E=>Array.isArray(E)&&E.length>0,g=()=>{const E={disabledDates:null,allowedDates:null,highlightedDates:null};return b(t.allowedDates)&&(E.allowedDates=v(t.allowedDates)),typeof n.value!="function"&&b(n.value.dates)&&(E.highlightedDates=v(n.value.dates)),b(t.disabledDates)&&(E.disabledDates=v(t.disabledDates)),E},_=()=>!t.enableTimePicker||t.monthPicker||t.yearPicker||t.ignoreTimeValidation,y=E=>Array.isArray(E)?[E[0]?Cy(E[0]):null,E[1]?Cy(E[1]):null]:Cy(E),w=(E,U,F)=>E.find(N=>+N.hours===Ki(U)&&N.minutes==="*"?!0:+N.minutes===ws(U)&&+N.hours===Ki(U))&&F,T=(E,U,F)=>{const[N,D]=E,[O,R]=U;return!w(N,O,F)&&!w(D,R,F)&&F},P=(E,U)=>{const F=Array.isArray(U)?U:[U];return Array.isArray(t.disabledTimes)?Array.isArray(t.disabledTimes[0])?T(t.disabledTimes,F,E):!F.some(N=>w(t.disabledTimes,N,E)):E},A=(E,U)=>{const F=Array.isArray(U)?[Na(U[0]),U[1]?Na(U[1]):void 0]:Na(U),N=!t.disabledTimes(F);return E&&N},I=(E,U)=>t.disabledTimes?Array.isArray(t.disabledTimes)?P(U,E):A(U,E):U;return{isDisabled:f,validateDate:o,validateMonthYearInRange:d,isDateRangeAllowed:p,checkMinMaxRange:m,matchDate:c,mapDatesArrToMap:g,isValidTime:E=>{let U=!0;if(!E||_())return!0;const F=!t.minDate&&!t.maxDate?y(E):E;return(t.maxTime||t.maxDate)&&(U=nA(t.maxTime,t.maxDate,"max",Zn(F),U)),(t.minTime||t.minDate)&&(U=nA(t.minTime,t.minDate,"min",Zn(F),U)),I(E,U)}}},qg=()=>{const t=Z(()=>(r,i)=>r==null?void 0:r.includes(i)),e=Z(()=>(r,i)=>r.count?r.solo?!0:i===0:!0),n=Z(()=>(r,i)=>r.count?r.solo?!0:i===r.count-1:!0);return{hideNavigationButtons:t,showLeftIcon:e,showRightIcon:n}},use=(t,e,n)=>{const r=re(0),i=On({[Ma.timePicker]:!t.enableTimePicker||t.timePicker||t.monthPicker,[Ma.calendar]:!1,[Ma.header]:!1}),s=Z(()=>t.monthPicker),o=d=>{var h;if((h=t.flow)!=null&&h.length){if(!d&&s.value)return c();i[d]=!0,Object.keys(i).filter(f=>!i[f]).length||c()}},a=()=>{var d;(d=t.flow)!=null&&d.length&&r.value!==-1&&(r.value+=1,e("flow-step",r.value),c())},l=()=>{r.value=-1},u=(d,h,...f)=>{t.flow[r.value]===d&&n.value&&n.value[h](...f)},c=()=>{u(ns.month,"toggleMonthPicker",!0),u(ns.year,"toggleYearPicker",!0),u(ns.calendar,"toggleTimePicker",!1,!0),u(ns.time,"toggleTimePicker",!0,!0);const d=t.flow[r.value];(d===ns.hours||d===ns.minutes||d===ns.seconds)&&u(d,"toggleTimePicker",!0,!0,d)};return{childMount:o,updateFlowStep:a,resetFlow:l,flowStep:r}},Xg={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:Boolean,default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:String,default:null},emitTimezone:{type:String,default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},menuClassName:{type:String,default:null},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},calendarCellClassName:{type:String,default:null},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:null},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},minRange:{type:[Number,String],default:null},maxRange:{type:[Number,String],default:null},multiDatesLimit:{type:[Number,String],default:null},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},disableTimeRangeValidation:{type:Boolean,default:!1},highlight:{type:[Array,Function,Object],default:null},highlightWeekDays:{type:Array,default:null},highlightDisabledDays:{type:Boolean,default:!1},teleport:{type:[String,Boolean,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function,Object],default:null},calendarClassName:{type:String,default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:Boolean,default:!1},partialRange:{type:Boolean,default:!0},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},inputClassName:{type:String,default:null},fixedStart:{type:Boolean,default:!1},fixedEnd:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:Boolean,default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},noDisabledRange:{type:Boolean,default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},showLastInRange:{type:Boolean,default:!0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1}},es={...Xg,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},cse={key:1,class:"dp__input_wrap"},dse=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid"],hse={key:2,class:"dp__clear_icon"},fse=Ee({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...Xg},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur"],setup(t,{expose:e,emit:n}){const r=n,i=t,{defaultedTextInput:s,defaultedAriaLabels:o,defaultedInline:a,defaultedConfig:l,getDefaultPattern:u,getDefaultStartTime:c}=Ln(i),{checkMinMaxRange:d}=_l(i),h=re(),f=re(null),p=re(!1),m=re(!1),v=Z(()=>({dp__pointer:!i.disabled&&!i.readonly&&!s.value.enabled,dp__disabled:i.disabled,dp__input_readonly:!s.value.enabled,dp__input:!0,dp__input_icon_pad:!i.hideInputIcon,dp__input_valid:!!i.state,dp__input_invalid:i.state===!1,dp__input_focus:p.value||i.isMenuOpen,dp__input_reg:!s.value.enabled,[i.inputClassName]:!!i.inputClassName})),b=()=>{r("set-input-date",null),i.autoApply&&(r("set-empty-date"),h.value=null)},g=D=>{const O=c();return Uie(D,s.value.format??u(),O??M2({},i.enableSeconds),i.inputValue,m.value)},_=D=>{const{rangeSeparator:O}=s.value,[R,B]=D.split(`${O}`);if(R){const Y=g(R.trim()),$=B?g(B.trim()):null,S=Y&&$?[Y,$]:[Y];d($,S,0)&&(h.value=Y?S:null)}},y=()=>{m.value=!0},w=D=>{if(i.range)_(D);else if(i.multiDates){const O=D.split(";");h.value=O.map(R=>g(R.trim())).filter(R=>R)}else h.value=g(D)},T=D=>{var O;const R=typeof D=="string"?D:(O=D.target)==null?void 0:O.value;R!==""?(s.value.openMenu&&!i.isMenuOpen&&r("open"),w(R),r("set-input-date",h.value)):b(),m.value=!1,r("update:input-value",R)},P=D=>{s.value.enabled?(w(D.target.value),s.value.enterSubmit&&Mw(h.value)&&i.inputValue!==""?(r("set-input-date",h.value,!0),h.value=null):s.value.enterSubmit&&i.inputValue===""&&(h.value=null,r("clear"))):E(D)},A=D=>{s.value.enabled&&s.value.tabSubmit&&w(D.target.value),s.value.tabSubmit&&Mw(h.value)&&i.inputValue!==""?(r("set-input-date",h.value,!0,!0),h.value=null):s.value.tabSubmit&&i.inputValue===""&&(h.value=null,r("clear",!0))},I=()=>{var D;p.value=!0,r("focus"),s.value.enabled&&s.value.selectOnFocus&&((D=f.value)==null||D.select())},E=D=>{D.preventDefault(),Lo(D,l.value,!0),s.value.enabled&&s.value.openMenu&&!a.value.input&&!i.isMenuOpen?r("open"):s.value.enabled||r("toggle")},U=()=>{r("real-blur"),p.value=!1,(!i.isMenuOpen||a.value.enabled&&a.value.input)&&r("blur"),i.autoApply&&s.value.enabled&&h.value&&!i.isMenuOpen&&(r("set-input-date",h.value),r("select-date"),h.value=null)},F=D=>{Lo(D,l.value,!0),r("clear")},N=D=>{if(!s.value.enabled){if(D.code==="Tab")return;D.preventDefault()}};return e({focusInput:()=>{var D;(D=f.value)==null||D.focus({preventScroll:!0})},setParsedDate:D=>{h.value=D}}),(D,O)=>{var R;return x(),z("div",{onClick:E},[D.$slots.trigger&&!D.$slots["dp-input"]&&!k(a).enabled?xe(D.$slots,"trigger",{key:0}):ne("",!0),!D.$slots.trigger&&(!k(a).enabled||k(a).input)?(x(),z("div",cse,[D.$slots["dp-input"]&&!D.$slots.trigger&&!k(a).enabled?xe(D.$slots,"dp-input",{key:0,value:t.inputValue,isMenuOpen:t.isMenuOpen,onInput:T,onEnter:P,onTab:A,onClear:F,onBlur:U,onKeypress:N,onPaste:y,openMenu:()=>D.$emit("open"),closeMenu:()=>D.$emit("close"),toggleMenu:()=>D.$emit("toggle")}):ne("",!0),D.$slots["dp-input"]?ne("",!0):(x(),z("input",{key:1,id:D.uid?`dp-input-${D.uid}`:void 0,ref_key:"inputRef",ref:f,name:D.name,class:Me(v.value),inputmode:k(s).enabled?"text":"none",placeholder:D.placeholder,disabled:D.disabled,readonly:D.readonly,required:D.required,value:t.inputValue,autocomplete:D.autocomplete,"aria-label":(R=k(o))==null?void 0:R.input,"aria-disabled":D.disabled||void 0,"aria-invalid":D.state===!1?!0:void 0,onInput:T,onKeydown:[at(P,["enter"]),at(A,["tab"]),N],onBlur:U,onFocus:I,onKeypress:N,onPaste:y},null,42,dse)),J("div",{onClick:O[2]||(O[2]=B=>r("toggle"))},[D.$slots["input-icon"]&&!D.hideInputIcon?(x(),z("span",{key:0,class:"dp__input_icon",onClick:O[0]||(O[0]=B=>r("toggle"))},[xe(D.$slots,"input-icon")])):ne("",!0),!D.$slots["input-icon"]&&!D.hideInputIcon&&!D.$slots["dp-input"]?(x(),ce(k(uc),{key:1,class:"dp__input_icon dp__input_icons",onClick:O[1]||(O[1]=B=>r("toggle"))})):ne("",!0)]),D.$slots["clear-icon"]&&t.inputValue&&D.clearable&&!D.disabled&&!D.readonly?(x(),z("span",hse,[xe(D.$slots,"clear-icon",{clear:F})])):ne("",!0),D.clearable&&!D.$slots["clear-icon"]&&t.inputValue&&!D.disabled&&!D.readonly?(x(),ce(k(C2),{key:3,class:"dp__clear_icon dp__input_icons",onClick:O[3]||(O[3]=Mt(B=>F(B),["prevent"]))})):ne("",!0)])):ne("",!0)])}}}),pse=["title"],mse={class:"dp__action_buttons"},gse=["disabled"],vse=Ee({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...es},emits:["close-picker","select-date","select-now","invalid-select"],setup(t,{emit:e}){const n=e,r=t,{defaultedActionRow:i,defaultedPreviewFormat:s,defaultedMultiCalendars:o,defaultedTextInput:a,defaultedInline:l,getDefaultPattern:u}=Ln(r),{isValidTime:c}=_l(r),{buildMatrix:d}=ta(),h=re(null),f=re(null);zt(()=>{r.arrowNavigation&&d([Kn(h),Kn(f)],"actionRow")});const p=Z(()=>r.range&&!r.partialRange&&r.internalModelValue?r.internalModelValue.length===2:!0),m=Z(()=>!v.value||!b.value||!p.value),v=Z(()=>!r.enableTimePicker||r.ignoreTimeValidation?!0:c(r.internalModelValue)),b=Z(()=>r.monthPicker?r.range&&Array.isArray(r.internalModelValue)?!r.internalModelValue.filter(E=>!A(E)).length:A(r.internalModelValue):!0),g=()=>{const E=s.value;return r.timePicker||r.monthPicker,E(Zn(r.internalModelValue))},_=()=>{const E=r.internalModelValue;return o.value.count>0?`${y(E[0])} - ${y(E[1])}`:[y(E[0]),y(E[1])]},y=E=>L2(E,s.value,r.formatLocale,a.value.rangeSeparator,r.modelAuto,u()),w=Z(()=>!r.internalModelValue||!r.menuMount?"":typeof s.value=="string"?Array.isArray(r.internalModelValue)?r.internalModelValue.length===2&&r.internalModelValue[1]?_():r.multiDates?r.internalModelValue.map(E=>`${y(E)}`):r.modelAuto?`${y(r.internalModelValue[0])}`:`${y(r.internalModelValue[0])} -`:y(r.internalModelValue):g()),T=()=>r.multiDates?"; ":" - ",P=Z(()=>Array.isArray(w.value)?w.value.join(T()):w.value),A=E=>{if(!r.monthPicker)return!0;let U=!0;const F=we(Bi(E));if(r.minDate&&r.maxDate){const N=we(Bi(r.minDate)),D=we(Bi(r.maxDate));return kr(F,N)&&mr(F,D)||Vt(F,N)||Vt(F,D)}if(r.minDate){const N=we(Bi(r.minDate));U=kr(F,N)||Vt(F,N)}if(r.maxDate){const N=we(Bi(r.maxDate));U=mr(F,N)||Vt(F,N)}return U},I=()=>{v.value&&b.value&&p.value?n("select-date"):n("invalid-select")};return(E,U)=>(x(),z("div",{class:"dp__action_row",style:Gn(t.calendarWidth?{width:`${t.calendarWidth}px`}:{})},[E.$slots["action-row"]?xe(E.$slots,"action-row",xn(Xt({key:0},{internalModelValue:E.internalModelValue,disabled:m.value,selectDate:()=>E.$emit("select-date"),closePicker:()=>E.$emit("close-picker")}))):(x(),z(Ae,{key:1},[k(i).showPreview?(x(),z("div",{key:0,class:"dp__selection_preview",title:P.value},[E.$slots["action-preview"]?xe(E.$slots,"action-preview",{key:0,value:E.internalModelValue}):ne("",!0),E.$slots["action-preview"]?ne("",!0):(x(),z(Ae,{key:1},[Qe(Je(P.value),1)],64))],8,pse)):ne("",!0),J("div",mse,[E.$slots["action-buttons"]?xe(E.$slots,"action-buttons",{key:0,value:E.internalModelValue}):ne("",!0),E.$slots["action-buttons"]?ne("",!0):(x(),z(Ae,{key:1},[!k(l).enabled&&k(i).showCancel?(x(),z("button",{key:0,ref_key:"cancelButtonRef",ref:h,type:"button",class:"dp__action_button dp__action_cancel",onClick:U[0]||(U[0]=F=>E.$emit("close-picker")),onKeydown:[U[1]||(U[1]=at(F=>E.$emit("close-picker"),["enter"])),U[2]||(U[2]=at(F=>E.$emit("close-picker"),["space"]))]},Je(E.cancelText),545)):ne("",!0),k(i).showNow?(x(),z("button",{key:1,ref_key:"cancelButtonRef",ref:h,type:"button",class:"dp__action_button dp__action_cancel",onClick:U[3]||(U[3]=F=>E.$emit("select-now")),onKeydown:[U[4]||(U[4]=at(F=>E.$emit("select-now"),["enter"])),U[5]||(U[5]=at(F=>E.$emit("select-now"),["space"]))]},Je(E.nowButtonLabel),545)):ne("",!0),k(i).showSelect?(x(),z("button",{key:2,ref_key:"selectButtonRef",ref:f,type:"button",class:"dp__action_button dp__action_select",disabled:m.value,onKeydown:[at(I,["enter"]),at(I,["space"])],onClick:I},Je(E.selectText),41,gse)):ne("",!0)],64))])],64))],4))}}),yse=["onKeydown"],wse={class:"dp__selection_grid_header"},bse=["aria-selected","aria-disabled","onClick","onKeydown","onMouseover"],_se=["aria-label"],Yh=Ee({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean},focusValue:{}},emits:["selected","toggle","reset-flow","hover-value"],setup(t,{expose:e,emit:n}){const{setSelectionGrid:r,buildMultiLevelMatrix:i,setMonthPicker:s}=ta(),o=n,a=t,{defaultedAriaLabels:l,defaultedTextInput:u,defaultedConfig:c}=Ln(a),{hideNavigationButtons:d}=qg(),h=re(!1),f=re(null),p=re(null),m=re([]),v=re(),b=re(null),g=re(0),_=re(null);ob(()=>{f.value=null}),zt(()=>{Wn().then(()=>U()),a.noOverlayFocus||w(),y(!0)}),Ko(()=>y(!1));const y=$=>{var S;a.arrowNavigation&&((S=a.headerRefs)!=null&&S.length?s($):r($))},w=()=>{var $;const S=Kn(p);S&&(u.value.enabled||(f.value?($=f.value)==null||$.focus({preventScroll:!0}):S.focus({preventScroll:!0})),h.value=S.clientHeight<S.scrollHeight)},T=Z(()=>({dp__overlay:!0,"dp--overlay-absolute":!a.useRelative,"dp--overlay-relative":a.useRelative})),P=Z(()=>a.useRelative?{height:`${a.height}px`,width:"260px"}:void 0),A=Z(()=>({dp__overlay_col:!0})),I=Z(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:h.value,dp__button_bottom:a.isLast})),E=Z(()=>{var $,S;return{dp__overlay_container:!0,dp__container_flex:(($=a.items)==null?void 0:$.length)<=6,dp__container_block:((S=a.items)==null?void 0:S.length)>6}});St(()=>a.items,()=>U(),{deep:!0});const U=()=>{Wn().then(()=>{const $=Kn(f),S=Kn(p),X=Kn(b),Q=Kn(_),pe=X?X.getBoundingClientRect().height:0;S&&(S.getBoundingClientRect().height?g.value=S.getBoundingClientRect().height-pe:g.value=c.value.modeHeight-pe),$&&Q&&(Q.scrollTop=$.offsetTop-Q.offsetTop-(g.value/2-$.getBoundingClientRect().height)-pe)})},F=$=>{$.disabled||o("selected",$.value)},N=()=>{o("toggle"),o("reset-flow")},D=()=>{a.escClose&&N()},O=($,S,X,Q)=>{$&&((S.active||S.value===a.focusValue)&&(f.value=$),a.arrowNavigation&&(Array.isArray(m.value[X])?m.value[X][Q]=$:m.value[X]=[$],R()))},R=()=>{var $,S;const X=($=a.headerRefs)!=null&&$.length?[a.headerRefs].concat(m.value):m.value.concat([a.skipButtonRef?[]:[b.value]]);i(Zn(X),(S=a.headerRefs)!=null&&S.length?"monthPicker":"selectionGrid")},B=$=>{a.arrowNavigation||Lo($,c.value,!0)},Y=$=>{v.value=$,o("hover-value",$)};return e({focusGrid:w}),($,S)=>{var X;return x(),z("div",{ref_key:"gridWrapRef",ref:p,class:Me(T.value),style:Gn(P.value),role:"dialog",tabindex:"0",onKeydown:[at(Mt(D,["prevent"]),["esc"]),S[0]||(S[0]=at(Mt(Q=>B(Q),["prevent"]),["left"])),S[1]||(S[1]=at(Mt(Q=>B(Q),["prevent"]),["up"])),S[2]||(S[2]=at(Mt(Q=>B(Q),["prevent"]),["down"])),S[3]||(S[3]=at(Mt(Q=>B(Q),["prevent"]),["right"]))]},[J("div",{ref_key:"containerRef",ref:_,class:Me(E.value),role:"grid",style:Gn({height:`${g.value}px`})},[J("div",wse,[xe($.$slots,"header")]),$.$slots.overlay?xe($.$slots,"overlay",{key:0}):(x(!0),z(Ae,{key:1},dt($.items,(Q,pe)=>(x(),z("div",{key:pe,class:Me(["dp__overlay_row",{dp__flex_row:$.items.length>=3}]),role:"row"},[(x(!0),z(Ae,null,dt(Q,(me,te)=>(x(),z("div",{key:me.value,ref_for:!0,ref:V=>O(V,me,pe,te),role:"gridcell",class:Me(A.value),"aria-selected":me.active,"aria-disabled":me.disabled||void 0,tabindex:"0",onClick:V=>F(me),onKeydown:[at(Mt(V=>F(me),["prevent"]),["enter"]),at(Mt(V=>F(me),["prevent"]),["space"])],onMouseover:V=>Y(me.value)},[J("div",{class:Me(me.className)},[$.$slots.item?xe($.$slots,"item",{key:0,item:me}):ne("",!0),$.$slots.item?ne("",!0):(x(),z(Ae,{key:1},[Qe(Je(me.text),1)],64))],2)],42,bse))),128))],2))),128))],6),$.$slots["button-icon"]?ps((x(),z("button",{key:0,ref_key:"toggleButton",ref:b,type:"button","aria-label":(X=k(l))==null?void 0:X.toggleOverlay,class:Me(I.value),tabindex:"0",onClick:N,onKeydown:[at(N,["enter"]),at(N,["tab"])]},[xe($.$slots,"button-icon")],42,_se)),[[Vs,!k(d)($.hideNavigation,$.type)]]):ne("",!0)],46,yse)}}}),Qg=Ee({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean}},setup(t){const e=t,n=Z(()=>e.multiCalendars>0?[...Array(e.multiCalendars).keys()]:[0]),r=Z(()=>({dp__instance_calendar:e.multiCalendars>0}));return(i,s)=>(x(),z("div",{class:Me({dp__menu_inner:!i.stretch,"dp--menu--inner-stretched":i.stretch,dp__flex_display:i.multiCalendars>0})},[(x(!0),z(Ae,null,dt(n.value,(o,a)=>(x(),z("div",{key:o,class:Me(r.value)},[xe(i.$slots,"default",{instance:o,index:a})],2))),128))],2))}}),Tse=["aria-label","aria-disabled"],wd=Ee({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(t,{emit:e}){const n=e,r=re(null);return zt(()=>n("set-ref",r)),(i,s)=>(x(),z("button",{ref_key:"elRef",ref:r,type:"button",class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":i.ariaLabel,"aria-disabled":i.disabled||void 0,onClick:s[0]||(s[0]=o=>i.$emit("activate")),onKeydown:[s[1]||(s[1]=at(Mt(o=>i.$emit("activate"),["prevent"]),["enter"])),s[2]||(s[2]=at(Mt(o=>i.$emit("activate"),["prevent"]),["space"]))]},[J("span",{class:Me(["dp__inner_nav",{dp__inner_nav_disabled:i.disabled}])},[xe(i.$slots,"default")],2)],40,Tse))}}),Ese={class:"dp--year-mode-picker"},Sse=["aria-label"],V2=Ee({__name:"YearModePicker",props:{...es,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(t,{emit:e}){const n=e,r=t,{showRightIcon:i,showLeftIcon:s}=qg(),{defaultedConfig:o,defaultedMultiCalendars:a,defaultedAriaLabels:l,defaultedTransitions:u}=Ln(r),{showTransition:c,transitionName:d}=Hh(u),h=(m=!1,v)=>{n("toggle-year-picker",{flow:m,show:v})},f=m=>{n("year-select",m)},p=(m=!1)=>{n("handle-year",m)};return(m,v)=>{var b,g,_;return x(),z("div",Ese,[k(s)(k(a),t.instance)?(x(),ce(wd,{key:0,ref:"mpPrevIconRef","aria-label":(b=k(l))==null?void 0:b.prevYear,disabled:t.isDisabled(!1),onActivate:v[0]||(v[0]=y=>p(!1))},{default:fe(()=>[m.$slots["arrow-left"]?xe(m.$slots,"arrow-left",{key:0}):ne("",!0),m.$slots["arrow-left"]?ne("",!0):(x(),ce(k(U1),{key:1}))]),_:3},8,["aria-label","disabled"])):ne("",!0),J("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":(g=k(l))==null?void 0:g.openYearsOverlay,onClick:v[1]||(v[1]=()=>h(!1)),onKeydown:v[2]||(v[2]=at(()=>h(!1),["enter"]))},[m.$slots.year?xe(m.$slots,"year",{key:0,year:t.year}):ne("",!0),m.$slots.year?ne("",!0):(x(),z(Ae,{key:1},[Qe(Je(t.year),1)],64))],40,Sse),k(i)(k(a),t.instance)?(x(),ce(wd,{key:1,ref:"mpNextIconRef","aria-label":(_=k(l))==null?void 0:_.nextYear,disabled:t.isDisabled(!0),onActivate:v[3]||(v[3]=y=>p(!0))},{default:fe(()=>[m.$slots["arrow-right"]?xe(m.$slots,"arrow-right",{key:0}):ne("",!0),m.$slots["arrow-right"]?ne("",!0):(x(),ce(k(F1),{key:1}))]),_:3},8,["aria-label","disabled"])):ne("",!0),ee(Cs,{name:k(d)(t.showYearPicker),css:k(c)},{default:fe(()=>[t.showYearPicker?(x(),ce(Yh,{key:0,items:t.items,"text-input":m.textInput,"esc-close":m.escClose,config:m.config,"is-last":m.autoApply&&!k(o).keepActionRow,"hide-navigation":m.hideNavigation,type:"year",onToggle:h,onSelected:v[4]||(v[4]=y=>f(y))},gr({"button-icon":fe(()=>[m.$slots["calendar-icon"]?xe(m.$slots,"calendar-icon",{key:0}):ne("",!0),m.$slots["calendar-icon"]?ne("",!0):(x(),ce(k(uc),{key:1}))]),_:2},[m.$slots["year-overlay-value"]?{name:"item",fn:fe(({item:y})=>[xe(m.$slots,"year-overlay-value",{text:y.text,value:y.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last","hide-navigation"])):ne("",!0)]),_:3},8,["name","css"])])}}}),G1=(t,e,n)=>{if(e.value&&Array.isArray(e.value))if(e.value.some(r=>Vt(t,r))){const r=e.value.filter(i=>!Vt(i,t));e.value=r.length?r:null}else(n&&+n>e.value.length||!n)&&e.value.push(t);else e.value=[t]},q1=(t,e,n)=>{let r=t.value?t.value.slice():[];return r.length===2&&r[1]!==null&&(r=[]),r.length?mr(e,r[0])?(r.unshift(e),n("range-start",r[0]),n("range-start",r[1])):(r[1]=e,n("range-end",e)):(r=[e],n("range-start",e)),t.value=r,r},Jg=(t,e,n,r)=>{t[0]&&t[1]&&n&&e("auto-apply"),t[0]&&!t[1]&&r&&n&&e("auto-apply")},B2=t=>{Array.isArray(t.value)&&t.value.length<=2&&t.range?t.modelValue.value=t.value.map(e=>Gi(we(e),t.timezone)):Array.isArray(t.value)||(t.modelValue.value=Gi(we(t.value),t.timezone))},j2=({multiCalendars:t,highlight:e,calendars:n,modelValue:r,props:i,year:s,month:o,emit:a})=>{const l=Z(()=>z1(i.yearRange,i.reverseYears)),u=re([!1]),c=Z(()=>(y,w)=>{const T=fn(Bi(new Date),{month:o.value(y),year:s.value(y)});return $2(T,i.maxDate,i.minDate,i.preventMinMaxNavigation,w)}),d=()=>{for(let y=0;y<t.value.count;y++)if(y===0)n.value[y]=n.value[0];else{const w=fn(we(),n.value[y-1]);n.value[y]={month:Rt(w),year:gt(x1(w,1))}}},h=y=>{if(!y)return d();const w=fn(we(),n.value[y]);return n.value[0].year=gt(S2(w,t.value.count-1)),d()},f=y=>i.focusStartDate?y[0]:y[1]?y[1]:y[0],p=()=>{if(r.value){const y=Array.isArray(r.value)?f(r.value):r.value;n.value[0]={month:Rt(y),year:gt(y)}}};zt(()=>{p(),t.value.count&&d()});const m=(y,w)=>{n.value[w].year=y,t.value.count&&!t.value.solo&&h(w)},v=Z(()=>y=>Ku(l.value,w=>{const T=s.value(y)===w.value,P=sh(w.value,Gu(i.minDate),Gu(i.maxDate)),A=K1(e.value,w.value);return{active:T,disabled:P,highlighted:A}})),b=(y,w)=>{m(y,w),_(w)},g=(y,w=!1)=>{if(!c.value(y,w)){const T=w?s.value(y)+1:s.value(y)-1;m(T,y)}},_=(y,w=!1,T)=>{w||a("reset-flow"),T!==void 0?u.value[y]=T:u.value[y]=!u.value[y],u.value||a("overlay-closed")};return{isDisabled:c,groupedYears:v,showYearPicker:u,selectYear:m,toggleYearPicker:_,handleYearSelect:b,handleYear:g}},Cse=(t,e)=>{const{defaultedMultiCalendars:n,defaultedAriaLabels:r,defaultedTransitions:i,defaultedConfig:s,defaultedHighlight:o}=Ln(t),{modelValue:a,year:l,month:u,calendars:c}=Wh(t,e),d=Z(()=>D2(t.formatLocale,t.locale,t.monthNameFormat)),h=re(null),{selectYear:f,groupedYears:p,showYearPicker:m,toggleYearPicker:v,handleYearSelect:b,handleYear:g,isDisabled:_}=j2({modelValue:a,multiCalendars:n,highlight:o,calendars:c,year:l,month:u,props:t,emit:e});zt(()=>{t.startDate&&(a.value&&t.focusStartDate||!a.value)&&f(gt(we(t.startDate)),0)});const y=B=>B?{month:Rt(B),year:gt(B)}:{month:null,year:null},w=()=>a.value?Array.isArray(a.value)?a.value.map(B=>y(B)):y(a.value):y(),T=(B,Y)=>{const $=c.value[B],S=w();return Array.isArray(S)?S.some(X=>X.year===($==null?void 0:$.year)&&X.month===Y):($==null?void 0:$.year)===S.year&&Y===S.month},P=(B,Y,$)=>{var S,X;const Q=w();return Array.isArray(Q)?l.value(Y)===((S=Q[$])==null?void 0:S.year)&&B===((X=Q[$])==null?void 0:X.month):!1},A=(B,Y)=>{if(t.range){const $=w();if(Array.isArray(a.value)&&Array.isArray($)){const S=P(B,Y,0)||P(B,Y,1),X=Ls(Bi(we()),B,l.value(Y));return Gg(a.value,h.value,X)&&!S}return!1}return!1},I=Z(()=>B=>Ku(d.value,Y=>{const $=T(B,Y.value),S=sh(Y.value,P2(l.value(B),t.minDate),R2(l.value(B),t.maxDate))||Yie(t.disabledDates,l.value(B)).includes(Y.value),X=A(Y.value,B),Q=U2(o.value,Y.value,l.value(B));return{active:$,disabled:S,isBetween:X,highlighted:Q}})),E=(B,Y)=>Ls(Bi(we()),B,l.value(Y)),U=(B,Y)=>{const $=a.value?a.value:Bi(new Date);a.value=Ls($,B,l.value(Y)),e("auto-apply")},F=(B,Y)=>{const $=q1(a,E(B,Y),e);Jg($,e,t.autoApply,t.modelAuto)},N=(B,Y)=>{G1(E(B,Y),a,t.multiDatesLimit),e("auto-apply",!0)},D=(B,Y)=>(c.value[Y].month=B,R(Y,c.value[Y].year,B),t.multiDates?N(B,Y):t.range?F(B,Y):U(B,Y)),O=(B,Y)=>{f(B,Y),R(Y,B,null)},R=(B,Y,$)=>{let S=$;if(!S&&S!==0){const X=w();S=Array.isArray(X)?X[B].month:X.month}e("update-month-year",{instance:B,year:Y,month:S})};return{groupedMonths:I,groupedYears:p,year:l,isDisabled:_,defaultedMultiCalendars:n,defaultedAriaLabels:r,defaultedTransitions:i,defaultedConfig:s,showYearPicker:m,modelValue:a,presetDate:(B,Y)=>{B2({value:B,modelValue:a,range:t.range,timezone:Y?void 0:t.timezone}),e("auto-apply")},setHoverDate:(B,Y)=>{h.value=E(B,Y)},selectMonth:D,selectYear:O,toggleYearPicker:v,handleYearSelect:b,handleYear:g,getModelMonthYear:w}},Ise=Ee({compatConfig:{MODE:3},__name:"MonthPicker",props:{...es},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year","mount"],setup(t,{expose:e,emit:n}){const r=n,i=Go(),s=fi(i,"yearMode"),o=t;zt(()=>{o.shadow||r("mount",null)});const{groupedMonths:a,groupedYears:l,year:u,isDisabled:c,defaultedMultiCalendars:d,defaultedConfig:h,showYearPicker:f,modelValue:p,presetDate:m,setHoverDate:v,selectMonth:b,selectYear:g,toggleYearPicker:_,handleYearSelect:y,handleYear:w,getModelMonthYear:T}=Cse(o,r);return e({getSidebarProps:()=>({modelValue:p,year:u,getModelMonthYear:T,selectMonth:b,selectYear:g,handleYear:w}),presetDate:m,toggleYearPicker:P=>_(0,P)}),(P,A)=>(x(),ce(Qg,{"multi-calendars":k(d).count,stretch:""},{default:fe(({instance:I})=>[P.$slots["month-year"]?xe(P.$slots,"month-year",xn(Xt({key:0},{year:k(u),months:k(a)(I),years:k(l)(I),selectMonth:k(b),selectYear:k(g),instance:I}))):(x(),ce(Yh,{key:1,items:k(a)(I),"arrow-navigation":P.arrowNavigation,"is-last":P.autoApply&&!k(h).keepActionRow,"esc-close":P.escClose,height:k(h).modeHeight,config:P.config,"no-overlay-focus":!!(P.noOverlayFocus||P.textInput),"use-relative":"",type:"month",onSelected:E=>k(b)(E,I),onHoverValue:E=>k(v)(E,I)},{header:fe(()=>[ee(V2,Xt(P.$props,{items:k(l)(I),instance:I,"show-year-picker":k(f)[I],year:k(u)(I),"is-disabled":E=>k(c)(I,E),onHandleYear:E=>k(w)(I,E),onYearSelect:E=>k(y)(E,I),onToggleYearPicker:E=>k(_)(I,E==null?void 0:E.flow,E==null?void 0:E.show)}),gr({_:2},[dt(k(s),(E,U)=>({name:E,fn:fe(F=>[xe(P.$slots,E,xn(sr(F)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars"]))}}),Ase=(t,e)=>{const{modelValue:n}=Wh(t,e),r=re(null),{defaultedHighlight:i,defaultedFilters:s}=Ln(t),o=re();zt(()=>{t.startDate&&(n.value&&t.focusStartDate||!n.value)&&(o.value=gt(we(t.startDate)))});const a=d=>Array.isArray(n.value)?n.value.some(h=>gt(h)===d):n.value?gt(n.value)===d:!1,l=d=>t.range&&Array.isArray(n.value)?Gg(n.value,r.value,c(d)):!1,u=Z(()=>Ku(z1(t.yearRange,t.reverseYears),d=>{const h=a(d.value),f=sh(d.value,Gu(t.minDate),Gu(t.maxDate))||s.value.years.includes(d.value),p=l(d.value)&&!h,m=K1(i.value,d.value);return{active:h,disabled:f,isBetween:p,highlighted:m}})),c=d=>hs(Bi(new Date),d);return{groupedYears:u,modelValue:n,focusYear:o,setHoverValue:d=>{r.value=hs(Bi(new Date),d)},selectYear:d=>{var h;if(t.multiDates)return n.value?Array.isArray(n.value)&&(((h=n.value)==null?void 0:h.map(f=>gt(f))).includes(d)?n.value=n.value.filter(f=>gt(f)!==d):n.value.push(hs(Or(we()),d))):n.value=[hs(Or(we()),d)],e("auto-apply",!0);if(t.range){const f=q1(n,c(d),e);return Jg(f,e,t.autoApply,t.modelAuto)}n.value=c(d),e("auto-apply")}}},kse=Ee({compatConfig:{MODE:3},__name:"YearPicker",props:{...es},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply"],setup(t,{expose:e,emit:n}){const r=n,i=t,{groupedYears:s,modelValue:o,focusYear:a,selectYear:l,setHoverValue:u}=Ase(i,r),{defaultedConfig:c}=Ln(i);return e({getSidebarProps:()=>({modelValue:o,selectYear:l})}),(d,h)=>(x(),z("div",null,[d.$slots["month-year"]?xe(d.$slots,"month-year",xn(Xt({key:0},{years:k(s),selectYear:k(l)}))):(x(),ce(Yh,{key:1,items:k(s),"is-last":d.autoApply&&!k(c).keepActionRow,height:k(c).modeHeight,config:d.config,"no-overlay-focus":!!(d.noOverlayFocus||d.textInput),"focus-value":k(a),type:"year","use-relative":"",onSelected:k(l),onHoverValue:k(u)},gr({_:2},[d.$slots["year-overlay-value"]?{name:"item",fn:fe(({item:f})=>[xe(d.$slots,"year-overlay-value",{text:f.text,value:f.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","focus-value","onSelected","onHoverValue"]))]))}}),Dse={key:0,class:"dp__time_input"},xse=["aria-label","onKeydown","onClick"],Pse=J("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),Rse=J("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),Ose=["aria-label","disabled","onKeydown","onClick"],Nse=["aria-label","onKeydown","onClick"],Mse=J("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),$se=J("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),Lse={key:0},Use=["aria-label","onKeydown"],Fse=Ee({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...es},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:n}){const r=n,i=t,{setTimePickerElements:s,setTimePickerBackRef:o}=ta(),{defaultedAriaLabels:a,defaultedTransitions:l,defaultedFilters:u,defaultedConfig:c}=Ln(i),{transitionName:d,showTransition:h}=Hh(l),f=On({hours:!1,minutes:!1,seconds:!1}),p=re("AM"),m=re(null),v=re([]);zt(()=>{r("mounted")});const b=V=>fn(new Date,{hours:V.hours,minutes:V.minutes,seconds:i.enableSeconds?V.seconds:0,milliseconds:0}),g=Z(()=>V=>D(V,i[V])||y(V,i[V])),_=Z(()=>({hours:i.hours,minutes:i.minutes,seconds:i.seconds})),y=(V,W)=>i.range&&!i.disableTimeRangeValidation?!i.validateTime(V,W):!1,w=(V,W)=>{if(i.range&&!i.disableTimeRangeValidation){const se=W?+i[`${V}Increment`]:-+i[`${V}Increment`],G=i[V]+se;return!i.validateTime(V,G)}return!1},T=Z(()=>V=>!R(+i[V]+ +i[`${V}Increment`],V)||w(V,!0)),P=Z(()=>V=>!R(+i[V]-+i[`${V}Increment`],V)||w(V,!1)),A=(V,W)=>r2(fn(we(),V),W),I=(V,W)=>nie(fn(we(),V),W),E=Z(()=>({dp__time_col:!0,dp__time_col_block:!i.timePickerInline,dp__time_col_reg_block:!i.enableSeconds&&i.is24&&!i.timePickerInline,dp__time_col_reg_inline:!i.enableSeconds&&i.is24&&i.timePickerInline,dp__time_col_reg_with_button:!i.enableSeconds&&!i.is24,dp__time_col_sec:i.enableSeconds&&i.is24,dp__time_col_sec_with_button:i.enableSeconds&&!i.is24})),U=Z(()=>{const V=[{type:"hours"},{type:"",separator:!0},{type:"minutes"}];return i.enableSeconds?V.concat([{type:"",separator:!0},{type:"seconds"}]):V}),F=Z(()=>U.value.filter(V=>!V.separator)),N=Z(()=>V=>{if(V==="hours"){const W=X(+i.hours);return{text:W<10?`0${W}`:`${W}`,value:W}}return{text:i[V]<10?`0${i[V]}`:`${i[V]}`,value:i[V]}}),D=(V,W)=>{var se;if(!i.disabledTimesConfig)return!1;const G=i.disabledTimesConfig(i.order,V==="hours"?W:void 0);return G[V]?!!((se=G[V])!=null&&se.includes(W)):!0},O=V=>{const W=i.is24?24:12,se=V==="hours"?W:60,G=+i[`${V}GridIncrement`],ue=V==="hours"&&!i.is24?G:0,ve=[];for(let ie=ue;ie<se;ie+=G)ve.push({value:ie,text:ie<10?`0${ie}`:`${ie}`});return V==="hours"&&!i.is24&&ve.push({value:0,text:"12"}),Ku(ve,ie=>({active:!1,disabled:u.value.times[V].includes(ie.value)||!R(ie.value,V)||D(V,ie.value)||y(V,ie.value)}))},R=(V,W)=>{const se=i.minTime?b(Ty(i.minTime)):null,G=i.maxTime?b(Ty(i.maxTime)):null,ue=b(Ty(_.value,W,V));return se&&G?(ih(ue,G)||eu(ue,G))&&(rh(ue,se)||eu(ue,se)):se?rh(ue,se)||eu(ue,se):G?ih(ue,G)||eu(ue,G):!0},B=V=>i[`no${V[0].toUpperCase()+V.slice(1)}Overlay`],Y=V=>{B(V)||(f[V]=!f[V],f[V]||r("overlay-closed"))},$=V=>V==="hours"?Ki:V==="minutes"?ws:Yu,S=(V,W=!0)=>{const se=W?A:I,G=W?+i[`${V}Increment`]:-+i[`${V}Increment`];R(+i[V]+G,V)&&r(`update:${V}`,$(V)(se({[V]:+i[V]},{[V]:+i[`${V}Increment`]})))},X=V=>i.is24?V:(V>=12?p.value="PM":p.value="AM",Pie(V)),Q=()=>{p.value==="PM"?(p.value="AM",r("update:hours",i.hours-12)):(p.value="PM",r("update:hours",i.hours+12)),r("am-pm-change",p.value)},pe=V=>{f[V]=!0},me=(V,W,se)=>{if(V&&i.arrowNavigation){Array.isArray(v.value[W])?v.value[W][se]=V:v.value[W]=[V];const G=v.value.reduce((ue,ve)=>ve.map((ie,C)=>[...ue[C]||[],ve[C]]),[]);o(i.closeTimePickerBtn),m.value&&(G[1]=G[1].concat(m.value)),s(G,i.order)}},te=(V,W)=>(Y(V),V==="hours"&&!i.is24?r(`update:${V}`,p.value==="PM"?W+12:W):r(`update:${V}`,W));return e({openChildCmp:pe}),(V,W)=>{var se;return V.disabled?ne("",!0):(x(),z("div",Dse,[(x(!0),z(Ae,null,dt(U.value,(G,ue)=>{var ve,ie,C;return x(),z("div",{key:ue,class:Me(E.value)},[G.separator?(x(),z(Ae,{key:0},[Qe(" : ")],64)):(x(),z(Ae,{key:1},[J("button",{ref_for:!0,ref:M=>me(M,ue,0),type:"button",class:Me({dp__btn:!0,dp__inc_dec_button:!V.timePickerInline,dp__inc_dec_button_inline:V.timePickerInline,dp__tp_inline_btn_top:V.timePickerInline,dp__inc_dec_button_disabled:T.value(G.type)}),"aria-label":(ve=k(a))==null?void 0:ve.incrementValue(G.type),tabindex:"0",onKeydown:[at(Mt(M=>S(G.type),["prevent"]),["enter"]),at(Mt(M=>S(G.type),["prevent"]),["space"])],onClick:M=>S(G.type)},[i.timePickerInline?(x(),z(Ae,{key:1},[Pse,Rse],64)):(x(),z(Ae,{key:0},[V.$slots["arrow-up"]?xe(V.$slots,"arrow-up",{key:0}):ne("",!0),V.$slots["arrow-up"]?ne("",!0):(x(),ce(k(B1),{key:1}))],64))],42,xse),J("button",{ref_for:!0,ref:M=>me(M,ue,1),type:"button","aria-label":(ie=k(a))==null?void 0:ie.openTpOverlay(G.type),class:Me({dp__time_display:!0,dp__time_display_block:!V.timePickerInline,dp__time_display_inline:V.timePickerInline,"dp--time-invalid":g.value(G.type),"dp--time-overlay-btn":!g.value(G.type)}),disabled:B(G.type),tabindex:"0",onKeydown:[at(Mt(M=>Y(G.type),["prevent"]),["enter"]),at(Mt(M=>Y(G.type),["prevent"]),["space"])],onClick:M=>Y(G.type)},[V.$slots[G.type]?xe(V.$slots,G.type,{key:0,text:N.value(G.type).text,value:N.value(G.type).value}):ne("",!0),V.$slots[G.type]?ne("",!0):(x(),z(Ae,{key:1},[Qe(Je(N.value(G.type).text),1)],64))],42,Ose),J("button",{ref_for:!0,ref:M=>me(M,ue,2),type:"button",class:Me({dp__btn:!0,dp__inc_dec_button:!V.timePickerInline,dp__inc_dec_button_inline:V.timePickerInline,dp__tp_inline_btn_bottom:V.timePickerInline,dp__inc_dec_button_disabled:P.value(G.type)}),"aria-label":(C=k(a))==null?void 0:C.decrementValue(G.type),tabindex:"0",onKeydown:[at(Mt(M=>S(G.type,!1),["prevent"]),["enter"]),at(Mt(M=>S(G.type,!1),["prevent"]),["space"])],onClick:M=>S(G.type,!1)},[i.timePickerInline?(x(),z(Ae,{key:1},[Mse,$se],64)):(x(),z(Ae,{key:0},[V.$slots["arrow-down"]?xe(V.$slots,"arrow-down",{key:0}):ne("",!0),V.$slots["arrow-down"]?ne("",!0):(x(),ce(k(j1),{key:1}))],64))],42,Nse)],64))],2)}),128)),V.is24?ne("",!0):(x(),z("div",Lse,[V.$slots["am-pm-button"]?xe(V.$slots,"am-pm-button",{key:0,toggle:Q,value:p.value}):ne("",!0),V.$slots["am-pm-button"]?ne("",!0):(x(),z("button",{key:1,ref_key:"amPmButton",ref:m,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(se=k(a))==null?void 0:se.amPmButton,tabindex:"0",onClick:Q,onKeydown:[at(Mt(Q,["prevent"]),["enter"]),at(Mt(Q,["prevent"]),["space"])]},Je(p.value),41,Use))])),(x(!0),z(Ae,null,dt(F.value,(G,ue)=>(x(),ce(Cs,{key:ue,name:k(d)(f[G.type]),css:k(h)},{default:fe(()=>[f[G.type]?(x(),ce(Yh,{key:0,items:O(G.type),"is-last":V.autoApply&&!k(c).keepActionRow,"esc-close":V.escClose,type:G.type,"text-input":V.textInput,config:V.config,"arrow-navigation":V.arrowNavigation,onSelected:ve=>te(G.type,ve),onToggle:ve=>Y(G.type),onResetFlow:W[0]||(W[0]=ve=>V.$emit("reset-flow"))},gr({"button-icon":fe(()=>[V.$slots["clock-icon"]?xe(V.$slots,"clock-icon",{key:0}):ne("",!0),V.$slots["clock-icon"]?ne("",!0):(x(),ce(uh(V.timePickerInline?k(uc):k(V1)),{key:1}))]),_:2},[V.$slots[`${G.type}-overlay-value`]?{name:"item",fn:fe(({item:ve})=>[xe(V.$slots,`${G.type}-overlay-value`,{text:ve.text,value:ve.value})]),key:"0"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","onSelected","onToggle"])):ne("",!0)]),_:2},1032,["name","css"]))),128))]))}}}),Vse={class:"dp--tp-wrap"},Bse=["aria-label","tabindex"],jse=["tabindex"],Hse=["aria-label"],H2=Ee({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...es},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:n}){const r=n,i=t,{buildMatrix:s,setTimePicker:o}=ta(),a=Go(),{defaultedTransitions:l,defaultedAriaLabels:u,defaultedTextInput:c,defaultedConfig:d}=Ln(i),{transitionName:h,showTransition:f}=Hh(l),{hideNavigationButtons:p}=qg(),m=re(null),v=re(null),b=re([]),g=re(null);zt(()=>{r("mount"),!i.timePicker&&i.arrowNavigation?s([Kn(m.value)],"time"):o(!0,i.timePicker)});const _=Z(()=>i.range&&i.modelAuto?x2(i.internalModelValue):!0),y=re(!1),w=O=>({hours:Array.isArray(i.hours)?i.hours[O]:i.hours,minutes:Array.isArray(i.minutes)?i.minutes[O]:i.minutes,seconds:Array.isArray(i.seconds)?i.seconds[O]:i.seconds}),T=Z(()=>{const O=[];if(i.range)for(let R=0;R<2;R++)O.push(w(R));else O.push(w(0));return O}),P=(O,R=!1,B="")=>{R||r("reset-flow"),y.value=O,r(O?"overlay-opened":"overlay-closed"),i.arrowNavigation&&o(O),Wn(()=>{B!==""&&b.value[0]&&b.value[0].openChildCmp(B)})},A=Z(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:i.autoApply&&!d.value.keepActionRow})),I=fi(a,"timePicker"),E=(O,R,B)=>i.range?R===0?[O,T.value[1][B]]:[T.value[0][B],O]:O,U=O=>{r("update:hours",O)},F=O=>{r("update:minutes",O)},N=O=>{r("update:seconds",O)},D=()=>{if(g.value&&!c.value.enabled&&!i.noOverlayFocus){const O=Oie(g.value);O&&O.focus({preventScroll:!0})}};return e({toggleTimePicker:P}),(O,R)=>{var B;return x(),z("div",Vse,[!O.timePicker&&!O.timePickerInline?ps((x(),z("button",{key:0,ref_key:"openTimePickerBtn",ref:m,type:"button",class:Me(A.value),"aria-label":(B=k(u))==null?void 0:B.openTimePicker,tabindex:O.noOverlayFocus?void 0:0,onKeydown:[R[0]||(R[0]=at(Y=>P(!0),["enter"])),R[1]||(R[1]=at(Y=>P(!0),["space"]))],onClick:R[2]||(R[2]=Y=>P(!0))},[O.$slots["clock-icon"]?xe(O.$slots,"clock-icon",{key:0}):ne("",!0),O.$slots["clock-icon"]?ne("",!0):(x(),ce(k(V1),{key:1}))],42,Bse)),[[Vs,!k(p)(O.hideNavigation,"time")]]):ne("",!0),ee(Cs,{name:k(h)(y.value),css:k(f)&&!O.timePickerInline},{default:fe(()=>{var Y;return[y.value||O.timePicker||O.timePickerInline?(x(),z("div",{key:0,ref_key:"overlayRef",ref:g,class:Me({dp__overlay:!O.timePickerInline,"dp--overlay-absolute":!i.timePicker&&!O.timePickerInline,"dp--overlay-relative":i.timePicker}),style:Gn(O.timePicker?{height:`${k(d).modeHeight}px`}:void 0),tabindex:O.timePickerInline?void 0:0},[J("div",{class:Me(O.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[O.$slots["time-picker-overlay"]?xe(O.$slots,"time-picker-overlay",{key:0,hours:t.hours,minutes:t.minutes,seconds:t.seconds,setHours:U,setMinutes:F,setSeconds:N}):ne("",!0),O.$slots["time-picker-overlay"]?ne("",!0):(x(),z("div",{key:1,class:Me(O.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(x(!0),z(Ae,null,dt(T.value,($,S)=>ps((x(),ce(Fse,Xt({key:S},{...O.$props,order:S,hours:$.hours,minutes:$.minutes,seconds:$.seconds,closeTimePickerBtn:v.value,disabledTimesConfig:t.disabledTimesConfig,disabled:S===0?O.fixedStart:O.fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:b,"validate-time":(X,Q)=>t.validateTime(X,E(Q,S,X)),"onUpdate:hours":X=>U(E(X,S,"hours")),"onUpdate:minutes":X=>F(E(X,S,"minutes")),"onUpdate:seconds":X=>N(E(X,S,"seconds")),onMounted:D,onOverlayClosed:D,onAmPmChange:R[3]||(R[3]=X=>O.$emit("am-pm-change",X))}),gr({_:2},[dt(k(I),(X,Q)=>({name:X,fn:fe(pe=>[xe(O.$slots,X,xn(sr(pe)))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[Vs,S===0?!0:_.value]])),128))],2)),!O.timePicker&&!O.timePickerInline?ps((x(),z("button",{key:2,ref_key:"closeTimePickerBtn",ref:v,type:"button",class:Me(A.value),"aria-label":(Y=k(u))==null?void 0:Y.closeTimePicker,tabindex:"0",onKeydown:[R[4]||(R[4]=at($=>P(!1),["enter"])),R[5]||(R[5]=at($=>P(!1),["space"]))],onClick:R[6]||(R[6]=$=>P(!1))},[O.$slots["calendar-icon"]?xe(O.$slots,"calendar-icon",{key:0}):ne("",!0),O.$slots["calendar-icon"]?ne("",!0):(x(),ce(k(uc),{key:1}))],42,Hse)),[[Vs,!k(p)(O.hideNavigation,"time")]]):ne("",!0)],2)],14,jse)):ne("",!0)]}),_:3},8,["name","css"])])}}}),W2=(t,e,n,r)=>{const i=(b,g)=>Array.isArray(e[b])?e[b][g]:e[b],s=b=>t.enableSeconds?Array.isArray(e.seconds)?e.seconds[b]:e.seconds:0,o=(b,g)=>b?g!==void 0?Uo(b,i("hours",g),i("minutes",g),s(g)):Uo(b,e.hours,e.minutes,s()):L1(we(),s(g)),a=(b,g)=>{e[b]=g},l=(b,g)=>{const _=Object.fromEntries(Object.keys(e).map(y=>y===b?[y,g]:[y,e[y]].slice()));if(t.range&&!t.disableTimeRangeValidation){const y=T=>n.value?Uo(n.value[T],_.hours[T],_.minutes[T],_.seconds[T]):null,w=T=>$1(n.value[T],0);return!(Vt(y(0),y(1))&&(rh(y(0),w(1))||ih(y(1),w(0))))}return!0},u=(b,g)=>{l(b,g)&&(a(b,g),r&&r())},c=b=>{u("hours",b)},d=b=>{u("minutes",b)},h=b=>{u("seconds",b)},f=(b,g,_,y)=>{g&&c(b),!g&&!_&&d(b),_&&h(b),n.value&&y(n.value)},p=b=>{if(b){const g=Array.isArray(b),_=g?[+b[0].hours,+b[1].hours]:+b.hours,y=g?[+b[0].minutes,+b[1].minutes]:+b.minutes,w=g?[+b[0].seconds,+b[1].seconds]:+b.seconds;a("hours",_),a("minutes",y),t.enableSeconds&&a("seconds",w)}},m=(b,g)=>{const _={hours:Array.isArray(e.hours)?e.hours[b]:e.hours,disabledArr:[]};return(g||g===0)&&(_.hours=g),Array.isArray(t.disabledTimes)&&(_.disabledArr=t.range&&Array.isArray(t.disabledTimes[b])?t.disabledTimes[b]:t.disabledTimes),_},v=Z(()=>(b,g)=>{var _;if(Array.isArray(t.disabledTimes)){const{disabledArr:y,hours:w}=m(b,g),T=y.filter(P=>+P.hours===w);return((_=T[0])==null?void 0:_.minutes)==="*"?{hours:[w],minutes:void 0,seconds:void 0}:{hours:[],minutes:(T==null?void 0:T.map(P=>+P.minutes))??[],seconds:(T==null?void 0:T.map(P=>P.seconds?+P.seconds:void 0))??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:a,updateHours:c,updateMinutes:d,updateSeconds:h,getSetDateTime:o,updateTimeValues:f,getSecondsValue:s,assignStartTime:p,validateTime:l,disabledTimesConfig:v}},Wse=(t,e)=>{const{modelValue:n,time:r}=Wh(t,e),{defaultedStartTime:i}=Ln(t),{updateTimeValues:s,getSetDateTime:o,setTime:a,assignStartTime:l,disabledTimesConfig:u,validateTime:c}=W2(t,r,n),d=g=>{const{hours:_,minutes:y,seconds:w}=g;return{hours:+_,minutes:+y,seconds:w?+w:0}},h=()=>{if(t.startTime){if(Array.isArray(t.startTime)){const _=d(t.startTime[0]),y=d(t.startTime[1]);return[fn(we(),_),fn(we(),y)]}const g=d(t.startTime);return fn(we(),g)}return t.range?[null,null]:null},f=()=>{if(t.range){const[g,_]=h();n.value=[o(g,0),o(_,1)]}else n.value=o(h())},p=g=>Array.isArray(g)?[Na(we(g[0])),Na(we(g[1]))]:[Na(g??we())],m=(g,_,y)=>{a("hours",g),a("minutes",_),a("seconds",t.enableSeconds?y:0)},v=()=>{const[g,_]=p(n.value);return t.range?m([g.hours,_.hours],[g.minutes,_.minutes],[g.seconds,_.minutes]):m(g.hours,g.minutes,g.seconds)};zt(()=>{if(!t.shadow)return l(i.value),n.value?v():f()});const b=()=>{Array.isArray(n.value)?n.value=n.value.map((g,_)=>g&&o(g,_)):n.value=o(n.value),e("time-update")};return{modelValue:n,time:r,disabledTimesConfig:u,updateTime:(g,_=!0,y=!1)=>{s(g,_,y,b)},validateTime:c}},Yse=Ee({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...es},emits:["update:internal-model-value","time-update","am-pm-change"],setup(t,{expose:e,emit:n}){const r=n,i=t,s=Go(),o=fi(s,"timePicker"),{time:a,modelValue:l,disabledTimesConfig:u,updateTime:c,validateTime:d}=Wse(i,r);return e({getSidebarProps:()=>({modelValue:l,time:a,updateTime:c})}),(h,f)=>(x(),ce(Qg,{"multi-calendars":0,stretch:""},{default:fe(()=>[ee(H2,Xt(h.$props,{hours:k(a).hours,minutes:k(a).minutes,seconds:k(a).seconds,"internal-model-value":h.internalModelValue,"disabled-times-config":k(u),"validate-time":k(d),"onUpdate:hours":f[0]||(f[0]=p=>k(c)(p)),"onUpdate:minutes":f[1]||(f[1]=p=>k(c)(p,!1)),"onUpdate:seconds":f[2]||(f[2]=p=>k(c)(p,!1,!0)),onAmPmChange:f[3]||(f[3]=p=>h.$emit("am-pm-change",p))}),gr({_:2},[dt(k(o),(p,m)=>({name:p,fn:fe(v=>[xe(h.$slots,p,xn(sr(v)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3}))}}),zse={class:"dp__month_year_row"},Kse=["aria-label","onClick","onKeydown"],Gse=Ee({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...es},emits:["update-month-year","mount","reset-flow","overlay-closed"],setup(t,{expose:e,emit:n}){const r=n,i=t,{defaultedTransitions:s,defaultedAriaLabels:o,defaultedMultiCalendars:a,defaultedFilters:l,defaultedConfig:u,defaultedHighlight:c}=Ln(i),{transitionName:d,showTransition:h}=Hh(s),{buildMatrix:f}=ta(),{handleMonthYearChange:p,isDisabled:m,updateMonthYear:v}=ise(i,r),{showLeftIcon:b,showRightIcon:g}=qg(),_=re(!1),y=re(!1),w=re([null,null,null,null]);zt(()=>{r("mount")});const T=S=>({get:()=>i[S],set:X=>{const Q=S===Mi.month?Mi.year:Mi.month;r("update-month-year",{[S]:X,[Q]:i[Q]}),S===Mi.month?D(!0):O(!0)}}),P=Z(T(Mi.month)),A=Z(T(Mi.year)),I=Z(()=>S=>({month:i.month,year:i.year,items:S===Mi.month?i.months:i.years,instance:i.instance,updateMonthYear:v,toggle:S===Mi.month?D:O})),E=Z(()=>i.months.find(X=>X.value===i.month)||{text:"",value:0}),U=Z(()=>Ku(i.months,S=>{const X=i.month===S.value,Q=sh(S.value,P2(i.year,i.minDate),R2(i.year,i.maxDate))||l.value.months.includes(S.value),pe=U2(c.value,S.value,i.year);return{active:X,disabled:Q,highlighted:pe}})),F=Z(()=>Ku(i.years,S=>{const X=i.year===S.value,Q=sh(S.value,Gu(i.minDate),Gu(i.maxDate))||l.value.years.includes(S.value),pe=K1(c.value,S.value);return{active:X,disabled:Q,highlighted:pe}})),N=(S,X)=>{X!==void 0?S.value=X:S.value=!S.value,S.value||r("overlay-closed")},D=(S=!1,X)=>{R(S),N(_,X)},O=(S=!1,X)=>{R(S),N(y,X)},R=S=>{S||r("reset-flow")},B=(S,X)=>{i.arrowNavigation&&(w.value[X]=Kn(S),f(w.value,"monthYear"))},Y=Z(()=>{var S,X;return[{type:Mi.month,index:1,toggle:D,modelValue:P.value,updateModelValue:Q=>P.value=Q,text:E.value.text,showSelectionGrid:_.value,items:U.value,ariaLabel:(S=o.value)==null?void 0:S.openMonthsOverlay},{type:Mi.year,index:2,toggle:O,modelValue:A.value,updateModelValue:Q=>A.value=Q,text:i.year,showSelectionGrid:y.value,items:F.value,ariaLabel:(X=o.value)==null?void 0:X.openYearsOverlay}]}),$=Z(()=>i.disableYearSelect?[Y.value[0]]:i.yearFirst?[...Y.value].reverse():Y.value);return e({toggleMonthPicker:D,toggleYearPicker:O,handleMonthYearChange:p}),(S,X)=>{var Q,pe,me;return x(),z("div",zse,[S.$slots["month-year"]?xe(S.$slots,"month-year",xn(Xt({key:0},{month:t.month,year:t.year,months:t.months,years:t.years,updateMonthYear:k(v),handleMonthYearChange:k(p),instance:t.instance}))):(x(),z(Ae,{key:1},[k(b)(k(a),t.instance)&&!S.vertical?(x(),ce(wd,{key:0,"aria-label":(Q=k(o))==null?void 0:Q.prevMonth,disabled:k(m)(!1),onActivate:X[0]||(X[0]=te=>k(p)(!1,!0)),onSetRef:X[1]||(X[1]=te=>B(te,0))},{default:fe(()=>[S.$slots["arrow-left"]?xe(S.$slots,"arrow-left",{key:0}):ne("",!0),S.$slots["arrow-left"]?ne("",!0):(x(),ce(k(U1),{key:1}))]),_:3},8,["aria-label","disabled"])):ne("",!0),J("div",{class:Me(["dp__month_year_wrap",{dp__year_disable_select:S.disableYearSelect}])},[(x(!0),z(Ae,null,dt($.value,(te,V)=>(x(),z(Ae,{key:te.type},[J("button",{ref_for:!0,ref:W=>B(W,V+1),type:"button",class:"dp__btn dp__month_year_select",tabindex:"0","aria-label":te.ariaLabel,onClick:te.toggle,onKeydown:[at(Mt(te.toggle,["prevent"]),["enter"]),at(Mt(te.toggle,["prevent"]),["space"])]},[S.$slots[te.type]?xe(S.$slots,te.type,{key:0,text:te.text,value:i[te.type]}):ne("",!0),S.$slots[te.type]?ne("",!0):(x(),z(Ae,{key:1},[Qe(Je(te.text),1)],64))],40,Kse),ee(Cs,{name:k(d)(te.showSelectionGrid),css:k(h)},{default:fe(()=>[te.showSelectionGrid?(x(),ce(Yh,{key:0,items:te.items,"arrow-navigation":S.arrowNavigation,"hide-navigation":S.hideNavigation,"is-last":S.autoApply&&!k(u).keepActionRow,"skip-button-ref":!1,config:S.config,type:te.type,"header-refs":[],"esc-close":S.escClose,"text-input":S.textInput,onSelected:te.updateModelValue,onToggle:te.toggle},gr({"button-icon":fe(()=>[S.$slots["calendar-icon"]?xe(S.$slots,"calendar-icon",{key:0}):ne("",!0),S.$slots["calendar-icon"]?ne("",!0):(x(),ce(k(uc),{key:1}))]),_:2},[S.$slots[`${te.type}-overlay-value`]?{name:"item",fn:fe(({item:W})=>[xe(S.$slots,`${te.type}-overlay-value`,{text:W.text,value:W.value})]),key:"0"}:void 0,S.$slots[`${te.type}-overlay`]?{name:"overlay",fn:fe(()=>[xe(S.$slots,`${te.type}-overlay`,xn(sr(I.value(te.type))))]),key:"1"}:void 0,S.$slots[`${te.type}-overlay-header`]?{name:"header",fn:fe(()=>[xe(S.$slots,`${te.type}-overlay-header`,{toggle:te.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","text-input","onSelected","onToggle"])):ne("",!0)]),_:2},1032,["name","css"])],64))),128))],2),k(b)(k(a),t.instance)&&S.vertical?(x(),ce(wd,{key:1,"aria-label":(pe=k(o))==null?void 0:pe.prevMonth,disabled:k(m)(!1),onActivate:X[2]||(X[2]=te=>k(p)(!1,!0))},{default:fe(()=>[S.$slots["arrow-up"]?xe(S.$slots,"arrow-up",{key:0}):ne("",!0),S.$slots["arrow-up"]?ne("",!0):(x(),ce(k(B1),{key:1}))]),_:3},8,["aria-label","disabled"])):ne("",!0),k(g)(k(a),t.instance)?(x(),ce(wd,{key:2,ref:"rightIcon",disabled:k(m)(!0),"aria-label":(me=k(o))==null?void 0:me.nextMonth,onActivate:X[3]||(X[3]=te=>k(p)(!0,!0)),onSetRef:X[4]||(X[4]=te=>B(te,S.disableYearSelect?2:3))},{default:fe(()=>[S.$slots[S.vertical?"arrow-down":"arrow-right"]?xe(S.$slots,S.vertical?"arrow-down":"arrow-right",{key:0}):ne("",!0),S.$slots[S.vertical?"arrow-down":"arrow-right"]?ne("",!0):(x(),ce(uh(S.vertical?k(j1):k(F1)),{key:1}))]),_:3},8,["disabled","aria-label"])):ne("",!0)],64))])}}}),qse=["aria-label"],Xse={class:"dp__calendar_header",role:"row"},Qse={key:0,class:"dp__calendar_header_item",role:"gridcell"},Jse=J("div",{class:"dp__calendar_header_separator"},null,-1),Zse=["aria-label"],eoe={key:0,role:"gridcell",class:"dp__calendar_item dp__week_num"},toe={class:"dp__cell_inner"},noe=["id","aria-selected","aria-disabled","aria-label","onClick","onKeydown","onMouseenter","onMouseleave"],roe=Ee({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...es},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(t,{expose:e,emit:n}){const r=n,i=t,{buildMultiLevelMatrix:s}=ta(),{defaultedTransitions:o,defaultedConfig:a,defaultedAriaLabels:l,defaultedMultiCalendars:u,defaultedWeekNumbers:c}=Ln(i),d=re(null),h=re({bottom:"",left:"",transform:""}),f=re([]),p=re(null),m=re(!0),v=re(""),b=re({startX:0,endX:0,startY:0,endY:0}),g=re([]),_=re({left:"50%"}),y=Z(()=>i.calendar?i.calendar(i.mappedDates):i.mappedDates),w=Z(()=>i.dayNames?Array.isArray(i.dayNames)?i.dayNames:i.dayNames(i.locale,+i.weekStart):xie(i.formatLocale,i.locale,+i.weekStart));zt(()=>{r("mount",{cmp:"calendar",refs:f}),a.value.noSwipe||p.value&&(p.value.addEventListener("touchstart",O,{passive:!1}),p.value.addEventListener("touchend",R,{passive:!1}),p.value.addEventListener("touchmove",B,{passive:!1})),i.monthChangeOnScroll&&p.value&&p.value.addEventListener("wheel",S,{passive:!1})});const T=te=>te?i.vertical?"vNext":"next":i.vertical?"vPrevious":"previous",P=(te,V)=>{if(i.transitions){const W=Or(Ls(we(),i.month,i.year));v.value=kr(Or(Ls(we(),te,V)),W)?o.value[T(!0)]:o.value[T(!1)],m.value=!1,Wn(()=>{m.value=!0})}},A=Z(()=>({[i.calendarClassName]:!!i.calendarClassName})),I=Z(()=>te=>{const V=Rie(te);return{dp__marker_dot:V.type==="dot",dp__marker_line:V.type==="line"}}),E=Z(()=>te=>Vt(te,d.value)),U=Z(()=>({dp__calendar:!0,dp__calendar_next:u.value.count>0&&i.instance!==0})),F=Z(()=>te=>i.hideOffsetDates?te.current:!0),N=async(te,V,W)=>{var se,G;if(r("set-hover-date",te),(G=(se=te.marker)==null?void 0:se.tooltip)!=null&&G.length){const ue=Kn(f.value[V][W]);if(ue){const{width:ve,height:ie}=ue.getBoundingClientRect();d.value=te.value;let C={left:`${ve/2}px`},M=-50;if(await Wn(),g.value[0]){const{left:j,width:oe}=g.value[0].getBoundingClientRect();j<0&&(C={left:"0"},M=0,_.value.left=`${ve/2}px`),window.innerWidth<j+oe&&(C={right:"0"},M=0,_.value.left=`${oe-ve/2}px`)}h.value={bottom:`${ie}px`,...C,transform:`translateX(${M}%)`},r("tooltip-open",te.marker)}}},D=te=>{d.value&&(d.value=null,h.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),r("tooltip-close",te.marker))},O=te=>{b.value.startX=te.changedTouches[0].screenX,b.value.startY=te.changedTouches[0].screenY},R=te=>{b.value.endX=te.changedTouches[0].screenX,b.value.endY=te.changedTouches[0].screenY,Y()},B=te=>{i.vertical&&!i.inline&&te.preventDefault()},Y=()=>{const te=i.vertical?"Y":"X";Math.abs(b.value[`start${te}`]-b.value[`end${te}`])>10&&r("handle-swipe",b.value[`start${te}`]>b.value[`end${te}`]?"right":"left")},$=(te,V,W)=>{te&&(Array.isArray(f.value[V])?f.value[V][W]=te:f.value[V]=[te]),i.arrowNavigation&&s(f.value,"calendar")},S=te=>{i.monthChangeOnScroll&&(te.preventDefault(),r("handle-scroll",te))},X=te=>c.value.type==="local"?jne(te.value,{weekStartsOn:+i.weekStart}):c.value.type==="iso"?Une(te.value):typeof c.value.type=="function"?c.value.type(te.value):"",Q=te=>{const V=te[0];return c.value.hideOnOffsetDates?te.some(W=>W.current)?X(V):"":X(V)},pe=(te,V)=>{Lo(te,a.value),r("select-date",V)},me=te=>{Lo(te,a.value)};return e({triggerTransition:P}),(te,V)=>{var W;return x(),z("div",{class:Me(U.value)},[J("div",{ref_key:"calendarWrapRef",ref:p,role:"grid",class:Me(A.value),"aria-label":(W=k(l))==null?void 0:W.calendarWrap},[(x(),z(Ae,{key:0},[J("div",Xse,[te.weekNumbers?(x(),z("div",Qse,Je(te.weekNumName),1)):ne("",!0),(x(!0),z(Ae,null,dt(w.value,(se,G)=>(x(),z("div",{key:G,class:"dp__calendar_header_item",role:"gridcell"},[te.$slots["calendar-header"]?xe(te.$slots,"calendar-header",{key:0,day:se,index:G}):ne("",!0),te.$slots["calendar-header"]?ne("",!0):(x(),z(Ae,{key:1},[Qe(Je(se),1)],64))]))),128))]),Jse,ee(Cs,{name:v.value,css:!!te.transitions},{default:fe(()=>{var se;return[m.value?(x(),z("div",{key:0,class:"dp__calendar",role:"rowgroup","aria-label":((se=k(l))==null?void 0:se.calendarDays)||void 0},[(x(!0),z(Ae,null,dt(y.value,(G,ue)=>(x(),z("div",{key:ue,class:"dp__calendar_row",role:"row"},[te.weekNumbers?(x(),z("div",eoe,[J("div",toe,Je(Q(G.days)),1)])):ne("",!0),(x(!0),z(Ae,null,dt(G.days,(ve,ie)=>{var C,M,j;return x(),z("div",{id:ve.value.toISOString().split("T")[0],ref_for:!0,ref:oe=>$(oe,ue,ie),key:ie+ue,role:"gridcell",class:"dp__calendar_item","aria-selected":ve.classData.dp__active_date||ve.classData.dp__range_start||ve.classData.dp__range_start,"aria-disabled":ve.classData.dp__cell_disabled||void 0,"aria-label":(M=(C=k(l))==null?void 0:C.day)==null?void 0:M.call(C,ve),tabindex:"0",onClick:Mt(oe=>pe(oe,ve),["prevent"]),onKeydown:[at(oe=>te.$emit("select-date",ve),["enter"]),at(oe=>te.$emit("handle-space",ve),["space"])],onMouseenter:oe=>N(ve,ue,ie),onMouseleave:oe=>D(ve)},[J("div",{class:Me(["dp__cell_inner",ve.classData])},[te.$slots.day&&F.value(ve)?xe(te.$slots,"day",{key:0,day:+ve.text,date:ve.value}):ne("",!0),te.$slots.day?ne("",!0):(x(),z(Ae,{key:1},[Qe(Je(ve.text),1)],64)),ve.marker&&F.value(ve)?(x(),z(Ae,{key:2},[te.$slots.marker?xe(te.$slots,"marker",{key:0,marker:ve.marker,day:+ve.text,date:ve.value}):(x(),z("div",{key:1,class:Me(I.value(ve.marker)),style:Gn(ve.marker.color?{backgroundColor:ve.marker.color}:{})},null,6))],64)):ne("",!0),E.value(ve.value)?(x(),z("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:g,class:"dp__marker_tooltip",style:Gn(h.value)},[(j=ve.marker)!=null&&j.tooltip?(x(),z("div",{key:0,class:"dp__tooltip_content",onClick:me},[(x(!0),z(Ae,null,dt(ve.marker.tooltip,(oe,ae)=>(x(),z("div",{key:ae,class:"dp__tooltip_text"},[te.$slots["marker-tooltip"]?xe(te.$slots,"marker-tooltip",{key:0,tooltip:oe,day:ve.value}):ne("",!0),te.$slots["marker-tooltip"]?ne("",!0):(x(),z(Ae,{key:1},[J("div",{class:"dp__tooltip_mark",style:Gn(oe.color?{backgroundColor:oe.color}:{})},null,4),J("div",null,Je(oe.text),1)],64))]))),128)),J("div",{class:"dp__arrow_bottom_tp",style:Gn(_.value)},null,4)])):ne("",!0)],4)):ne("",!0)],2)],40,noe)}),128))]))),128))],8,Zse)):ne("",!0)]}),_:3},8,["name","css"])],64))],10,qse)],2)}}}),sA=t=>Array.isArray(t),ioe=(t,e,n,r)=>{const i=re([]),{modelValue:s,calendars:o,time:a}=Wh(t,e),{defaultedMultiCalendars:l,defaultedStartTime:u}=Ln(t),{validateMonthYearInRange:c,isDisabled:d,isDateRangeAllowed:h,checkMinMaxRange:f}=_l(t),{updateTimeValues:p,getSetDateTime:m,setTime:v,assignStartTime:b,validateTime:g,disabledTimesConfig:_}=W2(t,a,s,r),y=Z(()=>K=>o.value[K]?o.value[K].month:0),w=Z(()=>K=>o.value[K]?o.value[K].year:0),T=(K,L,H)=>{var q,le;o.value[K]||(o.value[K]={month:0,year:0}),o.value[K].month=eA(L)?(q=o.value[K])==null?void 0:q.month:L,o.value[K].year=eA(H)?(le=o.value[K])==null?void 0:le.year:H},P=()=>{t.autoApply&&e("select-date")};St(s,(K,L)=>{JSON.stringify(K)!==JSON.stringify(L)&&E()}),zt(()=>{t.shadow||(s.value||(S(),u.value&&b(u.value)),E(!0),t.focusStartDate&&t.startDate&&S())});const A=Z(()=>{var K;return(K=t.flow)!=null&&K.length&&!t.partialFlow?t.flowStep===t.flow.length:!0}),I=()=>{t.autoApply&&A.value&&e("auto-apply",t.partialFlow)},E=(K=!1)=>{if(s.value)return Array.isArray(s.value)?(i.value=s.value,R(K)):F(s.value,K);if(l.value.count&&K&&!t.startDate)return U(we(),K)},U=(K,L=!1)=>{if((!l.value.count||!l.value.static||L)&&T(0,Rt(K),gt(K)),l.value.count&&(!l.value.solo||!s.value))for(let H=1;H<l.value.count;H++){const q=fn(we(),{month:y.value(H-1),year:w.value(H-1)}),le=r2(q,{months:1});o.value[H]={month:Rt(le),year:gt(le)}}},F=(K,L)=>{U(K),v("hours",Ki(K)),v("minutes",ws(K)),v("seconds",Yu(K)),l.value.count&&L&&$()},N=K=>{if(l.value.count){if(l.value.solo)return 0;const L=Rt(K[0]),H=Rt(K[1]);return Math.abs(H-L)<l.value.count?0:1}return 1},D=(K,L)=>{K[1]&&t.showLastInRange?U(K[N(K)],L):U(K[0],L);const H=(q,le)=>[q(K[0]),K[1]?q(K[1]):a[le][1]];v("hours",H(Ki,"hours")),v("minutes",H(ws,"minutes")),v("seconds",H(Yu,"seconds"))},O=(K,L)=>{if((t.range||t.weekPicker)&&!t.multiDates)return D(K,L);if(t.multiDates&&L){const H=K[K.length-1];return F(H,L)}},R=K=>{const L=s.value;O(L,K),l.value.count&&l.value.solo&&$()},B=(K,L)=>{const H=fn(we(),{month:y.value(L),year:w.value(L)}),q=K<0?zi(H,1):zu(H,1);c(Rt(q),gt(q),K<0,t.preventMinMaxNavigation)&&(T(L,Rt(q),gt(q)),e("update-month-year",{instance:L,month:Rt(q),year:gt(q)}),l.value.count&&!l.value.solo&&Y(L),n())},Y=K=>{for(let L=K-1;L>=0;L--){const H=zu(fn(we(),{month:y.value(L+1),year:w.value(L+1)}),1);T(L,Rt(H),gt(H))}for(let L=K+1;L<=l.value.count-1;L++){const H=zi(fn(we(),{month:y.value(L-1),year:w.value(L-1)}),1);T(L,Rt(H),gt(H))}},$=()=>{if(Array.isArray(s.value)&&s.value.length===2){const K=we(we(s.value[1]?s.value[1]:zi(s.value[0],1))),[L,H]=[Rt(s.value[0]),gt(s.value[0])],[q,le]=[Rt(s.value[1]),gt(s.value[1])];(L!==q||L===q&&H!==le)&&l.value.solo&&T(1,Rt(K),gt(K))}else s.value&&!Array.isArray(s.value)&&(T(0,Rt(s.value),gt(s.value)),U(we()))},S=()=>{t.startDate&&(T(0,Rt(we(t.startDate)),gt(we(t.startDate))),l.value.count&&Y(0))},X=Lie((K,L)=>{t.monthChangeOnScroll&&B(t.monthChangeOnScroll!=="inverse"?-K.deltaY:K.deltaY,L)},50),Q=(K,L,H=!1)=>{t.monthChangeOnArrows&&t.vertical===H&&pe(K,L)},pe=(K,L)=>{B(K==="right"?-1:1,L)},me=K=>t.markers.find(L=>Vt(Vie(K.value),Gi(we(L.date),t.timezone))),te=(K,L)=>{switch(t.sixWeeks===!0?"append":t.sixWeeks){case"prepend":return[!0,!1];case"center":return[K==0,!0];case"fair":return[K==0||L>K,!0];case"append":return[!1,!1];default:return[!1,!1]}},V=(K,L,H,q)=>{if(t.sixWeeks&&K.length<6){const le=6-K.length,Re=(L.getDay()+7-q)%7,He=6-(H.getDay()+7-q)%7,[he,Te]=te(Re,He);for(let Ce=1;Ce<=le;Ce++)if(Te?!!(Ce%2)==he:he){const We=K[0].days[0],Ue=W(Rs(We.value,-7),Rt(L));K.unshift({days:Ue})}else{const We=K[K.length-1],Ue=We.days[We.days.length-1],Xe=W(Rs(Ue.value,1),Rt(L));K.push({days:Xe})}}return K},W=(K,L)=>{const H=we(K),q=[];for(let le=0;le<7;le++){const Re=Rs(H,le),He=Rt(Re)!==L;q.push({text:t.hideOffsetDates&&He?"":Re.getDate(),value:Re,current:!He,classData:{}})}return q},se=(K,L)=>{const H=[],q=new Date(L,K),le=new Date(L,K+1,0),Re=t.weekStart,He=il(q,{weekStartsOn:Re}),he=Te=>{const Ce=W(Te,K);if(H.push({days:Ce}),!H[H.length-1].days.some(We=>Vt(Or(We.value),Or(le)))){const We=Rs(Te,7);he(We)}};return he(He),V(H,q,le,Re)},G=K=>(s.value=up(we(K.value),t.timezone,t.weekStart),e("date-update",K.value),I()),ue=K=>{const L=Uo(we(K.value),a.hours,a.minutes,be());e("date-update",L),t.multiDates?G1(L,s,t.multiDatesLimit):s.value=L,r(),Wn().then(()=>{I()})},ve=K=>t.noDisabledRange?N2(i.value[0],K).some(L=>d(L)):!1,ie=()=>{i.value=s.value?s.value.slice():[],i.value.length===2&&!(t.fixedStart||t.fixedEnd)&&(i.value=[])},C=(K,L)=>{const H=[we(K.value),Rs(we(K.value),+t.autoRange)];h(H)?(L&&M(K.value),i.value=H):e("invalid-date",K.value)},M=K=>{const L=Rt(we(K)),H=gt(we(K));if(T(0,L,H),l.value.count>0)for(let q=1;q<l.value.count;q++){const le=Bie(fn(we(K),{year:y.value(q-1),month:w.value(q-1)}));T(q,le.month,le.year)}},j=K=>Array.isArray(s.value)&&s.value.length===2?t.fixedStart&&(kr(K,s.value[0])||Vt(K,s.value[0]))?[s.value[0],K]:t.fixedEnd&&(mr(K,s.value[1])||Vt(K,s.value[1]))?[K,s.value[1]]:(e("invalid-fixed-range",K),s.value):[],oe=K=>{if(ve(K.value)||!f(K.value,s.value,t.fixedStart?0:1))return e("invalid-date",K.value);i.value=j(we(K.value))},ae=(K,L)=>{if(ie(),t.autoRange)return C(K,L);if(t.fixedStart||t.fixedEnd)return oe(K);i.value[0]?f(we(K.value),s.value)&&!ve(K.value)?mr(we(K.value),we(i.value[0]))?(i.value.unshift(we(K.value)),e("range-end",i.value[0])):(i.value[1]=we(K.value),e("range-end",i.value[1])):(t.autoApply&&e("auto-apply-invalid",K.value),e("invalid-date",K.value)):(i.value[0]=we(K.value),e("range-start",i.value[0]))},be=(K=!0)=>t.enableSeconds?Array.isArray(a.seconds)?K?a.seconds[0]:a.seconds[1]:a.seconds:0,Se=K=>{i.value[K]=Uo(i.value[K],a.hours[K],a.minutes[K],be(K!==1))},ye=()=>{var K,L;i.value[0]&&i.value[1]&&+((K=i.value)==null?void 0:K[0])>+((L=i.value)==null?void 0:L[1])&&(i.value.reverse(),e("range-start",i.value[0]),e("range-end",i.value[1]))},_e=()=>{i.value.length&&(i.value[0]&&!i.value[1]?Se(0):(Se(0),Se(1),r()),ye(),s.value=i.value.slice(),Jg(i.value,e,t.autoApply,t.modelAuto))},ge=(K,L=!1)=>{if(d(K.value)||!K.current&&t.hideOffsetDates)return e("invalid-date",K.value);if(t.weekPicker)return G(K);if(!t.range)return ue(K);sA(a.hours)&&sA(a.minutes)&&!t.multiDates&&(ae(K,L),_e())},ke=(K,L)=>{var H;T(K,L.month,L.year),l.value.count&&!l.value.solo&&Y(K),e("update-month-year",{instance:K,month:L.month,year:L.year}),n(l.value.solo?K:void 0);const q=(H=t.flow)!=null&&H.length?t.flow[t.flowStep]:void 0;!L.fromNav&&(q===ns.month||q===ns.year)&&r()},Le=(K,L)=>{B2({value:K,modelValue:s,range:t.range,timezone:L?void 0:t.timezone}),P(),t.multiCalendars&&Wn().then(()=>E(!0))},Be=()=>{t.range?s.value&&Array.isArray(s.value)&&s.value[0]?s.value=mr(we(),s.value[0])?[we(),s.value[0]]:[s.value[0],we()]:s.value=[we()]:s.value=we(),P()},qe=()=>{if(Array.isArray(s.value))if(t.multiDates){const K=it();s.value[s.value.length-1]=m(K)}else s.value=s.value.map((K,L)=>K&&m(K,L));else s.value=m(s.value);e("time-update")},it=()=>Array.isArray(s.value)&&s.value.length?s.value[s.value.length-1]:null;return{calendars:o,modelValue:s,month:y,year:w,time:a,disabledTimesConfig:_,validateTime:g,getCalendarDays:se,getMarker:me,handleScroll:X,handleSwipe:pe,handleArrow:Q,selectDate:ge,updateMonthYear:ke,presetDate:Le,selectCurrentDate:Be,updateTime:(K,L=!0,H=!1)=>{p(K,L,H,qe)}}},soe={key:0},ooe=Ee({__name:"DatePicker",props:{...es},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:n}){const r=n,i=t,{calendars:s,month:o,year:a,modelValue:l,time:u,disabledTimesConfig:c,validateTime:d,getCalendarDays:h,getMarker:f,handleArrow:p,handleScroll:m,handleSwipe:v,selectDate:b,updateMonthYear:g,presetDate:_,selectCurrentDate:y,updateTime:w}=ioe(i,r,$,S),T=Go(),{setHoverDate:P,getDayClassData:A,clearHoverDate:I}=lse(l,i),{defaultedMultiCalendars:E}=Ln(i),U=re([]),F=re([]),N=re(null),D=fi(T,"calendar"),O=fi(T,"monthYear"),R=fi(T,"timePicker"),B=Q=>{i.shadow||r("mount",Q)};St(s,()=>{i.shadow||setTimeout(()=>{r("recalculate-position")},0)},{deep:!0});const Y=Z(()=>Q=>h(o.value(Q),a.value(Q)).map(pe=>({...pe,days:pe.days.map(me=>(me.marker=f(me),me.classData=A(me),me))})));function $(Q){var pe;Q||Q===0?(pe=F.value[Q])==null||pe.triggerTransition(o.value(Q),a.value(Q)):F.value.forEach((me,te)=>me.triggerTransition(o.value(te),a.value(te)))}function S(){r("update-flow-step")}const X=(Q,pe=!1)=>{b(Q,pe),i.spaceConfirm&&r("select-date")};return e({clearHoverDate:I,presetDate:_,selectCurrentDate:y,toggleMonthPicker:(Q,pe,me=0)=>{var te;(te=U.value[me])==null||te.toggleMonthPicker(Q,pe)},toggleYearPicker:(Q,pe,me=0)=>{var te;(te=U.value[me])==null||te.toggleYearPicker(Q,pe)},toggleTimePicker:(Q,pe,me)=>{var te;(te=N.value)==null||te.toggleTimePicker(Q,pe,me)},handleArrow:p,updateMonthYear:g,getSidebarProps:()=>({modelValue:l,month:o,year:a,time:u,updateTime:w,updateMonthYear:g,selectDate:b,presetDate:_})}),(Q,pe)=>(x(),z(Ae,null,[ee(Qg,{"multi-calendars":k(E).count},{default:fe(({instance:me,index:te})=>[Q.disableMonthYearSelect?ne("",!0):(x(),ce(Gse,Xt({key:0,ref:V=>{V&&(U.value[te]=V)},months:k(D2)(Q.formatLocale,Q.locale,Q.monthNameFormat),years:k(z1)(Q.yearRange,Q.reverseYears),month:k(o)(me),year:k(a)(me),instance:me},Q.$props,{onMount:pe[0]||(pe[0]=V=>B(k(Ma).header)),onResetFlow:pe[1]||(pe[1]=V=>Q.$emit("reset-flow")),onUpdateMonthYear:V=>k(g)(me,V),onOverlayClosed:pe[2]||(pe[2]=V=>Q.$emit("focus-menu"))}),gr({_:2},[dt(k(O),(V,W)=>({name:V,fn:fe(se=>[xe(Q.$slots,V,xn(sr(se)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),ee(roe,Xt({ref:V=>{V&&(F.value[te]=V)},"mapped-dates":Y.value(me),month:k(o)(me),year:k(a)(me),instance:me},Q.$props,{onSelectDate:V=>k(b)(V,me!==1),onHandleSpace:V=>X(V,me!==1),onSetHoverDate:pe[3]||(pe[3]=V=>k(P)(V)),onHandleScroll:V=>k(m)(V,me),onHandleSwipe:V=>k(v)(V,me),onMount:pe[4]||(pe[4]=V=>B(k(Ma).calendar)),onResetFlow:pe[5]||(pe[5]=V=>Q.$emit("reset-flow")),onTooltipOpen:pe[6]||(pe[6]=V=>Q.$emit("tooltip-open",V)),onTooltipClose:pe[7]||(pe[7]=V=>Q.$emit("tooltip-close",V))}),gr({_:2},[dt(k(D),(V,W)=>({name:V,fn:fe(se=>[xe(Q.$slots,V,xn(sr({...se})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars"]),Q.enableTimePicker?(x(),z("div",soe,[Q.$slots["time-picker"]?xe(Q.$slots,"time-picker",xn(Xt({key:0},{time:k(u),updateTime:k(w)}))):(x(),ce(H2,Xt({key:1,ref_key:"timePickerRef",ref:N},Q.$props,{hours:k(u).hours,minutes:k(u).minutes,seconds:k(u).seconds,"internal-model-value":Q.internalModelValue,"disabled-times-config":k(c),"validate-time":k(d),onMount:pe[8]||(pe[8]=me=>B(k(Ma).timePicker)),"onUpdate:hours":pe[9]||(pe[9]=me=>k(w)(me)),"onUpdate:minutes":pe[10]||(pe[10]=me=>k(w)(me,!1)),"onUpdate:seconds":pe[11]||(pe[11]=me=>k(w)(me,!1,!0)),onResetFlow:pe[12]||(pe[12]=me=>Q.$emit("reset-flow")),onOverlayClosed:pe[13]||(pe[13]=me=>Q.$emit("time-picker-close")),onOverlayOpened:pe[14]||(pe[14]=me=>Q.$emit("time-picker-open",me)),onAmPmChange:pe[15]||(pe[15]=me=>Q.$emit("am-pm-change",me))}),gr({_:2},[dt(k(R),(me,te)=>({name:me,fn:fe(V=>[xe(Q.$slots,me,xn(sr(V)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):ne("",!0)],64))}}),aoe=(t,e)=>{const n=re(),{defaultedMultiCalendars:r,defaultedConfig:i,defaultedHighlight:s}=Ln(t),{modelValue:o,year:a,month:l,calendars:u}=Wh(t,e),{isDisabled:c}=_l(t),{selectYear:d,groupedYears:h,showYearPicker:f,isDisabled:p,toggleYearPicker:m,handleYearSelect:v,handleYear:b}=j2({modelValue:o,multiCalendars:r,highlight:s,calendars:u,month:l,year:a,props:t,emit:e}),g=(I,E)=>[I,E].map(U=>$o(U,"MMMM",{locale:t.formatLocale})).join("-"),_=Z(()=>I=>o.value?Array.isArray(o.value)?o.value.some(E=>HI(I,E)):HI(o.value,I):!1),y=I=>{if(t.range){if(Array.isArray(o.value)){const E=Vt(I,o.value[0])||Vt(I,o.value[1]);return Gg(o.value,n.value,I)&&!E}return!1}return!1},w=Z(()=>I=>{const E=fn(new Date,{year:a.value(I)});return Dte({start:Pte(E),end:xte(E)}).map(U=>{const F=nh(U),N=$I(U),D=c(U),O=y(F),R=typeof s.value=="function"?s.value({quarter:MI(F),year:gt(F)}):!!s.value.quarters.find(B=>B.quarter===MI(F)&&B.year===gt(F));return{text:g(F,N),value:F,active:_.value(F),highlighted:R,disabled:D,isBetween:O}})}),T=I=>{G1(I,o,t.multiDatesLimit),e("auto-apply",!0)},P=I=>{const E=q1(o,I,e);Jg(E,e,t.autoApply,t.modelAuto)},A=I=>{o.value=I,e("auto-apply")};return{defaultedConfig:i,defaultedMultiCalendars:r,groupedYears:h,year:a,isDisabled:p,quarters:w,showYearPicker:f,modelValue:o,setHoverDate:I=>{n.value=I},selectYear:d,selectQuarter:(I,E,U)=>{if(!U)return u.value[E].month=Rt($I(I)),t.multiDates?T(I):t.range?P(I):A(I)},toggleYearPicker:m,handleYearSelect:v,handleYear:b}},loe={class:"dp--quarter-items"},uoe=["disabled","onClick","onMouseover"],coe=Ee({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...es},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end"],setup(t,{expose:e,emit:n}){const r=n,i=t,s=Go(),o=fi(s,"yearMode"),{defaultedMultiCalendars:a,defaultedConfig:l,groupedYears:u,year:c,isDisabled:d,quarters:h,modelValue:f,showYearPicker:p,setHoverDate:m,selectQuarter:v,toggleYearPicker:b,handleYearSelect:g,handleYear:_}=aoe(i,r);return e({getSidebarProps:()=>({modelValue:f,year:c,selectQuarter:v,handleYearSelect:g,handleYear:_})}),(y,w)=>(x(),ce(Qg,{"multi-calendars":k(a).count,stretch:""},{default:fe(({instance:T})=>[J("div",{class:"dp-quarter-picker-wrap",style:Gn({minHeight:`${k(l).modeHeight}px`})},[J("div",null,[ee(V2,Xt(y.$props,{items:k(u)(T),instance:T,"show-year-picker":k(p)[T],year:k(c)(T),"is-disabled":P=>k(d)(T,P),onHandleYear:P=>k(_)(T,P),onYearSelect:P=>k(g)(P,T),onToggleYearPicker:P=>k(b)(T,P==null?void 0:P.flow,P==null?void 0:P.show)}),gr({_:2},[dt(k(o),(P,A)=>({name:P,fn:fe(I=>[xe(y.$slots,P,xn(sr(I)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),J("div",loe,[(x(!0),z(Ae,null,dt(k(h)(T),(P,A)=>(x(),z("div",{key:A},[J("button",{type:"button",class:Me(["dp--qr-btn",{"dp--qr-btn-active":P.active,"dp--qr-btn-between":P.isBetween,"dp--qr-btn-disabled":P.disabled,"dp--highlighted":P.highlighted}]),disabled:P.disabled,onClick:I=>k(v)(P.value,T,P.disabled),onMouseover:I=>k(m)(P.value)},[y.$slots.quarter?xe(y.$slots,"quarter",{key:0,value:P.value,text:P.text}):(x(),z(Ae,{key:1},[Qe(Je(P.text),1)],64))],42,uoe)]))),128))])],4)]),_:3},8,["multi-calendars"]))}}),doe=["id"],hoe={key:0,class:"dp__sidebar_left"},foe={key:1,class:"dp--preset-dates"},poe=["onClick","onKeydown"],moe={key:2,class:"dp__sidebar_right"},goe={key:3,class:"dp__action_extra"},oA=Ee({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...Xg,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:n}){const r=n,i=t,s=Z(()=>{const{openOnTop:ie,...C}=i;return{...C,flowStep:A.value,noOverlayFocus:i.noOverlayFocus}}),{setMenuFocused:o,setShiftKey:a,control:l}=F2(),u=Go(),{defaultedTextInput:c,defaultedInline:d,defaultedConfig:h}=Ln(i),f=re(null),p=re(0),m=re(null),v=re(null),b=re(!1),g=re(null);zt(()=>{if(!i.shadow){b.value=!0,_(),window.addEventListener("resize",_);const ie=Kn(m);if(ie&&!c.value.enabled&&!d.value.enabled&&(o(!0),N()),ie){const C=M=>{h.value.allowPreventDefault&&M.preventDefault(),Lo(M,h.value,!0)};ie.addEventListener("pointerdown",C),ie.addEventListener("mousedown",C)}}}),Ko(()=>{window.removeEventListener("resize",_)});const _=()=>{const ie=Kn(v);ie&&(p.value=ie.getBoundingClientRect().width)},{arrowRight:y,arrowLeft:w,arrowDown:T,arrowUp:P}=ta(),{flowStep:A,updateFlowStep:I,childMount:E,resetFlow:U}=use(i,r,g),F=Z(()=>i.monthPicker?Ise:i.yearPicker?kse:i.timePicker?Yse:i.quarterPicker?coe:ooe),N=()=>{const ie=Kn(m);ie&&ie.focus({preventScroll:!0})},D=Z(()=>{var ie;return((ie=g.value)==null?void 0:ie.getSidebarProps())||{}}),O=()=>{i.openOnTop&&r("recalculate-position")},R=fi(u,"action"),B=Z(()=>i.monthPicker||i.yearPicker?fi(u,"monthYear"):i.timePicker?fi(u,"timePicker"):fi(u,"shared")),Y=Z(()=>i.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),$=Z(()=>({dp__menu_disabled:i.disabled,dp__menu_readonly:i.readonly})),S=Z(()=>({dp__menu:!0,dp__menu_index:!d.value.enabled,dp__relative:d.value.enabled,[i.menuClassName]:!!i.menuClassName})),X=ie=>{Lo(ie,h.value,!0)},Q=()=>{i.escClose&&r("close-picker")},pe=ie=>{if(i.arrowNavigation){if(ie==="up")return P();if(ie==="down")return T();if(ie==="left")return w();if(ie==="right")return y()}else ie==="left"||ie==="up"?se("handleArrow","left",0,ie==="up"):se("handleArrow","right",0,ie==="down")},me=ie=>{a(ie.shiftKey),!i.disableMonthYearSelect&&ie.code==="Tab"&&ie.target.classList.contains("dp__menu")&&l.value.shiftKeyInMenu&&(ie.preventDefault(),Lo(ie,h.value,!0),r("close-picker"))},te=()=>{N(),r("time-picker-close")},V=ie=>{var C,M,j;(C=g.value)==null||C.toggleTimePicker(!1,!1),(M=g.value)==null||M.toggleMonthPicker(!1,!1,ie),(j=g.value)==null||j.toggleYearPicker(!1,!1,ie)},W=(ie,C=0)=>{var M,j,oe;return ie==="month"?(M=g.value)==null?void 0:M.toggleMonthPicker(!1,!0,C):ie==="year"?(j=g.value)==null?void 0:j.toggleYearPicker(!1,!0,C):ie==="time"?(oe=g.value)==null?void 0:oe.toggleTimePicker(!0,!1):V(C)},se=(ie,...C)=>{var M,j;(M=g.value)!=null&&M[ie]&&((j=g.value)==null||j[ie](...C))},G=()=>{se("selectCurrentDate")},ue=(ie,C)=>{se("presetDate",ie,C)},ve=()=>{se("clearHoverDate")};return e({updateMonthYear:(ie,C)=>{se("updateMonthYear",ie,C)},switchView:W}),(ie,C)=>{var M;return x(),z("div",{id:ie.uid?`dp-menu-${ie.uid}`:void 0,ref_key:"dpMenuRef",ref:m,tabindex:"0",role:"dialog",class:Me(S.value),onMouseleave:ve,onClick:X,onKeydown:[at(Q,["esc"]),C[18]||(C[18]=at(Mt(j=>pe("left"),["prevent"]),["left"])),C[19]||(C[19]=at(Mt(j=>pe("up"),["prevent"]),["up"])),C[20]||(C[20]=at(Mt(j=>pe("down"),["prevent"]),["down"])),C[21]||(C[21]=at(Mt(j=>pe("right"),["prevent"]),["right"])),me]},[(ie.disabled||ie.readonly)&&k(d).enabled?(x(),z("div",{key:0,class:Me($.value)},null,2)):ne("",!0),!k(d).enabled&&!ie.teleportCenter?(x(),z("div",{key:1,class:Me(Y.value)},null,2)):ne("",!0),J("div",{ref_key:"innerMenuRef",ref:v,class:Me({dp__menu_content_wrapper:((M=ie.presetDates)==null?void 0:M.length)||!!ie.$slots["left-sidebar"]||!!ie.$slots["right-sidebar"]}),style:Gn({"--dp-menu-width":`${p.value}px`})},[ie.$slots["left-sidebar"]?(x(),z("div",hoe,[xe(ie.$slots,"left-sidebar",xn(sr(D.value)))])):ne("",!0),ie.presetDates.length?(x(),z("div",foe,[(x(!0),z(Ae,null,dt(ie.presetDates,(j,oe)=>(x(),z(Ae,{key:oe},[j.slot?xe(ie.$slots,j.slot,{key:0,presetDate:ue,label:j.label,value:j.value}):(x(),z("button",{key:1,type:"button",style:Gn(j.style||{}),class:"dp__btn dp--preset-range",onClick:Mt(ae=>ue(j.value,j.noTz),["prevent"]),onKeydown:[at(Mt(ae=>ue(j.value,j.noTz),["prevent"]),["enter"]),at(Mt(ae=>ue(j.value,j.noTz),["prevent"]),["space"])]},Je(j.label),45,poe))],64))),128))])):ne("",!0),J("div",{ref_key:"calendarWrapperRef",ref:f,class:"dp__instance_calendar",role:"document"},[(x(),ce(uh(F.value),Xt({ref_key:"dynCmpRef",ref:g},s.value,{"flow-step":k(A),onMount:k(E),onUpdateFlowStep:k(I),onResetFlow:k(U),onFocusMenu:N,onSelectDate:C[0]||(C[0]=j=>ie.$emit("select-date")),onDateUpdate:C[1]||(C[1]=j=>ie.$emit("date-update",j)),onTooltipOpen:C[2]||(C[2]=j=>ie.$emit("tooltip-open",j)),onTooltipClose:C[3]||(C[3]=j=>ie.$emit("tooltip-close",j)),onAutoApply:C[4]||(C[4]=j=>ie.$emit("auto-apply",j)),onRangeStart:C[5]||(C[5]=j=>ie.$emit("range-start",j)),onRangeEnd:C[6]||(C[6]=j=>ie.$emit("range-end",j)),onInvalidFixedRange:C[7]||(C[7]=j=>ie.$emit("invalid-fixed-range",j)),onTimeUpdate:C[8]||(C[8]=j=>ie.$emit("time-update")),onAmPmChange:C[9]||(C[9]=j=>ie.$emit("am-pm-change",j)),onTimePickerOpen:C[10]||(C[10]=j=>ie.$emit("time-picker-open",j)),onTimePickerClose:te,onRecalculatePosition:O,onUpdateMonthYear:C[11]||(C[11]=j=>ie.$emit("update-month-year",j)),onAutoApplyInvalid:C[12]||(C[12]=j=>ie.$emit("auto-apply-invalid",j)),onInvalidDate:C[13]||(C[13]=j=>ie.$emit("invalid-date",j)),"onUpdate:internalModelValue":C[14]||(C[14]=j=>ie.$emit("update:internal-model-value",j))}),gr({_:2},[dt(B.value,(j,oe)=>({name:j,fn:fe(ae=>[xe(ie.$slots,j,xn(sr({...ae})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),ie.$slots["right-sidebar"]?(x(),z("div",moe,[xe(ie.$slots,"right-sidebar",xn(sr(D.value)))])):ne("",!0),ie.$slots["action-extra"]?(x(),z("div",goe,[ie.$slots["action-extra"]?xe(ie.$slots,"action-extra",{key:0,selectCurrentDate:G}):ne("",!0)])):ne("",!0)],6),!ie.autoApply||k(h).keepActionRow?(x(),ce(vse,Xt({key:2,"menu-mount":b.value},s.value,{"calendar-width":p.value,onClosePicker:C[15]||(C[15]=j=>ie.$emit("close-picker")),onSelectDate:C[16]||(C[16]=j=>ie.$emit("select-date")),onInvalidSelect:C[17]||(C[17]=j=>ie.$emit("invalid-select")),onSelectNow:G}),gr({_:2},[dt(k(R),(j,oe)=>({name:j,fn:fe(ae=>[xe(ie.$slots,j,xn(sr({...ae})))])}))]),1040,["menu-mount","calendar-width"])):ne("",!0)],42,doe)}}}),voe=typeof window<"u"?window:void 0,xy=()=>{},yoe=t=>xm()?(Bw(t),!0):!1,woe=(t,e,n,r)=>{if(!t)return xy;let i=xy;const s=St(()=>k(t),a=>{i(),a&&(a.addEventListener(e,n,r),i=()=>{a.removeEventListener(e,n,r),i=xy})},{immediate:!0,flush:"post"}),o=()=>{s(),i()};return yoe(o),o},boe=(t,e,n,r={})=>{const{window:i=voe,event:s="pointerdown"}=r;return i?woe(i,s,o=>{const a=Kn(t),l=Kn(e);!a||!l||a===o.target||o.composedPath().includes(a)||o.composedPath().includes(l)||n(o)},{passive:!0}):void 0},_oe=Ee({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...Xg},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date"],setup(t,{expose:e,emit:n}){const r=n,i=t,s=Go(),o=re(!1),a=_u(i,"modelValue"),l=_u(i,"timezone"),u=re(null),c=re(null),d=re(null),h=re(!1),f=re(null),p=re(!1),m=re(!1),{setMenuFocused:v,setShiftKey:b}=F2(),{clearArrowNav:g}=ta(),{mapDatesArrToMap:_,validateDate:y,isValidTime:w}=_l(i),{defaultedTransitions:T,defaultedTextInput:P,defaultedInline:A,defaultedConfig:I}=Ln(i),{menuTransition:E,showTransition:U}=Hh(T);zt(()=>{pe(i.modelValue),Wn().then(()=>{if(!A.value.enabled){const he=$(f.value);he==null||he.addEventListener("scroll",ie),window==null||window.addEventListener("resize",C)}}),A.value.enabled&&(o.value=!0),window==null||window.addEventListener("keyup",M),window==null||window.addEventListener("keydown",j)});const F=Z(()=>_());Ko(()=>{if(!A.value.enabled){const he=$(f.value);he==null||he.removeEventListener("scroll",ie),window==null||window.removeEventListener("resize",C)}window==null||window.removeEventListener("keyup",M),window==null||window.removeEventListener("keydown",j)});const N=fi(s,"all",i.presetDates),D=fi(s,"input");St([a,l],()=>{pe(a.value)},{deep:!0});const{openOnTop:O,menuStyle:R,xCorrect:B,setMenuPosition:Y,getScrollableParent:$,shadowRender:S}=sse({menuRef:u,menuRefInner:c,inputRef:d,pickerWrapperRef:f,inline:A,emit:r,props:i,slots:s}),{inputValue:X,internalModelValue:Q,parseExternalModelValue:pe,emitModelValue:me,formatInputValue:te,checkBeforeEmit:V}=rse(r,i,h),W=Z(()=>({dp__main:!0,dp__theme_dark:i.dark,dp__theme_light:!i.dark,dp__flex_display:A.value.enabled,dp__flex_display_with_input:A.value.input})),se=Z(()=>i.dark?"dp__theme_dark":"dp__theme_light"),G=Z(()=>({to:typeof i.teleport=="boolean"?"body":i.teleport,disabled:!i.teleport||A.value.enabled})),ue=Z(()=>({class:"dp__outer_menu_wrap"})),ve=Z(()=>A.value.enabled&&(i.timePicker||i.monthPicker||i.yearPicker||i.quarterPicker)),ie=()=>{o.value&&(I.value.closeOnScroll?Le():Y())},C=()=>{o.value&&Y()},M=he=>{he.key==="Tab"&&!A.value.enabled&&!i.teleport&&I.value.tabOutClosesMenu&&(f.value.contains(document.activeElement)||Le()),m.value=he.shiftKey},j=he=>{m.value=he.shiftKey},oe=()=>{!i.disabled&&!i.readonly&&(S(oA,i),Y(!1),o.value=!0,o.value&&r("open"),o.value||ke(),pe(i.modelValue))},ae=()=>{var he;X.value="",ke(),(he=d.value)==null||he.setParsedDate(null),r("update:model-value",null),r("update:model-timezone-value",null),r("cleared"),I.value.closeOnClearValue&&Le()},be=()=>{const he=Q.value;return!he||!Array.isArray(he)&&y(he)?!0:Array.isArray(he)?i.multiDates||he.length===2&&y(he[0])&&y(he[1])?!0:i.partialRange&&!i.timePicker?y(he[0]):!1:!1},Se=()=>{V()&&be()?(me(),Le()):r("invalid-select",Q.value)},ye=he=>{_e(),me(),I.value.closeOnAutoApply&&!he&&Le()},_e=()=>{d.value&&P.value.enabled&&d.value.setParsedDate(Q.value)},ge=(he=!1)=>{i.autoApply&&w(Q.value)&&be()&&(i.range&&Array.isArray(Q.value)?(i.partialRange||Q.value.length===2)&&ye(he):ye(he))},ke=()=>{P.value.enabled||(Q.value=null)},Le=()=>{A.value.enabled||(o.value&&(o.value=!1,B.value=!1,v(!1),b(!1),g(),r("closed"),X.value&&pe(a.value)),ke(),r("blur"))},Be=(he,Te,Ce=!1)=>{if(!he){Q.value=null;return}const We=Array.isArray(he)?!he.some(Xe=>!y(Xe)):y(he),Ue=w(he);We&&Ue&&(Q.value=he,Te&&(p.value=Ce,Se(),r("text-submit")))},qe=()=>{i.autoApply&&w(Q.value)&&me(),_e()},it=()=>o.value?Le():oe(),K=he=>{Q.value=he},L=()=>{P.value.enabled&&(h.value=!0,te()),r("focus")},H=()=>{if(P.value.enabled&&(h.value=!1,pe(i.modelValue),p.value)){const he=$ie(f.value,m.value);he==null||he.focus()}r("blur")},q=he=>{c.value&&c.value.updateMonthYear(0,{month:ZI(he.month),year:ZI(he.year)})},le=he=>{pe(he??i.modelValue)},Re=(he,Te)=>{var Ce;(Ce=c.value)==null||Ce.switchView(he,Te)},He=he=>I.value.onClickOutside?I.value.onClickOutside(he):Le();return boe(u,d,()=>He(be)),e({closeMenu:Le,selectDate:Se,clearValue:ae,openMenu:oe,onScroll:ie,formatInputValue:te,updateInternalModelValue:K,setMonthYear:q,parseModel:le,switchView:Re,toggleMenu:it}),(he,Te)=>(x(),z("div",{ref_key:"pickerWrapperRef",ref:f,class:Me(W.value),"data-datepicker-instance":""},[ee(fse,Xt({ref_key:"inputRef",ref:d,"input-value":k(X),"onUpdate:inputValue":Te[0]||(Te[0]=Ce=>an(X)?X.value=Ce:null),"is-menu-open":o.value},he.$props,{onClear:ae,onOpen:oe,onSetInputDate:Be,onSetEmptyDate:k(me),onSelectDate:Se,onToggle:it,onClose:Le,onFocus:L,onBlur:H,onRealBlur:Te[1]||(Te[1]=Ce=>h.value=!1)}),gr({_:2},[dt(k(D),(Ce,We)=>({name:Ce,fn:fe(Ue=>[xe(he.$slots,Ce,xn(sr(Ue)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),ee(vk,xn(sr(G.value)),{default:fe(()=>[ee(Cs,{name:k(E)(k(O)),css:k(U)&&!k(A).enabled},{default:fe(()=>[o.value?(x(),z("div",Xt({key:0,ref_key:"dpWrapMenuRef",ref:u},ue.value,{class:{"dp--menu-wrapper":!k(A).enabled},style:k(A).enabled?void 0:k(R)}),[ee(oA,Xt({ref_key:"dpMenuRef",ref:c},he.$props,{"internal-model-value":k(Q),"onUpdate:internalModelValue":Te[2]||(Te[2]=Ce=>an(Q)?Q.value=Ce:null),class:{[se.value]:!0,"dp--menu-wrapper":he.teleport},"open-on-top":k(O),"arr-map-values":F.value,"no-overlay-focus":ve.value,onClosePicker:Le,onSelectDate:Se,onAutoApply:ge,onTimeUpdate:qe,onFlowStep:Te[3]||(Te[3]=Ce=>he.$emit("flow-step",Ce)),onUpdateMonthYear:Te[4]||(Te[4]=Ce=>he.$emit("update-month-year",Ce)),onInvalidSelect:Te[5]||(Te[5]=Ce=>he.$emit("invalid-select",k(Q))),onAutoApplyInvalid:Te[6]||(Te[6]=Ce=>he.$emit("invalid-select",Ce)),onInvalidFixedRange:Te[7]||(Te[7]=Ce=>he.$emit("invalid-fixed-range",Ce)),onRecalculatePosition:k(Y),onTooltipOpen:Te[8]||(Te[8]=Ce=>he.$emit("tooltip-open",Ce)),onTooltipClose:Te[9]||(Te[9]=Ce=>he.$emit("tooltip-close",Ce)),onTimePickerOpen:Te[10]||(Te[10]=Ce=>he.$emit("time-picker-open",Ce)),onTimePickerClose:Te[11]||(Te[11]=Ce=>he.$emit("time-picker-close",Ce)),onAmPmChange:Te[12]||(Te[12]=Ce=>he.$emit("am-pm-change",Ce)),onRangeStart:Te[13]||(Te[13]=Ce=>he.$emit("range-start",Ce)),onRangeEnd:Te[14]||(Te[14]=Ce=>he.$emit("range-end",Ce)),onDateUpdate:Te[15]||(Te[15]=Ce=>he.$emit("date-update",Ce)),onInvalidDate:Te[16]||(Te[16]=Ce=>he.$emit("invalid-date",Ce))}),gr({_:2},[dt(k(N),(Ce,We)=>({name:Ce,fn:fe(Ue=>[xe(he.$slots,Ce,xn(sr({...Ue})))])}))]),1040,["internal-model-value","class","open-on-top","arr-map-values","no-overlay-focus","onRecalculatePosition"])],16)):ne("",!0)]),_:3},8,["name","css"])]),_:3},16)],2))}}),X1=(()=>{const t=_oe;return t.install=e=>{e.component("Vue3DatePicker",t)},t})(),Toe=Object.freeze(Object.defineProperty({__proto__:null,default:X1},Symbol.toStringTag,{value:"Module"}));Object.entries(Toe).forEach(([t,e])=>{t!=="default"&&(X1[t]=e)});const Tl=Kk(v3);Tl.use(D1);Tl.use(nG,{firebaseApp:hx,modules:[JK()]});Tl.use(yx);Tl.use(oF);Tl.use(oJ);Tl.component("VueDatePicker",X1);Tl.mount("#app");
