var sN=Object.defineProperty;var oN=(t,e,n)=>e in t?sN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var jo=(t,e,n)=>(oN(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Pp(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Yt={},xl=[],Pi=()=>{},aN=()=>!1,lN=/^on[^a-z]/,Sd=t=>lN.test(t),T0=t=>t.startsWith("onUpdate:"),cn=Object.assign,E0=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},uN=Object.prototype.hasOwnProperty,kt=(t,e)=>uN.call(t,e),Ve=Array.isArray,Pl=t=>vu(t)==="[object Map]",Va=t=>vu(t)==="[object Set]",k_=t=>vu(t)==="[object Date]",cN=t=>vu(t)==="[object RegExp]",nt=t=>typeof t=="function",dn=t=>typeof t=="string",Hl=t=>typeof t=="symbol",qt=t=>t!==null&&typeof t=="object",S0=t=>(qt(t)||nt(t))&&nt(t.then)&&nt(t.catch),eC=Object.prototype.toString,vu=t=>eC.call(t),dN=t=>vu(t).slice(8,-1),tC=t=>vu(t)==="[object Object]",C0=t=>dn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,mc=Pp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},hN=/-(\w)/g,Wr=Dp(t=>t.replace(hN,(e,n)=>n?n.toUpperCase():"")),fN=/\B([A-Z])/g,di=Dp(t=>t.replace(fN,"-$1").toLowerCase()),Cd=Dp(t=>t.charAt(0).toUpperCase()+t.slice(1)),gc=Dp(t=>t?`on${Cd(t)}`:""),Eo=(t,e)=>!Object.is(t,e),Dl=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},_f=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Tf=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Ef=t=>{const e=dn(t)?Number(t):NaN;return isNaN(e)?t:e};let x_;const Sv=()=>x_||(x_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),pN="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",mN=Pp(pN);function Nn(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=dn(r)?wN(r):Nn(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(dn(t)||qt(t))return t}const gN=/;(?![^(]*\))/g,vN=/:([^]+)/,yN=/\/\*[^]*?\*\//g;function wN(t){const e={};return t.replace(yN,"").split(gN).forEach(n=>{if(n){const r=n.split(vN);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Le(t){let e="";if(dn(t))e=t;else if(Ve(t))for(let n=0;n<t.length;n++){const r=Le(t[n]);r&&(e+=r+" ")}else if(qt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Tn(t){if(!t)return null;let{class:e,style:n}=t;return e&&!dn(e)&&(t.class=Le(e)),n&&(t.style=Nn(n)),t}const bN="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_N=Pp(bN);function nC(t){return!!t||t===""}function TN(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=So(t[r],e[r]);return n}function So(t,e){if(t===e)return!0;let n=k_(t),r=k_(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Hl(t),r=Hl(e),n||r)return t===e;if(n=Ve(t),r=Ve(e),n||r)return n&&r?TN(t,e):!1;if(n=qt(t),r=qt(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!So(t[o],e[o]))return!1}}return String(t)===String(e)}function Rp(t,e){return t.findIndex(n=>So(n,e))}const Xe=t=>dn(t)?t:t==null?"":Ve(t)||qt(t)&&(t.toString===eC||!nt(t.toString))?JSON.stringify(t,rC,2):String(t),rC=(t,e)=>e&&e.__v_isRef?rC(t,e.value):Pl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Va(e)?{[`Set(${e.size})`]:[...e.values()]}:qt(e)&&!Ve(e)&&!tC(e)?String(e):e;let Xr;class I0{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Xr,!e&&Xr&&(this.index=(Xr.scopes||(Xr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Xr;try{return Xr=this,e()}finally{Xr=n}}}on(){Xr=this}off(){Xr=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Op(t){return new I0(t)}function iC(t,e=Xr){e&&e.active&&e.effects.push(t)}function Np(){return Xr}function A0(t){Xr&&Xr.cleanups.push(t)}const k0=t=>{const e=new Set(t);return e.w=0,e.n=0,e},sC=t=>(t.w&Co)>0,oC=t=>(t.n&Co)>0,EN=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Co},SN=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];sC(i)&&!oC(i)?i.delete(t):e[n++]=i,i.w&=~Co,i.n&=~Co}e.length=n}},Sf=new WeakMap;let Zu=0,Co=1;const Cv=30;let Ci;const ua=Symbol(""),Iv=Symbol("");class Wl{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,iC(this,r)}run(){if(!this.active)return this.fn();let e=Ci,n=ho;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ci,Ci=this,ho=!0,Co=1<<++Zu,Zu<=Cv?EN(this):P_(this),this.fn()}finally{Zu<=Cv&&SN(this),Co=1<<--Zu,Ci=this.parent,ho=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ci===this?this.deferStop=!0:this.active&&(P_(this),this.onStop&&this.onStop(),this.active=!1)}}function P_(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function CN(t,e){t.effect instanceof Wl&&(t=t.effect.fn);const n=new Wl(t);e&&(cn(n,e),e.scope&&iC(n,e.scope)),(!e||!e.lazy)&&n.run();const r=n.run.bind(n);return r.effect=n,r}function IN(t){t.effect.stop()}let ho=!0;const aC=[];function yu(){aC.push(ho),ho=!1}function wu(){const t=aC.pop();ho=t===void 0?!0:t}function Yr(t,e,n){if(ho&&Ci){let r=Sf.get(t);r||Sf.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=k0()),lC(i)}}function lC(t,e){let n=!1;Zu<=Cv?oC(t)||(t.n|=Co,n=!sC(t)):n=!t.has(Ci),n&&(t.add(Ci),Ci.deps.push(t))}function Es(t,e,n,r,i,s){const o=Sf.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Ve(t)){const l=Number(r);o.forEach((u,c)=>{(c==="length"||!Hl(c)&&c>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Ve(t)?C0(n)&&a.push(o.get("length")):(a.push(o.get(ua)),Pl(t)&&a.push(o.get(Iv)));break;case"delete":Ve(t)||(a.push(o.get(ua)),Pl(t)&&a.push(o.get(Iv)));break;case"set":Pl(t)&&a.push(o.get(ua));break}if(a.length===1)a[0]&&Av(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);Av(k0(l))}}function Av(t,e){const n=Ve(t)?t:[...t];for(const r of n)r.computed&&D_(r);for(const r of n)r.computed||D_(r)}function D_(t,e){(t!==Ci||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function AN(t,e){var n;return(n=Sf.get(t))==null?void 0:n.get(e)}const kN=Pp("__proto__,__v_isRef,__isVue"),uC=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Hl)),R_=xN();function xN(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=ft(this);for(let s=0,o=this.length;s<o;s++)Yr(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(ft)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){yu();const r=ft(this)[e].apply(this,n);return wu(),r}}),t}function PN(t){const e=ft(this);return Yr(e,"has",t),e.hasOwnProperty(t)}class cC{constructor(e=!1,n=!1){this._isReadonly=e,this._shallow=n}get(e,n,r){const i=this._isReadonly,s=this._shallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw"&&r===(i?s?gC:mC:s?pC:fC).get(e))return e;const o=Ve(e);if(!i){if(o&&kt(R_,n))return Reflect.get(R_,n,r);if(n==="hasOwnProperty")return PN}const a=Reflect.get(e,n,r);return(Hl(n)?uC.has(n):kN(n))||(i||Yr(e,"get",n),s)?a:zt(a)?o&&C0(n)?a:a.value:qt(a)?i?P0(a):Ln(a):a}}class dC extends cC{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(ba(s)&&zt(s)&&!zt(r))return!1;if(!this._shallow&&(!jc(r)&&!ba(r)&&(s=ft(s),r=ft(r)),!Ve(e)&&zt(s)&&!zt(r)))return s.value=r,!0;const o=Ve(e)&&C0(n)?Number(n)<e.length:kt(e,n),a=Reflect.set(e,n,r,i);return e===ft(i)&&(o?Eo(r,s)&&Es(e,"set",n,r):Es(e,"add",n,r)),a}deleteProperty(e,n){const r=kt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Es(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Hl(n)||!uC.has(n))&&Yr(e,"has",n),r}ownKeys(e){return Yr(e,"iterate",Ve(e)?"length":ua),Reflect.ownKeys(e)}}class hC extends cC{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const DN=new dC,RN=new hC,ON=new dC(!0),NN=new hC(!0),x0=t=>t,Mp=t=>Reflect.getPrototypeOf(t);function hh(t,e,n=!1,r=!1){t=t.__v_raw;const i=ft(t),s=ft(e);n||(Eo(e,s)&&Yr(i,"get",e),Yr(i,"get",s));const{has:o}=Mp(i),a=r?x0:n?R0:Hc;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function fh(t,e=!1){const n=this.__v_raw,r=ft(n),i=ft(t);return e||(Eo(t,i)&&Yr(r,"has",t),Yr(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function ph(t,e=!1){return t=t.__v_raw,!e&&Yr(ft(t),"iterate",ua),Reflect.get(t,"size",t)}function O_(t){t=ft(t);const e=ft(this);return Mp(e).has.call(e,t)||(e.add(t),Es(e,"add",t,t)),this}function N_(t,e){e=ft(e);const n=ft(this),{has:r,get:i}=Mp(n);let s=r.call(n,t);s||(t=ft(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Eo(e,o)&&Es(n,"set",t,e):Es(n,"add",t,e),this}function M_(t){const e=ft(this),{has:n,get:r}=Mp(e);let i=n.call(e,t);i||(t=ft(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Es(e,"delete",t,void 0),s}function L_(){const t=ft(this),e=t.size!==0,n=t.clear();return e&&Es(t,"clear",void 0,void 0),n}function mh(t,e){return function(r,i){const s=this,o=s.__v_raw,a=ft(o),l=e?x0:t?R0:Hc;return!t&&Yr(a,"iterate",ua),o.forEach((u,c)=>r.call(i,l(u),l(c),s))}}function gh(t,e,n){return function(...r){const i=this.__v_raw,s=ft(i),o=Pl(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...r),c=n?x0:e?R0:Hc;return!e&&Yr(s,"iterate",l?Iv:ua),{next(){const{value:d,done:h}=u.next();return h?{value:d,done:h}:{value:a?[c(d[0]),c(d[1])]:c(d),done:h}},[Symbol.iterator](){return this}}}}function js(t){return function(...e){return t==="delete"?!1:this}}function MN(){const t={get(s){return hh(this,s)},get size(){return ph(this)},has:fh,add:O_,set:N_,delete:M_,clear:L_,forEach:mh(!1,!1)},e={get(s){return hh(this,s,!1,!0)},get size(){return ph(this)},has:fh,add:O_,set:N_,delete:M_,clear:L_,forEach:mh(!1,!0)},n={get(s){return hh(this,s,!0)},get size(){return ph(this,!0)},has(s){return fh.call(this,s,!0)},add:js("add"),set:js("set"),delete:js("delete"),clear:js("clear"),forEach:mh(!0,!1)},r={get(s){return hh(this,s,!0,!0)},get size(){return ph(this,!0)},has(s){return fh.call(this,s,!0)},add:js("add"),set:js("set"),delete:js("delete"),clear:js("clear"),forEach:mh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=gh(s,!1,!1),n[s]=gh(s,!0,!1),e[s]=gh(s,!1,!0),r[s]=gh(s,!0,!0)}),[t,n,e,r]}const[LN,$N,UN,FN]=MN();function Lp(t,e){const n=e?t?FN:UN:t?$N:LN;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(kt(n,i)&&i in r?n:r,i,s)}const VN={get:Lp(!1,!1)},BN={get:Lp(!1,!0)},jN={get:Lp(!0,!1)},HN={get:Lp(!0,!0)},fC=new WeakMap,pC=new WeakMap,mC=new WeakMap,gC=new WeakMap;function WN(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function KN(t){return t.__v_skip||!Object.isExtensible(t)?0:WN(dN(t))}function Ln(t){return ba(t)?t:$p(t,!1,DN,VN,fC)}function vC(t){return $p(t,!1,ON,BN,pC)}function P0(t){return $p(t,!0,RN,jN,mC)}function YN(t){return $p(t,!0,NN,HN,gC)}function $p(t,e,n,r,i){if(!qt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=KN(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Xi(t){return ba(t)?Xi(t.__v_raw):!!(t&&t.__v_isReactive)}function ba(t){return!!(t&&t.__v_isReadonly)}function jc(t){return!!(t&&t.__v_isShallow)}function D0(t){return Xi(t)||ba(t)}function ft(t){const e=t&&t.__v_raw;return e?ft(e):t}function Id(t){return _f(t,"__v_skip",!0),t}const Hc=t=>qt(t)?Ln(t):t,R0=t=>qt(t)?P0(t):t;function O0(t){ho&&Ci&&(t=ft(t),lC(t.dep||(t.dep=k0())))}function Up(t,e){t=ft(t);const n=t.dep;n&&Av(n)}function zt(t){return!!(t&&t.__v_isRef===!0)}function ue(t){return wC(t,!1)}function yC(t){return wC(t,!0)}function wC(t,e){return zt(t)?t:new GN(t,e)}class GN{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:ft(e),this._value=n?e:Hc(e)}get value(){return O0(this),this._value}set value(e){const n=this.__v_isShallow||jc(e)||ba(e);e=n?e:ft(e),Eo(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Hc(e),Up(this))}}function zN(t){Up(t)}function k(t){return zt(t)?t.value:t}function qN(t){return nt(t)?t():k(t)}const QN={get:(t,e,n)=>k(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return zt(i)&&!zt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function N0(t){return Xi(t)?t:new Proxy(t,QN)}class XN{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>O0(this),()=>Up(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function JN(t){return new XN(t)}function bC(t){const e=Ve(t)?new Array(t.length):{};for(const n in t)e[n]=_C(t,n);return e}class ZN{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return AN(ft(this._object),this._key)}}class eM{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Kl(t,e,n){return zt(t)?t:nt(t)?new eM(t):qt(t)&&arguments.length>1?_C(t,e,n):ue(t)}function _C(t,e,n){const r=t[e];return zt(r)?r:new ZN(t,e,n)}class tM{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Wl(e,()=>{this._dirty||(this._dirty=!0,Up(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=ft(this);return O0(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function nM(t,e,n=!1){let r,i;const s=nt(t);return s?(r=t,i=Pi):(r=t.get,i=t.set),new tM(r,i,s||!i,n)}function rM(t,...e){}function iM(t,e){}function Ss(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){Ba(s,e,n)}return i}function ni(t,e,n,r){if(nt(t)){const s=Ss(t,e,n,r);return s&&S0(s)&&s.catch(o=>{Ba(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(ni(t[s],e,n,r));return i}function Ba(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Ss(l,null,10,[t,o,a]);return}}sM(t,n,i,r)}function sM(t,e,n,r=!0){console.error(t)}let Wc=!1,kv=!1;const fr=[];let ji=0;const Rl=[];let ps=null,Zo=0;const TC=Promise.resolve();let M0=null;function Rr(t){const e=M0||TC;return t?e.then(this?t.bind(this):t):e}function oM(t){let e=ji+1,n=fr.length;for(;e<n;){const r=e+n>>>1,i=fr[r],s=Kc(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function Fp(t){(!fr.length||!fr.includes(t,Wc&&t.allowRecurse?ji+1:ji))&&(t.id==null?fr.push(t):fr.splice(oM(t.id),0,t),EC())}function EC(){!Wc&&!kv&&(kv=!0,M0=TC.then(SC))}function aM(t){const e=fr.indexOf(t);e>ji&&fr.splice(e,1)}function Cf(t){Ve(t)?Rl.push(...t):(!ps||!ps.includes(t,t.allowRecurse?Zo+1:Zo))&&Rl.push(t),EC()}function $_(t,e=Wc?ji+1:0){for(;e<fr.length;e++){const n=fr[e];n&&n.pre&&(fr.splice(e,1),e--,n())}}function If(t){if(Rl.length){const e=[...new Set(Rl)];if(Rl.length=0,ps){ps.push(...e);return}for(ps=e,ps.sort((n,r)=>Kc(n)-Kc(r)),Zo=0;Zo<ps.length;Zo++)ps[Zo]();ps=null,Zo=0}}const Kc=t=>t.id==null?1/0:t.id,lM=(t,e)=>{const n=Kc(t)-Kc(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function SC(t){kv=!1,Wc=!0,fr.sort(lM);const e=Pi;try{for(ji=0;ji<fr.length;ji++){const n=fr[ji];n&&n.active!==!1&&Ss(n,null,14)}}finally{ji=0,fr.length=0,If(),Wc=!1,M0=null,(fr.length||Rl.length)&&SC()}}let hl,vh=[];function CC(t,e){var n,r;hl=t,hl?(hl.enabled=!0,vh.forEach(({event:i,args:s})=>hl.emit(i,...s)),vh=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{CC(s,e)}),setTimeout(()=>{hl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,vh=[])},3e3)):vh=[]}function uM(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Yt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:h}=r[c]||Yt;h&&(i=n.map(f=>dn(f)?f.trim():f)),d&&(i=n.map(Tf))}let a,l=r[a=gc(e)]||r[a=gc(Wr(e))];!l&&s&&(l=r[a=gc(di(e))]),l&&ni(l,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ni(u,t,6,i)}}function IC(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!nt(t)){const l=u=>{const c=IC(u,e,!0);c&&(a=!0,cn(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(qt(t)&&r.set(t,null),null):(Ve(s)?s.forEach(l=>o[l]=null):cn(o,s),qt(t)&&r.set(t,o),o)}function Vp(t,e){return!t||!Sd(e)?!1:(e=e.slice(2).replace(/Once$/,""),kt(t,e[0].toLowerCase()+e.slice(1))||kt(t,di(e))||kt(t,e))}let Hn=null,Bp=null;function Yc(t){const e=Hn;return Hn=t,Bp=t&&t.type.__scopeId||null,e}function AC(t){Bp=t}function kC(){Bp=null}const cM=t=>ye;function ye(t,e=Hn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Mv(-1);const s=Yc(e);let o;try{o=t(...i)}finally{Yc(s),r._d&&Mv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function nf(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:d,data:h,setupState:f,ctx:p,inheritAttrs:m}=t;let y,_;const v=Yc(t);try{if(n.shapeFlag&4){const g=i||r;y=Jr(c.call(g,g,d,s,f,h,p)),_=l}else{const g=e;y=Jr(g.length>1?g(s,{attrs:l,slots:a,emit:u}):g(s,null)),_=e.props?l:hM(l)}}catch(g){wc.length=0,Ba(g,t,1),y=ae(vr)}let b=y;if(_&&m!==!1){const g=Object.keys(_),{shapeFlag:w}=b;g.length&&w&7&&(o&&g.some(T0)&&(_=fM(_,o)),b=is(b,_))}return n.dirs&&(b=is(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),y=b,Yc(v),y}function dM(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(Io(r)){if(r.type!==vr||r.children==="v-if"){if(e)return;e=r}}else return}return e}const hM=t=>{let e;for(const n in t)(n==="class"||n==="style"||Sd(n))&&((e||(e={}))[n]=t[n]);return e},fM=(t,e)=>{const n={};for(const r in t)(!T0(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function pM(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?U_(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const h=c[d];if(o[h]!==r[h]&&!Vp(u,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?U_(r,o,u):!0:!!o;return!1}function U_(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Vp(n,s))return!0}return!1}function L0({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const $0="components",mM="directives";function Ls(t,e){return U0($0,t,!0,e)||t}const xC=Symbol.for("v-ndc");function Ad(t){return dn(t)?U0($0,t,!1)||t:t||xC}function gM(t){return U0(mM,t)}function U0(t,e,n=!0,r=!1){const i=Hn||Pn;if(i){const s=i.type;if(t===$0){const a=Uv(s,!1);if(a&&(a===e||a===Wr(e)||a===Cd(Wr(e))))return s}const o=F_(i[t]||s[t],e)||F_(i.appContext[t],e);return!o&&r?s:o}}function F_(t,e){return t&&(t[e]||t[Wr(e)]||t[Cd(Wr(e))])}const PC=t=>t.__isSuspense,vM={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,u){t==null?wM(e,n,r,i,s,o,a,l,u):bM(t,e,n,r,i,o,a,l,u)},hydrate:_M,create:F0,normalize:TM},yM=vM;function Gc(t,e){const n=t.props&&t.props[e];nt(n)&&n()}function wM(t,e,n,r,i,s,o,a,l){const{p:u,o:{createElement:c}}=l,d=c("div"),h=t.suspense=F0(t,i,r,e,d,n,s,o,a,l);u(null,h.pendingBranch=t.ssContent,d,null,r,h,s,o),h.deps>0?(Gc(t,"onPending"),Gc(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,s,o),Ol(h,t.ssFallback)):h.resolve(!1,!0)}function bM(t,e,n,r,i,s,o,a,{p:l,um:u,o:{createElement:c}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const h=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:y,isHydrating:_}=d;if(m)d.pendingBranch=h,Ii(h,m)?(l(m,h,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0?d.resolve():y&&(l(p,f,n,r,i,null,s,o,a),Ol(d,f))):(d.pendingId++,_?(d.isHydrating=!1,d.activeBranch=m):u(m,i,d),d.deps=0,d.effects.length=0,d.hiddenContainer=c("div"),y?(l(null,h,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0?d.resolve():(l(p,f,n,r,i,null,s,o,a),Ol(d,f))):p&&Ii(h,p)?(l(p,h,n,r,i,d,s,o,a),d.resolve(!0)):(l(null,h,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0&&d.resolve()));else if(p&&Ii(h,p))l(p,h,n,r,i,d,s,o,a),Ol(d,h);else if(Gc(e,"onPending"),d.pendingBranch=h,d.pendingId++,l(null,h,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0)d.resolve();else{const{timeout:v,pendingId:b}=d;v>0?setTimeout(()=>{d.pendingId===b&&d.fallback(f)},v):v===0&&d.fallback(f)}}function F0(t,e,n,r,i,s,o,a,l,u,c=!1){const{p:d,m:h,um:f,n:p,o:{parentNode:m,remove:y}}=u;let _;const v=EM(t);v&&e!=null&&e.pendingBranch&&(_=e.pendingId,e.deps++);const b=t.props?Ef(t.props.timeout):void 0,g={vnode:t,parent:e,parentComponent:n,isSVG:o,container:r,hiddenContainer:i,anchor:s,deps:0,pendingId:0,timeout:typeof b=="number"?b:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(w=!1,T=!1){const{vnode:M,activeBranch:x,pendingBranch:A,pendingId:S,effects:N,parentComponent:U,container:C}=g;let H=!1;if(g.isHydrating)g.isHydrating=!1;else if(!w){H=x&&A.transition&&A.transition.mode==="out-in",H&&(x.transition.afterLeave=()=>{S===g.pendingId&&(h(A,C,W,0),Cf(N))});let{anchor:W}=g;x&&(W=p(x),f(x,U,g,!0)),H||h(A,C,W,0)}Ol(g,A),g.pendingBranch=null,g.isInFallback=!1;let O=g.parent,R=!1;for(;O;){if(O.pendingBranch){O.effects.push(...N),R=!0;break}O=O.parent}!R&&!H&&Cf(N),g.effects=[],v&&e&&e.pendingBranch&&_===e.pendingId&&(e.deps--,e.deps===0&&!T&&e.resolve()),Gc(M,"onResolve")},fallback(w){if(!g.pendingBranch)return;const{vnode:T,activeBranch:M,parentComponent:x,container:A,isSVG:S}=g;Gc(T,"onFallback");const N=p(M),U=()=>{g.isInFallback&&(d(null,w,A,N,x,null,S,a,l),Ol(g,w))},C=w.transition&&w.transition.mode==="out-in";C&&(M.transition.afterLeave=U),g.isInFallback=!0,f(M,x,null,!0),C||U()},move(w,T,M){g.activeBranch&&h(g.activeBranch,w,T,M),g.container=w},next(){return g.activeBranch&&p(g.activeBranch)},registerDep(w,T){const M=!!g.pendingBranch;M&&g.deps++;const x=w.vnode.el;w.asyncDep.catch(A=>{Ba(A,w,0)}).then(A=>{if(w.isUnmounted||g.isUnmounted||g.pendingId!==w.suspenseId)return;w.asyncResolved=!0;const{vnode:S}=w;Lv(w,A,!1),x&&(S.el=x);const N=!x&&w.subTree.el;T(w,S,m(x||w.subTree.el),x?null:p(w.subTree),g,o,l),N&&y(N),L0(w,S.el),M&&--g.deps===0&&g.resolve()})},unmount(w,T){g.isUnmounted=!0,g.activeBranch&&f(g.activeBranch,n,w,T),g.pendingBranch&&f(g.pendingBranch,n,w,T)}};return g}function _M(t,e,n,r,i,s,o,a,l){const u=e.suspense=F0(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),c=l(t,u.pendingBranch=e.ssContent,n,u,s,o);return u.deps===0&&u.resolve(!1,!0),c}function TM(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=V_(r?n.default:n),t.ssFallback=r?V_(n.fallback):ae(vr)}function V_(t){let e;if(nt(t)){const n=Ea&&t._c;n&&(t._d=!1,D()),t=t(),n&&(t._d=!0,e=Br,aI())}return Ve(t)&&(t=dM(t)),t=Jr(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function DC(t,e){e&&e.pendingBranch?Ve(t)?e.effects.push(...t):e.effects.push(t):Cf(t)}function Ol(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t,i=n.el=e.el;r&&r.subTree===n&&(r.vnode.el=i,L0(r,i))}function EM(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}function RC(t,e){return kd(t,null,e)}function OC(t,e){return kd(t,null,{flush:"post"})}function SM(t,e){return kd(t,null,{flush:"sync"})}const yh={};function pn(t,e,n){return kd(t,e,n)}function kd(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Yt){var a;const l=Np()===((a=Pn)==null?void 0:a.scope)?Pn:null;let u,c=!1,d=!1;if(zt(t)?(u=()=>t.value,c=jc(t)):Xi(t)?(u=()=>t,r=!0):Ve(t)?(d=!0,c=t.some(g=>Xi(g)||jc(g)),u=()=>t.map(g=>{if(zt(g))return g.value;if(Xi(g))return ra(g);if(nt(g))return Ss(g,l,2)})):nt(t)?e?u=()=>Ss(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return h&&h(),ni(t,l,3,[f])}:u=Pi,e&&r){const g=u;u=()=>ra(g())}let h,f=g=>{h=v.onStop=()=>{Ss(g,l,4)}},p;if(Gl)if(f=Pi,e?n&&ni(e,l,3,[u(),d?[]:void 0,f]):u(),i==="sync"){const g=gI();p=g.__watcherHandles||(g.__watcherHandles=[])}else return Pi;let m=d?new Array(t.length).fill(yh):yh;const y=()=>{if(v.active)if(e){const g=v.run();(r||c||(d?g.some((w,T)=>Eo(w,m[T])):Eo(g,m)))&&(h&&h(),ni(e,l,3,[g,m===yh?void 0:d&&m[0]===yh?[]:m,f]),m=g)}else v.run()};y.allowRecurse=!!e;let _;i==="sync"?_=y:i==="post"?_=()=>Xn(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),_=()=>Fp(y));const v=new Wl(u,_);e?n?y():m=v.run():i==="post"?Xn(v.run.bind(v),l&&l.suspense):v.run();const b=()=>{v.stop(),l&&l.scope&&E0(l.scope.effects,v)};return p&&p.push(b),b}function CM(t,e,n){const r=this.proxy,i=dn(t)?t.includes(".")?NC(r,t):()=>r[t]:t.bind(r,r);let s;nt(e)?s=e:(s=e.handler,n=e);const o=Pn;Ao(this);const a=kd(i,s.bind(r),n);return o?Ao(o):fo(),a}function NC(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function ra(t,e){if(!qt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),zt(t))ra(t.value,e);else if(Ve(t))for(let n=0;n<t.length;n++)ra(t[n],e);else if(Va(t)||Pl(t))t.forEach(n=>{ra(n,e)});else if(tC(t))for(const n in t)ra(t[n],e);return t}function Ji(t,e){const n=Hn;if(n===null)return t;const r=Yp(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,u=Yt]=e[s];o&&(nt(o)&&(o={mounted:o,updated:o}),o.deep&&ra(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function Vi(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(yu(),ni(l,n,8,[t.el,a,t,e]),wu())}}const Js=Symbol("_leaveCb"),wh=Symbol("_enterCb");function V0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return an(()=>{t.isMounted=!0}),Pd(()=>{t.isUnmounting=!0}),t}const li=[Function,Array],B0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:li,onEnter:li,onAfterEnter:li,onEnterCancelled:li,onBeforeLeave:li,onLeave:li,onAfterLeave:li,onLeaveCancelled:li,onBeforeAppear:li,onAppear:li,onAfterAppear:li,onAppearCancelled:li},IM={name:"BaseTransition",props:B0,setup(t,{slots:e}){const n=ls(),r=V0();let i;return()=>{const s=e.default&&jp(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==vr){o=m;break}}const a=ft(t),{mode:l}=a;if(r.isLeaving)return eg(o);const u=B_(o);if(!u)return eg(o);const c=Yl(u,a,r,n);_a(u,c);const d=n.subTree,h=d&&B_(d);let f=!1;const{getTransitionKey:p}=u.type;if(p){const m=p();i===void 0?i=m:m!==i&&(i=m,f=!0)}if(h&&h.type!==vr&&(!Ii(u,h)||f)){const m=Yl(h,a,r,n);if(_a(h,m),l==="out-in")return r.isLeaving=!0,m.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},eg(o);l==="in-out"&&u.type!==vr&&(m.delayLeave=(y,_,v)=>{const b=LC(r,h);b[String(h.key)]=h,y[Js]=()=>{_(),y[Js]=void 0,delete c.delayedLeave},c.delayedLeave=v})}return o}}},MC=IM;function LC(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Yl(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:h,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:y,onAfterAppear:_,onAppearCancelled:v}=e,b=String(t.key),g=LC(n,t),w=(x,A)=>{x&&ni(x,r,9,A)},T=(x,A)=>{const S=A[1];w(x,A),Ve(x)?x.every(N=>N.length<=1)&&S():x.length<=1&&S()},M={mode:s,persisted:o,beforeEnter(x){let A=a;if(!n.isMounted)if(i)A=m||a;else return;x[Js]&&x[Js](!0);const S=g[b];S&&Ii(t,S)&&S.el[Js]&&S.el[Js](),w(A,[x])},enter(x){let A=l,S=u,N=c;if(!n.isMounted)if(i)A=y||l,S=_||u,N=v||c;else return;let U=!1;const C=x[wh]=H=>{U||(U=!0,H?w(N,[x]):w(S,[x]),M.delayedLeave&&M.delayedLeave(),x[wh]=void 0)};A?T(A,[x,C]):C()},leave(x,A){const S=String(t.key);if(x[wh]&&x[wh](!0),n.isUnmounting)return A();w(d,[x]);let N=!1;const U=x[Js]=C=>{N||(N=!0,A(),C?w(p,[x]):w(f,[x]),x[Js]=void 0,g[S]===t&&delete g[S])};g[S]=t,h?T(h,[x,U]):U()},clone(x){return Yl(x,e,n,r)}};return M}function eg(t){if(xd(t))return t=is(t),t.children=null,t}function B_(t){return xd(t)?t.children?t.children[0]:void 0:t}function _a(t,e){t.shapeFlag&6&&t.component?_a(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function jp(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Ae?(o.patchFlag&128&&i++,r=r.concat(jp(o.children,e,a))):(e||o.type!==vr)&&r.push(a!=null?is(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ie(t,e){return nt(t)?(()=>cn({name:t.name},e,{setup:t}))():t}const ca=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function AM(t){nt(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,timeout:s,suspensible:o=!0,onError:a}=t;let l=null,u,c=0;const d=()=>(c++,l=null,h()),h=()=>{let f;return l||(f=l=e().catch(p=>{if(p=p instanceof Error?p:new Error(String(p)),a)return new Promise((m,y)=>{a(p,()=>m(d()),()=>y(p),c+1)});throw p}).then(p=>f!==l&&l?l:(p&&(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),u=p,p)))};return Ie({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return u},setup(){const f=Pn;if(u)return()=>tg(u,f);const p=v=>{l=null,Ba(v,f,13,!r)};if(o&&f.suspense||Gl)return h().then(v=>()=>tg(v,f)).catch(v=>(p(v),()=>r?ae(r,{error:v}):null));const m=ue(!1),y=ue(),_=ue(!!i);return i&&setTimeout(()=>{_.value=!1},i),s!=null&&setTimeout(()=>{if(!m.value&&!y.value){const v=new Error(`Async component timed out after ${s}ms.`);p(v),y.value=v}},s),h().then(()=>{m.value=!0,f.parent&&xd(f.parent.vnode)&&Fp(f.parent.update)}).catch(v=>{p(v),y.value=v}),()=>{if(m.value&&u)return tg(u,f);if(y.value&&r)return ae(r,{error:y.value});if(n&&!_.value)return ae(n)}}})}function tg(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=ae(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const xd=t=>t.type.__isKeepAlive,kM={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=ls(),r=n.ctx;if(!r.renderer)return()=>{const v=e.default&&e.default();return v&&v.length===1?v[0]:v};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:d}}}=r,h=d("div");r.activate=(v,b,g,w,T)=>{const M=v.component;u(v,b,g,0,a),l(M.vnode,v,b,g,M,a,w,v.slotScopeIds,T),Xn(()=>{M.isDeactivated=!1,M.a&&Dl(M.a);const x=v.props&&v.props.onVnodeMounted;x&&Ur(x,M.parent,v)},a)},r.deactivate=v=>{const b=v.component;u(v,h,null,1,a),Xn(()=>{b.da&&Dl(b.da);const g=v.props&&v.props.onVnodeUnmounted;g&&Ur(g,b.parent,v),b.isDeactivated=!0},a)};function f(v){ng(v),c(v,n,a,!0)}function p(v){i.forEach((b,g)=>{const w=Uv(b.type);w&&(!v||!v(w))&&m(g)})}function m(v){const b=i.get(v);!o||!Ii(b,o)?f(b):o&&ng(o),i.delete(v),s.delete(v)}pn(()=>[t.include,t.exclude],([v,b])=>{v&&p(g=>ec(v,g)),b&&p(g=>!ec(b,g))},{flush:"post",deep:!0});let y=null;const _=()=>{y!=null&&i.set(y,rg(n.subTree))};return an(_),Wp(_),Pd(()=>{i.forEach(v=>{const{subTree:b,suspense:g}=n,w=rg(b);if(v.type===w.type&&v.key===w.key){ng(w);const T=w.component.da;T&&Xn(T,g);return}f(v)})}),()=>{if(y=null,!e.default)return null;const v=e.default(),b=v[0];if(v.length>1)return o=null,v;if(!Io(b)||!(b.shapeFlag&4)&&!(b.shapeFlag&128))return o=null,b;let g=rg(b);const w=g.type,T=Uv(ca(g)?g.type.__asyncResolved||{}:w),{include:M,exclude:x,max:A}=t;if(M&&(!T||!ec(M,T))||x&&T&&ec(x,T))return o=g,b;const S=g.key==null?w:g.key,N=i.get(S);return g.el&&(g=is(g),b.shapeFlag&128&&(b.ssContent=g)),y=S,N?(g.el=N.el,g.component=N.component,g.transition&&_a(g,g.transition),g.shapeFlag|=512,s.delete(S),s.add(S)):(s.add(S),A&&s.size>parseInt(A,10)&&m(s.values().next().value)),g.shapeFlag|=256,o=g,PC(b.type)?b:g}}},xM=kM;function ec(t,e){return Ve(t)?t.some(n=>ec(n,e)):dn(t)?t.split(",").includes(e):cN(t)?t.test(e):!1}function $C(t,e){FC(t,"a",e)}function UC(t,e){FC(t,"da",e)}function FC(t,e,n=Pn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Hp(e,r,n),n){let i=n.parent;for(;i&&i.parent;)xd(i.parent.vnode)&&PM(r,e,n,i),i=i.parent}}function PM(t,e,n,r){const i=Hp(e,t,r,!0);ja(()=>{E0(r[e],i)},n)}function ng(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function rg(t){return t.shapeFlag&128?t.ssContent:t}function Hp(t,e,n=Pn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;yu(),Ao(n);const a=ni(e,n,t,o);return fo(),wu(),a});return r?i.unshift(s):i.push(s),s}}const $s=t=>(e,n=Pn)=>(!Gl||t==="sp")&&Hp(t,(...r)=>e(...r),n),VC=$s("bm"),an=$s("m"),j0=$s("bu"),Wp=$s("u"),Pd=$s("bum"),ja=$s("um"),BC=$s("sp"),jC=$s("rtg"),HC=$s("rtc");function WC(t,e=Pn){Hp("ec",t,e)}function ut(t,e,n,r){let i;const s=n&&n[r];if(Ve(t)||dn(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(qt(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];i[a]=e(t[u],u,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function nr(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Ve(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function Pe(t,e,n={},r,i){if(Hn.isCE||Hn.parent&&ca(Hn.parent)&&Hn.parent.isCE)return e!=="default"&&(n.name=e),ae("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),D();const o=s&&KC(s(n)),a=ve(Ae,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function KC(t){return t.some(e=>Io(e)?!(e.type===vr||e.type===Ae&&!KC(e.children)):!0)?t:null}function DM(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:gc(r)]=t[r];return n}const xv=t=>t?dI(t)?Yp(t)||t.proxy:xv(t.parent):null,vc=cn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>xv(t.parent),$root:t=>xv(t.root),$emit:t=>t.emit,$options:t=>H0(t),$forceUpdate:t=>t.f||(t.f=()=>Fp(t.update)),$nextTick:t=>t.n||(t.n=Rr.bind(t.proxy)),$watch:t=>CM.bind(t)}),ig=(t,e)=>t!==Yt&&!t.__isScriptSetup&&kt(t,e),Pv={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(ig(r,e))return o[e]=1,r[e];if(i!==Yt&&kt(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&kt(u,e))return o[e]=3,s[e];if(n!==Yt&&kt(n,e))return o[e]=4,n[e];Dv&&(o[e]=0)}}const c=vc[e];let d,h;if(c)return e==="$attrs"&&Yr(t,"get",e),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Yt&&kt(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,kt(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return ig(i,e)?(i[e]=n,!0):r!==Yt&&kt(r,e)?(r[e]=n,!0):kt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Yt&&kt(t,o)||ig(e,o)||(a=s[0])&&kt(a,o)||kt(r,o)||kt(vc,o)||kt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:kt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},RM=cn({},Pv,{get(t,e){if(e!==Symbol.unscopables)return Pv.get(t,e,t)},has(t,e){return e[0]!=="_"&&!mN(e)}});function OM(){return null}function NM(){return null}function MM(t){}function LM(t){}function $M(){return null}function UM(){}function FM(t,e){return null}function No(){return YC().slots}function VM(){return YC().attrs}function BM(t,e,n){const r=ls();if(n&&n.local){const i=ue(t[e]);return pn(()=>t[e],s=>i.value=s),pn(i,s=>{s!==t[e]&&r.emit(`update:${e}`,s)}),i}else return{__v_isRef:!0,get value(){return t[e]},set value(i){r.emit(`update:${e}`,i)}}}function YC(){const t=ls();return t.setupContext||(t.setupContext=pI(t))}function zc(t){return Ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function jM(t,e){const n=zc(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?Ve(i)||nt(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function HM(t,e){return!t||!e?t||e:Ve(t)&&Ve(e)?t.concat(e):cn({},zc(t),zc(e))}function WM(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function KM(t){const e=ls();let n=t();return fo(),S0(n)&&(n=n.catch(r=>{throw Ao(e),r})),[n,()=>Ao(e)]}let Dv=!0;function YM(t){const e=H0(t),n=t.proxy,r=t.ctx;Dv=!1,e.beforeCreate&&j_(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:m,deactivated:y,beforeDestroy:_,beforeUnmount:v,destroyed:b,unmounted:g,render:w,renderTracked:T,renderTriggered:M,errorCaptured:x,serverPrefetch:A,expose:S,inheritAttrs:N,components:U,directives:C,filters:H}=e;if(u&&GM(u,r,null),o)for(const W in o){const X=o[W];nt(X)&&(r[W]=X.bind(n))}if(i){const W=i.call(n,n);qt(W)&&(t.data=Ln(W))}if(Dv=!0,s)for(const W in s){const X=s[W],$=nt(X)?X.bind(n,n):nt(X.get)?X.get.bind(n,n):Pi,I=!nt(X)&&nt(X.set)?X.set.bind(n):Pi,Z=re({get:$,set:I});Object.defineProperty(r,W,{enumerable:!0,configurable:!0,get:()=>Z.value,set:ie=>Z.value=ie})}if(a)for(const W in a)GC(a[W],r,n,W);if(l){const W=nt(l)?l.call(n):l;Reflect.ownKeys(W).forEach(X=>{Nl(X,W[X])})}c&&j_(c,t,"c");function R(W,X){Ve(X)?X.forEach($=>W($.bind(n))):X&&W(X.bind(n))}if(R(VC,d),R(an,h),R(j0,f),R(Wp,p),R($C,m),R(UC,y),R(WC,x),R(HC,T),R(jC,M),R(Pd,v),R(ja,g),R(BC,A),Ve(S))if(S.length){const W=t.exposed||(t.exposed={});S.forEach(X=>{Object.defineProperty(W,X,{get:()=>n[X],set:$=>n[X]=$})})}else t.exposed||(t.exposed={});w&&t.render===Pi&&(t.render=w),N!=null&&(t.inheritAttrs=N),U&&(t.components=U),C&&(t.directives=C)}function GM(t,e,n=Pi){Ve(t)&&(t=Rv(t));for(const r in t){const i=t[r];let s;qt(i)?"default"in i?s=Pr(i.from||r,i.default,!0):s=Pr(i.from||r):s=Pr(i),zt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function j_(t,e,n){ni(Ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function GC(t,e,n,r){const i=r.includes(".")?NC(n,r):()=>n[r];if(dn(t)){const s=e[t];nt(s)&&pn(i,s)}else if(nt(t))pn(i,t.bind(n));else if(qt(t))if(Ve(t))t.forEach(s=>GC(s,e,n,r));else{const s=nt(t.handler)?t.handler.bind(n):e[t.handler];nt(s)&&pn(i,s,t)}}function H0(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>Af(l,u,o,!0)),Af(l,e,o)),qt(e)&&s.set(e,l),l}function Af(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Af(t,s,n,!0),i&&i.forEach(o=>Af(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=zM[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const zM={data:H_,props:W_,emits:W_,methods:tc,computed:tc,beforeCreate:Cr,created:Cr,beforeMount:Cr,mounted:Cr,beforeUpdate:Cr,updated:Cr,beforeDestroy:Cr,beforeUnmount:Cr,destroyed:Cr,unmounted:Cr,activated:Cr,deactivated:Cr,errorCaptured:Cr,serverPrefetch:Cr,components:tc,directives:tc,watch:QM,provide:H_,inject:qM};function H_(t,e){return e?t?function(){return cn(nt(t)?t.call(this,this):t,nt(e)?e.call(this,this):e)}:e:t}function qM(t,e){return tc(Rv(t),Rv(e))}function Rv(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Cr(t,e){return t?[...new Set([].concat(t,e))]:e}function tc(t,e){return t?cn(Object.create(null),t,e):e}function W_(t,e){return t?Ve(t)&&Ve(e)?[...new Set([...t,...e])]:cn(Object.create(null),zc(t),zc(e??{})):e}function QM(t,e){if(!t)return e;if(!e)return t;const n=cn(Object.create(null),t);for(const r in e)n[r]=Cr(t[r],e[r]);return n}function zC(){return{app:null,config:{isNativeTag:aN,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let XM=0;function JM(t,e){return function(r,i=null){nt(r)||(r=cn({},r)),i!=null&&!qt(i)&&(i=null);const s=zC(),o=new WeakSet;let a=!1;const l=s.app={_uid:XM++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:yI,get config(){return s.config},set config(u){},use(u,...c){return o.has(u)||(u&&nt(u.install)?(o.add(u),u.install(l,...c)):nt(u)&&(o.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,d){if(!a){const h=ae(r,i);return h.appContext=s,c&&e?e(h,u):t(h,u,d),a=!0,l._container=u,u.__vue_app__=l,Yp(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){qc=l;try{return u()}finally{qc=null}}};return l}}let qc=null;function Nl(t,e){if(Pn){let n=Pn.provides;const r=Pn.parent&&Pn.parent.provides;r===n&&(n=Pn.provides=Object.create(r)),n[t]=e}}function Pr(t,e,n=!1){const r=Pn||Hn;if(r||qc){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:qc._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&nt(e)?e.call(r&&r.proxy):e}}function qC(){return!!(Pn||Hn||qc)}function ZM(t,e,n,r=!1){const i={},s={};_f(s,Kp,1),t.propsDefaults=Object.create(null),QC(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:vC(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function e2(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=ft(i),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let h=c[d];if(Vp(t.emitsOptions,h))continue;const f=e[h];if(l)if(kt(s,h))f!==s[h]&&(s[h]=f,u=!0);else{const p=Wr(h);i[p]=Ov(l,a,p,f,t,!1)}else f!==s[h]&&(s[h]=f,u=!0)}}}else{QC(t,e,i,s)&&(u=!0);let c;for(const d in a)(!e||!kt(e,d)&&((c=di(d))===d||!kt(e,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(i[d]=Ov(l,a,d,void 0,t,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!kt(e,d))&&(delete s[d],u=!0)}u&&Es(t,"set","$attrs")}function QC(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(mc(l))continue;const u=e[l];let c;i&&kt(i,c=Wr(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:Vp(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=ft(n),u=a||Yt;for(let c=0;c<s.length;c++){const d=s[c];n[d]=Ov(i,l,d,u[d],t,!kt(u,d))}}return o}function Ov(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=kt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&nt(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(Ao(i),r=u[n]=l.call(null,e),fo())}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===di(n))&&(r=!0))}return r}function XC(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!nt(t)){const c=d=>{l=!0;const[h,f]=XC(d,e,!0);cn(o,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return qt(t)&&r.set(t,xl),xl;if(Ve(s))for(let c=0;c<s.length;c++){const d=Wr(s[c]);K_(d)&&(o[d]=Yt)}else if(s)for(const c in s){const d=Wr(c);if(K_(d)){const h=s[c],f=o[d]=Ve(h)||nt(h)?{type:h}:cn({},h);if(f){const p=z_(Boolean,f.type),m=z_(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||kt(f,"default"))&&a.push(d)}}}const u=[o,a];return qt(t)&&r.set(t,u),u}function K_(t){return t[0]!=="$"}function Y_(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function G_(t,e){return Y_(t)===Y_(e)}function z_(t,e){return Ve(e)?e.findIndex(n=>G_(n,t)):nt(e)&&G_(e,t)?0:-1}const JC=t=>t[0]==="_"||t==="$stable",W0=t=>Ve(t)?t.map(Jr):[Jr(t)],t2=(t,e,n)=>{if(e._n)return e;const r=ye((...i)=>W0(e(...i)),n);return r._c=!1,r},ZC=(t,e,n)=>{const r=t._ctx;for(const i in t){if(JC(i))continue;const s=t[i];if(nt(s))e[i]=t2(i,s,r);else if(s!=null){const o=W0(s);e[i]=()=>o}}},eI=(t,e)=>{const n=W0(e);t.slots.default=()=>n},n2=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=ft(e),_f(e,"_",n)):ZC(e,t.slots={})}else t.slots={},e&&eI(t,e);_f(t.slots,Kp,1)},r2=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Yt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(cn(i,e),!n&&a===1&&delete i._):(s=!e.$stable,ZC(e,i)),o=e}else e&&(eI(t,e),o={default:1});if(s)for(const a in i)!JC(a)&&o[a]==null&&delete i[a]};function kf(t,e,n,r,i=!1){if(Ve(t)){t.forEach((h,f)=>kf(h,e&&(Ve(e)?e[f]:e),n,r,i));return}if(ca(r)&&!i)return;const s=r.shapeFlag&4?Yp(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,u=e&&e.r,c=a.refs===Yt?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(dn(u)?(c[u]=null,kt(d,u)&&(d[u]=null)):zt(u)&&(u.value=null)),nt(l))Ss(l,a,12,[o,c]);else{const h=dn(l),f=zt(l);if(h||f){const p=()=>{if(t.f){const m=h?kt(d,l)?d[l]:c[l]:l.value;i?Ve(m)&&E0(m,s):Ve(m)?m.includes(s)||m.push(s):h?(c[l]=[s],kt(d,l)&&(d[l]=c[l])):(l.value=[s],t.k&&(c[t.k]=l.value))}else h?(c[l]=o,kt(d,l)&&(d[l]=o)):f&&(l.value=o,t.k&&(c[t.k]=o))};o?(p.id=-1,Xn(p,n)):p()}}}let Hs=!1;const bh=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",_h=t=>t.nodeType===8;function i2(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:u}}=t,c=(b,g)=>{if(!g.hasChildNodes()){n(null,b,g),If(),g._vnode=b;return}Hs=!1,d(g.firstChild,b,null,null,null),If(),g._vnode=b,Hs&&console.error("Hydration completed but contains mismatches.")},d=(b,g,w,T,M,x=!1)=>{const A=_h(b)&&b.data==="[",S=()=>m(b,g,w,T,M,A),{type:N,ref:U,shapeFlag:C,patchFlag:H}=g;let O=b.nodeType;g.el=b,H===-2&&(x=!1,g.dynamicChildren=null);let R=null;switch(N){case Ta:O!==3?g.children===""?(l(g.el=i(""),o(b),b),R=b):R=S():(b.data!==g.children&&(Hs=!0,b.data=g.children),R=s(b));break;case vr:v(b)?(R=s(b),_(g.el=b.content.firstChild,b,w)):O!==8||A?R=S():R=s(b);break;case da:if(A&&(b=s(b),O=b.nodeType),O===1||O===3){R=b;const W=!g.children.length;for(let X=0;X<g.staticCount;X++)W&&(g.children+=R.nodeType===1?R.outerHTML:R.data),X===g.staticCount-1&&(g.anchor=R),R=s(R);return A?s(R):R}else S();break;case Ae:A?R=p(b,g,w,T,M,x):R=S();break;default:if(C&1)(O!==1||g.type.toLowerCase()!==b.tagName.toLowerCase())&&!v(b)?R=S():R=h(b,g,w,T,M,x);else if(C&6){g.slotScopeIds=M;const W=o(b);if(A?R=y(b):_h(b)&&b.data==="teleport start"?R=y(b,b.data,"teleport end"):R=s(b),e(g,W,null,w,T,bh(W),x),ca(g)){let X;A?(X=ae(Ae),X.anchor=R?R.previousSibling:W.lastChild):X=b.nodeType===3?Qe(""):ae("div"),X.el=b,g.component.subTree=X}}else C&64?O!==8?R=S():R=g.type.hydrate(b,g,w,T,M,x,t,f):C&128&&(R=g.type.hydrate(b,g,w,T,bh(o(b)),M,x,t,d))}return U!=null&&kf(U,null,T,g),R},h=(b,g,w,T,M,x)=>{x=x||!!g.dynamicChildren;const{type:A,props:S,patchFlag:N,shapeFlag:U,dirs:C,transition:H}=g,O=A==="input"&&C||A==="option";if(O||N!==-1){if(C&&Vi(g,null,w,"created"),S)if(O||!x||N&48)for(const X in S)(O&&X.endsWith("value")||Sd(X)&&!mc(X))&&r(b,X,null,S[X],!1,void 0,w);else S.onClick&&r(b,"onClick",null,S.onClick,!1,void 0,w);let R;(R=S&&S.onVnodeBeforeMount)&&Ur(R,w,g);let W=!1;if(v(b)){W=iI(T,H)&&w&&w.vnode.props&&w.vnode.props.appear;const X=b.content.firstChild;W&&H.beforeEnter(X),_(X,b,w),g.el=b=X}if(C&&Vi(g,null,w,"beforeMount"),((R=S&&S.onVnodeMounted)||C||W)&&DC(()=>{R&&Ur(R,w,g),W&&H.enter(b),C&&Vi(g,null,w,"mounted")},T),U&16&&!(S&&(S.innerHTML||S.textContent))){let X=f(b.firstChild,g,b,w,T,M,x);for(;X;){Hs=!0;const $=X;X=X.nextSibling,a($)}}else U&8&&b.textContent!==g.children&&(Hs=!0,b.textContent=g.children)}return b.nextSibling},f=(b,g,w,T,M,x,A)=>{A=A||!!g.dynamicChildren;const S=g.children,N=S.length;for(let U=0;U<N;U++){const C=A?S[U]:S[U]=Jr(S[U]);if(b)b=d(b,C,T,M,x,A);else{if(C.type===Ta&&!C.children)continue;Hs=!0,n(null,C,w,null,T,M,bh(w),x)}}return b},p=(b,g,w,T,M,x)=>{const{slotScopeIds:A}=g;A&&(M=M?M.concat(A):A);const S=o(b),N=f(s(b),g,S,w,T,M,x);return N&&_h(N)&&N.data==="]"?s(g.anchor=N):(Hs=!0,l(g.anchor=u("]"),S,N),N)},m=(b,g,w,T,M,x)=>{if(Hs=!0,g.el=null,x){const N=y(b);for(;;){const U=s(b);if(U&&U!==N)a(U);else break}}const A=s(b),S=o(b);return a(b),n(null,g,S,A,w,T,bh(S),M),A},y=(b,g="[",w="]")=>{let T=0;for(;b;)if(b=s(b),b&&_h(b)&&(b.data===g&&T++,b.data===w)){if(T===0)return s(b);T--}return b},_=(b,g,w)=>{const T=g.parentNode;T&&T.replaceChild(b,g);let M=w;for(;M;)M.vnode.el===g&&(M.vnode.el=M.subTree.el=b),M=M.parent},v=b=>b.nodeType===1&&b.tagName.toLowerCase()==="template";return[c,d]}const Xn=DC;function tI(t){return rI(t)}function nI(t){return rI(t,i2)}function rI(t,e){const n=Sv();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:h,setScopeId:f=Pi,insertStaticContent:p}=t,m=(E,P,F,z=null,he=null,fe=null,de=!1,te=null,G=!!P.dynamicChildren)=>{if(E===P)return;E&&!Ii(E,P)&&(z=q(E),ie(E,he,fe,!0),E=null),P.patchFlag===-2&&(G=!1,P.dynamicChildren=null);const{type:ce,ref:be,shapeFlag:Ce}=P;switch(ce){case Ta:y(E,P,F,z);break;case vr:_(E,P,F,z);break;case da:E==null&&v(P,F,z,de);break;case Ae:U(E,P,F,z,he,fe,de,te,G);break;default:Ce&1?w(E,P,F,z,he,fe,de,te,G):Ce&6?C(E,P,F,z,he,fe,de,te,G):(Ce&64||Ce&128)&&ce.process(E,P,F,z,he,fe,de,te,G,Y)}be!=null&&he&&kf(be,E&&E.ref,fe,P||E,!P)},y=(E,P,F,z)=>{if(E==null)r(P.el=a(P.children),F,z);else{const he=P.el=E.el;P.children!==E.children&&u(he,P.children)}},_=(E,P,F,z)=>{E==null?r(P.el=l(P.children||""),F,z):P.el=E.el},v=(E,P,F,z)=>{[E.el,E.anchor]=p(E.children,P,F,z,E.el,E.anchor)},b=({el:E,anchor:P},F,z)=>{let he;for(;E&&E!==P;)he=h(E),r(E,F,z),E=he;r(P,F,z)},g=({el:E,anchor:P})=>{let F;for(;E&&E!==P;)F=h(E),i(E),E=F;i(P)},w=(E,P,F,z,he,fe,de,te,G)=>{de=de||P.type==="svg",E==null?T(P,F,z,he,fe,de,te,G):A(E,P,he,fe,de,te,G)},T=(E,P,F,z,he,fe,de,te)=>{let G,ce;const{type:be,props:Ce,shapeFlag:Ne,transition:Te,dirs:Me}=E;if(G=E.el=o(E.type,fe,Ce&&Ce.is,Ce),Ne&8?c(G,E.children):Ne&16&&x(E.children,G,null,z,he,fe&&be!=="foreignObject",de,te),Me&&Vi(E,null,z,"created"),M(G,E,E.scopeId,de,z),Ce){for(const Q in Ce)Q!=="value"&&!mc(Q)&&s(G,Q,null,Ce[Q],fe,E.children,z,he,B);"value"in Ce&&s(G,"value",null,Ce.value),(ce=Ce.onVnodeBeforeMount)&&Ur(ce,z,E)}Me&&Vi(E,null,z,"beforeMount");const pt=iI(he,Te);pt&&Te.beforeEnter(G),r(G,P,F),((ce=Ce&&Ce.onVnodeMounted)||pt||Me)&&Xn(()=>{ce&&Ur(ce,z,E),pt&&Te.enter(G),Me&&Vi(E,null,z,"mounted")},he)},M=(E,P,F,z,he)=>{if(F&&f(E,F),z)for(let fe=0;fe<z.length;fe++)f(E,z[fe]);if(he){let fe=he.subTree;if(P===fe){const de=he.vnode;M(E,de,de.scopeId,de.slotScopeIds,he.parent)}}},x=(E,P,F,z,he,fe,de,te,G=0)=>{for(let ce=G;ce<E.length;ce++){const be=E[ce]=te?Zs(E[ce]):Jr(E[ce]);m(null,be,P,F,z,he,fe,de,te)}},A=(E,P,F,z,he,fe,de)=>{const te=P.el=E.el;let{patchFlag:G,dynamicChildren:ce,dirs:be}=P;G|=E.patchFlag&16;const Ce=E.props||Yt,Ne=P.props||Yt;let Te;F&&Ho(F,!1),(Te=Ne.onVnodeBeforeUpdate)&&Ur(Te,F,P,E),be&&Vi(P,E,F,"beforeUpdate"),F&&Ho(F,!0);const Me=he&&P.type!=="foreignObject";if(ce?S(E.dynamicChildren,ce,te,F,z,Me,fe):de||X(E,P,te,null,F,z,Me,fe,!1),G>0){if(G&16)N(te,P,Ce,Ne,F,z,he);else if(G&2&&Ce.class!==Ne.class&&s(te,"class",null,Ne.class,he),G&4&&s(te,"style",Ce.style,Ne.style,he),G&8){const pt=P.dynamicProps;for(let Q=0;Q<pt.length;Q++){const L=pt[Q],K=Ce[L],j=Ne[L];(j!==K||L==="value")&&s(te,L,K,j,he,E.children,F,z,B)}}G&1&&E.children!==P.children&&c(te,P.children)}else!de&&ce==null&&N(te,P,Ce,Ne,F,z,he);((Te=Ne.onVnodeUpdated)||be)&&Xn(()=>{Te&&Ur(Te,F,P,E),be&&Vi(P,E,F,"updated")},z)},S=(E,P,F,z,he,fe,de)=>{for(let te=0;te<P.length;te++){const G=E[te],ce=P[te],be=G.el&&(G.type===Ae||!Ii(G,ce)||G.shapeFlag&70)?d(G.el):F;m(G,ce,be,null,z,he,fe,de,!0)}},N=(E,P,F,z,he,fe,de)=>{if(F!==z){if(F!==Yt)for(const te in F)!mc(te)&&!(te in z)&&s(E,te,F[te],null,de,P.children,he,fe,B);for(const te in z){if(mc(te))continue;const G=z[te],ce=F[te];G!==ce&&te!=="value"&&s(E,te,ce,G,de,P.children,he,fe,B)}"value"in z&&s(E,"value",F.value,z.value)}},U=(E,P,F,z,he,fe,de,te,G)=>{const ce=P.el=E?E.el:a(""),be=P.anchor=E?E.anchor:a("");let{patchFlag:Ce,dynamicChildren:Ne,slotScopeIds:Te}=P;Te&&(te=te?te.concat(Te):Te),E==null?(r(ce,F,z),r(be,F,z),x(P.children,F,be,he,fe,de,te,G)):Ce>0&&Ce&64&&Ne&&E.dynamicChildren?(S(E.dynamicChildren,Ne,F,he,fe,de,te),(P.key!=null||he&&P===he.subTree)&&K0(E,P,!0)):X(E,P,F,be,he,fe,de,te,G)},C=(E,P,F,z,he,fe,de,te,G)=>{P.slotScopeIds=te,E==null?P.shapeFlag&512?he.ctx.activate(P,F,z,de,G):H(P,F,z,he,fe,de,G):O(E,P,G)},H=(E,P,F,z,he,fe,de)=>{const te=E.component=cI(E,z,he);if(xd(E)&&(te.ctx.renderer=Y),hI(te),te.asyncDep){if(he&&he.registerDep(te,R),!E.el){const G=te.subTree=ae(vr);_(null,G,P,F)}return}R(te,E,P,F,he,fe,de)},O=(E,P,F)=>{const z=P.component=E.component;if(pM(E,P,F))if(z.asyncDep&&!z.asyncResolved){W(z,P,F);return}else z.next=P,aM(z.update),z.update();else P.el=E.el,z.vnode=P},R=(E,P,F,z,he,fe,de)=>{const te=()=>{if(E.isMounted){let{next:be,bu:Ce,u:Ne,parent:Te,vnode:Me}=E,pt=be,Q;Ho(E,!1),be?(be.el=Me.el,W(E,be,de)):be=Me,Ce&&Dl(Ce),(Q=be.props&&be.props.onVnodeBeforeUpdate)&&Ur(Q,Te,be,Me),Ho(E,!0);const L=nf(E),K=E.subTree;E.subTree=L,m(K,L,d(K.el),q(K),E,he,fe),be.el=L.el,pt===null&&L0(E,L.el),Ne&&Xn(Ne,he),(Q=be.props&&be.props.onVnodeUpdated)&&Xn(()=>Ur(Q,Te,be,Me),he)}else{let be;const{el:Ce,props:Ne}=P,{bm:Te,m:Me,parent:pt}=E,Q=ca(P);if(Ho(E,!1),Te&&Dl(Te),!Q&&(be=Ne&&Ne.onVnodeBeforeMount)&&Ur(be,pt,P),Ho(E,!0),Ce&&Se){const L=()=>{E.subTree=nf(E),Se(Ce,E.subTree,E,he,null)};Q?P.type.__asyncLoader().then(()=>!E.isUnmounted&&L()):L()}else{const L=E.subTree=nf(E);m(null,L,F,z,E,he,fe),P.el=L.el}if(Me&&Xn(Me,he),!Q&&(be=Ne&&Ne.onVnodeMounted)){const L=P;Xn(()=>Ur(be,pt,L),he)}(P.shapeFlag&256||pt&&ca(pt.vnode)&&pt.vnode.shapeFlag&256)&&E.a&&Xn(E.a,he),E.isMounted=!0,P=F=z=null}},G=E.effect=new Wl(te,()=>Fp(ce),E.scope),ce=E.update=()=>G.run();ce.id=E.uid,Ho(E,!0),ce()},W=(E,P,F)=>{P.component=E;const z=E.vnode.props;E.vnode=P,E.next=null,e2(E,P.props,z,F),r2(E,P.children,F),yu(),$_(),wu()},X=(E,P,F,z,he,fe,de,te,G=!1)=>{const ce=E&&E.children,be=E?E.shapeFlag:0,Ce=P.children,{patchFlag:Ne,shapeFlag:Te}=P;if(Ne>0){if(Ne&128){I(ce,Ce,F,z,he,fe,de,te,G);return}else if(Ne&256){$(ce,Ce,F,z,he,fe,de,te,G);return}}Te&8?(be&16&&B(ce,he,fe),Ce!==ce&&c(F,Ce)):be&16?Te&16?I(ce,Ce,F,z,he,fe,de,te,G):B(ce,he,fe,!0):(be&8&&c(F,""),Te&16&&x(Ce,F,z,he,fe,de,te,G))},$=(E,P,F,z,he,fe,de,te,G)=>{E=E||xl,P=P||xl;const ce=E.length,be=P.length,Ce=Math.min(ce,be);let Ne;for(Ne=0;Ne<Ce;Ne++){const Te=P[Ne]=G?Zs(P[Ne]):Jr(P[Ne]);m(E[Ne],Te,F,null,he,fe,de,te,G)}ce>be?B(E,he,fe,!0,!1,Ce):x(P,F,z,he,fe,de,te,G,Ce)},I=(E,P,F,z,he,fe,de,te,G)=>{let ce=0;const be=P.length;let Ce=E.length-1,Ne=be-1;for(;ce<=Ce&&ce<=Ne;){const Te=E[ce],Me=P[ce]=G?Zs(P[ce]):Jr(P[ce]);if(Ii(Te,Me))m(Te,Me,F,null,he,fe,de,te,G);else break;ce++}for(;ce<=Ce&&ce<=Ne;){const Te=E[Ce],Me=P[Ne]=G?Zs(P[Ne]):Jr(P[Ne]);if(Ii(Te,Me))m(Te,Me,F,null,he,fe,de,te,G);else break;Ce--,Ne--}if(ce>Ce){if(ce<=Ne){const Te=Ne+1,Me=Te<be?P[Te].el:z;for(;ce<=Ne;)m(null,P[ce]=G?Zs(P[ce]):Jr(P[ce]),F,Me,he,fe,de,te,G),ce++}}else if(ce>Ne)for(;ce<=Ce;)ie(E[ce],he,fe,!0),ce++;else{const Te=ce,Me=ce,pt=new Map;for(ce=Me;ce<=Ne;ce++){const $e=P[ce]=G?Zs(P[ce]):Jr(P[ce]);$e.key!=null&&pt.set($e.key,ce)}let Q,L=0;const K=Ne-Me+1;let j=!1,se=0;const me=new Array(K);for(ce=0;ce<K;ce++)me[ce]=0;for(ce=Te;ce<=Ce;ce++){const $e=E[ce];if(L>=K){ie($e,he,fe,!0);continue}let et;if($e.key!=null)et=pt.get($e.key);else for(Q=Me;Q<=Ne;Q++)if(me[Q-Me]===0&&Ii($e,P[Q])){et=Q;break}et===void 0?ie($e,he,fe,!0):(me[et-Me]=ce+1,et>=se?se=et:j=!0,m($e,P[et],F,null,he,fe,de,te,G),L++)}const je=j?s2(me):xl;for(Q=je.length-1,ce=K-1;ce>=0;ce--){const $e=Me+ce,et=P[$e],Ut=$e+1<be?P[$e+1].el:z;me[ce]===0?m(null,et,F,Ut,he,fe,de,te,G):j&&(Q<0||ce!==je[Q]?Z(et,F,Ut,2):Q--)}}},Z=(E,P,F,z,he=null)=>{const{el:fe,type:de,transition:te,children:G,shapeFlag:ce}=E;if(ce&6){Z(E.component.subTree,P,F,z);return}if(ce&128){E.suspense.move(P,F,z);return}if(ce&64){de.move(E,P,F,Y);return}if(de===Ae){r(fe,P,F);for(let Ce=0;Ce<G.length;Ce++)Z(G[Ce],P,F,z);r(E.anchor,P,F);return}if(de===da){b(E,P,F);return}if(z!==2&&ce&1&&te)if(z===0)te.beforeEnter(fe),r(fe,P,F),Xn(()=>te.enter(fe),he);else{const{leave:Ce,delayLeave:Ne,afterLeave:Te}=te,Me=()=>r(fe,P,F),pt=()=>{Ce(fe,()=>{Me(),Te&&Te()})};Ne?Ne(fe,Me,pt):pt()}else r(fe,P,F)},ie=(E,P,F,z=!1,he=!1)=>{const{type:fe,props:de,ref:te,children:G,dynamicChildren:ce,shapeFlag:be,patchFlag:Ce,dirs:Ne}=E;if(te!=null&&kf(te,null,F,E,!0),be&256){P.ctx.deactivate(E);return}const Te=be&1&&Ne,Me=!ca(E);let pt;if(Me&&(pt=de&&de.onVnodeBeforeUnmount)&&Ur(pt,P,E),be&6)we(E.component,F,z);else{if(be&128){E.suspense.unmount(F,z);return}Te&&Vi(E,null,P,"beforeUnmount"),be&64?E.type.remove(E,P,F,he,Y,z):ce&&(fe!==Ae||Ce>0&&Ce&64)?B(ce,P,F,!1,!0):(fe===Ae&&Ce&384||!he&&be&16)&&B(G,P,F),z&&ee(E)}(Me&&(pt=de&&de.onVnodeUnmounted)||Te)&&Xn(()=>{pt&&Ur(pt,P,E),Te&&Vi(E,null,P,"unmounted")},F)},ee=E=>{const{type:P,el:F,anchor:z,transition:he}=E;if(P===Ae){V(F,z);return}if(P===da){g(E);return}const fe=()=>{i(F),he&&!he.persisted&&he.afterLeave&&he.afterLeave()};if(E.shapeFlag&1&&he&&!he.persisted){const{leave:de,delayLeave:te}=he,G=()=>de(F,fe);te?te(E.el,fe,G):G()}else fe()},V=(E,P)=>{let F;for(;E!==P;)F=h(E),i(E),E=F;i(P)},we=(E,P,F)=>{const{bum:z,scope:he,update:fe,subTree:de,um:te}=E;z&&Dl(z),he.stop(),fe&&(fe.active=!1,ie(de,E,P,F)),te&&Xn(te,P),Xn(()=>{E.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},B=(E,P,F,z=!1,he=!1,fe=0)=>{for(let de=fe;de<E.length;de++)ie(E[de],P,F,z,he)},q=E=>E.shapeFlag&6?q(E.component.subTree):E.shapeFlag&128?E.suspense.next():h(E.anchor||E.el),le=(E,P,F)=>{E==null?P._vnode&&ie(P._vnode,null,null,!0):m(P._vnode||null,E,P,null,null,null,F),$_(),If(),P._vnode=E},Y={p:m,um:ie,m:Z,r:ee,mt:H,mc:x,pc:X,pbc:S,n:q,o:t};let pe,Se;return e&&([pe,Se]=e(Y)),{render:le,hydrate:pe,createApp:JM(le,pe)}}function Ho({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function iI(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function K0(t,e,n=!1){const r=t.children,i=e.children;if(Ve(r)&&Ve(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Zs(i[s]),a.el=o.el),n||K0(o,a)),a.type===Ta&&(a.el=o.el)}}function s2(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const o2=t=>t.__isTeleport,yc=t=>t&&(t.disabled||t.disabled===""),q_=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Nv=(t,e)=>{const n=t&&t.to;return dn(n)?e?e(n):null:n},a2={__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,u){const{mc:c,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:m,createComment:y}}=u,_=yc(e.props);let{shapeFlag:v,children:b,dynamicChildren:g}=e;if(t==null){const w=e.el=m(""),T=e.anchor=m("");f(w,n,r),f(T,n,r);const M=e.target=Nv(e.props,p),x=e.targetAnchor=m("");M&&(f(x,M),o=o||q_(M));const A=(S,N)=>{v&16&&c(b,S,N,i,s,o,a,l)};_?A(n,T):M&&A(M,x)}else{e.el=t.el;const w=e.anchor=t.anchor,T=e.target=t.target,M=e.targetAnchor=t.targetAnchor,x=yc(t.props),A=x?n:T,S=x?w:M;if(o=o||q_(T),g?(h(t.dynamicChildren,g,A,i,s,o,a),K0(t,e,!0)):l||d(t,e,A,S,i,s,o,a,!1),_)x?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Th(e,n,w,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const N=e.target=Nv(e.props,p);N&&Th(e,N,null,u,0)}else x&&Th(e,T,M,u,1)}oI(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:d,props:h}=t;if(d&&s(c),o&&s(u),a&16){const f=o||!yc(h);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,n,f,!!m.dynamicChildren)}}},move:Th,hydrate:l2};function Th(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,d=s===2;if(d&&r(o,e,n),(!d||yc(c))&&l&16)for(let h=0;h<u.length;h++)i(u[h],e,n,2);d&&r(a,e,n)}function l2(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const c=e.target=Nv(e.props,l);if(c){const d=c._lpa||c.firstChild;if(e.shapeFlag&16)if(yc(e.props))e.anchor=u(o(t),e,a(t),n,r,i,s),e.targetAnchor=d;else{e.anchor=o(t);let h=d;for(;h;)if(h=o(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,c._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(d,e,c,n,r,i,s)}oI(e)}return e.anchor&&o(e.anchor)}const sI=a2;function oI(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Ae=Symbol.for("v-fgt"),Ta=Symbol.for("v-txt"),vr=Symbol.for("v-cmt"),da=Symbol.for("v-stc"),wc=[];let Br=null;function D(t=!1){wc.push(Br=t?null:[])}function aI(){wc.pop(),Br=wc[wc.length-1]||null}let Ea=1;function Mv(t){Ea+=t}function lI(t){return t.dynamicChildren=Ea>0?Br||xl:null,aI(),Ea>0&&Br&&Br.push(t),t}function J(t,e,n,r,i,s){return lI(ne(t,e,n,r,i,s,!0))}function ve(t,e,n,r,i){return lI(ae(t,e,n,r,i,!0))}function Io(t){return t?t.__v_isVNode===!0:!1}function Ii(t,e){return t.type===e.type&&t.key===e.key}function u2(t){}const Kp="__vInternal",uI=({key:t})=>t??null,rf=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?dn(t)||zt(t)||nt(t)?{i:Hn,r:t,k:e,f:!!n}:t:null);function ne(t,e=null,n=null,r=0,i=null,s=t===Ae?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&uI(e),ref:e&&rf(e),scopeId:Bp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Hn};return a?(Y0(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=dn(n)?8:16),Ea>0&&!o&&Br&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Br.push(l),l}const ae=c2;function c2(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===xC)&&(t=vr),Io(t)){const a=is(t,e,!0);return n&&Y0(a,n),Ea>0&&!s&&Br&&(a.shapeFlag&6?Br[Br.indexOf(t)]=a:Br.push(a)),a.patchFlag|=-2,a}if(y2(t)&&(t=t.__vccOpts),e){e=tr(e);let{class:a,style:l}=e;a&&!dn(a)&&(e.class=Le(a)),qt(l)&&(D0(l)&&!Ve(l)&&(l=cn({},l)),e.style=Nn(l))}const o=dn(t)?1:PC(t)?128:o2(t)?64:qt(t)?4:nt(t)?2:0;return ne(t,e,n,r,i,o,s,!0)}function tr(t){return t?D0(t)||Kp in t?cn({},t):t:null}function is(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?Ht(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&uI(a),ref:e&&e.ref?n&&i?Ve(i)?i.concat(rf(e)):[i,rf(e)]:rf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ae?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&is(t.ssContent),ssFallback:t.ssFallback&&is(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Qe(t=" ",e=0){return ae(Ta,null,t,e)}function d2(t,e){const n=ae(da,null,t);return n.staticCount=e,n}function oe(t="",e=!1){return e?(D(),ve(vr,null,t)):ae(vr,null,t)}function Jr(t){return t==null||typeof t=="boolean"?ae(vr):Ve(t)?ae(Ae,null,t.slice()):typeof t=="object"?Zs(t):ae(Ta,null,String(t))}function Zs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:is(t)}function Y0(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ve(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Y0(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Kp in e)?e._ctx=Hn:i===3&&Hn&&(Hn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else nt(e)?(e={default:e,_ctx:Hn},n=32):(e=String(e),r&64?(n=16,e=[Qe(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ht(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Le([e.class,r.class]));else if(i==="style")e.style=Nn([e.style,r.style]);else if(Sd(i)){const s=e[i],o=r[i];o&&s!==o&&!(Ve(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Ur(t,e,n,r=null){ni(t,e,7,[n,r])}const h2=zC();let f2=0;function cI(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||h2,s={uid:f2++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new I0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:XC(r,i),emitsOptions:IC(r,i),emit:null,emitted:null,propsDefaults:Yt,inheritAttrs:r.inheritAttrs,ctx:Yt,data:Yt,props:Yt,attrs:Yt,slots:Yt,refs:Yt,setupState:Yt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=uM.bind(null,s),t.ce&&t.ce(s),s}let Pn=null;const ls=()=>Pn||Hn;let G0,el,Q_="__VUE_INSTANCE_SETTERS__";(el=Sv()[Q_])||(el=Sv()[Q_]=[]),el.push(t=>Pn=t),G0=t=>{el.length>1?el.forEach(e=>e(t)):el[0](t)};const Ao=t=>{G0(t),t.scope.on()},fo=()=>{Pn&&Pn.scope.off(),G0(null)};function dI(t){return t.vnode.shapeFlag&4}let Gl=!1;function hI(t,e=!1){Gl=e;const{props:n,children:r}=t.vnode,i=dI(t);ZM(t,n,i,e),n2(t,r);const s=i?p2(t,e):void 0;return Gl=!1,s}function p2(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Id(new Proxy(t.ctx,Pv));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?pI(t):null;Ao(t),yu();const s=Ss(r,t,0,[t.props,i]);if(wu(),fo(),S0(s)){if(s.then(fo,fo),e)return s.then(o=>{Lv(t,o,e)}).catch(o=>{Ba(o,t,0)});t.asyncDep=s}else Lv(t,s,e)}else fI(t,e)}function Lv(t,e,n){nt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:qt(e)&&(t.setupState=N0(e)),fI(t,n)}let xf,$v;function m2(t){xf=t,$v=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RM))}}const g2=()=>!xf;function fI(t,e,n){const r=t.type;if(!t.render){if(!e&&xf&&!r.render){const i=r.template||H0(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=cn(cn({isCustomElement:s,delimiters:a},o),l);r.render=xf(i,u)}}t.render=r.render||Pi,$v&&$v(t)}{Ao(t),yu();try{YM(t)}finally{wu(),fo()}}}function v2(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Yr(t,"get","$attrs"),e[n]}}))}function pI(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return v2(t)},slots:t.slots,emit:t.emit,expose:e}}function Yp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(N0(Id(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in vc)return vc[n](t)},has(e,n){return n in e||n in vc}}))}function Uv(t,e=!0){return nt(t)?t.displayName||t.name:t.name||e&&t.__name}function y2(t){return nt(t)&&"__vccOpts"in t}const re=(t,e)=>nM(t,e,Gl);function Dd(t,e,n){const r=arguments.length;return r===2?qt(e)&&!Ve(e)?Io(e)?ae(t,null,[e]):ae(t,e):ae(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Io(n)&&(n=[n]),ae(t,e,n))}const mI=Symbol.for("v-scx"),gI=()=>Pr(mI);function w2(){}function b2(t,e,n,r){const i=n[r];if(i&&vI(i,t))return i;const s=e();return s.memo=t.slice(),n[r]=s}function vI(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Eo(n[r],e[r]))return!1;return Ea>0&&Br&&Br.push(t),!0}const yI="3.3.8",_2={createComponentInstance:cI,setupComponent:hI,renderComponentRoot:nf,setCurrentRenderingInstance:Yc,isVNode:Io,normalizeVNode:Jr},T2=_2,E2=null,S2=null,C2="http://www.w3.org/2000/svg",ea=typeof document<"u"?document:null,X_=ea&&ea.createElement("template"),I2={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?ea.createElementNS(C2,t):ea.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ea.createTextNode(t),createComment:t=>ea.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ea.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{X_.innerHTML=r?`<svg>${t}</svg>`:t;const a=X_.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ws="transition",Mu="animation",zl=Symbol("_vtc"),Us=(t,{slots:e})=>Dd(MC,bI(t),e);Us.displayName="Transition";const wI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},A2=Us.props=cn({},B0,wI),Wo=(t,e=[])=>{Ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},J_=t=>t?Ve(t)?t.some(e=>e.length>1):t.length>1:!1;function bI(t){const e={};for(const U in t)U in wI||(e[U]=t[U]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=k2(i),m=p&&p[0],y=p&&p[1],{onBeforeEnter:_,onEnter:v,onEnterCancelled:b,onLeave:g,onLeaveCancelled:w,onBeforeAppear:T=_,onAppear:M=v,onAppearCancelled:x=b}=e,A=(U,C,H)=>{qs(U,C?c:a),qs(U,C?u:o),H&&H()},S=(U,C)=>{U._isLeaving=!1,qs(U,d),qs(U,f),qs(U,h),C&&C()},N=U=>(C,H)=>{const O=U?M:v,R=()=>A(C,U,H);Wo(O,[C,R]),Z_(()=>{qs(C,U?l:s),hs(C,U?c:a),J_(O)||e1(C,r,m,R)})};return cn(e,{onBeforeEnter(U){Wo(_,[U]),hs(U,s),hs(U,o)},onBeforeAppear(U){Wo(T,[U]),hs(U,l),hs(U,u)},onEnter:N(!1),onAppear:N(!0),onLeave(U,C){U._isLeaving=!0;const H=()=>S(U,C);hs(U,d),TI(),hs(U,h),Z_(()=>{U._isLeaving&&(qs(U,d),hs(U,f),J_(g)||e1(U,r,y,H))}),Wo(g,[U,H])},onEnterCancelled(U){A(U,!1),Wo(b,[U])},onAppearCancelled(U){A(U,!0),Wo(x,[U])},onLeaveCancelled(U){S(U),Wo(w,[U])}})}function k2(t){if(t==null)return null;if(qt(t))return[sg(t.enter),sg(t.leave)];{const e=sg(t);return[e,e]}}function sg(t){return Ef(t)}function hs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[zl]||(t[zl]=new Set)).add(e)}function qs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[zl];n&&(n.delete(e),n.size||(t[zl]=void 0))}function Z_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let x2=0;function e1(t,e,n,r){const i=t._endId=++x2,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=_I(t,e);if(!o)return r();const u=o+"end";let c=0;const d=()=>{t.removeEventListener(u,h),s()},h=f=>{f.target===t&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),t.addEventListener(u,h)}function _I(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${Ws}Delay`),s=r(`${Ws}Duration`),o=t1(i,s),a=r(`${Mu}Delay`),l=r(`${Mu}Duration`),u=t1(a,l);let c=null,d=0,h=0;e===Ws?o>0&&(c=Ws,d=o,h=s.length):e===Mu?u>0&&(c=Mu,d=u,h=l.length):(d=Math.max(o,u),c=d>0?o>u?Ws:Mu:null,h=c?c===Ws?s.length:l.length:0);const f=c===Ws&&/\b(transform|all)(,|$)/.test(r(`${Ws}Property`).toString());return{type:c,timeout:d,propCount:h,hasTransform:f}}function t1(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>n1(n)+n1(t[r])))}function n1(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function TI(){return document.body.offsetHeight}function P2(t,e,n){const r=t[zl];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const z0=Symbol("_vod"),Cs={beforeMount(t,{value:e},{transition:n}){t[z0]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Lu(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Lu(t,!0),r.enter(t)):r.leave(t,()=>{Lu(t,!1)}):Lu(t,e))},beforeUnmount(t,{value:e}){Lu(t,e)}};function Lu(t,e){t.style.display=e?t[z0]:"none"}function D2(){Cs.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}function R2(t,e,n){const r=t.style,i=dn(n);if(n&&!i){if(e&&!dn(e))for(const s in e)n[s]==null&&Fv(r,s,"");for(const s in n)Fv(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),z0 in t&&(r.display=s)}}const r1=/\s*!important$/;function Fv(t,e,n){if(Ve(n))n.forEach(r=>Fv(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=O2(t,e);r1.test(n)?t.setProperty(di(r),n.replace(r1,""),"important"):t[r]=n}}const i1=["Webkit","Moz","ms"],og={};function O2(t,e){const n=og[e];if(n)return n;let r=Wr(e);if(r!=="filter"&&r in t)return og[e]=r;r=Cd(r);for(let i=0;i<i1.length;i++){const s=i1[i]+r;if(s in t)return og[e]=s}return e}const s1="http://www.w3.org/1999/xlink";function N2(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(s1,e.slice(6,e.length)):t.setAttributeNS(s1,e,n);else{const s=_N(e);n==null||s&&!nC(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function M2(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const u=a==="OPTION"?t.getAttribute("value"):t.value,c=n??"";u!==c&&(t.value=c),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=nC(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function gs(t,e,n,r){t.addEventListener(e,n,r)}function L2(t,e,n,r){t.removeEventListener(e,n,r)}const o1=Symbol("_vei");function $2(t,e,n,r,i=null){const s=t[o1]||(t[o1]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=U2(e);if(r){const u=s[e]=B2(r,i);gs(t,a,u,l)}else o&&(L2(t,a,o,l),s[e]=void 0)}}const a1=/(?:Once|Passive|Capture)$/;function U2(t){let e;if(a1.test(t)){e={};let r;for(;r=t.match(a1);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):di(t.slice(2)),e]}let ag=0;const F2=Promise.resolve(),V2=()=>ag||(F2.then(()=>ag=0),ag=Date.now());function B2(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ni(j2(r,n.value),e,5,[r])};return n.value=t,n.attached=V2(),n}function j2(t,e){if(Ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const l1=/^on[a-z]/,H2=(t,e,n,r,i=!1,s,o,a,l)=>{e==="class"?P2(t,r,i):e==="style"?R2(t,n,r):Sd(e)?T0(e)||$2(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):W2(t,e,r,i))?M2(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),N2(t,e,r,i))};function W2(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&l1.test(e)&&nt(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||l1.test(e)&&dn(n)?!1:e in t}/*! #__NO_SIDE_EFFECTS__ */function EI(t,e){const n=Ie(t);class r extends Gp{constructor(s){super(n,s,e)}}return r.def=n,r}/*! #__NO_SIDE_EFFECTS__ */const K2=t=>EI(t,NI),Y2=typeof HTMLElement<"u"?HTMLElement:class{};class Gp extends Y2{constructor(e,n={},r){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),Rr(()=>{this._connected||(Qc(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{const{props:s,styles:o}=r;let a;if(s&&!Ve(s))for(const l in s){const u=s[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=Ef(this._props[l])),(a||(a=Object.create(null)))[Wr(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this._applyStyles(o),this._update()},n=this._def.__asyncLoader;n?n().then(r=>e(r,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,r=Ve(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i],!0,!1);for(const i of r.map(Wr))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s)}})}_setAttr(e){let n=this.getAttribute(e);const r=Wr(e);this._numberProps&&this._numberProps[r]&&(n=Ef(n)),this._setProp(r,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!0){n!==this._props[e]&&(this._props[e]=n,i&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(di(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(di(e),n+""):n||this.removeAttribute(di(e))))}_update(){Qc(this._createVNode(),this.shadowRoot)}_createVNode(){const e=ae(this._def,cn({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const r=(s,o)=>{this.dispatchEvent(new CustomEvent(s,{detail:o}))};n.emit=(s,...o)=>{r(s,o),di(s)!==s&&r(di(s),o)};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof Gp){n.parent=i._instance,n.provides=i._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}function G2(t="$style"){{const e=ls();if(!e)return Yt;const n=e.type.__cssModules;if(!n)return Yt;const r=n[t];return r||Yt}}function z2(t){const e=ls();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Bv(s,i))},r=()=>{const i=t(e.proxy);Vv(e.subTree,i),n(i)};OC(r),an(()=>{const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),ja(()=>i.disconnect())})}function Vv(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Vv(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Bv(t.el,e);else if(t.type===Ae)t.children.forEach(n=>Vv(n,e));else if(t.type===da){let{el:n,anchor:r}=t;for(;n&&(Bv(n,e),n!==r);)n=n.nextSibling}}function Bv(t,e){if(t.nodeType===1){const n=t.style;for(const r in e)n.setProperty(`--${r}`,e[r])}}const SI=new WeakMap,CI=new WeakMap,Pf=Symbol("_moveCb"),u1=Symbol("_enterCb"),II={name:"TransitionGroup",props:cn({},A2,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=ls(),r=V0();let i,s;return Wp(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!Z2(i[0].el,n.vnode.el,o))return;i.forEach(Q2),i.forEach(X2);const a=i.filter(J2);TI(),a.forEach(l=>{const u=l.el,c=u.style;hs(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const d=u[Pf]=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",d),u[Pf]=null,qs(u,o))};u.addEventListener("transitionend",d)})}),()=>{const o=ft(t),a=bI(o);let l=o.tag||Ae;i=s,s=e.default?jp(e.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&_a(c,Yl(c,a,r,n))}if(i)for(let u=0;u<i.length;u++){const c=i[u];_a(c,Yl(c,a,r,n)),SI.set(c,c.el.getBoundingClientRect())}return ae(l,null,s)}}},q2=t=>delete t.mode;II.props;const AI=II;function Q2(t){const e=t.el;e[Pf]&&e[Pf](),e[u1]&&e[u1]()}function X2(t){CI.set(t,t.el.getBoundingClientRect())}function J2(t){const e=SI.get(t),n=CI.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function Z2(t,e,n){const r=t.cloneNode(),i=t[zl];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=_I(r);return s.removeChild(r),o}const ko=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ve(e)?n=>Dl(e,n):e};function eL(t){t.target.composing=!0}function c1(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const mi=Symbol("_assign"),Df={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[mi]=ko(i);const s=r||i.props&&i.props.type==="number";gs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Tf(a)),t[mi](a)}),n&&gs(t,"change",()=>{t.value=t.value.trim()}),e||(gs(t,"compositionstart",eL),gs(t,"compositionend",c1),gs(t,"change",c1))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[mi]=ko(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&Tf(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},zp={deep:!0,created(t,e,n){t[mi]=ko(n),gs(t,"change",()=>{const r=t._modelValue,i=ql(t),s=t.checked,o=t[mi];if(Ve(r)){const a=Rp(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const u=[...r];u.splice(a,1),o(u)}}else if(Va(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(kI(t,s))})},mounted:d1,beforeUpdate(t,e,n){t[mi]=ko(n),d1(t,e,n)}};function d1(t,{value:e,oldValue:n},r){t._modelValue=e,Ve(e)?t.checked=Rp(e,r.props.value)>-1:Va(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=So(e,kI(t,!0)))}const q0={created(t,{value:e},n){t.checked=So(e,n.props.value),t[mi]=ko(n),gs(t,"change",()=>{t[mi](ql(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[mi]=ko(r),e!==n&&(t.checked=So(e,r.props.value))}},Q0={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Va(e);gs(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Tf(ql(o)):ql(o));t[mi](t.multiple?i?new Set(s):s:s[0])}),t[mi]=ko(r)},mounted(t,{value:e}){h1(t,e)},beforeUpdate(t,e,n){t[mi]=ko(n)},updated(t,{value:e}){h1(t,e)}};function h1(t,e){const n=t.multiple;if(!(n&&!Ve(e)&&!Va(e))){for(let r=0,i=t.options.length;r<i;r++){const s=t.options[r],o=ql(s);if(n)Ve(e)?s.selected=Rp(e,o)>-1:s.selected=e.has(o);else if(So(ql(s),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ql(t){return"_value"in t?t._value:t.value}function kI(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const xI={created(t,e,n){Eh(t,e,n,null,"created")},mounted(t,e,n){Eh(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Eh(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Eh(t,e,n,r,"updated")}};function PI(t,e){switch(t){case"SELECT":return Q0;case"TEXTAREA":return Df;default:switch(e){case"checkbox":return zp;case"radio":return q0;default:return Df}}}function Eh(t,e,n,r,i){const o=PI(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function tL(){Df.getSSRProps=({value:t})=>({value:t}),q0.getSSRProps=({value:t},e)=>{if(e.props&&So(e.props.value,t))return{checked:!0}},zp.getSSRProps=({value:t},e)=>{if(Ve(t)){if(e.props&&Rp(t,e.props.value)>-1)return{checked:!0}}else if(Va(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},xI.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=PI(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const nL=["ctrl","shift","alt","meta"],rL={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>nL.some(n=>t[`${n}Key`]&&!e.includes(n))},Pt=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const s=rL[e[i]];if(s&&s(n,e))return}return t(n,...r)},iL={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},at=(t,e)=>n=>{if(!("key"in n))return;const r=di(n.key);if(e.some(i=>i===r||iL[i]===r))return t(n)},DI=cn({patchProp:H2},I2);let bc,f1=!1;function RI(){return bc||(bc=tI(DI))}function OI(){return bc=f1?bc:nI(DI),f1=!0,bc}const Qc=(...t)=>{RI().render(...t)},NI=(...t)=>{OI().hydrate(...t)},MI=(...t)=>{const e=RI().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=LI(r);if(!i)return;const s=e._component;!nt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},sL=(...t)=>{const e=OI().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=LI(r);if(i)return n(i,!0,i instanceof SVGElement)},e};function LI(t){return dn(t)?document.querySelector(t):t}let p1=!1;const oL=()=>{p1||(p1=!0,tL(),D2())},aL=()=>{},lL=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:MC,BaseTransitionPropsValidators:B0,Comment:vr,EffectScope:I0,Fragment:Ae,KeepAlive:xM,ReactiveEffect:Wl,Static:da,Suspense:yM,Teleport:sI,Text:Ta,Transition:Us,TransitionGroup:AI,VueElement:Gp,assertNumber:iM,callWithAsyncErrorHandling:ni,callWithErrorHandling:Ss,camelize:Wr,capitalize:Cd,cloneVNode:is,compatUtils:S2,compile:aL,computed:re,createApp:MI,createBlock:ve,createCommentVNode:oe,createElementBlock:J,createElementVNode:ne,createHydrationRenderer:nI,createPropsRestProxy:WM,createRenderer:tI,createSSRApp:sL,createSlots:nr,createStaticVNode:d2,createTextVNode:Qe,createVNode:ae,customRef:JN,defineAsyncComponent:AM,defineComponent:Ie,defineCustomElement:EI,defineEmits:NM,defineExpose:MM,defineModel:UM,defineOptions:LM,defineProps:OM,defineSSRCustomElement:K2,defineSlots:$M,get devtools(){return hl},effect:CN,effectScope:Op,getCurrentInstance:ls,getCurrentScope:Np,getTransitionRawChildren:jp,guardReactiveProps:tr,h:Dd,handleError:Ba,hasInjectionContext:qC,hydrate:NI,initCustomFormatter:w2,initDirectivesForSSR:oL,inject:Pr,isMemoSame:vI,isProxy:D0,isReactive:Xi,isReadonly:ba,isRef:zt,isRuntimeOnly:g2,isShallow:jc,isVNode:Io,markRaw:Id,mergeDefaults:jM,mergeModels:HM,mergeProps:Ht,nextTick:Rr,normalizeClass:Le,normalizeProps:Tn,normalizeStyle:Nn,onActivated:$C,onBeforeMount:VC,onBeforeUnmount:Pd,onBeforeUpdate:j0,onDeactivated:UC,onErrorCaptured:WC,onMounted:an,onRenderTracked:HC,onRenderTriggered:jC,onScopeDispose:A0,onServerPrefetch:BC,onUnmounted:ja,onUpdated:Wp,openBlock:D,popScopeId:kC,provide:Nl,proxyRefs:N0,pushScopeId:AC,queuePostFlushCb:Cf,reactive:Ln,readonly:P0,ref:ue,registerRuntimeCompiler:m2,render:Qc,renderList:ut,renderSlot:Pe,resolveComponent:Ls,resolveDirective:gM,resolveDynamicComponent:Ad,resolveFilter:E2,resolveTransitionHooks:Yl,setBlockTracking:Mv,setDevtoolsHook:CC,setTransitionHooks:_a,shallowReactive:vC,shallowReadonly:YN,shallowRef:yC,ssrContextKey:mI,ssrUtils:T2,stop:IN,toDisplayString:Xe,toHandlerKey:gc,toHandlers:DM,toRaw:ft,toRef:Kl,toRefs:bC,toValue:qN,transformVNodeArgs:u2,triggerRef:zN,unref:k,useAttrs:VM,useCssModule:G2,useCssVars:z2,useModel:BM,useSSRContext:gI,useSlots:No,useTransitionState:V0,vModelCheckbox:zp,vModelDynamic:xI,vModelRadio:q0,vModelSelect:Q0,vModelText:Df,vShow:Cs,version:yI,warn:rM,watch:pn,watchEffect:RC,watchPostEffect:OC,watchSyncEffect:SM,withAsyncContext:KM,withCtx:ye,withDefaults:FM,withDirectives:Ji,withKeys:at,withMemo:b2,withModifiers:Pt,withScopeId:cM},Symbol.toStringTag,{value:"Module"}));function uL(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(i){i(n)}),(r=t.get("*"))&&r.slice().map(function(i){i(e,n)})}}}const Rf=uL();let m1=0;const cL=()=>{const t=m1;return m1+=1,t},$I=()=>(t,e)=>{const n={...t,id:cL(),group:t.group||""};return Rf.emit("notify",{notification:n,timeout:e}),()=>Rf.emit("close",n.id)},UI="context",jv=Ie({__name:"Notification",props:{maxNotifications:{default:10},enter:{default:""},enterFrom:{default:""},enterTo:{default:""},leave:{default:""},leaveFrom:{default:""},leaveTo:{default:""},move:{default:""},moveDelay:{default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=Pr(UI),i=Ln({notifications:[],timeouts:{}}),s=re(()=>i.notifications.filter(c=>c.group===r.group)),o=re(()=>r.position==="bottom"?[...s.value].slice(0,n.maxNotifications):[...s.value].reverse().slice(0,n.maxNotifications)),a=c=>{i.notifications.splice(i.notifications.findIndex(d=>d.id===c),1),clearTimeout(i.timeouts[c])},l=({notification:c,timeout:d})=>{i.notifications.push(c),i.timeouts[c.id]=window.setTimeout(()=>{d!==-1&&a(c.id)},Math.max(d||3e3,0))},u=c=>{e("close"),a(c)};return an(()=>{Rf.on("notify",l),Rf.on("close",a)}),(c,d)=>(D(),ve(AI,{"enter-active-class":k(s).length>1?[n.enter,n.moveDelay].join(" "):n.enter,"enter-from-class":n.enterFrom,"enter-to-class":n.enterTo,"leave-active-class":n.leave,"leave-from-class":n.leaveFrom,"leave-to-class":n.leaveTo,"move-class":n.move},{default:ye(()=>[Pe(c.$slots,"default",{notifications:k(o),close:u})]),_:3},8,["enter-active-class","enter-from-class","enter-to-class","leave-active-class","leave-from-class","leave-to-class","move-class"]))}}),g1=Ie({__name:"NotificationGroup",props:{group:{default:""},position:{default:"top"}},setup(t){const e=t;return Nl(UI,{group:e.group,position:e.position}),(n,r)=>Pe(n.$slots,"default",{group:t.group})}});function dL(t){t.config.globalProperties.$notify=$I(),t.component("Notification",jv),t.component("NotificationGroup",g1),t.component("notification",jv),t.component("notificationGroup",g1)}const hL={install:dL},fL=$I(),pL={class:"px-4 py-2 -mx-3"},mL={class:"mx-3"},gL={class:"font-semibold text-white"},vL={class:"text-sm text-gray-100"},lg=Ie({__name:"Notification",props:{type:{},color:{}},setup(t){return(e,n)=>(D(),ve(k(jv),{enter:"transform ease-out duration-300 transition","enter-from":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-4","enter-to":"translate-y-0 opacity-100 sm:translate-x-0",leave:"transition ease-in duration-500","leave-from":"opacity-100","leave-to":"opacity-0",move:"transition duration-500","move-delay":"delay-300"},{default:ye(({notifications:r})=>[(D(!0),J(Ae,null,ut(r,i=>(D(),J("div",{key:i.id},[i.type===e.type?(D(),J("div",{key:0,class:Le("flex w-full max-w-sm mx-auto mt-4 overflow-hidden bg-opacity-75 rounded-lg shadow-md "+e.color)},[ne("div",pL,[ne("div",mL,[ne("span",gL,Xe(i.title),1),ne("p",vL,Xe(i.text),1)])])],2)):oe("",!0)]))),128))]),_:1}))}}),yL={class:"fixed inset-0 flex items-end justify-center p-6 px-4 py-6 pointer-events-none"},wL={class:"w-full max-w-sm"},bL=Ie({__name:"NotificationGroup",setup(t){return(e,n)=>{const r=Ls("NotificationGroup",!0);return D(),ve(r,null,{default:ye(()=>[ne("div",yL,[ne("div",wL,[ae(lg,{type:"error",color:"bg-red-800"}),ae(lg,{type:"warning",color:"bg-yellow-800"}),ae(lg,{type:"success",color:"bg-green-800"})])])]),_:1})}}});/*!
  * vue-router v4.2.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const fl=typeof window<"u";function _L(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const jt=Object.assign;function ug(t,e){const n={};for(const r in e){const i=e[r];n[r]=Mi(i)?i.map(t):t(i)}return n}const _c=()=>{},Mi=Array.isArray,TL=/\/$/,EL=t=>t.replace(TL,"");function cg(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=AL(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function SL(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function v1(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function CL(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Ql(e.matched[r],n.matched[i])&&FI(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ql(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function FI(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!IL(t[n],e[n]))return!1;return!0}function IL(t,e){return Mi(t)?y1(t,e):Mi(e)?y1(e,t):t===e}function y1(t,e){return Mi(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function AL(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Xc;(function(t){t.pop="pop",t.push="push"})(Xc||(Xc={}));var Tc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Tc||(Tc={}));function kL(t){if(!t)if(fl){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),EL(t)}const xL=/^[^#]+#/;function PL(t,e){return t.replace(xL,"#")+e}function DL(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const qp=()=>({left:window.pageXOffset,top:window.pageYOffset});function RL(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=DL(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function w1(t,e){return(history.state?history.state.position-e:-1)+t}const Hv=new Map;function OL(t,e){Hv.set(t,e)}function NL(t){const e=Hv.get(t);return Hv.delete(t),e}let ML=()=>location.protocol+"//"+location.host;function VI(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),v1(l,"")}return v1(n,t)+r+i}function LL(t,e,n,r){let i=[],s=[],o=null;const a=({state:h})=>{const f=VI(t,location),p=n.value,m=e.value;let y=0;if(h){if(n.value=f,e.value=h,o&&o===p){o=null;return}y=m?h.position-m.position:0}else r(f);i.forEach(_=>{_(n.value,p,{delta:y,type:Xc.pop,direction:y?y>0?Tc.forward:Tc.back:Tc.unknown})})};function l(){o=n.value}function u(h){i.push(h);const f=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return s.push(f),f}function c(){const{history:h}=window;h.state&&h.replaceState(jt({},h.state,{scroll:qp()}),"")}function d(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function b1(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?qp():null}}function $L(t){const{history:e,location:n}=window,r={value:VI(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,u,c){const d=t.indexOf("#"),h=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:ML()+t+l;try{e[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(f){console.error(f),n[c?"replace":"assign"](h)}}function o(l,u){const c=jt({},e.state,b1(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});s(l,c,!0),r.value=l}function a(l,u){const c=jt({},i.value,e.state,{forward:l,scroll:qp()});s(c.current,c,!0);const d=jt({},b1(r.value,l,null),{position:c.position+1},u);s(l,d,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function UL(t){t=kL(t);const e=$L(t),n=LL(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=jt({location:"",base:t,go:r,createHref:PL.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function FL(t){return typeof t=="string"||t&&typeof t=="object"}function BI(t){return typeof t=="string"||typeof t=="symbol"}const Ks={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},jI=Symbol("");var _1;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(_1||(_1={}));function Xl(t,e){return jt(new Error,{type:t,[jI]:!0},e)}function ds(t,e){return t instanceof Error&&jI in t&&(e==null||!!(t.type&e))}const T1="[^/]+?",VL={sensitive:!1,strict:!1,start:!0,end:!0},BL=/[.+*?^${}()[\]/\\]/g;function jL(t,e){const n=jt({},VL,e),r=[];let i=n.start?"^":"";const s=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const h=u[d];let f=40+(n.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(BL,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:m,optional:y,regexp:_}=h;s.push({name:p,repeatable:m,optional:y});const v=_||T1;if(v!==T1){f+=10;try{new RegExp(`(${v})`)}catch(g){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+g.message)}}let b=m?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;d||(b=y&&u.length<2?`(?:/${b})`:"/"+b),y&&(b+="?"),i+=b,f+=20,y&&(f+=-8),m&&(f+=-20),v===".*"&&(f+=-50)}c.push(f)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const c=u.match(o),d={};if(!c)return null;for(let h=1;h<c.length;h++){const f=c[h]||"",p=s[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function l(u){let c="",d=!1;for(const h of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const f of h)if(f.type===0)c+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:y}=f,_=p in u?u[p]:"";if(Mi(_)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=Mi(_)?_.join("/"):_;if(!v)if(y)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=v}}return c||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function HL(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function WL(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=HL(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(E1(r))return 1;if(E1(i))return-1}return i.length-r.length}function E1(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const KL={type:0,value:""},YL=/[a-zA-Z0-9_]/;function GL(t){if(!t)return[[]];if(t==="/")return[[KL]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,u="",c="";function d(){u&&(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):h();break;case 4:h(),n=r;break;case 1:l==="("?n=2:YL.test(l)?h():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}function zL(t,e,n){const r=jL(GL(t.path),n),i=jt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function qL(t,e){const n=[],r=new Map;e=I1({strict:!1,end:!0,sensitive:!1},e);function i(c){return r.get(c)}function s(c,d,h){const f=!h,p=QL(c);p.aliasOf=h&&h.record;const m=I1(e,c),y=[p];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const g of b)y.push(jt({},p,{components:h?h.record.components:p.components,path:g,aliasOf:h?h.record:p}))}let _,v;for(const b of y){const{path:g}=b;if(d&&g[0]!=="/"){const w=d.record.path,T=w[w.length-1]==="/"?"":"/";b.path=d.record.path+(g&&T+g)}if(_=zL(b,d,m),h?h.alias.push(_):(v=v||_,v!==_&&v.alias.push(_),f&&c.name&&!C1(_)&&o(c.name)),p.children){const w=p.children;for(let T=0;T<w.length;T++)s(w[T],_,h&&h.children[T])}h=h||_,(_.record.components&&Object.keys(_.record.components).length||_.record.name||_.record.redirect)&&l(_)}return v?()=>{o(v)}:_c}function o(c){if(BI(c)){const d=r.get(c);d&&(r.delete(c),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(c);d>-1&&(n.splice(d,1),c.record.name&&r.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return n}function l(c){let d=0;for(;d<n.length&&WL(c,n[d])>=0&&(c.record.path!==n[d].record.path||!HI(c,n[d]));)d++;n.splice(d,0,c),c.record.name&&!C1(c)&&r.set(c.record.name,c)}function u(c,d){let h,f={},p,m;if("name"in c&&c.name){if(h=r.get(c.name),!h)throw Xl(1,{location:c});m=h.record.name,f=jt(S1(d.params,h.keys.filter(v=>!v.optional).map(v=>v.name)),c.params&&S1(c.params,h.keys.map(v=>v.name))),p=h.stringify(f)}else if("path"in c)p=c.path,h=n.find(v=>v.re.test(p)),h&&(f=h.parse(p),m=h.record.name);else{if(h=d.name?r.get(d.name):n.find(v=>v.re.test(d.path)),!h)throw Xl(1,{location:c,currentLocation:d});m=h.record.name,f=jt({},d.params,c.params),p=h.stringify(f)}const y=[];let _=h;for(;_;)y.unshift(_.record),_=_.parent;return{name:m,path:p,params:f,matched:y,meta:JL(y)}}return t.forEach(c=>s(c)),{addRoute:s,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function S1(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function QL(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:XL(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function XL(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function C1(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function JL(t){return t.reduce((e,n)=>jt(e,n.meta),{})}function I1(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function HI(t,e){return e.children.some(n=>n===t||HI(t,n))}const WI=/#/g,ZL=/&/g,e$=/\//g,t$=/=/g,n$=/\?/g,KI=/\+/g,r$=/%5B/g,i$=/%5D/g,YI=/%5E/g,s$=/%60/g,GI=/%7B/g,o$=/%7C/g,zI=/%7D/g,a$=/%20/g;function X0(t){return encodeURI(""+t).replace(o$,"|").replace(r$,"[").replace(i$,"]")}function l$(t){return X0(t).replace(GI,"{").replace(zI,"}").replace(YI,"^")}function Wv(t){return X0(t).replace(KI,"%2B").replace(a$,"+").replace(WI,"%23").replace(ZL,"%26").replace(s$,"`").replace(GI,"{").replace(zI,"}").replace(YI,"^")}function u$(t){return Wv(t).replace(t$,"%3D")}function c$(t){return X0(t).replace(WI,"%23").replace(n$,"%3F")}function d$(t){return t==null?"":c$(t).replace(e$,"%2F")}function Of(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function h$(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(KI," "),o=s.indexOf("="),a=Of(o<0?s:s.slice(0,o)),l=o<0?null:Of(s.slice(o+1));if(a in e){let u=e[a];Mi(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function A1(t){let e="";for(let n in t){const r=t[n];if(n=u$(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Mi(r)?r.map(s=>s&&Wv(s)):[r&&Wv(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function f$(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Mi(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const p$=Symbol(""),k1=Symbol(""),Qp=Symbol(""),J0=Symbol(""),Kv=Symbol("");function $u(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function eo(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const l=d=>{d===!1?a(Xl(4,{from:n,to:e})):d instanceof Error?a(d):FL(d)?a(Xl(2,{from:e,to:d})):(s&&r.enterCallbacks[i]===s&&typeof d=="function"&&s.push(d),o())},u=t.call(r&&r.instances[i],e,n,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch(d=>a(d))})}function dg(t,e,n,r){const i=[];for(const s of t)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(m$(a)){const u=(a.__vccOpts||a)[e];u&&i.push(eo(u,n,r,s,o))}else{let l=a();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const c=_L(u)?u.default:u;s.components[o]=c;const h=(c.__vccOpts||c)[e];return h&&eo(h,n,r,s,o)()}))}}return i}function m$(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function x1(t){const e=Pr(Qp),n=Pr(J0),r=re(()=>e.resolve(k(t.to))),i=re(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const h=d.findIndex(Ql.bind(null,c));if(h>-1)return h;const f=P1(l[u-2]);return u>1&&P1(c)===f&&d[d.length-1].path!==f?d.findIndex(Ql.bind(null,l[u-2])):h}),s=re(()=>i.value>-1&&w$(n.params,r.value.params)),o=re(()=>i.value>-1&&i.value===n.matched.length-1&&FI(n.params,r.value.params));function a(l={}){return y$(l)?e[k(t.replace)?"replace":"push"](k(t.to)).catch(_c):Promise.resolve()}return{route:r,href:re(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const g$=Ie({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:x1,setup(t,{slots:e}){const n=Ln(x1(t)),{options:r}=Pr(Qp),i=re(()=>({[D1(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[D1(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Dd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),v$=g$;function y$(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function w$(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Mi(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function P1(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const D1=(t,e,n)=>t??e??n,b$=Ie({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Pr(Kv),i=re(()=>t.route||r.value),s=Pr(k1,0),o=re(()=>{let u=k(s);const{matched:c}=i.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),a=re(()=>i.value.matched[o.value]);Nl(k1,re(()=>o.value+1)),Nl(p$,a),Nl(Kv,i);const l=ue();return pn(()=>[l.value,a.value,t.name],([u,c,d],[h,f,p])=>{c&&(c.instances[d]=u,f&&f!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!Ql(c,f)||!h)&&(c.enterCallbacks[d]||[]).forEach(m=>m(u))},{flush:"post"}),()=>{const u=i.value,c=t.name,d=a.value,h=d&&d.components[c];if(!h)return R1(n.default,{Component:h,route:u});const f=d.props[c],p=f?f===!0?u.params:typeof f=="function"?f(u):f:null,y=Dd(h,jt({},p,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return R1(n.default,{Component:y,route:u})||y}}});function R1(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const qI=b$;function _$(t){const e=qL(t.routes,t),n=t.parseQuery||h$,r=t.stringifyQuery||A1,i=t.history,s=$u(),o=$u(),a=$u(),l=yC(Ks);let u=Ks;fl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ug.bind(null,q=>""+q),d=ug.bind(null,d$),h=ug.bind(null,Of);function f(q,le){let Y,pe;return BI(q)?(Y=e.getRecordMatcher(q),pe=le):pe=q,e.addRoute(pe,Y)}function p(q){const le=e.getRecordMatcher(q);le&&e.removeRoute(le)}function m(){return e.getRoutes().map(q=>q.record)}function y(q){return!!e.getRecordMatcher(q)}function _(q,le){if(le=jt({},le||l.value),typeof q=="string"){const F=cg(n,q,le.path),z=e.resolve({path:F.path},le),he=i.createHref(F.fullPath);return jt(F,z,{params:h(z.params),hash:Of(F.hash),redirectedFrom:void 0,href:he})}let Y;if("path"in q)Y=jt({},q,{path:cg(n,q.path,le.path).path});else{const F=jt({},q.params);for(const z in F)F[z]==null&&delete F[z];Y=jt({},q,{params:d(F)}),le.params=d(le.params)}const pe=e.resolve(Y,le),Se=q.hash||"";pe.params=c(h(pe.params));const E=SL(r,jt({},q,{hash:l$(Se),path:pe.path})),P=i.createHref(E);return jt({fullPath:E,hash:Se,query:r===A1?f$(q.query):q.query||{}},pe,{redirectedFrom:void 0,href:P})}function v(q){return typeof q=="string"?cg(n,q,l.value.path):jt({},q)}function b(q,le){if(u!==q)return Xl(8,{from:le,to:q})}function g(q){return M(q)}function w(q){return g(jt(v(q),{replace:!0}))}function T(q){const le=q.matched[q.matched.length-1];if(le&&le.redirect){const{redirect:Y}=le;let pe=typeof Y=="function"?Y(q):Y;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=v(pe):{path:pe},pe.params={}),jt({query:q.query,hash:q.hash,params:"path"in pe?{}:q.params},pe)}}function M(q,le){const Y=u=_(q),pe=l.value,Se=q.state,E=q.force,P=q.replace===!0,F=T(Y);if(F)return M(jt(v(F),{state:typeof F=="object"?jt({},Se,F.state):Se,force:E,replace:P}),le||Y);const z=Y;z.redirectedFrom=le;let he;return!E&&CL(r,pe,Y)&&(he=Xl(16,{to:z,from:pe}),Z(pe,pe,!0,!1)),(he?Promise.resolve(he):S(z,pe)).catch(fe=>ds(fe)?ds(fe,2)?fe:I(fe):X(fe,z,pe)).then(fe=>{if(fe){if(ds(fe,2))return M(jt({replace:P},v(fe.to),{state:typeof fe.to=="object"?jt({},Se,fe.to.state):Se,force:E}),le||z)}else fe=U(z,pe,!0,P,Se);return N(z,pe,fe),fe})}function x(q,le){const Y=b(q,le);return Y?Promise.reject(Y):Promise.resolve()}function A(q){const le=V.values().next().value;return le&&typeof le.runWithContext=="function"?le.runWithContext(q):q()}function S(q,le){let Y;const[pe,Se,E]=T$(q,le);Y=dg(pe.reverse(),"beforeRouteLeave",q,le);for(const F of pe)F.leaveGuards.forEach(z=>{Y.push(eo(z,q,le))});const P=x.bind(null,q,le);return Y.push(P),B(Y).then(()=>{Y=[];for(const F of s.list())Y.push(eo(F,q,le));return Y.push(P),B(Y)}).then(()=>{Y=dg(Se,"beforeRouteUpdate",q,le);for(const F of Se)F.updateGuards.forEach(z=>{Y.push(eo(z,q,le))});return Y.push(P),B(Y)}).then(()=>{Y=[];for(const F of q.matched)if(F.beforeEnter&&!le.matched.includes(F))if(Mi(F.beforeEnter))for(const z of F.beforeEnter)Y.push(eo(z,q,le));else Y.push(eo(F.beforeEnter,q,le));return Y.push(P),B(Y)}).then(()=>(q.matched.forEach(F=>F.enterCallbacks={}),Y=dg(E,"beforeRouteEnter",q,le),Y.push(P),B(Y))).then(()=>{Y=[];for(const F of o.list())Y.push(eo(F,q,le));return Y.push(P),B(Y)}).catch(F=>ds(F,8)?F:Promise.reject(F))}function N(q,le,Y){for(const pe of a.list())A(()=>pe(q,le,Y))}function U(q,le,Y,pe,Se){const E=b(q,le);if(E)return E;const P=le===Ks,F=fl?history.state:{};Y&&(pe||P?i.replace(q.fullPath,jt({scroll:P&&F&&F.scroll},Se)):i.push(q.fullPath,Se)),l.value=q,Z(q,le,Y,P),I()}let C;function H(){C||(C=i.listen((q,le,Y)=>{if(!we.listening)return;const pe=_(q),Se=T(pe);if(Se){M(jt(Se,{replace:!0}),pe).catch(_c);return}u=pe;const E=l.value;fl&&OL(w1(E.fullPath,Y.delta),qp()),S(pe,E).catch(P=>ds(P,12)?P:ds(P,2)?(M(P.to,pe).then(F=>{ds(F,20)&&!Y.delta&&Y.type===Xc.pop&&i.go(-1,!1)}).catch(_c),Promise.reject()):(Y.delta&&i.go(-Y.delta,!1),X(P,pe,E))).then(P=>{P=P||U(pe,E,!1),P&&(Y.delta&&!ds(P,8)?i.go(-Y.delta,!1):Y.type===Xc.pop&&ds(P,20)&&i.go(-1,!1)),N(pe,E,P)}).catch(_c)}))}let O=$u(),R=$u(),W;function X(q,le,Y){I(q);const pe=R.list();return pe.length?pe.forEach(Se=>Se(q,le,Y)):console.error(q),Promise.reject(q)}function $(){return W&&l.value!==Ks?Promise.resolve():new Promise((q,le)=>{O.add([q,le])})}function I(q){return W||(W=!q,H(),O.list().forEach(([le,Y])=>q?Y(q):le()),O.reset()),q}function Z(q,le,Y,pe){const{scrollBehavior:Se}=t;if(!fl||!Se)return Promise.resolve();const E=!Y&&NL(w1(q.fullPath,0))||(pe||!Y)&&history.state&&history.state.scroll||null;return Rr().then(()=>Se(q,le,E)).then(P=>P&&RL(P)).catch(P=>X(P,q,le))}const ie=q=>i.go(q);let ee;const V=new Set,we={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:y,getRoutes:m,resolve:_,options:t,push:g,replace:w,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:R.add,isReady:$,install(q){const le=this;q.component("RouterLink",v$),q.component("RouterView",qI),q.config.globalProperties.$router=le,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>k(l)}),fl&&!ee&&l.value===Ks&&(ee=!0,g(i.location).catch(Se=>{}));const Y={};for(const Se in Ks)Y[Se]=re(()=>l.value[Se]);q.provide(Qp,le),q.provide(J0,Ln(Y)),q.provide(Kv,l);const pe=q.unmount;V.add(q),q.unmount=function(){V.delete(q),V.size<1&&(u=Ks,C&&C(),C=null,l.value=Ks,ee=!1,W=!1),pe()}}};function B(q){return q.reduce((le,Y)=>le.then(()=>A(Y)),Promise.resolve())}return we}function T$(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(u=>Ql(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>Ql(u,l))||i.push(l))}return[n,r,i]}function Z0(){return Pr(Qp)}function ew(){return Pr(J0)}const E$=Ie({__name:"App",setup(t){return(e,n)=>(D(),J(Ae,null,[ae(k(qI)),ae(bL)],64))}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De=function(t,e){if(!t)throw bu(e)},bu=function(t){return new Error("Firebase Database ("+QI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},S$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Xp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(XI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):S$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new C$;const h=s<<2|a>>4;if(r.push(h),u!==64){const f=a<<4&240|u>>2;if(r.push(f),d!==64){const p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JI=function(t){const e=XI(t);return Xp.encodeByteArray(e,!0)},Nf=function(t){return JI(t).replace(/\./g,"")},Mf=function(t){try{return Xp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(t){return ZI(void 0,t)}function ZI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!A$(n)||(t[n]=ZI(t[n],e[n]));return t}function A$(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$=()=>eA().__FIREBASE_DEFAULTS__,x$=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},P$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mf(t[1]);return e&&JSON.parse(e)},Jp=()=>{try{return k$()||x$()||P$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tA=t=>{var e,n;return(n=(e=Jp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nA=t=>{const e=tA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},rA=()=>{var t;return(t=Jp())===null||t===void 0?void 0:t.config},iA=t=>{var e;return(e=Jp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Nf(JSON.stringify(n)),Nf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tr())}function D$(){var t;const e=(t=Jp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R$(){const t=Tr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lA(){return QI.NODE_ADMIN===!0}function Zp(){try{return typeof indexedDB=="object"}catch{return!1}}function uA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function O$(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$="FirebaseError";class ai extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=N$,Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mo.prototype.create)}}class Mo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?M$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ai(i,a,r)}}function M$(t,e){return t.replace(L$,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const L$=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){return JSON.parse(t)}function Zn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Jc(Mf(s[0])||""),n=Jc(Mf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},$$=function(t){const e=cA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},U$=function(t){const e=cA(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Yv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Zc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(O1(s)&&O1(o)){if(!Zc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function O1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function rc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,c;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):d<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const h=(i<<5|i>>>27)+u+l+c+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function V$(t,e){const n=new B$(t,e);return n.subscribe.bind(n)}class B${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");j$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=hg),i.error===void 0&&(i.error=hg),i.complete===void 0&&(i.complete=hg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hg(){}function H$(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,De(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},em=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=1e3,G$=2,z$=4*60*60*1e3,q$=.5;function Gv(t,e=Y$,n=G$){const r=e*Math.pow(n,t),i=Math.round(q$*r*(Math.random()-.5)*2);return Math.min(z$,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sa;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J$(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:X$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function X$(t){return t===zo?void 0:t}function J$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Q$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xt||(xt={}));const eU={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},tU=xt.INFO,nU={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},rU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=nU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tu{constructor(e){this.name=e,this._logLevel=tU,this._logHandler=rU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}}const iU=(t,e)=>e.some(n=>t instanceof n);let N1,M1;function sU(){return N1||(N1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oU(){return M1||(M1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dA=new WeakMap,zv=new WeakMap,hA=new WeakMap,fg=new WeakMap,nw=new WeakMap;function aU(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(po(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dA.set(n,t)}).catch(()=>{}),nw.set(e,t),e}function lU(t){if(zv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});zv.set(t,e)}let qv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return po(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uU(t){qv=t(qv)}function cU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pg(this),e,...n);return hA.set(r,e.sort?e.sort():[e]),po(r)}:oU().includes(t)?function(...e){return t.apply(pg(this),e),po(dA.get(this))}:function(...e){return po(t.apply(pg(this),e))}}function dU(t){return typeof t=="function"?cU(t):(t instanceof IDBTransaction&&lU(t),iU(t,sU())?new Proxy(t,qv):t)}function po(t){if(t instanceof IDBRequest)return aU(t);if(fg.has(t))return fg.get(t);const e=dU(t);return e!==t&&(fg.set(t,e),nw.set(e,t)),e}const pg=t=>nw.get(t);function hU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=po(o);return r&&o.addEventListener("upgradeneeded",l=>{r(po(o.result),l.oldVersion,l.newVersion,po(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const fU=["get","getKey","getAll","getAllKeys","count"],pU=["put","add","delete","clear"],mg=new Map;function L1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=pU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fU.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return mg.set(e,s),s}uU(t=>({...t,get:(e,n,r)=>L1(e,n)||t.get(e,n,r),has:(e,n)=>!!L1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qv="@firebase/app",$1="0.9.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new Tu("@firebase/app"),vU="@firebase/app-compat",yU="@firebase/analytics-compat",wU="@firebase/analytics",bU="@firebase/app-check-compat",_U="@firebase/app-check",TU="@firebase/auth",EU="@firebase/auth-compat",SU="@firebase/database",CU="@firebase/database-compat",IU="@firebase/functions",AU="@firebase/functions-compat",kU="@firebase/installations",xU="@firebase/installations-compat",PU="@firebase/messaging",DU="@firebase/messaging-compat",RU="@firebase/performance",OU="@firebase/performance-compat",NU="@firebase/remote-config",MU="@firebase/remote-config-compat",LU="@firebase/storage",$U="@firebase/storage-compat",UU="@firebase/firestore",FU="@firebase/firestore-compat",VU="firebase",BU="9.22.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="[DEFAULT]",jU={[Qv]:"fire-core",[vU]:"fire-core-compat",[wU]:"fire-analytics",[yU]:"fire-analytics-compat",[_U]:"fire-app-check",[bU]:"fire-app-check-compat",[TU]:"fire-auth",[EU]:"fire-auth-compat",[SU]:"fire-rtdb",[CU]:"fire-rtdb-compat",[IU]:"fire-fn",[AU]:"fire-fn-compat",[kU]:"fire-iid",[xU]:"fire-iid-compat",[PU]:"fire-fcm",[DU]:"fire-fcm-compat",[RU]:"fire-perf",[OU]:"fire-perf-compat",[NU]:"fire-rc",[MU]:"fire-rc-compat",[LU]:"fire-gcs",[$U]:"fire-gcs-compat",[UU]:"fire-fst",[FU]:"fire-fst-compat","fire-js":"fire-js",[VU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Map,Jv=new Map;function HU(t,e){try{t.container.addComponent(e)}catch(n){Ca.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gr(t){const e=t.name;if(Jv.has(e))return Ca.debug(`There were multiple attempts to register component ${e}.`),!1;Jv.set(e,t);for(const n of $f.values())HU(n,t);return!0}function us(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},mo=new Mo("app","Firebase",WU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=BU;function fA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw mo.create("bad-app-name",{appName:String(i)});if(n||(n=rA()),!n)throw mo.create("no-options");const s=$f.get(i);if(s){if(Zc(n,s.options)&&Zc(r,s.config))return s;throw mo.create("duplicate-app",{appName:i})}const o=new Z$(i);for(const l of Jv.values())o.addComponent(l);const a=new KU(n,r,o);return $f.set(i,a),a}function Eu(t=Xv){const e=$f.get(t);if(!e&&t===Xv&&rA())return fA();if(!e)throw mo.create("no-app",{appName:t});return e}function rr(t,e,n){var r;let i=(r=jU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ca.warn(a.join(" "));return}Gr(new Or(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="firebase-heartbeat-database",GU=1,ed="firebase-heartbeat-store";let gg=null;function pA(){return gg||(gg=hU(YU,GU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ed)}}}).catch(t=>{throw mo.create("idb-open",{originalErrorMessage:t.message})})),gg}async function zU(t){try{return await(await pA()).transaction(ed).objectStore(ed).get(mA(t))}catch(e){if(e instanceof ai)Ca.warn(e.message);else{const n=mo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ca.warn(n.message)}}}async function U1(t,e){try{const r=(await pA()).transaction(ed,"readwrite");await r.objectStore(ed).put(e,mA(t)),await r.done}catch(n){if(n instanceof ai)Ca.warn(n.message);else{const r=mo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ca.warn(r.message)}}}function mA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=1024,QU=30*24*60*60*1e3;class XU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=F1();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=QU}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=F1(),{heartbeatsToSend:n,unsentEntries:r}=JU(this._heartbeatsCache.heartbeats),i=Nf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function F1(){return new Date().toISOString().substring(0,10)}function JU(t,e=qU){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),V1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),V1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zp()?uA().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await zU(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return U1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return U1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function V1(t){return Nf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){Gr(new Or("platform-logger",e=>new mU(e),"PRIVATE")),Gr(new Or("heartbeat",e=>new XU(e),"PRIVATE")),rr(Qv,$1,t),rr(Qv,$1,"esm2017"),rr("fire-js","")}eF("");const tF=(t,e)=>e.some(n=>t instanceof n);let B1,j1;function nF(){return B1||(B1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rF(){return j1||(j1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gA=new WeakMap,Zv=new WeakMap,vA=new WeakMap,vg=new WeakMap,rw=new WeakMap;function iF(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(go(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gA.set(n,t)}).catch(()=>{}),rw.set(e,t),e}function sF(t){if(Zv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Zv.set(t,e)}let ey={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return go(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oF(t){ey=t(ey)}function aF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yg(this),e,...n);return vA.set(r,e.sort?e.sort():[e]),go(r)}:rF().includes(t)?function(...e){return t.apply(yg(this),e),go(gA.get(this))}:function(...e){return go(t.apply(yg(this),e))}}function lF(t){return typeof t=="function"?aF(t):(t instanceof IDBTransaction&&sF(t),tF(t,nF())?new Proxy(t,ey):t)}function go(t){if(t instanceof IDBRequest)return iF(t);if(vg.has(t))return vg.get(t);const e=lF(t);return e!==t&&(vg.set(t,e),rw.set(e,t)),e}const yg=t=>rw.get(t);function uF(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=go(o);return r&&o.addEventListener("upgradeneeded",l=>{r(go(o.result),l.oldVersion,l.newVersion,go(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const cF=["get","getKey","getAll","getAllKeys","count"],dF=["put","add","delete","clear"],wg=new Map;function H1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wg.get(e))return wg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cF.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return wg.set(e,s),s}oF(t=>({...t,get:(e,n,r)=>H1(e,n)||t.get(e,n,r),has:(e,n)=>!!H1(e,n)||t.has(e,n)}));const yA="@firebase/installations",iw="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=1e4,bA=`w:${iw}`,_A="FIS_v2",hF="https://firebaseinstallations.googleapis.com/v1",fF=60*60*1e3,pF="installations",mF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ia=new Mo(pF,mF,gF);function TA(t){return t instanceof ai&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA({projectId:t}){return`${hF}/projects/${t}/installations`}function SA(t){return{token:t.token,requestStatus:2,expiresIn:yF(t.expiresIn),creationTime:Date.now()}}async function CA(t,e){const r=(await e.json()).error;return Ia.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function IA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function vF(t,{refreshToken:e}){const n=IA(t);return n.append("Authorization",wF(e)),n}async function AA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function yF(t){return Number(t.replace("s","000"))}function wF(t){return`${_A} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=EA(t),i=IA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:_A,appId:t.appId,sdkVersion:bA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await AA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:SA(u.authToken)}}else throw await CA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=/^[cdef][\w-]{21}$/,ty="";function EF(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=SF(t);return TF.test(n)?n:ty}catch{return ty}}function SF(t){return _F(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new Map;function PA(t,e){const n=tm(t);DA(n,e),CF(n,e)}function DA(t,e){const n=xA.get(t);if(n)for(const r of n)r(e)}function CF(t,e){const n=IF();n&&n.postMessage({key:t,fid:e}),AF()}let ia=null;function IF(){return!ia&&"BroadcastChannel"in self&&(ia=new BroadcastChannel("[Firebase] FID Change"),ia.onmessage=t=>{DA(t.data.key,t.data.fid)}),ia}function AF(){xA.size===0&&ia&&(ia.close(),ia=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="firebase-installations-database",xF=1,Aa="firebase-installations-store";let bg=null;function sw(){return bg||(bg=uF(kF,xF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Aa)}}})),bg}async function Uf(t,e){const n=tm(t),i=(await sw()).transaction(Aa,"readwrite"),s=i.objectStore(Aa),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&PA(t,e.fid),e}async function RA(t){const e=tm(t),r=(await sw()).transaction(Aa,"readwrite");await r.objectStore(Aa).delete(e),await r.done}async function nm(t,e){const n=tm(t),i=(await sw()).transaction(Aa,"readwrite"),s=i.objectStore(Aa),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&PA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ow(t){let e;const n=await nm(t.appConfig,r=>{const i=PF(r),s=DF(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===ty?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function PF(t){const e=t||{fid:EF(),registrationStatus:0};return OA(e)}function DF(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ia.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=RF(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:OF(t)}:{installationEntry:e}}async function RF(t,e){try{const n=await bF(t,e);return Uf(t.appConfig,n)}catch(n){throw TA(n)&&n.customData.serverCode===409?await RA(t.appConfig):await Uf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function OF(t){let e=await W1(t.appConfig);for(;e.registrationStatus===1;)await kA(100),e=await W1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ow(t);return r||n}return e}function W1(t){return nm(t,e=>{if(!e)throw Ia.create("installation-not-found");return OA(e)})}function OA(t){return NF(t)?{fid:t.fid,registrationStatus:0}:t}function NF(t){return t.registrationStatus===1&&t.registrationTime+wA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF({appConfig:t,heartbeatServiceProvider:e},n){const r=LF(t,n),i=vF(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:bA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await AA(()=>fetch(r,a));if(l.ok){const u=await l.json();return SA(u)}else throw await CA("Generate Auth Token",l)}function LF(t,{fid:e}){return`${EA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(t,e=!1){let n;const r=await nm(t.appConfig,s=>{if(!NA(s))throw Ia.create("not-registered");const o=s.authToken;if(!e&&FF(o))return s;if(o.requestStatus===1)return n=$F(t,e),s;{if(!navigator.onLine)throw Ia.create("app-offline");const a=BF(s);return n=UF(t,a),a}});return n?await n:r.authToken}async function $F(t,e){let n=await K1(t.appConfig);for(;n.authToken.requestStatus===1;)await kA(100),n=await K1(t.appConfig);const r=n.authToken;return r.requestStatus===0?aw(t,e):r}function K1(t){return nm(t,e=>{if(!NA(e))throw Ia.create("not-registered");const n=e.authToken;return jF(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function UF(t,e){try{const n=await MF(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Uf(t.appConfig,r),n}catch(n){if(TA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await RA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Uf(t.appConfig,r)}throw n}}function NA(t){return t!==void 0&&t.registrationStatus===2}function FF(t){return t.requestStatus===2&&!VF(t)}function VF(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fF}function BF(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function jF(t){return t.requestStatus===1&&t.requestTime+wA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(t){const e=t,{installationEntry:n,registrationPromise:r}=await ow(e);return r?r.catch(console.error):aw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WF(t,e=!1){const n=t;return await KF(n),(await aw(n,e)).token}async function KF(t){const{registrationPromise:e}=await ow(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t){if(!t||!t.options)throw _g("App Configuration");if(!t.name)throw _g("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw _g(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function _g(t){return Ia.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="installations",GF="installations-internal",zF=t=>{const e=t.getProvider("app").getImmediate(),n=YF(e),r=us(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},qF=t=>{const e=t.getProvider("app").getImmediate(),n=us(e,MA).getImmediate();return{getId:()=>HF(n),getToken:i=>WF(n,i)}};function QF(){Gr(new Or(MA,zF,"PUBLIC")),Gr(new Or(GF,qF,"PRIVATE"))}QF();rr(yA,iw);rr(yA,iw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="analytics",XF="firebase_id",JF="origin",ZF=60*1e3,e3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new Tu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ri=new Mo("analytics","Analytics",t3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(t){if(!t.startsWith(lw)){const e=ri.create("invalid-gtag-resource",{gtagURL:t});return Kr.warn(e.message),""}return t}function LA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function r3(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function i3(t,e){const n=r3("firebase-js-sdk-policy",{createScriptURL:n3}),r=document.createElement("script"),i=`${lw}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function s3(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function o3(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await LA(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){Kr.error(a)}t("config",i,s)}async function a3(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await LA(n);for(const l of o){const u=a.find(d=>d.measurementId===l),c=u&&e[u.appId];if(c)s.push(c);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Kr.error(s)}}function l3(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await a3(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await o3(t,e,n,r,a,l)}else if(s==="consent"){const[a]=o;t("consent","update",a)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Kr.error(a)}}return i}function u3(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=l3(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function c3(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(lw)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=30,h3=1e3;class f3{constructor(e={},n=h3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const $A=new f3;function p3(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function m3(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:p3(r)},s=e3.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw ri.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function g3(t,e=$A,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw ri.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ri.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new w3;return setTimeout(async()=>{a.abort()},n!==void 0?n:ZF),UA({appId:r,apiKey:i,measurementId:s},o,a,e)}async function UA(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=$A){var s;const{appId:o,measurementId:a}=t;try{await v3(r,e)}catch(l){if(a)return Kr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await m3(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!y3(u)){if(i.deleteThrottleMetadata(o),a)return Kr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const c=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?Gv(n,i.intervalMillis,d3):Gv(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(o,d),Kr.debug(`Calling attemptFetch again in ${c} millis`),UA(t,d,r,i)}}function v3(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(ri.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function y3(t){if(!(t instanceof ai)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class w3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function b3(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _3(){if(Zp())try{await uA()}catch(t){return Kr.warn(ri.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Kr.warn(ri.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function T3(t,e,n,r,i,s,o){var a;const l=g3(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Kr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Kr.error(f)),e.push(l);const u=_3().then(f=>{if(f)return r.getId()}),[c,d]=await Promise.all([l,u]);c3(s)||i3(s,c.measurementId),i("js",new Date);const h=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return h[JF]="firebase",h.update=!0,d!=null&&(h[XF]=d),i("config",c.measurementId,h),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.app=e}_delete(){return delete Ec[this.app.options.appId],Promise.resolve()}}let Ec={},Y1=[];const G1={};let Tg="dataLayer",S3="gtag",z1,FA,q1=!1;function C3(){const t=[];if(oA()&&t.push("This is a browser extension environment."),O$()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=ri.create("invalid-analytics-context",{errorInfo:e});Kr.warn(n.message)}}function I3(t,e,n){C3();const r=t.options.appId;if(!r)throw ri.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Kr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ri.create("no-api-key");if(Ec[r]!=null)throw ri.create("already-exists",{id:r});if(!q1){s3(Tg);const{wrappedGtag:s,gtagCore:o}=u3(Ec,Y1,G1,Tg,S3);FA=s,z1=o,q1=!0}return Ec[r]=T3(t,Y1,G1,e,z1,Tg,n),new E3(t)}function A3(t=Eu()){t=Lt(t);const e=us(t,Ff);return e.isInitialized()?e.getImmediate():k3(t)}function k3(t,e={}){const n=us(t,Ff);if(n.isInitialized()){const i=n.getImmediate();if(Zc(e,n.getOptions()))return i;throw ri.create("already-initialized")}return n.initialize({options:e})}function x3(t,e,n,r){t=Lt(t),b3(FA,Ec[t.app.options.appId],e,n,r).catch(i=>Kr.error(i))}const Q1="@firebase/analytics",X1="0.10.0";function P3(){Gr(new Or(Ff,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return I3(r,i,n)},"PUBLIC")),Gr(new Or("analytics-internal",t,"PRIVATE")),rr(Q1,X1),rr(Q1,X1,"esm2017");function t(e){try{const n=e.getProvider(Ff).getImmediate();return{logEvent:(r,i,s)=>x3(n,r,i,s)}}catch(n){throw ri.create("interop-component-reg-failed",{reason:n})}}}P3();var D3="firebase",R3="9.22.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(D3,R3,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=new Map,VA={activated:!1,tokenObservers:[]},O3={initialized:!1,enabled:!1};function Mn(t){return ny.get(t)||Object.assign({},VA)}function N3(t,e){return ny.set(t,e),ny.get(t)}function rm(){return O3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="https://content-firebaseappcheck.googleapis.com/v1",M3="exchangeRecaptchaV3Token",L3="exchangeDebugToken",J1={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},$3=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Sa,await F3(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Sa,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function F3(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},jr=new Mo("appCheck","AppCheck",V3);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function uw(t){if(!Mn(t).activated)throw jr.create("use-before-activation",{appName:t.name})}function jA(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),s=e-n*3600*24-r*3600-i*60;let o="";return n&&(o+=Sh(n)+"d:"),r&&(o+=Sh(r)+"h:"),o+=Sh(i)+"m:"+Sh(s)+"s",o}function Sh(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,s)}catch(d){throw jr.create("fetch-network-error",{originalErrorMessage:d==null?void 0:d.message})}if(o.status!==200)throw jr.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw jr.create("fetch-parse-error",{originalErrorMessage:d==null?void 0:d.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw jr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=Number(l[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+u,issuedAtTimeMillis:c}}function B3(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${BA}/projects/${n}/apps/${r}:${M3}?key=${i}`,body:{recaptcha_v3_token:e}}}function HA(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${BA}/projects/${n}/apps/${r}:${L3}?key=${i}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3="firebase-app-check-database",H3=1,td="firebase-app-check-store",WA="debug-token";let Ch=null;function KA(){return Ch||(Ch=new Promise((t,e)=>{try{const n=indexedDB.open(j3,H3);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(jr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(td,{keyPath:"compositeKey"})}}}catch(n){e(jr.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Ch)}function W3(t){return GA(zA(t))}function K3(t,e){return YA(zA(t),e)}function Y3(t){return YA(WA,t)}function G3(){return GA(WA)}async function YA(t,e){const r=(await KA()).transaction(td,"readwrite"),s=r.objectStore(td).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(jr.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}async function GA(t){const n=(await KA()).transaction(td,"readonly"),i=n.objectStore(td).get(t);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o(jr.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function zA(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Tu("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(t){if(Zp()){let e;try{e=await W3(t)}catch(n){nd.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function Eg(t,e){return Zp()?K3(t,e).catch(n=>{nd.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function q3(){let t;try{t=await G3()}catch{}if(t)return t;{const e=K$();return Y3(e).catch(n=>nd.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(){return rm().enabled}async function hw(){const t=rm();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Q3(){const t=eA(),e=rm();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new Sa;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(q3())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3={error:"UNKNOWN_ERROR"};function J3(t){return Xp.encodeString(JSON.stringify(t),!1)}async function ry(t,e=!1){const n=t.app;uw(n);const r=Mn(n);let i=r.token,s;if(i&&!_l(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(_l(l)?i=l:await Eg(n,void 0))}if(!e&&i&&_l(i))return{token:i.token};let o=!1;if(dw()){r.exchangeTokenPromise||(r.exchangeTokenPromise=cw(HA(n,await hw()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const l=await r.exchangeTokenPromise;return await Eg(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Mn(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?nd.warn(l.message):nd.error(l),s=l}let a;return i?s?_l(i)?a={token:i.token,internalError:s}:a=tT(s):(a={token:i.token},r.token=i,await Eg(n,i)):a=tT(s),o&&XA(n,a),a}async function Z3(t){const e=t.app;uw(e);const{provider:n}=Mn(e);if(dw()){const r=await hw(),{token:i}=await cw(HA(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function qA(t,e,n,r){const{app:i}=t,s=Mn(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&_l(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),eT(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>eT(t))}function QA(t,e){const n=Mn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function eT(t){const{app:e}=t,n=Mn(e);let r=n.tokenRefresher;r||(r=e4(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function e4(t){const{app:e}=t;return new U3(async()=>{const n=Mn(e);let r;if(n.token?r=await ry(t,!0):r=await ry(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Mn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},J1.RETRIAL_MIN_WAIT,J1.RETRIAL_MAX_WAIT)}function XA(t,e){const n=Mn(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function _l(t){return t.expireTimeMillis-Date.now()>0}function tT(t){return{token:J3(X3),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Mn(this.app);for(const n of e)QA(this.app,n.next);return Promise.resolve()}}function n4(t,e){return new t4(t,e)}function r4(t){return{getToken:e=>ry(t,e),getLimitedUseToken:()=>Z3(t),addTokenListener:e=>qA(t,"INTERNAL",e),removeTokenListener:e=>QA(t.app,e)}}const i4="@firebase/app-check",s4="0.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="https://www.google.com/recaptcha/api.js";function a4(t,e){const n=new Sa,r=Mn(t);r.reCAPTCHAState={initialized:n};const i=l4(t),s=Z1(!1);return s?nT(t,e,s,i,n):d4(()=>{const o=Z1(!1);if(!o)throw new Error("no recaptcha");nT(t,e,o,i,n)}),n.promise}function nT(t,e,n,r,i){n.ready(()=>{c4(t,e,n,r),i.resolve(n)})}function l4(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function u4(t){uw(t);const n=await Mn(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Mn(t).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function c4(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{Mn(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Mn(t).reCAPTCHAState.succeeded=!1}}),s=Mn(t);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function d4(t){const e=document.createElement("script");e.src=o4,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,n,r;f4(this._throttleData);const i=await u4(this._app).catch(o=>{throw jr.create("recaptcha-error")});if(!(!((e=Mn(this._app).reCAPTCHAState)===null||e===void 0)&&e.succeeded))throw jr.create("recaptcha-error");let s;try{s=await cw(B3(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=h4(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),jr.create("throttled",{time:jA(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(e){this._app=e,this._heartbeatServiceProvider=us(e,"heartbeat"),a4(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof fw?this._siteKey===e._siteKey:!1}}function h4(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+$3,httpStatus:t};{const n=e?e.backoffCount:0,r=Gv(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function f4(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw jr.create("throttled",{time:jA(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t=Eu(),e){t=Lt(t);const n=us(t,"app-check");if(rm().initialized||Q3(),dw()&&hw().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw jr.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return m4(t,e.provider,e.isTokenAutoRefreshEnabled),Mn(t).isTokenAutoRefreshEnabled&&qA(r,"INTERNAL",()=>{}),r}function m4(t,e,n){const r=N3(t,Object.assign({},VA));r.activated=!0,r.provider=e,r.cachedTokenPromise=z3(t).then(i=>(i&&_l(i)&&(r.token=i,XA(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,r.provider.initialize(t)}const g4="app-check",rT="app-check-internal";function v4(){Gr(new Or(g4,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return n4(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(rT).initialize()})),Gr(new Or(rT,t=>{const e=t.getProvider("app-check").getImmediate();return r4(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),rr(i4,s4)}v4();const y4={apiKey:"AIzaSyAjt3RyE1KkK110jxZQUrm9kjfclWO126k",authDomain:"personal-website-c3482.firebaseapp.com",projectId:"personal-website-c3482",storageBucket:"personal-website-c3482.appspot.com",messagingSenderId:"110986644823",appId:"1:110986644823:web:4081c484521ba6b37bc212",measurementId:"G-PF7D6JKSC3"},w4=t=>{p4(t,{provider:new fw("6LdIOxQpAAAAAKwbiQMkZD5Fid1DmlsKvWxOIQA5"),isTokenAutoRefreshEnabled:!0})},b4=()=>{const t=fA(y4);return w4(t),A3(t),t},JA=b4();var _4=!1;/*!
  * pinia v2.1.3
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let ZA;const im=t=>ZA=t,ek=Symbol();function iy(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Sc;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Sc||(Sc={}));function T4(){const t=Op(!0),e=t.run(()=>ue({}));let n=[],r=[];const i=Id({install(s){im(i),i._a=s,s.provide(ek,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!_4?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const tk=()=>{};function iT(t,e,n,r=tk){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&Np()&&A0(i),i}function tl(t,...e){t.slice().forEach(n=>{n(...e)})}const E4=t=>t();function sy(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];iy(i)&&iy(r)&&t.hasOwnProperty(n)&&!zt(r)&&!Xi(r)?t[n]=sy(i,r):t[n]=r}return t}const S4=Symbol();function C4(t){return!iy(t)||!t.hasOwnProperty(S4)}const{assign:Qs}=Object;function I4(t){return!!(zt(t)&&t.effect)}function A4(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=i?i():{});const c=bC(n.state.value[t]);return Qs(c,s,Object.keys(o||{}).reduce((d,h)=>(d[h]=Id(re(()=>{im(n);const f=n._s.get(t);return o[h].call(f,f)})),d),{}))}return l=nk(t,u,e,n,r,!0),l}function nk(t,e,n={},r,i,s){let o;const a=Qs({actions:{}},n),l={deep:!0};let u,c,d=[],h=[],f;const p=r.state.value[t];!s&&!p&&(r.state.value[t]={}),ue({});let m;function y(x){let A;u=c=!1,typeof x=="function"?(x(r.state.value[t]),A={type:Sc.patchFunction,storeId:t,events:f}):(sy(r.state.value[t],x),A={type:Sc.patchObject,payload:x,storeId:t,events:f});const S=m=Symbol();Rr().then(()=>{m===S&&(u=!0)}),c=!0,tl(d,A,r.state.value[t])}const _=s?function(){const{state:A}=n,S=A?A():{};this.$patch(N=>{Qs(N,S)})}:tk;function v(){o.stop(),d=[],h=[],r._s.delete(t)}function b(x,A){return function(){im(r);const S=Array.from(arguments),N=[],U=[];function C(R){N.push(R)}function H(R){U.push(R)}tl(h,{args:S,name:x,store:w,after:C,onError:H});let O;try{O=A.apply(this&&this.$id===t?this:w,S)}catch(R){throw tl(U,R),R}return O instanceof Promise?O.then(R=>(tl(N,R),R)).catch(R=>(tl(U,R),Promise.reject(R))):(tl(N,O),O)}}const g={_p:r,$id:t,$onAction:iT.bind(null,h),$patch:y,$reset:_,$subscribe(x,A={}){const S=iT(d,x,A.detached,()=>N()),N=o.run(()=>pn(()=>r.state.value[t],U=>{(A.flush==="sync"?c:u)&&x({storeId:t,type:Sc.direct,events:f},U)},Qs({},l,A)));return S},$dispose:v},w=Ln(g);r._s.set(t,w);const T=r._a&&r._a.runWithContext||E4,M=r._e.run(()=>(o=Op(),T(()=>o.run(e))));for(const x in M){const A=M[x];if(zt(A)&&!I4(A)||Xi(A))s||(p&&C4(A)&&(zt(A)?A.value=p[x]:sy(A,p[x])),r.state.value[t][x]=A);else if(typeof A=="function"){const S=b(x,A);M[x]=S,a.actions[x]=A}}return Qs(w,M),Qs(ft(w),M),Object.defineProperty(w,"$state",{get:()=>r.state.value[t],set:x=>{y(A=>{Qs(A,x)})}}),r._p.forEach(x=>{Qs(w,o.run(()=>x({store:w,app:r._a,pinia:r,options:a})))}),p&&s&&n.hydrate&&n.hydrate(w.$state,p),u=!0,c=!0,w}function rk(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const u=qC();return a=a||(u?Pr(ek,null):null),a&&im(a),a=ZA,a._s.has(r)||(s?nk(r,e,i,a):A4(r,i,a)),a._s.get(r)}return o.$id=r,o}function Qt(t){{t=ft(t);const e={};for(const n in t){const r=t[n];(zt(r)||Xi(r))&&(e[n]=Kl(t,n))}return e}}const sT=(t,e)=>{const n=t.storage||sessionStorage,r=t.key||e.$id;if(t.paths){const i=t.paths.reduce((s,o)=>(s[o]=e.$state[o],s),{});n.setItem(r,JSON.stringify(i))}else n.setItem(r,JSON.stringify(e.$state))};var k4=({options:t,store:e})=>{var n,r,i,s;if((n=t.persist)!=null&&n.enabled){const o=[{key:e.$id,storage:sessionStorage}],a=(i=(r=t.persist)==null?void 0:r.strategies)!=null&&i.length?(s=t.persist)==null?void 0:s.strategies:o;a.forEach(l=>{const u=l.storage||sessionStorage,c=l.key||e.$id,d=u.getItem(c);d&&(e.$patch(JSON.parse(d)),sT(l,e))}),e.$subscribe(()=>{a.forEach(l=>{sT(l,e)})})}};const ik=T4();ik.use(k4);const Ar=class Ar{constructor(e,n,r={}){Ar.log(r.debug,n),r.route&&o_.push({name:r.route}),fL({title:e,type:e.toLowerCase(),text:n},5e3)}};jo(Ar,"success",(e,n={})=>new Ar("Success",e,n)),jo(Ar,"warning",(e,n={})=>new Ar("Warning",e,n)),jo(Ar,"error",(e,n={})=>new Ar("Error",e,n)),jo(Ar,"generalError",(e,n)=>new Ar("Error",(n==null?void 0:n.message)||sk,{debug:e})),jo(Ar,"firebaseError",(e,n)=>(Ar.log(e,n),n instanceof ai?n.message=Sg[n.code]:n instanceof Error&&Object.keys(Sg).includes(n.name)?n.message=Sg[n.name]:n=void 0,Ar.generalError(e,n))),jo(Ar,"log",(e,n)=>{e&&console.log(n)});let He=Ar;const sk="Something went wrong",Sg={"":sk,"auth/user-not-found":"Unknown user","auth/invalid-email":"Invalid e-mail address","auth/email-already-in-use":"E-mail already in use","auth/wrong-password":"Wrong password","auth/too-many-requests":"Temporarily blocked","auth/weak-password":"Weak password","auth/requires-recent-login":"You need to re-login to do this","permission-denied":"Not logged in or no permission"};var x4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Re,pw=pw||{},it=x4||self;function sm(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Rd(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function P4(t){return Object.prototype.hasOwnProperty.call(t,Cg)&&t[Cg]||(t[Cg]=++D4)}var Cg="closure_uid_"+(1e9*Math.random()>>>0),D4=0;function R4(t,e,n){return t.call.apply(t.bind,arguments)}function O4(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function yr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?yr=R4:yr=O4,yr.apply(null,arguments)}function Ih(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Yn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function $o(){this.s=this.s,this.o=this.o}var N4=0;$o.prototype.s=!1;$o.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),N4!=0)&&P4(this)};$o.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ok=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function mw(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function oT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(sm(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function wr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}wr.prototype.h=function(){this.defaultPrevented=!0};var M4=function(){if(!it.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{it.addEventListener("test",()=>{},e),it.removeEventListener("test",()=>{},e)}catch{}return t}();function rd(t){return/^[\s\xa0]*$/.test(t)}function om(){var t=it.navigator;return t&&(t=t.userAgent)?t:""}function Hi(t){return om().indexOf(t)!=-1}function gw(t){return gw[" "](t),t}gw[" "]=function(){};function L4(t,e){var n=k5;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var $4=Hi("Opera"),Zl=Hi("Trident")||Hi("MSIE"),ak=Hi("Edge"),oy=ak||Zl,lk=Hi("Gecko")&&!(om().toLowerCase().indexOf("webkit")!=-1&&!Hi("Edge"))&&!(Hi("Trident")||Hi("MSIE"))&&!Hi("Edge"),U4=om().toLowerCase().indexOf("webkit")!=-1&&!Hi("Edge");function uk(){var t=it.document;return t?t.documentMode:void 0}var ay;e:{var Ig="",Ag=function(){var t=om();if(lk)return/rv:([^\);]+)(\)|;)/.exec(t);if(ak)return/Edge\/([\d\.]+)/.exec(t);if(Zl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(U4)return/WebKit\/(\S+)/.exec(t);if($4)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Ag&&(Ig=Ag?Ag[1]:""),Zl){var kg=uk();if(kg!=null&&kg>parseFloat(Ig)){ay=String(kg);break e}}ay=Ig}var ly;if(it.document&&Zl){var aT=uk();ly=aT||parseInt(ay,10)||void 0}else ly=void 0;var F4=ly;function id(t,e){if(wr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(lk){e:{try{gw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:V4[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&id.$.h.call(this)}}Yn(id,wr);var V4={2:"touch",3:"pen",4:"mouse"};id.prototype.h=function(){id.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Od="closure_listenable_"+(1e6*Math.random()|0),B4=0;function j4(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++B4,this.fa=this.ia=!1}function am(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function vw(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function H4(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function ck(t){const e={};for(const n in t)e[n]=t[n];return e}const lT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dk(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<lT.length;s++)n=lT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lm(t){this.src=t,this.g={},this.h=0}lm.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=cy(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new j4(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function uy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=ok(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(am(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function cy(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var yw="closure_lm_"+(1e6*Math.random()|0),xg={};function hk(t,e,n,r,i){if(r&&r.once)return pk(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)hk(t,e[s],n,r,i);return null}return n=_w(n),t&&t[Od]?t.O(e,n,Rd(r)?!!r.capture:!!r,i):fk(t,e,n,!1,r,i)}function fk(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Rd(i)?!!i.capture:!!i,a=bw(t);if(a||(t[yw]=a=new lm(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=W4(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)M4||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gk(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function W4(){function t(n){return e.call(t.src,t.listener,n)}const e=K4;return t}function pk(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)pk(t,e[s],n,r,i);return null}return n=_w(n),t&&t[Od]?t.P(e,n,Rd(r)?!!r.capture:!!r,i):fk(t,e,n,!0,r,i)}function mk(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)mk(t,e[s],n,r,i);else r=Rd(r)?!!r.capture:!!r,n=_w(n),t&&t[Od]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=cy(s,n,r,i),-1<n&&(am(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=bw(t))&&(e=t.g[e.toString()],t=-1,e&&(t=cy(e,n,r,i)),(n=-1<t?e[t]:null)&&ww(n))}function ww(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Od])uy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gk(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bw(e))?(uy(n,t),n.h==0&&(n.src=null,e[yw]=null)):am(t)}}}function gk(t){return t in xg?xg[t]:xg[t]="on"+t}function K4(t,e){if(t.fa)t=!0;else{e=new id(e,this);var n=t.listener,r=t.la||t.src;t.ia&&ww(t),t=n.call(r,e)}return t}function bw(t){return t=t[yw],t instanceof lm?t:null}var Pg="__closure_events_fn_"+(1e9*Math.random()>>>0);function _w(t){return typeof t=="function"?t:(t[Pg]||(t[Pg]=function(e){return t.handleEvent(e)}),t[Pg])}function Kn(){$o.call(this),this.i=new lm(this),this.S=this,this.J=null}Yn(Kn,$o);Kn.prototype[Od]=!0;Kn.prototype.removeEventListener=function(t,e,n,r){mk(this,t,e,n,r)};function ir(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new wr(e,t);else if(e instanceof wr)e.target=e.target||t;else{var i=e;e=new wr(r,t),dk(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Ah(o,r,!0,e)&&i}if(o=e.g=t,i=Ah(o,r,!0,e)&&i,i=Ah(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Ah(o,r,!1,e)&&i}Kn.prototype.N=function(){if(Kn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)am(n[r]);delete t.g[e],t.h--}}this.J=null};Kn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Kn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ah(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&uy(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Tw=it.JSON.stringify;class Y4{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function G4(){var t=Ew;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class z4{constructor(){this.h=this.g=null}add(e,n){const r=vk.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var vk=new Y4(()=>new q4,t=>t.reset());class q4{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Q4(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function X4(t){it.setTimeout(()=>{throw t},0)}let sd,od=!1,Ew=new z4,yk=()=>{const t=it.Promise.resolve(void 0);sd=()=>{t.then(J4)}};var J4=()=>{for(var t;t=G4();){try{t.h.call(t.g)}catch(n){X4(n)}var e=vk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}od=!1};function um(t,e){Kn.call(this),this.h=t||1,this.g=e||it,this.j=yr(this.qb,this),this.l=Date.now()}Yn(um,Kn);Re=um.prototype;Re.ga=!1;Re.T=null;Re.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ir(this,"tick"),this.ga&&(Sw(this),this.start()))}};Re.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Sw(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Re.N=function(){um.$.N.call(this),Sw(this),delete this.g};function Cw(t,e,n){if(typeof t=="function")n&&(t=yr(t,n));else if(t&&typeof t.handleEvent=="function")t=yr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:it.setTimeout(t,e||0)}function wk(t){t.g=Cw(()=>{t.g=null,t.i&&(t.i=!1,wk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Z4 extends $o{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wk(this)}N(){super.N(),this.g&&(it.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ad(t){$o.call(this),this.h=t,this.g={}}Yn(ad,$o);var uT=[];function bk(t,e,n,r){Array.isArray(n)||(n&&(uT[0]=n.toString()),n=uT);for(var i=0;i<n.length;i++){var s=hk(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function _k(t){vw(t.g,function(e,n){this.g.hasOwnProperty(n)&&ww(e)},t),t.g={}}ad.prototype.N=function(){ad.$.N.call(this),_k(this)};ad.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function cm(){this.g=!0}cm.prototype.Ea=function(){this.g=!1};function e5(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&d[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function t5(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Tl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+r5(t,n)+(r?" "+r:"")})}function n5(t,e){t.info(function(){return"TIMEOUT: "+e})}cm.prototype.info=function(){};function r5(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Tw(n)}catch{return e}}var Ha={},cT=null;function dm(){return cT=cT||new Kn}Ha.Ta="serverreachability";function Tk(t){wr.call(this,Ha.Ta,t)}Yn(Tk,wr);function ld(t){const e=dm();ir(e,new Tk(e))}Ha.STAT_EVENT="statevent";function Ek(t,e){wr.call(this,Ha.STAT_EVENT,t),this.stat=e}Yn(Ek,wr);function xr(t){const e=dm();ir(e,new Ek(e,t))}Ha.Ua="timingevent";function Sk(t,e){wr.call(this,Ha.Ua,t),this.size=e}Yn(Sk,wr);function Nd(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return it.setTimeout(function(){t()},e)}var hm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ck={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Iw(){}Iw.prototype.h=null;function dT(t){return t.h||(t.h=t.i())}function Ik(){}var Md={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Aw(){wr.call(this,"d")}Yn(Aw,wr);function kw(){wr.call(this,"c")}Yn(kw,wr);var dy;function fm(){}Yn(fm,Iw);fm.prototype.g=function(){return new XMLHttpRequest};fm.prototype.i=function(){return{}};dy=new fm;function Ld(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ad(this),this.P=i5,t=oy?125:void 0,this.V=new um(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ak}function Ak(){this.i=null,this.g="",this.h=!1}var i5=45e3,hy={},Vf={};Re=Ld.prototype;Re.setTimeout=function(t){this.P=t};function fy(t,e,n){t.L=1,t.v=mm(Ps(e)),t.s=n,t.S=!0,kk(t,null)}function kk(t,e){t.G=Date.now(),$d(t),t.A=Ps(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Lk(n.i,"t",r),t.C=0,n=t.l.J,t.h=new Ak,t.g=rx(t.l,n?e:null,!t.s),0<t.O&&(t.M=new Z4(yr(t.Pa,t,t.g),t.O)),bk(t.U,t.g,"readystatechange",t.nb),e=t.I?ck(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),ld(),e5(t.j,t.u,t.A,t.m,t.W,t.s)}Re.nb=function(t){t=t.target;const e=this.M;e&&Yi(t)==3?e.l():this.Pa(t)};Re.Pa=function(t){try{if(t==this.g)e:{const c=Yi(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>c)&&(c!=3||oy||this.g&&(this.h.h||this.g.ja()||mT(this.g)))){this.J||c!=4||e==7||(e==8||0>=d?ld(3):ld(2)),pm(this);var n=this.g.da();this.ca=n;t:if(xk(this)){var r=mT(this.g);t="";var i=r.length,s=Yi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sa(this),Cc(this);var o="";break t}this.h.i=new it.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,t5(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rd(a)){var u=a;break t}}u=null}if(n=u)Tl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,py(this,n);else{this.i=!1,this.o=3,xr(12),sa(this),Cc(this);break e}}this.S?(Pk(this,c,o),oy&&this.i&&c==3&&(bk(this.U,this.V,"tick",this.mb),this.V.start())):(Tl(this.j,this.m,o,null),py(this,o)),c==4&&sa(this),this.i&&!this.J&&(c==4?Zk(this.l,this):(this.i=!1,$d(this)))}else C5(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,xr(12)):(this.o=0,xr(13)),sa(this),Cc(this)}}}catch{}finally{}};function xk(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function Pk(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=s5(t,n),i==Vf){e==4&&(t.o=4,xr(14),r=!1),Tl(t.j,t.m,null,"[Incomplete Response]");break}else if(i==hy){t.o=4,xr(15),Tl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Tl(t.j,t.m,i,null),py(t,i);xk(t)&&i!=Vf&&i!=hy&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,xr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Nw(e),e.M=!0,xr(11))):(Tl(t.j,t.m,n,"[Invalid Chunked Response]"),sa(t),Cc(t))}Re.mb=function(){if(this.g){var t=Yi(this.g),e=this.g.ja();this.C<e.length&&(pm(this),Pk(this,t,e),this.i&&t!=4&&$d(this))}};function s5(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Vf:(n=Number(e.substring(n,r)),isNaN(n)?hy:(r+=1,r+n>e.length?Vf:(e=e.slice(r,r+n),t.C=r+n,e)))}Re.cancel=function(){this.J=!0,sa(this)};function $d(t){t.Y=Date.now()+t.P,Dk(t,t.P)}function Dk(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Nd(yr(t.lb,t),e)}function pm(t){t.B&&(it.clearTimeout(t.B),t.B=null)}Re.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(n5(this.j,this.A),this.L!=2&&(ld(),xr(17)),sa(this),this.o=2,Cc(this)):Dk(this,this.Y-t)};function Cc(t){t.l.H==0||t.J||Zk(t.l,t)}function sa(t){pm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Sw(t.V),_k(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function py(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||my(n.i,t))){if(!t.K&&my(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Hf(n),ym(n);else break e;Ow(n),xr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Nd(yr(n.ib,n),6e3));if(1>=Fk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else oa(n,11)}else if((t.K||n.g==t)&&Hf(n),!rd(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(xw(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,tn(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=nx(r,r.J?r.pa:null,r.Y),o.K){Vk(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(pm(a),$d(a)),r.g=o}else Xk(r);0<n.j.length&&wm(n)}else u[0]!="stop"&&u[0]!="close"||oa(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?oa(n,7):Rw(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}ld(4)}catch{}}function o5(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(sm(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function a5(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(sm(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Rk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(sm(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=a5(t),r=o5(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Ok=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function l5(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ha(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ha){this.h=t.h,Bf(this,t.j),this.s=t.s,this.g=t.g,jf(this,t.m),this.l=t.l;var e=t.i,n=new ud;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),hT(this,n),this.o=t.o}else t&&(e=String(t).match(Ok))?(this.h=!1,Bf(this,e[1]||"",!0),this.s=ic(e[2]||""),this.g=ic(e[3]||"",!0),jf(this,e[4]),this.l=ic(e[5]||"",!0),hT(this,e[6]||"",!0),this.o=ic(e[7]||"")):(this.h=!1,this.i=new ud(null,this.h))}ha.prototype.toString=function(){var t=[],e=this.j;e&&t.push(sc(e,fT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(sc(e,fT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(sc(n,n.charAt(0)=="/"?d5:c5,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",sc(n,f5)),t.join("")};function Ps(t){return new ha(t)}function Bf(t,e,n){t.j=n?ic(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function jf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function hT(t,e,n){e instanceof ud?(t.i=e,p5(t.i,t.h)):(n||(e=sc(e,h5)),t.i=new ud(e,t.h))}function tn(t,e,n){t.i.set(e,n)}function mm(t){return tn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ic(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,u5),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function u5(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var fT=/[#\/\?@]/g,c5=/[#\?:]/g,d5=/[#\?]/g,h5=/[#\?@]/g,f5=/#/g;function ud(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Uo(t){t.g||(t.g=new Map,t.h=0,t.i&&l5(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Re=ud.prototype;Re.add=function(t,e){Uo(this),this.i=null,t=Su(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Nk(t,e){Uo(t),e=Su(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Mk(t,e){return Uo(t),e=Su(t,e),t.g.has(e)}Re.forEach=function(t,e){Uo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};Re.ta=function(){Uo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};Re.Z=function(t){Uo(this);let e=[];if(typeof t=="string")Mk(this,t)&&(e=e.concat(this.g.get(Su(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Re.set=function(t,e){return Uo(this),this.i=null,t=Su(this,t),Mk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Re.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Lk(t,e,n){Nk(t,e),0<n.length&&(t.i=null,t.g.set(Su(t,e),mw(n)),t.h+=n.length)}Re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Su(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function p5(t,e){e&&!t.j&&(Uo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Nk(this,r),Lk(this,i,n))},t)),t.j=e}var m5=class{constructor(t,e){this.g=t,this.map=e}};function $k(t){this.l=t||g5,it.PerformanceNavigationTiming?(t=it.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(it.g&&it.g.Ka&&it.g.Ka()&&it.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var g5=10;function Uk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Fk(t){return t.h?1:t.g?t.g.size:0}function my(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function xw(t,e){t.g?t.g.add(e):t.h=e}function Vk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}$k.prototype.cancel=function(){if(this.i=Bk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Bk(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return mw(t.i)}var v5=class{stringify(t){return it.JSON.stringify(t,void 0)}parse(t){return it.JSON.parse(t,void 0)}};function y5(){this.g=new v5}function w5(t,e,n){const r=n||"";try{Rk(t,function(i,s){let o=i;Rd(i)&&(o=Tw(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function b5(t,e){const n=new cm;if(it.Image){const r=new Image;r.onload=Ih(kh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ih(kh,n,r,"TestLoadImage: error",!1,e),r.onabort=Ih(kh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ih(kh,n,r,"TestLoadImage: timeout",!1,e),it.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function kh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ud(t){this.l=t.fc||null,this.j=t.ob||!1}Yn(Ud,Iw);Ud.prototype.g=function(){return new gm(this.l,this.j)};Ud.prototype.i=function(t){return function(){return t}}({});function gm(t,e){Kn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Pw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yn(gm,Kn);var Pw=0;Re=gm.prototype;Re.open=function(t,e){if(this.readyState!=Pw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,cd(this)};Re.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||it).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fd(this)),this.readyState=Pw};Re.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,cd(this)),this.g&&(this.readyState=3,cd(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof it.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function jk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Re.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Fd(this):cd(this),this.readyState==3&&jk(this)}};Re.Za=function(t){this.g&&(this.response=this.responseText=t,Fd(this))};Re.Ya=function(t){this.g&&(this.response=t,Fd(this))};Re.ka=function(){this.g&&Fd(this)};function Fd(t){t.readyState=4,t.l=null,t.j=null,t.A=null,cd(t)}Re.setRequestHeader=function(t,e){this.v.append(t,e)};Re.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Re.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function cd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(gm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var _5=it.JSON.parse;function bn(t){Kn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Hk,this.L=this.M=!1}Yn(bn,Kn);var Hk="",T5=/^https?$/i,E5=["POST","PUT"];Re=bn.prototype;Re.Oa=function(t){this.M=t};Re.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():dy.g(),this.C=this.u?dT(this.u):dT(dy),this.g.onreadystatechange=yr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){pT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=it.FormData&&t instanceof it.FormData,!(0<=ok(E5,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Yk(this),0<this.B&&((this.L=S5(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yr(this.ua,this)):this.A=Cw(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){pT(this,s)}};function S5(t){return Zl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Re.ua=function(){typeof pw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ir(this,"timeout"),this.abort(8))};function pT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Wk(t),vm(t)}function Wk(t){t.F||(t.F=!0,ir(t,"complete"),ir(t,"error"))}Re.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ir(this,"complete"),ir(this,"abort"),vm(this))};Re.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vm(this,!0)),bn.$.N.call(this)};Re.La=function(){this.s||(this.G||this.v||this.l?Kk(this):this.kb())};Re.kb=function(){Kk(this)};function Kk(t){if(t.h&&typeof pw<"u"&&(!t.C[1]||Yi(t)!=4||t.da()!=2)){if(t.v&&Yi(t)==4)Cw(t.La,0,t);else if(ir(t,"readystatechange"),Yi(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Ok)[1]||null;!i&&it.self&&it.self.location&&(i=it.self.location.protocol.slice(0,-1)),r=!T5.test(i?i.toLowerCase():"")}n=r}if(n)ir(t,"complete"),ir(t,"success");else{t.m=6;try{var s=2<Yi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Wk(t)}}finally{vm(t)}}}}function vm(t,e){if(t.g){Yk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ir(t,"ready");try{n.onreadystatechange=r}catch{}}}function Yk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(it.clearTimeout(t.A),t.A=null)}Re.isActive=function(){return!!this.g};function Yi(t){return t.g?t.g.readyState:0}Re.da=function(){try{return 2<Yi(this)?this.g.status:-1}catch{return-1}};Re.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Re.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),_5(e)}};function mT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Hk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function C5(t){const e={};t=(t.g&&2<=Yi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(rd(t[r]))continue;var n=Q4(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}H4(e,function(r){return r.join(", ")})}Re.Ia=function(){return this.m};Re.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Gk(t){let e="";return vw(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Dw(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):tn(t,e,n))}function Uu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zk(t){this.Ga=0,this.j=[],this.l=new cm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uu("baseRetryDelayMs",5e3,t),this.hb=Uu("retryDelaySeedMs",1e4,t),this.eb=Uu("forwardChannelMaxRetries",2,t),this.xa=Uu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new $k(t&&t.concurrentRequestLimit),this.Ja=new y5,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Re=zk.prototype;Re.ra=8;Re.H=1;function Rw(t){if(qk(t),t.H==3){var e=t.W++,n=Ps(t.I);if(tn(n,"SID",t.K),tn(n,"RID",e),tn(n,"TYPE","terminate"),Vd(t,n),e=new Ld(t,t.l,e),e.L=2,e.v=mm(Ps(n)),n=!1,it.navigator&&it.navigator.sendBeacon)try{n=it.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&it.Image&&(new Image().src=e.v,n=!0),n||(e.g=rx(e.l,null),e.g.ha(e.v)),e.G=Date.now(),$d(e)}tx(t)}function ym(t){t.g&&(Nw(t),t.g.cancel(),t.g=null)}function qk(t){ym(t),t.u&&(it.clearTimeout(t.u),t.u=null),Hf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&it.clearTimeout(t.m),t.m=null)}function wm(t){if(!Uk(t.i)&&!t.m){t.m=!0;var e=t.Na;sd||yk(),od||(sd(),od=!0),Ew.add(e,t),t.C=0}}function I5(t,e){return Fk(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Nd(yr(t.Na,t,e),ex(t,t.C)),t.C++,!0)}Re.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Ld(this,this.l,t);let s=this.s;if(this.U&&(s?(s=ck(s),dk(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Qk(this,i,e),n=Ps(this.I),tn(n,"RID",t),tn(n,"CVER",22),this.F&&tn(n,"X-HTTP-Session-Id",this.F),Vd(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Gk(s)))+"&"+e:this.o&&Dw(n,this.o,s)),xw(this.i,i),this.bb&&tn(n,"TYPE","init"),this.P?(tn(n,"$req",e),tn(n,"SID","null"),i.aa=!0,fy(i,n,null)):fy(i,n,e),this.H=2}}else this.H==3&&(t?gT(this,t):this.j.length==0||Uk(this.i)||gT(this))};function gT(t,e){var n;e?n=e.m:n=t.W++;const r=Ps(t.I);tn(r,"SID",t.K),tn(r,"RID",n),tn(r,"AID",t.V),Vd(t,r),t.o&&t.s&&Dw(r,t.o,t.s),n=new Ld(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Qk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),xw(t.i,n),fy(n,r,e)}function Vd(t,e){t.na&&vw(t.na,function(n,r){tn(e,r,n)}),t.h&&Rk({},function(n,r){tn(e,r,n)})}function Qk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?yr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{w5(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Xk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;sd||yk(),od||(sd(),od=!0),Ew.add(e,t),t.A=0}}function Ow(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Nd(yr(t.Ma,t),ex(t,t.A)),t.A++,!0)}Re.Ma=function(){if(this.u=null,Jk(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Nd(yr(this.jb,this),t)}};Re.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xr(10),ym(this),Jk(this))};function Nw(t){t.B!=null&&(it.clearTimeout(t.B),t.B=null)}function Jk(t){t.g=new Ld(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ps(t.wa);tn(e,"RID","rpc"),tn(e,"SID",t.K),tn(e,"AID",t.V),tn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&tn(e,"TO",t.qa),tn(e,"TYPE","xmlhttp"),Vd(t,e),t.o&&t.s&&Dw(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=mm(Ps(e)),n.s=null,n.S=!0,kk(n,t)}Re.ib=function(){this.v!=null&&(this.v=null,ym(this),Ow(this),xr(19))};function Hf(t){t.v!=null&&(it.clearTimeout(t.v),t.v=null)}function Zk(t,e){var n=null;if(t.g==e){Hf(t),Nw(t),t.g=null;var r=2}else if(my(t.i,e))n=e.F,Vk(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=dm(),ir(r,new Sk(r,n)),wm(t)}else Xk(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&I5(t,e)||r==2&&Ow(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:oa(t,5);break;case 4:oa(t,10);break;case 3:oa(t,6);break;default:oa(t,2)}}}function ex(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function oa(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=yr(t.pb,t);n||(n=new ha("//www.google.com/images/cleardot.gif"),it.location&&it.location.protocol=="http"||Bf(n,"https"),mm(n)),b5(n.toString(),r)}else xr(2);t.H=0,t.h&&t.h.za(e),tx(t),qk(t)}Re.pb=function(t){t?(this.l.info("Successfully pinged google.com"),xr(2)):(this.l.info("Failed to ping google.com"),xr(1))};function tx(t){if(t.H=0,t.ma=[],t.h){const e=Bk(t.i);(e.length!=0||t.j.length!=0)&&(oT(t.ma,e),oT(t.ma,t.j),t.i.i.length=0,mw(t.j),t.j.length=0),t.h.ya()}}function nx(t,e,n){var r=n instanceof ha?Ps(n):new ha(n);if(r.g!="")e&&(r.g=e+"."+r.g),jf(r,r.m);else{var i=it.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ha(null);r&&Bf(s,r),e&&(s.g=e),i&&jf(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&tn(r,n,e),tn(r,"VER",t.ra),Vd(t,r),r}function rx(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new bn(new Ud({ob:!0})):new bn(t.va),e.Oa(t.J),e}Re.isActive=function(){return!!this.h&&this.h.isActive(this)};function ix(){}Re=ix.prototype;Re.Ba=function(){};Re.Aa=function(){};Re.za=function(){};Re.ya=function(){};Re.isActive=function(){return!0};Re.Va=function(){};function Wf(){if(Zl&&!(10<=Number(F4)))throw Error("Environmental error: no available transport.")}Wf.prototype.g=function(t,e){return new si(t,e)};function si(t,e){Kn.call(this),this.g=new zk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!rd(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rd(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Cu(this)}Yn(si,Kn);si.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;xr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=nx(t,null,t.Y),wm(t)};si.prototype.close=function(){Rw(this.g)};si.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Tw(t),t=n);e.j.push(new m5(e.fb++,t)),e.H==3&&wm(e)};si.prototype.N=function(){this.g.h=null,delete this.j,Rw(this.g),delete this.g,si.$.N.call(this)};function sx(t){Aw.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Yn(sx,Aw);function ox(){kw.call(this),this.status=1}Yn(ox,kw);function Cu(t){this.g=t}Yn(Cu,ix);Cu.prototype.Ba=function(){ir(this.g,"a")};Cu.prototype.Aa=function(t){ir(this.g,new sx(t))};Cu.prototype.za=function(t){ir(this.g,new ox)};Cu.prototype.ya=function(){ir(this.g,"b")};function A5(){this.blockSize=-1}function Li(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Yn(Li,A5);Li.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Dg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Li.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Dg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Dg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Dg(this,r),i=0;break}}this.h=i,this.i+=e};Li.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Wt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var k5={};function Mw(t){return-128<=t&&128>t?L4(t,function(e){return new Wt([e|0],0>e?-1:0)}):new Wt([t|0],0>t?-1:0)}function Gi(t){if(isNaN(t)||!isFinite(t))return Ml;if(0>t)return Jn(Gi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=gy;return new Wt(e,0)}function ax(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Jn(ax(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Gi(Math.pow(e,8)),r=Ml,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Gi(Math.pow(e,s)),r=r.R(s).add(Gi(o))):(r=r.R(n),r=r.add(Gi(o)))}return r}var gy=4294967296,Ml=Mw(0),vy=Mw(1),vT=Mw(16777216);Re=Wt.prototype;Re.ea=function(){if(hi(this))return-Jn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:gy+r)*e,e*=gy}return t};Re.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ys(this))return"0";if(hi(this))return"-"+Jn(this).toString(t);for(var e=Gi(Math.pow(t,6)),n=this,r="";;){var i=Yf(n,e).g;n=Kf(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ys(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};Re.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ys(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function hi(t){return t.h==-1}Re.X=function(t){return t=Kf(this,t),hi(t)?-1:ys(t)?0:1};function Jn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Wt(n,~t.h).add(vy)}Re.abs=function(){return hi(this)?Jn(this):this};Re.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Wt(n,n[n.length-1]&-2147483648?-1:0)};function Kf(t,e){return t.add(Jn(e))}Re.R=function(t){if(ys(this)||ys(t))return Ml;if(hi(this))return hi(t)?Jn(this).R(Jn(t)):Jn(Jn(this).R(t));if(hi(t))return Jn(this.R(Jn(t)));if(0>this.X(vT)&&0>t.X(vT))return Gi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,xh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,xh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,xh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,xh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Wt(n,0)};function xh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Fu(t,e){this.g=t,this.h=e}function Yf(t,e){if(ys(e))throw Error("division by zero");if(ys(t))return new Fu(Ml,Ml);if(hi(t))return e=Yf(Jn(t),e),new Fu(Jn(e.g),Jn(e.h));if(hi(e))return e=Yf(t,Jn(e)),new Fu(Jn(e.g),e.h);if(30<t.g.length){if(hi(t)||hi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vy,r=e;0>=r.X(t);)n=yT(n),r=yT(r);var i=nl(n,1),s=nl(r,1);for(r=nl(r,2),n=nl(n,2);!ys(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=nl(r,1),n=nl(n,1)}return e=Kf(t,i.R(e)),new Fu(i,e)}for(i=Ml;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Gi(n),o=s.R(e);hi(o)||0<o.X(t);)n-=r,s=Gi(n),o=s.R(e);ys(s)&&(s=vy),i=i.add(s),t=Kf(t,o)}return new Fu(i,t)}Re.gb=function(t){return Yf(this,t).h};Re.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Wt(n,this.h&t.h)};Re.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Wt(n,this.h|t.h)};Re.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Wt(n,this.h^t.h)};function yT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Wt(n,t.h)}function nl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Wt(i,t.h)}Wf.prototype.createWebChannel=Wf.prototype.g;si.prototype.send=si.prototype.u;si.prototype.open=si.prototype.m;si.prototype.close=si.prototype.close;hm.NO_ERROR=0;hm.TIMEOUT=8;hm.HTTP_ERROR=6;Ck.COMPLETE="complete";Ik.EventType=Md;Md.OPEN="a";Md.CLOSE="b";Md.ERROR="c";Md.MESSAGE="d";Kn.prototype.listen=Kn.prototype.O;bn.prototype.listenOnce=bn.prototype.P;bn.prototype.getLastError=bn.prototype.Sa;bn.prototype.getLastErrorCode=bn.prototype.Ia;bn.prototype.getStatus=bn.prototype.da;bn.prototype.getResponseJson=bn.prototype.Wa;bn.prototype.getResponseText=bn.prototype.ja;bn.prototype.send=bn.prototype.ha;bn.prototype.setWithCredentials=bn.prototype.Oa;Li.prototype.digest=Li.prototype.l;Li.prototype.reset=Li.prototype.reset;Li.prototype.update=Li.prototype.j;Wt.prototype.add=Wt.prototype.add;Wt.prototype.multiply=Wt.prototype.R;Wt.prototype.modulo=Wt.prototype.gb;Wt.prototype.compare=Wt.prototype.X;Wt.prototype.toNumber=Wt.prototype.ea;Wt.prototype.toString=Wt.prototype.toString;Wt.prototype.getBits=Wt.prototype.D;Wt.fromNumber=Gi;Wt.fromString=ax;var x5=function(){return new Wf},P5=function(){return dm()},Rg=hm,D5=Ck,R5=Ha,wT={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},O5=Ud,Ph=Ik,N5=bn,M5=Li,Ll=Wt;const bT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lr.UNAUTHENTICATED=new lr(null),lr.GOOGLE_CREDENTIALS=new lr("google-credentials-uid"),lr.FIRST_PARTY=new lr("first-party-uid"),lr.MOCK_USER=new lr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu="9.22.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new Tu("@firebase/firestore");function _T(){return ka.logLevel}function Ke(t,...e){if(ka.logLevel<=xt.DEBUG){const n=e.map(Lw);ka.debug(`Firestore (${Iu}): ${t}`,...n)}}function Ds(t,...e){if(ka.logLevel<=xt.ERROR){const n=e.map(Lw);ka.error(`Firestore (${Iu}): ${t}`,...n)}}function eu(t,...e){if(ka.logLevel<=xt.WARN){const n=e.map(Lw);ka.warn(`Firestore (${Iu}): ${t}`,...n)}}function Lw(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t="Unexpected state"){const e=`FIRESTORE (${Iu}) INTERNAL ASSERTION FAILED: `+t;throw Ds(e),new Error(e)}function rn(t,e){t||rt()}function ct(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends ai{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lr.UNAUTHENTICATED))}shutdown(){}}class $5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class U5{constructor(e){this.t=e,this.currentUser=lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Is,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Is)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rn(typeof r.accessToken=="string"),new lx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rn(e===null||typeof e=="string"),new lr(e)}}class F5{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=lr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class V5{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new F5(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j5{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{s.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rn(typeof n.token=="string"),this.T=n.token,new B5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=H5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Mt(t,e){return t<e?-1:t>e?1:0}function tu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dn=class sf{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sf.fromMillis(Date.now())}static fromDate(e){return sf.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new sf(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ot(e)}static min(){return new ot(new Dn(0,0))}static max(){return new ot(new Dn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cx=class yy{constructor(e,n,r){n===void 0?n=0:n>e.length&&rt(),r===void 0?r=e.length-n:r>e.length-n&&rt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yy.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yy?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},wn=class of extends cx{construct(e,n,r){return new of(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new of(n)}static emptyPath(){return new of([])}};const W5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let ss=class pl extends cx{construct(e,n,r){return new pl(e,n,r)}static isValidIdentifier(e){return W5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pl(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new xe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new xe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new xe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new xe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pl(n)}static emptyPath(){return new pl([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(wn.fromString(e))}static fromName(e){return new Ge(wn.fromString(e).popFirst(5))}static empty(){return new Ge(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new wn(e.slice()))}}function K5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ot.fromTimestamp(r===1e9?new Dn(n+1,0):new Dn(n,r));return new xo(i,Ge.empty(),e)}function Y5(t){return new xo(t.readTime,t.key,-1)}class xo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xo(ot.min(),Ge.empty(),-1)}static max(){return new xo(ot.max(),Ge.empty(),-1)}}function G5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ge.comparator(t.documentKey,e.documentKey),n!==0?n:Mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let q5=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==z5)throw t;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ke=class $r{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $r((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $r?n:$r.resolve(n)}catch(n){return $r.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$r.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$r.reject(n)}static resolve(e){return new $r((n,r)=>{n(e)})}static reject(e){return new $r((n,r)=>{r(e)})}static waitFor(e){return new $r((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$r.resolve(!1);for(const r of e)n=n.next(i=>i?$r.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $r((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new $r((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function jd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $w=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}};$w.ct=-1;function bm(t){return t==null}function Gf(t){return t===0&&1/t==-1/0}function Q5(t){return typeof t=="number"&&Number.isInteger(t)&&!Gf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rn=class wy{constructor(e,n){this.comparator=e,this.root=n||vo.EMPTY}insert(e,n){return new wy(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vo.BLACK,null,null))}remove(e){return new wy(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dh(this.root,e,this.comparator,!0)}},Dh=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},vo=class fs{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??fs.RED,this.left=i??fs.EMPTY,this.right=s??fs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new fs(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return fs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}};vo.EMPTY=null,vo.RED=!0,vo.BLACK=!1;vo.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(t,e,n,r,i){return this}insert(t,e,n){return new vo(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.comparator=e,this.data=new Rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ET(this.data.getIterator())}getIteratorFrom(e){return new ET(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof br)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new br(this.comparator);return n.data=e,n}}let ET=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.fields=e,e.sort(ss.comparator)}static empty(){return new Zr([])}unionWith(e){let n=new br(ss.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi=class by{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hx("Invalid base64 string: "+i):i}}(e);return new by(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new by(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};oi.EMPTY_BYTE_STRING=new oi("");const X5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(t){if(rn(!!t),typeof t=="string"){let e=0;const n=X5.exec(t);if(rn(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(t.seconds),nanos:xn(t.nanos)}}function xn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xa(t){return typeof t=="string"?oi.fromBase64String(t):oi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uw(t){const e=t.mapValue.fields.__previous_value__;return _m(e)?Uw(e):e}function dd(t){const e=Po(t.mapValue.fields.__local_write_time__.timestampValue);return new Dn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class hd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new hd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_m(t)?4:Z5(t)?9007199254740991:10:rt()}function os(t,e){if(t===e)return!0;const n=Pa(t);if(n!==Pa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dd(t).isEqual(dd(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Po(r.timestampValue),o=Po(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return xa(r.bytesValue).isEqual(xa(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return xn(r.geoPointValue.latitude)===xn(i.geoPointValue.latitude)&&xn(r.geoPointValue.longitude)===xn(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xn(r.integerValue)===xn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=xn(r.doubleValue),o=xn(i.doubleValue);return s===o?Gf(s)===Gf(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return tu(t.arrayValue.values||[],e.arrayValue.values||[],os);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(TT(s)!==TT(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!os(s[a],o[a])))return!1;return!0}(t,e);default:return rt()}}function fd(t,e){return(t.values||[]).find(n=>os(n,e))!==void 0}function nu(t,e){if(t===e)return 0;const n=Pa(t),r=Pa(e);if(n!==r)return Mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=xn(i.integerValue||i.doubleValue),a=xn(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return ST(t.timestampValue,e.timestampValue);case 4:return ST(dd(t),dd(e));case 5:return Mt(t.stringValue,e.stringValue);case 6:return function(i,s){const o=xa(i),a=xa(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Mt(o[l],a[l]);if(u!==0)return u}return Mt(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Mt(xn(i.latitude),xn(s.latitude));return o!==0?o:Mt(xn(i.longitude),xn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=nu(o[l],a[l]);if(u)return u}return Mt(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Rh.mapValue&&s===Rh.mapValue)return 0;if(i===Rh.mapValue)return 1;if(s===Rh.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const d=Mt(a[c],u[c]);if(d!==0)return d;const h=nu(o[a[c]],l[u[c]]);if(h!==0)return h}return Mt(a.length,u.length)}(t.mapValue,e.mapValue);default:throw rt()}}function ST(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Mt(t,e);const n=Po(t),r=Po(e),i=Mt(n.seconds,r.seconds);return i!==0?i:Mt(n.nanos,r.nanos)}function ru(t){return _y(t)}function _y(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Po(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?xa(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ge.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=_y(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${_y(r.fields[a])}`;return s+"}"}(t.mapValue):rt();var e,n}function zf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ty(t){return!!t&&"integerValue"in t}function Fw(t){return!!t&&"arrayValue"in t}function CT(t){return!!t&&"nullValue"in t}function IT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function af(t){return!!t&&"mapValue"in t}function Ic(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ic(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ic(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Z5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!af(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(n)}setAll(e){let n=ss.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ic(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());af(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];af(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Vr(Ic(this.value))}}function fx(t){const e=[];return Wa(t.fields,(n,r)=>{const i=new ss([n]);if(af(r)){const s=fx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ur(e,0,ot.min(),ot.min(),ot.min(),Vr.empty(),0)}static newFoundDocument(e,n,r,i){return new ur(e,1,n,ot.min(),r,i,0)}static newNoDocument(e,n){return new ur(e,2,n,ot.min(),ot.min(),Vr.empty(),0)}static newUnknownDocument(e,n){return new ur(e,3,n,ot.min(),ot.min(),Vr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=class{constructor(e,n){this.position=e,this.inclusive=n}};function AT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Ge.comparator(Ge.fromName(o.referenceValue),n.key):r=nu(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function kT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!os(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n="asc"){this.field=e,this.dir=n}}function e6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let px=class{},Bn=class mx extends px{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new n6(e,n,r):n==="array-contains"?new s6(e,r):n==="in"?new o6(e,r):n==="not-in"?new a6(e,r):n==="array-contains-any"?new l6(e,r):new mx(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new r6(e,r):new i6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(nu(n,this.value)):n!==null&&Pa(this.value)===Pa(n)&&this.matchesComparison(nu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}},Rs=class gx extends px{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new gx(e,n)}matches(e){return vx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}};function vx(t){return t.op==="and"}function yx(t){return t6(t)&&vx(t)}function t6(t){for(const e of t.filters)if(e instanceof Rs)return!1;return!0}function Ey(t){if(t instanceof Bn)return t.field.canonicalString()+t.op.toString()+ru(t.value);if(yx(t))return t.filters.map(e=>Ey(e)).join(",");{const e=t.filters.map(n=>Ey(n)).join(",");return`${t.op}(${e})`}}function wx(t,e){return t instanceof Bn?function(n,r){return r instanceof Bn&&n.op===r.op&&n.field.isEqual(r.field)&&os(n.value,r.value)}(t,e):t instanceof Rs?function(n,r){return r instanceof Rs&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&wx(s,r.filters[o]),!0):!1}(t,e):void rt()}function bx(t){return t instanceof Bn?function(e){return`${e.field.canonicalString()} ${e.op} ${ru(e.value)}`}(t):t instanceof Rs?function(e){return e.op.toString()+" {"+e.getFilters().map(bx).join(" ,")+"}"}(t):"Filter"}let n6=class extends Bn{constructor(e,n,r){super(e,n,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const n=Ge.comparator(e.key,this.key);return this.matchesComparison(n)}},r6=class extends Bn{constructor(e,n){super(e,"in",n),this.keys=_x("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},i6=class extends Bn{constructor(e,n){super(e,"not-in",n),this.keys=_x("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function _x(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ge.fromName(r.referenceValue))}let s6=class extends Bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fw(n)&&fd(n.arrayValue,this.value)}},o6=class extends Bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fd(this.value.arrayValue,n)}};class a6 extends Bn{constructor(e,n){super(e,"not-in",n)}matches(e){if(fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!fd(this.value.arrayValue,n)}}class l6 extends Bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u6=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}};function xT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new u6(t,e,n,r,i,s,o)}function Vw(t){const e=ct(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ey(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),bm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ru(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ru(r)).join(",")),e.dt=n}return e.dt}function Bw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!e6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kT(t.startAt,e.startAt)&&kT(t.endAt,e.endAt)}function Sy(t){return Ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}};function c6(t,e,n,r,i,s,o,a){return new Ka(t,e,n,r,i,s,o,a)}function jw(t){return new Ka(t)}function PT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Hw(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Tm(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Ww(t){return t.collectionGroup!==null}function fa(t){const e=ct(t);if(e.wt===null){e.wt=[];const n=Tm(e),r=Hw(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new $l(n)),e.wt.push(new $l(ss.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new $l(ss.keyField(),s))}}}return e.wt}function Os(t){const e=ct(t);if(!e._t)if(e.limitType==="F")e._t=xT(e.path,e.collectionGroup,fa(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of fa(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new $l(s.field,o))}const r=e.endAt?new iu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new iu(e.startAt.position,e.startAt.inclusive):null;e._t=xT(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function Cy(t,e){e.getFirstInequalityField(),Tm(t);const n=t.filters.concat([e]);return new Ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qf(t,e,n){return new Ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Em(t,e){return Bw(Os(t),Os(e))&&t.limitType===e.limitType}function Tx(t){return`${Vw(Os(t))}|lt:${t.limitType}`}function Iy(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>bx(r)).join(", ")}]`),bm(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ru(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ru(r)).join(",")),`Target(${n})`}(Os(t))}; limitType=${t.limitType})`}function Sm(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ge.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of fa(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=AT(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,fa(n),r)||n.endAt&&!function(i,s,o){const a=AT(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,fa(n),r))}(t,e)}function d6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ex(t){return(e,n)=>{let r=!1;for(const i of fa(t)){const s=h6(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function h6(t,e,n){const r=t.field.isKeyField()?Ge.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?nu(a,l):rt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return dx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new Rn(Ge.comparator);function Ns(){return f6}const Sx=new Rn(Ge.comparator);function oc(...t){let e=Sx;for(const n of t)e=e.insert(n.key,n);return e}function Cx(t){let e=Sx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function aa(){return Ac()}function Ix(){return Ac()}function Ac(){return new Au(t=>t.toString(),(t,e)=>t.isEqual(e))}const p6=new Rn(Ge.comparator),m6=new br(Ge.comparator);function gt(...t){let e=m6;for(const n of t)e=e.add(n);return e}const g6=new br(Mt);function v6(){return g6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function kx(t){return{integerValue:""+t}}function y6(t,e){return Q5(e)?kx(e):Ax(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this._=void 0}}function w6(t,e,n){return t instanceof Qf?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&_m(i)&&(i=Uw(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof pd?Px(t,e):t instanceof md?Dx(t,e):function(r,i){const s=xx(r,i),o=DT(s)+DT(r.gt);return Ty(s)&&Ty(r.gt)?kx(o):Ax(r.serializer,o)}(t,e)}function b6(t,e,n){return t instanceof pd?Px(t,e):t instanceof md?Dx(t,e):n}function xx(t,e){return t instanceof Xf?Ty(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Qf extends Cm{}class pd extends Cm{constructor(e){super(),this.elements=e}}function Px(t,e){const n=Rx(e);for(const r of t.elements)n.some(i=>os(i,r))||n.push(r);return{arrayValue:{values:n}}}class md extends Cm{constructor(e){super(),this.elements=e}}function Dx(t,e){let n=Rx(e);for(const r of t.elements)n=n.filter(i=>!os(i,r));return{arrayValue:{values:n}}}class Xf extends Cm{constructor(e,n){super(),this.serializer=e,this.gt=n}}function DT(t){return xn(t.integerValue||t.doubleValue)}function Rx(t){return Fw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _6(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof pd&&r instanceof pd||n instanceof md&&r instanceof md?tu(n.elements,r.elements,os):n instanceof Xf&&r instanceof Xf?os(n.gt,r.gt):n instanceof Qf&&r instanceof Qf}(t.transform,e.transform)}class T6{constructor(e,n){this.version=e,this.transformResults=n}}class gi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gi}static exists(e){return new gi(void 0,e)}static updateTime(e){return new gi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Im{}function Ox(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kw(t.key,gi.none()):new Hd(t.key,t.data,gi.none());{const n=t.data,r=Vr.empty();let i=new br(ss.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fo(t.key,r,new Zr(i.toArray()),gi.none())}}function E6(t,e,n){t instanceof Hd?function(r,i,s){const o=r.value.clone(),a=OT(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Fo?function(r,i,s){if(!lf(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=OT(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(Nx(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function kc(t,e,n,r){return t instanceof Hd?function(i,s,o,a){if(!lf(i.precondition,s))return o;const l=i.value.clone(),u=NT(i.fieldTransforms,a,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fo?function(i,s,o,a){if(!lf(i.precondition,s))return o;const l=NT(i.fieldTransforms,a,s),u=s.data;return u.setAll(Nx(i)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return lf(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function S6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=xx(r.transform,i||null);s!=null&&(n===null&&(n=Vr.empty()),n.set(r.field,s))}return n||null}function RT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&tu(n,r,(i,s)=>_6(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hd extends Im{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fo extends Im{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Nx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function OT(t,e,n){const r=new Map;rn(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,b6(o,a,n[i]))}return r}function NT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,w6(s,o,e))}return r}class Kw extends Im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C6 extends Im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&E6(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=kc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=kc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ix();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Ox(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ot.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),gt())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,(n,r)=>RT(n,r))&&tu(this.baseMutations,e.baseMutations,(n,r)=>RT(n,r))}}class Yw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){rn(e.mutations.length===r.length);let i=p6;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Yw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In,Tt;function x6(t){switch(t){default:return rt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function Mx(t){if(t===void 0)return Ds("GRPC error has no .code"),ge.UNKNOWN;switch(t){case In.OK:return ge.OK;case In.CANCELLED:return ge.CANCELLED;case In.UNKNOWN:return ge.UNKNOWN;case In.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case In.INTERNAL:return ge.INTERNAL;case In.UNAVAILABLE:return ge.UNAVAILABLE;case In.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case In.NOT_FOUND:return ge.NOT_FOUND;case In.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case In.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case In.ABORTED:return ge.ABORTED;case In.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case In.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case In.DATA_LOSS:return ge.DATA_LOSS;default:return rt()}}(Tt=In||(In={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Oh}static getOrCreateInstance(){return Oh===null&&(Oh=new Gw),Oh}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Oh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new Ll([4294967295,4294967295],0);function MT(t){const e=P6().encode(t),n=new M5;return n.update(e),new Uint8Array(n.digest())}function LT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ll([n,r],0),new Ll([i,s],0)]}class zw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ac(`Invalid padding: ${n}`);if(r<0)throw new ac(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ac(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ac(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Ll.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(Ll.fromNumber(r)));return i.compare(D6)===1&&(i=new Ll([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=MT(e),[r,i]=LT(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new zw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=MT(e),[r,i]=LT(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Wd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Am(ot.min(),i,new Rn(Mt),Ns(),gt())}}class Wd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wd(r,n,gt(),gt(),gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class Lx{constructor(e,n){this.targetId=e,this.Vt=n}}class $x{constructor(e,n,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $T{constructor(){this.St=0,this.Dt=FT(),this.Ct=oi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=gt(),n=gt(),r=gt();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:rt()}}),new Wd(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=FT()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class R6{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ns(),this.zt=UT(),this.Wt=new Rn(Mt)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:rt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(Sy(o))if(i===0){const a=new Ge(o.path);this.Yt(r,a,ur.newNoDocument(a,ot.min()))}else rn(i===1);else{const a=this.ie(r);if(a!==i){const l=this.re(e,a);if(l!==0){this.ee(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=Gw.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,c,d){var h,f,p,m,y,_;const v={localCacheCount:c,existenceFilterCount:d.count},b=d.unchangedNames;return b&&(v.bloomFilter={applied:u===0,hashCount:(h=b==null?void 0:b.hashCount)!==null&&h!==void 0?h:0,bitmapLength:(m=(p=(f=b==null?void 0:b.bits)===null||f===void 0?void 0:f.bitmap)===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0,padding:(_=(y=b==null?void 0:b.bits)===null||y===void 0?void 0:y.padding)!==null&&_!==void 0?_:0}),v}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=xa(s).toUint8Array()}catch(c){if(c instanceof hx)return eu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw c}try{u=new zw(l,o,a)}catch(c){return eu(c instanceof ac?"BloomFilter error: ":"Applying bloom filter failed: ",c),1}return u.It===0?1:i!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Sy(a.target)){const l=new Ge(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,ur.newNoDocument(l,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=gt();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.se(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new Am(e,n,this.Wt,this.jt,r);return this.jt=Ns(),this.zt=UT(),this.Wt=new Rn(Mt),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new $T,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new br(Mt),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||Ke("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new $T),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function UT(){return new Rn(Ge.comparator)}function FT(){return new Rn(Ge.comparator)}const O6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),N6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),M6=(()=>({and:"AND",or:"OR"}))();class L6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ay(t,e){return t.useProto3Json||bm(e)?e:{value:e}}function Jf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ux(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $6(t,e){return Jf(t,e.toTimestamp())}function Zi(t){return rn(!!t),ot.fromTimestamp(function(e){const n=Po(e);return new Dn(n.seconds,n.nanos)}(t))}function qw(t,e){return function(n){return new wn(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Fx(t){const e=wn.fromString(t);return rn(Hx(e)),e}function ky(t,e){return qw(t.databaseId,e.path)}function Og(t,e){const n=Fx(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ge(Vx(n))}function xy(t,e){return qw(t.databaseId,e)}function U6(t){const e=Fx(t);return e.length===4?wn.emptyPath():Vx(e)}function Py(t){return new wn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vx(t){return rn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function VT(t,e,n){return{name:ky(t,e),fields:n.value.mapValue.fields}}function F6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:rt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(rn(u===void 0||typeof u=="string"),oi.fromBase64String(u||"")):(rn(u===void 0||u instanceof Uint8Array),oi.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?ge.UNKNOWN:Mx(l.code);return new xe(u,l.message||"")}(o);n=new $x(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Og(t,r.document.name),s=Zi(r.document.updateTime),o=r.document.createTime?Zi(r.document.createTime):ot.min(),a=new Vr({mapValue:{fields:r.document.fields}}),l=ur.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new uf(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Og(t,r.document),s=r.readTime?Zi(r.readTime):ot.min(),o=ur.newNoDocument(i,s),a=r.removedTargetIds||[];n=new uf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Og(t,r.document),s=r.removedTargetIds||[];n=new uf([],s,i,null)}else{if(!("filter"in e))return rt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new k6(i,s),a=r.targetId;n=new Lx(a,o)}}return n}function V6(t,e){let n;if(e instanceof Hd)n={update:VT(t,e.key,e.value)};else if(e instanceof Kw)n={delete:ky(t,e.key)};else if(e instanceof Fo)n={update:VT(t,e.key,e.data),updateMask:q6(e.fieldMask)};else{if(!(e instanceof C6))return rt();n={verify:ky(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Qf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof pd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof md)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Xf)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw rt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:$6(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:rt()}(t,e.precondition)),n}function B6(t,e){return t&&t.length>0?(rn(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Zi(r.updateTime):Zi(i);return s.isEqual(ot.min())&&(s=Zi(i)),new T6(s,r.transformResults||[])}(n,e))):[]}function j6(t,e){return{documents:[xy(t,e.path)]}}function H6(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=xy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xy(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return jx(Rs.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:ml(c.field),direction:Y6(c.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Ay(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function W6(t){let e=U6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){rn(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(c){const d=Bx(c);return d instanceof Rs&&yx(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(d){return new $l(gl(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(c)));let a=null;n.limit&&(a=function(c){let d;return d=typeof c=="object"?c.value:c,bm(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(c){const d=!!c.before,h=c.values||[];return new iu(h,d)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const d=!c.before,h=c.values||[];return new iu(h,d)}(n.endAt)),c6(e,i,o,s,a,"F",l,u)}function K6(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bx(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=gl(e.unaryFilter.field);return Bn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=gl(e.unaryFilter.field);return Bn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gl(e.unaryFilter.field);return Bn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=gl(e.unaryFilter.field);return Bn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(t):t.fieldFilter!==void 0?function(e){return Bn.create(gl(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Rs.create(e.compositeFilter.filters.map(n=>Bx(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(t):rt()}function Y6(t){return O6[t]}function G6(t){return N6[t]}function z6(t){return M6[t]}function ml(t){return{fieldPath:t.canonicalString()}}function gl(t){return ss.fromServerFormat(t.fieldPath)}function jx(t){return t instanceof Bn?function(e){if(e.op==="=="){if(IT(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NAN"}};if(CT(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(IT(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NOT_NAN"}};if(CT(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(e.field),op:G6(e.op),value:e.value}}}(t):t instanceof Rs?function(e){const n=e.getFilters().map(r=>jx(r));return n.length===1?n[0]:{compositeFilter:{op:z6(e.op),filters:n}}}(t):rt()}function q6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Hx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qw=class lc{constructor(e,n,r,i,s=ot.min(),o=ot.min(),a=oi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new lc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.fe=e}}function X6(t){const e=W6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J6=class{constructor(){this.rn=new Z6}addToCollectionParentIndex(e,n){return this.rn.add(n),ke.resolve()}getCollectionParents(e,n){return ke.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return ke.resolve()}deleteFieldIndex(e,n){return ke.resolve()}getDocumentsMatchingTarget(e,n){return ke.resolve(null)}getIndexType(e,n){return ke.resolve(0)}getFieldIndexes(e,n){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,n){return ke.resolve(xo.min())}getMinOffsetFromCollectionGroup(e,n){return ke.resolve(xo.min())}updateCollectionGroup(e,n,r){return ke.resolve()}updateIndexEntries(e,n){return ke.resolve()}},Z6=class{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new br(wn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new br(wn.comparator)).toArray()}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dy=class Ry{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ry(0)}static Mn(){return new Ry(-1)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eV=class{constructor(){this.changes=new Au(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ke.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nV=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&kc(r.mutation,i,Zr.empty(),Dn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,gt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=gt()){const i=aa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=oc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=aa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,gt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ns();const o=Ac(),a=Ac();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Fo)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),kc(c.mutation,u,c.mutation.getFieldMask(),Dn.now())):o.set(u.key,Zr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new tV(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ac();let i=new Rn((o,a)=>o-a),s=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Zr.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||gt()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=Ix();c.forEach(h=>{if(!s.has(h)){const f=Ox(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ke.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return Ge.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ww(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ke.resolve(aa());let a=-1,l=s;return o.next(u=>ke.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?ke.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,gt())).next(c=>({batchId:a,changes:Cx(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ge(n)).next(r=>{let i=oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=oc();return this.indexManager.getCollectionParents(e,i).next(o=>ke.forEach(o,a=>{const l=function(u,c){return new Ka(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,ur.newInvalidDocument(u)))});let o=oc();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&kc(u.mutation,l,Zr.empty(),Dn.now()),Sm(n,l)&&(o=o.insert(a,l))}),o})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rV=class{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return ke.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Zi(r.createTime)}),ke.resolve()}getNamedQuery(e,n){return ke.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:X6(r.bundledQuery),readTime:Zi(r.readTime)}}(n)),ke.resolve()}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iV=class{constructor(){this.overlays=new Rn(Ge.comparator),this.ls=new Map}getOverlay(e,n){return ke.resolve(this.overlays.get(n))}getOverlays(e,n){const r=aa();return ke.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),ke.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),ke.resolve()}getOverlaysForCollection(e,n,r){const i=aa(),s=n.length+1,o=new Ge(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ke.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Rn((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=aa(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=aa(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return ke.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new A6(n,r));let s=this.ls.get(n);s===void 0&&(s=gt(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.fs=new br(Fn.ds),this.ws=new br(Fn._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new Fn(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new Fn(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new Ge(new wn([])),r=new Fn(n,e),i=new Fn(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new Ge(new wn([])),r=new Fn(n,e),i=new Fn(n,e+1);let s=gt();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Fn(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fn{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return Ge.comparator(e.key,n.key)||Mt(e.As,n.As)}static _s(e,n){return Mt(e.As,n.As)||Ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new br(Fn.ds)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new I6(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new Fn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ke.resolve(o)}lookupMutationBatch(e,n){return ke.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.bs(r),s=i<0?0:i;return ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fn(n,0),i=new Fn(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new br(Mt);return n.forEach(i=>{const s=new Fn(i,0),o=new Fn(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),ke.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Ge.isDocumentKey(s)||(s=s.child(""));const o=new Fn(new Ge(s),0);let a=new br(Mt);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.As)),!0)},o),ke.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){rn(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return ke.forEach(n.mutations,i=>{const s=new Fn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new Fn(n,0),i=this.Rs.firstAfterOrEqual(r);return ke.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.Ds=e,this.docs=new Rn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ke.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(n))}getEntries(e,n){let r=Ns();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ur.newInvalidDocument(i))}),ke.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ns();const o=n.path,a=new Ge(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||G5(Y5(c),r)<=0||(i.has(c.key)||Sm(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return ke.resolve(s)}getAllFromCollectionGroup(e,n,r,i){rt()}Cs(e,n){return ke.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aV(this)}getSize(e){return ke.resolve(this.size)}}class aV extends eV{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ke.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e){this.persistence=e,this.xs=new Au(n=>Vw(n),Bw),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Xw,this.targetCount=0,this.Ms=Dy.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),ke.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Dy(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,ke.resolve()}updateTargetData(e,n){return this.Fn(n),ke.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ke.waitFor(s).next(()=>i)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return ke.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),ke.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ke.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),ke.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return ke.resolve(r)}containsKey(e,n){return ke.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n){this.$s={},this.overlays={},this.Os=new $w(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new lV(this),this.indexManager=new J6,this.remoteDocumentCache=function(r){return new oV(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new Q6(n),this.qs=new rV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new sV(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){Ke("MemoryPersistence","Starting transaction:",e);const i=new cV(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return ke.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class cV extends q5{constructor(e){super(),this.currentSequenceNumber=e}}class Jw{constructor(e){this.persistence=e,this.Qs=new Xw,this.js=null}static zs(e){return new Jw(e)}get Ws(){if(this.js)return this.js;throw rt()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),ke.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),ke.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Ws,r=>{const i=Ge.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,ot.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return ke.or([()=>ke.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=gt(),i=gt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Zw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(PT(n))return ke.resolve(null);let r=Os(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=qf(n,null,"F"),r=Os(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=gt(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,qf(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,i){return PT(n)||i.isEqual(ot.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(_T()<=xt.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Iy(n)),this.Wi(e,o,n,K5(i,-1)))})}ji(e,n){let r=new br(Ex(e));return n.forEach((i,s)=>{Sm(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return _T()<=xt.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",Iy(n)),this.Ui.getDocumentsMatchingQuery(e,n,xo.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new Rn(Mt),this.Yi=new Au(s=>Vw(s),Bw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nV(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function fV(t,e,n,r){return new hV(t,e,n,r)}async function Wx(t,e){const n=ct(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=gt();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function pV(t,e){const n=ct(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,d=c.keys();let h=ke.resolve();return d.forEach(f=>{h=h.next(()=>u.getEntry(a,f)).next(p=>{const m=l.docVersions.get(f);rn(m!==null),p.version.compareTo(m)<0&&(c.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=gt();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Kx(t){const e=ct(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function mV(t,e){const n=ct(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(oi.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),function(p,m,y){return p.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,f,c)&&a.push(n.Bs.updateTargetData(s,f))});let l=Ns(),u=gt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(gV(s,o,e.documentUpdates).next(c=>{l=c.nr,u=c.sr})),!r.isEqual(ot.min())){const c=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return ke.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ji=i,s))}function gV(t,e,n){let r=gt(),i=gt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ns();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ot.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ke("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{nr:o,sr:i}})}function vV(t,e){const n=ct(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yV(t,e){const n=ct(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,ke.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new Qw(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function Oy(t,e,n){const r=ct(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!jd(o))throw o;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function BT(t,e,n){const r=ct(t);let i=ot.min(),s=gt();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=ct(a),d=c.Yi.get(u);return d!==void 0?ke.resolve(c.Ji.get(d)):c.Bs.getTargetData(l,u)}(r,o,Os(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:ot.min(),n?s:gt())).next(a=>(wV(r,d6(e),a),{documents:a,ir:s})))}function wV(t,e,n){let r=t.Xi.get(e)||ot.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}class jT{constructor(){this.activeTargetIds=v6()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bV{constructor(){this.Hr=new jT,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new jT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh=null;function Ng(){return Nh===null?Nh=268435456+Math.round(2147483648*Math.random()):Nh++,"0x"+Nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="WebChannelConnection";class SV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=Ng(),a=this.To(e,n);Ke("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,i,s),this.Ao(e,a,l,r).then(u=>(Ke("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw eu("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Iu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){const r=TV[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=Ng();return new Promise((o,a)=>{const l=new N5;l.setWithCredentials(!0),l.listenOnce(D5.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rg.NO_ERROR:const c=l.getResponseJson();Ke(sr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Rg.TIMEOUT:Ke(sr,`RPC '${e}' ${s} timed out`),a(new xe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Rg.HTTP_ERROR:const d=l.getStatus();if(Ke(sr,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const p=function(m){const y=m.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(y)>=0?y:ge.UNKNOWN}(f.status);a(new xe(p,f.message))}else a(new xe(ge.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new xe(ge.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Ke(sr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ke(sr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const i=Ng(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=x5(),a=P5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new O5({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Ke(sr,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let h=!1,f=!1;const p=new EV({ro:y=>{f?Ke(sr,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(Ke(sr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Ke(sr,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},oo:()=>d.close()}),m=(y,_,v)=>{y.listen(_,b=>{try{v(b)}catch(g){setTimeout(()=>{throw g},0)}})};return m(d,Ph.EventType.OPEN,()=>{f||Ke(sr,`RPC '${e}' stream ${i} transport opened.`)}),m(d,Ph.EventType.CLOSE,()=>{f||(f=!0,Ke(sr,`RPC '${e}' stream ${i} transport closed`),p.wo())}),m(d,Ph.EventType.ERROR,y=>{f||(f=!0,eu(sr,`RPC '${e}' stream ${i} transport errored:`,y),p.wo(new xe(ge.UNAVAILABLE,"The operation could not be completed")))}),m(d,Ph.EventType.MESSAGE,y=>{var _;if(!f){const v=y.data[0];rn(!!v);const b=v,g=b.error||((_=b[0])===null||_===void 0?void 0:_.error);if(g){Ke(sr,`RPC '${e}' stream ${i} received error:`,g);const w=g.status;let T=function(x){const A=In[x];if(A!==void 0)return Mx(A)}(w),M=g.message;T===void 0&&(T=ge.INTERNAL,M="Unknown error status: "+w+" with message "+g.message),f=!0,p.wo(new xe(T,M)),d.close()}else Ke(sr,`RPC '${e}' stream ${i} received:`,v),p._o(v)}}),m(a,R5.STAT_EVENT,y=>{y.stat===wT.PROXY?Ke(sr,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===wT.NOPROXY&&Ke(sr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Mg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t){return new L6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r,i,s,o,a,l){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Yx(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(Ds(n.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new xe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CV extends Gx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=F6(this.serializer,e),r=function(i){if(!("targetChange"in i))return ot.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?ot.min():s.readTime?Zi(s.readTime):ot.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Py(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=Sy(a)?{documents:j6(i,a)}:{query:H6(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=Ux(i,s.resumeToken);const l=Ay(i,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(ot.min())>0){o.readTime=Jf(i,s.snapshotVersion.toTimestamp());const l=Ay(i,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=K6(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Py(this.serializer),n.removeTarget=e,this.Wo(n)}}class IV extends Gx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(rn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=B6(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.cu(r,n)}return rn(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Py(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>V6(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(ge.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(ge.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class kV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ds(n),this.mu=!1):Ke("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{Ya(this)&&(Ke("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ct(a);l.vu.add(4),await Kd(l),l.bu.set("Unknown"),l.vu.delete(4),await xm(l)}(this))})}),this.bu=new kV(r,i)}}async function xm(t){if(Ya(t))for(const e of t.Ru)await e(!0)}async function Kd(t){for(const e of t.Ru)await e(!1)}function zx(t,e){const n=ct(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),nb(n)?tb(n):ku(n).Ko()&&eb(n,e))}function qx(t,e){const n=ct(t),r=ku(n);n.Au.delete(e),r.Ko()&&Qx(n,e),n.Au.size===0&&(r.Ko()?r.jo():Ya(n)&&n.bu.set("Unknown"))}function eb(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ku(t).su(e)}function Qx(t,e){t.Vu.qt(e),ku(t).iu(e)}function tb(t){t.Vu=new R6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),ku(t).start(),t.bu.gu()}function nb(t){return Ya(t)&&!ku(t).Uo()&&t.Au.size>0}function Ya(t){return ct(t).vu.size===0}function Xx(t){t.Vu=void 0}async function PV(t){t.Au.forEach((e,n)=>{eb(t,e)})}async function DV(t,e){Xx(t),nb(t)?(t.bu.Iu(e),tb(t)):t.bu.set("Unknown")}async function RV(t,e,n){if(t.bu.set("Online"),e instanceof $x&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zf(t,r)}else if(e instanceof uf?t.Vu.Ht(e):e instanceof Lx?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(ot.min()))try{const r=await Kx(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.Au.get(l);u&&i.Au.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const u=i.Au.get(a);if(!u)return;i.Au.set(a,u.withResumeToken(oi.EMPTY_BYTE_STRING,u.snapshotVersion)),Qx(i,a);const c=new Qw(u.target,a,l,u.sequenceNumber);eb(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),await Zf(t,r)}}async function Zf(t,e,n){if(!jd(e))throw e;t.vu.add(1),await Kd(t),t.bu.set("Offline"),n||(n=()=>Kx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ke("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await xm(t)})}function Jx(t,e){return e().catch(n=>Zf(t,n,e))}async function Pm(t){const e=ct(t),n=Do(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;OV(e);)try{const i=await vV(e.localStore,r);if(i===null){e.Eu.length===0&&n.jo();break}r=i.batchId,NV(e,i)}catch(i){await Zf(e,i)}Zx(e)&&eP(e)}function OV(t){return Ya(t)&&t.Eu.length<10}function NV(t,e){t.Eu.push(e);const n=Do(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Zx(t){return Ya(t)&&!Do(t).Uo()&&t.Eu.length>0}function eP(t){Do(t).start()}async function MV(t){Do(t).hu()}async function LV(t){const e=Do(t);for(const n of t.Eu)e.uu(n.mutations)}async function $V(t,e,n){const r=t.Eu.shift(),i=Yw.from(r,e,n);await Jx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Pm(t)}async function UV(t,e){e&&Do(t).ou&&await async function(n,r){if(i=r.code,x6(i)&&i!==ge.ABORTED){const s=n.Eu.shift();Do(n).Qo(),await Jx(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Pm(n)}var i}(t,e),Zx(t)&&eP(t)}async function WT(t,e){const n=ct(t);n.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=Ya(n);n.vu.add(3),await Kd(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await xm(n)}async function FV(t,e){const n=ct(t);e?(n.vu.delete(2),await xm(n)):e||(n.vu.add(2),await Kd(n),n.bu.set("Unknown"))}function ku(t){return t.Su||(t.Su=function(e,n,r){const i=ct(e);return i.fu(),new CV(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:PV.bind(null,t),ao:DV.bind(null,t),nu:RV.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),nb(t)?tb(t):t.bu.set("Unknown")):(await t.Su.stop(),Xx(t))})),t.Su}function Do(t){return t.Du||(t.Du=function(e,n,r){const i=ct(e);return i.fu(),new IV(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:MV.bind(null,t),ao:UV.bind(null,t),au:LV.bind(null,t),cu:$V.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Pm(t)):(await t.Du.stop(),t.Eu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new rb(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ib(t,e){if(Ds("AsyncQueue",`${e}: ${t}`),jd(t))return new xe(ge.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ge.comparator(n.key,r.key):(n,r)=>Ge.comparator(n.key,r.key),this.keyedMap=oc(),this.sortedSet=new Rn(this.comparator)}static emptySet(e){return new Ul(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.Cu=new Rn(Ge.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):rt():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class su{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new su(e,n,Ul.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(){this.Nu=void 0,this.listeners=[]}}class BV{constructor(){this.queries=new Au(e=>Tx(e),Em),this.onlineState="Unknown",this.ku=new Set}}async function tP(t,e){const n=ct(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new VV),i)try{s.Nu=await n.onListen(r)}catch(o){const a=ib(o,`Initialization of query '${Iy(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&sb(n)}async function nP(t,e){const n=ct(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function jV(t,e){const n=ct(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&sb(n)}function HV(t,e,n){const r=ct(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function sb(t){t.ku.forEach(e=>{e.next()})}class rP{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new su(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=su.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.key=e}}class sP{constructor(e){this.key=e}}class WV{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=gt(),this.mutatedKeys=gt(),this.tc=Ex(e),this.ec=new Ul(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new KT,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=Sm(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),y=!0):this.rc(h,f)||(r.track({type:2,doc:f}),y=!0,(l&&this.tc(f,l)>0||u&&this.tc(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(l||u)&&(a=!0)),y&&(f?(o=o.add(f),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((u,c)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return f(d)-f(h)}(u.type,c.type)||this.tc(u.doc,c.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,s.length!==0||l?{snapshot:new su(this.query,e.ec,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new KT,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=gt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new sP(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new iP(r))}),n}hc(e){this.Yu=e.ir,this.Zu=gt();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return su.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class KV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YV{constructor(e){this.key=e,this.fc=!1}}class GV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Au(a=>Tx(a),Em),this._c=new Map,this.mc=new Set,this.gc=new Rn(Ge.comparator),this.yc=new Map,this.Ic=new Xw,this.Tc={},this.Ec=new Map,this.Ac=Dy.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function zV(t,e){const n=iB(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=await yV(n.localStore,Os(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await qV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&zx(n.remoteStore,o)}return i}async function qV(t,e,n,r,i){t.Rc=(d,h,f)=>async function(p,m,y,_){let v=m.view.sc(y);v.zi&&(v=await BT(p.localStore,m.query,!1).then(({documents:w})=>m.view.sc(w,v)));const b=_&&_.targetChanges.get(m.targetId),g=m.view.applyChanges(v,p.isPrimaryClient,b);return GT(p,m.targetId,g.cc),g.snapshot}(t,d,h,f);const s=await BT(t.localStore,e,!0),o=new WV(e,s.ir),a=o.sc(s.documents),l=Wd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);GT(t,n,u.cc);const c=new KV(e,n,o);return t.wc.set(e,c),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function QV(t,e){const n=ct(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!Em(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Oy(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),qx(n.remoteStore,r.targetId),Ny(n,r.targetId)}).catch(Bd)):(Ny(n,r.targetId),await Oy(n.localStore,r.targetId,!0))}async function XV(t,e,n){const r=sB(t);try{const i=await function(s,o){const a=ct(s),l=Dn.now(),u=o.reduce((h,f)=>h.add(f.key),gt());let c,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Ns(),p=gt();return a.Zi.getEntries(h,u).next(m=>{f=m,f.forEach((y,_)=>{_.isValidDocument()||(p=p.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(m=>{c=m;const y=[];for(const _ of o){const v=S6(_,c.get(_.key).overlayedDocument);v!=null&&y.push(new Fo(_.key,v,fx(v.value.mapValue),gi.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,y,o)}).next(m=>{d=m;const y=m.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(h,m.batchId,y)})}).then(()=>({batchId:d.batchId,changes:Cx(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new Rn(Mt)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(r,i.batchId,n),await Yd(r,i.changes),await Pm(r.remoteStore)}catch(i){const s=ib(i,"Failed to persist write");n.reject(s)}}async function oP(t,e){const n=ct(t);try{const r=await mV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(rn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?rn(o.fc):i.removedDocuments.size>0&&(rn(o.fc),o.fc=!1))}),await Yd(n,r,e)}catch(r){await Bd(r)}}function YT(t,e,n){const r=ct(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=ct(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const d of c.listeners)d.Mu(o)&&(l=!0)}),l&&sb(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JV(t,e,n){const r=ct(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new Rn(Ge.comparator);o=o.insert(s,ur.newNoDocument(s,ot.min()));const a=gt().add(s),l=new Am(ot.min(),new Map,new Rn(Mt),o,a);await oP(r,l),r.gc=r.gc.remove(s),r.yc.delete(e),ob(r)}else await Oy(r.localStore,e,!1).then(()=>Ny(r,e,n)).catch(Bd)}async function ZV(t,e){const n=ct(t),r=e.batch.batchId;try{const i=await pV(n.localStore,e);lP(n,r,null),aP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yd(n,i)}catch(i){await Bd(i)}}async function eB(t,e,n){const r=ct(t);try{const i=await function(s,o){const a=ct(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(rn(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);lP(r,e,n),aP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yd(r,i)}catch(i){await Bd(i)}}function aP(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function lP(t,e,n){const r=ct(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Ny(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||uP(t,r)})}function uP(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(qx(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),ob(t))}function GT(t,e,n){for(const r of n)r instanceof iP?(t.Ic.addReference(r.key,e),tB(t,r)):r instanceof sP?(Ke("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||uP(t,r.key)):rt()}function tB(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(Ke("SyncEngine","New document in limbo: "+n),t.mc.add(r),ob(t))}function ob(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new Ge(wn.fromString(e)),r=t.Ac.next();t.yc.set(r,new YV(n)),t.gc=t.gc.insert(n,r),zx(t.remoteStore,new Qw(Os(jw(n.path)),r,"TargetPurposeLimboResolution",$w.ct))}}async function Yd(t,e,n){const r=ct(t),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=Zw.Li(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.dc.nu(i),await async function(a,l){const u=ct(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>ke.forEach(l,d=>ke.forEach(d.Fi,h=>u.persistence.referenceDelegate.addReference(c,d.targetId,h)).next(()=>ke.forEach(d.Bi,h=>u.persistence.referenceDelegate.removeReference(c,d.targetId,h)))))}catch(c){if(!jd(c))throw c;Ke("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const d=c.targetId;if(!c.fromCache){const h=u.Ji.get(d),f=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(f);u.Ji=u.Ji.insert(d,p)}}}(r.localStore,s))}async function nB(t,e){const n=ct(t);if(!n.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=await Wx(n.localStore,e);n.currentUser=e,function(i,s){i.Ec.forEach(o=>{o.forEach(a=>{a.reject(new xe(ge.CANCELLED,s))})}),i.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yd(n,r.er)}}function rB(t,e){const n=ct(t),r=n.yc.get(e);if(r&&r.fc)return gt().add(r.key);{let i=gt();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}function iB(t){const e=ct(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JV.bind(null,e),e.dc.nu=jV.bind(null,e.eventManager),e.dc.Pc=HV.bind(null,e.eventManager),e}function sB(t){const e=ct(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eB.bind(null,e),e}let zT=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=km(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return fV(this.persistence,new dV,e.initialUser,this.serializer)}createPersistence(e){return new uV(Jw.zs,this.serializer)}createSharedClientState(e){return new bV}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},oB=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nB.bind(null,this.syncEngine),await FV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new BV}createDatastore(e){const n=km(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new SV(i));var i;return function(s,o,a,l){return new AV(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>YT(this.syncEngine,a,0),o=HT.D()?new HT:new _V,new xV(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,u){const c=new GV(r,i,s,o,a,l);return u&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ct(e);Ke("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Kd(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cP=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lr.UNAUTHENTICATED,this.clientId=ux.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Ke("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ke("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ib(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lg(t,e){t.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Wx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uB(t);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>WT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>WT(e.remoteStore,s)),t._onlineComponents=e}function lB(t){return t.name==="FirebaseError"?t.code===ge.FAILED_PRECONDITION||t.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function uB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!lB(n))throw n;eu("Error using user provided cache. Falling back to memory cache: "+n),await Lg(t,new zT)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),await Lg(t,new zT);return t._offlineComponents}async function dP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),await qT(t,t._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),await qT(t,new oB))),t._onlineComponents}function cB(t){return dP(t).then(e=>e.syncEngine)}async function hP(t){const e=await dP(t),n=e.eventManager;return n.onListen=zV.bind(null,e.syncEngine),n.onUnlisten=QV.bind(null,e.syncEngine),n}function dB(t,e,n={}){const r=new Is;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new cP({next:d=>{s.enqueueAndForget(()=>nP(i,c));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new xe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&a.source==="server"?l.reject(new xe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new rP(jw(o.path),u,{includeMetadataChanges:!0,Ku:!0});return tP(i,c)}(await hP(t),t.asyncQueue,e,n,r)),r.promise}function hB(t,e,n={}){const r=new Is;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new cP({next:d=>{s.enqueueAndForget(()=>nP(i,c)),d.fromCache&&a.source==="server"?l.reject(new xe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new rP(o,u,{includeMetadataChanges:!0,Ku:!0});return tP(i,c)}(await hP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(t,e,n){if(!n)throw new xe(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fB(t,e,n,r){if(e===!0&&r===!0)throw new xe(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function XT(t){if(!Ge.isDocumentKey(t))throw new xe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JT(t){if(Ge.isDocumentKey(t))throw new xe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Dm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":rt()}function $i(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dm(t);throw new xe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pB(t,e){if(e<=0)throw new xe(ge.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new xe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class Rm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new xe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZT(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new L5;switch(n.type){case"firstParty":return new V5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new xe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=QT.get(e);n&&(Ke("ComponentProvider","Removing Datastore"),QT.delete(e),n.terminate())}(this),Promise.resolve()}}function mB(t,e,n,r={}){var i;const s=(t=$i(t,Rm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=lr.MOCK_USER;else{a=sA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new xe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new lr(u)}t._authCredentials=new $5(new lx(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dr(this.firestore,e,this._key)}}class Vs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class yo extends Vs{constructor(e,n,r){super(e,n,jw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dr(this.firestore,null,new Ge(e))}withConverter(e){return new yo(this.firestore,e,this._path)}}function Ei(t,e,...n){if(t=Lt(t),pP("collection","path",e),t instanceof Rm){const r=wn.fromString(e,...n);return JT(r),new yo(t,null,r)}{if(!(t instanceof Dr||t instanceof yo))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wn.fromString(e,...n));return JT(r),new yo(t.firestore,null,r)}}function Ot(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=ux.A()),pP("doc","path",e),t instanceof Rm){const r=wn.fromString(e,...n);return XT(r),new Dr(t,null,new Ge(r))}{if(!(t instanceof Dr||t instanceof yo))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wn.fromString(e,...n));return XT(r),new Dr(t.firestore,t instanceof yo?t.converter:null,new Ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Yx(this,"async_queue_retry"),this.Xc=()=>{const n=Mg();n&&Ke("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Mg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Mg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Is;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!jd(e))throw e;Ke("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Ds("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=rb.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&rt()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class Ga extends Rm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new gB,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mP(this),this._firestoreClient.terminate()}}function vB(t,e){const n=typeof t=="object"?t:Eu(),r=typeof t=="string"?t:e||"(default)",i=us(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=nA("firestore");s&&mB(i,...s)}return i}function ab(t){return t._firestoreClient||mP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mP(t){var e,n,r;const i=t._freezeSettings(),s=function(o,a,l,u){return new J5(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,fP(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new aB(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ou(oi.fromBase64String(e))}catch(n){throw new xe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ou(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ss(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB=/^__.*__$/;class wB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hd(e,this.data,n,this.fieldTransforms)}}class gP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class cb{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new cb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return ep(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(vP(this.ca)&&yB.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class bB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||km(e)}ya(e,n,r,i=!1){return new cb({ca:e,methodName:n,ga:r,path:ss.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gd(t){const e=t._freezeSettings(),n=km(t._databaseId);return new bB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yP(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);db("Data must be an object, but it was:",o,r);const a=TP(r,o);let l,u;if(s.merge)l=new Zr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=My(e,d,n);if(!o.contains(h))throw new xe(ge.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);SP(c,h)||c.push(h)}l=new Zr(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new wB(new Vr(a),l,u)}let wP=class bP extends lb{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bP}};function _B(t,e,n,r){const i=t.ya(1,e,n);db("Data must be an object, but it was:",i,r);const s=[],o=Vr.empty();Wa(r,(l,u)=>{const c=hb(e,l,n);u=Lt(u);const d=i.da(c);if(u instanceof wP)s.push(c);else{const h=zd(u,d);h!=null&&(s.push(c),o.set(c,h))}});const a=new Zr(s);return new gP(o,a,i.fieldTransforms)}function TB(t,e,n,r,i,s){const o=t.ya(1,e,n),a=[My(e,r,n)],l=[i];if(s.length%2!=0)throw new xe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(My(e,s[h])),l.push(s[h+1]);const u=[],c=Vr.empty();for(let h=a.length-1;h>=0;--h)if(!SP(u,a[h])){const f=a[h];let p=l[h];p=Lt(p);const m=o.da(f);if(p instanceof wP)u.push(f);else{const y=zd(p,m);y!=null&&(u.push(f),c.set(f,y))}}const d=new Zr(u);return new gP(c,d,o.fieldTransforms)}function _P(t,e,n,r=!1){return zd(n,t.ya(r?4:3,e))}function zd(t,e){if(EP(t=Lt(t)))return db("Unsupported field value:",e,t),TP(t,e);if(t instanceof lb)return function(n,r){if(!vP(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=zd(o,r.wa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Lt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return y6(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Dn.fromDate(n);return{timestampValue:Jf(r.serializer,i)}}if(n instanceof Dn){const i=new Dn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Jf(r.serializer,i)}}if(n instanceof ub)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ou)return{bytesValue:Ux(r.serializer,n._byteString)};if(n instanceof Dr){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qw(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${Dm(n)}`)}(t,e)}function TP(t,e){const n={};return dx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(t,(r,i)=>{const s=zd(i,e.ha(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function EP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dn||t instanceof ub||t instanceof ou||t instanceof Dr||t instanceof lb)}function db(t,e,n){if(!EP(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Dm(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function My(t,e,n){if((e=Lt(e))instanceof Om)return e._internalPath;if(typeof e=="string")return hb(t,e);throw ep("Field path arguments must be of type string or ",t,!1,void 0,n)}const EB=new RegExp("[~\\*/\\[\\]]");function hb(t,e,n){if(e.search(EB)>=0)throw ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Om(...e.split("."))._internalPath}catch{throw ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ep(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new xe(ge.INVALID_ARGUMENT,a+t+l)}function SP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fb=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},SB=class extends fb{data(){return super.data()}};function Nm(t,e){return typeof e=="string"?hb(t,e):e instanceof Om?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}let pb=class{},Mm=class extends pb{};function IB(t,e,...n){let r=[];e instanceof pb&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof AB).length,o=i.filter(a=>a instanceof CP).length;if(s>1||s>0&&o>0)throw new xe(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}let CP=class IP extends Mm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new IP(e,n,r)}_apply(e){const n=this._parse(e);return DP(e._query,n),new Vs(e.firestore,e.converter,Cy(e._query,n))}_parse(e){const n=Gd(e.firestore);return function(i,s,o,a,l,u,c){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){rE(c,u);const h=[];for(const f of c)h.push(nE(a,i,f));d={arrayValue:{values:h}}}else d=nE(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||rE(c,u),d=_P(o,s,c,u==="in"||u==="not-in");return Bn.create(l,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function eE(t,e,n){const r=e,i=Nm("where",t);return CP._create(i,r,n)}let AB=class AP extends pb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new AP(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)DP(s,a),s=Cy(s,a)}(e._query,n),new Vs(e.firestore,e.converter,Cy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}},kB=class kP extends Mm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kP(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new xe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new xe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new $l(i,s);return function(a,l){if(Hw(a)===null){const u=Tm(a);u!==null&&RP(a,u,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Ka(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function tE(t,e="asc"){const n=e,r=Nm("orderBy",t);return kB._create(r,n)}let xB=class xP extends Mm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xP(e,n,r)}_apply(e){return new Vs(e.firestore,e.converter,qf(e._query,this._limit,this._limitType))}};function PB(t){return pB("limit",t),xB._create("limit",t,"F")}let DB=class PP extends Mm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new PP(e,n,r)}_apply(e){const n=OB(e,this.type,this._docOrFields,this._inclusive);return new Vs(e.firestore,e.converter,function(r,i){return new Ka(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}};function RB(...t){return DB._create("startAfter",t,!1)}function OB(t,e,n,r){if(n[0]=Lt(n[0]),n[0]instanceof fb)return function(i,s,o,a,l){if(!a)throw new xe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const c of fa(i))if(c.field.isKeyField())u.push(zf(s,a.key));else{const d=a.data.field(c.field);if(_m(d))throw new xe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const h=c.field.canonicalString();throw new xe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}u.push(d)}return new iu(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Gd(t.firestore);return function(s,o,a,l,u,c){const d=s.explicitOrderBy;if(u.length>d.length)throw new xe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<u.length;f++){const p=u[f];if(d[f].field.isKeyField()){if(typeof p!="string")throw new xe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!Ww(s)&&p.indexOf("/")!==-1)throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const m=s.path.child(wn.fromString(p));if(!Ge.isDocumentKey(m))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);const y=new Ge(m);h.push(zf(o,y))}else{const m=_P(a,l,p);h.push(m)}}return new iu(h,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function nE(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new xe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ww(e)&&n.indexOf("/")!==-1)throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(wn.fromString(n));if(!Ge.isDocumentKey(r))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zf(t,new Ge(r))}if(n instanceof Dr)return zf(t,n._key);throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dm(n)}.`)}function rE(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DP(t,e){if(e.isInequality()){const r=Tm(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Hw(t);s!==null&&RP(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function RP(t,e,n){if(!n.isEqual(e))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}let NB=class{convertValue(e,n="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw rt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ub(xn(e.latitude),xn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(dd(e));default:return null}}convertTimestamp(e){const n=Po(e);return new Dn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=wn.fromString(e);rn(Hx(r));const i=new hd(r.get(1),r.get(3)),s=new Ge(r.popFirst(5));return i.isEqual(n)||Ds(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class NP extends fb{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cf extends NP{data(e={}){return super.data(e)}}class MB{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cf(this._firestore,this._userDataWriter,r.key,r,new uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new cf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new uc(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new cf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new uc(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:LB(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function LB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(t){t=$i(t,Dr);const e=$i(t.firestore,Ga);return dB(ab(e),t._key).then(n=>HB(e,t,n))}class MP extends NB{constructor(e){super(),this.firestore=e}convertBytes(e){return new ou(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dr(this.firestore,null,n)}}function UB(t){t=$i(t,Vs);const e=$i(t.firestore,Ga),n=ab(e),r=new MP(e);return CB(t._query),hB(n,t._query).then(i=>new MB(e,r,t,i))}function FB(t,e,n){t=$i(t,Dr);const r=$i(t.firestore,Ga),i=OP(t.converter,e,n);return Lm(r,[yP(Gd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gi.none())])}function VB(t,e,n,...r){t=$i(t,Dr);const i=$i(t.firestore,Ga),s=Gd(i);let o;return o=typeof(e=Lt(e))=="string"||e instanceof Om?TB(s,"updateDoc",t._key,e,n,r):_B(s,"updateDoc",t._key,e),Lm(i,[o.toMutation(t._key,gi.exists(!0))])}function BB(t){return Lm($i(t.firestore,Ga),[new Kw(t._key,gi.none())])}function jB(t,e){const n=$i(t.firestore,Ga),r=Ot(t),i=OP(t.converter,e);return Lm(n,[yP(Gd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,gi.exists(!1))]).then(()=>r)}function Lm(t,e){return function(n,r){const i=new Is;return n.asyncQueue.enqueueAndForget(async()=>XV(await cB(n),r,i)),i.promise}(ab(t),e)}function HB(t,e,n){const r=n.docs.get(e._key),i=new MP(t);return new NP(t,i,e._key,r,new uc(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){Iu=n})(Lo),Gr(new Or("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Ga(new U5(n.getProvider("auth-internal")),new j5(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new xe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hd(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),rr(bT,"3.12.2",t),rr(bT,"3.12.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="firebasestorage.googleapis.com",$P="storageBucket",WB=2*60*1e3,KB=10*60*1e3,YB=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends ai{constructor(e,n,r=0){super($g(e),`Firebase Storage: ${n} (${$g(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $g(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var sn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(sn||(sn={}));function $g(t){return"storage/"+t}function mb(){const t="An unknown error occurred, please check the error payload for server response.";return new mn(sn.UNKNOWN,t)}function GB(t){return new mn(sn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function zB(t){return new mn(sn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mn(sn.UNAUTHENTICATED,t)}function QB(){return new mn(sn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function XB(t){return new mn(sn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function UP(){return new mn(sn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FP(){return new mn(sn.CANCELED,"User canceled the upload/download.")}function JB(t){return new mn(sn.INVALID_URL,"Invalid URL '"+t+"'.")}function ZB(t){return new mn(sn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ej(){return new mn(sn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$P+"' property when initializing the app?")}function VP(){return new mn(sn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tj(){return new mn(sn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function nj(){return new mn(sn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rj(t){return new mn(sn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ly(t){return new mn(sn.INVALID_ARGUMENT,t)}function BP(){return new mn(sn.APP_DELETED,"The Firebase app was deleted.")}function ij(t){return new mn(sn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xc(t,e){return new mn(sn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vu(t){throw new mn(sn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ei.makeFromUrl(e,n)}catch{return new ei(e,"")}if(r.path==="")return r;throw ZB(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(g){g.path.charAt(g.path.length-1)==="/"&&(g.path_=g.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(g){g.path_=decodeURIComponent(g.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${c}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},m=n===LP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",_=new RegExp(`^https?://${m}/${i}/${y}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let g=0;g<b.length;g++){const w=b[g],T=w.regex.exec(e);if(T){const M=T[w.indices.bucket];let x=T[w.indices.path];x||(x=""),r=new ei(M,x),w.postModify(r);break}}if(r==null)throw JB(e);return r}}class sj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...y){u||(u=!0,e.apply(null,y))}function d(y){i=setTimeout(()=>{i=null,t(f,l())},y)}function h(){s&&clearTimeout(s)}function f(y,..._){if(u){h();return}if(y){h(),c.call(null,y,..._);return}if(l()||o){h(),c.call(null,y,..._);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let p=!1;function m(y){p||(p=!0,h(),!u&&(i!==null?(y||(a=2),clearTimeout(i),d(0)):y||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function aj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){return t!==void 0}function uj(t){return typeof t=="function"}function cj(t){return typeof t=="object"&&!Array.isArray(t)}function $m(t){return typeof t=="string"||t instanceof String}function iE(t){return gb()&&t instanceof Blob}function gb(){return typeof Blob<"u"&&!D$()}function sE(t,e,n,r){if(r<e)throw Ly(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ly(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function jP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(pa||(pa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n,r,i,s,o,a,l,u,c,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Mh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===pa.NO_ERROR,l=s.getStatus();if(!a||HP(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===pa.ABORT;r(!1,new Mh(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Mh(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());lj(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=mb();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?BP():FP();o(l)}else{const l=UP();o(l)}};this.canceled_?n(!1,new Mh(!1,null,!0)):this.backoffId_=oj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function hj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function fj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function gj(t,e,n,r,i,s,o=!0){const a=jP(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return pj(u,e),hj(u,n),fj(u,s),mj(u,r),new dj(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function yj(...t){const e=vj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(gb())return new Blob(t);throw new mn(sn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function wj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t){if(typeof atob>"u")throw rj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ug{constructor(e,n){this.data=e,this.contentType=n||null}}function _j(t,e){switch(t){case zi.RAW:return new Ug(WP(e));case zi.BASE64:case zi.BASE64URL:return new Ug(KP(t,e));case zi.DATA_URL:return new Ug(Ej(e),Sj(e))}throw mb()}function WP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Tj(t){let e;try{e=decodeURIComponent(t)}catch{throw xc(zi.DATA_URL,"Malformed data URL.")}return WP(e)}function KP(t,e){switch(t){case zi.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw xc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zi.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw xc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=bj(e)}catch(i){throw i.message.includes("polyfill")?i:xc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class YP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw xc(zi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Cj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Ej(t){const e=new YP(t);return e.base64?KP(zi.BASE64,e.rest):Tj(e.rest)}function Sj(t){return new YP(t).contentType}function Cj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){let r=0,i="";iE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(iE(this.data_)){const r=this.data_,i=wj(r,e,n);return i===null?null:new ro(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ro(r,!0)}}static getBlob(...e){if(gb()){const n=e.map(r=>r instanceof ro?r.data_:r);return new ro(yj.apply(null,n))}else{const n=e.map(o=>$m(o)?_j(zi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ro(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){let e;try{e=JSON.parse(t)}catch{return null}return cj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Aj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function zP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t,e){return e}class Er{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||kj}}let Lh=null;function xj(t){return!$m(t)||t.length<2?t:zP(t)}function qP(){if(Lh)return Lh;const t=[];t.push(new Er("bucket")),t.push(new Er("generation")),t.push(new Er("metageneration")),t.push(new Er("name","fullPath",!0));function e(s,o){return xj(o)}const n=new Er("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Er("size");return i.xform=r,t.push(i),t.push(new Er("timeCreated")),t.push(new Er("updated")),t.push(new Er("md5Hash",null,!0)),t.push(new Er("cacheControl",null,!0)),t.push(new Er("contentDisposition",null,!0)),t.push(new Er("contentEncoding",null,!0)),t.push(new Er("contentLanguage",null,!0)),t.push(new Er("contentType",null,!0)),t.push(new Er("metadata","customMetadata",!0)),Lh=t,Lh}function Pj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new ei(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Dj(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Pj(r,t),r}function QP(t,e,n){const r=GP(e);return r===null?null:Dj(t,r,n)}function Rj(t,e,n,r){const i=GP(e);if(i===null||!$m(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,d=t.fullPath,h="/b/"+o(c)+"/o/"+o(d),f=xu(h,n,r),p=jP({alt:"media",token:u});return f+p})[0]}function XP(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class za{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t){if(!t)throw mb()}function vb(t,e){function n(r,i){const s=QP(t,i,e);return As(s!==null),s}return n}function Oj(t,e){function n(r,i){const s=QP(t,i,e);return As(s!==null),Rj(s,i,t.host,t._protocol)}return n}function qd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=QB():i=qB():n.getStatus()===402?i=zB(t.bucket):n.getStatus()===403?i=XB(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function yb(t){const e=qd(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=GB(t.path)),s.serverResponse=i.serverResponse,s}return n}function Nj(t,e,n){const r=e.fullServerUrl(),i=xu(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new za(i,s,vb(t,n),o);return a.errorHandler=yb(e),a}function Mj(t,e,n){const r=e.fullServerUrl(),i=xu(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new za(i,s,Oj(t,n),o);return a.errorHandler=yb(e),a}function Lj(t,e){const n=e.fullServerUrl(),r=xu(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new za(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=yb(e),a}function $j(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function JP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=$j(null,e)),r}function Uj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let g=0;g<2;g++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=JP(e,r,i),c=XP(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=ro.getBlob(d,r,h);if(f===null)throw VP();const p={name:u.fullPath},m=xu(s,t.host,t._protocol),y="POST",_=t.maxUploadRetryTime,v=new za(m,y,vb(t,n),_);return v.urlParams=p,v.headers=o,v.body=f.uploadData(),v.errorHandler=qd(e),v}class tp{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function wb(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{As(!1)}return As(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Fj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=JP(e,r,i),a={name:o.fullPath},l=xu(s,t.host,t._protocol),u="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=XP(o,n),h=t.maxUploadRetryTime;function f(m){wb(m);let y;try{y=m.getResponseHeader("X-Goog-Upload-URL")}catch{As(!1)}return As($m(y)),y}const p=new za(l,u,f,h);return p.urlParams=a,p.headers=c,p.body=d,p.errorHandler=qd(e),p}function Vj(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const c=wb(u,["active","final"]);let d=null;try{d=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{As(!1)}d||As(!1);const h=Number(d);return As(!isNaN(h)),new tp(h,r.size(),c==="final")}const o="POST",a=t.maxUploadRetryTime,l=new za(n,o,s,a);return l.headers=i,l.errorHandler=qd(e),l}const oE=256*1024;function Bj(t,e,n,r,i,s,o,a){const l=new tp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw tj();const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const d=l.current,h=d+c;let f="";c===0?f="finalize":u===c?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(d,h);if(m===null)throw VP();function y(g,w){const T=wb(g,["active","final"]),M=l.current+c,x=r.size();let A;return T==="final"?A=vb(e,s)(g,w):A=null,new tp(M,x,T==="final",A)}const _="POST",v=e.maxUploadRetryTime,b=new za(n,_,y,v);return b.headers=p,b.body=m.uploadData(),b.progressCallback=a||null,b.errorHandler=qd(t),b}const Fr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fg(t){switch(t){case"running":case"pausing":case"canceling":return Fr.RUNNING;case"paused":return Fr.PAUSED;case"success":return Fr.SUCCESS;case"canceled":return Fr.CANCELED;case"error":return Fr.ERROR;default:return Fr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,r){if(uj(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Hj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Vu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Wj extends Hj{initXhr(){this.xhr_.responseType="text"}}function ta(){return new Wj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=qP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(sn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(HP(i.status,[]))if(s)i=UP();else{this.sleepTime=Math.max(this.sleepTime*2,YB),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(sn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Fj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ta,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Vj(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ta,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=oE*this._chunkMultiplier,n=new tp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Bj(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ta,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){oE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Nj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ta,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Uj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ta,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=FP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Fg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new jj(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Fg(this._state)){case Fr.SUCCESS:rl(this._resolve.bind(null,this.snapshot))();break;case Fr.CANCELED:case Fr.ERROR:const n=this._reject;rl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Fg(this._state)){case Fr.RUNNING:case Fr.PAUSED:e.next&&rl(e.next.bind(e,this.snapshot))();break;case Fr.SUCCESS:e.complete&&rl(e.complete.bind(e))();break;case Fr.CANCELED:case Fr.ERROR:e.error&&rl(e.error.bind(e,this._error))();break;default:e.error&&rl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this._service=e,n instanceof ei?this._location=n:this._location=ei.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Da(e,n)}get root(){const e=new ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zP(this._location.path)}get storage(){return this._service}get parent(){const e=Ij(this._location.path);if(e===null)return null;const n=new ei(this._location.bucket,e);return new Da(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw ij(e)}}function Yj(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Kj(t,new ro(e),n)}function Gj(t){t._throwIfRoot("getDownloadURL");const e=Mj(t.storage,t._location,qP());return t.storage.makeRequestWithTokens(e,ta).then(n=>{if(n===null)throw nj();return n})}function zj(t){t._throwIfRoot("deleteObject");const e=Lj(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ta)}function qj(t,e){const n=Aj(t._location.path,e),r=new ei(t._location.bucket,n);return new Da(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){return/^[A-Za-z]+:\/\//.test(t)}function Xj(t,e){return new Da(t,e)}function ZP(t,e){if(t instanceof bb){const n=t;if(n._bucket==null)throw ej();const r=new Da(n,n._bucket);return e!=null?ZP(r,e):r}else return e!==void 0?qj(t,e):t}function Jj(t,e){if(e&&Qj(e)){if(t instanceof bb)return Xj(t,e);throw Ly("To use ref(service, url), the first argument must be a Storage instance.")}else return ZP(t,e)}function aE(t,e){const n=e==null?void 0:e[$P];return n==null?null:ei.makeFromBucketSpec(n,t)}function Zj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:sA(i,t.app.options.projectId))}class bb{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=LP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WB,this._maxUploadRetryTime=KB,this._requests=new Set,i!=null?this._bucket=ei.makeFromBucketSpec(i,this._host):this._bucket=aE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ei.makeFromBucketSpec(this._url,e):this._bucket=aE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Da(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new sj(BP());{const o=gj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const lE="@firebase/storage",uE="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="storage";function eH(t,e,n){return t=Lt(t),Yj(t,e,n)}function tH(t){return t=Lt(t),Gj(t)}function nH(t){return t=Lt(t),zj(t)}function rH(t,e){return t=Lt(t),Jj(t,e)}function iH(t=Eu(),e){t=Lt(t);const r=us(t,eD).getImmediate({identifier:e}),i=nA("storage");return i&&sH(r,...i),r}function sH(t,e,n,r={}){Zj(t,e,n,r)}function oH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new bb(n,r,i,e,Lo)}function aH(){Gr(new Or(eD,oH,"PUBLIC").setMultipleInstances(!0)),rr(lE,uE,""),rr(lE,uE,"esm2017")}aH();const tD=1e3,$y=tD*60,Uy=$y*60,np=Uy*24,rp=np*365,nD=async t=>{const e=await $B(t),n=e.data();return n?{id:e.id,...n}:null},il=async(t,e)=>{const n=await UB(e?IB(t,...e):t);return Promise.all(n.docs.map(r=>nD(r.ref)))},ci=nD,lH=jB,ip=FB,to=VB,cc=BB,Fy=t=>rH(iH(),t),cE=t=>t.sort((e,n)=>{const r=(n.order||0)-(e.order||0);return r!==0?r:e.date&&n.date?n.date.getTime()-e.date.getTime():0}),uH=(t,e,n,r)=>{setTimeout(()=>{t.forEach((i,s)=>{setTimeout(()=>{r(i)},s*n)})},e)},Di=(t,e)=>{if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(r===void 0||i===void 0)return!1;if(r===null&&i===null)continue;if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;const s=r.sort(),o=i.sort();if(s.some((a,l)=>!Di(a,o[l])||o.some((u,c)=>!Di(u,s[c]))))return!1}else if(r instanceof Date&&i instanceof Date){if(r.getTime()!==i.getTime())return!1}else if(typeof r=="object"){if(!Di(r,i))return!1}else if(r!==i)return!1}return!0},Vy=t=>{const e=Math.round((Date.now()-t.getTime())/1e3);if(e<30)return"Just now";if(e<60)return`${e} second${e!==1?"s":""} ago`;if(e<60*60){const n=Math.floor(e/60);return`${n} minute${n!==1?"s":""} ago`}else if(e<60*60*24){const n=Math.floor(e/3600);return`${n} hour${n!==1?"s":""} ago`}else{if(e<60*60*24*2)return"Yesterday";{const r=new Date().getTime()-t.getTime(),i=r/rp,o=r%rp/np,a=i<=1?{month:"long",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"},l=t.toLocaleDateString(void 0,a);if(o<=7){const u={weekday:"long"};return t.toLocaleDateString(void 0,u)}else return l}}},By=(t,e)=>{if(t){var n=t.getBoundingClientRect().top,r=n+window.scrollY-15;setTimeout(()=>{window.scrollTo({top:r,behavior:"smooth"})},e??1e3)}},cH=()=>{var r;const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const n=t.offsetWidth-e.offsetWidth;return(r=t.parentNode)==null||r.removeChild(t),n},Xs=t=>{var n;const e=!!((n=t==null?void 0:t.allowedUserIds)!=null&&n.length);return{isPrivate:e,visibility:e?"private":"public"}},vl=t=>Array.isArray(t)?t:[t],dH=()=>{const t=document.activeElement;t instanceof HTMLElement&&t.blur()},jy=t=>t.join(", ").replace(/,([^,]*)$/," and$1");function _b(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function rD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hH=rD,iD=new Mo("auth","Firebase",rD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=new Tu("@firebase/auth");function fH(t,...e){sp.logLevel<=xt.WARN&&sp.warn(`Auth (${Lo}): ${t}`,...e)}function df(t,...e){sp.logLevel<=xt.ERROR&&sp.error(`Auth (${Lo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t,...e){throw Tb(t,...e)}function es(t,...e){return Tb(t,...e)}function pH(t,e,n){const r=Object.assign(Object.assign({},hH()),{[e]:n});return new Mo("auth","Firebase",r).create(e,{appName:t.name})}function Tb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iD.create(t,...e)}function Ze(t,e,...n){if(!t)throw Tb(e,...n)}function ws(t){const e="INTERNAL ASSERTION FAILED: "+t;throw df(e),new Error(e)}function Ms(t,e){t||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mH(){return dE()==="http:"||dE()==="https:"}function dE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mH()||oA()||"connection"in navigator)?navigator.onLine:!0}function vH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ms(n>e,"Short delay should be less than long delay!"),this.isMobile=tw()||aA()}get(){return gH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t,e){Ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH=new Qd(3e4,6e4);function qa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qa(t,e,n,r,i={}){return oD(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=_u(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),sD.fetch()(aD(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function oD(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},yH),e);try{const i=new bH(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $h(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $h(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $h(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw $h(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw pH(t,c,u);Ui(t,c)}}catch(i){if(i instanceof ai)throw i;Ui(t,"network-request-failed",{message:String(i)})}}async function Xd(t,e,n,r,i={}){const s=await Qa(t,e,n,r,i);return"mfaPendingCredential"in s&&Ui(t,"multi-factor-auth-required",{_serverResponse:s}),s}function aD(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Eb(t.config,i):`${t.config.apiScheme}://${i}`}class bH{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(es(this.auth,"network-request-failed")),wH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $h(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=es(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _H(t,e){return Qa(t,"POST","/v1/accounts:delete",e)}async function TH(t,e){return Qa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EH(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),i=Sb(r);Ze(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pc(Vg(i.auth_time)),issuedAtTime:Pc(Vg(i.iat)),expirationTime:Pc(Vg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Vg(t){return Number(t)*1e3}function Sb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const i=Mf(n);return i?JSON.parse(i):(df("Failed to decode base64 JWT payload"),null)}catch(i){return df("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function SH(t){const e=Sb(t);return Ze(e,"internal-error"),Ze(typeof e.exp<"u","internal-error"),Ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ai&&CH(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function CH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function op(t){var e;const n=t.auth,r=await t.getIdToken(),i=await au(t,TH(n,{idToken:r}));Ze(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?xH(s.providerUserInfo):[],a=kH(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new lD(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function AH(t){const e=Lt(t);await op(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xH(t){return t.map(e=>{var{providerId:n}=e,r=_b(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PH(t,e){const n=await oD(t,{},async()=>{const r=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=aD(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sD.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ze(e.idToken,"internal-error"),Ze(typeof e.idToken<"u","internal-error"),Ze(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SH(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Ze(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await PH(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new gd;return r&&(Ze(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ze(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ze(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gd,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t,e){Ze(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ma{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=_b(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new IH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lD(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await au(this,this.stsTokenManager.getToken(this.auth,e));return Ze(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EH(this,e)}reload(){return AH(this)}_assign(e){this!==e&&(Ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ma(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await op(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await au(this,_H(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:g,isAnonymous:w,providerData:T,stsTokenManager:M}=n;Ze(b&&M,e,"internal-error");const x=gd.fromJSON(this.name,M);Ze(typeof b=="string",e,"internal-error"),Ys(d,e.name),Ys(h,e.name),Ze(typeof g=="boolean",e,"internal-error"),Ze(typeof w=="boolean",e,"internal-error"),Ys(f,e.name),Ys(p,e.name),Ys(m,e.name),Ys(y,e.name),Ys(_,e.name),Ys(v,e.name);const A=new ma({uid:b,auth:e,email:h,emailVerified:g,displayName:d,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:x,createdAt:_,lastLoginAt:v});return T&&Array.isArray(T)&&(A.providerData=T.map(S=>Object.assign({},S))),y&&(A._redirectEventId=y),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new gd;i.updateFromServerResponse(n);const s=new ma({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await op(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=new Map;function bs(t){Ms(t instanceof Function,"Expected a class definition");let e=hE.get(t);return e?(Ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uD.type="NONE";const fE=uD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t,e,n){return`firebase:${t}:${e}:${n}`}class Fl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=hf(this.userKey,i.apiKey,s),this.fullPersistenceKey=hf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ma._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fl(bs(fE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||bs(fE);const o=hf(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=ma._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Fl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Fl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pD(e))return"Blackberry";if(mD(e))return"Webos";if(Cb(e))return"Safari";if((e.includes("chrome/")||dD(e))&&!e.includes("edge/"))return"Chrome";if(fD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cD(t=Tr()){return/firefox\//i.test(t)}function Cb(t=Tr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dD(t=Tr()){return/crios\//i.test(t)}function hD(t=Tr()){return/iemobile/i.test(t)}function fD(t=Tr()){return/android/i.test(t)}function pD(t=Tr()){return/blackberry/i.test(t)}function mD(t=Tr()){return/webos/i.test(t)}function Um(t=Tr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DH(t=Tr()){var e;return Um(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RH(){return R$()&&document.documentMode===10}function gD(t=Tr()){return Um(t)||fD(t)||mD(t)||pD(t)||/windows phone/i.test(t)||hD(t)}function OH(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t,e=[]){let n;switch(t){case"Browser":n=pE(Tr());break;case"Worker":n=`${pE(Tr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lo}/${r}`}async function yD(t,e){return Qa(t,"GET","/v2/recaptchaConfig",qa(t,e))}function mE(t){return t!==void 0&&t.enterprise!==void 0}class wD{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function bD(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=es("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",NH().appendChild(r)})}function MH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const LH="https://www.google.com/recaptcha/enterprise.js?render=",$H="recaptcha-enterprise",UH="NO_RECAPTCHA";class _D{constructor(e){this.type=$H,this.auth=Xa(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{yD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new wD(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;mE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(UH)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&mE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}bD(LH+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function lu(t,e,n,r=!1){const i=new _D(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gE(this),this.idTokenSubscription=new gE(this),this.beforeStateQueue=new FH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bs(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Fl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await op(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Lt(e):null;return n&&Ze(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}async initializeRecaptchaConfig(){const e=await yD(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new wD(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new _D(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bs(e)||this._popupRedirectResolver;Ze(n,this,"argument-error"),this.redirectPersistenceManager=await Fl.create(this,[bs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ze(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&fH(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Xa(t){return Lt(t)}class gE{constructor(e){this.auth=e,this.observer=null,this.addObserver=V$(n=>this.observer=n)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(t,e){const n=us(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Zc(s,e??{}))return i;Ui(i,"already-initialized")}return n.initialize({options:e})}function jH(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function HH(t,e,n){const r=Xa(t);Ze(r._canInitEmulator,r,"emulator-config-failed"),Ze(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=TD(e),{host:o,port:a}=WH(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||KH()}function TD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WH(t){const e=TD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:vE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:vE(o)}}}function vE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function KH(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,n){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function ED(t,e){return Qa(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bg(t,e){return Xd(t,"POST","/v1/accounts:signInWithPassword",qa(t,e))}async function YH(t,e){return Qa(t,"POST","/v1/accounts:sendOobCode",qa(t,e))}async function jg(t,e){return YH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GH(t,e){return Xd(t,"POST","/v1/accounts:signInWithEmailLink",qa(t,e))}async function zH(t,e){return Xd(t,"POST","/v1/accounts:signInWithEmailLink",qa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends Ib{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new vd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new vd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await lu(e,r,"signInWithPassword");return Bg(e,i)}else return Bg(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await lu(e,r,"signInWithPassword");return Bg(e,s)}else return Promise.reject(i)});case"emailLink":return GH(e,{email:this._email,oobCode:this._password});default:Ui(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return ED(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return zH(e,{idToken:n,email:this._email,oobCode:this._password});default:Ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(t,e){return Xd(t,"POST","/v1/accounts:signInWithIdp",qa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH="http://localhost";class Ra extends Ib{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ui("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=_b(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ra(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Vl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vl(e,n)}buildRequest(){const e={requestUri:qH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_u(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XH(t){const e=nc(rc(t)).link,n=e?nc(rc(e)).deep_link_id:null,r=nc(rc(t)).deep_link_id;return(r?nc(rc(r)).link:null)||r||n||e||t}class Ab{constructor(e){var n,r,i,s,o,a;const l=nc(rc(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=QH((i=l.mode)!==null&&i!==void 0?i:null);Ze(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=XH(e);try{return new Ab(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.providerId=Ro.PROVIDER_ID}static credential(e,n){return vd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ab.parseLink(n);return Ze(r,"argument-error"),vd._fromEmailAndCode(e,r.code,r.tenantId)}}Ro.PROVIDER_ID="password";Ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends SD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Jd{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.FACEBOOK_SIGN_IN_METHOD="facebook.com";io.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ra._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return so.credential(n,r)}catch{return null}}}so.GOOGLE_SIGN_IN_METHOD="google.com";so.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Jd{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Jd{constructor(){super("twitter.com")}static credential(e,n){return Ra._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ao.credential(n,r)}catch{return null}}}ao.TWITTER_SIGN_IN_METHOD="twitter.com";ao.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hg(t,e){return Xd(t,"POST","/v1/accounts:signUp",qa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ma._fromIdTokenResponse(e,r,i),o=yE(r);return new Oa({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=yE(r);return new Oa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function yE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends ai{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ap.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ap(e,n,r,i)}}function CD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ap._fromErrorAndOperation(t,s,e,r):s})}async function JH(t,e,n=!1){const r=await au(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Oa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await au(t,CD(r,i,e,t),n);Ze(s.idToken,r,"internal-error");const o=Sb(s.idToken);Ze(o,r,"internal-error");const{sub:a}=o;return Ze(t.uid===a,r,"user-mismatch"),Oa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ui(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e,n=!1){const r="signIn",i=await CD(t,r,e),s=await Oa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function ZH(t,e){return AD(Xa(t),e)}async function wE(t,e){return ID(Lt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t,e,n){var r;Ze(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Ze(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ze(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Ze(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e9(t,e,n){var r;const i=Xa(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await lu(i,s,"getOobCode",!0);n&&Wg(i,o,n),await jg(i,o)}else n&&Wg(i,s,n),await jg(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const a=await lu(i,s,"getOobCode",!0);n&&Wg(i,a,n),await jg(i,a)}else return Promise.reject(o)})}async function t9(t,e,n){var r;const i=Xa(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await lu(i,s,"signUpPassword");o=Hg(i,u)}else o=Hg(i,s).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const c=await lu(i,s,"signUpPassword");return Hg(i,c)}else return Promise.reject(u)});const a=await o.catch(u=>Promise.reject(u)),l=await Oa._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function n9(t,e,n){return ZH(Lt(t),Ro.credential(e,n))}function r9(t,e){return kD(Lt(t),e,null)}function i9(t,e){return kD(Lt(t),null,e)}async function kD(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await au(t,ED(r,s));await t._updateTokensIfNecessary(o,!0)}function xD(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function s9(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function o9(t){return Lt(t).signOut()}async function a9(t){return Lt(t).delete()}const lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lp,"1"),this.storage.removeItem(lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(){const t=Tr();return Cb(t)||Um(t)}const u9=1e3,c9=10;class DD extends PD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=l9()&&OH(),this.fallbackToPolling=gD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);RH()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,c9):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},u9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}DD.type="LOCAL";const d9=DD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD extends PD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RD.type="SESSION";const OD=RD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Fm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await h9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=kb("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function p9(t){ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function m9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function g9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function v9(){return ND()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="firebaseLocalStorageDb",y9=1,up="firebaseLocalStorage",LD="fbase_key";class Zd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vm(t,e){return t.transaction([up],e?"readwrite":"readonly").objectStore(up)}function w9(){const t=indexedDB.deleteDatabase(MD);return new Zd(t).toPromise()}function Wy(){const t=indexedDB.open(MD,y9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(up,{keyPath:LD})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(up)?e(r):(r.close(),await w9(),e(await Wy()))})})}async function bE(t,e,n){const r=Vm(t,!0).put({[LD]:e,value:n});return new Zd(r).toPromise()}async function b9(t,e){const n=Vm(t,!1).get(e),r=await new Zd(n).toPromise();return r===void 0?null:r.value}function _E(t,e){const n=Vm(t,!0).delete(e);return new Zd(n).toPromise()}const _9=800,T9=3;class $D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>T9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ND()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fm._getInstance(v9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await m9(),!this.activeServiceWorker)return;this.sender=new f9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||g9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wy();return await bE(e,lp,"1"),await _E(e,lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>b9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_E(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vm(i,!1).getAll();return new Zd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$D.type="LOCAL";const E9=$D;new Qd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(t,e){return e?bs(e):(Ze(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends Ib{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function C9(t){return AD(t.auth,new xb(t),t.bypassAuthState)}function I9(t){const{auth:e,user:n}=t;return Ze(n,e,"internal-error"),ID(n,new xb(t),t.bypassAuthState)}async function A9(t){const{auth:e,user:n}=t;return Ze(n,e,"internal-error"),JH(n,new xb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C9;case"linkViaPopup":case"linkViaRedirect":return A9;case"reauthViaPopup":case"reauthViaRedirect":return I9;default:Ui(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=new Qd(2e3,1e4);class El extends UD{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,El.currentPopupAction&&El.currentPopupAction.cancel(),El.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ze(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=kb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,El.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,k9.get())};e()}}El.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="pendingRedirect",ff=new Map;class P9 extends UD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ff.get(this.auth._key());if(!e){try{const r=await D9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ff.set(this.auth._key(),e)}return this.bypassAuthState||ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function D9(t,e){const n=N9(e),r=O9(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function R9(t,e){ff.set(t._key(),e)}function O9(t){return bs(t._redirectPersistence)}function N9(t){return hf(x9,t.config.apiKey,t.name)}async function M9(t,e,n=!1){const r=Xa(t),i=S9(r,e),o=await new P9(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=10*60*1e3;class $9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!U9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FD(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(es(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L9&&this.cachedEventUids.clear(),this.cachedEventUids.has(TE(e))}saveEventToCache(e){this.cachedEventUids.add(TE(e)),this.lastProcessedEventTime=Date.now()}}function TE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function U9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F9(t,e={}){return Qa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B9=/^https?/;async function j9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await F9(t);for(const n of e)try{if(H9(n))return}catch{}Ui(t,"unauthorized-domain")}function H9(t){const e=Hy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!B9.test(n))return!1;if(V9.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=new Qd(3e4,6e4);function EE(){const t=ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function K9(t){return new Promise((e,n)=>{var r,i,s;function o(){EE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{EE(),n(es(t,"network-request-failed"))},timeout:W9.get()})}if(!((i=(r=ts().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ts().gapi)===null||s===void 0)&&s.load)o();else{const a=MH("iframefcb");return ts()[a]=()=>{gapi.load?o():n(es(t,"network-request-failed"))},bD(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw pf=null,e})}let pf=null;function Y9(t){return pf=pf||K9(t),pf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9=new Qd(5e3,15e3),z9="__/auth/iframe",q9="emulator/auth/iframe",Q9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J9(t){const e=t.config;Ze(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Eb(e,q9):`https://${t.config.authDomain}/${z9}`,r={apiKey:e.apiKey,appName:t.name,v:Lo},i=X9.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_u(r).slice(1)}`}async function Z9(t){const e=await Y9(t),n=ts().gapi;return Ze(n,t,"internal-error"),e.open({where:document.body,url:J9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q9,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=es(t,"network-request-failed"),a=ts().setTimeout(()=>{s(o)},G9.get());function l(){ts().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t8=500,n8=600,r8="_blank",i8="http://localhost";class SE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s8(t,e,n,r=t8,i=n8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},e8),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Tr().toLowerCase();n&&(a=dD(u)?r8:n),cD(u)&&(e=e||i8,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(DH(u)&&a!=="_self")return o8(e||"",a),new SE(null);const d=window.open(e||"",a,c);Ze(d,t,"popup-blocked");try{d.focus()}catch{}return new SE(d)}function o8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8="__/auth/handler",l8="emulator/auth/handler",u8=encodeURIComponent("fac");async function CE(t,e,n,r,i,s){Ze(t.config.authDomain,t,"auth-domain-config-required"),Ze(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Lo,eventId:i};if(e instanceof SD){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Yv(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof Jd){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${u8}=${encodeURIComponent(l)}`:"";return`${c8(t)}?${_u(a).slice(1)}${u}`}function c8({config:t}){return t.emulator?Eb(t,l8):`https://${t.authDomain}/${a8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="webStorageSupport";class d8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OD,this._completeRedirectFn=M9,this._overrideRedirectResult=R9}async _openPopup(e,n,r,i){var s;Ms((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await CE(e,n,r,Hy(),i);return s8(e,o,kb())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await CE(e,n,r,Hy(),i);return p9(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ms(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Z9(e),r=new $9(e);return n.register("authEvent",i=>(Ze(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kg,{type:Kg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Kg];o!==void 0&&n(!!o),Ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=j9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gD()||Cb()||Um()}}const h8=d8;var IE="@firebase/auth",AE="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function m8(t){Gr(new Or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ze(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vD(t)},u=new VH(r,i,s,l);return jH(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gr(new Or("auth-internal",e=>{const n=Xa(e.getProvider("auth").getImmediate());return(r=>new f8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(IE,AE,p8(t)),rr(IE,AE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8=5*60,v8=iA("authIdTokenMaxAge")||g8;let kE=null;const y8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>v8)return;const i=n==null?void 0:n.token;kE!==i&&(kE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VD(t=Eu()){const e=us(t,"auth");if(e.isInitialized())return e.getImmediate();const n=BH(t,{popupRedirectResolver:h8,persistence:[E9,d9,OD]}),r=iA("authTokenSyncURL");if(r){const s=y8(r);s9(n,s,()=>s(n.currentUser)),xD(n,o=>s(o))}const i=tA("auth");return i&&HH(n,`http://${i}`),n}m8("Browser");const BD=Symbol("firebaseApp");function jD(t){return ls()&&Pr(BD,null)||Eu(t)}const Uh=new WeakMap;function w8(t,e){if(!Uh.has(t)){const n=Op(!0);Uh.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),Uh.delete(t)}}return Uh.get(t)}const b8=new WeakMap,Fh=new WeakMap;function _8(t){const e=jD(t);if(!Fh.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{Fh.set(e,s),n(s.value)}];Fh.set(e,i)}return Fh.get(e)}function T8(t,e){const n=VD(e);xD(n,r=>{const i=_8();t.value=r,Array.isArray(i)&&i[1](t)})}const xE="@firebase/database",PE="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HD="";function E8(t){HD=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Zn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Jc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Fs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new S8(e)}}catch{}return new C8},la=WD("localStorage"),Ky=WD("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new Tu("@firebase/database"),I8=function(){let t=1;return function(){return t++}}(),KD=function(t){const e=W$(t),n=new F$;n.update(e);const r=n.digest();return Xp.encodeByteArray(r)},eh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=eh.apply(null,r):typeof r=="object"?e+=Zn(r):e+=r,e+=" "}return e};let ga=null,DE=!0;const A8=function(t,e){De(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Bl.logLevel=xt.VERBOSE,ga=Bl.log.bind(Bl),e&&Ky.set("logging_enabled",!0)):typeof t=="function"?ga=t:(ga=null,Ky.remove("logging_enabled"))},cr=function(...t){if(DE===!0&&(DE=!1,ga===null&&Ky.get("logging_enabled")===!0&&A8(!0)),ga){const e=eh.apply(null,t);ga(e)}},th=function(t){return function(...e){cr(t,...e)}},Yy=function(...t){const e="FIREBASE INTERNAL ERROR: "+eh(...t);Bl.error(e)},Na=function(...t){const e=`FIREBASE FATAL ERROR: ${eh(...t)}`;throw Bl.error(e),new Error(e)},ii=function(...t){const e="FIREBASE WARNING: "+eh(...t);Bl.warn(e)},k8=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ii("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},YD=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},x8=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},uu="[MIN_NAME]",Ma="[MAX_NAME]",Pu=function(t,e){if(t===e)return 0;if(t===uu||e===Ma)return-1;if(e===uu||t===Ma)return 1;{const n=RE(t),r=RE(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},P8=function(t,e){return t===e?0:t<e?-1:1},Bu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Zn(e))},Pb=function(t){if(typeof t!="object"||t===null)return Zn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Zn(e[r]),n+=":",n+=Pb(t[e[r]]);return n+="}",n},GD=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function vi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const zD=function(t){De(!YD(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(c.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},D8=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},R8=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},O8=new RegExp("^-?(0*)\\d{1,10}$"),N8=-2147483648,M8=2147483647,RE=function(t){if(O8.test(t)){const e=Number(t);if(e>=N8&&e<=M8)return e}return null},nh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ii("Exception was thrown by user callback.",n),e},Math.floor(0))}},L8=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Dc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ii(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(cr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ii(e)}}class Gy{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Gy.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="5",qD="v",QD="s",XD="r",JD="f",ZD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eR="ls",tR="p",zy="ac",nR="websocket",rR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=la.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&la.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function V8(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function iR(t,e,n){De(typeof e=="string","typeof type must == string"),De(typeof n=="object","typeof params must == object");let r;if(e===nR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===rR)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);V8(t)&&(n.ns=t.namespace);const i=[];return vi(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(){this.counters_={}}incrementCounter(e,n=1){Fs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return I$(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg={},Gg={};function Rb(t){const e=t.toString();return Yg[e]||(Yg[e]=new B8),Yg[e]}function j8(t,e){const n=t.toString();return Gg[n]||(Gg[n]=e()),Gg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&nh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="start",W8="close",K8="pLPCommand",Y8="pRTLPCB",sR="id",oR="pw",aR="ser",G8="cb",z8="seg",q8="ts",Q8="d",X8="dframe",lR=1870,uR=30,J8=lR-uR,Z8=25e3,eW=3e4;class Sl{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=th(e),this.stats_=Rb(n),this.urlFn=l=>(this.appCheckToken&&(l[zy]=this.appCheckToken),iR(n,rR,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new H8(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(eW)),x8(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ob((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===OE)this.id=a,this.password=l;else if(o===W8)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[OE]="t",r[aR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[G8]=this.scriptTagHolder.uniqueCallbackIdentifier),r[qD]=Db,this.transportSessionId&&(r[QD]=this.transportSessionId),this.lastSessionId&&(r[eR]=this.lastSessionId),this.applicationId&&(r[tR]=this.applicationId),this.appCheckToken&&(r[zy]=this.appCheckToken),typeof location<"u"&&location.hostname&&ZD.test(location.hostname)&&(r[XD]=JD);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Sl.forceAllow_=!0}static forceDisallow(){Sl.forceDisallow_=!0}static isAvailable(){return Sl.forceAllow_?!0:!Sl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!D8()&&!R8()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Zn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=JI(n),i=GD(r,J8);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[X8]="t",r[sR]=e,r[oR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Zn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ob{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=I8(),window[K8+this.uniqueCallbackIdentifier]=e,window[Y8+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ob.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){cr("frame writing exception"),a.stack&&cr(a.stack),cr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||cr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[sR]=this.myID,e[oR]=this.myPW,e[aR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uR+r.length<=lR;){const o=this.pendingSegs.shift();r=r+"&"+z8+i+"="+o.seg+"&"+q8+i+"="+o.ts+"&"+Q8+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Z8)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{cr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW=16384,nW=45e3;let cp=null;typeof MozWebSocket<"u"?cp=MozWebSocket:typeof WebSocket<"u"&&(cp=WebSocket);class Ai{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=th(this.connId),this.stats_=Rb(n),this.connURL=Ai.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[qD]=Db,typeof location<"u"&&location.hostname&&ZD.test(location.hostname)&&(o[XD]=JD),n&&(o[QD]=n),r&&(o[eR]=r),i&&(o[zy]=i),s&&(o[tR]=s),iR(e,nR,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,la.set("previous_websocket_failure",!0);try{let r;lA(),this.mySock=new cp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Ai.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&cp!==null&&!Ai.forceDisallow_}static previouslyFailed(){return la.isInMemoryStorage||la.get("previous_websocket_failure")===!0}markConnectionHealthy(){la.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Jc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(De(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Zn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=GD(n,tW);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(nW))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ai.responsesRequiredToBeHealthy=2;Ai.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Sl,Ai]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ai&&Ai.isAvailable();let r=n&&!Ai.previouslyFailed();if(e.webSocketOnly&&(n||ii("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ai];else{const i=this.transports_=[];for(const s of yd.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);yd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}yd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW=6e4,iW=5e3,sW=10*1024,oW=100*1024,zg="t",NE="d",aW="s",ME="r",lW="e",LE="o",$E="a",UE="n",FE="p",uW="h";class cW{constructor(e,n,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=th("c:"+this.id+":"),this.transportManager_=new yd(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Dc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>oW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>sW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(zg in e){const n=e[zg];n===$E?this.upgradeIfSecondaryHealthy_():n===ME?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===LE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Bu("t",e),r=Bu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:FE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$E,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:UE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Bu("t",e),r=Bu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Bu(zg,e);if(NE in e){const r=e[NE];if(n===uW){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===UE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===aW?this.onConnectionShutdown_(r):n===ME?this.onReset_(r):n===lW?Yy("Server Error: "+r):n===LE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Db!==r&&ii("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Dc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(rW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Dc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(iW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:FE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(la.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.allowedEvents_=e,this.listeners_={},De(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){De(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends dR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!tw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new dp}getInitialEvent(e){return De(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=32,BE=768;class on{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Gt(){return new on("")}function St(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Oo(t){return t.pieces_.length-t.pieceNum_}function en(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new on(t.pieces_,e)}function hR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function dW(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fR(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function pR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new on(e,0)}function jn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof on)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new on(n,0)}function wt(t){return t.pieceNum_>=t.pieces_.length}function fi(t,e){const n=St(t),r=St(e);if(n===null)return e;if(n===r)return fi(en(t),en(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function mR(t,e){if(Oo(t)!==Oo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function xi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Oo(t)>Oo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class hW{constructor(e,n){this.errorPrefix_=n,this.parts_=fR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=em(this.parts_[r]);gR(this)}}function fW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=em(e),gR(t)}function pW(t){const e=t.parts_.pop();t.byteLength_-=em(e),t.parts_.length>0&&(t.byteLength_-=1)}function gR(t){if(t.byteLength_>BE)throw new Error(t.errorPrefix_+"has a key path longer than "+BE+" bytes ("+t.byteLength_+").");if(t.parts_.length>VE)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+VE+") or object contains a cycle "+qo(t))}function qo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb extends dR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Nb}getInitialEvent(e){return De(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=1e3,mW=60*5*1e3,jE=30*1e3,gW=1.3,vW=3e4,yW="server_kill",HE=3;class ks extends cR{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ks.nextPersistentConnectionId_++,this.log_=th("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ju,this.maxReconnectDelay_=mW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!lA())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Nb.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&dp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Zn(s)),De(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Sa,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),De(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),De(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;ks.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Fs(e,"w")){const r=Jl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ii(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||U$(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=jE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=$$(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),De(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Zn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Yy("Unrecognized action received from server: "+Zn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){De(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ju,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ju,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vW&&(this.reconnectDelay_=ju),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*gW)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ks.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(d){De(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?cr("getToken() completed but was canceled"):(cr("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new cW(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{ii(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(yW)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ii(d),l())}}}interrupt(e){cr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){cr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Yv(this.interruptReasons_)&&(this.reconnectDelay_=ju,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Pb(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new on(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){cr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=HE&&(this.reconnectDelay_=jE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){cr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=HE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+HD.replace(/\./g,"-")]=1,tw()?e["framework.cordova"]=1:aA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=dp.getInstance().currentlyOnline();return Yv(this.interruptReasons_)&&e}}ks.nextPersistentConnectionId_=0;ks.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ct(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ct(uu,e),i=new Ct(uu,n);return this.compare(r,i)!==0}minPost(){return Ct.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh;class vR extends Bm{static get __EMPTY_NODE(){return Vh}static set __EMPTY_NODE(e){Vh=e}compare(e,n){return Pu(e.name,n.name)}isDefinedOn(e){throw bu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ct.MIN}maxPost(){return new Ct(Ma,Vh)}makePost(e,n){return De(typeof e=="string","KeyIndex indexValue must always be a string."),new Ct(e,Vh)}toString(){return".key"}}const jl=new vR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Vn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Vn.RED,this.left=i??Hr.EMPTY_NODE,this.right=s??Hr.EMPTY_NODE}copy(e,n,r,i,s){return new Vn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Hr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Vn.RED=!0;Vn.BLACK=!1;class wW{copy(e,n,r,i,s){return this}insert(e,n,r){return new Vn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Hr{constructor(e,n=Hr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Hr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Hr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Bh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Bh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Bh(this.root_,null,this.comparator_,!0,e)}}Hr.EMPTY_NODE=new wW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t,e){return Pu(t.name,e.name)}function Mb(t,e){return Pu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy;function _W(t){qy=t}const yR=function(t){return typeof t=="number"?"number:"+zD(t):"string:"+t},wR=function(t){if(t.isLeafNode()){const e=t.val();De(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Fs(e,".sv"),"Priority must be a string or number.")}else De(t===qy||t.isEmpty(),"priority of unexpected type.");De(t===qy||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WE;class Un{constructor(e,n=Un.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,De(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),wR(this.priorityNode_)}static set __childrenNodeConstructor(e){WE=e}static get __childrenNodeConstructor(){return WE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Un(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Un.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return wt(e)?this:St(e)===".priority"?this.priorityNode_:Un.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Un.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=St(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(De(r!==".priority"||Oo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Un.__childrenNodeConstructor.EMPTY_NODE.updateChild(en(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+yR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=zD(this.value_):e+=this.value_,this.lazyHash_=KD(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Un.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Un.__childrenNodeConstructor?-1:(De(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Un.VALUE_TYPE_ORDER.indexOf(n),s=Un.VALUE_TYPE_ORDER.indexOf(r);return De(i>=0,"Unknown leaf type: "+n),De(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Un.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bR,_R;function TW(t){bR=t}function EW(t){_R=t}class SW extends Bm{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Pu(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ct.MIN}maxPost(){return new Ct(Ma,new Un("[PRIORITY-POST]",_R))}makePost(e,n){const r=bR(e);return new Ct(n,new Un("[PRIORITY-POST]",r))}toString(){return".priority"}}const mr=new SW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW=Math.log(2);class IW{constructor(e){const n=s=>parseInt(Math.log(s)/CW,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hp=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let d,h;if(c===0)return null;if(c===1)return d=t[l],h=n?n(d):d,new Vn(h,d.node,Vn.BLACK,null,null);{const f=parseInt(c/2,10)+l,p=i(l,f),m=i(f+1,u);return d=t[f],h=n?n(d):d,new Vn(h,d.node,Vn.BLACK,p,m)}},s=function(l){let u=null,c=null,d=t.length;const h=function(p,m){const y=d-p,_=d;d-=p;const v=i(y+1,_),b=t[y],g=n?n(b):b;f(new Vn(g,b.node,m,null,v))},f=function(p){u?(u.left=p,u=p):(c=p,u=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),y=Math.pow(2,l.count-(p+1));m?h(y,Vn.BLACK):(h(y,Vn.BLACK),h(y,Vn.RED))}return c},o=new IW(t.length),a=s(o);return new Hr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qg;const sl={};class _s{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return De(sl&&mr,"ChildrenNode.ts has not been loaded"),qg=qg||new _s({".priority":sl},{".priority":mr}),qg}get(e){const n=Jl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Hr?n:null}hasIndex(e){return Fs(this.indexSet_,e.toString())}addIndex(e,n){De(e!==jl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ct.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=hp(r,e.getCompare()):a=sl;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new _s(c,u)}addToIndexes(e,n){const r=Lf(this.indexes_,(i,s)=>{const o=Jl(this.indexSet_,s);if(De(o,"Missing index implementation for "+s),i===sl)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ct.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),hp(a,o.getCompare())}else return sl;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Ct(e.name,a))),l.insert(e,e.node)}});return new _s(r,this.indexSet_)}removeFromIndexes(e,n){const r=Lf(this.indexes_,i=>{if(i===sl)return i;{const s=n.get(e.name);return s?i.remove(new Ct(e.name,s)):i}});return new _s(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu;class Vt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&wR(this.priorityNode_),this.children_.isEmpty()&&De(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Hu||(Hu=new Vt(new Hr(Mb),null,_s.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hu}updatePriority(e){return this.children_.isEmpty()?this:new Vt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Hu:n}}getChild(e){const n=St(e);return n===null?this:this.getImmediateChild(n).getChild(en(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(De(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ct(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Hu:this.priorityNode_;return new Vt(i,o,s)}}updateChild(e,n){const r=St(e);if(r===null)return n;{De(St(e)!==".priority"||Oo(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(en(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(mr,(o,a)=>{n[o]=a.val(e),r++,s&&Vt.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+yR(this.getPriority().val())+":"),this.forEachChild(mr,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":KD(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ct(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ct(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ct(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ct.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ct.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rh?-1:0}withIndex(e){if(e===jl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Vt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===jl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(mr),i=n.getIterator(mr);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===jl?null:this.indexMap_.get(e.toString())}}Vt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class AW extends Vt{constructor(){super(new Hr(Mb),Vt.EMPTY_NODE,_s.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}}const rh=new AW;Object.defineProperties(Ct,{MIN:{value:new Ct(uu,Vt.EMPTY_NODE)},MAX:{value:new Ct(Ma,rh)}});vR.__EMPTY_NODE=Vt.EMPTY_NODE;Un.__childrenNodeConstructor=Vt;_W(rh);EW(rh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW=!0;function dr(t,e=null){if(t===null)return Vt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),De(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Un(n,dr(e))}if(!(t instanceof Array)&&kW){const n=[];let r=!1;if(vi(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=dr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ct(o,l)))}}),n.length===0)return Vt.EMPTY_NODE;const s=hp(n,bW,o=>o.name,Mb);if(r){const o=hp(n,mr.getCompare());return new Vt(s,dr(e),new _s({".priority":o},{".priority":mr}))}else return new Vt(s,dr(e),_s.Default)}else{let n=Vt.EMPTY_NODE;return vi(t,(r,i)=>{if(Fs(t,r)&&r.substring(0,1)!=="."){const s=dr(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(dr(e))}}TW(dr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW extends Bm{constructor(e){super(),this.indexPath_=e,De(!wt(e)&&St(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Pu(e.name,n.name):s}makePost(e,n){const r=dr(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ct(n,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,rh);return new Ct(Ma,e)}toString(){return fR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW extends Bm{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Pu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ct.MIN}maxPost(){return Ct.MAX}makePost(e,n){const r=dr(e);return new Ct(n,r)}toString(){return".value"}}const DW=new PW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RW(t){return{type:"value",snapshotNode:t}}function OW(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function NW(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function KE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function MW(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return De(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return De(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:uu}hasEnd(){return this.endSet_}getIndexEndValue(){return De(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return De(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ma}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return De(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mr}copy(){const e=new Lb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function YE(t){const e={};if(t.isDefault())return e;let n;if(t.index_===mr?n="$priority":t.index_===DW?n="$value":t.index_===jl?n="$key":(De(t.index_ instanceof xW,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Zn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Zn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Zn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Zn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Zn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function GE(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==mr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends cR{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=th("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(De(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=fp.getListenId_(e,r),a={};this.listens_[o]=a;const l=YE(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let d=c;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Jl(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){const r=fp.getListenId_(e,n);delete this.listens_[r]}get(e){const n=YE(e._queryParams),r=e._path.toString(),i=new Sa;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_u(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Jc(a.responseText)}catch{ii("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&ii("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){return{value:null,children:new Map}}function TR(t,e,n){if(wt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=St(e);t.children.has(r)||t.children.set(r,pp());const i=t.children.get(r);e=en(e),TR(i,e,n)}}function Qy(t,e,n){t.value!==null?n(e,t.value):$W(t,(r,i)=>{const s=new on(e.toString()+"/"+r);Qy(i,s,n)})}function $W(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&vi(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=10*1e3,FW=30*1e3,VW=5*60*1e3;class BW{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new UW(e);const r=zE+(FW-zE)*Math.random();Dc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;vi(e,(i,s)=>{s>0&&Fs(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Dc(this.reportStats_.bind(this),Math.floor(Math.random()*2*VW))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(qi||(qi={}));function ER(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function SR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function CR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=qi.ACK_USER_WRITE,this.source=ER()}operationForChild(e){if(wt(this.path)){if(this.affectedTree.value!=null)return De(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new on(e));return new mp(Gt(),n,this.revert)}}else return De(St(this.path)===e,"operationForChild called for unrelated child."),new mp(en(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=qi.OVERWRITE}operationForChild(e){return wt(this.path)?new La(this.source,Gt(),this.snap.getImmediateChild(e)):new La(this.source,en(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=qi.MERGE}operationForChild(e){if(wt(this.path)){const n=this.children.subtree(new on(e));return n.isEmpty()?null:n.value?new La(this.source,Gt(),n.value):new wd(this.source,Gt(),n)}else return De(St(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new wd(this.source,en(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(wt(e))return this.isFullyInitialized()&&!this.filtered_;const n=St(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function jW(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(MW(o.childName,o.snapshotNode))}),Wu(t,i,"child_removed",e,r,n),Wu(t,i,"child_added",e,r,n),Wu(t,i,"child_moved",s,r,n),Wu(t,i,"child_changed",e,r,n),Wu(t,i,"value",e,r,n),i}function Wu(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>WW(t,a,l)),o.forEach(a=>{const l=HW(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function HW(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function WW(t,e,n){if(e.childName==null||n.childName==null)throw bu("Should only compare child_ events.");const r=new Ct(e.childName,e.snapshotNode),i=new Ct(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t,e){return{eventCache:t,serverCache:e}}function Rc(t,e,n,r){return IR(new $b(e,n,r),t.serverCache)}function AR(t,e,n,r){return IR(t.eventCache,new $b(e,n,r))}function Xy(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function $a(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qg;const KW=()=>(Qg||(Qg=new Hr(P8)),Qg);class Zt{constructor(e,n=KW()){this.value=e,this.children=n}static fromObject(e){let n=new Zt(null);return vi(e,(r,i)=>{n=n.set(new on(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Gt(),value:this.value};if(wt(e))return null;{const r=St(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(en(e),n);return s!=null?{path:jn(new on(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(wt(e))return this;{const n=St(e),r=this.children.get(n);return r!==null?r.subtree(en(e)):new Zt(null)}}set(e,n){if(wt(e))return new Zt(n,this.children);{const r=St(e),s=(this.children.get(r)||new Zt(null)).set(en(e),n),o=this.children.insert(r,s);return new Zt(this.value,o)}}remove(e){if(wt(e))return this.children.isEmpty()?new Zt(null):new Zt(null,this.children);{const n=St(e),r=this.children.get(n);if(r){const i=r.remove(en(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Zt(null):new Zt(this.value,s)}else return this}}get(e){if(wt(e))return this.value;{const n=St(e),r=this.children.get(n);return r?r.get(en(e)):null}}setTree(e,n){if(wt(e))return n;{const r=St(e),s=(this.children.get(r)||new Zt(null)).setTree(en(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Zt(this.value,o)}}fold(e){return this.fold_(Gt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(jn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Gt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(wt(e))return null;{const s=St(e),o=this.children.get(s);return o?o.findOnPath_(en(e),jn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Gt(),n)}foreachOnPath_(e,n,r){if(wt(e))return this;{this.value&&r(n,this.value);const i=St(e),s=this.children.get(i);return s?s.foreachOnPath_(en(e),jn(n,i),r):new Zt(null)}}foreach(e){this.foreach_(Gt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(jn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.writeTree_=e}static empty(){return new Ri(new Zt(null))}}function Oc(t,e,n){if(wt(e))return new Ri(new Zt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=fi(i,e);return s=s.updateChild(o,n),new Ri(t.writeTree_.set(i,s))}else{const i=new Zt(n),s=t.writeTree_.setTree(e,i);return new Ri(s)}}}function qE(t,e,n){let r=t;return vi(n,(i,s)=>{r=Oc(r,jn(e,i),s)}),r}function QE(t,e){if(wt(e))return Ri.empty();{const n=t.writeTree_.setTree(e,new Zt(null));return new Ri(n)}}function Jy(t,e){return Ja(t,e)!=null}function Ja(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(fi(n.path,e)):null}function XE(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(mr,(r,i)=>{e.push(new Ct(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ct(r,i.value))}),e}function wo(t,e){if(wt(e))return t;{const n=Ja(t,e);return n!=null?new Ri(new Zt(n)):new Ri(t.writeTree_.subtree(e))}}function Zy(t){return t.writeTree_.isEmpty()}function cu(t,e){return kR(Gt(),t.writeTree_,e)}function kR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(De(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=kR(jn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(jn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t,e){return NR(e,t)}function YW(t,e,n,r,i){De(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Oc(t.visibleWrites,e,n)),t.lastWriteId=r}function GW(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function zW(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);De(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&qW(a,r.path)?i=!1:xi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return QW(t),!0;if(r.snap)t.visibleWrites=QE(t.visibleWrites,r.path);else{const a=r.children;vi(a,l=>{t.visibleWrites=QE(t.visibleWrites,jn(r.path,l))})}return!0}else return!1}function qW(t,e){if(t.snap)return xi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&xi(jn(t.path,n),e))return!0;return!1}function QW(t){t.visibleWrites=PR(t.allWrites,XW,Gt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function XW(t){return t.visible}function PR(t,e,n){let r=Ri.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)xi(n,o)?(a=fi(n,o),r=Oc(r,a,s.snap)):xi(o,n)&&(a=fi(o,n),r=Oc(r,Gt(),s.snap.getChild(a)));else if(s.children){if(xi(n,o))a=fi(n,o),r=qE(r,a,s.children);else if(xi(o,n))if(a=fi(o,n),wt(a))r=qE(r,Gt(),s.children);else{const l=Jl(s.children,St(a));if(l){const u=l.getChild(en(a));r=Oc(r,Gt(),u)}}}else throw bu("WriteRecord should have .snap or .children")}}return r}function DR(t,e,n,r,i){if(!r&&!i){const s=Ja(t.visibleWrites,e);if(s!=null)return s;{const o=wo(t.visibleWrites,e);if(Zy(o))return n;if(n==null&&!Jy(o,Gt()))return null;{const a=n||Vt.EMPTY_NODE;return cu(o,a)}}}else{const s=wo(t.visibleWrites,e);if(!i&&Zy(s))return n;if(!i&&n==null&&!Jy(s,Gt()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(xi(u.path,e)||xi(e,u.path))},a=PR(t.allWrites,o,e),l=n||Vt.EMPTY_NODE;return cu(a,l)}}}function JW(t,e,n){let r=Vt.EMPTY_NODE;const i=Ja(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(mr,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=wo(t.visibleWrites,e);return n.forEachChild(mr,(o,a)=>{const l=cu(wo(s,new on(o)),a);r=r.updateImmediateChild(o,l)}),XE(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=wo(t.visibleWrites,e);return XE(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function ZW(t,e,n,r,i){De(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=jn(e,n);if(Jy(t.visibleWrites,s))return null;{const o=wo(t.visibleWrites,s);return Zy(o)?i.getChild(n):cu(o,i.getChild(n))}}function e7(t,e,n,r){const i=jn(e,n),s=Ja(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=wo(t.visibleWrites,i);return cu(o,r.getNode().getImmediateChild(n))}else return null}function t7(t,e){return Ja(t.visibleWrites,e)}function n7(t,e,n,r,i,s,o){let a;const l=wo(t.visibleWrites,e),u=Ja(l,Gt());if(u!=null)a=u;else if(n!=null)a=cu(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const c=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&c.length<i;)d(f,r)!==0&&c.push(f),f=h.getNext();return c}else return[]}function r7(){return{visibleWrites:Ri.empty(),allWrites:[],lastWriteId:-1}}function e0(t,e,n,r){return DR(t.writeTree,t.treePath,e,n,r)}function RR(t,e){return JW(t.writeTree,t.treePath,e)}function JE(t,e,n,r){return ZW(t.writeTree,t.treePath,e,n,r)}function gp(t,e){return t7(t.writeTree,jn(t.treePath,e))}function i7(t,e,n,r,i,s){return n7(t.writeTree,t.treePath,e,n,r,i,s)}function Ub(t,e,n){return e7(t.writeTree,t.treePath,e,n)}function OR(t,e){return NR(jn(t.treePath,e),t.writeTree)}function NR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;De(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),De(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,KE(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,NW(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,OW(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,KE(r,e.snapshotNode,i.oldSnap));else throw bu("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const MR=new o7;class Fb{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new $b(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ub(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:$a(this.viewCache_),s=i7(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function a7(t,e){De(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),De(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function l7(t,e,n,r,i){const s=new s7;let o,a;if(n.type===qi.OVERWRITE){const u=n;u.source.fromUser?o=t0(t,e,u.path,u.snap,r,i,s):(De(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!wt(u.path),o=vp(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===qi.MERGE){const u=n;u.source.fromUser?o=c7(t,e,u.path,u.children,r,i,s):(De(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=n0(t,e,u.path,u.children,r,i,a,s))}else if(n.type===qi.ACK_USER_WRITE){const u=n;u.revert?o=f7(t,e,u.path,r,i,s):o=d7(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===qi.LISTEN_COMPLETE)o=h7(t,e,n.path,r,s);else throw bu("Unknown operation type: "+n.type);const l=s.getChanges();return u7(e,o,l),{viewCache:o,changes:l}}function u7(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Xy(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(RW(Xy(e)))}}function LR(t,e,n,r,i,s){const o=e.eventCache;if(gp(r,n)!=null)return e;{let a,l;if(wt(n))if(De(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=$a(e),c=u instanceof Vt?u:Vt.EMPTY_NODE,d=RR(r,c);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=e0(r,$a(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=St(n);if(u===".priority"){De(Oo(n)===1,"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const d=JE(r,n,c,l);d!=null?a=t.filter.updatePriority(c,d):a=o.getNode()}else{const c=en(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const h=JE(r,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(u).updateChild(c,h):d=o.getNode().getImmediateChild(u)}else d=Ub(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,c,i,s):a=o.getNode()}}return Rc(e,a,o.isFullyInitialized()||wt(n),t.filter.filtersNodes())}}function vp(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(wt(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),f,null)}else{const f=St(n);if(!l.isCompleteForPath(n)&&Oo(n)>1)return e;const p=en(n),y=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?u=c.updatePriority(l.getNode(),y):u=c.updateChild(l.getNode(),f,y,p,MR,null)}const d=AR(e,u,l.isFullyInitialized()||wt(n),c.filtersNodes()),h=new Fb(i,d,s);return LR(t,d,n,i,h,a)}function t0(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const c=new Fb(i,e,s);if(wt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Rc(e,u,!0,t.filter.filtersNodes());else{const d=St(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=Rc(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=en(n),f=a.getNode().getImmediateChild(d);let p;if(wt(h))p=r;else{const m=c.getCompleteChild(d);m!=null?hR(h)===".priority"&&m.getChild(pR(h)).isEmpty()?p=m:p=m.updateChild(h,r):p=Vt.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),d,p,h,c,o);l=Rc(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function ZE(t,e){return t.eventCache.isCompleteForChild(e)}function c7(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=jn(n,l);ZE(e,St(c))&&(a=t0(t,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=jn(n,l);ZE(e,St(c))||(a=t0(t,a,c,u,i,s,o))}),a}function eS(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function n0(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;wt(n)?u=r:u=new Zt(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(c.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=eS(t,f,h);l=vp(t,l,new on(d),p,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!c.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),m=eS(t,p,h);l=vp(t,l,new on(d),m,i,s,o,a)}}),l}function d7(t,e,n,r,i,s,o){if(gp(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(wt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return vp(t,e,n,l.getNode().getChild(n),i,s,a,o);if(wt(n)){let u=new Zt(null);return l.getNode().forEachChild(jl,(c,d)=>{u=u.set(new on(c),d)}),n0(t,e,n,u,i,s,a,o)}else return e}else{let u=new Zt(null);return r.foreach((c,d)=>{const h=jn(n,c);l.isCompleteForPath(h)&&(u=u.set(c,l.getNode().getChild(h)))}),n0(t,e,n,u,i,s,a,o)}}function h7(t,e,n,r,i){const s=e.serverCache,o=AR(e,s.getNode(),s.isFullyInitialized()||wt(n),s.isFiltered());return LR(t,o,n,r,MR,i)}function f7(t,e,n,r,i,s){let o;if(gp(r,n)!=null)return e;{const a=new Fb(r,e,i),l=e.eventCache.getNode();let u;if(wt(n)||St(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=e0(r,$a(e));else{const d=e.serverCache.getNode();De(d instanceof Vt,"serverChildren would be complete if leaf node"),c=RR(r,d)}c=c,u=t.filter.updateFullNode(l,c,s)}else{const c=St(n);let d=Ub(r,c,e.serverCache);d==null&&e.serverCache.isCompleteForChild(c)&&(d=l.getImmediateChild(c)),d!=null?u=t.filter.updateChild(l,c,d,en(n),a,s):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(l,c,Vt.EMPTY_NODE,en(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=e0(r,$a(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||gp(r,Gt())!=null,Rc(e,u,o,t.filter.filtersNodes())}}function p7(t,e){const n=$a(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!wt(e)&&!n.getImmediateChild(St(e)).isEmpty())?n.getChild(e):null}function tS(t,e,n,r){e.type===qi.MERGE&&e.source.queryId!==null&&(De($a(t.viewCache_),"We should always have a full cache before handling merges"),De(Xy(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=l7(t.processor_,i,e,n,r);return a7(t.processor_,s.viewCache),De(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,m7(t,s.changes,s.viewCache.eventCache.getNode(),null)}function m7(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return jW(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nS;function g7(t){De(!nS,"__referenceConstructor has already been defined"),nS=t}function Vb(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return De(s!=null,"SyncTree gave us an op for an invalid query."),tS(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(tS(o,e,n,r));return s}}function Bb(t,e){let n=null;for(const r of t.views.values())n=n||p7(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rS;function v7(t){De(!rS,"__referenceConstructor has already been defined"),rS=t}class iS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zt(null),this.pendingWriteTree_=r7(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function y7(t,e,n,r,i){return YW(t.pendingWriteTree_,e,n,r,i),i?Hm(t,new La(ER(),e,n)):[]}function Cl(t,e,n=!1){const r=GW(t.pendingWriteTree_,e);if(zW(t.pendingWriteTree_,e)){let s=new Zt(null);return r.snap!=null?s=s.set(Gt(),!0):vi(r.children,o=>{s=s.set(new on(o),!0)}),Hm(t,new mp(r.path,s,n))}else return[]}function jm(t,e,n){return Hm(t,new La(SR(),e,n))}function w7(t,e,n){const r=Zt.fromObject(n);return Hm(t,new wd(SR(),e,r))}function b7(t,e,n,r){const i=VR(t,r);if(i!=null){const s=BR(i),o=s.path,a=s.queryId,l=fi(o,e),u=new La(CR(a),l,n);return jR(t,o,u)}else return[]}function _7(t,e,n,r){const i=VR(t,r);if(i){const s=BR(i),o=s.path,a=s.queryId,l=fi(o,e),u=Zt.fromObject(n),c=new wd(CR(a),l,u);return jR(t,o,c)}else return[]}function $R(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=fi(o,e),u=Bb(a,l);if(u)return u});return DR(i,e,s,n,!0)}function Hm(t,e){return UR(e,t.syncPointTree_,null,xR(t.pendingWriteTree_,Gt()))}function UR(t,e,n,r){if(wt(t.path))return FR(t,e,n,r);{const i=e.get(Gt());n==null&&i!=null&&(n=Bb(i,Gt()));let s=[];const o=St(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,c=OR(r,o);s=s.concat(UR(a,l,u,c))}return i&&(s=s.concat(Vb(i,t,r,n))),s}}function FR(t,e,n,r){const i=e.get(Gt());n==null&&i!=null&&(n=Bb(i,Gt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=OR(r,o),c=t.operationForChild(o);c&&(s=s.concat(FR(c,a,l,u)))}),i&&(s=s.concat(Vb(i,t,r,n))),s}function VR(t,e){return t.tagToQueryMap.get(e)}function BR(t){const e=t.indexOf("$");return De(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new on(t.substr(0,e))}}function jR(t,e,n){const r=t.syncPointTree_.get(e);De(r,"Missing sync point for query tag that we're tracking");const i=xR(t.pendingWriteTree_,e);return Vb(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new jb(n)}node(){return this.node_}}class Hb{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=jn(this.path_,e);return new Hb(this.syncTree_,n)}node(){return $R(this.syncTree_,this.path_)}}const T7=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},sS=function(t,e,n){if(!t||typeof t!="object")return t;if(De(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return E7(t[".sv"],e,n);if(typeof t[".sv"]=="object")return S7(t[".sv"],e);De(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},E7=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:De(!1,"Unexpected server value: "+t)}},S7=function(t,e,n){t.hasOwnProperty("increment")||De(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&De(!1,"Unexpected increment value: "+r);const i=e.node();if(De(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},C7=function(t,e,n,r){return Wb(e,new Hb(n,t),r)},I7=function(t,e,n){return Wb(t,new jb(e),n)};function Wb(t,e,n){const r=t.getPriority().val(),i=sS(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=sS(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Un(a,dr(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Un(i))),o.forEachChild(mr,(a,l)=>{const u=Wb(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Yb(t,e){let n=e instanceof on?e:new on(e),r=t,i=St(n);for(;i!==null;){const s=Jl(r.node.children,i)||{children:{},childCount:0};r=new Kb(i,r,s),n=en(n),i=St(n)}return r}function Du(t){return t.node.value}function HR(t,e){t.node.value=e,r0(t)}function WR(t){return t.node.childCount>0}function A7(t){return Du(t)===void 0&&!WR(t)}function Wm(t,e){vi(t.node.children,(n,r)=>{e(new Kb(n,t,r))})}function KR(t,e,n,r){n&&!r&&e(t),Wm(t,i=>{KR(i,e,!0,r)}),n&&r&&e(t)}function k7(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ih(t){return new on(t.parent===null?t.name:ih(t.parent)+"/"+t.name)}function r0(t){t.parent!==null&&x7(t.parent,t.name,t)}function x7(t,e,n){const r=A7(n),i=Fs(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,r0(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,r0(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=/[\[\].#$\/\u0000-\u001F\u007F]/,D7=/[\[\].#$\u0000-\u001F\u007F]/,Xg=10*1024*1024,YR=function(t){return typeof t=="string"&&t.length!==0&&!P7.test(t)},R7=function(t){return typeof t=="string"&&t.length!==0&&!D7.test(t)},O7=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),R7(t)},GR=function(t,e,n){const r=n instanceof on?new hW(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+qo(r));if(typeof e=="function")throw new Error(t+"contains a function "+qo(r)+" with contents = "+e.toString());if(YD(e))throw new Error(t+"contains "+e.toString()+" "+qo(r));if(typeof e=="string"&&e.length>Xg/3&&em(e)>Xg)throw new Error(t+"contains a string greater than "+Xg+" utf8 bytes "+qo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(vi(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!YR(o)))throw new Error(t+" contains an invalid key ("+o+") "+qo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);fW(r,o),GR(t,a,r),pW(r)}),i&&s)throw new Error(t+' contains ".value" child '+qo(r)+" in addition to actual children.")}},N7=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!YR(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!O7(n))throw new Error(H$(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function L7(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!mR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Za(t,e,n){L7(t,n),$7(t,r=>xi(r,e)||xi(e,r))}function $7(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(U7(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function U7(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ga&&cr("event: "+n.toString()),nh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7="repo_interrupt",V7=25;class B7{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new M7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pp(),this.transactionQueueTree_=new Kb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function j7(t,e,n){if(t.stats_=Rb(t.repoInfo_),t.forceRestClient_||L8())t.server_=new fp(t.repoInfo_,(r,i,s,o)=>{oS(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>aS(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Zn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ks(t.repoInfo_,e,(r,i,s,o)=>{oS(t,r,i,s,o)},r=>{aS(t,r)},r=>{W7(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=j8(t.repoInfo_,()=>new BW(t.stats_,t.server_)),t.infoData_=new LW,t.infoSyncTree_=new iS({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=jm(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Gb(t,"connected",!1),t.serverSyncTree_=new iS({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Za(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function H7(t){const n=t.infoData_.getNode(new on(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function zR(t){return T7({timestamp:H7(t)})}function oS(t,e,n,r,i){t.dataUpdateCount++;const s=new on(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Lf(n,u=>dr(u));o=_7(t.serverSyncTree_,s,l,i)}else{const l=dr(n);o=b7(t.serverSyncTree_,s,l,i)}else if(r){const l=Lf(n,u=>dr(u));o=w7(t.serverSyncTree_,s,l)}else{const l=dr(n);o=jm(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=qb(t,s)),Za(t.eventQueue_,a,o)}function aS(t,e){Gb(t,"connected",e),e===!1&&Y7(t)}function W7(t,e){vi(e,(n,r)=>{Gb(t,n,r)})}function Gb(t,e,n){const r=new on("/.info/"+e),i=dr(n);t.infoData_.updateSnapshot(r,i);const s=jm(t.infoSyncTree_,r,i);Za(t.eventQueue_,r,s)}function K7(t){return t.nextWriteId_++}function Y7(t){qR(t,"onDisconnectEvents");const e=zR(t),n=pp();Qy(t.onDisconnect_,Gt(),(i,s)=>{const o=C7(i,s,t.serverSyncTree_,e);TR(n,i,o)});let r=[];Qy(n,Gt(),(i,s)=>{r=r.concat(jm(t.serverSyncTree_,i,s));const o=Q7(t,i);qb(t,o)}),t.onDisconnect_=pp(),Za(t.eventQueue_,Gt(),r)}function G7(t){t.persistentConnection_&&t.persistentConnection_.interrupt(F7)}function qR(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),cr(n,...e)}function QR(t,e,n){return $R(t.serverSyncTree_,e,n)||Vt.EMPTY_NODE}function zb(t,e=t.transactionQueueTree_){if(e||Km(t,e),Du(e)){const n=JR(t,e);De(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&z7(t,ih(e),n)}else WR(e)&&Wm(e,n=>{zb(t,n)})}function z7(t,e,n){const r=n.map(u=>u.currentWriteId),i=QR(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];De(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=fi(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{qR(t,"transaction put response",{path:l.toString(),status:u});let c=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,c=c.concat(Cl(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Km(t,Yb(t.transactionQueueTree_,e)),zb(t,t.transactionQueueTree_),Za(t.eventQueue_,e,c);for(let h=0;h<d.length;h++)nh(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ii("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}qb(t,e)}},o)}function qb(t,e){const n=XR(t,e),r=ih(n),i=JR(t,n);return q7(t,i,r),r}function q7(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=fi(n,l.path);let c=!1,d;if(De(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)c=!0,d=l.abortReason,i=i.concat(Cl(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=V7)c=!0,d="maxretry",i=i.concat(Cl(t.serverSyncTree_,l.currentWriteId,!0));else{const h=QR(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){GR("transaction failed: Data returned ",f,l.path);let p=dr(f);typeof f=="object"&&f!=null&&Fs(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=l.currentWriteId,_=zR(t),v=I7(p,h,_);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=v,l.currentWriteId=K7(t),o.splice(o.indexOf(y),1),i=i.concat(y7(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),i=i.concat(Cl(t.serverSyncTree_,y,!0))}else c=!0,d="nodata",i=i.concat(Cl(t.serverSyncTree_,l.currentWriteId,!0))}Za(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Km(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)nh(r[a]);zb(t,t.transactionQueueTree_)}function XR(t,e){let n,r=t.transactionQueueTree_;for(n=St(e);n!==null&&Du(r)===void 0;)r=Yb(r,n),e=en(e),n=St(e);return r}function JR(t,e){const n=[];return ZR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function ZR(t,e,n){const r=Du(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Wm(e,i=>{ZR(t,i,n)})}function Km(t,e){const n=Du(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,HR(e,n.length>0?n:void 0)}Wm(e,r=>{Km(t,r)})}function Q7(t,e){const n=ih(XR(t,e)),r=Yb(t.transactionQueueTree_,e);return k7(r,i=>{Jg(t,i)}),Jg(t,r),KR(r,i=>{Jg(t,i)}),n}function Jg(t,e){const n=Du(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(De(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(De(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Cl(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?HR(e,void 0):n.length=s+1,Za(t.eventQueue_,ih(e),i);for(let o=0;o<r.length;o++)nh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function J7(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ii(`Invalid query segment '${n}' in query '${t}'`)}return e}const lS=function(t,e){const n=Z7(t),r=n.namespace;n.domain==="firebase.com"&&Na(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Na("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||k8();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new F8(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new on(n.pathString)}},Z7=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(i=X7(t.substring(c,d)));const h=J7(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return wt(this._path)?null:hR(this._path)}get ref(){return new Ru(this._repo,this._path)}get _queryIdentifier(){const e=GE(this._queryParams),n=Pb(e);return n==="{}"?"default":n}get _queryObject(){return GE(this._queryParams)}isEqual(e){if(e=Lt(e),!(e instanceof Qb))return!1;const n=this._repo===e._repo,r=mR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+dW(this._path)}}class Ru extends Qb{constructor(e,n){super(e,n,new Lb,!1)}get parent(){const e=pR(this._path);return e===null?null:new Ru(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}g7(Ru);v7(Ru);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK="FIREBASE_DATABASE_EMULATOR_HOST",i0={};let tK=!1;function nK(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Na("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cr("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=lS(s,i),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[eK]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=lS(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new Gy(Gy.OWNER):new U8(t.name,t.options,e);N7("Invalid Firebase Database URL",o),wt(o.path)||Na("Database URL must point to the root of a Firebase Database (not including a child path).");const d=iK(a,t,c,new $8(t.name,n));return new sK(d,t)}function rK(t,e){const n=i0[e];(!n||n[t.key]!==t)&&Na(`Database ${e}(${t.repoInfo_}) has already been deleted.`),G7(t),delete n[t.key]}function iK(t,e,n,r){let i=i0[e.name];i||(i={},i0[e.name]=i);let s=i[t.toURLString()];return s&&Na("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new B7(t,tK,n,r),i[t.toURLString()]=s,s}class sK{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(j7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ru(this._repo,Gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(rK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Na("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oK(t){E8(Lo),Gr(new Or("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return nK(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),rr(xE,PE,t),rr(xE,PE,"esm2017")}ks.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ks.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};oK();function eO(t){return vB(jD(t))}function aK(t){return(e,n)=>{const r=w8(e,n).run(()=>ue(t));b8.set(e,r),T8(r,e)}}function lK(t,{firebaseApp:e,modules:n=[]}){t.provide(BD,e);for(const r of n)t.use(r.bind(null,e))}const uK=""+new URL("bundle.css",import.meta.url).href,tO={name:"Sander Derks",role:"Full-Stack Developer",service:"Software Development",location:{country:"The Netherlands",city:"Nijmegen"}},cK={avatarUrl:uK,headerDescriptionGuest:["Loading"],headerDescriptionUser:["Loading"],blogDescriptionGuest:["Loading"],blogDescriptionUser:["Loading"],blogLoginGuest:"",dashboardDescription:["Loading"],privacyStatement:["Loading"],footerCopyright:"Sander Derks. All rights reserved."},dK=[{name:"",description:"Loading...",technologies:[],loading:!0},{name:"",description:"Loading...",technologies:[],loading:!0},{name:"",description:"Loading...",technologies:[],loading:!0},{name:"",description:"Loading...",technologies:[],loading:!0}],hK=[{id:"1",name:"Loading...",url:"#",loading:!0},{id:"2",name:"Loading...",url:"#",loading:!0},{id:"3",name:"Loading...",url:"#",loading:!0}],uS=[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}];var kn;(t=>{t.mapIncoming=async e=>{var n,r,i,s,o,a;return{...e,alignment:e.alignment??"center",date:e.date.toDate(),dateUpdated:((n=e.dateUpdated)==null?void 0:n.toDate())??null,datePinned:((r=e.datePinned)==null?void 0:r.toDate())??null,reactions:await Promise.all((await Promise.all(((i=e.reactions)==null?void 0:i.map(async l=>await ci(l)))??[])).map(async l=>yp.mapIncoming(l,e.id)).filter(l=>!!l)),sections:((s=e.sections)==null?void 0:s.map(l=>{var u,c;return{...l,alignment:l.alignment??"center",countdown:((u=l.countdown)==null?void 0:u.toDate())??null,timer:((c=l.timer)==null?void 0:c.toDate())??null,coverImageUrl:l.coverImageUrl??""}}))??[],countdown:((o=e.countdown)==null?void 0:o.toDate())??null,timer:((a=e.timer)==null?void 0:a.toDate())??null,archived:e.archived??!1}},t.convert=e=>({title:e.title,description:e.description,descriptionFooter:e.descriptionFooter??"",alignment:e.alignment??"left",sections:e.sections??[],date:e.date,dateUpdated:e.dateUpdated,datePinned:e.datePinned,locked:e.locked??!1,colorPrimary:e.colorPrimary??"",colorSecondary:e.colorSecondary??"",colorTertiary:e.colorTertiary??"",opacityPrimary:e.opacityPrimary??"",opacitySecondary:e.opacitySecondary??"",opacityTertiary:e.opacityTertiary??"",coverImageUrl:e.coverImageUrl??"",allowedUserIds:e.allowedUserIds??[],countdown:e.countdown,timer:e.timer,archived:e.archived}),(e=>{e.convert=n=>({title:n.title,description:n.description,descriptionFooter:n.descriptionFooter,sections:n.sections,coverImageUrl:n.coverImageUrl,countdown:n.countdown,timer:n.timer}),e.instanceOf=n=>["title","description","descriptionFooter","sections","coverImageUrl","countdown","timer"].every(r=>r in n)})(t.Content||(t.Content={})),(e=>{e.convert=n=>({alignment:n.alignment,colorPrimary:n.colorPrimary,colorSecondary:n.colorSecondary,colorTertiary:n.colorTertiary,opacityPrimary:n.opacityPrimary,opacitySecondary:n.opacitySecondary,opacityTertiary:n.opacityTertiary}),e.instanceOf=n=>["alignment","colorPrimary","colorSecondary","colorTertiary","opacityPrimary","opacitySecondary","opacityTertiary"].every(r=>r in n)})(t.Styling||(t.Styling={})),(e=>{e.convert=n=>({locked:n.locked,allowedUserIds:n.allowedUserIds,archived:n.archived,datePinned:n.datePinned}),e.instanceOf=n=>["locked","archived","datePinned"].every(r=>r in n)})(t.Settings||(t.Settings={}))})(kn||(kn={}));var yp;(t=>{t.mapIncoming=async(e,n)=>{if(!e)return null;const r=await ci(e.user);return r?{...e,user:r,postId:n,date:e.date.toDate()}:null},t.convert=e=>({userId:e.user.id,postId:e.postId,message:e.message,date:e.date})})(yp||(yp={}));var s0;(t=>{t.convert=e=>({displayName:e.displayName,avatar:e.avatar??""})})(s0||(s0={}));const na=[{value:"bg-gray-900",label:"Default",background:"bg-gray-900",text:"text-gray-900"},{value:"bg-red-700",label:"Important",background:"bg-red-700",text:"text-red-700"},{value:"bg-orange-500",label:"Orange",background:"bg-orange-500",text:"text-orange-500"},{value:"bg-yellow-900",label:"Amber",background:"bg-yellow-900",text:"text-yellow-900"},{value:"bg-yellow-500",label:"Yellow",background:"bg-yellow-500",text:"text-yellow-500"},{value:"bg-green-500",label:"Green",background:"bg-green-500",text:"text-green-500"},{value:"bg-cyan-500",label:"Aqua",background:"bg-cyan-500",text:"text-cyan-500"},{value:"bg-blue-600",label:"Blue",background:"bg-blue-600",text:"text-blue-600"},{value:"bg-purple-600",label:"Purple",background:"bg-purple-600",text:"text-purple-600"},{value:"bg-pink-600",label:"Pink",background:"bg-pink-600",text:"text-pink-600"}],cS=t=>na.map((e,n)=>n===0?{value:"",label:"Match Primary",background:(t==null?void 0:t.background)||"bg-gray-900",text:(t==null?void 0:t.text)||"text-gray-900"}:e),fK=na.map((t,e)=>e===0?{value:"",label:"Default",background:"bg-gray-700"}:t),ol=[{value:"",label:"Default"},{value:"bg-opacity-10",label:"10"},{value:"bg-opacity-20",label:"20"},{value:"bg-opacity-30",label:"30"},{value:"bg-opacity-40",label:"40"},{value:"bg-opacity-50",label:"50"},{value:"bg-opacity-60",label:"60"},{value:"bg-opacity-70",label:"70"},{value:"bg-opacity-80",label:"80"},{value:"bg-opacity-90",label:"90"},{value:"bg-opacity-100",label:"100"}],Ft=eO(),Kt={content:Ei(Ft,"content"),projects:Ei(Ft,"projects"),menuItems:t=>Ei(Ft,t?"menuItemsPrivate":"menuItems"),menuItemsPrivate:Ei(Ft,"menuItemsPrivate"),blogPosts:t=>Ei(Ft,t?"blogPostsPrivate":"blogPosts"),blogPostsPrivate:Ei(Ft,"blogPostsPrivate"),blogReactions:t=>Ei(Ft,t?"blogReactionsPrivate":"blogReactions"),usersPublic:Ei(Ft,"usersPublic"),files:Ei(Ft,"files")},Gn=rk("main",{state:()=>({profile:tO,content:cK,menuItems:hK,projects:dK,blogPosts:{data:{public:[],private:[],single:null},isLastPage:!1,visibility:"public",fetchLoading:!1,mutationLoading:!1},publicUsers:[],online:!0,debug:!1,fetchAllLoading:!1}),getters:{filteredProjects:t=>t.projects.filter(e=>!e.loading),filteredMenuItems:t=>t.menuItems.filter(e=>!e.loading),visibleMenuItems:t=>t.menuItems.filter(e=>!e.invisible),allBlogPosts:t=>[...t.blogPosts.data.public,...t.blogPosts.data.private],visibleBlogPosts:t=>t.blogPosts.data[t.blogPosts.visibility]},actions:{async fetchAll(t,e){try{this.fetchAllLoading||(this.fetchAllLoading=!0,console.log("attempt to fetch all"),(this.debug||this.online&&(!this.filteredProjects.length||!this.filteredMenuItems.length||e))&&(console.log("fetch all"),this.blogPosts.data={public:[],private:[],single:null},this.blogPosts.visibility="public",await Promise.all([this.fetchProjects(),this.fetchMenuItems(t),this.fetchBlogPosts(t),this.fetchContent(),this.fetchPublicUsers()])))}catch(n){He.firebaseError(this.debug,n)}finally{this.fetchAllLoading=!1}},async fetchContent(){try{const t=await ci(Ot(Ft,Kt.content.id,"production"));this.content={...this.content,...t||{}}}catch(t){He.firebaseError(this.debug,t)}},async fetchProjects(){try{const t=await Promise.all((await il(Kt.projects)).map(async e=>({...e,technologies:await Promise.all(e.technologies.map(async n=>await ci(n)))})));this.projects=t.length?cE(t):this.projects}catch(t){He.firebaseError(this.debug,t)}},moveProject(t,e){const n=this.projects.splice(t,1)[0];this.projects.splice(e,0,n)},async fetchMenuItems(t){try{let e=await il(Kt.menuItems());if(t)try{e=e.concat(await il(Kt.menuItemsPrivate,[eE("allowedUserIds","array-contains",Ot(Ft,Kt.usersPublic.id,t).id)]))}catch{}return this.menuItems=e.length?cE(e):this.menuItems,this.menuItems}catch(e){He.firebaseError(this.debug,e)}},async fetchBlogPosts(t,e={}){try{this.blogPosts.fetchLoading=!0;const r=e.visibility??this.blogPosts.visibility,i=this.blogPosts.data[r][this.blogPosts.data[r].length-1],s=[tE("datePinned","desc"),tE("date","desc"),PB(e.amount||3)];this.visibleBlogPosts.length||(this.blogPosts.isLastPage=!1),e.amount&&(this.blogPosts.data[r]=[]),!e.amount&&i&&s.push(RB(i.datePinned,i.date));var n=[];r==="private"&&t?n=await il(Kt.blogPostsPrivate,[eE("allowedUserIds","array-contains",Ot(Ft,Kt.usersPublic.id,t).id),...s]):r==="public"&&(n=await il(Kt.blogPosts(!1),s));const o=await Promise.all(n.map(async a=>await kn.mapIncoming(a)));if(e.amount)this.blogPosts.data[r]=o;else for(const a of o)this.blogPosts.data[r].push(a);o.length<3&&(this.blogPosts.isLastPage=!0)}catch(r){He.firebaseError(this.debug,r)}finally{this.blogPosts.fetchLoading=!1}},async fetchBlogPost(t,e){try{console.log("attempt to fetch single"),this.blogPosts.fetchLoading=!0;var n=await ci(Ot(Kt.blogPosts(!!(e!=null&&e.isPrivate)),t));return n||(n=await ci(Ot(Kt.blogPostsPrivate,t))),n?(this.blogPosts.data.single=await kn.mapIncoming(n),this.blogPosts.data.single):null}catch(r){return He.firebaseError(this.debug,r),null}finally{this.blogPosts.fetchLoading=!1}},async fetchPublicUsers(){try{this.publicUsers=await il(Kt.usersPublic)}catch(t){return He.firebaseError(this.debug,t),null}},async fetchPublicUser(t){try{return await ci(Ot(Ft,Kt.usersPublic.id,t))}catch(e){return He.firebaseError(this.debug,e),null}},async allowedPublicUsers(t){try{return(await Promise.all(t.map(async n=>{const r=await this.fetchPublicUser(n);return r?{...r,displayName:r.displayName||"Anonymous"}:null}))).filter(Boolean)}catch{return[]}},async createBlogPost(t,e,n,r={includeTime:!1,fetch:!0}){try{return this.blogPosts.mutationLoading=!0,await ip(Ot(Ft,Kt.blogPosts(Xs(e).isPrivate).id,t),{...e,date:r!=null&&r.includeTime?e.date:Dn.now(),dateUpdated:r!=null&&r.includeTime?e.dateUpdated:null,countdown:e.countdown?Dn.fromDate(e.countdown):null,timer:e.timer?Dn.fromDate(e.timer):null}),r!=null&&r.fetch&&this.fetchBlogPosts(n,{amount:this.visibleBlogPosts.length+1}),He.success("Successfully created Post"),!0}catch(i){return He.firebaseError(this.debug,i),!1}finally{this.blogPosts.mutationLoading=!1}},async updateBlogPost(t,e,n){try{this.blogPosts.mutationLoading=!0;const r=Kt.blogPosts(n.isPrivate).id;let i="";kn.Content.instanceOf(e)&&(await to(Ot(Ft,r,t),{...kn.Content.convert(e),dateUpdated:Dn.now()}),i="content"),kn.Styling.instanceOf(e)&&(await to(Ot(Ft,r,t),{...kn.Styling.convert(e)}),i="styling"),kn.Settings.instanceOf(e)&&(await to(Ot(Ft,r,t),{...kn.Settings.convert(e)}),i="settings");const s=await this.fetchBlogPost(t,n);return this.blogPosts.data[n.visibility]=this.blogPosts.data[n.visibility].map(o=>o.id===(s==null?void 0:s.id)?s:o),i}catch(r){He.firebaseError(this.debug,r)}finally{this.blogPosts.mutationLoading=!1}},async toggleBlogPostVisibility(t,e,n,r,i){try{this.blogPosts.mutationLoading=!0;const s=this.allBlogPosts.find(o=>o.id===t);if(await this.deleteBlogPost(t,{includeFiles:!1,includeReactions:!1}),s&&await this.createBlogPost(t,e,i,{includeTime:!0,fetch:!1})){let o;do this.blogPosts.data[r]=[],await this.fetchBlogPosts(i,{visibility:r}),o=this.allBlogPosts.find(a=>a.id===t);while(!o);if(this.blogPosts.visibility=r,o){for(const a of n)await this.deleteBlogReaction(a.id,s,{mutatePost:!1,fetch:!1})||He.error("Failed to delete old Reaction",{debug:this.debug}),await this.createBlogReaction(o,yp.convert(a),{includeTime:!0,fetch:!1})||He.error("Failed to re-create Reaction",{debug:this.debug});for(const a of this.getFilesOfPost(s)){const l=Fy(a);await this.updateFileInfo(l.name,o)||He.error("Failed to move Image",{debug:this.debug})}return this.fetchBlogPosts(i,{amount:this.visibleBlogPosts.length}),!0}else return He.error("Failed to re-create Post",{debug:this.debug}),!1}else return He.error("Failed to re-create Post",{debug:this.debug}),!1}catch(s){return He.firebaseError(this.debug,s),!1}finally{this.blogPosts.mutationLoading=!1}},async deleteBlogPost(t,e={includeFiles:!0,includeReactions:!0}){try{const n=this.allBlogPosts.find(r=>r.id===t);if(n){e.includeReactions&&await this.deleteBlogReactionsOfBlogPost(n),e.includeFiles&&await this.deleteFilesOfBlogPost(n);const r=Xs(n);return await cc(Ot(Ft,Kt.blogPosts(r.isPrivate).id,t)),this.blogPosts.data[r.visibility]=this.blogPosts.data[r.visibility].filter(i=>i.id!==t),He.success("Successfully deleted Post"),!0}return!1}catch(n){return He.firebaseError(this.debug,n),!1}},async createBlogReaction(t,e,n={includeTime:!1,fetch:!0}){try{const r=Xs(t),i=Ot(Ft,Kt.blogPosts(r.isPrivate).id,t.id),s=await ci(i);if(s){const o=await lH(Kt.blogReactions(r.isPrivate),{user:Ot(Ft,Kt.usersPublic.id,e.userId),message:e.message,date:n!=null&&n.includeTime?e.date:Dn.now(),post:i});if(await to(Ot(Ft,Kt.blogPosts(r.isPrivate).id,s.id),{reactions:[...s.reactions??[],o]}),n!=null&&n.fetch){const a=await this.fetchBlogPost(s.id,r);this.blogPosts.data[r.visibility]=this.blogPosts.data[r.visibility].map(l=>l.id===s.id?a??l:l)}return He.success("Successfully created Reaction"),!0}return!1}catch(r){return He.firebaseError(this.debug,r),!1}},async deleteBlogReaction(t,e,n={mutatePost:!0,fetch:!0}){var r;try{const i=Xs(e);if(n.mutatePost){const s=Ot(Ft,Kt.blogPosts(i.isPrivate).id,e.id),o=await ci(s);o&&await to(s,{reactions:((r=o.reactions)==null?void 0:r.filter(a=>a.id!==t))??[]})}return await cc(Ot(Ft,Kt.blogReactions(i.isPrivate).id,t)),n!=null&&n.fetch&&(e.reactions=e.reactions.filter(s=>s.id!==t),this.blogPosts.data[i.visibility]=this.blogPosts.data[i.visibility].map(s=>s.id===e.id?e:s)),He.success("Successfully deleted Reaction"),!0}catch(i){return He.firebaseError(this.debug,i),!1}},async deleteBlogReactionsOfBlogPost(t){try{const e=Xs(t),n=(t==null?void 0:t.reactions)??[];for(const r of n)await cc(Ot(Ft,Kt.blogReactions(e.isPrivate).id,r.id));return n.length&&He.success(`Successfully deleted ${n.length} Reaction${n.length!==1?"s":""}`),!0}catch(e){return He.firebaseError(this.debug,e),!1}},getFilesOfPost(t,e){var r,i;const n=[];if(t.coverImageUrl&&(!e||!e.coverImageUrl)&&n.push(t.coverImageUrl),t.sections.length)for(const[s,o]of t.sections.entries()){const a=(i=(r=e==null?void 0:e.sections)==null?void 0:r[s])==null?void 0:i.coverImageUrl,l=o.coverImageUrl;l&&(!e||!a)&&n.push(l)}return n},async fetchFileInfo(t){try{return await ci(Ot(Ft,Kt.files.path,t))}catch(e){return He.firebaseError(this.debug,e),null}},async uploadFile(t,e,n,r,i,s,o){return await this.createFileInfo(t.name,r,i,s,o)&&await this.createFile(t,e,n)},async createFile(t,e,n){try{const r=eH(t,e);return r.on("state_changed",i=>{const s=i.bytesTransferred/i.totalBytes*100;n(s)}),await r,He.success("Successfully uploaded File"),!0}catch(r){return He.firebaseError(this.debug,r),!1}},async createFileInfo(t,e,n,r,i){try{let s;if(i){const o=Xs(i);s=Ot(Ft,Kt.blogPosts(o.isPrivate).id,i.id)}return await ip(Ot(Ft,Kt.files.path,t),{name:e,owner:n,post:s??null,public:r??!1}),!0}catch(s){return He.firebaseError(this.debug,s),!1}},async updateFileInfo(t,e){try{let n;if(e){const r=Xs(e);n=Ot(Ft,Kt.blogPosts(r.isPrivate).id,e.id)}return await to(Ot(Ft,Kt.files.path,t),{post:n??null}),!0}catch(n){return He.firebaseError(this.debug,n),!1}},async deleteFile(t,e=!1){try{return await cc(Ot(Ft,Kt.files.path,t.name)),await nH(t),e||He.success("Successfully deleted File"),!0}catch(n){return He.firebaseError(this.debug,n),!1}},async deleteFilesOfBlogPost(t,e){try{const n=this.getFilesOfPost(t,e);for(const r of n)await this.deleteFile(Fy(r),!0);return n.length&&He.success(`Successfully deleted ${n.length} File${n.length!==1?"s":""}`),!0}catch(n){return He.firebaseError(this.debug,n),!1}},toggleOnline(){this.online=!this.online},toggleDebug(){this.debug=!this.debug}},persist:{enabled:!0}}),yl=VD(JA);yl.onAuthStateChanged(t=>{Wn().fetchUser(t);const e=Gn();e.$patch({blogPosts:{...e.blogPosts,data:{...e.blogPosts.data,private:[]}}}),e.fetchAll(t==null?void 0:t.uid,!0)});const ms=eO(),Ko={users:Ei(ms,"users"),usersPublic:Ei(ms,"usersPublic")},Wn=rk("auth",{state:()=>({currentUser:null,publicUser:null,firebaseUser:yl.currentUser,loginLoading:!1,mutationLoading:!1,logoutLoading:!1}),getters:{isOwner:t=>{var e;return((e=t.firebaseUser)==null?void 0:e.uid)==="wEaq28Vfx8aygJ6TUi0hDrNut1F2"}},actions:{async fetchUser(t){if(this.firebaseUser=t,t){this.publicUser=await ci(Ot(ms,Ko.usersPublic.id,t.uid));const e=await ci(Ot(ms,Ko.users.id,t.uid));e!=null&&(this.currentUser={firstName:e.firstName||"",lastName:e.lastName||""})}},async login(t,e){try{this.loginLoading=!0;const{user:n}=await n9(yl,t,e);await this.fetchUser(n),He.success("Successfully logged in",{route:"dashboard"})}catch(n){He.firebaseError(!1,n)}finally{this.loginLoading=!1}},async register(t,e,n){try{this.loginLoading=!0;const{user:r}=await t9(yl,t,e);await ip(Ot(ms,Ko.users.id,r.uid),{firstName:n}),await this.updatePublicUser({displayName:"Anonymous",avatar:""}),await this.fetchUser(r),He.success("Successfully created your account",{route:"dashboard"})}catch(r){He.firebaseError(!1,r)}finally{this.loginLoading=!1}},async updateMail(t,e){try{if(this.loginLoading=!0,this.firebaseUser&&this.firebaseUser.email){const n=Ro.credential(this.firebaseUser.email,e);await wE(this.firebaseUser,n),await r9(this.firebaseUser,t),He.success("Successfully changed your e-mail")}}catch(n){He.firebaseError(!1,n)}finally{this.loginLoading=!1}},async updatePassword(t,e){try{if(this.loginLoading=!0,this.firebaseUser&&this.firebaseUser.email){const n=Ro.credential(this.firebaseUser.email,e);await wE(this.firebaseUser,n),await i9(this.firebaseUser,t),He.success("Successfully changed your password")}}catch(n){He.firebaseError(!1,n)}finally{this.loginLoading=!1}},async resetPassword(t){try{await e9(yl,t),He.success("Successfully requested password reset")}catch(e){He.firebaseError(!1,e)}},async updateUser(t){try{this.mutationLoading=!0,this.currentUser&&this.firebaseUser&&(Di(this.currentUser,t)?He.warning("Nothing changed in your details"):(await to(Ot(ms,Ko.users.id,this.firebaseUser.uid),t),await this.fetchUser(this.firebaseUser),He.success("Successfully updated your profile")))}catch(e){He.firebaseError(!1,e)}finally{this.mutationLoading=!1}},async updatePublicUser(t){try{this.mutationLoading=!0,this.publicUser?Di(this.publicUser,t)?He.warning("Nothing changed in your public profile"):(await to(Ot(ms,Ko.usersPublic.id,this.publicUser.id),{displayName:t.displayName,avatar:t.avatar}),await this.fetchUser(this.firebaseUser),He.success("Successfully updated your public profile")):this.firebaseUser?(await ip(Ot(ms,Ko.usersPublic.id,this.firebaseUser.uid),{displayName:t.displayName,avatar:t.avatar}),await this.fetchUser(this.firebaseUser),He.success("Successfully updated your public profile")):He.firebaseError(!1)}catch(e){He.firebaseError(!1,e)}finally{this.mutationLoading=!1}},async logout(){try{this.logoutLoading=!0,await o9(yl),this.currentUser=null,this.publicUser=null,He.success("Successfully logged out",{route:"home"})}catch(t){He.firebaseError(!1,t)}finally{this.logoutLoading=!1}},async deleteAccount(){try{this.logoutLoading=!0,this.currentUser&&this.firebaseUser&&(await cc(Ot(ms,Ko.users.id,this.firebaseUser.uid)),await a9(this.firebaseUser),this.currentUser=null,this.publicUser=null,He.success("Successfully deleted your account",{route:"home"}))}catch(t){He.firebaseError(!1,t)}finally{this.logoutLoading=!1}}},persist:{enabled:!0}});function pK(t,e){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[ne("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z","clip-rule":"evenodd"})])}function mK(t,e){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[ne("path",{"fill-rule":"evenodd",d:"M6 3.75A2.75 2.75 0 018.75 1h2.5A2.75 2.75 0 0114 3.75v.443c.572.055 1.14.122 1.706.2C17.053 4.582 18 5.75 18 7.07v3.469c0 1.126-.694 2.191-1.83 2.54-1.952.599-4.024.921-6.17.921s-4.219-.322-6.17-.921C2.694 12.73 2 11.665 2 10.539V7.07c0-1.321.947-2.489 2.294-2.676A41.047 41.047 0 016 4.193V3.75zm6.5 0v.325a41.622 41.622 0 00-5 0V3.75c0-.69.56-1.25 1.25-1.25h2.5c.69 0 1.25.56 1.25 1.25zM10 10a1 1 0 00-1 1v.01a1 1 0 001 1h.01a1 1 0 001-1V11a1 1 0 00-1-1H10z","clip-rule":"evenodd"}),ne("path",{d:"M3 15.055v-.684c.126.053.255.1.39.142 2.092.642 4.313.987 6.61.987 2.297 0 4.518-.345 6.61-.987.135-.041.264-.089.39-.142v.684c0 1.347-.985 2.53-2.363 2.686a41.454 41.454 0 01-9.274 0C3.985 17.585 3 16.402 3 15.055z"})])}function gK(t,e){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[ne("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})])}function vK(t,e){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[ne("path",{"fill-rule":"evenodd",d:"M9.69 18.933l.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 00.281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 103 9c0 3.492 1.698 5.988 3.355 7.584a13.731 13.731 0 002.273 1.765 11.842 11.842 0 00.976.544l.062.029.018.008.006.003zM10 11.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z","clip-rule":"evenodd"})])}function yK(t,e){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[ne("path",{d:"M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 00-13.074.003z"})])}function wK(t,e){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[ne("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})])}const bK=["href"],_K=Ie({__name:"ButtonWrapper",props:{class:{},activeClass:{},url:{}},setup(t){return(e,n)=>{const r=Ls("RouterLink");return e.url?(D(),J(Ae,{key:0},[e.url.startsWith("http")?(D(),J("a",{key:1,class:Le(e.class),href:e.url},[Pe(e.$slots,"default")],10,bK)):(D(),ve(r,{key:0,class:Le(e.class),"active-class":e.activeClass,to:{path:e.url}},{default:ye(()=>[Pe(e.$slots,"default")]),_:3},8,["class","active-class","to"]))],64)):Pe(e.$slots,"default",{key:1,class:Le(e.class)})}}}),TK=["type","disabled"],EK={class:Le("w-full flex flex-column justify-center")},vt=Ie({__name:"CustomButton",props:{class:{},url:{},type:{},activeClass:{},style:{},outlined:{type:Boolean},list:{type:Boolean},action:{},bold:{type:Boolean},loading:{type:Boolean}},emits:["click"],setup(t){const e=t,n=re(()=>{switch(e.type){case"primary":return e.outlined?e.list?"button-outlined-list-primary":"button-outlined-primary":"button-primary";case"secondary":return e.outlined?e.list?"button-outlined-list-secondary":"button-outlined-secondary":"button-secondary";case"danger":return e.outlined?e.list?"button-outlined-list-danger":"button-outlined-danger":"button-danger";case"action-positive":return e.outlined?"button-outlined-action-positive":"button-action-positive";case"orange":return e.outlined?"button-outlined-orange":"button-orange";default:return e.outlined?e.list?"button-outlined-list-primary":"button-outlined-primary":"button-primary"}});return(r,i)=>(D(),ve(_K,{class:Le([n.value,"md:mt-0 py-2 px-4 rounded-full",r.list?"flex flex-column justify-center":"",...k(vl)(e.class)]),activeClass:r.activeClass,url:r.url},{default:ye(({class:s})=>[ne("button",{class:Le(s),style:Nn(r.style),type:r.action??"button",disabled:r.loading,onClick:i[0]||(i[0]=o=>r.$emit("click"))},[ne("span",EK,[r.loading?(D(),ve(k(pK),{key:0,class:"my-1 mr-2.5 h-5 w-5 animate-spin"})):oe("",!0),Pe(r.$slots,"default")])],14,TK)]),_:3},8,["class","activeClass","url"]))}}),Ku=Ie({__name:"CountdownNumber",props:{time:{},animate:{type:Boolean},direction:{}},setup(t){return(e,n)=>(D(),J("span",{class:Le({"animation ease-in animate-timer-up":e.animate&&e.direction==="up","animation ease-in animate-timer-down":e.animate&&e.direction==="down"})},Xe(e.time),3))}});const SK=Ie({__name:"CountdownWrapper",props:{time:{},direction:{}},setup(t){const e=t,n=m=>(e.direction==="up"?m=Math.abs(m):m=Math.max(0,m),Math.floor(m)),r=ue(0),i=re(()=>n(r.value/rp)),s=re(()=>r.value%rp),o=re(()=>n(s.value/np)),a=re(()=>s.value%np),l=re(()=>n(a.value/Uy)),u=re(()=>a.value%Uy),c=re(()=>n(u.value/$y)),d=re(()=>u.value%$y),h=re(()=>n(d.value/tD)),f=re(()=>i.value===0&&o.value===0&&l.value===0&&c.value===0&&h.value===0),p=()=>{r.value=e.time-new Date().getTime(),setTimeout(p,1e3)};return an(()=>{p()}),(m,y)=>Pe(m.$slots,"default",{years:i.value,days:o.value,hours:l.value,minutes:c.value,seconds:h.value,isTimeUp:f.value,daysIsLast:m.direction==="down"?o.value===364:o.value===0,hoursIsLast:m.direction==="down"?l.value===23:o.value===0,minutesIsLast:m.direction==="down"?c.value===59:c.value===0,secondsIsLast:m.direction==="down"?h.value===59:h.value===0})}}),CK={class:"grid grid-flow-col text-center"},IK={key:0,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},AK={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},kK={key:1,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},xK={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},PK={key:2,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},DK={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},RK={key:3,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},OK={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},NK={key:4,class:"flex flex-col py-2 px-1 sm:px-2 bg-neutral rounded-box text-neutral-content rounded-xl"},MK={class:"text-xl sm:text-3xl md:text-3xl lg:text-5xl font-mono font-bold sm:font-normal"},jh=Ie({__name:"Countdown",props:{time:{},direction:{},alignment:{}},setup(t){const e=t;return(n,r)=>(D(),J("div",{class:Le({block:!n.alignment,flex:!!n.alignment,"justify-start":n.alignment==="left","justify-center":n.alignment==="center","justify-end":n.alignment==="right"})},[ae(SK,{time:e.time,direction:n.direction},{default:ye(({years:i,days:s,hours:o,minutes:a,seconds:l,isTimeUp:u,daysIsLast:c,hoursIsLast:d,minutesIsLast:h,secondsIsLast:f})=>[ne("div",CK,[i>0?(D(),J("div",IK,[ne("span",AK,[ae(Ku,{time:i,animate:i>=0&&c&&d&&h&&f,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" years ")])):oe("",!0),i>0||s>0||u?(D(),J("div",kK,[ne("span",xK,[ae(Ku,{time:s,animate:s>=0&&d&&h&&f,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" days ")])):oe("",!0),i>0||s>0||o>0||u?(D(),J("div",PK,[ne("span",DK,[ae(Ku,{time:o,animate:o>=0&&h&&f,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" hrs ")])):oe("",!0),i>0||s>0||o>0||a>0||u?(D(),J("div",RK,[ne("span",OK,[ae(Ku,{time:a,animate:a>=0&&f,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" mins ")])):oe("",!0),i>0||s>0||o>0||a>0||l>0||u?(D(),J("div",NK,[ne("span",MK,[ae(Ku,{time:l,animate:!u,direction:n.direction},null,8,["time","animate","direction"])]),Qe(" secs ")])):oe("",!0)])]),_:1},8,["time","direction"])],2))}}),LK={class:"flex justify-between"},$K={class:"flex flex-col"},UK={class:"flex justify-between"},FK={class:"xl:flex"},VK={key:0,class:"flex gap-2"},BK=["src"],jK=["href"],HK={class:"text-2xl group-hover/bubble:underline font-bold mb-2"},WK={key:1,class:"flex gap-2"},KK=["src"],YK={key:0,class:"xl:mt-2"},_r=Ie({__name:"Bubble",props:{title:{},subTitle:{},url:{},description:{},avatar:{},loading:{type:Boolean},titleProps:{},subTitleProps:{},descriptionProps:{}},setup(t){return(e,n)=>(D(),J("div",{class:Le(["group/bubble color-primary rounded-3xl p-5 md:p-10",e.url?"hover:bg-opacity-30":null,e.loading?"animate-pulse":null])},[ne("div",LK,[ne("div",$K,[ne("div",UK,[ne("div",FK,[e.url?(D(),J("div",VK,[e.avatar?(D(),J("img",{key:0,class:"rounded-full h-10 w-10",src:e.avatar},null,8,BK)):oe("",!0),ne("a",{href:e.url},[ne("h2",HK,Xe(e.title),1)],8,jK)])):e.title?(D(),J("div",WK,[e.avatar?(D(),J("img",{key:0,class:"rounded-full border border-gray-400 h-10 w-10",src:e.avatar},null,8,KK)):oe("",!0),ne("h2",Ht({class:"text-2xl font-bold mb-2 xl:whitespace-nowrap"},e.titleProps),Xe(e.title),17)])):oe("",!0),e.subTitle?(D(),J("p",Ht({key:2,class:"text-sm text-gray-300 mt-2 mb-2 xl:ms-2 xl:mt-2 xl:whitespace-nowrap"},e.subTitleProps),Xe(e.subTitle),17)):oe("",!0)])]),e.description?(D(),J("div",YK,[(D(!0),J(Ae,null,ut(Array.isArray(e.description)?e.description:[e.description],r=>(D(),J("p",Ht({class:"text-gray-400 mb-2"},e.descriptionProps),Xe(r),17))),256))])):oe("",!0)]),Pe(e.$slots,"right")]),Pe(e.$slots,"default")],2))}}),GK={key:0,class:"text-red-600"},Xb=Ie({__name:"ErrorMessage",props:{name:{},error:{}},setup(t){return(e,n)=>e.error?(D(),J("p",GK,Xe(e.error),1)):oe("",!0)}});var Jb=(t=>(t.Required="Required",t.Numeric="Numeric",t.Min="Min",t.Max="Max",t.Email="Email",t.MinLength="MinLength",t.MaxLength="MaxLength",t.EqualTo="EqualTo",t))(Jb||{});const Et={Required:{type:"Required",test:({value:t})=>!!t.length,error:()=>"Required"},Numeric:{type:"Numeric",test:({value:t})=>/^-?[0-9]\d*(\.\d+)?$/.test(t),error:()=>"Must be numeric"},Min:{type:"Min",test:({value:t,minValue:e})=>e?Number(t)>=e:!0,error:({minValue:t})=>`Must be at least ${t}`},Max:{type:"Max",test:({value:t,maxValue:e})=>e?Number(t)<=e:!0,error:({maxValue:t})=>`May not be more than ${t}`},Email:{type:"Email",test:({value:t})=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),error:()=>"Must be an e-mail address"},MinLength:{type:"MinLength",test:({value:t,minLength:e})=>!t.length||t.length>=(e||3),error:({minLength:t})=>`Must be at least ${t} characters`},MaxLength:{type:"MaxLength",test:({value:t,maxLength:e})=>!t.length||t.length<=(e||50),error:({maxLength:t})=>`May not be more than ${t} characters`},EqualTo:{type:"EqualTo",test:({value:t,compare:e})=>!t.length||!e||t===e.value,error:()=>"Fields don't match",compareError:({compare:t})=>t?"Must be equal to "+(t==null?void 0:t.name):""}},zK={class:"m-4"},qK=["for"],hr=Ie({__name:"TextField",props:{id:{},name:{},label:{},placeholder:{},modelValue:{},error:{},rules:{},inputProps:{},labelProps:{},minLength:{},maxLength:{},minValue:{},maxValue:{},compare:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=re(()=>{const c=r.modelValue;return c?typeof c=="string"?c.endsWith("  ")?c.trim():c:typeof c=="number"?c||0:c||"":r.modelValue||""}),s=re(()=>r.label?r.label+((r.rules??[]).some(c=>c.type===Jb.Required)?" *":""):void 0),o=re(()=>r.name+(r.id?"."+r.id:"")),a=c=>{const d=c.target.value;u("update:modelValue",d),l(d)},l=async c=>{const d=c||i.value,h=r.rules||[];typeof r.minValue=="number"&&h.push(Et.Min),typeof r.maxValue=="number"&&h.push(Et.Max),typeof r.minLength=="number"&&h.push(Et.MinLength),typeof r.maxLength=="number"&&h.push(Et.MaxLength),r.compare&&h.push(Et.EqualTo);const f={value:d.toString(),minValue:r.minValue,maxValue:r.maxValue,minLength:r.minLength,maxLength:r.maxLength,compare:r.compare},p=h.filter(m=>!m.test(f)).map(m=>{var y;return((y=m.compareError)==null?void 0:y.call(m,f))||m.error(f)})||[];u("update:error",p[0]||"")},u=n;return e({test:l}),(c,d)=>{var h,f;return D(),J("div",zK,[c.label?(D(),J("label",Ht({key:0,class:"block text-sm font-bold mb-2",for:o.value},c.labelProps),Xe(s.value),17,qK)):oe("",!0),(D(),ve(Ad(((h=c.inputProps)==null?void 0:h.type)==="textarea"?"textarea":"input"),Ht({id:o.value,ref:"input",value:i.value,class:"input-field",type:((f=c.inputProps)==null?void 0:f.type)||"text",placeholder:c.placeholder,onInput:a},c.inputProps),null,16,["id","value","type","placeholder"])),c.error?(D(),ve(Xb,{key:1,name:c.name,error:c.error},null,8,["name","error"])):oe("",!0)])}}}),QK={class:"flex flex-col"},XK=Ie({__name:"BlogReaction",props:{post:{},reaction:{}},setup(t){const e=t,{publicUser:n,isOwner:r}=Qt(Wn()),{deleteBlogReaction:i}=Gn();return(s,o)=>(D(),ve(_r,{class:Le(["p-5 mb-5 w-full md:w-3/4",e.post.colorTertiary||"",e.post.opacityTertiary||"bg-opacity-50"]),titleProps:{class:"!text-base mt-1"},title:e.reaction.user.displayName||"Unknown user",subTitle:k(Vy)(new Date(e.reaction.date)),avatar:e.reaction.user.avatar,description:e.reaction.message},nr({_:2},[k(n)&&e.reaction.user.id===k(n).id||k(r)?{name:"right",fn:ye(()=>[ne("div",QK,[e.post.locked?oe("",!0):(D(),ve(vt,{key:0,type:"danger",outlined:"",class:"h-fit",onClick:o[0]||(o[0]=a=>k(i)(e.reaction.id,e.post))},{default:ye(()=>[Qe(" Delete ")]),_:1}))])]),key:"0"}:void 0]),1032,["class","title","subTitle","avatar","description"]))}}),JK=["onSubmit"],ZK={class:"grid justify-items-center p-5"},eY=Ie({__name:"BlogReactions",props:{post:{}},setup(t){const e=t,{publicUser:n}=Qt(Wn()),r=Gn(),{content:i}=Qt(r),{createBlogReaction:s}=r,o=ue(),a=Ln({reaction:{value:"",error:""}}),l=async()=>{await o.value.test(),!a.reaction.error&&n.value&&await s(e.post,{userId:n.value.id,postId:e.post.id,message:a.reaction.value,date:new Date})&&(a.reaction.value=""),dH()};return(u,c)=>(D(),J("form",{action:"",onSubmit:Pt(l,["prevent"])},[ne("div",ZK,[(D(!0),J(Ae,null,ut(u.post.reactions,d=>(D(),ve(XK,{post:u.post,reaction:d},null,8,["post","reaction"]))),256)),!k(n)||u.post.reactions.filter(d=>d.user.id===k(n).id).length<3?(D(),ve(_r,{key:0,class:Le(["p-5 flex justify-center w-full md:w-3/4",u.post.colorTertiary||"bg-gray-700",u.post.opacityTertiary||"bg-opacity-50"])},{default:ye(()=>[ae(hr,{class:"w-5/6",id:u.post.id,inputProps:{class:["rounded-xl border-none !placeholder-gray-300",u.post.colorSecondary||u.post.colorPrimary||"bg-gray-600",u.post.opacitySecondary||"!bg-opacity-20",!u.post.locked&&k(n)?"hover:!bg-gray-700 focus:!bg-gray-600 focus:!text-white focus:!placeholder-gray-200":"!bg-gray-900 !bg-opacity-50"],disabled:!k(n)||u.post.locked},ref_key:"reaction",ref:o,name:"reaction",placeholder:u.post.locked?"Locked for comments":k(n)?"Reply":k(i).blogLoginGuest,modelValue:a.reaction.value,"onUpdate:modelValue":c[0]||(c[0]=d=>a.reaction.value=d),error:a.reaction.error,"onUpdate:error":c[1]||(c[1]=d=>a.reaction.error=d),rules:[k(Et).Required],onClick:c[2]||(c[2]=()=>!k(n)&&!u.post.locked?k(o_).push({name:"login"}):{})},null,8,["id","inputProps","placeholder","modelValue","error","rules"])]),_:1},8,["class"])):oe("",!0)])],40,JK))}}),tY=["href"],nY={class:"break-all"},rY={key:1},iY={key:2},Hh=Ie({__name:"BlogPostDescription",props:{class:{},description:{},alignment:{}},setup(t){const e=t,n=r=>{try{const i=new URL(r);return i.protocol==="http:"||i.protocol==="https:"}catch{return!1}};return(r,i)=>(D(!0),J(Ae,null,ut(e.description.split(`
`).map(s=>s.trim()),s=>(D(),J("div",{class:Le(["text-lg",e.class])},[ne("div",{class:Le({block:!r.alignment,flex:!!r.alignment,"justify-start":r.alignment==="left","justify-center":r.alignment==="center","justify-end":r.alignment==="right"})},[n(s)?(D(),J("a",{key:0,href:s,class:"underline hover:no-underline"},[ne("span",nY,Xe(s),1)],8,tY)):s?(D(),J("p",rY,Xe(s),1)):(D(),J("br",iY))],2)],2))),256))}}),sY=["src"],dS=Ie({__name:"BlogPostImage",props:{post:{},coverImageUrl:{},maxHeight:{},alignment:{}},setup(t){return(e,n)=>(D(),J("div",{class:Le({flex:!0,"justify-start":e.alignment==="left","justify-center":e.alignment===void 0||e.alignment==="center","justify-end":e.alignment==="right"})},[ae(_r,{class:Le(["!p-5 my-5 w-fit",e.post.colorTertiary||"",e.post.opacityTertiary||"bg-opacity-50"])},{default:ye(()=>[ne("img",{class:"min-w-25",src:e.coverImageUrl,style:Nn(`max-height: ${e.maxHeight??"50vh"}`)},null,12,sY)]),_:1},8,["class"])],2))}}),oY={class:"flex justify-between h-fit mt-2 gap-2"},aY={class:"flex flex-wrap gap-3"},lY={class:"w-full"},uY={key:0,class:"w-fit flex flex-col justify-start ms-5 gap-2"},cY={class:"flex gap-3"},dY=ne("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"h-6"},[ne("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})],-1),nO=Ie({__name:"BlogPost",props:{post:{}},emits:["editClicked","deleteClicked"],setup(t){const e=t,{publicUsers:n}=Qt(Gn()),{firebaseUser:r,isOwner:i}=Qt(Wn()),s=re(()=>{var a;return(a=e.post.allowedUserIds)!=null&&a.length?n.value.filter(l=>{var u;return(u=e.post.allowedUserIds)==null?void 0:u.includes(l.id)}):[]}),o=()=>{const a=document.createElement("textarea"),{protocol:l,hostname:u,port:c,pathname:d}=window.location,h=`${l}//${u}`+(u==="localhost"?`:${c}`:"")+d;a.value=`${h}/${e.post.id}`,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),He.success("Copied link!")};return(a,l)=>(D(),ve(_r,{id:a.post.id,class:Le(["min-h-[90vh] border-4 border-transparent",a.post.colorPrimary||"bg-gray-900",a.post.opacityPrimary||"bg-opacity-30"]),title:a.post.title,subTitle:k(Vy)(new Date(a.post.date))+(a.post.dateUpdated?" - updated "+k(Vy)(new Date(a.post.dateUpdated)):"")+(a.post.datePinned?" - [PINNED]":"")+(a.post.locked?" - [LOCKED]":""),loading:a.post.loading},{right:ye(()=>[ne("div",cY,[ae(vt,{class:"border-none bg-gray-500 text-purple-100 bg-opacity-10 h-fit",type:"secondary",outlined:"",onClick:o},{default:ye(()=>[dY]),_:1})])]),default:ye(()=>{var u;return[ne("div",oY,[ne("div",aY,[(D(!0),J(Ae,null,ut(s.value,c=>{var d;return D(),ve(_r,{class:"h-fit !p-0 !px-4 !py-1 bg-red-800 bg-opacity-50","sub-title":c.id===((d=k(r))==null?void 0:d.uid)?"You":c.displayName,"sub-title-props":{class:"xl:!ms-0"}},null,8,["sub-title"])}),256))]),k(i)?(D(),J("div",{key:0,class:Le(["flex justify-end lg:hidden h-fit ms-5 gap-3",(u=a.post.allowedUserIds)!=null&&u.length?"flex-col md:flex-row":"flex-row"])},[ae(vt,{class:"min-w-80",onClick:l[0]||(l[0]=c=>a.$emit("editClicked"))},{default:ye(()=>[Qe(" Edit ")]),_:1}),ae(vt,{class:"min-w-80",type:"danger",outlined:"",onClick:l[1]||(l[1]=c=>a.$emit("deleteClicked"))},{default:ye(()=>[Qe(" Delete ")]),_:1})],2)):oe("",!0)]),ae(_r,{class:Le(["min-h-[125px] md:min-h-[160px] p-5 mt-5",a.post.colorSecondary||a.post.colorPrimary,a.post.opacitySecondary||"bg-opacity-25"])},{default:ye(()=>[ne("div",{class:Le(["flex relative",a.post.countdown||a.post.alignment==="center"?"flex justify-between":""])},[ne("div",lY,[a.post.countdown?(D(),ve(jh,{key:0,time:new Date(a.post.countdown).getTime(),direction:"down",alignment:a.post.alignment},null,8,["time","alignment"])):oe("",!0),a.post.timer?(D(),ve(jh,{key:1,time:new Date(a.post.timer).getTime(),direction:"up",alignment:a.post.alignment},null,8,["time","alignment"])):oe("",!0),a.post.description?(D(),ve(Hh,{key:2,description:a.post.description,alignment:a.post.alignment},null,8,["description","alignment"])):oe("",!0)]),ne("div",{class:Le(["hidden lg:flex w-full justify-end",a.post.countdown||a.post.alignment==="center"?"absolute":""])},[k(i)?(D(),J("div",uY,[ae(vt,{class:"col-span-full md:col-span-2 md:col-start-3",onClick:l[2]||(l[2]=c=>a.$emit("editClicked"))},{default:ye(()=>[Qe(" Edit ")]),_:1}),ae(vt,{class:"col-span-full md:col-span-2 md:col-start-3",type:"danger",outlined:"",onClick:l[3]||(l[3]=c=>a.$emit("deleteClicked"))},{default:ye(()=>[Qe(" Delete ")]),_:1})])):oe("",!0)],2)],2),a.post.coverImageUrl?(D(),ve(dS,{key:0,post:a.post,"cover-image-url":a.post.coverImageUrl},null,8,["post","cover-image-url"])):oe("",!0),a.post.descriptionFooter?(D(),ve(Hh,{key:1,description:a.post.descriptionFooter,alignment:a.post.alignment},null,8,["description","alignment"])):oe("",!0),(D(!0),J(Ae,null,ut(a.post.sections,c=>(D(),J("div",null,[c.title?(D(),ve(Hh,{key:0,class:"!text-3xl",description:c.title,alignment:c.alignment},null,8,["description","alignment"])):oe("",!0),c.description?(D(),ve(Hh,{key:1,description:c.description,alignment:c.alignment},null,8,["description","alignment"])):oe("",!0),c.coverImageUrl?(D(),ve(dS,{key:2,post:a.post,"cover-image-url":c.coverImageUrl,alignment:c.alignment,"max-height":"30vh"},null,8,["post","cover-image-url","alignment"])):oe("",!0),c.countdown?(D(),ve(jh,{key:3,time:new Date(c.countdown).getTime(),direction:"down",alignment:c.alignment},null,8,["time","alignment"])):oe("",!0),c.timer?(D(),ve(jh,{key:4,time:new Date(c.timer).getTime(),direction:"up",alignment:c.alignment},null,8,["time","alignment"])):oe("",!0)]))),256))]),_:1},8,["class"]),ae(eY,{post:a.post},null,8,["post"])]}),_:1},8,["id","class","title","subTitle","loading"]))}}),hY={key:0,class:"flex justify-center mt-5"},fY={class:"grid grid-cols-6 mb-5 gap-5"},pY=Ie({__name:"BlogDetails",setup(t){const e=ew(),n=re(()=>e.params.postId),r=Gn(),{fetchBlogPost:i}=r,{blogPosts:s}=Qt(r);return an(()=>{var o,a;n.value&&((o=s.value.data.single)==null?void 0:o.id)!==n.value&&((a=s.value.data.single)==null?void 0:a.id)!==n.value&&i(n.value)}),(o,a)=>k(s).fetchLoading?(D(),J("div",hY,[ae(vt,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:k(s).fetchLoading},{default:ye(()=>[Qe(" Loading... ")]),_:1},8,["loading"])])):(D(),J(Ae,{key:1},[ne("div",fY,[ae(vt,{class:"col-span-full md:col-start-2 md:col-span-4 lg:col-start-3 lg:col-span-2",type:"orange",url:"/blog"},{default:ye(()=>[Qe(" All Posts ")]),_:1})]),k(s).data.single?(D(),ve(nO,{key:0,post:k(s).data.single},null,8,["post"])):oe("",!0)],64))}}),mY={key:0,class:"fixed z-10 inset-0 flex items-center justify-center overflow-auto"},gY={class:"relative w-full md:w-3/4 lg:w-1/2 max-h-screen"},vY={class:"bg-gray-800 border border-gray-500 rounded-2xl p-5"},yY={class:"p-8"},wY={class:"title-secondary"},bY={class:"mt-4 text-gray-300"},_Y={class:"my-2"},TY={class:"grid grid-cols-4 mt-10 gap-3"},Zb=Ie({__name:"Dialog",props:{isOpen:{type:Boolean},title:{},description:{},confirmText:{},confirmLoading:{type:Boolean},confirmProps:{}},emits:["confirm","cancel"],setup(t){const e=t;return Pd(()=>{document.body.style.overflow=""}),pn(()=>e.isOpen,()=>{e.isOpen?(document.body.style.overflow="hidden",document.body.style.marginRight=`${cH()}px`):(document.body.style.marginRight="",document.body.style.overflow="")}),(n,r)=>n.isOpen?(D(),J("div",mY,[ne("div",{class:"fixed inset-0 bg-gray-900 opacity-50 animation",onClick:r[0]||(r[0]=i=>n.$emit("cancel"))}),ne("div",gY,[ne("div",vY,[ne("div",yY,[ne("h3",wY,Xe(n.title),1),ne("div",bY,[(D(!0),J(Ae,null,ut(Array.isArray(n.description)?[...n.description]:[n.description],i=>(D(),J("p",_Y,Xe(i),1))),256))]),Pe(n.$slots,"default")]),ne("div",TY,[ae(vt,{class:Le(["col-span-full",n.confirmText?"md:col-span-2":""]),outlined:"",onClick:r[1]||(r[1]=i=>n.$emit("cancel"))},{default:ye(()=>[Qe(" Cancel ")]),_:1},8,["class"]),n.confirmText?(D(),ve(vt,Ht({key:0,class:"col-span-full md:col-span-2 md:col-start-3",loading:n.confirmLoading},n.confirmProps,{onClick:r[2]||(r[2]=i=>n.$emit("confirm"))}),{default:ye(()=>[Qe(Xe(n.confirmText),1)]),_:1},16,["loading"])):oe("",!0)])])])])):oe("",!0)}}),rO=Ie({__name:"ArrowIcon",props:{rotate:{type:Boolean}},setup(t){return(e,n)=>(D(),ve(k(gK),{class:Le(["sm:block mt-0.5 mr-2.5 h-5 w-5 animation",e.rotate?"rotate-180":""])},null,8,["class"]))}}),EY={class:"flex m-4 justify-center"},Wh=Ie({__name:"Spoiler",props:{text:{}},setup(t){const e=ue(!1);return(n,r)=>(D(),J(Ae,null,[ne("div",EY,[ae(vt,{class:"w-3/4 md:w-2/3 flex justify-center",outlined:"",onClick:r[0]||(r[0]=i=>e.value=!e.value)},{default:ye(()=>[ae(rO,{rotate:e.value},null,8,["rotate"]),Qe(" "+Xe(n.text),1)]),_:1})]),Ji(ne("div",null,[Pe(n.$slots,"default")],512),[[Cs,e.value]])],64))}}),SY={class:"m-4"},CY=["for"],IY=["id"],Nc=Ie({__name:"CheckBoxField",props:{id:{},name:{},label:{},modelValue:{type:Boolean},inputProps:{},labelProps:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=re({get:()=>r.modelValue,set:u=>{l("update:modelValue",u)}}),s=re(()=>r.name+(r.id?"."+r.id:"")),o=async u=>{},a=u=>{u.stopPropagation(),l("update:modelValue",!r.modelValue)},l=n;return e({test:o}),(u,c)=>(D(),J("div",SY,[u.label?(D(),J("label",Ht({key:0,class:"block text-sm font-bold mb-2",for:s.value},u.labelProps),Xe(u.label),17,CY)):oe("",!0),ne("div",{class:"checkbox-field",onClick:a},[Ji(ne("input",Ht({id:s.value,ref:"input","onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d),type:"checkbox"},u.inputProps),null,16,IY),[[zp,i.value]])])]))}}),AY={class:"m-4"},kY=["for"],Kh=Ie({__name:"DateField",props:{id:{},name:{},label:{},modelValue:{},labelProps:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=re({get:()=>r.modelValue,set:l=>{a("update:modelValue",l)}}),s=re(()=>r.name+(r.id!==void 0?"."+r.id:"")),o=async l=>{},a=n;return e({test:o}),(l,u)=>{const c=Ls("VueDatePicker");return D(),J("div",AY,[l.label?(D(),J("label",Ht({key:0,class:"block text-sm font-bold mb-2",for:"dp-input-"+s.value},l.labelProps),Xe(l.label),17,kY)):oe("",!0),ae(c,{uid:s.value,class:"input-field px-5",modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=d=>i.value=d)},null,8,["uid","modelValue"])])}}});let Yh;const xY=new Uint8Array(16);function PY(){if(!Yh&&(Yh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yh(xY)}const qn=[];for(let t=0;t<256;++t)qn.push((t+256).toString(16).slice(1));function DY(t,e=0){return qn[t[e+0]]+qn[t[e+1]]+qn[t[e+2]]+qn[t[e+3]]+"-"+qn[t[e+4]]+qn[t[e+5]]+"-"+qn[t[e+6]]+qn[t[e+7]]+"-"+qn[t[e+8]]+qn[t[e+9]]+"-"+qn[t[e+10]]+qn[t[e+11]]+qn[t[e+12]]+qn[t[e+13]]+qn[t[e+14]]+qn[t[e+15]]}const RY=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hS={randomUUID:RY};function iO(t,e,n){if(hS.randomUUID&&!e&&!t)return hS.randomUUID();t=t||{};const r=t.random||(t.rng||PY)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return DY(r)}const OY=Ie({__name:"TrashIcon",setup(t){return(e,n)=>(D(),ve(k(wK),{class:"h-7 w-7"}))}}),NY=Ie({__name:"DeleteButton",emits:["click"],setup(t,{emit:e}){return(n,r)=>(D(),ve(vt,{class:"w-fit flex justify-center !rounded",type:"danger",outlined:"",onClick:r[0]||(r[0]=i=>n.$emit("click"))},{default:ye(()=>[ae(OY)]),_:1}))}}),MY={class:"m-4"},LY=["for"],$Y={class:"flex justify-between gap-1"},UY=["id","disabled"],FY={key:2},VY={class:"flex justify-center"},BY=["src"],o0=Ie({__name:"FileUpload",props:{id:{},name:{},label:{},modelValue:{},error:{},isPublic:{type:Boolean},blogPost:{},imageProps:{},imageContainerProps:{}},emits:["update:modelValue","update:error"],setup(t,{emit:e}){const n=t,{firebaseUser:r}=Qt(Wn()),{fetchFileInfo:i,uploadFile:s,deleteFile:o}=Gn(),a=ue(),l=ue(null),u=ue(0),c=re(()=>Fy(n.modelValue||"uploads/"+iO())),d=re(()=>c.value.name),h=ue(),f=ue(""),p=v=>{const b=v.target;b.files&&b.files.length>0&&(l.value=b.files[0],f.value=l.value.name,m())},m=async()=>{var v,b;l.value&&((v=r.value)!=null&&v.uid)&&await s(c.value,l.value,g=>u.value=g,f.value,(b=r.value)==null?void 0:b.uid,n.isPublic,n.blogPost)&&(_("update:modelValue",await tH(c.value)),l.value=null,u.value=0)},y=async()=>{await o(c.value)?(window.URL.revokeObjectURL(n.modelValue),a.value.value=null,_("update:modelValue","")):_("update:error","Failed to delete File reference")};pn(()=>n.modelValue,async()=>{var v;h.value=n.modelValue?await i(d.value):void 0,f.value=((v=h.value)==null?void 0:v.name)??""},{immediate:!0});const _=e;return(v,b)=>(D(),J("div",MY,[v.label?(D(),J("label",{key:0,class:"block text-sm font-bold mb-2",for:`${v.id}`},Xe(v.label),9,LY)):oe("",!0),ne("div",$Y,[ne("input",{id:`${v.id}`,ref_key:"fileUpload",ref:a,type:"file",accept:"image/*",onChange:p,class:"input-field",disabled:!!h.value},null,40,UY),h.value?(D(),ve(NY,{key:0,onClick:y})):oe("",!0)]),v.error?(D(),ve(Xb,{key:1,name:v.name,error:v.error},null,8,["name","error"])):oe("",!0),u.value>0?(D(),J("div",FY,"Uploading: "+Xe(u.value.toFixed(2))+"%",1)):oe("",!0),ne("div",VY,[ne("div",Tn(tr(v.imageContainerProps)),[h.value?(D(),J("img",Ht({key:0,class:"mt-4 simple-field w-full min-w-25 md:max-w-fit",src:v.modelValue},v.imageProps),null,16,BY)):oe("",!0)],16)])]))}}),jY={class:"m-4"},HY=["for"],WY=["id","name","multiple"],KY=["value"],ar=Ie({__name:"SelectField",props:{id:{},name:{},label:{},modelValue:{},error:{},rules:{},options:{},multiple:{type:Boolean}},emits:["update:modelValue","update:arrayValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=ue(),s=re(()=>(r.rules??[]).some(h=>h.type===Jb.Required)),o=re({get:()=>{if(r.multiple){const h=Array.isArray(r.modelValue)?r.modelValue:[];return h.length?h:s.value?r.options.length?[r.options[0].value]:[]:[]}else{const h=typeof r.modelValue=="string"||typeof r.modelValue=="number"?r.modelValue:"";return h||(s.value&&r.options.length?r.options[0].value:"")}},set:h=>{var f;d("update:modelValue",vl(h)[0]),d("update:arrayValue",vl(h)),r.multiple||(f=i.value)==null||f.blur()}}),a=re(()=>r.options.find(({value:h})=>h===o.value)),l=re(()=>r.label+(s.value?" *":"")),u=re(()=>r.name+(r.id?"."+r.id:"")),c=async()=>{const h=r.rules||[];let f="";for(const p of vl(o.value)){const m={value:p.toString()},y=h.filter(_=>!_.test(m)).map(_=>_.error(m))||[];if(y[0]){f=y[0];break}}d("update:error",f)};an(()=>{s.value&&(d("update:modelValue",vl(o.value)[0]),d("update:arrayValue",vl(o.value)))});const d=n;return e({test:c}),(h,f)=>{var p,m;return D(),J("div",jY,[ne("label",{class:"block text-sm font-bold mb-2",for:u.value},Xe(l.value),9,HY),Ji(ne("select",{ref_key:"select",ref:i,id:u.value,name:h.name,"onUpdate:modelValue":f[0]||(f[0]=y=>o.value=y),class:Le(["w-full px-4 py-2 select-field block",(p=a.value)==null?void 0:p.background,(m=a.value)!=null&&m.background?"text-white focus:text-black bg-opacity-50":"",h.multiple?"bg-white":""]),multiple:h.multiple},[(D(!0),J(Ae,null,ut(h.options,({value:y,label:_,background:v,text:b},g)=>(D(),J("option",{value:y??g,class:Le(["h-20 select-field",v,v?"bg-opacity-50":"bg-opacity-40",b])},Xe(_),11,KY))),256))],10,WY),[[Q0,o.value]]),h.error?(D(),ve(Xb,{key:0,name:h.name,error:h.error},null,8,["name","error"])):oe("",!0)])}}}),YY={class:"flex justify-evenly font-bold"},GY={class:"px-5"},zY={class:"flex justify-evenly font-bold"},qY={class:"flex justify-center"},QY=Ie({__name:"BlogPostDialog",props:{isOpen:{type:Boolean},selected:{}},emits:["close"],setup(t,{emit:e}){const n=t,{firebaseUser:r}=Qt(Wn()),i=Gn(),{createBlogPost:s,updateBlogPost:o,allowedPublicUsers:a,deleteFilesOfBlogPost:l,toggleBlogPostVisibility:u}=i,{blogPosts:c,publicUsers:d}=Qt(i),h=Z0(),f=ue(),p=ue(),m=ue(),y=ue(),_=ue(),v=ue([]),b=ue([]),g=ue([]),w=ue([]),T=ue([]),M=ue(),x=ue(),A=ue(),S=ue(),N=ue(),U=ue(),C=ue(),H=ue(),O=ue(),R=ue(),W=ue(),X=ue(),$=ue(),I=re(()=>d.value.map(({id:de,displayName:te})=>({value:de,label:te}))),Z=ue([]),ie=re(()=>Z.value.map(de=>de.displayName).join(", ")),ee=()=>({id:{value:iO(),error:""},title:{value:"",error:""},description:{value:"",error:""},descriptionFooter:{value:"",error:""},alignment:{value:"center",error:""},sections:{value:[],error:""},locked:{value:!1,error:""},colorPrimary:{value:"",error:""},colorSecondary:{value:"",error:""},colorTertiary:{value:"",error:""},opacityPrimary:{value:"",error:""},opacitySecondary:{value:"",error:""},opacityTertiary:{value:"",error:""},coverImageUrl:{value:"",error:""},allowedUserIds:{value:[],error:""},countdown:{value:null,error:""},timer:{value:null,error:""},archived:{value:!1,error:""},pinned:{value:!1,error:""}}),V=Ln(ee()),we=re(()=>{var de,te,G,ce;return{id:V.id.value,title:V.title.value,description:V.description.value,descriptionFooter:V.descriptionFooter.value,alignment:V.alignment.value,sections:V.sections.value.map(be=>({title:be.title.value,description:be.description.value,alignment:be.alignment.value,coverImageUrl:be.coverImageUrl.value,countdown:be.countdown.value,timer:be.timer.value})),date:((de=n.selected)==null?void 0:de.date)||new Date,dateUpdated:((te=n.selected)==null?void 0:te.dateUpdated)||new Date,locked:!!V.locked.value,colorPrimary:V.colorPrimary.value,colorSecondary:V.colorSecondary.value,colorTertiary:V.colorTertiary.value,opacityPrimary:V.opacityPrimary.value,opacitySecondary:V.opacitySecondary.value,opacityTertiary:V.opacityTertiary.value,coverImageUrl:V.coverImageUrl.value,reactions:[],allowedUserIds:V.allowedUserIds.value,countdown:V.countdown.value,timer:V.timer.value,archived:V.archived.value,datePinned:V.pinned.value?(G=n.selected)!=null&&G.datePinned?((ce=n.selected)==null?void 0:ce.datePinned)??null:new Date:null}}),B=re(()=>kn.Content.convert(we.value)),q=re(()=>!!n.selected&&!Di(kn.Content.convert(kn.convert(n.selected)),B.value)),le=re(()=>kn.Styling.convert(we.value)),Y=re(()=>!!n.selected&&!Di(kn.Styling.convert(kn.convert(n.selected)),le.value)),pe=re(()=>kn.Settings.convert(we.value)),Se=re(()=>!!n.selected&&!Di(kn.Settings.convert(kn.convert(n.selected)),pe.value)),E=re(()=>{var de,te,G,ce,be,Ce;return!!((te=(de=n.selected)==null?void 0:de.allowedUserIds)!=null&&te.length)&&!((G=pe.value.allowedUserIds)!=null&&G.length)||!((be=(ce=n.selected)==null?void 0:ce.allowedUserIds)!=null&&be.length)&&!!((Ce=pe.value.allowedUserIds)!=null&&Ce.length)}),P=re(()=>{const de=[];return q.value&&de.push("Content"),Y.value&&de.push("Styling"),Se.value&&de.push("Settings"),de.length?"Update "+jy(de):void 0}),F=re(()=>Xs(n.selected)),z=async()=>{var de,te,G,ce,be,Ce,Ne;if(await Promise.all([p.value.test(),m.value.test(),y.value.test(),_.value.test(),...(de=v.value)==null?void 0:de.map(Te=>Te.test()),...(te=b.value)==null?void 0:te.map(Te=>Te.test()),...(G=g.value)==null?void 0:G.map(Te=>Te.test()),...(ce=w.value)==null?void 0:ce.map(Te=>Te.test()),...(be=T.value)==null?void 0:be.map(Te=>Te.test()),x.value.test(),A.value.test(),S.value.test(),N.value.test(),U.value.test(),O.value.test(),R.value.test(),W.value.test(),X.value.test(),$.value.test()]),V.allowedUserIds.value.length&&!Z.value.length&&(V.allowedUserIds.error="Invalid user ID's"),Object.keys(V).map(Te=>V[Te].error).every(Te=>!Te))if(!n.selected)await s(V.id.value,we.value,(Ce=r.value)==null?void 0:Ce.uid)&&(fe("close"),h.replace({...h.currentRoute.value,hash:`#${V.id.value}`}));else if(E.value){fe("close");const Te=n.selected.id;await u(Te,kn.convert(we.value),n.selected.reactions,we.value.allowedUserIds.length?"private":"public",(Ne=r.value)==null?void 0:Ne.uid)&&(He.success("Successfully updated Post Visibility"),h.replace({...h.currentRoute.value,hash:`#${Te}`}))}else{let Te=[];q.value&&Te.push(await o(n.selected.id,B.value,F.value)),Y.value&&Te.push(await o(n.selected.id,le.value,F.value)),Se.value&&Te.push(await o(n.selected.id,pe.value,F.value)),Te=Te.filter(Me=>typeof Me=="string"),Te.length&&(He.success(`Successfully updated Post ${jy(Te)}`),fe("close"))}},he=async()=>{l(we.value,n.selected??void 0),Object.assign(V,ee()),fe("close")};pn(()=>n.selected,de=>{var te,G,ce,be,Ce,Ne,Te;de?(V.title.value=de.title,V.description.value=de.description,V.descriptionFooter.value=de.descriptionFooter||"",V.alignment.value=de.alignment,(te=de.sections)!=null&&te.length&&(V.sections.value=de.sections.map(Me=>({title:{value:Me.title,error:""},description:{value:Me.description,error:""},alignment:{value:Me.alignment,error:""},coverImageUrl:{value:Me.coverImageUrl??"",error:""},countdown:{value:Me.countdown,error:""},timer:{value:Me.timer,error:""}}))),V.locked.value=!!de.locked,V.colorPrimary.value=((G=na.find(Me=>Me.value===de.colorPrimary))==null?void 0:G.value.toString())||"bg-gray-900",V.colorSecondary.value=((ce=cS(na.find(Me=>Me.value===V.colorPrimary.value)).find(Me=>Me.value===(de.colorSecondary||"")))==null?void 0:ce.value.toString())||"",V.colorTertiary.value=((be=na.find(Me=>Me.value===(de.colorTertiary||"")))==null?void 0:be.value.toString())||"",V.opacityPrimary.value=((Ce=ol.find(Me=>Me.value===(de.opacityPrimary||"")))==null?void 0:Ce.value.toString())||"",V.opacitySecondary.value=((Ne=ol.find(Me=>Me.value===(de.opacitySecondary||"")))==null?void 0:Ne.value.toString())||"",V.opacityTertiary.value=((Te=ol.find(Me=>Me.value===(de.opacityTertiary||"")))==null?void 0:Te.value.toString())||"",V.coverImageUrl.value=de.coverImageUrl||"",V.allowedUserIds.value=de.allowedUserIds||[],V.countdown.value=de.countdown,V.timer.value=de.timer,V.archived.value=de.archived,V.pinned.value=!!de.datePinned):Object.assign(V,ee())}),pn(()=>V.allowedUserIds.value,async de=>{Z.value=await a(de)});const fe=e;return(de,te)=>(D(),ve(Zb,{isOpen:de.isOpen,title:de.selected?"Update Post":"Create Post",description:de.selected?"Update this post":"Create a new post","confirm-text":de.selected?P.value:"Create","confirm-loading":k(c).mutationLoading,onConfirm:z,onCancel:he},{default:ye(()=>[ne("form",{ref_key:"dialog",ref:f,class:"pt-6 mb-4 xl:px-36"},[ae(hr,{ref_key:"title",ref:p,name:"title",label:"Title",placeholder:"Amazing Post",modelValue:V.title.value,"onUpdate:modelValue":te[0]||(te[0]=G=>V.title.value=G),error:V.title.error,"onUpdate:error":te[1]||(te[1]=G=>V.title.error=G),rules:[k(Et).Required],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),ae(hr,{ref_key:"description",ref:m,name:"description",label:"Description",placeholder:"Something about my post...",modelValue:V.description.value,"onUpdate:modelValue":te[2]||(te[2]=G=>V.description.value=G),error:V.description.error,"onUpdate:error":te[3]||(te[3]=G=>V.description.error=G),"max-length":500,"input-props":{type:"textarea",rows:V.description.value.split(`
`).length<=5?V.description.value.split(`
`).length:5}},null,8,["modelValue","error","input-props"]),ae(ar,{ref_key:"alignment",ref:_,name:"alignment",label:"Alignment",modelValue:V.alignment.value,"onUpdate:modelValue":te[4]||(te[4]=G=>V.alignment.value=G),error:V.alignment.error,"onUpdate:error":te[5]||(te[5]=G=>V.alignment.error=G),options:k(uS),rules:[k(Et).Required]},null,8,["modelValue","error","options","rules"]),ae(o0,{ref_key:"coverImageUrl",ref:H,id:"coverImageUrl",name:"coverImageUrl",label:"Cover image",modelValue:V.coverImageUrl.value,"onUpdate:modelValue":te[6]||(te[6]=G=>V.coverImageUrl.value=G),error:V.coverImageUrl.error,"onUpdate:error":te[7]||(te[7]=G=>V.coverImageUrl.error=G),"blog-post":we.value},null,8,["modelValue","error","blog-post"]),de.isOpen?(D(),ve(Wh,{key:0,text:"Other content"},{default:ye(()=>[ae(hr,{ref_key:"descriptionFooter",ref:y,name:"descriptionFooter",label:"Footer",placeholder:"Some beautiful ending...",modelValue:V.descriptionFooter.value,"onUpdate:modelValue":te[8]||(te[8]=G=>V.descriptionFooter.value=G),error:V.descriptionFooter.error,"onUpdate:error":te[9]||(te[9]=G=>V.descriptionFooter.error=G),"max-length":300,"input-props":{type:"textarea",rows:V.descriptionFooter.value.split(`
`).length<=5?V.descriptionFooter.value.split(`
`).length:5}},null,8,["modelValue","error","input-props"]),ae(Kh,{ref_key:"countdown",ref:R,name:"countdown",label:"Countdown",modelValue:V.countdown.value,"onUpdate:modelValue":te[10]||(te[10]=G=>V.countdown.value=G),error:V.countdown.error,"onUpdate:error":te[11]||(te[11]=G=>V.countdown.error=G)},null,8,["modelValue","error"]),ae(Kh,{ref_key:"timer",ref:W,name:"timer",label:"Timer",modelValue:V.timer.value,"onUpdate:modelValue":te[12]||(te[12]=G=>V.timer.value=G),error:V.timer.error,"onUpdate:error":te[13]||(te[13]=G=>V.timer.error=G)},null,8,["modelValue","error"])]),_:1})):oe("",!0),de.isOpen?(D(),ve(Wh,{key:1,text:"Sections"},{default:ye(()=>[(D(!0),J(Ae,null,ut(V.sections.value,(G,ce)=>(D(),J("div",{key:ce,class:"border border-gray-400 rounded-lg py-5 mb-5"},[ne("div",YY,[ne("p",null,"Section "+Xe(ce+1),1)]),ne("div",GY,[ae(hr,{ref_for:!0,ref_key:"sectionTitle",ref:v,id:ce,name:"sectionTitle",label:"Section Title",modelValue:G.title.value,"onUpdate:modelValue":be=>G.title.value=be,error:G.title.error,"onUpdate:error":be=>G.title.error=be,max:50},null,8,["id","modelValue","onUpdate:modelValue","error","onUpdate:error"]),ae(hr,{ref_for:!0,ref_key:"sectionDescription",ref:b,id:ce,name:"sectionDescription",label:"Section Description",modelValue:G.description.value,"onUpdate:modelValue":be=>G.description.value=be,error:G.description.error,"onUpdate:error":be=>G.description.error=be,max:300},null,8,["id","modelValue","onUpdate:modelValue","error","onUpdate:error"]),ae(ar,{ref_for:!0,ref_key:"sectionAlignment",ref:g,id:ce,name:"sectionAlignment",label:"Alignment",modelValue:G.alignment.value,"onUpdate:modelValue":be=>G.alignment.value=be,error:G.alignment.error,"onUpdate:error":be=>G.alignment.error=be,options:k(uS),rules:[k(Et).Required]},null,8,["id","modelValue","onUpdate:modelValue","error","onUpdate:error","options","rules"]),ae(o0,{ref_for:!0,ref:"sectionCoverImageUrl",id:ce,name:"coverImageUrl",label:"Cover image",modelValue:G.coverImageUrl.value,"onUpdate:modelValue":be=>G.coverImageUrl.value=be,error:G.coverImageUrl.error,"onUpdate:error":be=>G.coverImageUrl.error=be},null,8,["id","modelValue","onUpdate:modelValue","error","onUpdate:error"]),ae(Kh,{ref_for:!0,ref_key:"sectionCountdown",ref:w,id:ce,name:"countdown",label:"Countdown",modelValue:G.countdown.value,"onUpdate:modelValue":be=>G.countdown.value=be,error:G.countdown.error,"onUpdate:error":be=>G.countdown.error=be},null,8,["id","modelValue","onUpdate:modelValue","error","onUpdate:error"]),ae(Kh,{ref_for:!0,ref_key:"sectionTimer",ref:T,id:ce,name:"timer",label:"Timer",modelValue:G.timer.value,"onUpdate:modelValue":be=>G.timer.value=be,error:G.timer.error,"onUpdate:error":be=>G.timer.error=be},null,8,["id","modelValue","onUpdate:modelValue","error","onUpdate:error"]),ne("div",zY,[ae(vt,{class:"w-1/2",type:"danger",outlined:"",onClick:te[14]||(te[14]=be=>V.sections.value.pop())},{default:ye(()=>[Qe(" Delete ")]),_:1})])])]))),128)),ne("div",qY,[ae(vt,{class:"w-1/2",type:"action-positive",onClick:te[15]||(te[15]=G=>V.sections.value.push({title:{value:"",error:""},description:{value:"",error:""},alignment:{value:"left",error:""},coverImageUrl:{value:"",error:""},countdown:{value:null,error:""},timer:{value:null,error:""}}))},{default:ye(()=>[Qe(" Add Section ")]),_:1})])]),_:1})):oe("",!0),de.isOpen?(D(),ve(Wh,{key:2,text:"Styling"},{default:ye(()=>[ae(ar,{ref_key:"colorPrimary",ref:x,name:"colorPrimary",label:"Primary Style",modelValue:V.colorPrimary.value,"onUpdate:modelValue":te[16]||(te[16]=G=>V.colorPrimary.value=G),error:V.colorPrimary.error,"onUpdate:error":te[17]||(te[17]=G=>V.colorPrimary.error=G),options:k(na),rules:[k(Et).Required]},null,8,["modelValue","error","options","rules"]),ae(ar,{ref_key:"opacityPrimary",ref:N,name:"opacityPrimary",label:"Primary Opacity",modelValue:V.opacityPrimary.value,"onUpdate:modelValue":te[18]||(te[18]=G=>V.opacityPrimary.value=G),error:V.opacityPrimary.error,"onUpdate:error":te[19]||(te[19]=G=>V.opacityPrimary.error=G),options:k(ol)},null,8,["modelValue","error","options"]),ae(ar,{ref_key:"colorSecondary",ref:A,name:"colorSecondary",label:"Secondary Style",modelValue:V.colorSecondary.value,"onUpdate:modelValue":te[20]||(te[20]=G=>V.colorSecondary.value=G),error:V.colorSecondary.error,"onUpdate:error":te[21]||(te[21]=G=>V.colorSecondary.error=G),options:k(cS)(k(na).find(G=>G.value===V.colorPrimary.value))},null,8,["modelValue","error","options"]),ae(ar,{ref_key:"opacitySecondary",ref:U,name:"opacitySecondary",label:"Secondary Opacity",modelValue:V.opacitySecondary.value,"onUpdate:modelValue":te[22]||(te[22]=G=>V.opacitySecondary.value=G),error:V.opacitySecondary.error,"onUpdate:error":te[23]||(te[23]=G=>V.opacitySecondary.error=G),options:k(ol)},null,8,["modelValue","error","options"]),ae(ar,{ref_key:"colorTertiary",ref:S,name:"colorTertiary",label:"Tertiary Style",modelValue:V.colorTertiary.value,"onUpdate:modelValue":te[24]||(te[24]=G=>V.colorTertiary.value=G),error:V.colorTertiary.error,"onUpdate:error":te[25]||(te[25]=G=>V.colorTertiary.error=G),options:k(fK)},null,8,["modelValue","error","options"]),ae(ar,{ref_key:"opacityTertiary",ref:C,name:"opacityTertiary",label:"Tertiary Opacity",modelValue:V.opacityTertiary.value,"onUpdate:modelValue":te[26]||(te[26]=G=>V.opacityTertiary.value=G),error:V.opacityTertiary.error,"onUpdate:error":te[27]||(te[27]=G=>V.opacityTertiary.error=G),options:k(ol)},null,8,["modelValue","error","options"])]),_:1})):oe("",!0),de.isOpen?(D(),ve(Wh,{key:3,text:"Advanced"},{default:ye(()=>[ae(hr,{name:"allowedUserNames",label:"Allowed users","model-value":ie.value,"input-props":{disabled:!0}},null,8,["model-value"]),ae(ar,{ref_key:"allowedUsers",ref:O,name:"allowedUserIds",label:"Allowed users",options:I.value.filter(({value:G})=>{var ce;return G!==((ce=k(r))==null?void 0:ce.uid)}),multiple:"","model-value":V.allowedUserIds.value,error:V.allowedUserIds.error,"onUpdate:error":te[28]||(te[28]=G=>V.allowedUserIds.error=G),"onUpdate:arrayValue":te[29]||(te[29]=G=>V.allowedUserIds.value=[...G.length?I.value.filter(({value:ce})=>{var be;return ce===((be=k(r))==null?void 0:be.uid)}).map(ce=>ce.value):[],...G])},null,8,["options","model-value","error"]),ae(Nc,{ref_key:"pinned",ref:$,name:"pinned",label:"Pinned",modelValue:V.pinned.value,"onUpdate:modelValue":te[30]||(te[30]=G=>V.pinned.value=G)},null,8,["modelValue"]),ae(Nc,{ref_key:"locked",ref:M,name:"locked",label:"Locked for commenting",modelValue:V.locked.value,"onUpdate:modelValue":te[31]||(te[31]=G=>V.locked.value=G)},null,8,["modelValue"]),ae(Nc,{ref_key:"archived",ref:X,name:"archived",label:"Archived",modelValue:V.archived.value,"onUpdate:modelValue":te[32]||(te[32]=G=>V.archived.value=G)},null,8,["modelValue"])]),_:1})):oe("",!0)],512)]),_:1},8,["isOpen","title","description","confirm-text","confirm-loading"]))}}),XY={key:0,class:"grid grid-cols-6 mb-5 gap-5"},JY={key:1,class:"grid grid-cols-6 lg:hidden mb-5"},ZY={class:"grid gap-4 md:gap-10 xl:gap-20"},eG={key:2,class:"flex justify-center mt-5"},tG=Ie({__name:"BlogPosts",setup(t){const e=Gn(),{deleteBlogPost:n,fetchBlogPosts:r}=e,{blogPosts:i,visibleBlogPosts:s}=Qt(e),{isOwner:o,firebaseUser:a}=Qt(Wn()),l=ue(),u=ue(),c=ue(!1),d=ue(!1),h=ue(null),f=()=>{h.value=null,c.value=!0},p=g=>{h.value=g,c.value=!0},m=g=>{h.value=g,d.value=!0},y=async g=>{await n(g)&&(d.value=!1,h.value=null)},_=()=>{c.value=!1,h.value=null},v=async g=>{var w;i.value.visibility!==g&&(i.value.visibility=g,s.value.length||await r((w=a.value)==null?void 0:w.uid),By(l.value))},b=async()=>{var w;const g=s.value.length;await r((w=a.value)==null?void 0:w.uid),s.value[g]&&By(u.value[g])};return(g,w)=>(D(),J(Ae,null,[ne("div",{ref_key:"container",ref:l},[k(a)?(D(),J("div",XY,[ae(vt,{class:"hidden lg:block col-span-2 xl:col-span-1",type:"orange",outlined:k(i).visibility!=="public",loading:k(i).fetchLoading,onClick:w[0]||(w[0]=T=>v("public"))},{default:ye(()=>[Qe(" Public Posts ")]),_:1},8,["outlined","loading"]),k(o)?(D(),ve(vt,{key:0,class:"col-span-full md:col-start-2 md:col-span-4 lg:col-start-3 lg:col-span-2",onClick:f},{default:ye(()=>[Qe(" New Post ")]),_:1})):oe("",!0),ae(vt,{type:"orange",class:"hidden lg:block col-start-5 col-span-2 xl:col-start-6 xl:col-span-1",outlined:k(i).visibility!=="private",loading:k(i).fetchLoading,onClick:w[1]||(w[1]=T=>v("private"))},{default:ye(()=>[Qe(" Private Posts ")]),_:1},8,["outlined","loading"])])):oe("",!0),k(a)?(D(),J("div",JY,[ae(vt,{class:"col-span-3 md:col-start-2 md:col-span-2 rounded-r-none",type:"orange",outlined:k(i).visibility!=="public",loading:k(i).fetchLoading,onClick:w[2]||(w[2]=T=>v("public"))},{default:ye(()=>[Qe(" Public Posts ")]),_:1},8,["outlined","loading"]),ae(vt,{type:"orange",class:"col-span-3 md:col-start-4 md:col-span-2 rounded-l-none",outlined:k(i).visibility!=="private",loading:k(i).fetchLoading,onClick:w[3]||(w[3]=T=>v("private"))},{default:ye(()=>[Qe(" Private Posts ")]),_:1},8,["outlined","loading"])])):oe("",!0),ne("div",ZY,[k(s).length?(D(!0),J(Ae,{key:0},ut(k(s),T=>(D(),J("div",{key:T.id,ref_for:!0,ref_key:"posts",ref:u},[ae(nO,{post:T,onEditClicked:M=>p(T),onDeleteClicked:M=>m(T)},null,8,["post","onEditClicked","onDeleteClicked"])]))),128)):k(i).fetchLoading?oe("",!0):(D(),ve(_r,{key:1,class:"!bg-red-900 !bg-opacity-40",title:"No posts"}))]),k(i).isLastPage?oe("",!0):(D(),J("div",eG,[ae(vt,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:k(i).fetchLoading,onClick:b},{default:ye(()=>[Qe(" Load more posts ")]),_:1},8,["loading"])]))],512),ae(QY,{isOpen:c.value,selected:h.value,onClose:_},null,8,["isOpen","selected"]),h.value?(D(),ve(Zb,{key:0,title:"Delete Post",isOpen:d.value,description:[` Are you sure you want to delete this post called ' ${h.value.title}'?`,"This cannot be undone."],"confirm-text":"Confirm","confirm-props":{type:"danger",outlined:!0},onConfirm:w[4]||(w[4]=T=>y(h.value.id)),onCancel:w[5]||(w[5]=T=>d.value=!1)},null,8,["isOpen","description"])):oe("",!0)],64))}}),nG={class:"bg-black text-white shadow-md py-4"},rG={class:"container mx-auto text-center"},iG=Ie({__name:"Footer",setup(t){const{content:e}=Qt(Gn());return(n,r)=>(D(),J("footer",nG,[ne("div",rG,[ne("p",null," "+Xe(new Date().getFullYear()+" "+k(e).footerCopyright),1)])]))}}),sG={class:"flex justify-between"},oG={class:"hidden sm:block w-full sm:min-w-fit"},aG=["src","alt"],lG={class:"w-fit sm:max-w-1/2"},uG={class:"title-primary"},cG={class:"title-secondary"},dG={class:"title-tertiary absolute sm:relative mt-1 sm:mt-0 flex flex-col xl:flex-row xl:flex-wrap"},hG={class:"mt-2 flex items-center whitespace-nowrap me-6"},fG={class:"mt-2 flex items-center whitespace-nowrap"},pG={class:"sm:hidden min-w-fit mt-3"},mG=["src","alt"],fS=Ie({__name:"HeaderTop",setup(t){const{profile:e,content:n}=Qt(Gn());return(r,i)=>{const s=Ls("RouterLink");return D(),J("div",sG,[ne("div",oG,[ae(s,{to:{name:"home"}},{default:ye(()=>[ne("img",{class:"h-32 w-32 md:h-48 md:w-48 rounded-full animation-scale mb-4 cursor-pointer",src:k(n).avatarUrl,alt:k(e).name},null,8,aG)]),_:1})]),ne("div",lG,[ne("h1",uG,Xe(k(e).name),1),ne("h2",cG,Xe(k(e).service),1),ne("div",dG,[ne("div",hG,[ae(k(mK),{class:"mr-1.5 h-5 w-5 text-gray-400"}),Qe(" "+Xe(k(e).role),1)]),ne("div",fG,[ae(k(vK),{class:"mr-1.5 h-5 w-5 text-gray-400"}),Qe(" "+Xe(k(e).location.city)+", "+Xe(k(e).location.country),1)])])]),ne("div",pG,[ae(s,{to:{name:"home"}},{default:ye(()=>[ne("img",{class:"h-32 w-32 md:h-48 md:w-48 rounded-full animation-scale mb-4 cursor-pointer",src:k(n).avatarUrl,alt:k(e).name},null,8,mG)]),_:1})])])}}}),gG=Ie({__name:"DropDown",props:{isOpen:{type:Boolean},toggle:{type:Function}},setup(t){const e=Wn(),{currentUser:n}=Qt(e),{visibleMenuItems:r}=Qt(Gn());return(i,s)=>(D(),J(Ae,null,[Ji(ne("div",{class:"md:hidden w-screen h-screen z-10 bg-gray-900 opacity-25 fixed top-1/2 start-1/2 transform -translate-x-1/2 -translate-y-1/2 animation",onClick:s[0]||(s[0]=(...o)=>i.toggle&&i.toggle(...o))},null,512),[[Cs,i.isOpen]]),Ji(ne("div",{class:"md:hidden absolute z-20 w-3/4 start-1/2 transform -translate-x-1/2 mt-12 sm:mt-2 p-4 py-8 bg-gray-900 border border-indigo-600 rounded-xl",onClick:s[1]||(s[1]=(...o)=>i.toggle&&i.toggle(...o))},[(D(!0),J(Ae,null,ut(k(r),o=>(D(),ve(vt,{class:"w-full text-lg rounded-none first:rounded-t-xl",outlined:"",list:"",url:o.url,loading:o.loading},{default:ye(()=>[Qe(Xe(o.name),1)]),_:2},1032,["url","loading"]))),256)),k(n)?(D(),ve(vt,{key:0,class:"w-full text-lg rounded-none first:rounded-t-xl",outlined:"",list:"",url:"dashboard"},{default:ye(()=>[Qe(" Dashboard ")]),_:1})):oe("",!0),k(n)?(D(),ve(vt,{key:1,class:"w-full text-lg rounded-none rounded-b-xl first:rounded-b-xl",outlined:"",list:"",type:"danger",onClick:k(e).logout},{default:ye(()=>[Qe(" Logout ")]),_:1},8,["onClick"])):(D(),ve(vt,{key:2,class:"w-full text-lg rounded-none rounded-b-xl first:rounded-b-xl",outlined:"",list:"",type:"secondary",url:"login"},{default:ye(()=>[Qe(" Login ")]),_:1}))],512),[[Cs,i.isOpen]])],64))}}),vG={key:0,class:Le(["flex items-center justify-between flex-wrap gap-3","sm:flex-col","lg:flex-row"])},yG={class:"group fixed w-full px-10 sm:px-0 sm:relative md:hidden"},wG={class:"flex justify-between sm:justify-center"},bG=ne("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"},null,-1),_G=[bG],TG=Ie({__name:"Menu",setup(t){const e=Wn(),{currentUser:n,logoutLoading:r}=Qt(e),{visibleMenuItems:i}=Qt(Gn()),s=ue(),o=ue(!1),a=()=>{o.value=!o.value,o.value&&Rr(()=>{var l;(l=s.value)==null||l.scrollIntoView({behavior:"smooth",block:"center"})})};return(l,u)=>k(i).length?(D(),J("div",vG,[(D(!0),J(Ae,null,ut(k(i),c=>(D(),ve(vt,{class:"hidden sm:flex sm:w-full lg:w-auto grow justify-center","active-class":"button-primary",outlined:"",url:c.url,loading:c.loading},{default:ye(()=>[Qe(Xe(c.name),1)]),_:2},1032,["url","loading"]))),256)),k(n)?oe("",!0):(D(),ve(vt,{key:0,class:"hidden sm:flex sm:w-full lg:w-auto grow justify-center","active-class":"button-primary",type:"secondary",outlined:"",url:"login"},{default:ye(()=>[Qe(" Login ")]),_:1})),k(n)?(D(),ve(vt,{key:1,class:"hidden sm:flex sm:w-full lg:w-auto grow justify-center",type:"danger",outlined:"",loading:k(r),onClick:k(e).logout},{default:ye(()=>[Qe(" Logout ")]),_:1},8,["loading","onClick"])):oe("",!0),ne("div",{ref_key:"dropdown",ref:s,class:"dropdown absolute sm:hidden w-full left-0 top-5 flex justify-end"},[ne("div",yG,[ne("div",{class:Le(["flex animation",o.value?"justify-center":"justify-end"])},[ae(vt,{class:Le(["sm:w-full bg-black bg-opacity-50 sm:bg-transparent",o.value?"w-full":"w-fit hover:w-full"]),outlined:"",onClick:a},{default:ye(()=>[ne("div",wG,[ae(rO,{rotate:o.value,class:Le(["group-hover:block",o.value?"block":"hidden"])},null,8,["rotate","class"]),ne("p",{class:Le(["sm:block group-hover:block",o.value?"block":"hidden"])},"Menu",2),(D(),J("svg",{class:Le(["h-6 sm:hidden group-hover:hidden",o.value?"hidden":null]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_G,2))])]),_:1},8,["class"])],2)]),ae(gG,{"is-open":o.value,toggle:()=>o.value=!o.value},null,8,["is-open","toggle"])],512)])):oe("",!0)}}),EG={class:Le(["w-fit md:w-1/3","mb-8 py-8 bg-transparent text-indigo-300","sm:mt-8 sm:mb-0 sm:p-4 sm:bg-black sm:bg-opacity-50 sm:rounded-3xl sm:rounded-e-none","lg:px-8 lg:mt-0 lg:rounded-br-3xl lg:rounded-t-none"])},SG={key:0,class:"hidden sm:flex justify-center mb-4"},CG={class:"hidden md:block w-4/5 space-y-2"},IG={class:"hidden font-semibold text-base md:first:block lg:block first:font-bold first:text-lg"},AG={class:"flex items-center justify-center w-full md:w-3/5 lg:w-1/5"},kG={key:1},xG={class:"hidden lg:grid col-span-5 space-y-2 mb-5"},PG={class:"font-semibold text-base first:font-bold first:text-lg"},DG=Ie({__name:"PersonCard",setup(t){const{currentUser:e}=Qt(Wn()),{content:n}=Qt(Gn());return(r,i)=>{const s=Ls("RouterLink");return D(),J("div",EG,[k(e)?(D(),J("div",SG,[ne("div",CG,[(D(!0),J(Ae,null,ut(k(n).headerDescriptionUser,o=>(D(),J("p",IG,Xe(o.replace("%USER%",k(e).firstName+(k(e).lastName?" "+k(e).lastName:""))),1))),256))]),ne("div",AG,[ae(s,{to:{name:"dashboard"}},{default:ye(()=>[ae(k(yK),{class:"w-16 h-16 rounded-full border-2 text-indigo-600 border-indigo-600 animation-scale"})]),_:1})])])):(D(),J("div",kG,[ne("div",xG,[(D(!0),J(Ae,null,ut(k(n).headerDescriptionGuest,o=>(D(),J("p",PG,Xe(o),1))),256))])])),ae(TG)])}}}),RG={class:"sm:flex sm:items-start sm:justify-between mb-20"},OG={class:"w-full sm:w-1/3 lg:flex lg:justify-end"},NG=Ie({__name:"Header",setup(t){return(e,n)=>(D(),J("div",RG,[ae(fS,{class:"hidden sm:block"}),ne("div",OG,[ae(DG,{class:Le(["sm:fixed sm:right-0 sm:mt-0 sm:top-5","md:absolute","lg:top-0 lg:right-auto"])})]),ae(fS,{class:"sm:hidden"})]))}}),MG={class:"min-h-screen bg-gradient-to-t from-black to-blue-900 via-gray-800"},LG={class:"mx-0 sm:mx-16 px-5 pb-5 sm:p-14 rounded-b-3xl text-white bg-blue-gray-900 bg-opacity-50 bg-gradient-to-b from-transparent to-black via-purple-900 border-opacity-100"},Vo=Ie({__name:"Page",props:{scrollToContent:{type:Boolean,required:!1,default:!0}},setup(t){const e=t,n=ew(),r=ue(),i=()=>{e.scrollToContent&&By(r.value)};return pn(()=>n.fullPath,()=>{i()}),an(()=>{i()}),(s,o)=>(D(),J(Ae,null,[ne("div",MG,[ne("div",LG,[ne("header",null,[s.$slots.header?Pe(s.$slots,"header",{key:0}):(D(),ve(NG,{key:1}))]),ne("main",null,[ne("div",{ref_key:"content",ref:r},[Pe(s.$slots,"content")],512)])])]),ne("footer",null,[s.$slots.footer?Pe(s.$slots,"footer",{key:0}):(D(),ve(iG,{key:1}))])],64))}}),$G={class:"grid mt-10 md:mt-15"},UG={class:"grid justify-center"},FG={class:"text-lg md:text-xl text-white"},VG=["innerHTML"],BG={class:"grid my-5 xl:mx-20"},jG=Ie({__name:"Blog",setup(t){const{publicUser:e}=Qt(Wn()),{menuItems:n,content:r}=Qt(Gn()),i=re(()=>window.location.hash),s=ew();return(o,a)=>(D(),ve(Vo,{"scroll-to-content":!i.value},{content:ye(()=>{var l;return[ne("div",$G,[ne("div",UG,[(D(!0),J(Ae,null,ut(k(e)?[...k(r).blogDescriptionUser.map(u=>u.replace("%USER%",k(e).displayName||"Unknown user")),...((l=k(n).find(u=>u.id==="nfNQM4SMESU2VOkJtcgY"))==null?void 0:l.description)||[]]:k(r).blogDescriptionGuest,u=>(D(),J("h1",FG,[ne("span",{innerHTML:u},null,8,VG)]))),256))]),ne("div",BG,[k(s).params.postId?(D(),ve(pY,{key:0})):(D(),ve(tG,{key:1}))])])]}),_:1},8,["scroll-to-content"]))}}),HG=Ie({__name:"Blog",setup(t){return(e,n)=>(D(),ve(jG))}}),WG={class:"flex flex-col items-center content-center"},KG=Ie({__name:"CatCalc",setup(t){const e=Ln({calculator:{value:"average",error:""},catWeigth:{value:"",error:""},catAge:{value:"",error:""},catGender:{value:"male",error:""},catSize:{value:"",error:""},catFoodDry:{value:"",error:""},catFoodWet:{value:"",error:""},catFoodSnax:{value:"",error:""},catFoodSnaxPercentage:{value:"5",error:""}}),n=[{value:"average",label:"Average"},{value:"nvwa",label:"Nederlandse Voedsel- en Warenautoriteit"},{value:"royalcanin",label:"Royal Canin"},{value:"petsplace",label:"Pets Place"},{value:"rawz",label:"RAWZ"},{value:"petcube",label:"Petcube"}],r=[{value:"default",label:"Adult healthy",rerIndex:1.4},{value:"lazy",label:"Adult lazy",rerIndex:1},{value:"castrated",label:"Adult castrated",rerIndex:1.2},{value:"underweight",label:"Adult underfed",rerIndex:1.8},{value:"overweight",label:"Adult overfed",rerIndex:.8},{value:"kitten0.4",label:"Kitten 0-4 months",rerIndex:2.5},{value:"kitten1",label:"Kitten 4-12 months",rerIndex:2}],i=[{value:"male",label:"Male"},{value:"female",label:"Female"}],s=re(()=>[{value:"35",label:"Small (<25cm)",factor:e.catGender.value==="male"?.9:.75},{value:"40",label:"Average (25-30cm)",factor:e.catGender.value==="male"?1:.9},{value:"45",label:"Big (30-35cm)",factor:e.catGender.value==="male"?1.125:1},{value:"65",label:"Pretty damn big (35-40cm)",factor:e.catGender.value==="male"?1.6:1.4},{value:"90",label:"Massive (>40cm)",factor:e.catGender.value==="male"?2.25:2}]),o={nvwa:[{weight:0,calories:0},{weight:1,calories:200},{weight:2,calories:200},{weight:3,calories:240},{weight:4,calories:280},{weight:5,calories:320},{weight:6,calories:360},{weight:7,calories:400},{weight:8,calories:440},{weight:9,calories:480},{weight:10,calories:520}],royalcanin:[{weight:0,calories:0},{weight:1,calories:225},{weight:2,calories:225},{weight:3,calories:275},{weight:4,calories:325},{weight:5,calories:375},{weight:6,calories:425},{weight:7,calories:475},{weight:8,calories:525},{weight:9,calories:575},{weight:10,calories:625}],petsplace:[{weight:0,calories:0},{weight:.5,calories:39},{weight:.9,calories:65},{weight:1.4,calories:88},{weight:1.8,calories:110},{weight:2.3,calories:130},{weight:2.7,calories:149},{weight:3.2,calories:167},{weight:3.6,calories:184},{weight:4.1,calories:200},{weight:4.5,calories:218},{weight:5,calories:234},{weight:5.5,calories:250},{weight:5.9,calories:265},{weight:6.4,calories:280},{weight:6.8,calories:295},{weight:7.3,calories:310},{weight:7.7,calories:324},{weight:8.2,calories:339},{weight:8.6,calories:353},{weight:9.1,calories:366},{weight:11.4,calories:433}],rawz:[{weight:0,calories:0},{weight:1,calories:183},{weight:2.268,calories:183},{weight:3.402,calories:245},{weight:4.536,calories:303},{weight:5.67,calories:362},{weight:6.804,calories:413},{weight:7.938,calories:462},{weight:9.072,calories:513}],petcube:[{weight:.45,calories:40},{weight:.9,calories:65},{weight:2.3,calories:140},{weight:3.15,calories:166},{weight:4.5,calories:250},{weight:6.8,calories:325},{weight:9.1,calories:400},{weight:11.25,calories:450}],average:[]},a=(w,T)=>{const x=o[w].sort((C,H)=>C.weight-H.weight);let A=x[x.length-2].weight,S=x[x.length-2].calories,N=x[x.length-1].weight,U=x[x.length-1].calories;for(let C=0;C<x.length-1;C++)if(T>=x[C].weight&&T<=x[C+1].weight){A=x[C].weight,S=x[C].calories,N=x[C+1].weight,U=x[C+1].calories;break}return{x1:A,y1:S,x2:N,y2:U}},l=(w,T)=>{const{x1:M,y1:x,x2:A,y2:S}=a(w,T);return x+(T-M)*(S-x)/(A-M)},u=()=>{const w=new Map;for(const x of Object.values(o).filter(A=>A!==o.average))for(const{weight:A,calories:S}of x)w.has(A)||w.set(A,{sum:0,count:0}),w.get(A).sum+=S,w.get(A).count++;return[0,1,2,3,4,5,6,7,8,9,10].filter(x=>w.has(x)).map(x=>({weight:x,calories:w.get(x).sum/w.get(x).count}))};o.average=u();const c=[{value:"default",label:"Average (340kcal)",calories:340},{value:"yarrah",label:"Yarrah Chicken (362kcal)",calories:361.5}],d=[{value:"",label:"None",calories:0},{value:"default",label:"Average (85kcal)",calories:85}],h=[{value:"",label:"None",calories:0},{value:"default",label:"Average (2kcal)",calories:2},{value:"yarrah",label:"Yarrah Mini Snack (2kcal)",calories:2},{value:"catstick",label:"Vitakraft Cat Stick (12kcal)",calories:12},{value:"milk_average",label:"Milk Average (40kcal/50ml)",calories:40}],f=re(()=>l(e.calculator.value,Number(e.catWeigth.value))),p=re(()=>{var w;return f.value*(((w=r.find(T=>T.value===e.catAge.value))==null?void 0:w.rerIndex)??1)}),m=re(()=>{var w;return p.value*(((w=s.value.find(T=>T.value===e.catSize.value))==null?void 0:w.factor)??1)}),y=re(()=>{const w=h.find(T=>T.value===e.catFoodSnax.value);return w!=null&&w.calories?m.value*(Number(e.catFoodSnaxPercentage.value)/100)/w.calories:void 0}),_=re(()=>m.value*(1-Number(y.value?e.catFoodSnaxPercentage.value:0)/100)),v=re(()=>{const w=d.find(T=>T.value===e.catFoodWet.value);return w!=null&&w.calories?_.value/4/w.calories*100:void 0}),b=re(()=>_.value/4*(v.value?3:4)),g=re(()=>{var w;return b.value/(((w=c.find(T=>T.value===e.catFoodDry.value))==null?void 0:w.calories)??c[0].calories)*100});return(w,T)=>(D(),ve(Vo,null,{content:ye(()=>[ae(_r,{class:"!bg-cyan-800 !bg-opacity-50 my-5",title:"Cat Calculator",description:"Do a Cat Calculation!"},{default:ye(()=>{var M;return[ne("div",WG,[ae(ar,{class:"w-3/4 md:w-1/2",name:"calculator",label:"Calculation based on",modelValue:e.calculator.value,"onUpdate:modelValue":T[0]||(T[0]=x=>e.calculator.value=x),error:e.calculator.error,"onUpdate:error":T[1]||(T[1]=x=>e.calculator.error=x),options:n,rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),ae(hr,{class:"w-3/4 md:w-1/2",name:"catWeigth",label:"Cat Weight (kg)",modelValue:e.catWeigth.value,"onUpdate:modelValue":T[2]||(T[2]=x=>e.catWeigth.value=x),error:e.catWeigth.error,"onUpdate:error":T[3]||(T[3]=x=>e.catWeigth.error=x),rules:[k(Et).Required,k(Et).Numeric],"min-value":1,"max-value":10,"input-props":{type:"number"}},null,8,["modelValue","error","rules"]),ae(ar,{class:"w-3/4 md:w-1/2",name:"catAge",label:"Cat Age",modelValue:e.catAge.value,"onUpdate:modelValue":T[4]||(T[4]=x=>e.catAge.value=x),error:e.catAge.error,"onUpdate:error":T[5]||(T[5]=x=>e.catAge.error=x),options:r,rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),ae(ar,{class:"w-3/4 md:w-1/2",name:"catGender",label:"Cat Gender",modelValue:e.catGender.value,"onUpdate:modelValue":T[6]||(T[6]=x=>e.catGender.value=x),error:e.catGender.error,"onUpdate:error":T[7]||(T[7]=x=>e.catGender.error=x),options:i,rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),ae(ar,{class:"w-3/4 md:w-1/2",name:"catSize",label:"Cat Shoulder Height",modelValue:e.catSize.value,"onUpdate:modelValue":T[8]||(T[8]=x=>e.catSize.value=x),error:e.catSize.error,"onUpdate:error":T[9]||(T[9]=x=>e.catSize.error=x),options:s.value,rules:[k(Et).Required]},null,8,["modelValue","error","options","rules"]),ae(_r,{class:"w-full md:w-1/2 border border-gray-400",description:"Required energy per day: "+m.value.toFixed(1)+" kcal"},null,8,["description"]),ae(ar,{class:"w-3/4 md:w-1/2",name:"catFoodDry",label:"Dry Food",modelValue:e.catFoodDry.value,"onUpdate:modelValue":T[10]||(T[10]=x=>e.catFoodDry.value=x),error:e.catFoodDry.error,"onUpdate:error":T[11]||(T[11]=x=>e.catFoodDry.error=x),options:c,rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),ae(ar,{class:"w-3/4 md:w-1/2",name:"catFoodWet",label:"Wet Food (25%)",modelValue:e.catFoodWet.value,"onUpdate:modelValue":T[12]||(T[12]=x=>e.catFoodWet.value=x),error:e.catFoodWet.error,"onUpdate:error":T[13]||(T[13]=x=>e.catFoodWet.error=x),options:d,rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),ae(ar,{class:"w-3/4 md:w-1/2",name:"catFoodSnax",label:"Snacks",modelValue:e.catFoodSnax.value,"onUpdate:modelValue":T[14]||(T[14]=x=>e.catFoodSnax.value=x),error:e.catFoodSnax.error,"onUpdate:error":T[15]||(T[15]=x=>e.catFoodSnax.error=x),options:h,rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),e.catFoodSnax.value?(D(),ve(hr,{key:0,class:"w-3/4 md:w-1/2",name:"catFoodSnaxPercentage",label:"Snacks Percentage",modelValue:e.catFoodSnaxPercentage.value,"onUpdate:modelValue":T[16]||(T[16]=x=>e.catFoodSnaxPercentage.value=x),error:e.catFoodSnaxPercentage.error,"onUpdate:error":T[17]||(T[17]=x=>e.catFoodSnaxPercentage.error=x),rules:[k(Et).Required,k(Et).Numeric],"min-value":1,"max-value":10,"input-props":{type:"number"}},null,8,["modelValue","error","rules"])):oe("",!0),ae(_r,{class:"w-full md:w-1/2 border border-gray-400",title:"Result","sub-title":"Based on constants from "+((M=n.find(x=>x.value===e.calculator.value))==null?void 0:M.label),description:["Required dry food per day: "+g.value.toFixed(1)+" g","","","Required dry food per meal: "+(g.value/(v.value?2:3)).toFixed(1)+" g",...v.value?["Required wet food per day: "+v.value.toFixed(1)+" g"]:[],...y.value?["Allowed snacks per day: "+y.value.toFixed(y.value<1?1:0)+" snacks"]:[],"","","","^ Mogu approved!"]},null,8,["sub-title","description"])])]}),_:1})]),_:1}))}}),YG=Ie({__name:"CatCalc",setup(t){return(e,n)=>(D(),ve(KG))}}),GG={class:"min-w-0 flex-1"},zG=ne("img",{class:"w-48 h-48 rounded-full animation-scale mb-4 cursor-pointer",src:"https://www.spigotmc.org/data/resource_icons/28/28103.jpg?1472586104",alt:"customvoting"},null,-1),qG=Ie({__name:"CustomVoting",setup(t){return(e,n)=>{const r=Ls("RouterLink");return D(),ve(Vo,null,{header:ye(()=>[ne("div",GG,[ae(r,{to:{name:"home"}},{default:ye(()=>[zG]),_:1})])]),content:ye(()=>[ae(_r,{class:"!bg-yellow-700 !bg-opacity-50 my-5",title:"CustomVoting",description:"In Progress"})]),_:1})}}}),QG=Ie({__name:"CustomVoting",setup(t){return(e,n)=>(D(),ve(qG))}}),XG={class:"flex flex-col lg:justify-center lg:items-center py-10 text-md text-primary"},JG={class:"m-1 lg:w-4/5"},e_=Ie({__name:"Privacy",setup(t){const{content:e}=Qt(Gn());return(n,r)=>(D(),J("div",XG,[(D(!0),J(Ae,null,ut(k(e).privacyStatement,i=>(D(),J("p",JG,Xe(i),1))),256))]))}}),t_=Ie({__name:"EmailField",props:{id:{},name:{},label:{},rules:{},modelValue:{},error:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=ue(),s=re({get:()=>r.modelValue,set:l=>{a("update:modelValue",l)}}),o=re({get:()=>r.error,set:l=>{a("update:error",l??"")}}),a=n;return e({test:async()=>await i.value.test()}),(l,u)=>(D(),ve(hr,{ref_key:"email",ref:i,id:l.id,name:l.name,label:l.label,placeholder:"someone@example.com","input-props":{type:"email",autocomplete:"on"},modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=c=>s.value=c),error:o.value,"onUpdate:error":u[1]||(u[1]=c=>o.value=c),rules:[...l.rules,k(Et).Email]},null,8,["id","name","label","modelValue","error","rules"]))}}),Il=Ie({__name:"PasswordField",props:{id:{},name:{},label:{},placeholder:{},rules:{},modelValue:{},error:{},min:{},max:{},compare:{}},emits:["update:modelValue","update:error"],setup(t,{expose:e,emit:n}){const r=t,i=ue(),s=re({get:()=>r.modelValue,set:l=>{a("update:modelValue",l)}}),o=re({get:()=>r.error,set:l=>{a("update:error",l??"")}}),a=n;return e({test:async()=>i.value.test()}),(l,u)=>(D(),ve(hr,{ref_key:"password",ref:i,id:l.id,name:l.name,label:l.label,placeholder:"******","input-props":{type:"password",autocomplete:"on"},modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=c=>s.value=c),error:o.value,"onUpdate:error":u[1]||(u[1]=c=>o.value=c),rules:l.rules,"min-length":l.min,"max-length":l.max,compare:l.compare},null,8,["id","name","label","modelValue","error","rules","min-length","max-length","compare"]))}}),ZG={class:"flex flex-wrap pt-6 pb-8 mb-4"},ez={class:"basis-full lg:basis-1/2"},tz={class:"flex gap-3 mt-10 flex-wrap"},nz={class:"basis-full lg:basis-1/2"},rz={class:"flex flex-col items-center content-center"},iz=Ie({__name:"Dashboard",setup(t){const e=Wn(),{currentUser:n,firebaseUser:r,publicUser:i,isOwner:s,mutationLoading:o}=Qt(e),a=Gn(),{fetchAll:l}=a,{content:u,online:c,debug:d}=Qt(a),h=ue(!1),f=ue(),p=ue(),m=ue(),y=ue(),_=ue(),v=ue(),b=ue(),g=ue(),w=Ln({firstName:{value:"",error:""},lastName:{value:"",error:""},displayName:{value:"",error:""},email:{value:"",error:""},newPassword:{value:"",error:""},currentPassword:{value:"",error:""},repeatPassword:{value:"",error:""},avatar:{value:"",error:""}}),T=re(()=>({firstName:w.firstName.value,lastName:w.lastName.value})),M=re(()=>({displayName:w.displayName.value,avatar:w.avatar.value})),x=re(()=>!!i.value&&!Di(s0.convert(i.value),M.value)),A=re(()=>{var U;return w.email.value!==((U=r.value)==null?void 0:U.email)}),S=re(()=>{const U=[];return Di(n.value,T.value)||U.push("Details"),x.value&&U.push("Public Profile"),A.value&&U.push("E-mail"),w.newPassword.value&&U.push("Password"),U.length?"Save "+jy(U):void 0}),N=async()=>{var U;Object.keys(w).forEach(C=>w[C].error=""),w.newPassword.value&&(await Promise.all([_.value.test(),v.value.test(),b.value.test()]),!w.newPassword.error&&!w.currentPassword.error&&!w.repeatPassword.error&&(await e.updatePassword(w.newPassword.value,w.currentPassword.value),w.newPassword.value="",w.currentPassword.value="")),x.value&&(await m.value.test(),!w.displayName.error&&!w.avatar.error&&e.updatePublicUser({displayName:w.displayName.value,avatar:w.avatar.value})),A.value&&(await Promise.all([y.value.test(),v.value.test()]),!w.email.error&&!w.currentPassword.error&&(await e.updateMail(w.email.value,w.currentPassword.value),w.currentPassword.value="")),Di(n.value,T.value)||(await Promise.all([f.value.test(),p.value.test()]),!w.firstName.error&&!w.lastName.error&&e.updateUser({firstName:w.firstName.value,lastName:w.lastName.value})),await l((U=r.value)==null?void 0:U.uid,!0)};return RC(()=>{var U,C,H,O,R;w.firstName.value=((U=n.value)==null?void 0:U.firstName)||"",w.lastName.value=((C=n.value)==null?void 0:C.lastName)||"",w.displayName.value=((H=i.value)==null?void 0:H.displayName)||"",w.email.value=((O=r.value)==null?void 0:O.email)||"",w.avatar.value=((R=i.value)==null?void 0:R.avatar)||""}),(U,C)=>(D(),ve(Vo,null,{content:ye(()=>[k(n)&&k(r)?(D(),ve(_r,{key:0,class:"!bg-cyan-800 !bg-opacity-50 my-5",title:"Welcome "+k(n).firstName+(k(n).lastName?" "+k(n).lastName:""),description:k(u).dashboardDescription},{default:ye(()=>[ne("div",ZG,[ne("div",ez,[ne("form",{onSubmit:C[19]||(C[19]=Pt(H=>N(),["prevent"]))},[ae(hr,{name:"accountType",label:"Account Type","model-value":k(s)?"Owner":"Member","input-props":{disabled:!0}},null,8,["model-value"]),ae(hr,{ref_key:"firstName",ref:f,name:"firstName",label:"First Name",placeholder:"Someone",modelValue:w.firstName.value,"onUpdate:modelValue":C[0]||(C[0]=H=>w.firstName.value=H),error:w.firstName.error,"onUpdate:error":C[1]||(C[1]=H=>w.firstName.error=H),rules:[k(Et).Required],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),ae(hr,{ref_key:"lastName",ref:p,name:"lastName",label:"Last Name",modelValue:w.lastName.value,"onUpdate:modelValue":C[2]||(C[2]=H=>w.lastName.value=H),error:w.lastName.error,"onUpdate:error":C[3]||(C[3]=H=>w.lastName.error=H),"min-length":3,"max-length":50},null,8,["modelValue","error"]),ae(hr,{ref_key:"displayName",ref:m,name:"displayName",label:"Public Username",modelValue:w.displayName.value,"onUpdate:modelValue":C[4]||(C[4]=H=>w.displayName.value=H),error:w.displayName.error,"onUpdate:error":C[5]||(C[5]=H=>w.displayName.error=H),rules:[k(Et).MinLength],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),ae(t_,{ref_key:"email",ref:y,name:"email",label:"E-mail",modelValue:w.email.value,"onUpdate:modelValue":C[6]||(C[6]=H=>w.email.value=H),error:w.email.error,"onUpdate:error":C[7]||(C[7]=H=>w.email.error=H),rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),A.value?(D(),ve(Il,{key:0,ref_key:"currentPassword",ref:v,name:"currentPassword",label:"Current Password",modelValue:w.currentPassword.value,"onUpdate:modelValue":C[8]||(C[8]=H=>w.currentPassword.value=H),error:w.currentPassword.error,"onUpdate:error":C[9]||(C[9]=H=>w.currentPassword.error=H),rules:[k(Et).Required]},null,8,["modelValue","error","rules"])):oe("",!0),ae(Il,{ref_key:"newPassword",ref:_,name:"newPassword",label:"New Password",modelValue:w.newPassword.value,"onUpdate:modelValue":C[10]||(C[10]=H=>w.newPassword.value=H),error:w.newPassword.error,"onUpdate:error":C[11]||(C[11]=H=>w.newPassword.error=H),min:6,max:50},null,8,["modelValue","error"]),w.newPassword.value?(D(),ve(Il,{key:1,ref_key:"repeatPassword",ref:b,name:"repeatPassword",label:"Repeat New Password",modelValue:w.repeatPassword.value,"onUpdate:modelValue":C[12]||(C[12]=H=>w.repeatPassword.value=H),error:w.repeatPassword.error,"onUpdate:error":C[13]||(C[13]=H=>w.repeatPassword.error=H),rules:[k(Et).Required],compare:{value:w.newPassword.value,name:"New Password"}},null,8,["modelValue","error","rules","compare"])):oe("",!0),w.newPassword.value&&!A.value?(D(),ve(Il,{key:2,ref_key:"currentPassword",ref:v,name:"currentPassword",label:"Current Password",modelValue:w.currentPassword.value,"onUpdate:modelValue":C[14]||(C[14]=H=>w.currentPassword.value=H),error:w.currentPassword.error,"onUpdate:error":C[15]||(C[15]=H=>w.currentPassword.error=H),rules:[k(Et).Required]},null,8,["modelValue","error","rules"])):oe("",!0),ne("div",tz,[S.value?(D(),ve(vt,{key:0,class:"w-full",action:"submit",loading:k(o)},{default:ye(()=>[Qe(Xe(S.value),1)]),_:1},8,["loading"])):oe("",!0),k(s)?oe("",!0):(D(),ve(vt,{key:1,class:"w-full",type:"danger",outlined:"",onClick:C[16]||(C[16]=H=>h.value=!0)},{default:ye(()=>[Qe(" Delete account ")]),_:1}))]),k(s)?(D(),ve(Nc,{key:3,name:"online",label:"Online",modelValue:k(c),"onUpdate:modelValue":C[17]||(C[17]=H=>zt(c)?c.value=H:null)},null,8,["modelValue"])):oe("",!0),k(s)?(D(),ve(Nc,{key:4,name:"debug",label:"Debug",modelValue:k(d),"onUpdate:modelValue":C[18]||(C[18]=H=>zt(d)?d.value=H:null)},null,8,["modelValue"])):oe("",!0)],32)]),ne("div",nz,[ae(o0,{ref_key:"avatar",ref:g,id:"avatar",name:"avatar",label:"Public Avatar",modelValue:w.avatar.value,"onUpdate:modelValue":C[20]||(C[20]=H=>w.avatar.value=H),error:w.avatar.error,"onUpdate:error":C[21]||(C[21]=H=>w.avatar.error=H),"is-public":"","image-props":{class:"rounded-full"},"image-container-props":{class:"!h-64 !w-64"}},null,8,["modelValue","error"])])]),ne("div",rz,[ae(e_)])]),_:1},8,["title","description"])):oe("",!0),ae(Zb,{title:"Delete Account",isOpen:h.value,description:["Are you sure you want to delete your account?","This cannot be undone."],"confirm-text":"Confirm","confirm-props":{type:"danger",outlined:!0},onConfirm:C[22]||(C[22]=H=>k(e).deleteAccount()),onCancel:C[23]||(C[23]=H=>h.value=!1)},null,8,["isOpen","description"])]),_:1}))}}),sz=Ie({__name:"Dashboard",setup(t){return(e,n)=>(D(),ve(iz))}});var oz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function az(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sO(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var oO={exports:{}};const lz=sO(lL);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function pS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function as(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pS(Object(n),!0).forEach(function(r){uz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mf(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mf=function(e){return typeof e}:mf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function uz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yi(){return yi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yi.apply(this,arguments)}function cz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function dz(t,e){if(t==null)return{};var n=cz(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hz(t){return fz(t)||pz(t)||mz(t)||gz()}function fz(t){if(Array.isArray(t))return a0(t)}function pz(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mz(t,e){if(t){if(typeof t=="string")return a0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a0(t,e)}}function a0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var vz="1.14.0";function xs(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Bs=xs(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),sh=xs(/Edge/i),mS=xs(/firefox/i),Mc=xs(/safari/i)&&!xs(/chrome/i)&&!xs(/android/i),aO=xs(/iP(ad|od|hone)/i),yz=xs(/chrome/i)&&xs(/android/i),lO={capture:!1,passive:!1};function mt(t,e,n){t.addEventListener(e,n,!Bs&&lO)}function dt(t,e,n){t.removeEventListener(e,n,!Bs&&lO)}function wp(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function wz(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Si(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&wp(t,e):wp(t,e))||r&&t===n)return t;if(t===n)break}while(t=wz(t))}return null}var gS=/\s+/g;function hn(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(gS," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(gS," ")}}function We(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function va(t,e){var n="";if(typeof t=="string")n=t;else do{var r=We(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function uO(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function ns(){var t=document.scrollingElement;return t||document.documentElement}function un(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,u,c,d;if(t!==window&&t.parentNode&&t!==ns()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,c=s.height,d=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Bs))do if(i&&i.getBoundingClientRect&&(We(i,"transform")!=="none"||n&&We(i,"position")!=="static")){var h=i.getBoundingClientRect();o-=h.top+parseInt(We(i,"border-top-width")),a-=h.left+parseInt(We(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var f=va(i||t),p=f&&f.a,m=f&&f.d;f&&(o/=m,a/=p,d/=p,c/=m,l=o+c,u=a+d)}return{top:o,left:a,bottom:l,right:u,width:d,height:c}}}function vS(t,e,n){for(var r=uo(t,!0),i=un(t)[e];r;){var s=un(r)[n],o=void 0;if(n==="top"||n==="left"?o=i>=s:o=i<=s,!o)return r;if(r===ns())break;r=uo(r,!1)}return!1}function du(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==tt.ghost&&(r||o[s]!==tt.dragged)&&Si(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function n_(t,e){for(var n=t.lastElementChild;n&&(n===tt.ghost||We(n,"display")==="none"||e&&!wp(n,e));)n=n.previousElementSibling;return n||null}function yn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==tt.clone&&(!e||wp(t,e))&&n++;return n}function yS(t){var e=0,n=0,r=ns();if(t)do{var i=va(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function bz(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function uo(t,e){if(!t||!t.getBoundingClientRect)return ns();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=We(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ns();if(r||e)return n;r=!0}}while(n=n.parentNode);return ns()}function _z(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Zg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Lc;function cO(t,e){return function(){if(!Lc){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Lc=setTimeout(function(){Lc=void 0},e)}}}function Tz(){clearTimeout(Lc),Lc=void 0}function dO(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function r_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function wS(t,e){We(t,"position","absolute"),We(t,"top",e.top),We(t,"left",e.left),We(t,"width",e.width),We(t,"height",e.height)}function ev(t){We(t,"position",""),We(t,"top",""),We(t,"left",""),We(t,"width",""),We(t,"height","")}var pr="Sortable"+new Date().getTime();function Ez(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(We(i,"display")==="none"||i===tt.ghost)){t.push({target:i,rect:un(i)});var s=as({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=va(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(bz(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,u=a.target,c=u.fromRect,d=un(u),h=u.prevFromRect,f=u.prevToRect,p=a.rect,m=va(u,!0);m&&(d.top-=m.f,d.left-=m.e),u.toRect=d,u.thisAnimationDuration&&Zg(h,d)&&!Zg(c,d)&&(p.top-d.top)/(p.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(l=Cz(p,h,f,i.options)),Zg(d,c)||(u.prevFromRect=c,u.prevToRect=d,l||(l=i.options.animation),i.animate(u,p,d,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){We(r,"transition",""),We(r,"transform","");var a=va(this.el),l=a&&a.a,u=a&&a.d,c=(i.left-s.left)/(l||1),d=(i.top-s.top)/(u||1);r.animatingX=!!c,r.animatingY=!!d,We(r,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=Sz(r),We(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),We(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){We(r,"transition",""),We(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Sz(t){return t.offsetWidth}function Cz(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var al=[],tv={initializeByDefault:!0},oh={mount:function(e){for(var n in tv)tv.hasOwnProperty(n)&&!(n in e)&&(e[n]=tv[n]);al.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),al.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";al.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](as({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](as({sortable:n},r)))})},initializePlugins:function(e,n,r,i){al.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,yi(r,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return al.forEach(function(i){typeof i.eventProperties=="function"&&yi(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return al.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function dc(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[pr],!!e){var m,y=e.options,_="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Bs&&!sh?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||n,m.from=a||n,m.item=i||n,m.clone=s,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=d,m.originalEvent=h,m.pullMode=f?f.lastPutMode:void 0;var v=as(as({},p),oh.getEventProperties(r,e));for(var b in v)m[b]=v[b];n&&n.dispatchEvent(m),y[_]&&y[_].call(e,m)}}var Iz=["evt"],Mr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=dz(r,Iz);oh.pluginEvent.bind(tt)(e,n,as({dragEl:Ee,parentEl:gn,ghostEl:lt,rootEl:ln,nextEl:Qo,lastDownEl:gf,cloneEl:vn,cloneHidden:lo,dragStarted:hc,putSortable:Qn,activeSortable:tt.active,originalEvent:i,oldIndex:Al,oldDraggableIndex:$c,newIndex:Qr,newDraggableIndex:no,hideGhostForTarget:mO,unhideGhostForTarget:gO,cloneNowHidden:function(){lo=!0},cloneNowShown:function(){lo=!1},dispatchSortableEvent:function(a){Ir({sortable:n,name:a,originalEvent:i})}},s))};function Ir(t){dc(as({putSortable:Qn,cloneEl:vn,targetEl:Ee,rootEl:ln,oldIndex:Al,oldDraggableIndex:$c,newIndex:Qr,newDraggableIndex:no},t))}var Ee,gn,lt,ln,Qo,gf,vn,lo,Al,Qr,$c,no,Gh,Qn,wl=!1,bp=!1,_p=[],Yo,bi,nv,rv,bS,_S,hc,ll,Uc,Fc=!1,zh=!1,vf,or,iv=[],l0=!1,Tp=[],Ym=typeof document<"u",qh=aO,TS=sh||Bs?"cssFloat":"float",Az=Ym&&!yz&&!aO&&"draggable"in document.createElement("div"),hO=function(){if(Ym){if(Bs)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),fO=function(e,n){var r=We(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=du(e,0,n),o=du(e,1,n),a=s&&We(s),l=o&&We(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+un(s).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+un(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[TS]==="none"||o&&r[TS]==="none"&&u+c>i)?"vertical":"horizontal"},kz=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return i===a||s===l||i+o/2===a+u/2},xz=function(e,n){var r;return _p.some(function(i){var s=i[pr].options.emptyInsertThreshold;if(!(!s||n_(i))){var o=un(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},pO=function(e){function n(s,o){return function(a,l,u,c){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||d))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,u,c),o)(a,l,u,c);var h=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===h||s.join&&s.indexOf(h)>-1}}var r={},i=e.group;(!i||mf(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},mO=function(){!hO&&lt&&We(lt,"display","none")},gO=function(){!hO&&lt&&We(lt,"display","")};Ym&&document.addEventListener("click",function(t){if(bp)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),bp=!1,!1},!0);var Go=function(e){if(Ee){e=e.touches?e.touches[0]:e;var n=xz(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[pr]._onDragOver(r)}}},Pz=function(e){Ee&&Ee.parentNode[pr]._isOutsideThisEl(e.target)};function tt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=yi({},e),t[pr]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fO(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:tt.supportPointer!==!1&&"PointerEvent"in window&&!Mc,emptyInsertThreshold:5};oh.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);pO(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Az,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?mt(t,"pointerdown",this._onTapStart):(mt(t,"mousedown",this._onTapStart),mt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(mt(t,"dragover",this),mt(t,"dragenter",this)),_p.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),yi(this,Ez())}tt.prototype={constructor:tt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ll=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Ee):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(Uz(r),!Ee&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Mc&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Si(l,i.draggable,r,!1),!(l&&l.animated)&&gf!==l)){if(Al=yn(l),$c=yn(l,i.draggable),typeof c=="function"){if(c.call(this,e,l,this)){Ir({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),Mr("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=Si(u,d.trim(),r,!1),d)return Ir({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),Mr("filter",n,{evt:e}),!0}),c)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Si(u,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Ee&&r.parentNode===s){var u=un(r);if(ln=s,Ee=r,gn=Ee.parentNode,Qo=Ee.nextSibling,gf=r,Gh=o.group,tt.dragged=Ee,Yo={target:Ee,clientX:(n||e).clientX,clientY:(n||e).clientY},bS=Yo.clientX-u.left,_S=Yo.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Ee.style["will-change"]="all",l=function(){if(Mr("delayEnded",i,{evt:e}),tt.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!mS&&i.nativeDraggable&&(Ee.draggable=!0),i._triggerDragStart(e,n),Ir({sortable:i,name:"choose",originalEvent:e}),hn(Ee,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){uO(Ee,c.trim(),sv)}),mt(a,"dragover",Go),mt(a,"mousemove",Go),mt(a,"touchmove",Go),mt(a,"mouseup",i._onDrop),mt(a,"touchend",i._onDrop),mt(a,"touchcancel",i._onDrop),mS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ee.draggable=!0),Mr("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(sh||Bs))){if(tt.eventCanceled){this._onDrop();return}mt(a,"mouseup",i._disableDelayedDrag),mt(a,"touchend",i._disableDelayedDrag),mt(a,"touchcancel",i._disableDelayedDrag),mt(a,"mousemove",i._delayedDragTouchMoveHandler),mt(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&mt(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ee&&sv(Ee),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;dt(e,"mouseup",this._disableDelayedDrag),dt(e,"touchend",this._disableDelayedDrag),dt(e,"touchcancel",this._disableDelayedDrag),dt(e,"mousemove",this._delayedDragTouchMoveHandler),dt(e,"touchmove",this._delayedDragTouchMoveHandler),dt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?mt(document,"pointermove",this._onTouchMove):n?mt(document,"touchmove",this._onTouchMove):mt(document,"mousemove",this._onTouchMove):(mt(Ee,"dragend",this),mt(ln,"dragstart",this._onDragStart));try{document.selection?yf(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(wl=!1,ln&&Ee){Mr("dragStarted",this,{evt:n}),this.nativeDraggable&&mt(document,"dragover",Pz);var r=this.options;!e&&hn(Ee,r.dragClass,!1),hn(Ee,r.ghostClass,!0),tt.active=this,e&&this._appendGhost(),Ir({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(bi){this._lastX=bi.clientX,this._lastY=bi.clientY,mO();for(var e=document.elementFromPoint(bi.clientX,bi.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(bi.clientX,bi.clientY),e!==n);)n=e;if(Ee.parentNode[pr]._isOutsideThisEl(e),n)do{if(n[pr]){var r=void 0;if(r=n[pr]._onDragOver({clientX:bi.clientX,clientY:bi.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);gO()}},_onTouchMove:function(e){if(Yo){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=lt&&va(lt,!0),a=lt&&o&&o.a,l=lt&&o&&o.d,u=qh&&or&&yS(or),c=(s.clientX-Yo.clientX+i.x)/(a||1)+(u?u[0]-iv[0]:0)/(a||1),d=(s.clientY-Yo.clientY+i.y)/(l||1)+(u?u[1]-iv[1]:0)/(l||1);if(!tt.active&&!wl){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(lt){o?(o.e+=c-(nv||0),o.f+=d-(rv||0)):o={a:1,b:0,c:0,d:1,e:c,f:d};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");We(lt,"webkitTransform",h),We(lt,"mozTransform",h),We(lt,"msTransform",h),We(lt,"transform",h),nv=c,rv=d,bi=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!lt){var e=this.options.fallbackOnBody?document.body:ln,n=un(Ee,!0,qh,!0,e),r=this.options;if(qh){for(or=e;We(or,"position")==="static"&&We(or,"transform")==="none"&&or!==document;)or=or.parentNode;or!==document.body&&or!==document.documentElement?(or===document&&(or=ns()),n.top+=or.scrollTop,n.left+=or.scrollLeft):or=ns(),iv=yS(or)}lt=Ee.cloneNode(!0),hn(lt,r.ghostClass,!1),hn(lt,r.fallbackClass,!0),hn(lt,r.dragClass,!0),We(lt,"transition",""),We(lt,"transform",""),We(lt,"box-sizing","border-box"),We(lt,"margin",0),We(lt,"top",n.top),We(lt,"left",n.left),We(lt,"width",n.width),We(lt,"height",n.height),We(lt,"opacity","0.8"),We(lt,"position",qh?"absolute":"fixed"),We(lt,"zIndex","100000"),We(lt,"pointerEvents","none"),tt.ghost=lt,e.appendChild(lt),We(lt,"transform-origin",bS/parseInt(lt.style.width)*100+"% "+_S/parseInt(lt.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Mr("dragStart",this,{evt:e}),tt.eventCanceled){this._onDrop();return}Mr("setupClone",this),tt.eventCanceled||(vn=r_(Ee),vn.draggable=!1,vn.style["will-change"]="",this._hideClone(),hn(vn,this.options.chosenClass,!1),tt.clone=vn),r.cloneId=yf(function(){Mr("clone",r),!tt.eventCanceled&&(r.options.removeCloneOnHide||ln.insertBefore(vn,Ee),r._hideClone(),Ir({sortable:r,name:"clone"}))}),!n&&hn(Ee,s.dragClass,!0),n?(bp=!0,r._loopId=setInterval(r._emulateDragOver,50)):(dt(document,"mouseup",r._onDrop),dt(document,"touchend",r._onDrop),dt(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Ee)),mt(document,"drop",r),We(Ee,"transform","translateZ(0)")),wl=!0,r._dragStartId=yf(r._dragStarted.bind(r,n,e)),mt(document,"selectstart",r),hc=!0,Mc&&We(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,u=tt.active,c=Gh===l,d=a.sort,h=Qn||u,f,p=this,m=!1;if(l0)return;function y(X,$){Mr(X,p,as({evt:e,isOwner:c,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:d,fromSortable:h,target:r,completed:v,onMove:function(Z,ie){return Qh(ln,n,Ee,i,Z,un(Z),e,ie)},changed:b},$))}function _(){y("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function v(X){return y("dragOverCompleted",{insertion:X}),X&&(c?u._hideClone():u._showClone(p),p!==h&&(hn(Ee,Qn?Qn.options.ghostClass:u.options.ghostClass,!1),hn(Ee,a.ghostClass,!0)),Qn!==p&&p!==tt.active?Qn=p:p===tt.active&&Qn&&(Qn=null),h===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){y("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===Ee&&!Ee.animated||r===n&&!r.animated)&&(ll=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Ee.parentNode[pr]._isOutsideThisEl(e.target),!X&&Go(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function b(){Qr=yn(Ee),no=yn(Ee,a.draggable),Ir({sortable:p,name:"change",toEl:n,newIndex:Qr,newDraggableIndex:no,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Si(r,a.draggable,n,!0),y("dragOver"),tt.eventCanceled)return m;if(Ee.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return v(!1);if(bp=!1,u&&!a.disabled&&(c?d||(o=gn!==ln):Qn===this||(this.lastPutMode=Gh.checkPull(this,u,Ee,e))&&l.checkPut(this,u,Ee,e))){if(f=this._getDirection(e,r)==="vertical",i=un(Ee),y("dragOverValid"),tt.eventCanceled)return m;if(o)return gn=ln,_(),this._hideClone(),y("revert"),tt.eventCanceled||(Qo?ln.insertBefore(Ee,Qo):ln.appendChild(Ee)),v(!0);var g=n_(n,a.draggable);if(!g||Nz(e,f,this)&&!g.animated){if(g===Ee)return v(!1);if(g&&n===e.target&&(r=g),r&&(s=un(r)),Qh(ln,n,Ee,i,r,s,e,!!r)!==!1)return _(),n.appendChild(Ee),gn=n,b(),v(!0)}else if(g&&Oz(e,f,this)){var w=du(n,0,a,!0);if(w===Ee)return v(!1);if(r=w,s=un(r),Qh(ln,n,Ee,i,r,s,e,!1)!==!1)return _(),n.insertBefore(Ee,w),gn=n,b(),v(!0)}else if(r.parentNode===n){s=un(r);var T=0,M,x=Ee.parentNode!==n,A=!kz(Ee.animated&&Ee.toRect||i,r.animated&&r.toRect||s,f),S=f?"top":"left",N=vS(r,"top","top")||vS(Ee,"top","top"),U=N?N.scrollTop:void 0;ll!==r&&(M=s[S],Fc=!1,zh=!A&&a.invertSwap||x),T=Mz(e,r,s,f,A?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,zh,ll===r);var C;if(T!==0){var H=yn(Ee);do H-=T,C=gn.children[H];while(C&&(We(C,"display")==="none"||C===lt))}if(T===0||C===r)return v(!1);ll=r,Uc=T;var O=r.nextElementSibling,R=!1;R=T===1;var W=Qh(ln,n,Ee,i,r,s,e,R);if(W!==!1)return(W===1||W===-1)&&(R=W===1),l0=!0,setTimeout(Rz,30),_(),R&&!O?n.appendChild(Ee):r.parentNode.insertBefore(Ee,R?O:r),N&&dO(N,0,U-N.scrollTop),gn=Ee.parentNode,M!==void 0&&!zh&&(vf=Math.abs(M-un(r)[S])),b(),v(!0)}if(n.contains(Ee))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){dt(document,"mousemove",this._onTouchMove),dt(document,"touchmove",this._onTouchMove),dt(document,"pointermove",this._onTouchMove),dt(document,"dragover",Go),dt(document,"mousemove",Go),dt(document,"touchmove",Go)},_offUpEvents:function(){var e=this.el.ownerDocument;dt(e,"mouseup",this._onDrop),dt(e,"touchend",this._onDrop),dt(e,"pointerup",this._onDrop),dt(e,"touchcancel",this._onDrop),dt(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(Qr=yn(Ee),no=yn(Ee,r.draggable),Mr("drop",this,{evt:e}),gn=Ee&&Ee.parentNode,Qr=yn(Ee),no=yn(Ee,r.draggable),tt.eventCanceled){this._nulling();return}wl=!1,zh=!1,Fc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),u0(this.cloneId),u0(this._dragStartId),this.nativeDraggable&&(dt(document,"drop",this),dt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Mc&&We(document.body,"user-select",""),We(Ee,"transform",""),e&&(hc&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),lt&&lt.parentNode&&lt.parentNode.removeChild(lt),(ln===gn||Qn&&Qn.lastPutMode!=="clone")&&vn&&vn.parentNode&&vn.parentNode.removeChild(vn),Ee&&(this.nativeDraggable&&dt(Ee,"dragend",this),sv(Ee),Ee.style["will-change"]="",hc&&!wl&&hn(Ee,Qn?Qn.options.ghostClass:this.options.ghostClass,!1),hn(Ee,this.options.chosenClass,!1),Ir({sortable:this,name:"unchoose",toEl:gn,newIndex:null,newDraggableIndex:null,originalEvent:e}),ln!==gn?(Qr>=0&&(Ir({rootEl:gn,name:"add",toEl:gn,fromEl:ln,originalEvent:e}),Ir({sortable:this,name:"remove",toEl:gn,originalEvent:e}),Ir({rootEl:gn,name:"sort",toEl:gn,fromEl:ln,originalEvent:e}),Ir({sortable:this,name:"sort",toEl:gn,originalEvent:e})),Qn&&Qn.save()):Qr!==Al&&Qr>=0&&(Ir({sortable:this,name:"update",toEl:gn,originalEvent:e}),Ir({sortable:this,name:"sort",toEl:gn,originalEvent:e})),tt.active&&((Qr==null||Qr===-1)&&(Qr=Al,no=$c),Ir({sortable:this,name:"end",toEl:gn,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Mr("nulling",this),ln=Ee=gn=lt=Qo=vn=gf=lo=Yo=bi=hc=Qr=no=Al=$c=ll=Uc=Qn=Gh=tt.dragged=tt.ghost=tt.clone=tt.active=null,Tp.forEach(function(e){e.checked=!0}),Tp.length=nv=rv=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Ee&&(this._onDragOver(e),Dz(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Si(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||$z(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Si(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Si(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=oh.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&pO(r)},destroy:function(){Mr("destroy",this);var e=this.el;e[pr]=null,dt(e,"mousedown",this._onTapStart),dt(e,"touchstart",this._onTapStart),dt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(dt(e,"dragover",this),dt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_p.splice(_p.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!lo){if(Mr("hideClone",this),tt.eventCanceled)return;We(vn,"display","none"),this.options.removeCloneOnHide&&vn.parentNode&&vn.parentNode.removeChild(vn),lo=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(lo){if(Mr("showClone",this),tt.eventCanceled)return;Ee.parentNode==ln&&!this.options.group.revertClone?ln.insertBefore(vn,Ee):Qo?ln.insertBefore(vn,Qo):ln.appendChild(vn),this.options.group.revertClone&&this.animate(Ee,vn),We(vn,"display",""),lo=!1}}};function Dz(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Qh(t,e,n,r,i,s,o,a){var l,u=t[pr],c=u.options.onMove,d;return window.CustomEvent&&!Bs&&!sh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||un(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),c&&(d=c.call(u,l,o)),d}function sv(t){t.draggable=!1}function Rz(){l0=!1}function Oz(t,e,n){var r=un(du(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function Nz(t,e,n){var r=un(n_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function Mz(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,u=r?n.height:n.width,c=r?n.top:n.left,d=r?n.bottom:n.right,h=!1;if(!o){if(a&&vf<u*i){if(!Fc&&(Uc===1?l>c+u*s/2:l<d-u*s/2)&&(Fc=!0),Fc)h=!0;else if(Uc===1?l<c+vf:l>d-vf)return-Uc}else if(l>c+u*(1-i)/2&&l<d-u*(1-i)/2)return Lz(e)}return h=h||o,h&&(l<c+u*s/2||l>d-u*s/2)?l>c+u/2?1:-1:0}function Lz(t){return yn(Ee)<yn(t)?1:-1}function $z(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function Uz(t){Tp.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Tp.push(r)}}function yf(t){return setTimeout(t,0)}function u0(t){return clearTimeout(t)}Ym&&mt(document,"touchmove",function(t){(tt.active||wl)&&t.cancelable&&t.preventDefault()});tt.utils={on:mt,off:dt,css:We,find:uO,is:function(e,n){return!!Si(e,n,e,!1)},extend:_z,throttle:cO,closest:Si,toggleClass:hn,clone:r_,index:yn,nextTick:yf,cancelNextTick:u0,detectDirection:fO,getChild:du};tt.get=function(t){return t[pr]};tt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(tt.utils=as(as({},tt.utils),r.utils)),oh.mount(r)})};tt.create=function(t,e){return new tt(t,e)};tt.version=vz;var An=[],fc,c0,d0=!1,ov,av,Ep,pc;function Fz(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?mt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?mt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?mt(document,"touchmove",this._handleFallbackAutoScroll):mt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?dt(document,"dragover",this._handleAutoScroll):(dt(document,"pointermove",this._handleFallbackAutoScroll),dt(document,"touchmove",this._handleFallbackAutoScroll),dt(document,"mousemove",this._handleFallbackAutoScroll)),ES(),wf(),Tz()},nulling:function(){Ep=c0=fc=d0=pc=ov=av=null,An.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(Ep=n,r||this.options.forceAutoScrollFallback||sh||Bs||Mc){lv(n,this.options,a,r);var l=uo(a,!0);d0&&(!pc||s!==ov||o!==av)&&(pc&&ES(),pc=setInterval(function(){var u=uo(document.elementFromPoint(s,o),!0);u!==l&&(l=u,wf()),lv(n,i.options,u,r)},10),ov=s,av=o)}else{if(!this.options.bubbleScroll||uo(a,!0)===ns()){wf();return}lv(n,this.options,uo(a,!1),!1)}}},yi(t,{pluginName:"scroll",initializeByDefault:!0})}function wf(){An.forEach(function(t){clearInterval(t.pid)}),An=[]}function ES(){clearInterval(pc)}var lv=cO(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=ns(),u=!1,c;c0!==n&&(c0=n,wf(),fc=e.scroll,c=e.scrollFn,fc===!0&&(fc=uo(n,!0)));var d=0,h=fc;do{var f=h,p=un(f),m=p.top,y=p.bottom,_=p.left,v=p.right,b=p.width,g=p.height,w=void 0,T=void 0,M=f.scrollWidth,x=f.scrollHeight,A=We(f),S=f.scrollLeft,N=f.scrollTop;f===l?(w=b<M&&(A.overflowX==="auto"||A.overflowX==="scroll"||A.overflowX==="visible"),T=g<x&&(A.overflowY==="auto"||A.overflowY==="scroll"||A.overflowY==="visible")):(w=b<M&&(A.overflowX==="auto"||A.overflowX==="scroll"),T=g<x&&(A.overflowY==="auto"||A.overflowY==="scroll"));var U=w&&(Math.abs(v-i)<=o&&S+b<M)-(Math.abs(_-i)<=o&&!!S),C=T&&(Math.abs(y-s)<=o&&N+g<x)-(Math.abs(m-s)<=o&&!!N);if(!An[d])for(var H=0;H<=d;H++)An[H]||(An[H]={});(An[d].vx!=U||An[d].vy!=C||An[d].el!==f)&&(An[d].el=f,An[d].vx=U,An[d].vy=C,clearInterval(An[d].pid),(U!=0||C!=0)&&(u=!0,An[d].pid=setInterval((function(){r&&this.layer===0&&tt.active._onTouchMove(Ep);var O=An[this.layer].vy?An[this.layer].vy*a:0,R=An[this.layer].vx?An[this.layer].vx*a:0;typeof c=="function"&&c.call(tt.dragged.parentNode[pr],R,O,t,Ep,An[this.layer].el)!=="continue"||dO(An[this.layer].el,R,O)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==l&&(h=uo(h,!1)));d0=u}},30),vO=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=r||s;a();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(d)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function i_(){}i_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=du(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:vO};yi(i_,{pluginName:"revertOnSpill"});function s_(){}s_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:vO};yi(s_,{pluginName:"removeOnSpill"});var ui;function Vz(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;ui=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var u=this.sortable.el,c=this.options;if(i&&i!==u){var d=ui;s(i)!==!1?(hn(i,c.swapClass,!0),ui=i):ui=null,d&&d!==ui&&hn(d,c.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;ui&&hn(ui,a.swapClass,!1),ui&&(a.swap||i&&i.options.swap)&&s!==ui&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),Bz(s,ui),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){ui=null}},yi(t,{pluginName:"swap",eventProperties:function(){return{swapItem:ui}}})}function Bz(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=yn(t),s=yn(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var st=[],qr=[],Yu,_i,Gu=!1,Lr=!1,ul=!1,Xt,zu,Xh;function jz(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?mt(document,"pointerup",this._deselectMultiDrag):(mt(document,"mouseup",this._deselectMultiDrag),mt(document,"touchend",this._deselectMultiDrag)),mt(document,"keydown",this._checkKeyDown),mt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";st.length&&_i===e?st.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Xt=r},delayEnded:function(){this.isMultiDrag=~st.indexOf(Xt)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<st.length;s++)qr.push(r_(st[s])),qr[s].sortableIndex=st[s].sortableIndex,qr[s].draggable=!1,qr[s].style["will-change"]="",hn(qr[s],this.options.selectedClass,!1),st[s]===Xt&&hn(qr[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||st.length&&_i===r&&(SS(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(SS(!1,i),qr.forEach(function(o){We(o,"display","")}),r(),Xh=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(qr.forEach(function(o){We(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),Xh=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&_i&&_i.multiDrag._deselectMultiDrag(),st.forEach(function(r){r.sortableIndex=yn(r)}),st=st.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),ul=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){st.forEach(function(o){o!==Xt&&We(o,"position","absolute")});var s=un(Xt,!1,!0,!0);st.forEach(function(o){o!==Xt&&wS(o,s)}),Lr=!0,Gu=!0}i.animateAll(function(){Lr=!1,Gu=!1,r.options.animation&&st.forEach(function(o){ev(o)}),r.options.sort&&Jh()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Lr&&~st.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;st.length>1&&(st.forEach(function(a){s.addAnimationState({target:a,rect:Lr?un(a):o}),ev(a),a.fromRect=o,r.removeAnimationState(a)}),Lr=!1,Hz(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,u=this.options;if(s){if(i&&o._hideClone(),Gu=!1,u.animation&&st.length>1&&(Lr||!i&&!o.options.sort&&!l)){var c=un(Xt,!1,!0,!0);st.forEach(function(h){h!==Xt&&(wS(h,c),a.appendChild(h))}),Lr=!0}if(!i)if(Lr||Jh(),st.length>1){var d=Xh;o._showClone(r),o.options.animation&&!Xh&&d&&qr.forEach(function(h){o.addAnimationState({target:h,rect:zu}),h.fromRect=zu,h.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(st.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){zu=yi({},r);var o=va(Xt,!0);zu.top-=o.f,zu.left-=o.e}},dragOverAnimationComplete:function(){Lr&&(Lr=!1,Jh())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,u=n.putSortable,c=u||this.sortable;if(r){var d=this.options,h=s.children;if(!ul)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),hn(Xt,d.selectedClass,!~st.indexOf(Xt)),~st.indexOf(Xt))st.splice(st.indexOf(Xt),1),Yu=null,dc({sortable:o,rootEl:i,name:"deselect",targetEl:Xt,originalEvt:r});else{if(st.push(Xt),dc({sortable:o,rootEl:i,name:"select",targetEl:Xt,originalEvt:r}),r.shiftKey&&Yu&&o.el.contains(Yu)){var f=yn(Yu),p=yn(Xt);if(~f&&~p&&f!==p){var m,y;for(p>f?(y=f,m=p):(y=p,m=f+1);y<m;y++)~st.indexOf(h[y])||(hn(h[y],d.selectedClass,!0),st.push(h[y]),dc({sortable:o,rootEl:i,name:"select",targetEl:h[y],originalEvt:r}))}}else Yu=Xt;_i=c}if(ul&&this.isMultiDrag){if(Lr=!1,(s[pr].options.sort||s!==i)&&st.length>1){var _=un(Xt),v=yn(Xt,":not(."+this.options.selectedClass+")");if(!Gu&&d.animation&&(Xt.thisAnimationDuration=null),c.captureAnimationState(),!Gu&&(d.animation&&(Xt.fromRect=_,st.forEach(function(g){if(g.thisAnimationDuration=null,g!==Xt){var w=Lr?un(g):_;g.fromRect=w,c.addAnimationState({target:g,rect:w})}})),Jh(),st.forEach(function(g){h[v]?s.insertBefore(g,h[v]):s.appendChild(g),v++}),l===yn(Xt))){var b=!1;st.forEach(function(g){if(g.sortableIndex!==yn(g)){b=!0;return}}),b&&a("update")}st.forEach(function(g){ev(g)}),c.animateAll()}_i=c}(i===s||u&&u.lastPutMode!=="clone")&&qr.forEach(function(g){g.parentNode&&g.parentNode.removeChild(g)})}},nullingGlobal:function(){this.isMultiDrag=ul=!1,qr.length=0},destroyGlobal:function(){this._deselectMultiDrag(),dt(document,"pointerup",this._deselectMultiDrag),dt(document,"mouseup",this._deselectMultiDrag),dt(document,"touchend",this._deselectMultiDrag),dt(document,"keydown",this._checkKeyDown),dt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof ul<"u"&&ul)&&_i===this.sortable&&!(n&&Si(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;st.length;){var r=st[0];hn(r,this.options.selectedClass,!1),st.shift(),dc({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvt:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},yi(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[pr];!r||!r.options.multiDrag||~st.indexOf(n)||(_i&&_i!==r&&(_i.multiDrag._deselectMultiDrag(),_i=r),hn(n,r.options.selectedClass,!0),st.push(n))},deselect:function(n){var r=n.parentNode[pr],i=st.indexOf(n);!r||!r.options.multiDrag||!~i||(hn(n,r.options.selectedClass,!1),st.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return st.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Lr&&s!==Xt?o=-1:Lr?o=yn(s,":not(."+n.options.selectedClass+")"):o=yn(s),i.push({multiDragElement:s,index:o})}),{items:hz(st),clones:[].concat(qr),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function Hz(t,e){st.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function SS(t,e){qr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function Jh(){st.forEach(function(t){t!==Xt&&t.parentNode&&t.parentNode.removeChild(t)})}tt.mount(new Fz);tt.mount(s_,i_);const Wz=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:jz,Sortable:tt,Swap:Vz,default:tt},Symbol.toStringTag,{value:"Module"})),Kz=sO(Wz);(function(t,e){(function(r,i){t.exports=i(lz,Kz)})(typeof self<"u"?self:oz,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,u){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:u})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var c in a)o.d(u,c,(function(d){return a[d]}).bind(null,c));return u},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),u={};u[l]="z",i.exports=String(u)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,u,c){if(a(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(d){return l.call(u,d)};case 2:return function(d,h){return l.call(u,d,h)};case 3:return function(d,h,f){return l.call(u,d,h,f)}}return function(){return l.apply(u,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(h){try{return l(h)}catch{return c.slice()}};i.exports.f=function(f){return c&&u.call(f)=="[object Window]"?d(f):l(a(f))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),u=o("5c6c"),c=o("fc6a"),d=o("c04e"),h=o("5135"),f=o("0cfb"),p=Object.getOwnPropertyDescriptor;s.f=a?p:function(y,_){if(y=c(y),_=d(_,!0),f)try{return p(y,_)}catch{}if(h(y,_))return u(!l.f.call(y,_),y[_])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,u=o("a640"),c=o("ae40"),d=u("reduce"),h=c("reduce",{1:0});a({target:"Array",proto:!0,forced:!d||!h},{reduce:function(p){return l(this,p,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(u,c){var d=u.exec;if(typeof d=="function"){var h=d.call(u,c);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("17c2"),c=o("9112");for(var d in l){var h=a[d],f=h&&h.prototype;if(f&&f.forEach!==u)try{c(f,"forEach",u)}catch{f.forEach=u}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),u=o("ae40"),c=l("forEach"),d=u("forEach");i.exports=!c||!d?function(f){return a(this,f,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),u=!1;try{var c=0,d={next:function(){return{done:!!c++}},return:function(){u=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}i.exports=function(h,f){if(!f&&!u)return!1;var p=!1;try{var m={};m[l]=function(){return{next:function(){return{done:p=!0}}}},h(m)}catch{}return p}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),u=o("2d00"),c=l("species");i.exports=function(d){return u>=51||!a(function(){var h=[],f=h.constructor={};return f[c]=function(){return{foo:1}},h[d](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,u=Math.min;i.exports=function(c,d){var h=a(c);return h<0?l(h+d,0):u(h,d)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,u=o("9112"),c=o("6eeb"),d=o("ce4e"),h=o("e893"),f=o("94ca");i.exports=function(p,m){var y=p.target,_=p.global,v=p.stat,b,g,w,T,M,x;if(_?g=a:v?g=a[y]||d(y,{}):g=(a[y]||{}).prototype,g)for(w in m){if(M=m[w],p.noTargetGet?(x=l(g,w),T=x&&x.value):T=g[w],b=f(_?w:y+(v?".":"#")+w,p.forced),!b&&T!==void 0){if(typeof M==typeof T)continue;h(M,T)}(p.sham||T&&T.sham)&&u(M,"sham",!0),c(g,w,M,p)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),u=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(d){return a(d,u)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),u=o("d039"),c=o("ad6d"),d="toString",h=RegExp.prototype,f=h[d],p=u(function(){return f.call({source:"a",flags:"b"})!="/a/b"}),m=f.name!=d;(p||m)&&a(RegExp.prototype,d,function(){var _=l(this),v=String(_.source),b=_.flags,g=String(b===void 0&&_ instanceof RegExp&&!("flags"in h)?c.call(_):b);return"/"+v+"/"+g},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,u=o("50c4"),c=o("5a34"),d=o("1d80"),h=o("ab13"),f=o("c430"),p="".startsWith,m=Math.min,y=h("startsWith"),_=!f&&!y&&!!function(){var v=l(String.prototype,"startsWith");return v&&!v.writable}();a({target:"String",proto:!0,forced:!_&&!y},{startsWith:function(b){var g=String(d(this));c(b);var w=u(m(arguments.length>1?arguments[1]:void 0,g.length)),T=String(b);return p?p.call(g,T,w):g.slice(w,w+T.length)===T}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),u=a.process,c=u&&u.versions,d=c&&c.v8,h,f;d?(h=d.split("."),f=h[0]+h[1]):l&&(h=l.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=l.match(/Chrome\/(\d+)/),h&&(f=h[1]))),i.exports=f&&+f},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),u=o("b622"),c=u("iterator");i.exports=function(d){if(d!=null)return d[c]||d["@@iterator"]||l[a(d)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("825a"),c=o("df75");i.exports=a?Object.defineProperties:function(h,f){u(h);for(var p=c(f),m=p.length,y=0,_;m>y;)l.f(h,_=p[y++],f[_]);return h}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),u=o("7dd0"),c="String Iterator",d=l.set,h=l.getterFor(c);u(String,"String",function(f){d(this,{type:c,string:String(f),index:0})},function(){var p=h(this),m=p.string,y=p.index,_;return y>=m.length?{value:void 0,done:!0}:(_=a(m,y),p.index+=_.length,{value:_,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),u=o("9bf2"),c=a("unscopables"),d=Array.prototype;d[c]==null&&u.f(d,c,{configurable:!0,value:l(null)}),i.exports=function(h){d[c][h]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),u=o("b622"),c=u("match");i.exports=function(d){var h;return a(d)&&((h=d[c])!==void 0?!!h:l(d)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),u=o("23cb"),c=function(d){return function(h,f,p){var m=a(h),y=l(m.length),_=u(p,y),v;if(d&&f!=f){for(;y>_;)if(v=m[_++],v!=v)return!0}else for(;y>_;_++)if((d||_ in m)&&m[_]===f)return d||_||0;return!d&&-1}};i.exports={includes:c(!0),indexOf:c(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,u=o("1dde"),c=o("ae40"),d=u("filter"),h=c("filter");a({target:"Array",proto:!0,forced:!d||!h},{filter:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),u=o("9bdd"),c=o("e95a"),d=o("50c4"),h=o("8418"),f=o("35a1");i.exports=function(m){var y=l(m),_=typeof this=="function"?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,g=b!==void 0,w=f(y),T=0,M,x,A,S,N,U;if(g&&(b=a(b,v>2?arguments[2]:void 0,2)),w!=null&&!(_==Array&&c(w)))for(S=w.call(y),N=S.next,x=new _;!(A=N.call(S)).done;T++)U=g?u(S,b,[A.value,T],!0):A.value,h(x,T,U);else for(M=d(y.length),x=new _(M);M>T;T++)U=g?b(y[T],T):y[T],h(x,T,U);return x.length=T,x}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(c){return l(c)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(u){return u>0?l(a(u),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),u=o("7b0b"),c=o("50c4"),d=o("a691"),h=o("1d80"),f=o("8aa5"),p=o("14c3"),m=Math.max,y=Math.min,_=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g,g=function(w){return w===void 0?w:String(w)};a("replace",2,function(w,T,M,x){var A=x.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,S=x.REPLACE_KEEPS_$0,N=A?"$":"$0";return[function(H,O){var R=h(this),W=H==null?void 0:H[w];return W!==void 0?W.call(H,R,O):T.call(String(R),H,O)},function(C,H){if(!A&&S||typeof H=="string"&&H.indexOf(N)===-1){var O=M(T,C,this,H);if(O.done)return O.value}var R=l(C),W=String(this),X=typeof H=="function";X||(H=String(H));var $=R.global;if($){var I=R.unicode;R.lastIndex=0}for(var Z=[];;){var ie=p(R,W);if(ie===null||(Z.push(ie),!$))break;var ee=String(ie[0]);ee===""&&(R.lastIndex=f(W,c(R.lastIndex),I))}for(var V="",we=0,B=0;B<Z.length;B++){ie=Z[B];for(var q=String(ie[0]),le=m(y(d(ie.index),W.length),0),Y=[],pe=1;pe<ie.length;pe++)Y.push(g(ie[pe]));var Se=ie.groups;if(X){var E=[q].concat(Y,le,W);Se!==void 0&&E.push(Se);var P=String(H.apply(void 0,E))}else P=U(q,W,le,Y,Se,H);le>=we&&(V+=W.slice(we,le)+P,we=le+q.length)}return V+W.slice(we)}];function U(C,H,O,R,W,X){var $=O+C.length,I=R.length,Z=b;return W!==void 0&&(W=u(W),Z=v),T.call(X,Z,function(ie,ee){var V;switch(ee.charAt(0)){case"$":return"$";case"&":return C;case"`":return H.slice(0,O);case"'":return H.slice($);case"<":V=W[ee.slice(1,-1)];break;default:var we=+ee;if(we===0)return ie;if(we>I){var B=_(we/10);return B===0?ie:B<=I?R[B-1]===void 0?ee.charAt(1):R[B-1]+ee.charAt(1):ie}V=R[we-1]}return V===void 0?"":V})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),u=o("7418"),c=o("825a");i.exports=a("Reflect","ownKeys")||function(h){var f=l.f(c(h)),p=u.f;return p?f.concat(p(h)):f}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),u=o("7b0b"),c=o("50c4"),d=o("1c0b"),h=o("65f0");a({target:"Array",proto:!0},{flatMap:function(p){var m=u(this),y=c(m.length),_;return d(p),_=h(m,0),_.length=l(_,m,m,y,0,1,p,arguments.length>1?arguments[1]:void 0),_}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),u=function(c){return function(d,h){var f=String(l(d)),p=a(h),m=f.length,y,_;return p<0||p>=m?c?"":void 0:(y=f.charCodeAt(p),y<55296||y>56319||p+1===m||(_=f.charCodeAt(p+1))<56320||_>57343?c?f.charAt(p):y:c?f.slice(p,p+2):(y-55296<<10)+(_-56320)+65536)}};i.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),u=o("b622"),c=u("species");i.exports=function(d,h){var f;return l(d)&&(f=d.constructor,typeof f=="function"&&(f===Array||l(f.prototype))?f=void 0:a(f)&&(f=f[c],f===null&&(f=void 0))),new(f===void 0?Array:f)(h===0?0:h)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),u=o("861d"),c=o("9112"),d=o("5135"),h=o("f772"),f=o("d012"),p=l.WeakMap,m,y,_,v=function(A){return _(A)?y(A):m(A,{})},b=function(A){return function(S){var N;if(!u(S)||(N=y(S)).type!==A)throw TypeError("Incompatible receiver, "+A+" required");return N}};if(a){var g=new p,w=g.get,T=g.has,M=g.set;m=function(A,S){return M.call(g,A,S),S},y=function(A){return w.call(g,A)||{}},_=function(A){return T.call(g,A)}}else{var x=h("state");f[x]=!0,m=function(A,S){return c(A,x,S),S},y=function(A){return d(A,x)?A[x]:{}},_=function(A){return d(A,x)}}i.exports={set:m,get:y,has:_,enforce:v,getterFor:b}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),u=o("5135"),c=o("ce4e"),d=o("8925"),h=o("69f3"),f=h.get,p=h.enforce,m=String(String).split("String");(i.exports=function(y,_,v,b){var g=b?!!b.unsafe:!1,w=b?!!b.enumerable:!1,T=b?!!b.noTargetGet:!1;if(typeof v=="function"&&(typeof _=="string"&&!u(v,"name")&&l(v,"name",_),p(v).source=m.join(typeof _=="string"?_:"")),y===a){w?y[_]=v:c(_,v);return}else g?!T&&y[_]&&(w=!0):delete y[_];w?y[_]=v:l(y,_,v)})(Function.prototype,"toString",function(){return typeof this=="function"&&f(this).source||d(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),u=o("fc6a"),c=o("d1e7").f,d=function(h){return function(f){for(var p=u(f),m=l(p),y=m.length,_=0,v=[],b;y>_;)b=m[_++],(!a||c.call(p,b))&&v.push(h?[b,p[b]]:p[b]);return v}};i.exports={entries:d(!0),values:d(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),u=o("e538"),c=o("9bf2").f;i.exports=function(d){var h=a.Symbol||(a.Symbol={});l(h,d)||c(h,d,{value:u.f(d)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),u=o("7839"),c=o("d012"),d=o("1be4"),h=o("cc12"),f=o("f772"),p=">",m="<",y="prototype",_="script",v=f("IE_PROTO"),b=function(){},g=function(A){return m+_+p+A+m+"/"+_+p},w=function(A){A.write(g("")),A.close();var S=A.parentWindow.Object;return A=null,S},T=function(){var A=h("iframe"),S="java"+_+":",N;return A.style.display="none",d.appendChild(A),A.src=String(S),N=A.contentWindow.document,N.open(),N.write(g("document.F=Object")),N.close(),N.F},M,x=function(){try{M=document.domain&&new ActiveXObject("htmlfile")}catch{}x=M?w(M):T();for(var A=u.length;A--;)delete x[y][u[A]];return x()};c[v]=!0,i.exports=Object.create||function(S,N){var U;return S!==null?(b[y]=a(S),U=new b,b[y]=null,U[v]=S):U=x(),N===void 0?U:l(U,N)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),u=o("e163"),c=o("d2bb"),d=o("d44e"),h=o("9112"),f=o("6eeb"),p=o("b622"),m=o("c430"),y=o("3f8c"),_=o("ae93"),v=_.IteratorPrototype,b=_.BUGGY_SAFARI_ITERATORS,g=p("iterator"),w="keys",T="values",M="entries",x=function(){return this};i.exports=function(A,S,N,U,C,H,O){l(N,S,U);var R=function(B){if(B===C&&Z)return Z;if(!b&&B in $)return $[B];switch(B){case w:return function(){return new N(this,B)};case T:return function(){return new N(this,B)};case M:return function(){return new N(this,B)}}return function(){return new N(this)}},W=S+" Iterator",X=!1,$=A.prototype,I=$[g]||$["@@iterator"]||C&&$[C],Z=!b&&I||R(C),ie=S=="Array"&&$.entries||I,ee,V,we;if(ie&&(ee=u(ie.call(new A)),v!==Object.prototype&&ee.next&&(!m&&u(ee)!==v&&(c?c(ee,v):typeof ee[g]!="function"&&h(ee,g,x)),d(ee,W,!0,!0),m&&(y[W]=x))),C==T&&I&&I.name!==T&&(X=!0,Z=function(){return I.call(this)}),(!m||O)&&$[g]!==Z&&h($,g,Z),y[S]=Z,C)if(V={values:R(T),keys:H?Z:R(w),entries:R(M)},O)for(we in V)(b||X||!(we in $))&&f($,we,V[we]);else a({target:S,proto:!0,forced:b||X},V);return V}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),u=a.WeakMap;i.exports=typeof u=="function"&&/native code/.test(l(u))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),u=o("5c6c");i.exports=function(c,d,h){var f=a(d);f in c?l.f(c,f,u(0,h)):c[f]=h}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,u;(function(c,d){l=[],a=d,u=typeof a=="function"?a.apply(s,l):a,u!==void 0&&(i.exports=u)})(typeof self<"u"?self:this,function(){function c(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(M){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,f=/@([^@]*):(\d+):(\d+)\s*$/ig,p=h.exec(M.stack)||f.exec(M.stack),m=p&&p[1]||!1,y=p&&p[2]||!1,_=document.location.href.replace(document.location.hash,""),v,b,g,w=document.getElementsByTagName("script");m===_&&(v=document.documentElement.outerHTML,b=new RegExp("(?:[^\\n]+?\\n){0,"+(y-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),g=v.replace(b,"$1").trim());for(var T=0;T<w.length;T++)if(w[T].readyState==="interactive"||w[T].src===m||m===_&&w[T].innerHTML&&w[T].innerHTML.trim()===g)return w[T];return null}}return c})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,u,c){return u+(c?a(l,u).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("5c6c");i.exports=a?function(c,d,h){return l.f(c,d,u(1,h))}:function(c,d,h){return c[d]=h,c}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),u=RegExp.prototype.exec,c=String.prototype.replace,d=u,h=function(){var y=/a/,_=/b*/g;return u.call(y,"a"),u.call(_,"a"),y.lastIndex!==0||_.lastIndex!==0}(),f=l.UNSUPPORTED_Y||l.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,m=h||p||f;m&&(d=function(_){var v=this,b,g,w,T,M=f&&v.sticky,x=a.call(v),A=v.source,S=0,N=_;return M&&(x=x.replace("y",""),x.indexOf("g")===-1&&(x+="g"),N=String(_).slice(v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&_[v.lastIndex-1]!==`
`)&&(A="(?: "+A+")",N=" "+N,S++),g=new RegExp("^(?:"+A+")",x)),p&&(g=new RegExp("^"+A+"$(?!\\s)",x)),h&&(b=v.lastIndex),w=u.call(M?g:v,N),M?w?(w.input=w.input.slice(S),w[0]=w[0].slice(S),w.index=v.lastIndex,v.lastIndex+=w[0].length):v.lastIndex=0:h&&w&&(v.lastIndex=v.global?w.index+w[0].length:b),p&&w&&w.length>1&&c.call(w[0],g,function(){for(T=1;T<arguments.length-2;T++)arguments[T]===void 0&&(w[T]=void 0)}),w}),i.exports=d},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,u=function(p,m){var y=d[c(p)];return y==f?!0:y==h?!1:typeof m=="function"?a(m):!!m},c=u.normalize=function(p){return String(p).replace(l,".").toLowerCase()},d=u.data={},h=u.NATIVE="N",f=u.POLYFILL="P";i.exports=u},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("e8b5"),c=o("861d"),d=o("7b0b"),h=o("50c4"),f=o("8418"),p=o("65f0"),m=o("1dde"),y=o("b622"),_=o("2d00"),v=y("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",w=_>=51||!l(function(){var A=[];return A[v]=!1,A.concat()[0]!==A}),T=m("concat"),M=function(A){if(!c(A))return!1;var S=A[v];return S!==void 0?!!S:u(A)},x=!w||!T;a({target:"Array",proto:!0,forced:x},{concat:function(S){var N=d(this),U=p(N,0),C=0,H,O,R,W,X;for(H=-1,R=arguments.length;H<R;H++)if(X=H===-1?N:arguments[H],M(X)){if(W=h(X.length),C+W>b)throw TypeError(g);for(O=0;O<W;O++,C++)O in X&&f(U,C,X[O])}else{if(C>=b)throw TypeError(g);f(U,C++,X)}return U.length=C,U}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,u,c,d){try{return d?u(a(c)[0],c[1]):u(c)}catch(f){var h=l.return;throw h!==void 0&&a(h.call(l)),f}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),u=o("825a"),c=o("c04e"),d=Object.defineProperty;s.f=a?d:function(f,p,m){if(u(f),p=c(p,!0),u(m),l)try{return d(f,p,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(f[p]=m.value),f}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),u=o("5c6c"),c=o("d44e"),d=o("3f8c"),h=function(){return this};i.exports=function(f,p,m){var y=p+" Iterator";return f.prototype=l(a,{next:u(1,m)}),c(f,y,!1,!0),d[y]=h,f}},"9f7f":function(i,s,o){var a=o("d039");function l(u,c){return RegExp(u,c)}s.UNSUPPORTED_Y=a(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),u=o("0366"),c=function(d,h,f,p,m,y,_,v){for(var b=m,g=0,w=_?u(_,v,3):!1,T;g<p;){if(g in f){if(T=w?w(f[g],g,h):f[g],y>0&&a(T))b=c(d,h,T,l(T.length),b,y-1)-1;else{if(b>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[b]=T}b++}g++}return b};i.exports=c},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),u=o("a691"),c=o("50c4"),d=o("7b0b"),h=o("65f0"),f=o("8418"),p=o("1dde"),m=o("ae40"),y=p("splice"),_=m("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,b=Math.min,g=9007199254740991,w="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!y||!_},{splice:function(M,x){var A=d(this),S=c(A.length),N=l(M,S),U=arguments.length,C,H,O,R,W,X;if(U===0?C=H=0:U===1?(C=0,H=S-N):(C=U-2,H=b(v(u(x),0),S-N)),S+C-H>g)throw TypeError(w);for(O=h(A,H),R=0;R<H;R++)W=N+R,W in A&&f(O,R,A[W]);if(O.length=H,C<H){for(R=N;R<S-H;R++)W=R+H,X=R+C,W in A?A[X]=A[W]:delete A[X];for(R=S;R>S-H+C;R--)delete A[R-1]}else if(C>H)for(R=S-H;R>N;R--)W=R+H-1,X=R+C-1,W in A?A[X]=A[W]:delete A[X];for(R=0;R<C;R++)A[R+N]=arguments[R+2];return A.length=S-H+C,O}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),u=o("d066"),c=o("c430"),d=o("83ab"),h=o("4930"),f=o("fdbf"),p=o("d039"),m=o("5135"),y=o("e8b5"),_=o("861d"),v=o("825a"),b=o("7b0b"),g=o("fc6a"),w=o("c04e"),T=o("5c6c"),M=o("7c73"),x=o("df75"),A=o("241c"),S=o("057f"),N=o("7418"),U=o("06cf"),C=o("9bf2"),H=o("d1e7"),O=o("9112"),R=o("6eeb"),W=o("5692"),X=o("f772"),$=o("d012"),I=o("90e3"),Z=o("b622"),ie=o("e538"),ee=o("746f"),V=o("d44e"),we=o("69f3"),B=o("b727").forEach,q=X("hidden"),le="Symbol",Y="prototype",pe=Z("toPrimitive"),Se=we.set,E=we.getterFor(le),P=Object[Y],F=l.Symbol,z=u("JSON","stringify"),he=U.f,fe=C.f,de=S.f,te=H.f,G=W("symbols"),ce=W("op-symbols"),be=W("string-to-symbol-registry"),Ce=W("symbol-to-string-registry"),Ne=W("wks"),Te=l.QObject,Me=!Te||!Te[Y]||!Te[Y].findChild,pt=d&&p(function(){return M(fe({},"a",{get:function(){return fe(this,"a",{value:7}).a}})).a!=7})?function(ze,Be,qe){var yt=he(P,Be);yt&&delete P[Be],fe(ze,Be,qe),yt&&ze!==P&&fe(P,Be,yt)}:fe,Q=function(ze,Be){var qe=G[ze]=M(F[Y]);return Se(qe,{type:le,tag:ze,description:Be}),d||(qe.description=Be),qe},L=f?function(ze){return typeof ze=="symbol"}:function(ze){return Object(ze)instanceof F},K=function(Be,qe,yt){Be===P&&K(ce,qe,yt),v(Be);var It=w(qe,!0);return v(yt),m(G,It)?(yt.enumerable?(m(Be,q)&&Be[q][It]&&(Be[q][It]=!1),yt=M(yt,{enumerable:T(0,!1)})):(m(Be,q)||fe(Be,q,T(1,{})),Be[q][It]=!0),pt(Be,It,yt)):fe(Be,It,yt)},j=function(Be,qe){v(Be);var yt=g(qe),It=x(yt).concat(et(yt));return B(It,function(Nr){(!d||me.call(yt,Nr))&&K(Be,Nr,yt[Nr])}),Be},se=function(Be,qe){return qe===void 0?M(Be):j(M(Be),qe)},me=function(Be){var qe=w(Be,!0),yt=te.call(this,qe);return this===P&&m(G,qe)&&!m(ce,qe)?!1:yt||!m(this,qe)||!m(G,qe)||m(this,q)&&this[q][qe]?yt:!0},je=function(Be,qe){var yt=g(Be),It=w(qe,!0);if(!(yt===P&&m(G,It)&&!m(ce,It))){var Nr=he(yt,It);return Nr&&m(G,It)&&!(m(yt,q)&&yt[q][It])&&(Nr.enumerable=!0),Nr}},$e=function(Be){var qe=de(g(Be)),yt=[];return B(qe,function(It){!m(G,It)&&!m($,It)&&yt.push(It)}),yt},et=function(Be){var qe=Be===P,yt=de(qe?ce:g(Be)),It=[];return B(yt,function(Nr){m(G,Nr)&&(!qe||m(P,Nr))&&It.push(G[Nr])}),It};if(h||(F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor");var Be=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),qe=I(Be),yt=function(It){this===P&&yt.call(ce,It),m(this,q)&&m(this[q],qe)&&(this[q][qe]=!1),pt(this,qe,T(1,It))};return d&&Me&&pt(P,qe,{configurable:!0,set:yt}),Q(qe,Be)},R(F[Y],"toString",function(){return E(this).tag}),R(F,"withoutSetter",function(ze){return Q(I(ze),ze)}),H.f=me,C.f=K,U.f=je,A.f=S.f=$e,N.f=et,ie.f=function(ze){return Q(Z(ze),ze)},d&&(fe(F[Y],"description",{configurable:!0,get:function(){return E(this).description}}),c||R(P,"propertyIsEnumerable",me,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:F}),B(x(Ne),function(ze){ee(ze)}),a({target:le,stat:!0,forced:!h},{for:function(ze){var Be=String(ze);if(m(be,Be))return be[Be];var qe=F(Be);return be[Be]=qe,Ce[qe]=Be,qe},keyFor:function(Be){if(!L(Be))throw TypeError(Be+" is not a symbol");if(m(Ce,Be))return Ce[Be]},useSetter:function(){Me=!0},useSimple:function(){Me=!1}}),a({target:"Object",stat:!0,forced:!h,sham:!d},{create:se,defineProperty:K,defineProperties:j,getOwnPropertyDescriptor:je}),a({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:$e,getOwnPropertySymbols:et}),a({target:"Object",stat:!0,forced:p(function(){N.f(1)})},{getOwnPropertySymbols:function(Be){return N.f(b(Be))}}),z){var Ut=!h||p(function(){var ze=F();return z([ze])!="[null]"||z({a:ze})!="{}"||z(Object(ze))!="{}"});a({target:"JSON",stat:!0,forced:Ut},{stringify:function(Be,qe,yt){for(var It=[Be],Nr=1,Zm;arguments.length>Nr;)It.push(arguments[Nr++]);if(Zm=qe,!(!_(qe)&&Be===void 0||L(Be)))return y(qe)||(qe=function(iN,dh){if(typeof Zm=="function"&&(dh=Zm.call(this,iN,dh)),!L(dh))return dh}),It[1]=qe,z.apply(null,It)}})}F[Y][pe]||O(F[Y],pe,F[Y].valueOf),V(F,le),$[q]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),u=o("1c7e"),c=!u(function(d){Array.from(d)});a({target:"Array",stat:!0,forced:c},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,u){var c=[][l];return!!c&&a(function(){c.call(null,u||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(u){var c=/./;try{"/./"[u](c)}catch{try{return c[l]=!1,"/./"[u](c)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("5135"),c=Object.defineProperty,d={},h=function(f){throw f};i.exports=function(f,p){if(u(d,f))return d[f];p||(p={});var m=[][f],y=u(p,"ACCESSORS")?p.ACCESSORS:!1,_=u(p,0)?p[0]:h,v=u(p,1)?p[1]:void 0;return d[f]=!!m&&!l(function(){if(y&&!a)return!0;var b={length:-1};y?c(b,1,{enumerable:!0,get:h}):b[1]=1,m.call(b,_,v)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),u=o("5135"),c=o("b622"),d=o("c430"),h=c("iterator"),f=!1,p=function(){return this},m,y,_;[].keys&&(_=[].keys(),"next"in _?(y=a(a(_)),y!==Object.prototype&&(m=y)):f=!0),m==null&&(m={}),!d&&!u(m,h)&&l(m,h,p),i.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:f}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,u=Function.prototype,c=u.toString,d=/^\s*function ([^ (]*)/,h="name";a&&!(h in u)&&l(u,h,{configurable:!0,get:function(){try{return c.call(this).match(d)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),u=o("5135"),c=o("90e3"),d=o("4930"),h=o("fdbf"),f=l("wks"),p=a.Symbol,m=h?p:p&&p.withoutSetter||c;i.exports=function(y){return u(f,y)||(d&&u(p,y)?f[y]=p[y]:f[y]=m("Symbol."+y)),f[y]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),u=o("df75"),c=o("d039"),d=c(function(){u(1)});a({target:"Object",stat:!0,forced:d},{keys:function(f){return u(l(f))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),u=o("7b0b"),c=o("50c4"),d=o("65f0"),h=[].push,f=function(p){var m=p==1,y=p==2,_=p==3,v=p==4,b=p==6,g=p==5||b;return function(w,T,M,x){for(var A=u(w),S=l(A),N=a(T,M,3),U=c(S.length),C=0,H=x||d,O=m?H(w,U):y?H(w,0):void 0,R,W;U>C;C++)if((g||C in S)&&(R=S[C],W=N(R,C,A),p)){if(m)O[C]=W;else if(W)switch(p){case 3:return!0;case 5:return R;case 6:return C;case 2:h.call(O,R)}else if(v)return!1}return b?-1:_||v?v:O}};i.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,u){if(!a(l))return l;var c,d;if(u&&typeof(c=l.toString)=="function"&&!a(d=c.call(l))||typeof(c=l.valueOf)=="function"&&!a(d=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!a(d=c.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),u="__core-js_shared__",c=a[u]||l(u,{});i.exports=c},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,u=o("44d2"),c=o("ae40"),d="findIndex",h=!0,f=c(d);d in[]&&Array(1)[d](function(){h=!1}),a({target:"Array",proto:!0,forced:h||!f},{findIndex:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),u(d)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,u=o("a640"),c=o("ae40"),d=[].indexOf,h=!!d&&1/[1].indexOf(1,-0)<0,f=u("indexOf"),p=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:h||!f||!p},{indexOf:function(y){return h?d.apply(this,arguments)||0:l(this,y,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),u=o("4d64").indexOf,c=o("d012");i.exports=function(d,h){var f=l(d),p=0,m=[],y;for(y in f)!a(c,y)&&a(f,y)&&m.push(y);for(;h.length>p;)a(f,y=h[p++])&&(~u(m,y)||m.push(y));return m}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,u=o("44d2"),c=o("ae40"),d=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!d},{includes:function(f){return l(this,f,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),u=a.document,c=l(u)&&l(u.createElement);i.exports=function(d){return c?u.createElement(d):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(u,c){try{l(a,u,c)}catch{a[u]=c}return c}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),u=function(c){return typeof c=="function"?c:void 0};i.exports=function(c,d){return arguments.length<2?u(a[c])||u(l[c]):a[c]&&a[c][d]||l[c]&&l[c][d]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);s.f=u?function(d){var h=l(this,d);return!!h&&h.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,c={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(c,[]),u=c instanceof Array}catch{}return function(f,p){return a(f),l(p),u?d.call(f,p):f.__proto__=p,f}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),u=o("b041");a||l(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),u=o("b622"),c=u("toStringTag");i.exports=function(d,h,f){d&&!l(d=f?d:d.prototype,c)&&a(d,c,{configurable:!0,value:h})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),u=o("44ad"),c=o("50c4"),d=function(h){return function(f,p,m,y){a(p);var _=l(f),v=u(_),b=c(_.length),g=h?b-1:0,w=h?-1:1;if(m<2)for(;;){if(g in v){y=v[g],g+=w;break}if(g+=w,h?g<0:b<=g)throw TypeError("Reduce of empty array with no initial value")}for(;h?g>=0:b>g;g+=w)g in v&&(y=p(y,v[g],g,_));return y}};i.exports={left:d(!1),right:d(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),u=o("b622"),c=o("9263"),d=o("9112"),h=u("species"),f=!l(function(){var v=/./;return v.exec=function(){var b=[];return b.groups={a:"7"},b},"".replace(v,"$<a>")!=="7"}),p=function(){return"a".replace(/./,"$0")==="$0"}(),m=u("replace"),y=function(){return/./[m]?/./[m]("a","$0")==="":!1}(),_=!l(function(){var v=/(?:)/,b=v.exec;v.exec=function(){return b.apply(this,arguments)};var g="ab".split(v);return g.length!==2||g[0]!=="a"||g[1]!=="b"});i.exports=function(v,b,g,w){var T=u(v),M=!l(function(){var C={};return C[T]=function(){return 7},""[v](C)!=7}),x=M&&!l(function(){var C=!1,H=/a/;return v==="split"&&(H={},H.constructor={},H.constructor[h]=function(){return H},H.flags="",H[T]=/./[T]),H.exec=function(){return C=!0,null},H[T](""),!C});if(!M||!x||v==="replace"&&!(f&&p&&!y)||v==="split"&&!_){var A=/./[T],S=g(T,""[v],function(C,H,O,R,W){return H.exec===c?M&&!W?{done:!0,value:A.call(H,O,R)}:{done:!0,value:C.call(O,H,R)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}),N=S[0],U=S[1];a(String.prototype,v,N),a(RegExp.prototype,T,b==2?function(C,H){return U.call(C,this,H)}:function(C){return U.call(C,this)})}w&&d(RegExp.prototype[T],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,u=o("1dde"),c=o("ae40"),d=u("map"),h=c("map");a({target:"Array",proto:!0,forced:!d||!h},{map:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(u){return u&&u.Math==Math&&u};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("56ef"),c=o("fc6a"),d=o("06cf"),h=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(p){for(var m=c(p),y=d.f,_=u(m),v={},b=0,g,w;_.length>b;)w=y(m,g=_[b++]),w!==void 0&&h(v,g,w);return v}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return u});function l(){return typeof window<"u"?window.console:a.console}var u=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("e260"),c=o("9112"),d=o("b622"),h=d("iterator"),f=d("toStringTag"),p=u.values;for(var m in l){var y=a[m],_=y&&y.prototype;if(_){if(_[h]!==p)try{c(_,h,p)}catch{_[h]=p}if(_[f]||c(_,f,m),l[m]){for(var v in u)if(_[v]!==u[v])try{c(_,v,u[v])}catch{_[v]=u[v]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(c){return a(c,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("da84"),c=o("5135"),d=o("861d"),h=o("9bf2").f,f=o("e893"),p=u.Symbol;if(l&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var m={},y=function(){var T=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),M=this instanceof y?new p(T):T===void 0?p():p(T);return T===""&&(m[M]=!0),M};f(y,p);var _=y.prototype=p.prototype;_.constructor=y;var v=_.toString,b=String(p("test"))=="Symbol(test)",g=/^Symbol\((.*)\)[^)]+$/;h(_,"description",{configurable:!0,get:function(){var T=d(this)?this.valueOf():this,M=v.call(T);if(c(m,T))return"";var x=b?M.slice(7,-1):M.replace(g,"$1");return x===""?void 0:x}}),a({global:!0,forced:!0},{Symbol:y})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),u=o("f772"),c=o("e177"),d=u("IE_PROTO"),h=Object.prototype;i.exports=c?Object.getPrototypeOf:function(f){return f=l(f),a(f,d)?f[d]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?h:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),u=o("3f8c"),c=o("69f3"),d=o("7dd0"),h="Array Iterator",f=c.set,p=c.getterFor(h);i.exports=d(Array,"Array",function(m,y){f(this,{type:h,target:a(m),index:0,kind:y})},function(){var m=p(this),y=m.target,_=m.kind,v=m.index++;return!y||v>=y.length?(m.target=void 0,{value:void 0,done:!0}):_=="keys"?{value:v,done:!1}:_=="values"?{value:y[v],done:!1}:{value:[v,y[v]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("fc6a"),c=o("06cf").f,d=o("83ab"),h=l(function(){c(1)}),f=!d||h;a({target:"Object",stat:!0,forced:f,sham:!d},{getOwnPropertyDescriptor:function(m,y){return c(u(m),y)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),u=o("06cf"),c=o("9bf2");i.exports=function(d,h){for(var f=l(h),p=c.f,m=u.f,y=0;y<f.length;y++){var _=f[y];a(d,_)||p(d,_,m(h,_))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(u){return a(u)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),u=a("iterator"),c=Array.prototype;i.exports=function(d){return d!==void 0&&(l.Array===d||c[u]===d)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),u=o("b622"),c=u("toStringTag"),d=l(function(){return arguments}())=="Arguments",h=function(f,p){try{return f[p]}catch{}};i.exports=a?l:function(f){var p,m,y;return f===void 0?"Undefined":f===null?"Null":typeof(m=h(p=Object(f),c))=="string"?m:d?l(p):(y=l(p))=="Object"&&typeof p.callee=="function"?"Arguments":y}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),u=a("keys");i.exports=function(c){return u[c]||(u[c]=l(c))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(o.p=u[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function c(L,K,j){return K in L?Object.defineProperty(L,K,{value:j,enumerable:!0,configurable:!0,writable:!0}):L[K]=j,L}function d(L,K){var j=Object.keys(L);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(L);K&&(se=se.filter(function(me){return Object.getOwnPropertyDescriptor(L,me).enumerable})),j.push.apply(j,se)}return j}function h(L){for(var K=1;K<arguments.length;K++){var j=arguments[K]!=null?arguments[K]:{};K%2?d(Object(j),!0).forEach(function(se){c(L,se,j[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(j)):d(Object(j)).forEach(function(se){Object.defineProperty(L,se,Object.getOwnPropertyDescriptor(j,se))})}return L}function f(L){if(Array.isArray(L))return L}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function p(L,K){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(L)))){var j=[],se=!0,me=!1,je=void 0;try{for(var $e=L[Symbol.iterator](),et;!(se=(et=$e.next()).done)&&(j.push(et.value),!(K&&j.length===K));se=!0);}catch(Ut){me=!0,je=Ut}finally{try{!se&&$e.return!=null&&$e.return()}finally{if(me)throw je}}return j}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function m(L,K){(K==null||K>L.length)&&(K=L.length);for(var j=0,se=new Array(K);j<K;j++)se[j]=L[j];return se}function y(L,K){if(L){if(typeof L=="string")return m(L,K);var j=Object.prototype.toString.call(L).slice(8,-1);if(j==="Object"&&L.constructor&&(j=L.constructor.name),j==="Map"||j==="Set")return Array.from(L);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return m(L,K)}}function _(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(L,K){return f(L)||p(L,K)||y(L,K)||_()}function b(L){if(Array.isArray(L))return m(L)}function g(L){if(typeof Symbol<"u"&&Symbol.iterator in Object(L))return Array.from(L)}function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(L){return b(L)||g(L)||y(L)||w()}var M=o("a352"),x=o.n(M);function A(L){L.parentElement!==null&&L.parentElement.removeChild(L)}function S(L,K,j){var se=j===0?L.children[0]:L.children[j-1].nextSibling;L.insertBefore(K,se)}var N=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function U(L){var K=Object.create(null);return function(se){var me=K[se];return me||(K[se]=L(se))}}var C=/-(\w)/g,H=U(function(L){return L.replace(C,function(K,j){return j.toUpperCase()})});o("5db7"),o("73d9");var O=["Start","Add","Remove","Update","End"],R=["Choose","Unchoose","Sort","Filter","Clone"],W=["Move"],X=[W,O,R].flatMap(function(L){return L}).map(function(L){return"on".concat(L)}),$={manage:W,manageAndEmit:O,emit:R};function I(L){return X.indexOf(L)!==-1}o("caad"),o("2ca0");var Z=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ie(L){return Z.includes(L)}function ee(L){return["transition-group","TransitionGroup"].includes(L)}function V(L){return["id","class","role","style"].includes(L)||L.startsWith("data-")||L.startsWith("aria-")||L.startsWith("on")}function we(L){return L.reduce(function(K,j){var se=v(j,2),me=se[0],je=se[1];return K[me]=je,K},{})}function B(L){var K=L.$attrs,j=L.componentData,se=j===void 0?{}:j,me=we(Object.entries(K).filter(function(je){var $e=v(je,2),et=$e[0];return $e[1],V(et)}));return h(h({},me),se)}function q(L){var K=L.$attrs,j=L.callBackBuilder,se=we(le(K));Object.entries(j).forEach(function(je){var $e=v(je,2),et=$e[0],Ut=$e[1];$[et].forEach(function(ze){se["on".concat(ze)]=Ut(ze)})});var me="[data-draggable]".concat(se.draggable||"");return h(h({},se),{},{draggable:me})}function le(L){return Object.entries(L).filter(function(K){var j=v(K,2),se=j[0];return j[1],!V(se)}).map(function(K){var j=v(K,2),se=j[0],me=j[1];return[H(se),me]}).filter(function(K){var j=v(K,2),se=j[0];return j[1],!I(se)})}o("c740");function Y(L,K){if(!(L instanceof K))throw new TypeError("Cannot call a class as a function")}function pe(L,K){for(var j=0;j<K.length;j++){var se=K[j];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(L,se.key,se)}}function Se(L,K,j){return K&&pe(L.prototype,K),j&&pe(L,j),L}var E=function(K){var j=K.el;return j},P=function(K,j){return K.__draggable_context=j},F=function(K){return K.__draggable_context},z=function(){function L(K){var j=K.nodes,se=j.header,me=j.default,je=j.footer,$e=K.root,et=K.realList;Y(this,L),this.defaultNodes=me,this.children=[].concat(T(se),T(me),T(je)),this.externalComponent=$e.externalComponent,this.rootTransition=$e.transition,this.tag=$e.tag,this.realList=et}return Se(L,[{key:"render",value:function(j,se){var me=this.tag,je=this.children,$e=this._isRootComponent,et=$e?{default:function(){return je}}:je;return j(me,se,et)}},{key:"updated",value:function(){var j=this.defaultNodes,se=this.realList;j.forEach(function(me,je){P(E(me),{element:se[je],index:je})})}},{key:"getUnderlyingVm",value:function(j){return F(j)}},{key:"getVmIndexFromDomIndex",value:function(j,se){var me=this.defaultNodes,je=me.length,$e=se.children,et=$e.item(j);if(et===null)return je;var Ut=F(et);if(Ut)return Ut.index;if(je===0)return 0;var ze=E(me[0]),Be=T($e).findIndex(function(qe){return qe===ze});return j<Be?0:je}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),L}(),he=o("8bbf");function fe(L,K){var j=L[K];return j?j():[]}function de(L){var K=L.$slots,j=L.realList,se=L.getKey,me=j||[],je=["header","footer"].map(function(qe){return fe(K,qe)}),$e=v(je,2),et=$e[0],Ut=$e[1],ze=K.item;if(!ze)throw new Error("draggable element must have an item slot");var Be=me.flatMap(function(qe,yt){return ze({element:qe,index:yt}).map(function(It){return It.key=se(qe),It.props=h(h({},It.props||{}),{},{"data-draggable":!0}),It})});if(Be.length!==me.length)throw new Error("Item slot must have only one child");return{header:et,footer:Ut,default:Be}}function te(L){var K=ee(L),j=!ie(L)&&!K;return{transition:K,externalComponent:j,tag:j?Object(he.resolveComponent)(L):K?he.TransitionGroup:L}}function G(L){var K=L.$slots,j=L.tag,se=L.realList,me=L.getKey,je=de({$slots:K,realList:se,getKey:me}),$e=te(j);return new z({nodes:je,root:$e,realList:se})}function ce(L,K){var j=this;Object(he.nextTick)(function(){return j.$emit(L.toLowerCase(),K)})}function be(L){var K=this;return function(j,se){if(K.realList!==null)return K["onDrag".concat(L)](j,se)}}function Ce(L){var K=this,j=be.call(this,L);return function(se,me){j.call(K,se,me),ce.call(K,L,se)}}var Ne=null,Te={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(K){return K}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Me=["update:modelValue","change"].concat(T([].concat(T($.manageAndEmit),T($.emit)).map(function(L){return L.toLowerCase()}))),pt=Object(he.defineComponent)({name:"draggable",inheritAttrs:!1,props:Te,emits:Me,data:function(){return{error:!1}},render:function(){try{this.error=!1;var K=this.$slots,j=this.$attrs,se=this.tag,me=this.componentData,je=this.realList,$e=this.getKey,et=G({$slots:K,tag:se,realList:je,getKey:$e});this.componentStructure=et;var Ut=B({$attrs:j,componentData:me});return et.render(he.h,Ut)}catch(ze){return this.error=!0,Object(he.h)("pre",{style:{color:"red"}},ze.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&N.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var K=this;if(!this.error){var j=this.$attrs,se=this.$el,me=this.componentStructure;me.updated();var je=q({$attrs:j,callBackBuilder:{manageAndEmit:function(Ut){return Ce.call(K,Ut)},emit:function(Ut){return ce.bind(K,Ut)},manage:function(Ut){return be.call(K,Ut)}}}),$e=se.nodeType===1?se:se.parentElement;this._sortable=new x.a($e,je),this.targetDomElement=$e,$e.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var K=this.list;return K||this.modelValue},getKey:function(){var K=this.itemKey;return typeof K=="function"?K:function(j){return j[K]}}},watch:{$attrs:{handler:function(K){var j=this._sortable;j&&le(K).forEach(function(se){var me=v(se,2),je=me[0],$e=me[1];j.option(je,$e)})},deep:!0}},methods:{getUnderlyingVm:function(K){return this.componentStructure.getUnderlyingVm(K)||null},getUnderlyingPotencialDraggableComponent:function(K){return K.__draggable_component__},emitChanges:function(K){var j=this;Object(he.nextTick)(function(){return j.$emit("change",K)})},alterList:function(K){if(this.list){K(this.list);return}var j=T(this.modelValue);K(j),this.$emit("update:modelValue",j)},spliceList:function(){var K=arguments,j=function(me){return me.splice.apply(me,T(K))};this.alterList(j)},updatePosition:function(K,j){var se=function(je){return je.splice(j,0,je.splice(K,1)[0])};this.alterList(se)},getRelatedContextFromMoveEvent:function(K){var j=K.to,se=K.related,me=this.getUnderlyingPotencialDraggableComponent(j);if(!me)return{component:me};var je=me.realList,$e={list:je,component:me};if(j!==se&&je){var et=me.getUnderlyingVm(se)||{};return h(h({},et),$e)}return $e},getVmIndexFromDomIndex:function(K){return this.componentStructure.getVmIndexFromDomIndex(K,this.targetDomElement)},onDragStart:function(K){this.context=this.getUnderlyingVm(K.item),K.item._underlying_vm_=this.clone(this.context.element),Ne=K.item},onDragAdd:function(K){var j=K.item._underlying_vm_;if(j!==void 0){A(K.item);var se=this.getVmIndexFromDomIndex(K.newIndex);this.spliceList(se,0,j);var me={element:j,newIndex:se};this.emitChanges({added:me})}},onDragRemove:function(K){if(S(this.$el,K.item,K.oldIndex),K.pullMode==="clone"){A(K.clone);return}var j=this.context,se=j.index,me=j.element;this.spliceList(se,1);var je={element:me,oldIndex:se};this.emitChanges({removed:je})},onDragUpdate:function(K){A(K.item),S(K.from,K.item,K.oldIndex);var j=this.context.index,se=this.getVmIndexFromDomIndex(K.newIndex);this.updatePosition(j,se);var me={element:this.context.element,oldIndex:j,newIndex:se};this.emitChanges({moved:me})},computeFutureIndex:function(K,j){if(!K.element)return 0;var se=T(j.to.children).filter(function(et){return et.style.display!=="none"}),me=se.indexOf(j.related),je=K.component.getVmIndexFromDomIndex(me),$e=se.indexOf(Ne)!==-1;return $e||!j.willInsertAfter?je:je+1},onDragMove:function(K,j){var se=this.move,me=this.realList;if(!se||!me)return!0;var je=this.getRelatedContextFromMoveEvent(K),$e=this.computeFutureIndex(je,K),et=h(h({},this.context),{},{futureIndex:$e}),Ut=h(h({},K),{},{relatedContext:je,draggedContext:et});return se(Ut,j)},onDragEnd:function(){Ne=null}}}),Q=pt;s.default=Q},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),u=o("e8b5"),c=o("23cb"),d=o("50c4"),h=o("fc6a"),f=o("8418"),p=o("b622"),m=o("1dde"),y=o("ae40"),_=m("slice"),v=y("slice",{ACCESSORS:!0,0:0,1:2}),b=p("species"),g=[].slice,w=Math.max;a({target:"Array",proto:!0,forced:!_||!v},{slice:function(M,x){var A=h(this),S=d(A.length),N=c(M,S),U=c(x===void 0?S:x,S),C,H,O;if(u(A)&&(C=A.constructor,typeof C=="function"&&(C===Array||u(C.prototype))?C=void 0:l(C)&&(C=C[b],C===null&&(C=void 0)),C===Array||C===void 0))return g.call(A,N,U);for(H=new(C===void 0?Array:C)(w(U-N,0)),O=0;N<U;N++,O++)N in A&&f(H,O,A[N]);return H.length=O,H}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(u){return a(l(u))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(oO);var Yz=oO.exports;const Gz=az(Yz),zz=t=>(AC("data-v-d69062a4"),t=t(),kC(),t),qz=zz(()=>ne("h3",{class:"title-secondary"},"My Work",-1)),Qz=Ie({__name:"Projects",setup(t){const e=Gn(),{moveProject:n}=e,{projects:r}=Qt(e),i=o=>{o.moved&&n(o.moved.oldIndex,o.moved.newIndex)},s=()=>{Rr(()=>{const o=document.querySelectorAll(".transition-opacity");o.forEach(a=>{a.classList.replace("opacity-100","opacity-0")}),uH(Array.from(o),500,300,a=>{a.classList.replace("opacity-0","opacity-100")})})};return pn(()=>r.value,(o,a)=>{o>a&&s()}),an(()=>{s()}),(o,a)=>(D(),J(Ae,null,[qz,ae(k(Gz),{class:"grid grid-cols-1 gap-4 my-5 sm:grid-cols-2 xl:grid-cols-3 cursor-pointer select-none","model-value":k(r),"item-key":"index",onChange:i,animation:150,delay:50},{item:ye(({element:l})=>[ae(_r,{class:"border-4 border-transparent opacity-100 transition-opacity duration-1000 ease-in",title:l.name,url:l.url,description:l.description,loading:l.loading},{default:ye(()=>[(D(!0),J(Ae,null,ut(l.technologies,u=>(D(),ve(vt,{class:"m-1 md:mt-2 font-bold",style:Nn({backgroundColor:u.color})},{default:ye(()=>[Qe(Xe(u.name),1)]),_:2},1032,["style"]))),256))]),_:2},1032,["title","url","description","loading"])]),_:1},8,["model-value"])],64))}});const Xz=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},Jz=Xz(Qz,[["__scopeId","data-v-d69062a4"]]),Zz={class:"grid mt-20"},eq=Ie({__name:"Home",setup(t){return(e,n)=>(D(),ve(Vo,{"scroll-to-content":!1},{content:ye(()=>[ne("div",Zz,[ae(Jz)])]),_:1}))}}),tq=Ie({__name:"Home",setup(t){return(e,n)=>(D(),ve(eq))}}),nq={class:"flex flex-col items-center content-center"},rq={class:"grid grid-cols-4 mt-10 gap-3"},iq=Ie({__name:"Login",setup(t){const e=Wn(),{loginLoading:n}=Qt(e),r=Z0(),{initEmail:i,initPassword:s}=r.currentRoute.value.query,o=ue(),a=ue(),l=Ln({email:{value:(i==null?void 0:i.toString())||"",error:""},password:{value:(s==null?void 0:s.toString())||"",error:""}}),u=async()=>{Object.keys(l).forEach(d=>l[d].error=""),await Promise.all([o.value.test(),a.value.test()]),!l.email.error&&!l.password.error&&e.login(l.email.value,l.password.value)},c=async()=>{await o.value.test(),l.email.error||e.resetPassword(l.email.value)};return an(()=>{r.replace({query:void 0})}),(d,h)=>{const f=Ls("RouterLink");return D(),ve(Vo,null,{content:ye(()=>[ae(_r,{class:"!bg-cyan-800 !bg-opacity-50 my-5",title:"Login",description:"Please login using your e-mail and password."},{default:ye(()=>[ne("div",nq,[ne("form",{class:"w-full lg:w-1/2 xl:w-1/3 px-8 pt-6 pb-8 mb-4",onSubmit:h[4]||(h[4]=Pt(p=>u(),["prevent"]))},[ae(t_,{ref_key:"email",ref:o,name:"email",label:"E-mail",modelValue:l.email.value,"onUpdate:modelValue":h[0]||(h[0]=p=>l.email.value=p),error:l.email.error,"onUpdate:error":h[1]||(h[1]=p=>l.email.error=p),rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),ae(Il,{ref_key:"password",ref:a,name:"password",label:"Password",modelValue:l.password.value,"onUpdate:modelValue":h[2]||(h[2]=p=>l.password.value=p),error:l.password.error,"onUpdate:error":h[3]||(h[3]=p=>l.password.error=p),rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),ne("div",rq,[ae(vt,{class:"col-span-full md:col-span-2",action:"submit",loading:k(n)},{default:ye(()=>[Qe(" Login ")]),_:1},8,["loading"]),ae(f,{class:"col-span-full md:col-span-2",to:{name:"register",query:{initEmail:l.email.value,initPassword:l.password.value}}},{default:ye(()=>[ae(vt,{class:"w-full",outlined:""},{default:ye(()=>[Qe(" Register ")]),_:1})]),_:1},8,["to"]),ae(vt,{class:"col-span-full md:col-span-2 md:col-start-3",outlined:"",onClick:c},{default:ye(()=>[Qe(" Forgot Password ")]),_:1})])],32),ae(e_)])]),_:1})]),_:1})}}}),sq=Ie({__name:"Login",setup(t){return(e,n)=>(D(),ve(iq))}}),oq=Ie({__name:"NotFound",setup(t){return(e,n)=>(D(),ve(Vo,{"scroll-to-content":!1},{content:ye(()=>[ae(_r,{class:"!bg-red-800 !bg-opacity-50 my-5",title:"Not found.",description:"Where are you going?"})]),_:1}))}}),aq=Ie({__name:"NotFound",setup(t){return(e,n)=>(D(),ve(oq))}}),lq={class:"flex flex-col items-center content-center"},uq={class:"grid grid-cols-2 mt-10 gap-3"},cq=Ie({__name:"Register",setup(t){const e=Wn(),{loginLoading:n}=Qt(e),r=Z0(),{initEmail:i,initPassword:s}=r.currentRoute.value.query,o=ue(),a=ue(),l=ue(),u=Ln({email:{value:(i==null?void 0:i.toString())||"",error:""},password:{value:(s==null?void 0:s.toString())||"",error:""},firstName:{value:"",error:""}}),c=async()=>{Object.keys(u).forEach(d=>u[d].error=""),await Promise.all([o.value.test(),a.value.test(),l.value.test()]),!u.email.error&&!u.password.error&&!u.firstName.error&&e.register(u.email.value,u.password.value,u.firstName.value)};return an(()=>{r.replace({query:void 0})}),(d,h)=>{const f=Ls("RouterLink");return D(),ve(Vo,null,{content:ye(()=>[ae(_r,{class:"!bg-cyan-800 !bg-opacity-50 my-5",title:"Register",description:"Please register using your e-mail, password and first name."},{default:ye(()=>[ne("div",lq,[ne("form",{class:"w-full lg:w-1/2 xl:w-1/3 px-8 pt-6 pb-8 mb-4",onSubmit:h[6]||(h[6]=Pt(p=>c(),["prevent"]))},[ae(hr,{ref_key:"firstName",ref:l,name:"firstName",label:"First Name",placeholder:"Someone",modelValue:u.firstName.value,"onUpdate:modelValue":h[0]||(h[0]=p=>u.firstName.value=p),error:u.firstName.error,"onUpdate:error":h[1]||(h[1]=p=>u.firstName.error=p),rules:[k(Et).Required,k(Et).MinLength],"min-length":3,"max-length":25},null,8,["modelValue","error","rules"]),ae(t_,{ref_key:"email",ref:o,name:"email",label:"E-mail",modelValue:u.email.value,"onUpdate:modelValue":h[2]||(h[2]=p=>u.email.value=p),error:u.email.error,"onUpdate:error":h[3]||(h[3]=p=>u.email.error=p),rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),ae(Il,{ref_key:"password",ref:a,name:"password",label:"Password",modelValue:u.password.value,"onUpdate:modelValue":h[4]||(h[4]=p=>u.password.value=p),error:u.password.error,"onUpdate:error":h[5]||(h[5]=p=>u.password.error=p),rules:[k(Et).Required]},null,8,["modelValue","error","rules"]),ne("div",uq,[ae(vt,{class:"col-span-full md:col-span-1",action:"submit",loading:k(n)},{default:ye(()=>[Qe(" Register ")]),_:1},8,["loading"]),ae(f,{to:{name:"login",query:{initEmail:u.email.value,initPassword:u.password.value}},class:"col-span-full md:col-span-1"},{default:ye(()=>[ae(vt,{class:"w-full",outlined:""},{default:ye(()=>[Qe(" Login ")]),_:1})]),_:1},8,["to"])])],32),ae(e_)])]),_:1})]),_:1})}}}),dq=Ie({__name:"Register",setup(t){return(e,n)=>(D(),ve(cq))}}),Gm=_$({history:UL(""),routes:[{path:"/",name:"home",meta:{title:"Home"},component:tq,beforeEnter:(t,e,n)=>{var i;const r=decodeURIComponent(((i=t.query.path)==null?void 0:i.toString())||"");if(r){const s=r.split("/")[0];Gm.getRoutes().find(o=>o.path.startsWith(`/${s}`))?n({path:r}):n({name:"notfound"})}else n()}},{path:"/login",name:"login",meta:{title:"Login"},component:sq,beforeEnter:(t,e,n)=>{Wn().currentUser?n({name:"dashboard"}):n()}},{path:"/register",name:"register",meta:{title:"Register"},component:dq,beforeEnter:(t,e,n)=>{Wn().currentUser?n({name:"dashboard"}):n()}},{path:"/dashboard",name:"dashboard",meta:{title:"Dashboard"},component:sz,beforeEnter:(t,e,n)=>{Wn().currentUser?n():n({name:"login"})}},{path:"/blog/:postId?",name:"blog",meta:{title:"Blog"},component:HG},{path:"/customvoting",name:"customvoting",meta:{title:"CustomVoting"},component:QG},{path:"/cat-calc",name:"cat-calc",meta:{title:"CatCalc"},component:YG},{path:"/:pathMatch(.*)*",name:"notfound",meta:{title:"404"},component:aq}],scrollBehavior(t,e,n){return t.hash?new Promise((r,i)=>{let s=10;const o=()=>{setTimeout(()=>{try{document.getElementById(t.hash.replace("#",""))?r({el:t.hash,behavior:"smooth",top:15}):(s--,s>0?o():i())}catch(a){i(a)}},1e3)};o()}):n||((t.name==="login"||t.name==="register")&&(e.name==="login"||e.name==="register")?!1:{top:0})}}),CS=tO.name;Gm.beforeEach(async(t,e,n)=>{var r,i;if(t!==e){const s=Gn();t.name&&(["home","login","register","dashboard","notfound"].includes(t.name.toString())||(i=await s.fetchMenuItems((r=Wn().firebaseUser)==null?void 0:r.uid))!=null&&i.some(o=>t.path.startsWith(o.url)))?n():n({name:"notfound"})}else n()});Gm.beforeResolve(t=>{document.title=CS+" | "+t.meta.title||CS});const o_=Gm;function wi(t){"@babel/helpers - typeof";return wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(t)}function Je(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Fe(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Ye(t){Fe(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||wi(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function vs(t,e){Fe(2,arguments);var n=Ye(t),r=Je(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Oi(t,e){Fe(2,arguments);var n=Ye(t),r=Je(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+r+1,0);var o=s.getDate();return i>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),i),n)}function yO(t,e){if(Fe(2,arguments),!e||wi(e)!=="object")return new Date(NaN);var n=e.years?Je(e.years):0,r=e.months?Je(e.months):0,i=e.weeks?Je(e.weeks):0,s=e.days?Je(e.days):0,o=e.hours?Je(e.hours):0,a=e.minutes?Je(e.minutes):0,l=e.seconds?Je(e.seconds):0,u=Ye(t),c=r||n?Oi(u,r+n*12):u,d=s||i?vs(c,s+i*7):c,h=a+o*60,f=l+h*60,p=f*1e3,m=new Date(d.getTime()+p);return m}function hq(t,e){Fe(2,arguments);var n=Ye(t).getTime(),r=Je(e);return new Date(n+r)}var fq={};function cs(){return fq}function Ua(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var c=cs(),d=Je((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ye(t),f=h.getDay(),p=(f<d?7:0)+f-d;return h.setDate(h.getDate()-p),h.setHours(0,0,0,0),h}function Sp(t){return Fe(1,arguments),Ua(t,{weekStartsOn:1})}function pq(t){Fe(1,arguments);var e=Ye(t),n=e.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var i=Sp(r),s=new Date(0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);var o=Sp(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function mq(t){Fe(1,arguments);var e=pq(t),n=new Date(0);n.setFullYear(e,0,4),n.setHours(0,0,0,0);var r=Sp(n);return r}function Cp(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function IS(t){Fe(1,arguments);var e=Ye(t);return e.setHours(0,0,0,0),e}var gq=864e5;function vq(t,e){Fe(2,arguments);var n=IS(t),r=IS(e),i=n.getTime()-Cp(n),s=r.getTime()-Cp(r);return Math.round((i-s)/gq)}function yq(t,e){Fe(2,arguments);var n=Je(e),r=n*3;return Oi(t,r)}function a_(t,e){Fe(2,arguments);var n=Je(e);return Oi(t,n*12)}var l_=6e4,u_=36e5,wq=1e3;function wO(t){return Fe(1,arguments),t instanceof Date||wi(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Vc(t){if(Fe(1,arguments),!wO(t)&&typeof t!="number")return!1;var e=Ye(t);return!isNaN(Number(e))}function AS(t){Fe(1,arguments);var e=Ye(t),n=Math.floor(e.getMonth()/3)+1;return n}function bO(t,e){var n;Fe(1,arguments);var r=t||{},i=Ye(r.start),s=Ye(r.end),o=s.getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var a=[],l=i;l.setHours(0,0,0,0);var u=Number((n=e==null?void 0:e.step)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)a.push(Ye(l)),l.setDate(l.getDate()+u),l.setHours(0,0,0,0);return a}function bd(t){Fe(1,arguments);var e=Ye(t),n=e.getMonth(),r=n-n%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function bq(t){Fe(1,arguments);var e=t||{},n=Ye(e.start),r=Ye(e.end),i=r.getTime();if(!(n.getTime()<=i))throw new RangeError("Invalid interval");var s=bd(n),o=bd(r);i=o.getTime();for(var a=[],l=s;l.getTime()<=i;)a.push(Ye(l)),l=yq(l,1);return a}function _q(t){Fe(1,arguments);var e=Ye(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function Tq(t){Fe(1,arguments);var e=Ye(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Eq(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var c=cs(),d=Je((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ye(t),f=h.getDay(),p=(f<d?-7:0)+6-(f-d);return h.setDate(h.getDate()+p),h.setHours(23,59,59,999),h}function kS(t){Fe(1,arguments);var e=Ye(t),n=e.getMonth(),r=n-n%3+3;return e.setMonth(r,0),e.setHours(23,59,59,999),e}function _O(t,e){Fe(2,arguments);var n=Je(e);return hq(t,-n)}var Sq=864e5;function Cq(t){Fe(1,arguments);var e=Ye(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/Sq)+1}function hu(t){Fe(1,arguments);var e=1,n=Ye(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function TO(t){Fe(1,arguments);var e=Ye(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=hu(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=hu(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Iq(t){Fe(1,arguments);var e=TO(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=hu(n);return r}var Aq=6048e5;function EO(t){Fe(1,arguments);var e=Ye(t),n=hu(e).getTime()-Iq(e).getTime();return Math.round(n/Aq)+1}function Fa(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var c=cs(),d=Je((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ye(t),f=h.getUTCDay(),p=(f<d?7:0)+f-d;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function c_(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var c=Ye(t),d=c.getUTCFullYear(),h=cs(),f=Je((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,f),p.setUTCHours(0,0,0,0);var m=Fa(p,e),y=new Date(0);y.setUTCFullYear(d,0,f),y.setUTCHours(0,0,0,0);var _=Fa(y,e);return c.getTime()>=m.getTime()?d+1:c.getTime()>=_.getTime()?d:d-1}function kq(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var c=cs(),d=Je((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=c_(t,e),f=new Date(0);f.setUTCFullYear(h,0,d),f.setUTCHours(0,0,0,0);var p=Fa(f,e);return p}var xq=6048e5;function SO(t,e){Fe(1,arguments);var n=Ye(t),r=Fa(n,e).getTime()-kq(n,e).getTime();return Math.round(r/xq)+1}function Bt(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Pq={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return Bt(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Bt(r+1,2)},d:function(e,n){return Bt(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Bt(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Bt(e.getUTCHours(),n.length)},m:function(e,n){return Bt(e.getUTCMinutes(),n.length)},s:function(e,n){return Bt(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return Bt(s,n.length)}};const Gs=Pq;var cl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Dq={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return Gs.y(e,n)},Y:function(e,n,r,i){var s=c_(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return Bt(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Bt(o,n.length)},R:function(e,n){var r=TO(e);return Bt(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Bt(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Bt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Bt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return Gs.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return Bt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=SO(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):Bt(s,n.length)},I:function(e,n,r){var i=EO(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):Bt(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Gs.d(e,n)},D:function(e,n,r){var i=Cq(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Bt(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Bt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Bt(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return Bt(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=cl.noon:i===0?s=cl.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=cl.evening:i>=12?s=cl.afternoon:i>=4?s=cl.morning:s=cl.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Gs.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Gs.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Bt(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):Bt(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Gs.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Gs.s(e,n)},S:function(e,n){return Gs.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return PS(o);case"XXXX":case"XX":return Xo(o);case"XXXXX":case"XXX":default:return Xo(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return PS(o);case"xxxx":case"xx":return Xo(o);case"xxxxx":case"xxx":default:return Xo(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+xS(o,":");case"OOOO":default:return"GMT"+Xo(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+xS(o,":");case"zzzz":default:return"GMT"+Xo(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return Bt(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return Bt(o,n.length)}};function xS(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e||"";return n+String(i)+o+Bt(s,2)}function PS(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Bt(Math.abs(t)/60,2)}return Xo(t,e)}function Xo(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=Bt(Math.floor(i/60),2),o=Bt(i%60,2);return r+s+n+o}const Rq=Dq;var DS=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},CO=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Oq=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return DS(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",DS(i,n)).replace("{{time}}",CO(s,n))},Nq={p:CO,P:Oq};const h0=Nq;var Mq=["D","DD"],Lq=["YY","YYYY"];function IO(t){return Mq.indexOf(t)!==-1}function AO(t){return Lq.indexOf(t)!==-1}function Ip(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var $q={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Uq=function(e,n,r){var i,s=$q[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const Fq=Uq;function uv(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var Vq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Bq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hq={date:uv({formats:Vq,defaultWidth:"full"}),time:uv({formats:Bq,defaultWidth:"full"}),dateTime:uv({formats:jq,defaultWidth:"full"})};const Wq=Hq;var Kq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Yq=function(e,n,r,i){return Kq[e]};const Gq=Yq;function qu(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return i[u]}}var zq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Xq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Jq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Zq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eQ=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},tQ={ordinalNumber:eQ,era:qu({values:zq,defaultWidth:"wide"}),quarter:qu({values:qq,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:qu({values:Qq,defaultWidth:"wide"}),day:qu({values:Xq,defaultWidth:"wide"}),dayPeriod:qu({values:Jq,defaultWidth:"wide",formattingValues:Zq,defaultFormattingWidth:"wide"})};const nQ=tQ;function Qu(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?iQ(a,function(d){return d.test(o)}):rQ(a,function(d){return d.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var c=e.slice(o.length);return{value:u,rest:c}}}function rQ(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function iQ(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function sQ(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var oQ=/^(\d+)(th|st|nd|rd)?/i,aQ=/\d+/i,lQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uQ={any:[/^b/i,/^(a|c)/i]},cQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dQ={any:[/1/i,/2/i,/3/i,/4/i]},hQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yQ={ordinalNumber:sQ({matchPattern:oQ,parsePattern:aQ,valueCallback:function(e){return parseInt(e,10)}}),era:Qu({matchPatterns:lQ,defaultMatchWidth:"wide",parsePatterns:uQ,defaultParseWidth:"any"}),quarter:Qu({matchPatterns:cQ,defaultMatchWidth:"wide",parsePatterns:dQ,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Qu({matchPatterns:hQ,defaultMatchWidth:"wide",parsePatterns:fQ,defaultParseWidth:"any"}),day:Qu({matchPatterns:pQ,defaultMatchWidth:"wide",parsePatterns:mQ,defaultParseWidth:"any"}),dayPeriod:Qu({matchPatterns:gQ,defaultMatchWidth:"any",parsePatterns:vQ,defaultParseWidth:"any"})};const wQ=yQ;var bQ={code:"en-US",formatDistance:Fq,formatLong:Wq,formatRelative:Gq,localize:nQ,match:wQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};const kO=bQ;var _Q=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EQ=/^'([^]*?)'?$/,SQ=/''/g,CQ=/[a-zA-Z]/;function bo(t,e,n){var r,i,s,o,a,l,u,c,d,h,f,p,m,y,_,v,b,g;Fe(2,arguments);var w=String(e),T=cs(),M=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:T.locale)!==null&&r!==void 0?r:kO,x=Je((s=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(u=n.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&a!==void 0?a:T.firstWeekContainsDate)!==null&&o!==void 0?o:(d=T.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=Je((f=(p=(m=(y=n==null?void 0:n.weekStartsOn)!==null&&y!==void 0?y:n==null||(_=n.locale)===null||_===void 0||(v=_.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&m!==void 0?m:T.weekStartsOn)!==null&&p!==void 0?p:(b=T.locale)===null||b===void 0||(g=b.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&f!==void 0?f:0);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!M.localize)throw new RangeError("locale must contain localize property");if(!M.formatLong)throw new RangeError("locale must contain formatLong property");var S=Ye(t);if(!Vc(S))throw new RangeError("Invalid time value");var N=Cp(S),U=_O(S,N),C={firstWeekContainsDate:x,weekStartsOn:A,locale:M,_originalDate:S},H=w.match(TQ).map(function(O){var R=O[0];if(R==="p"||R==="P"){var W=h0[R];return W(O,M.formatLong)}return O}).join("").match(_Q).map(function(O){if(O==="''")return"'";var R=O[0];if(R==="'")return IQ(O);var W=Rq[R];if(W)return!(n!=null&&n.useAdditionalWeekYearTokens)&&AO(O)&&Ip(O,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&IO(O)&&Ip(O,e,String(t)),W(U,O,M.localize,C);if(R.match(CQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return O}).join("");return H}function IQ(t){var e=t.match(EQ);return e?e[1].replace(SQ,"'"):t}function AQ(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function kQ(t){Fe(1,arguments);var e=Ye(t),n=e.getDay();return n}function xQ(t){Fe(1,arguments);var e=Ye(t),n=e.getFullYear(),r=e.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function Ni(t){Fe(1,arguments);var e=Ye(t),n=e.getHours();return n}var PQ=6048e5;function DQ(t){Fe(1,arguments);var e=Ye(t),n=Sp(e).getTime()-mq(e).getTime();return Math.round(n/PQ)+1}function rs(t){Fe(1,arguments);var e=Ye(t),n=e.getMinutes();return n}function At(t){Fe(1,arguments);var e=Ye(t),n=e.getMonth();return n}function fu(t){Fe(1,arguments);var e=Ye(t),n=e.getSeconds();return n}function RQ(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var c=Ye(t),d=c.getFullYear(),h=cs(),f=Je((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setFullYear(d+1,0,f),p.setHours(0,0,0,0);var m=Ua(p,e),y=new Date(0);y.setFullYear(d,0,f),y.setHours(0,0,0,0);var _=Ua(y,e);return c.getTime()>=m.getTime()?d+1:c.getTime()>=_.getTime()?d:d-1}function OQ(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var c=cs(),d=Je((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=RQ(t,e),f=new Date(0);f.setFullYear(h,0,d),f.setHours(0,0,0,0);var p=Ua(f,e);return p}var NQ=6048e5;function MQ(t,e){Fe(1,arguments);var n=Ye(t),r=Ua(n,e).getTime()-OQ(n,e).getTime();return Math.round(r/NQ)+1}function ht(t){return Fe(1,arguments),Ye(t).getFullYear()}function _d(t,e){Fe(2,arguments);var n=Ye(t),r=Ye(e);return n.getTime()>r.getTime()}function Td(t,e){Fe(2,arguments);var n=Ye(t),r=Ye(e);return n.getTime()<r.getTime()}function kl(t,e){Fe(2,arguments);var n=Ye(t),r=Ye(e);return n.getTime()===r.getTime()}function RS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function LQ(t,e){if(t){if(typeof t=="string")return RS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RS(t,e)}}function OS(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=LQ(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}}}function Ue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f0(t,e){return f0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f0(t,e)}function Dt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f0(t,e)}function Ap(t){return Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ap(t)}function $Q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function UQ(t,e){if(e&&(wi(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ue(t)}function Rt(t){var e=$Q();return function(){var r=Ap(t),i;if(e){var s=Ap(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return UQ(this,i)}}function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FQ(t,e){if(wi(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wi(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xO(t){var e=FQ(t,"string");return wi(e)==="symbol"?e:String(e)}function NS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xO(r.key),r)}}function _t(t,e,n){return e&&NS(t.prototype,e),n&&NS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oe(t,e,n){return e=xO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var VQ=10,PO=function(){function t(){bt(this,t),Oe(this,"priority",void 0),Oe(this,"subPriority",0)}return _t(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),BQ=function(t){Dt(n,t);var e=Rt(n);function n(r,i,s,o,a){var l;return bt(this,n),l=e.call(this),l.value=r,l.validateValue=i,l.setValue=s,l.priority=o,a&&(l.subPriority=a),l}return _t(n,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,o){return this.setValue(i,s,this.value,o)}}]),n}(PO),jQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",VQ),Oe(Ue(r),"subPriority",-1),r}return _t(n,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var o=new Date(0);return o.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),o.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),o}}]),n}(PO),$t=function(){function t(){bt(this,t),Oe(this,"incompatibleTokens",void 0),Oe(this,"priority",void 0),Oe(this,"subPriority",void 0)}return _t(t,[{key:"run",value:function(n,r,i,s){var o=this.parse(n,r,i,s);return o?{setter:new BQ(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(n,r,i){return!0}}]),t}(),HQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",140),Oe(Ue(r),"incompatibleTokens",["R","u","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"G":case"GG":case"GGG":return o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"});case"GGGGG":return o.era(i,{width:"narrow"});case"GGGG":default:return o.era(i,{width:"wide"})||o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,o){return s.era=o,i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}($t),En={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Wi={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Sn(t,e){return t&&{value:e(t.value),rest:t.rest}}function fn(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Ki(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*u_+s*l_+o*wq),rest:e.slice(n[0].length)}}function DO(t){return fn(En.anyDigitsSigned,t)}function _n(t,e){switch(t){case 1:return fn(En.singleDigit,e);case 2:return fn(En.twoDigits,e);case 3:return fn(En.threeDigits,e);case 4:return fn(En.fourDigits,e);default:return fn(new RegExp("^\\d{1,"+t+"}"),e)}}function kp(t,e){switch(t){case 1:return fn(En.singleDigitSigned,e);case 2:return fn(En.twoDigitsSigned,e);case 3:return fn(En.threeDigitsSigned,e);case 4:return fn(En.fourDigitsSigned,e);default:return fn(new RegExp("^-?\\d{1,"+t+"}"),e)}}function d_(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function RO(t,e){var n=e>0,r=n?e:1-e,i;if(r<=50)i=t||100;else{var s=r+50,o=Math.floor(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function OO(t){return t%400===0||t%4===0&&t%100!==0}var WQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",130),Oe(Ue(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){var a=function(u){return{year:u,isTwoDigitYear:s==="yy"}};switch(s){case"y":return Sn(_n(4,i),a);case"yo":return Sn(o.ordinalNumber(i,{unit:"year"}),a);default:return Sn(_n(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o){var a=i.getUTCFullYear();if(o.isTwoDigitYear){var l=RO(o.year,a);return i.setUTCFullYear(l,0,1),i.setUTCHours(0,0,0,0),i}var u=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(u,0,1),i.setUTCHours(0,0,0,0),i}}]),n}($t),KQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",130),Oe(Ue(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){var a=function(u){return{year:u,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return Sn(_n(4,i),a);case"Yo":return Sn(o.ordinalNumber(i,{unit:"year"}),a);default:return Sn(_n(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o,a){var l=c_(i,a);if(o.isTwoDigitYear){var u=RO(o.year,l);return i.setUTCFullYear(u,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Fa(i,a)}var c=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(c,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Fa(i,a)}}]),n}($t),YQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",130),Oe(Ue(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s){return kp(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,o){var a=new Date(0);return a.setUTCFullYear(o,0,4),a.setUTCHours(0,0,0,0),hu(a)}}]),n}($t),GQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",130),Oe(Ue(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s){return kp(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,o){return i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}($t),zQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",120),Oe(Ue(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"Q":case"QQ":return _n(s.length,i);case"Qo":return o.ordinalNumber(i,{unit:"quarter"});case"QQQ":return o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(i,{width:"wide",context:"formatting"})||o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}($t),qQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",120),Oe(Ue(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"q":case"qq":return _n(s.length,i);case"qo":return o.ordinalNumber(i,{unit:"quarter"});case"qqq":return o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(i,{width:"wide",context:"standalone"})||o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}($t),QQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Oe(Ue(r),"priority",110),r}return _t(n,[{key:"parse",value:function(i,s,o){var a=function(u){return u-1};switch(s){case"M":return Sn(fn(En.month,i),a);case"MM":return Sn(_n(2,i),a);case"Mo":return Sn(o.ordinalNumber(i,{unit:"month"}),a);case"MMM":return o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(i,{width:"wide",context:"formatting"})||o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}($t),XQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",110),Oe(Ue(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){var a=function(u){return u-1};switch(s){case"L":return Sn(fn(En.month,i),a);case"LL":return Sn(_n(2,i),a);case"Lo":return Sn(o.ordinalNumber(i,{unit:"month"}),a);case"LLL":return o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(i,{width:"wide",context:"standalone"})||o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}($t);function JQ(t,e,n){Fe(2,arguments);var r=Ye(t),i=Je(e),s=SO(r,n)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var ZQ=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",100),Oe(Ue(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"w":return fn(En.week,i);case"wo":return o.ordinalNumber(i,{unit:"week"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o,a){return Fa(JQ(i,o,a),a)}}]),n}($t);function eX(t,e){Fe(2,arguments);var n=Ye(t),r=Je(e),i=EO(n)-r;return n.setUTCDate(n.getUTCDate()-i*7),n}var tX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",100),Oe(Ue(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"I":return fn(En.week,i);case"Io":return o.ordinalNumber(i,{unit:"week"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o){return hu(eX(i,o))}}]),n}($t),nX=[31,28,31,30,31,30,31,31,30,31,30,31],rX=[31,29,31,30,31,30,31,31,30,31,30,31],iX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",90),Oe(Ue(r),"subPriority",1),Oe(Ue(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"d":return fn(En.date,i);case"do":return o.ordinalNumber(i,{unit:"date"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=OO(o),l=i.getUTCMonth();return a?s>=1&&s<=rX[l]:s>=1&&s<=nX[l]}},{key:"set",value:function(i,s,o){return i.setUTCDate(o),i.setUTCHours(0,0,0,0),i}}]),n}($t),sX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",90),Oe(Ue(r),"subpriority",1),Oe(Ue(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"D":case"DD":return fn(En.dayOfYear,i);case"Do":return o.ordinalNumber(i,{unit:"date"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=OO(o);return a?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,o){return i.setUTCMonth(0,o),i.setUTCHours(0,0,0,0),i}}]),n}($t);function h_(t,e,n){var r,i,s,o,a,l,u,c;Fe(2,arguments);var d=cs(),h=Je((r=(i=(s=(o=n==null?void 0:n.weekStartsOn)!==null&&o!==void 0?o:n==null||(a=n.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&i!==void 0?i:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ye(t),p=Je(e),m=f.getUTCDay(),y=p%7,_=(y+7)%7,v=(_<h?7:0)+p-m;return f.setUTCDate(f.getUTCDate()+v),f}var oX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",90),Oe(Ue(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"E":case"EE":case"EEE":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=h_(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}($t),aX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",90),Oe(Ue(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o,a){var l=function(c){var d=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+d};switch(s){case"e":case"ee":return Sn(_n(s.length,i),l);case"eo":return Sn(o.ordinalNumber(i,{unit:"day"}),l);case"eee":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeeee":return o.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=h_(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}($t),lX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",90),Oe(Ue(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o,a){var l=function(c){var d=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+d};switch(s){case"c":case"cc":return Sn(_n(s.length,i),l);case"co":return Sn(o.ordinalNumber(i,{unit:"day"}),l);case"ccc":return o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"ccccc":return o.day(i,{width:"narrow",context:"standalone"});case"cccccc":return o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(i,{width:"wide",context:"standalone"})||o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=h_(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}($t);function uX(t,e){Fe(2,arguments);var n=Je(e);n%7===0&&(n=n-7);var r=1,i=Ye(t),s=i.getUTCDay(),o=n%7,a=(o+7)%7,l=(a<r?7:0)+n-s;return i.setUTCDate(i.getUTCDate()+l),i}var cX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",90),Oe(Ue(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){var a=function(u){return u===0?7:u};switch(s){case"i":case"ii":return _n(s.length,i);case"io":return o.ordinalNumber(i,{unit:"day"});case"iii":return Sn(o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiii":return Sn(o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Sn(o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiii":default:return Sn(o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,o){return i=uX(i,o),i.setUTCHours(0,0,0,0),i}}]),n}($t),dX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",80),Oe(Ue(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"a":case"aa":case"aaa":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(d_(o),0,0,0),i}}]),n}($t),hX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",80),Oe(Ue(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"b":case"bb":case"bbb":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(d_(o),0,0,0),i}}]),n}($t),fX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",80),Oe(Ue(r),"incompatibleTokens",["a","b","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"B":case"BB":case"BBB":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(d_(o),0,0,0),i}}]),n}($t),pX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",70),Oe(Ue(r),"incompatibleTokens",["H","K","k","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"h":return fn(En.hour12h,i);case"ho":return o.ordinalNumber(i,{unit:"hour"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):!a&&o===12?i.setUTCHours(0,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}($t),mX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",70),Oe(Ue(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"H":return fn(En.hour23h,i);case"Ho":return o.ordinalNumber(i,{unit:"hour"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,o){return i.setUTCHours(o,0,0,0),i}}]),n}($t),gX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",70),Oe(Ue(r),"incompatibleTokens",["h","H","k","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"K":return fn(En.hour11h,i);case"Ko":return o.ordinalNumber(i,{unit:"hour"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}($t),vX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",70),Oe(Ue(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"k":return fn(En.hour24h,i);case"ko":return o.ordinalNumber(i,{unit:"hour"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,o){var a=o<=24?o%24:o;return i.setUTCHours(a,0,0,0),i}}]),n}($t),yX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",60),Oe(Ue(r),"incompatibleTokens",["t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"m":return fn(En.minute,i);case"mo":return o.ordinalNumber(i,{unit:"minute"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCMinutes(o,0,0),i}}]),n}($t),wX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",50),Oe(Ue(r),"incompatibleTokens",["t","T"]),r}return _t(n,[{key:"parse",value:function(i,s,o){switch(s){case"s":return fn(En.second,i);case"so":return o.ordinalNumber(i,{unit:"second"});default:return _n(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCSeconds(o,0),i}}]),n}($t),bX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",30),Oe(Ue(r),"incompatibleTokens",["t","T"]),r}return _t(n,[{key:"parse",value:function(i,s){var o=function(l){return Math.floor(l*Math.pow(10,-s.length+3))};return Sn(_n(s.length,i),o)}},{key:"set",value:function(i,s,o){return i.setUTCMilliseconds(o),i}}]),n}($t),_X=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",10),Oe(Ue(r),"incompatibleTokens",["t","T","x"]),r}return _t(n,[{key:"parse",value:function(i,s){switch(s){case"X":return Ki(Wi.basicOptionalMinutes,i);case"XX":return Ki(Wi.basic,i);case"XXXX":return Ki(Wi.basicOptionalSeconds,i);case"XXXXX":return Ki(Wi.extendedOptionalSeconds,i);case"XXX":default:return Ki(Wi.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}($t),TX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",10),Oe(Ue(r),"incompatibleTokens",["t","T","X"]),r}return _t(n,[{key:"parse",value:function(i,s){switch(s){case"x":return Ki(Wi.basicOptionalMinutes,i);case"xx":return Ki(Wi.basic,i);case"xxxx":return Ki(Wi.basicOptionalSeconds,i);case"xxxxx":return Ki(Wi.extendedOptionalSeconds,i);case"xxx":default:return Ki(Wi.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}($t),EX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",40),Oe(Ue(r),"incompatibleTokens","*"),r}return _t(n,[{key:"parse",value:function(i){return DO(i)}},{key:"set",value:function(i,s,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),n}($t),SX=function(t){Dt(n,t);var e=Rt(n);function n(){var r;bt(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Oe(Ue(r),"priority",20),Oe(Ue(r),"incompatibleTokens","*"),r}return _t(n,[{key:"parse",value:function(i){return DO(i)}},{key:"set",value:function(i,s,o){return[new Date(o),{timestampIsSet:!0}]}}]),n}($t),CX={G:new HQ,y:new WQ,Y:new KQ,R:new YQ,u:new GQ,Q:new zQ,q:new qQ,M:new QQ,L:new XQ,w:new ZQ,I:new tX,d:new iX,D:new sX,E:new oX,e:new aX,c:new lX,i:new cX,a:new dX,b:new hX,B:new fX,h:new pX,H:new mX,K:new gX,k:new vX,m:new yX,s:new wX,S:new bX,X:new _X,x:new TX,t:new EX,T:new SX},IX=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AX=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kX=/^'([^]*?)'?$/,xX=/''/g,PX=/\S/,DX=/[a-zA-Z]/;function p0(t,e,n,r){var i,s,o,a,l,u,c,d,h,f,p,m,y,_,v,b,g,w;Fe(3,arguments);var T=String(t),M=String(e),x=cs(),A=(i=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:x.locale)!==null&&i!==void 0?i:kO;if(!A.match)throw new RangeError("locale must contain match property");var S=Je((o=(a=(l=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(c=r.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:x.firstWeekContainsDate)!==null&&a!==void 0?a:(h=x.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=Je((p=(m=(y=(_=r==null?void 0:r.weekStartsOn)!==null&&_!==void 0?_:r==null||(v=r.locale)===null||v===void 0||(b=v.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&y!==void 0?y:x.weekStartsOn)!==null&&m!==void 0?m:(g=x.locale)===null||g===void 0||(w=g.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&p!==void 0?p:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(M==="")return T===""?Ye(n):new Date(NaN);var U={firstWeekContainsDate:S,weekStartsOn:N,locale:A},C=[new jQ],H=M.match(AX).map(function(le){var Y=le[0];if(Y in h0){var pe=h0[Y];return pe(le,A.formatLong)}return le}).join("").match(IX),O=[],R=OS(H),W;try{var X=function(){var Y=W.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&AO(Y)&&Ip(Y,M,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&IO(Y)&&Ip(Y,M,t);var pe=Y[0],Se=CX[pe];if(Se){var E=Se.incompatibleTokens;if(Array.isArray(E)){var P=O.find(function(z){return E.includes(z.token)||z.token===pe});if(P)throw new RangeError("The format string mustn't contain `".concat(P.fullToken,"` and `").concat(Y,"` at the same time"))}else if(Se.incompatibleTokens==="*"&&O.length>0)throw new RangeError("The format string mustn't contain `".concat(Y,"` and any other token at the same time"));O.push({token:pe,fullToken:Y});var F=Se.run(T,Y,A.match,U);if(!F)return{v:new Date(NaN)};C.push(F.setter),T=F.rest}else{if(pe.match(DX))throw new RangeError("Format string contains an unescaped latin alphabet character `"+pe+"`");if(Y==="''"?Y="'":pe==="'"&&(Y=RX(Y)),T.indexOf(Y)===0)T=T.slice(Y.length);else return{v:new Date(NaN)}}};for(R.s();!(W=R.n()).done;){var $=X();if(wi($)==="object")return $.v}}catch(le){R.e(le)}finally{R.f()}if(T.length>0&&PX.test(T))return new Date(NaN);var I=C.map(function(le){return le.priority}).sort(function(le,Y){return Y-le}).filter(function(le,Y,pe){return pe.indexOf(le)===Y}).map(function(le){return C.filter(function(Y){return Y.priority===le}).sort(function(Y,pe){return pe.subPriority-Y.subPriority})}).map(function(le){return le[0]}),Z=Ye(n);if(isNaN(Z.getTime()))return new Date(NaN);var ie=_O(Z,Cp(Z)),ee={},V=OS(I),we;try{for(V.s();!(we=V.n()).done;){var B=we.value;if(!B.validate(ie,U))return new Date(NaN);var q=B.set(ie,ee,U);Array.isArray(q)?(ie=q[0],AQ(ee,q[1])):ie=q}}catch(le){V.e(le)}finally{V.f()}return ie}function RX(t){return t.match(kX)[1].replace(xX,"'")}function MS(t,e){Fe(2,arguments);var n=bd(t),r=bd(e);return n.getTime()===r.getTime()}function OX(t,e){Fe(2,arguments);var n=Je(e);return vs(t,-n)}function NX(t,e){var n;Fe(1,arguments);var r=Je((n=e==null?void 0:e.additionalDigits)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=UX(t),s;if(i.date){var o=FX(i.date,r);s=VX(o.restDateString,o.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var a=s.getTime(),l=0,u;if(i.time&&(l=BX(i.time),isNaN(l)))return new Date(NaN);if(i.timezone){if(u=jX(i.timezone),isNaN(u))return new Date(NaN)}else{var c=new Date(a+l),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(a+l+u)}var Zh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},MX=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,LX=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,$X=/^([+-])(\d{2})(?::?(\d{2}))?$/;function UX(t){var e={},n=t.split(Zh.dateTimeDelimiter),r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Zh.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Zh.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var i=Zh.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function FX(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function VX(t,e){if(e===null)return new Date(NaN);var n=t.match(MX);if(!n)return new Date(NaN);var r=!!n[4],i=Xu(n[1]),s=Xu(n[2])-1,o=Xu(n[3]),a=Xu(n[4]),l=Xu(n[5])-1;if(r)return GX(e,a,l)?HX(e,a,l):new Date(NaN);var u=new Date(0);return!KX(e,s,o)||!YX(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}function Xu(t){return t?parseInt(t):1}function BX(t){var e=t.match(LX);if(!e)return NaN;var n=cv(e[1]),r=cv(e[2]),i=cv(e[3]);return zX(n,r,i)?n*u_+r*l_+i*1e3:NaN}function cv(t){return t&&parseFloat(t.replace(",","."))||0}function jX(t){if(t==="Z")return 0;var e=t.match($X);if(!e)return 0;var n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return qX(r,i)?n*(r*u_+i*l_):NaN}function HX(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var WX=[31,null,31,30,31,30,31,31,30,31,30,31];function NO(t){return t%400===0||t%4===0&&t%100!==0}function KX(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(WX[e]||(NO(t)?29:28))}function YX(t,e){return e>=1&&e<=(NO(t)?366:365)}function GX(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function zX(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function qX(t,e){return e>=0&&e<=59}function MO(t,e){Fe(2,arguments);var n=Ye(t),r=Je(e),i=n.getFullYear(),s=n.getDate(),o=new Date(0);o.setFullYear(i,r,15),o.setHours(0,0,0,0);var a=xQ(o);return n.setMonth(r,Math.min(s,a)),n}function nn(t,e){if(Fe(2,arguments),wi(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var n=Ye(t);return isNaN(n.getTime())?new Date(NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=MO(n,e.month)),e.date!=null&&n.setDate(Je(e.date)),e.hours!=null&&n.setHours(Je(e.hours)),e.minutes!=null&&n.setMinutes(Je(e.minutes)),e.seconds!=null&&n.setSeconds(Je(e.seconds)),e.milliseconds!=null&&n.setMilliseconds(Je(e.milliseconds)),n)}function LO(t,e){Fe(2,arguments);var n=Ye(t),r=Je(e);return n.setHours(r),n}function f_(t,e){Fe(2,arguments);var n=Ye(t),r=Je(e);return n.setMilliseconds(r),n}function $O(t,e){Fe(2,arguments);var n=Ye(t),r=Je(e);return n.setMinutes(r),n}function p_(t,e){Fe(2,arguments);var n=Ye(t),r=Je(e);return n.setSeconds(r),n}function Qi(t,e){Fe(2,arguments);var n=Ye(t),r=Je(e);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}function pu(t,e){Fe(2,arguments);var n=Je(e);return Oi(t,-n)}function QX(t,e){if(Fe(2,arguments),!e||wi(e)!=="object")return new Date(NaN);var n=e.years?Je(e.years):0,r=e.months?Je(e.months):0,i=e.weeks?Je(e.weeks):0,s=e.days?Je(e.days):0,o=e.hours?Je(e.hours):0,a=e.minutes?Je(e.minutes):0,l=e.seconds?Je(e.seconds):0,u=pu(t,r+n*12),c=OX(u,s+i*7),d=a+o*60,h=l+d*60,f=h*1e3,p=new Date(c.getTime()-f);return p}function UO(t,e){Fe(2,arguments);var n=Je(e);return a_(t,-n)}function ah(){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[ne("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),ne("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),ne("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),ne("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}ah.compatConfig={MODE:3};function FO(){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[ne("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),ne("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}FO.compatConfig={MODE:3};function m_(){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[ne("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}m_.compatConfig={MODE:3};function g_(){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[ne("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}g_.compatConfig={MODE:3};function v_(){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[ne("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),ne("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}v_.compatConfig={MODE:3};function y_(){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[ne("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}y_.compatConfig={MODE:3};function w_(){return D(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[ne("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}w_.compatConfig={MODE:3};function b_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VO={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(VO);var XX=VO.exports,m0={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var i=Number(r);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}t.exports=e.default})(m0,m0.exports);var JX=m0.exports;const ZX=b_(JX);var g0={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){var i=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return i.setUTCFullYear(r.getFullYear()),r.getTime()-i.getTime()}t.exports=e.default})(g0,g0.exports);var eJ=g0.exports;const LS=b_(eJ);function tJ(t,e){var n=sJ(e);return n.formatToParts?rJ(n,t):iJ(n,t)}var nJ={year:0,month:1,day:2,hour:3,minute:4,second:5};function rJ(t,e){try{for(var n=t.formatToParts(e),r=[],i=0;i<n.length;i++){var s=nJ[n[i].type];s>=0&&(r[s]=parseInt(n[i].value,10))}return r}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function iJ(t,e){var n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var dv={};function sJ(t){if(!dv[t]){var e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=e==="06/25/2014, 00:00:00"||e==="06/25/2014 00:00:00";dv[t]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return dv[t]}function __(t,e,n,r,i,s,o){var a=new Date(0);return a.setUTCFullYear(t,e,n),a.setUTCHours(r,i,s,o),a}var $S=36e5,oJ=6e4,hv={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function T_(t,e,n){var r,i;if(t===""||(r=hv.timezoneZ.exec(t),r))return 0;var s;if(r=hv.timezoneHH.exec(t),r)return s=parseInt(r[1],10),US(s)?-(s*$S):NaN;if(r=hv.timezoneHHMM.exec(t),r){s=parseInt(r[1],10);var o=parseInt(r[2],10);return US(s,o)?(i=Math.abs(s)*$S+o*oJ,s>0?-i:i):NaN}if(uJ(t)){e=new Date(e||Date.now());var a=n?e:aJ(e),l=v0(a,t),u=n?l:lJ(e,l,t);return-u}return NaN}function aJ(t){return __(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function v0(t,e){var n=tJ(t,e),r=__(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=t.getTime(),s=i%1e3;return i-=s>=0?s:1e3+s,r-i}function lJ(t,e,n){var r=t.getTime(),i=r-e,s=v0(new Date(i),n);if(e===s)return e;i-=s-e;var o=v0(new Date(i),n);return s===o?s:Math.max(s,o)}function US(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var FS={};function uJ(t){if(FS[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),FS[t]=!0,!0}catch{return!1}}var BO=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,fv=36e5,VS=6e4,cJ=2,kr={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:BO};function y0(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var n=e||{},r=n.additionalDigits==null?cJ:ZX(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=dJ(t),s=hJ(i.date,r),o=s.year,a=s.restDateString,l=fJ(a,o);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),c=0,d;if(i.time&&(c=pJ(i.time),isNaN(c)))return new Date(NaN);if(i.timeZone||n.timeZone){if(d=T_(i.timeZone||n.timeZone,new Date(u+c)),isNaN(d))return new Date(NaN)}else d=LS(new Date(u+c)),d=LS(new Date(u+c+d));return new Date(u+c+d)}else return new Date(NaN)}function dJ(t){var e={},n=kr.dateTimePattern.exec(t),r;if(n?(e.date=n[1],r=n[3]):(n=kr.datePattern.exec(t),n?(e.date=n[1],r=n[2]):(e.date=null,r=t)),r){var i=kr.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function hJ(t,e){var n=kr.YYY[e],r=kr.YYYYY[e],i;if(i=kr.YYYY.exec(t)||r.exec(t),i){var s=i[1];return{year:parseInt(s,10),restDateString:t.slice(s.length)}}if(i=kr.YY.exec(t)||n.exec(t),i){var o=i[1];return{year:parseInt(o,10)*100,restDateString:t.slice(o.length)}}return{year:null}}function fJ(t,e){if(e===null)return null;var n,r,i,s;if(t.length===0)return r=new Date(0),r.setUTCFullYear(e),r;if(n=kr.MM.exec(t),n)return r=new Date(0),i=parseInt(n[1],10)-1,jS(e,i)?(r.setUTCFullYear(e,i),r):new Date(NaN);if(n=kr.DDD.exec(t),n){r=new Date(0);var o=parseInt(n[1],10);return vJ(e,o)?(r.setUTCFullYear(e,0,o),r):new Date(NaN)}if(n=kr.MMDD.exec(t),n){r=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return jS(e,i,a)?(r.setUTCFullYear(e,i,a),r):new Date(NaN)}if(n=kr.Www.exec(t),n)return s=parseInt(n[1],10)-1,HS(e,s)?BS(e,s):new Date(NaN);if(n=kr.WwwD.exec(t),n){s=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return HS(e,s,l)?BS(e,s,l):new Date(NaN)}return null}function pJ(t){var e,n,r;if(e=kr.HH.exec(t),e)return n=parseFloat(e[1].replace(",",".")),pv(n)?n%24*fv:NaN;if(e=kr.HHMM.exec(t),e)return n=parseInt(e[1],10),r=parseFloat(e[2].replace(",",".")),pv(n,r)?n%24*fv+r*VS:NaN;if(e=kr.HHMMSS.exec(t),e){n=parseInt(e[1],10),r=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return pv(n,r,i)?n%24*fv+r*VS+i*1e3:NaN}return null}function BS(t,e,n){e=e||0,n=n||0;var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,s=e*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var mJ=[31,28,31,30,31,30,31,31,30,31,30,31],gJ=[31,29,31,30,31,30,31,31,30,31,30,31];function jO(t){return t%400===0||t%4===0&&t%100!==0}function jS(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;var r=jO(t);if(r&&n>gJ[e]||!r&&n>mJ[e])return!1}return!0}function vJ(t,e){if(e<1)return!1;var n=jO(t);return!(n&&e>366||!n&&e>365)}function HS(t,e,n){return!(e<0||e>52||n!=null&&(n<0||n>6))}function pv(t,e,n){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}var w0={exports:{}},b0={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s]);return r}t.exports=e.default})(b0,b0.exports);var yJ=b0.exports;(function(t,e){var n=XX.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=n(yJ);function i(s){return(0,r.default)({},s)}t.exports=e.default})(w0,w0.exports);var wJ=w0.exports;const bJ=b_(wJ);function _J(t,e,n){var r=y0(t,n),i=T_(e,r,!0),s=new Date(r.getTime()-i),o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}function TJ(t,e,n){if(typeof t=="string"&&!t.match(BO)){var r=bJ(n);return r.timeZone=e,y0(t,r)}var i=y0(t,n),s=__(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()).getTime(),o=T_(e,new Date(s));return new Date(s+o)}function WS(t){return e=>new Intl.DateTimeFormat(t,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${e}T00:00:00+00:00`)).slice(0,2)}function EJ(t){return e=>bo(new Date(`2017-01-0${e}T00:00:00+00:00`),"EEEEEE",{locale:t})}const SJ=(t,e,n)=>{const r=[1,2,3,4,5,6,7];let i;if(t!==null)try{i=r.map(EJ(t))}catch{i=r.map(WS(e))}else i=r.map(WS(e));const s=i.slice(0,n),o=i.slice(n+1,i.length);return[i[n]].concat(...o).concat(...s)},E_=(t,e)=>{const n=[];for(let r=+t[0];r<=+t[1];r++)n.push({value:+r,text:`${r}`});return e?n.reverse():n},HO=(t,e,n)=>{const r=[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>{const o=s<10?`0${s}`:s;return new Date(`2017-${o}-01T00:00:00+00:00`)});if(t!==null)try{const s=n==="long"?"MMMM":"MMM";return r.map((o,a)=>{const l=bo(o,s,{locale:t});return{text:l.charAt(0).toUpperCase()+l.substring(1),value:a}})}catch{}const i=new Intl.DateTimeFormat(e,{month:n,timeZone:"UTC"});return r.map((s,o)=>{const a=i.format(s);return{text:a.charAt(0).toUpperCase()+a.substring(1),value:o}})},CJ=t=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][t],On=t=>{const e=k(t);return e!=null&&e.$el?e==null?void 0:e.$el:e},IJ=t=>Object.assign({type:"dot"},t),WO=t=>Array.isArray(t)?!!t[0]&&!!t[1]:!1,xp={prop:t=>`"${t}" prop must be enabled!`,dateArr:t=>`You need to use array as "model-value" binding in order to support "${t}"`},$n=t=>t,KS=t=>t===0?t:!t||isNaN(+t)?null:+t,YS=t=>t===null,AJ=t=>{if(t)return[...t.querySelectorAll("input, button, select, textarea, a[href]")][0]},kJ=t=>{const e=[],n=r=>r.filter(i=>i);for(let r=0;r<t.length;r+=3){const i=[t[r],t[r+1],t[r+2]];e.push(n(i))}return e},Ed=(t,e,n)=>{const r=n??n===0,i=e??e===0;if(!r&&!i)return!1;const s=+n,o=+e;return r&&i?+t>s||+t<o:r?+t>s:i?+t<o:!1},mu=(t,e)=>kJ(t).map(n=>n.map(r=>{const{active:i,disabled:s,isBetween:o,highlighted:a}=e(r);return{...r,active:i,disabled:s,className:{dp__overlay_cell_active:i,dp__overlay_cell:!i,dp__overlay_cell_disabled:s,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:s&&i,dp__cell_in_between:o,"dp--highlighted":a}}})),_o=(t,e,n=!1)=>{t&&e.allowStopPropagation&&(n&&t.stopImmediatePropagation(),t.stopPropagation())},xJ=t=>{if(t.nextElementSibling)return t.nextElementSibling;for(;t.parentElement&&!t.parentElement.nextElementSibling;)t=t.parentElement;return t.parentElement?t.parentElement.nextElementSibling:null},PJ=t=>{if(!t)return!1;const e=["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])"],n=t.matches(e.join(", ")),r=t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0;return n&&r},DJ=t=>{if(!t)return null;let e=t;for(;e;)if(e=xJ(e),PJ(e))return e;return null},GS=(t,e,n,r,i)=>{const s=p0(t,e.slice(0,t.length),new Date);return Vc(s)&&wO(s)?r||i?s:nn(s,{hours:+n.hours,minutes:+(n==null?void 0:n.minutes),seconds:+(n==null?void 0:n.seconds),milliseconds:0}):null},RJ=(t,e,n,r,i)=>{const s=Array.isArray(n)?n[0]:n;if(typeof e=="string")return GS(t,e,s,r,i);if(Array.isArray(e)){let o=null;for(const a of e)if(o=GS(t,a,s,r,i),o)break;return o}return typeof e=="function"?e(t):null},_e=t=>t?new Date(t):new Date,OJ=(t,e,n)=>{if(e){const i=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getDate().toString().padStart(2,"0"),o=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0"),l=n?t.getSeconds().toString().padStart(2,"0"):"00";return`${t.getFullYear()}-${i}-${s}T${o}:${a}:${l}.000Z`}const r=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());return new Date(r).toISOString()},zr=t=>{let e=_e(JSON.parse(JSON.stringify(t)));return e=LO(e,0),e=$O(e,0),e=p_(e,0),e=f_(e,0),e},To=(t,e,n,r)=>{let i=t?_e(t):_e();return(e||e===0)&&(i=LO(i,+e)),(n||n===0)&&(i=$O(i,+n)),(r||r===0)&&(i=p_(i,+r)),f_(i,0)},er=(t,e)=>!t||!e?!1:Td(zr(t),zr(e)),Nt=(t,e)=>!t||!e?!1:kl(zr(t),zr(e)),gr=(t,e)=>!t||!e?!1:_d(zr(t),zr(e)),zm=(t,e,n)=>t!=null&&t[0]&&t!=null&&t[1]?gr(n,t[0])&&er(n,t[1]):t!=null&&t[0]&&e?gr(n,t[0])&&er(n,e)||er(n,t[0])&&gr(n,e):!1,ki=t=>{const e=nn(new Date(t),{date:1});return zr(e)},mv=(t,e,n)=>e&&(n||n===0)?Object.fromEntries(["hours","minutes","seconds"].map(r=>r===e?[r,n]:[r,isNaN(+t[r])?void 0:+t[r]])):{hours:isNaN(+t.hours)?void 0:+t.hours,minutes:isNaN(+t.minutes)?void 0:+t.minutes,seconds:isNaN(+t.seconds)?void 0:+t.seconds},ya=t=>({hours:Ni(t),minutes:rs(t),seconds:fu(t)}),KO=(t,e)=>{if(e){const n=ht(_e(e));if(n>t)return 12;if(n===t)return At(_e(e))}},YO=(t,e)=>{if(e){const n=ht(_e(e));return n<t?-1:n===t?At(_e(e)):void 0}},gu=t=>{if(t)return ht(_e(t))},pi=(t,e)=>e?_J(t,e):t,GO=(t,e)=>e?TJ(t,e):t,zS=t=>t instanceof Date?t:NX(t),zO=(t,e)=>{const n=gr(t,e)?e:t,r=gr(e,t)?e:t;return bO({start:n,end:r})},NJ=t=>{const e=Oi(t,1);return{month:At(e),year:ht(e)}},bf=(t,e,n)=>{const r=Ua(pi(t,e),{weekStartsOn:+n}),i=Eq(pi(t,e),{weekStartsOn:+n});return[r,i]},qO=(t,e)=>{const n={hours:Ni(_e()),minutes:rs(_e()),seconds:e?fu(_e()):0};return Object.assign(n,t)},co=(t,e,n)=>[nn(_e(t),{date:1}),nn(_e(),{month:e,year:n,date:1})],Ts=(t,e,n)=>{let r=t?_e(t):_e();return(e||e===0)&&(r=MO(r,e)),n&&(r=Qi(r,n)),r},QO=(t,e,n,r,i)=>{if(!r||i&&!e||!i&&!n)return!1;const s=i?Oi(t,1):pu(t,1),o=[At(s),ht(s)];return i?!LJ(...o,e):!MJ(...o,n)},MJ=(t,e,n)=>er(...co(n,t,e))||Nt(...co(n,t,e)),LJ=(t,e,n)=>gr(...co(n,t,e))||Nt(...co(n,t,e)),XO=(t,e,n,r,i,s,o)=>{if(typeof e=="function"&&!o)return e(t);const a=n?{locale:n}:void 0;return Array.isArray(t)?`${bo(t[0],s,a)}${i&&!t[1]?"":r}${t[1]?bo(t[1],s,a):""}`:bo(t,s,a)},dl=t=>{if(t)return null;throw new Error(xp.prop("partial-range"))},ef=(t,e)=>{if(e)return t();throw new Error(xp.prop("range"))},_0=t=>Array.isArray(t)?Vc(t[0])&&(t[1]?Vc(t[1]):!0):t?Vc(t):!1,$J=(t,e)=>nn(e??_e(),{hours:+t.hours||0,minutes:+t.minutes||0,seconds:+t.seconds||0}),gv=(t,e,n,r)=>{if(!t)return!0;if(r){const i=n==="max"?Td(t,e):_d(t,e),s={seconds:0,milliseconds:0};return i||kl(nn(t,s),nn(e,s))}return n==="max"?t.getTime()<=e.getTime():t.getTime()>=e.getTime()},vv=(t,e,n)=>t?$J(t,e):_e(n??e),qS=(t,e,n,r,i)=>{if(Array.isArray(r)){const o=vv(t,r[0],e),a=vv(t,r[1],e);return gv(r[0],o,n,!!e)&&gv(r[1],a,n,!!e)&&i}const s=vv(t,r,e);return gv(r,s,n,!!e)&&i},yv=t=>nn(_e(),ya(t)),UJ=(t,e)=>Array.isArray(t)?t.map(n=>_e(n)).filter(n=>ht(_e(n))===e).map(n=>At(n)):[],JO=(t,e,n)=>typeof t=="function"?t({month:e,year:n}):!!t.months.find(r=>r.month===e&&r.year===n),S_=(t,e)=>typeof t=="function"?t(e):t.years.includes(e),Ju=Ln({menuFocused:!1,shiftKeyInMenu:!1}),ZO=()=>{const t=n=>{Ju.menuFocused=n},e=n=>{Ju.shiftKeyInMenu!==n&&(Ju.shiftKeyInMenu=n)};return{control:re(()=>({shiftKeyInMenu:Ju.shiftKeyInMenu,menuFocused:Ju.menuFocused})),setMenuFocused:t,setShiftKey:e}},Jt=Ln({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),wv=ue(null),tf=ue(!1),bv=ue(!1),_v=ue(!1),Tv=ue(!1),Sr=ue(0),zn=ue(0),Bo=()=>{const t=re(()=>tf.value?[...Jt.selectionGrid,Jt.actionRow].filter(d=>d.length):bv.value?[...Jt.timePicker[0],...Jt.timePicker[1],Tv.value?[]:[wv.value],Jt.actionRow].filter(d=>d.length):_v.value?[...Jt.monthPicker,Jt.actionRow]:[Jt.monthYear,...Jt.calendar,Jt.time,Jt.actionRow].filter(d=>d.length)),e=d=>{Sr.value=d?Sr.value+1:Sr.value-1;let h=null;t.value[zn.value]&&(h=t.value[zn.value][Sr.value]),h||(Sr.value=d?Sr.value-1:Sr.value+1)},n=d=>{zn.value===0&&!d||zn.value===t.value.length&&d||(zn.value=d?zn.value+1:zn.value-1,t.value[zn.value]?t.value[zn.value]&&!t.value[zn.value][Sr.value]&&Sr.value!==0&&(Sr.value=t.value[zn.value].length-1):zn.value=d?zn.value-1:zn.value+1)},r=d=>{let h=null;t.value[zn.value]&&(h=t.value[zn.value][Sr.value]),h?h.focus({preventScroll:!tf.value}):Sr.value=d?Sr.value-1:Sr.value+1},i=()=>{e(!0),r(!0)},s=()=>{e(!1),r(!1)},o=()=>{n(!1),r(!0)},a=()=>{n(!0),r(!0)},l=(d,h)=>{Jt[h]=d},u=(d,h)=>{Jt[h]=d},c=()=>{Sr.value=0,zn.value=0};return{buildMatrix:l,buildMultiLevelMatrix:u,setTimePickerBackRef:d=>{wv.value=d},setSelectionGrid:d=>{tf.value=d,c(),d||(Jt.selectionGrid=[])},setTimePicker:(d,h=!1)=>{bv.value=d,Tv.value=h,c(),d||(Jt.timePicker[0]=[],Jt.timePicker[1]=[])},setTimePickerElements:(d,h=0)=>{Jt.timePicker[h]=d},arrowRight:i,arrowLeft:s,arrowUp:o,arrowDown:a,clearArrowNav:()=>{Jt.monthYear=[],Jt.calendar=[],Jt.time=[],Jt.actionRow=[],Jt.selectionGrid=[],Jt.timePicker[0]=[],Jt.timePicker[1]=[],tf.value=!1,bv.value=!1,Tv.value=!1,_v.value=!1,c(),wv.value=null},setMonthPicker:d=>{_v.value=d,c()},refSets:Jt}},QS=t=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...t??{}}),FJ=t=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",calendarWrap:"Calendar wrapper",calendarDays:"Calendar days",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:e=>`Increment ${e}`,decrementValue:e=>`Decrement ${e}`,openTpOverlay:e=>`Open ${e} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:()=>"",...t??{}}),XS=t=>t?typeof t=="boolean"?t?2:0:+t>=2?+t:2:0,VJ=t=>{const e=typeof t=="object"&&t,n={static:!0,solo:!1};if(!t)return{...n,count:XS(!1)};const r=e?t:{},i=e?r.count??!0:t,s=XS(i);return Object.assign(n,r,{count:s})},BJ=(t,e,n)=>t||(typeof n=="string"?n:e),jJ=t=>typeof t=="boolean"?t?QS({}):!1:QS(t),HJ=t=>{const e={enterSubmit:!0,tabSubmit:!0,openMenu:!0,selectOnFocus:!1,rangeSeparator:" - "};return typeof t=="object"?{...e,...t??{},enabled:!0}:{...e,enabled:t}},WJ=t=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...t??{}}),KJ=t=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...t??{}}),YJ=t=>{const e={input:!1};return typeof t=="object"?{...e,...t??{},enabled:!0}:{enabled:t,...e}},GJ=t=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,...t??{}}),zJ=(t,e,n)=>{const r={dates:Array.isArray(t)?t.map(i=>_e(i)):[],years:[],months:[],quarters:[],weeks:[],weekdays:e,options:{highlightDisabled:n}};return typeof t=="function"?t:{...r,...t??{}}},Cn=t=>{const e=()=>{const y=t.enableSeconds?":ss":"";return t.is24?`HH:mm${y}`:`hh:mm${y} aa`},n=()=>t.format?t.format:t.monthPicker?"MM/yyyy":t.timePicker?e():t.weekPicker?"MM/dd/yyyy":t.yearPicker?"yyyy":t.quarterPicker?"QQQ/yyyy":t.enableTimePicker?`MM/dd/yyyy, ${e()}`:"MM/dd/yyyy",r=y=>qO(y,t.enableSeconds),i=()=>t.range?t.startTime&&Array.isArray(t.startTime)?[r(t.startTime[0]),r(t.startTime[1])]:null:t.startTime&&!Array.isArray(t.startTime)?r(t.startTime):null,s=re(()=>VJ(t.multiCalendars)),o=re(()=>i()),a=re(()=>FJ(t.ariaLabels)),l=re(()=>WJ(t.filters)),u=re(()=>jJ(t.transitions)),c=re(()=>KJ(t.actionRow)),d=re(()=>BJ(t.previewFormat,t.format,n())),h=re(()=>HJ(t.textInput)),f=re(()=>YJ(t.inline)),p=re(()=>GJ(t.config)),m=re(()=>zJ(t.highlight,t.highlightWeekDays,t.highlightDisabledDays));return{defaultedTransitions:u,defaultedMultiCalendars:s,defaultedStartTime:o,defaultedAriaLabels:a,defaultedFilters:l,defaultedActionRow:c,defaultedPreviewFormat:d,defaultedTextInput:h,defaultedInline:f,defaultedConfig:p,defaultedHighlight:m,getDefaultPattern:n,getDefaultStartTime:i}},qJ=(t,e,n)=>{const r=ue(),{defaultedTextInput:i,getDefaultPattern:s}=Cn(e),o=ue(""),a=Kl(e,"format");pn(r,()=>{t("internal-model-change",r.value)}),pn(a,()=>{H()});const l=I=>GO(I,e.timezone),u=I=>pi(I,e.timezone),c=(I,Z,ie=!1)=>XO(I,e.format,e.formatLocale,i.value.rangeSeparator,e.modelAuto,Z??s(),ie),d=I=>I?e.modelType?R(I):{hours:Ni(I),minutes:rs(I),seconds:e.enableSeconds?fu(I):0}:null,h=I=>e.modelType?R(I):{month:At(I),year:ht(I)},f=I=>Array.isArray(I)?e.multiDates?I.map(Z=>p(Z,Qi(_e(),Z))):ef(()=>[Qi(_e(),I[0]),I[1]?Qi(_e(),I[1]):dl(e.partialRange)],e.range):Qi(_e(),+I),p=(I,Z)=>(typeof I=="string"||typeof I=="number")&&e.modelType?O(I):Z,m=I=>Array.isArray(I)?[p(I[0],To(null,+I[0].hours,+I[0].minutes,I[0].seconds)),p(I[1],To(null,+I[1].hours,+I[1].minutes,I[1].seconds))]:p(I,To(null,I.hours,I.minutes,I.seconds)),y=I=>Array.isArray(I)?e.multiDates?I.map(Z=>p(Z,Ts(null,+Z.month,+Z.year))):ef(()=>[p(I[0],Ts(null,+I[0].month,+I[0].year)),p(I[1],I[1]?Ts(null,+I[1].month,+I[1].year):dl(e.partialRange))],e.range):p(I,Ts(null,+I.month,+I.year)),_=I=>{if(Array.isArray(I))return I.map(Z=>O(Z));throw new Error(xp.dateArr("multi-dates"))},v=I=>{if(Array.isArray(I))return[_e(I[0]),_e(I[1])];throw new Error(xp.dateArr("week-picker"))},b=I=>e.modelAuto?Array.isArray(I)?[O(I[0]),O(I[1])]:e.autoApply?[O(I)]:[O(I),null]:Array.isArray(I)?ef(()=>[O(I[0]),I[1]?O(I[1]):dl(e.partialRange)],e.range):O(I),g=()=>{Array.isArray(r.value)&&e.range&&r.value.length===1&&r.value.push(dl(e.partialRange))},w=()=>{const I=r.value;return[R(I[0]),I[1]?R(I[1]):dl(e.partialRange)]},T=()=>r.value[1]?w():R($n(r.value[0])),M=()=>(r.value||[]).map(I=>R(I)),x=()=>(g(),e.modelAuto?T():e.multiDates?M():Array.isArray(r.value)?ef(()=>w(),e.range):R($n(r.value))),A=I=>!I||Array.isArray(I)&&!I.length?null:e.timePicker?m($n(I)):e.monthPicker?y($n(I)):e.yearPicker?f($n(I)):e.multiDates?_($n(I)):e.weekPicker?v($n(I)):b($n(I)),S=I=>{const Z=A(I);_0($n(Z))?(r.value=$n(Z),H()):(r.value=null,o.value="")},N=()=>{const I=Z=>bo(Z,i.value.format);return`${I(r.value[0])} ${i.value.rangeSeparator} ${r.value[1]?I(r.value[1]):""}`},U=()=>n.value&&r.value?Array.isArray(r.value)?N():bo(r.value,i.value.format):c(r.value),C=()=>r.value?e.multiDates?r.value.map(I=>c(I)).join("; "):i.value.enabled&&typeof i.value.format=="string"?U():c(r.value):"",H=()=>{!e.format||typeof e.format=="string"||i.value.enabled&&typeof i.value.format=="string"?o.value=C():o.value=e.format(r.value)},O=I=>{if(e.utc){const Z=new Date(I);return e.utc==="preserve"?new Date(Z.getTime()+Z.getTimezoneOffset()*6e4):Z}return e.modelType?e.modelType==="date"||e.modelType==="timestamp"?u(new Date(I)):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?p0(I,s(),new Date):u(p0(I,e.modelType,new Date)):u(new Date(I))},R=I=>I?e.utc?OJ(I,e.utc==="preserve",e.enableSeconds):e.modelType?e.modelType==="timestamp"?+l(I):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?c(l(I)):c(l(I),e.modelType,!0):l(I):"",W=(I,Z=!1)=>{if(t("update:model-value",I),e.emitTimezone&&Z){const ie=Array.isArray(I)?I.map(ee=>pi($n(ee)),e.emitTimezone):pi($n(I),e.emitTimezone);t("update:model-timezone-value",ie)}},X=I=>Array.isArray(r.value)?e.multiDates?r.value.map(Z=>I(Z)):[I(r.value[0]),r.value[1]?I(r.value[1]):dl(e.partialRange)]:I($n(r.value)),$=I=>W($n(X(I)));return{inputValue:o,internalModelValue:r,checkBeforeEmit:()=>r.value?e.range?e.partialRange?r.value.length>=1:r.value.length===2:!!r.value:!1,parseExternalModelValue:S,formatInputValue:H,emitModelValue:()=>(H(),e.monthPicker?$(h):e.timePicker?$(d):e.yearPicker?$(ht):e.weekPicker?W(r.value.map(I=>R(I)),!0):W(x(),!0))}},QJ=(t,e)=>{const{defaultedFilters:n}=Cn(t),{validateMonthYearInRange:r}=Ou(t),i=(u,c)=>{let d=u;return n.value.months.includes(At(d))?(d=c?Oi(u,1):pu(u,1),i(d,c)):d},s=(u,c)=>{let d=u;return n.value.years.includes(ht(d))?(d=c?a_(u,1):UO(u,1),s(d,c)):d},o=(u,c=!1)=>{const d=nn(new Date,{month:t.month,year:t.year});let h=u?Oi(d,1):pu(d,1);t.disableYearSelect&&(h=Qi(h,t.year));let f=At(h),p=ht(h);n.value.months.includes(f)&&(h=i(h,u),f=At(h),p=ht(h)),n.value.years.includes(p)&&(h=s(h,u),p=ht(h)),r(f,p,u,t.preventMinMaxNavigation)&&a(f,p,c)},a=(u,c,d)=>{e("update-month-year",{month:u,year:c,fromNav:d})},l=re(()=>u=>QO(nn(new Date,{month:t.month,year:t.year}),t.maxDate,t.minDate,t.preventMinMaxNavigation,u));return{handleMonthYearChange:o,isDisabled:l,updateMonthYear:a}};var bl=(t=>(t.center="center",t.left="left",t.right="right",t))(bl||{}),Ti=(t=>(t.month="month",t.year="year",t))(Ti||{}),Jo=(t=>(t.top="top",t.bottom="bottom",t))(Jo||{}),wa=(t=>(t.header="header",t.calendar="calendar",t.timePicker="timePicker",t))(wa||{}),Bi=(t=>(t.month="month",t.year="year",t.calendar="calendar",t.time="time",t.minutes="minutes",t.hours="hours",t.seconds="seconds",t))(Bi||{});const XJ=({menuRef:t,menuRefInner:e,inputRef:n,pickerWrapperRef:r,inline:i,emit:s,props:o,slots:a})=>{const l=ue({}),u=ue(!1),c=ue({top:"0",left:"0"}),d=ue(!1),h=Kl(o,"teleportCenter");pn(h,()=>{c.value=JSON.parse(JSON.stringify({})),g()});const f=O=>{if(o.teleport){const R=O.getBoundingClientRect();return{left:R.left+window.scrollX,top:R.top+window.scrollY}}return{top:0,left:0}},p=(O,R)=>{c.value.left=`${O+R-l.value.width}px`},m=O=>{c.value.left=`${O}px`},y=(O,R)=>{o.position===bl.left&&m(O),o.position===bl.right&&p(O,R),o.position===bl.center&&(c.value.left=`${O+R/2-l.value.width/2}px`)},_=O=>{const{width:R,height:W}=O.getBoundingClientRect(),{top:X,left:$}=o.altPosition?o.altPosition(O):f(O);return{top:+X,left:+$,width:R,height:W}},v=()=>{c.value.left="50%",c.value.top="50%",c.value.transform="translate(-50%, -50%)",c.value.position="fixed",delete c.value.opacity},b=()=>{const O=On(n),{top:R,left:W,transform:X}=o.altPosition(O);c.value={top:`${R}px`,left:`${W}px`,transform:X??""}},g=(O=!0)=>{var R;if(!i.value.enabled){if(h.value)return v();if(o.altPosition!==null)return b();if(O){const W=o.teleport?(R=e.value)==null?void 0:R.$el:t.value;W&&(l.value=W.getBoundingClientRect()),s("recalculate-position")}return N()}},w=({inputEl:O,left:R,width:W})=>{window.screen.width>768&&!u.value&&y(R,W),x(O)},T=O=>{const{top:R,left:W,height:X,width:$}=_(O);c.value.top=`${X+R+ +o.offset}px`,d.value=!1,u.value||(c.value.left=`${W+$/2-l.value.width/2}px`),w({inputEl:O,left:W,width:$})},M=O=>{const{top:R,left:W,width:X}=_(O);c.value.top=`${R-+o.offset-l.value.height}px`,d.value=!0,w({inputEl:O,left:W,width:X})},x=O=>{if(o.autoPosition){const{left:R,width:W}=_(O),{left:X,right:$}=l.value;if(!u.value){if(Math.abs(X)!==Math.abs($)){if(X<=0)return u.value=!0,m(R);if($>=document.documentElement.clientWidth)return u.value=!0,p(R,W)}return y(R,W)}}},A=()=>{const O=On(n);if(O){const{height:R}=l.value,{top:W,height:X}=O.getBoundingClientRect(),$=window.innerHeight-W-X,I=W;return R<=$?Jo.bottom:R>$&&R<=I?Jo.top:$>=I?Jo.bottom:Jo.top}return Jo.bottom},S=O=>A()===Jo.bottom?T(O):M(O),N=()=>{const O=On(n);if(O)return o.autoPosition?S(O):T(O)},U=function(O){if(O){const R=O.scrollHeight>O.clientHeight,W=window.getComputedStyle(O).overflowY.indexOf("hidden")!==-1;return R&&!W}return!0},C=function(O){return!O||O===document.body||O.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:U(O)?O:C(O.parentNode)},H=O=>{if(O)switch(o.position){case bl.left:return{left:0,transform:"translateX(0)"};case bl.right:return{left:`${O.width}px`,transform:"translateX(-100%)"};default:return{left:`${O.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:d,menuStyle:c,xCorrect:u,setMenuPosition:g,getScrollableParent:C,shadowRender:(O,R)=>{var W,X,$;const I=document.createElement("div"),Z=(W=On(n))==null?void 0:W.getBoundingClientRect();I.setAttribute("id","dp--temp-container");const ie=(X=r.value)!=null&&X.clientWidth?r.value:document.body;ie.append(I);const ee=document.getElementById("dp--temp-container"),V=H(Z),we=Dd(O,{...R,shadow:!0,style:{opacity:0,position:"absolute",...V}},Object.fromEntries(Object.keys(a).filter(B=>["right-sidebar","left-sidebar"].includes(B)).map(B=>[B,a[B]])));Qc(we,ee),l.value=($=we.el)==null?void 0:$.getBoundingClientRect(),Qc(null,ee),ie.removeChild(ee)}}},zs=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]}],JJ=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],ZJ={all:()=>zs,monthYear:()=>zs.filter(t=>t.use.includes("month-year")),input:()=>JJ,timePicker:()=>zs.filter(t=>t.use.includes("time")),action:()=>zs.filter(t=>t.use.includes("action")),calendar:()=>zs.filter(t=>t.use.includes("calendar")),menu:()=>zs.filter(t=>t.use.includes("menu")),shared:()=>zs.filter(t=>t.use.includes("shared")),yearMode:()=>zs.filter(t=>t.use.includes("year-mode"))},ti=(t,e,n)=>{const r=[];return ZJ[e]().forEach(i=>{t[i.name]&&r.push(i.name)}),n!=null&&n.length&&n.forEach(i=>{i.slot&&r.push(i.slot)}),r},lh=t=>{const e=re(()=>r=>t.value?r?t.value.open:t.value.close:""),n=re(()=>r=>t.value?r?t.value.menuAppearTop:t.value.menuAppearBottom:"");return{transitionName:e,showTransition:!!t.value,menuTransition:n}},uh=(t,e)=>{const n=_e(pi(new Date,t.timezone)),r=ue([{month:At(n),year:ht(n)}]),i=Ln({hours:t.range?[Ni(n),Ni(n)]:Ni(n),minutes:t.range?[rs(n),rs(n)]:rs(n),seconds:t.range?[0,0]:0}),s=re({get:()=>t.internalModelValue,set:l=>{!t.readonly&&!t.disabled&&e("update:internal-model-value",l)}}),o=re(()=>l=>r.value[l]?r.value[l].month:0),a=re(()=>l=>r.value[l]?r.value[l].year:0);return{calendars:r,time:i,modelValue:s,month:o,year:a}},eZ=(t,e)=>{const{defaultedMultiCalendars:n,defaultedHighlight:r}=Cn(e),{isDisabled:i,matchDate:s}=Ou(e),o=ue(null),a=ue(_e(pi(new Date,e.timezone))),l=$=>{!$.current&&e.hideOffsetDates||(o.value=$.value)},u=()=>{o.value=null},c=$=>Array.isArray(t.value)&&e.range&&t.value[0]&&o.value?$?gr(o.value,t.value[0]):er(o.value,t.value[0]):!0,d=($,I)=>{const Z=()=>t.value?I?t.value[0]||null:t.value[1]:null,ie=t.value&&Array.isArray(t.value)?Z():null;return Nt(_e($.value),ie)},h=$=>{const I=Array.isArray(t.value)?t.value[0]:null;return $?!er(o.value??null,I):!0},f=($,I=!0)=>(e.range||e.weekPicker)&&Array.isArray(t.value)&&t.value.length===2?e.hideOffsetDates&&!$.current?!1:Nt(_e($.value),t.value[I?0:1]):e.range?d($,I)&&h(I)||Nt($.value,Array.isArray(t.value)?t.value[0]:null)&&c(I):!1,p=($,I,Z)=>Array.isArray(t.value)&&t.value[0]&&t.value.length===1?$?!1:Z?gr(t.value[0],I.value):er(t.value[0],I.value):!1,m=$=>!t.value||e.hideOffsetDates&&!$.current?!1:e.range?e.modelAuto&&Array.isArray(t.value)?Nt($.value,t.value[0]?t.value[0]:a.value):!1:e.multiDates&&Array.isArray(t.value)?t.value.some(I=>Nt(I,$.value)):Nt($.value,t.value?t.value:a.value),y=$=>{if(e.autoRange||e.weekPicker){if(o.value){if(e.hideOffsetDates&&!$.current)return!1;const I=vs(o.value,+e.autoRange),Z=bf(_e(o.value),e.timezone,e.weekStart);return e.weekPicker?Nt(Z[1],_e($.value)):Nt(I,_e($.value))}return!1}return!1},_=$=>{if(e.autoRange||e.weekPicker){if(o.value){const I=vs(o.value,+e.autoRange);if(e.hideOffsetDates&&!$.current)return!1;const Z=bf(_e(o.value),e.timezone,e.weekStart);return e.weekPicker?gr($.value,Z[0])&&er($.value,Z[1]):gr($.value,o.value)&&er($.value,I)}return!1}return!1},v=$=>{if(e.autoRange||e.weekPicker){if(o.value){if(e.hideOffsetDates&&!$.current)return!1;const I=bf(_e(o.value),e.timezone,e.weekStart);return e.weekPicker?Nt(I[0],$.value):Nt(o.value,$.value)}return!1}return!1},b=$=>zm(t.value,o.value,$.value),g=()=>e.modelAuto&&Array.isArray(e.internalModelValue)?!!e.internalModelValue[0]:!1,w=()=>e.modelAuto?WO(e.internalModelValue):!0,T=$=>{if(Array.isArray(t.value)&&t.value.length||e.weekPicker)return!1;const I=e.range?!f($)&&!f($,!1):!0;return!i($.value)&&!m($)&&!(!$.current&&e.hideOffsetDates)&&I},M=$=>e.range?e.modelAuto?g()&&m($):!1:m($),x=$=>{var I;return r.value?typeof r.value=="function"?r.value($.value):s($.value,(I=e.arrMapValues)!=null&&I.highlightedDates?e.arrMapValues.highlightedDates:r.value.dates):!1},A=$=>{const I=i($.value);return I&&(typeof r.value=="function"?!r.value($.value,I):!r.value.options.highlightDisabled)},S=$=>{var I;return typeof r.value=="function"?r.value($.value):(I=r.value.weekdays)==null?void 0:I.includes($.value.getDay())},N=$=>(e.range||e.weekPicker)&&(!(n.value.count>0)||$.current)&&w()&&!(!$.current&&e.hideOffsetDates)&&!m($)?b($):!1,U=$=>{const{isRangeStart:I,isRangeEnd:Z}=O($),ie=e.range?I||Z:!1;return{dp__cell_offset:!$.current,dp__pointer:!e.disabled&&!(!$.current&&e.hideOffsetDates)&&!i($.value),dp__cell_disabled:i($.value),dp__cell_highlight:!A($)&&(x($)||S($))&&!M($)&&!ie&&!v($)&&!(N($)&&e.weekPicker)&&!Z,dp__cell_highlight_active:!A($)&&(x($)||S($))&&M($),dp__today:!e.noToday&&Nt($.value,a.value)&&$.current}},C=$=>({dp__active_date:M($),dp__date_hover:T($)}),H=$=>({...R($),...W($),dp__range_between_week:N($)&&e.weekPicker}),O=$=>{const I=n.value.count>0?$.current&&f($)&&w():f($)&&w(),Z=n.value.count>0?$.current&&f($,!1)&&w():f($,!1)&&w();return{isRangeStart:I,isRangeEnd:Z}},R=$=>{const{isRangeStart:I,isRangeEnd:Z}=O($);return{dp__range_start:I,dp__range_end:Z,dp__range_between:N($)&&!e.weekPicker,dp__date_hover_start:p(T($),$,!0),dp__date_hover_end:p(T($),$,!1)}},W=$=>({...R($),dp__cell_auto_range:_($),dp__cell_auto_range_start:v($),dp__cell_auto_range_end:y($)}),X=$=>e.range?e.autoRange?W($):e.modelAuto?{...C($),...R($)}:R($):e.weekPicker?H($):C($);return{setHoverDate:l,clearHoverDate:u,getDayClassData:$=>e.hideOffsetDates&&!$.current?{}:{...U($),...X($),[e.dayClass?e.dayClass($.value):""]:!0,[e.calendarCellClassName]:!!e.calendarCellClassName}}},Ou=t=>{const{defaultedFilters:e,defaultedHighlight:n}=Cn(t),r=()=>{if(t.timezone)return t.timezone;if(t.utc)return"UTC"},i=S=>{const N=zr(s(_e(S))).toISOString(),[U]=N.split("T");return U},s=S=>t.utc==="preserve"?GO(S,r()):pi(S,r()),o=S=>{var N;const U=t.maxDate?gr(s(S),s(_e(t.maxDate))):!1,C=t.minDate?er(s(S),s(_e(t.minDate))):!1,H=c(s(S),(N=t.arrMapValues)!=null&&N.disabledDates?t.arrMapValues.disabledDates:t.disabledDates),O=e.value.months.map(I=>+I).includes(At(S)),R=t.disabledWeekDays.length?t.disabledWeekDays.some(I=>+I===kQ(S)):!1,W=h(S),X=ht(S),$=X<+t.yearRange[0]||X>+t.yearRange[1];return!(U||C||H||O||$||R||W)},a=(S,N)=>er(...co(t.minDate,S,N))||Nt(...co(t.minDate,S,N)),l=(S,N)=>gr(...co(t.maxDate,S,N))||Nt(...co(t.maxDate,S,N)),u=(S,N,U)=>{let C=!1;return t.maxDate&&U&&l(S,N)&&(C=!0),t.minDate&&!U&&a(S,N)&&(C=!0),C},c=(S,N)=>S?N instanceof Map?!!N.get(i(S)):Array.isArray(N)?N.some(U=>Nt(s(_e(U)),s(S))):N?N(_e(JSON.parse(JSON.stringify(S)))):!1:!0,d=(S,N,U,C)=>{let H=!1;return C?t.minDate&&t.maxDate?H=u(S,N,U):(t.minDate&&a(S,N)||t.maxDate&&l(S,N))&&(H=!0):H=!0,H},h=S=>{var N,U,C,H,O;return Array.isArray(t.allowedDates)&&!((N=t.allowedDates)!=null&&N.length)?!0:(U=t.arrMapValues)!=null&&U.allowedDates?!c(S,(C=t.arrMapValues)==null?void 0:C.allowedDates):(H=t.allowedDates)!=null&&H.length?!((O=t.allowedDates)!=null&&O.some(R=>Nt(s(_e(R)),s(S)))):!1},f=S=>!o(S),p=S=>t.noDisabledRange?!bO({start:S[0],end:S[1]}).some(N=>f(N)):!0,m=(S,N,U=0)=>{if(Array.isArray(N)&&N[U]){const C=vq(S,N[U]),H=zO(N[U],S),O=H.length===1?0:H.filter(W=>f(W)).length,R=Math.abs(C)-O;if(t.minRange&&t.maxRange)return R>=+t.minRange&&R<=+t.maxRange;if(t.minRange)return R>=+t.minRange;if(t.maxRange)return R<=+t.maxRange}return!0},y=S=>new Map(S.map(N=>[i(N),!0])),_=S=>Array.isArray(S)&&S.length>0,v=()=>{const S={disabledDates:null,allowedDates:null,highlightedDates:null};return _(t.allowedDates)&&(S.allowedDates=y(t.allowedDates)),typeof n.value!="function"&&_(n.value.dates)&&(S.highlightedDates=y(n.value.dates)),_(t.disabledDates)&&(S.disabledDates=y(t.disabledDates)),S},b=()=>!t.enableTimePicker||t.monthPicker||t.yearPicker||t.ignoreTimeValidation,g=S=>Array.isArray(S)?[S[0]?yv(S[0]):null,S[1]?yv(S[1]):null]:yv(S),w=(S,N,U)=>S.find(C=>+C.hours===Ni(N)&&C.minutes==="*"?!0:+C.minutes===rs(N)&&+C.hours===Ni(N))&&U,T=(S,N,U)=>{const[C,H]=S,[O,R]=N;return!w(C,O,U)&&!w(H,R,U)&&U},M=(S,N)=>{const U=Array.isArray(N)?N:[N];return Array.isArray(t.disabledTimes)?Array.isArray(t.disabledTimes[0])?T(t.disabledTimes,U,S):!U.some(C=>w(t.disabledTimes,C,S)):S},x=(S,N)=>{const U=Array.isArray(N)?[ya(N[0]),N[1]?ya(N[1]):void 0]:ya(N),C=!t.disabledTimes(U);return S&&C},A=(S,N)=>t.disabledTimes?Array.isArray(t.disabledTimes)?M(N,S):x(N,S):N;return{isDisabled:f,validateDate:o,validateMonthYearInRange:d,isDateRangeAllowed:p,checkMinMaxRange:m,matchDate:c,mapDatesArrToMap:v,isValidTime:S=>{let N=!0;if(!S||b())return!0;const U=!t.minDate&&!t.maxDate?g(S):S;return(t.maxTime||t.maxDate)&&(N=qS(t.maxTime,t.maxDate,"max",$n(U),N)),(t.minTime||t.minDate)&&(N=qS(t.minTime,t.minDate,"min",$n(U),N)),A(S,N)}}},qm=()=>{const t=re(()=>(r,i)=>r==null?void 0:r.includes(i)),e=re(()=>(r,i)=>r.count?r.solo?!0:i===0:!0),n=re(()=>(r,i)=>r.count?r.solo?!0:i===r.count-1:!0);return{hideNavigationButtons:t,showLeftIcon:e,showRightIcon:n}},tZ=(t,e,n)=>{const r=ue(0),i=Ln({[wa.timePicker]:!t.enableTimePicker||t.timePicker||t.monthPicker,[wa.calendar]:!1,[wa.header]:!1}),s=(...c)=>{var d;(d=t.flow)!=null&&d.length&&(i[c]=!0,Object.keys(i).filter(h=>!i[h]).length||u())},o=()=>{var c;(c=t.flow)!=null&&c.length&&r.value!==-1&&(r.value+=1,e("flow-step",r.value),u())},a=()=>{r.value=-1},l=(c,d,...h)=>{t.flow[r.value]===c&&n.value&&n.value[d](...h)},u=()=>{l(Bi.month,"toggleMonthPicker",!0),l(Bi.year,"toggleYearPicker",!0),l(Bi.calendar,"toggleTimePicker",!1,!0),l(Bi.time,"toggleTimePicker",!0,!0);const c=t.flow[r.value];(c===Bi.hours||c===Bi.minutes||c===Bi.seconds)&&l(c,"toggleTimePicker",!0,!0,c)};return{childMount:s,updateFlowStep:o,resetFlow:a,flowStep:r}},Qm={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:Boolean,default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:String,default:null},emitTimezone:{type:String,default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},menuClassName:{type:String,default:null},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},calendarCellClassName:{type:String,default:null},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:null},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},minRange:{type:[Number,String],default:null},maxRange:{type:[Number,String],default:null},multiDatesLimit:{type:[Number,String],default:null},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},disableTimeRangeValidation:{type:Boolean,default:!1},highlight:{type:[Array,Function,Object],default:null},highlightWeekDays:{type:Array,default:null},highlightDisabledDays:{type:Boolean,default:!1},teleport:{type:[String,Boolean,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function],default:null},calendarClassName:{type:String,default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:Boolean,default:!1},partialRange:{type:Boolean,default:!0},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},inputClassName:{type:String,default:null},fixedStart:{type:Boolean,default:!1},fixedEnd:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:Boolean,default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},noDisabledRange:{type:Boolean,default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},showLastInRange:{type:Boolean,default:!0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1}},Fi={...Qm,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},nZ={key:1,class:"dp__input_wrap"},rZ=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid","onKeydown"],iZ={key:2,class:"dp__clear_icon"},sZ=Ie({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...Qm},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur"],setup(t,{expose:e,emit:n}){const r=n,i=t,{defaultedTextInput:s,defaultedAriaLabels:o,defaultedInline:a,defaultedConfig:l,getDefaultPattern:u,getDefaultStartTime:c}=Cn(i),d=ue(),h=ue(null),f=ue(!1),p=ue(!1),m=re(()=>({dp__pointer:!i.disabled&&!i.readonly&&!s.value.enabled,dp__disabled:i.disabled,dp__input_readonly:!s.value.enabled,dp__input:!0,dp__input_icon_pad:!i.hideInputIcon,dp__input_valid:!!i.state,dp__input_invalid:i.state===!1,dp__input_focus:f.value||i.isMenuOpen,dp__input_reg:!s.value.enabled,[i.inputClassName]:!!i.inputClassName})),y=()=>{r("set-input-date",null),i.autoApply&&(r("set-empty-date"),d.value=null)},_=C=>{const H=c();return RJ(C,s.value.format??u(),H??qO({},i.enableSeconds),i.inputValue,p.value)},v=C=>{const{rangeSeparator:H}=s.value,[O,R]=C.split(`${H}`);if(O){const W=_(O.trim()),X=R?_(R.trim()):null,$=W&&X?[W,X]:[W];d.value=W?$:null}},b=()=>{p.value=!0},g=C=>{if(i.range)v(C);else if(i.multiDates){const H=C.split(";");d.value=H.map(O=>_(O.trim())).filter(O=>O)}else d.value=_(C)},w=C=>{var H;const O=typeof C=="string"?C:(H=C.target)==null?void 0:H.value;O!==""?(s.value.openMenu&&!i.isMenuOpen&&r("open"),g(O),r("set-input-date",d.value)):y(),p.value=!1,r("update:input-value",O)},T=C=>{s.value.enabled?(g(C.target.value),s.value.enterSubmit&&_0(d.value)&&i.inputValue!==""?(r("set-input-date",d.value,!0),d.value=null):s.value.enterSubmit&&i.inputValue===""&&(d.value=null,r("clear"))):A(C)},M=C=>{s.value.enabled&&s.value.tabSubmit&&g(C.target.value),s.value.tabSubmit&&_0(d.value)&&i.inputValue!==""?(r("set-input-date",d.value,!0,!0),d.value=null):s.value.tabSubmit&&i.inputValue===""&&(d.value=null,r("clear",!0))},x=()=>{var C;f.value=!0,r("focus"),s.value.enabled&&s.value.selectOnFocus&&((C=h.value)==null||C.select())},A=C=>{C.preventDefault(),_o(C,l.value,!0),s.value.enabled&&s.value.openMenu&&!a.value.input&&!i.isMenuOpen?r("open"):s.value.enabled||r("toggle")},S=()=>{r("real-blur"),f.value=!1,(!i.isMenuOpen||a.value.enabled&&a.value.input)&&r("blur"),i.autoApply&&s.value.enabled&&d.value&&!i.isMenuOpen&&(r("set-input-date",d.value),r("select-date"),d.value=null)},N=C=>{_o(C,l.value,!0),r("clear")},U=C=>{if(!s.value.enabled){if(C.code==="Tab")return;C.preventDefault()}};return e({focusInput:()=>{var C;(C=h.value)==null||C.focus({preventScroll:!0})},setParsedDate:C=>{d.value=C}}),(C,H)=>{var O;return D(),J("div",{onClick:A},[C.$slots.trigger&&!C.$slots["dp-input"]&&!k(a).enabled?Pe(C.$slots,"trigger",{key:0}):oe("",!0),!C.$slots.trigger&&(!k(a).enabled||k(a).input)?(D(),J("div",nZ,[C.$slots["dp-input"]&&!C.$slots.trigger&&!k(a).enabled?Pe(C.$slots,"dp-input",{key:0,value:t.inputValue,isMenuOpen:t.isMenuOpen,onInput:w,onEnter:T,onTab:M,onClear:N,onBlur:S,onKeypress:U,onPaste:b}):oe("",!0),C.$slots["dp-input"]?oe("",!0):(D(),J("input",{key:1,id:C.uid?`dp-input-${C.uid}`:void 0,ref_key:"inputRef",ref:h,name:C.name,class:Le(m.value),inputmode:k(s).enabled?"text":"none",placeholder:C.placeholder,disabled:C.disabled,readonly:C.readonly,required:C.required,value:t.inputValue,autocomplete:C.autocomplete,"aria-label":(O=k(o))==null?void 0:O.input,"aria-disabled":C.disabled||void 0,"aria-invalid":C.state===!1?!0:void 0,onInput:w,onKeydown:[at(T,["enter"]),at(M,["tab"]),U],onBlur:S,onFocus:x,onKeypress:U,onPaste:b},null,42,rZ)),ne("div",{onClick:H[2]||(H[2]=R=>r("toggle"))},[C.$slots["input-icon"]&&!C.hideInputIcon?(D(),J("span",{key:0,class:"dp__input_icon",onClick:H[0]||(H[0]=R=>r("toggle"))},[Pe(C.$slots,"input-icon")])):oe("",!0),!C.$slots["input-icon"]&&!C.hideInputIcon&&!C.$slots["dp-input"]?(D(),ve(k(ah),{key:1,class:"dp__input_icon dp__input_icons",onClick:H[1]||(H[1]=R=>r("toggle"))})):oe("",!0)]),C.$slots["clear-icon"]&&t.inputValue&&C.clearable&&!C.disabled&&!C.readonly?(D(),J("span",iZ,[Pe(C.$slots,"clear-icon",{clear:N})])):oe("",!0),C.clearable&&!C.$slots["clear-icon"]&&t.inputValue&&!C.disabled&&!C.readonly?(D(),ve(k(FO),{key:3,class:"dp__clear_icon dp__input_icons",onClick:H[3]||(H[3]=Pt(R=>N(R),["prevent"]))})):oe("",!0)])):oe("",!0)])}}}),oZ=["title"],aZ={class:"dp__action_buttons"},lZ=["disabled","onKeydown"],uZ=Ie({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...Fi},emits:["close-picker","select-date","select-now","invalid-select"],setup(t,{emit:e}){const n=e,r=t,{defaultedActionRow:i,defaultedPreviewFormat:s,defaultedMultiCalendars:o,defaultedTextInput:a,defaultedInline:l,getDefaultPattern:u}=Cn(r),{isValidTime:c}=Ou(r),{buildMatrix:d}=Bo(),h=ue(null),f=ue(null);an(()=>{r.arrowNavigation&&d([On(h),On(f)],"actionRow")});const p=re(()=>r.range&&!r.partialRange&&r.internalModelValue?r.internalModelValue.length===2:!0),m=re(()=>!y.value||!_.value||!p.value),y=re(()=>!r.enableTimePicker||r.ignoreTimeValidation?!0:c(r.internalModelValue)),_=re(()=>r.monthPicker?r.range&&Array.isArray(r.internalModelValue)?!r.internalModelValue.filter(S=>!x(S)).length:x(r.internalModelValue):!0),v=()=>{const S=s.value;return r.timePicker||r.monthPicker,S($n(r.internalModelValue))},b=()=>{const S=r.internalModelValue;return o.value.count>0?`${g(S[0])} - ${g(S[1])}`:[g(S[0]),g(S[1])]},g=S=>XO(S,s.value,r.formatLocale,a.value.rangeSeparator,r.modelAuto,u()),w=re(()=>!r.internalModelValue||!r.menuMount?"":typeof s.value=="string"?Array.isArray(r.internalModelValue)?r.internalModelValue.length===2&&r.internalModelValue[1]?b():r.multiDates?r.internalModelValue.map(S=>`${g(S)}`):r.modelAuto?`${g(r.internalModelValue[0])}`:`${g(r.internalModelValue[0])} -`:g(r.internalModelValue):v()),T=()=>r.multiDates?"; ":" - ",M=re(()=>Array.isArray(w.value)?w.value.join(T()):w.value),x=S=>{if(!r.monthPicker)return!0;let N=!0;const U=_e(ki(S));if(r.minDate&&r.maxDate){const C=_e(ki(r.minDate)),H=_e(ki(r.maxDate));return gr(U,C)&&er(U,H)||Nt(U,C)||Nt(U,H)}if(r.minDate){const C=_e(ki(r.minDate));N=gr(U,C)||Nt(U,C)}if(r.maxDate){const C=_e(ki(r.maxDate));N=er(U,C)||Nt(U,C)}return N},A=()=>{y.value&&_.value&&p.value?n("select-date"):n("invalid-select")};return(S,N)=>(D(),J("div",{class:"dp__action_row",style:Nn(t.calendarWidth?{width:`${t.calendarWidth}px`}:{})},[S.$slots["action-row"]?Pe(S.$slots,"action-row",Tn(Ht({key:0},{internalModelValue:S.internalModelValue,disabled:m.value,selectDate:()=>S.$emit("select-date"),closePicker:()=>S.$emit("close-picker")}))):(D(),J(Ae,{key:1},[k(i).showPreview?(D(),J("div",{key:0,class:"dp__selection_preview",title:M.value},[S.$slots["action-preview"]?Pe(S.$slots,"action-preview",{key:0,value:S.internalModelValue}):oe("",!0),S.$slots["action-preview"]?oe("",!0):(D(),J(Ae,{key:1},[Qe(Xe(M.value),1)],64))],8,oZ)):oe("",!0),ne("div",aZ,[S.$slots["action-buttons"]?Pe(S.$slots,"action-buttons",{key:0,value:S.internalModelValue}):oe("",!0),S.$slots["action-buttons"]?oe("",!0):(D(),J(Ae,{key:1},[!k(l).enabled&&k(i).showCancel?(D(),J("button",{key:0,ref_key:"cancelButtonRef",ref:h,type:"button",class:"dp__action_button dp__action_cancel",onClick:N[0]||(N[0]=U=>S.$emit("close-picker")),onKeydown:[N[1]||(N[1]=at(U=>S.$emit("close-picker"),["enter"])),N[2]||(N[2]=at(U=>S.$emit("close-picker"),["space"]))]},Xe(S.cancelText),545)):oe("",!0),k(i).showNow?(D(),J("button",{key:1,ref_key:"cancelButtonRef",ref:h,type:"button",class:"dp__action_button dp__action_cancel",onClick:N[3]||(N[3]=U=>S.$emit("select-now")),onKeydown:[N[4]||(N[4]=at(U=>S.$emit("select-now"),["enter"])),N[5]||(N[5]=at(U=>S.$emit("select-now"),["space"]))]},Xe(S.nowButtonLabel),545)):oe("",!0),k(i).showSelect?(D(),J("button",{key:2,ref_key:"selectButtonRef",ref:f,type:"button",class:"dp__action_button dp__action_select",disabled:m.value,onKeydown:[at(A,["enter"]),at(A,["space"])],onClick:A},Xe(S.selectText),41,lZ)):oe("",!0)],64))])],64))],4))}}),cZ=["onKeydown"],dZ={class:"dp__selection_grid_header"},hZ=["aria-selected","aria-disabled","onClick","onKeydown","onMouseover"],fZ=["aria-label","onKeydown"],ch=Ie({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean}},emits:["selected","toggle","reset-flow","hover-value"],setup(t,{expose:e,emit:n}){const{setSelectionGrid:r,buildMultiLevelMatrix:i,setMonthPicker:s}=Bo(),o=n,a=t,{defaultedAriaLabels:l,defaultedTextInput:u,defaultedConfig:c}=Cn(a),{hideNavigationButtons:d}=qm(),h=ue(!1),f=ue(null),p=ue(null),m=ue([]),y=ue(),_=ue(null),v=ue(0),b=ue(null);j0(()=>{f.value=null}),an(()=>{Rr().then(()=>N()),a.noOverlayFocus||w(),g(!0)}),ja(()=>g(!1));const g=$=>{var I;a.arrowNavigation&&((I=a.headerRefs)!=null&&I.length?s($):r($))},w=()=>{var $;const I=On(p);I&&(u.value.enabled||(f.value?($=f.value)==null||$.focus({preventScroll:!0}):I.focus({preventScroll:!0})),h.value=I.clientHeight<I.scrollHeight)},T=re(()=>({dp__overlay:!0,"dp--overlay-absolute":!a.useRelative,"dp--overlay-relative":a.useRelative})),M=re(()=>a.useRelative?{height:`${a.height}px`,width:"260px"}:void 0),x=re(()=>({dp__overlay_col:!0})),A=re(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:h.value,dp__button_bottom:a.isLast})),S=re(()=>{var $,I;return{dp__overlay_container:!0,dp__container_flex:(($=a.items)==null?void 0:$.length)<=6,dp__container_block:((I=a.items)==null?void 0:I.length)>6}});pn(()=>a.items,()=>N(),{deep:!0});const N=()=>{Rr().then(()=>{const $=On(f),I=On(p),Z=On(_),ie=On(b),ee=Z?Z.getBoundingClientRect().height:0;I&&(I.getBoundingClientRect().height?v.value=I.getBoundingClientRect().height-ee:v.value=c.value.modeHeight-ee),$&&ie&&(ie.scrollTop=$.offsetTop-ie.offsetTop-(v.value/2-$.getBoundingClientRect().height)-ee)})},U=$=>{$.disabled||o("selected",$.value)},C=()=>{o("toggle"),o("reset-flow")},H=()=>{a.escClose&&C()},O=($,I,Z,ie)=>{$&&(I.active&&(f.value=$),a.arrowNavigation&&(Array.isArray(m.value[Z])?m.value[Z][ie]=$:m.value[Z]=[$],R()))},R=()=>{var $,I;const Z=($=a.headerRefs)!=null&&$.length?[a.headerRefs].concat(m.value):m.value.concat([a.skipButtonRef?[]:[_.value]]);i($n(Z),(I=a.headerRefs)!=null&&I.length?"monthPicker":"selectionGrid")},W=$=>{a.arrowNavigation||_o($,c.value,!0)},X=$=>{y.value=$,o("hover-value",$)};return e({focusGrid:w}),($,I)=>{var Z;return D(),J("div",{ref_key:"gridWrapRef",ref:p,class:Le(T.value),style:Nn(M.value),role:"dialog",tabindex:"0",onKeydown:[at(Pt(H,["prevent"]),["esc"]),I[0]||(I[0]=at(Pt(ie=>W(ie),["prevent"]),["left"])),I[1]||(I[1]=at(Pt(ie=>W(ie),["prevent"]),["up"])),I[2]||(I[2]=at(Pt(ie=>W(ie),["prevent"]),["down"])),I[3]||(I[3]=at(Pt(ie=>W(ie),["prevent"]),["right"]))]},[ne("div",{ref_key:"containerRef",ref:b,class:Le(S.value),role:"grid",style:Nn({height:`${v.value}px`})},[ne("div",dZ,[Pe($.$slots,"header")]),$.$slots.overlay?Pe($.$slots,"overlay",{key:0}):(D(!0),J(Ae,{key:1},ut($.items,(ie,ee)=>(D(),J("div",{key:ee,class:Le(["dp__overlay_row",{dp__flex_row:$.items.length>=3}]),role:"row"},[(D(!0),J(Ae,null,ut(ie,(V,we)=>(D(),J("div",{key:V.value,ref_for:!0,ref:B=>O(B,V,ee,we),role:"gridcell",class:Le(x.value),"aria-selected":V.active,"aria-disabled":V.disabled||void 0,tabindex:"0",onClick:B=>U(V),onKeydown:[at(Pt(B=>U(V),["prevent"]),["enter"]),at(Pt(B=>U(V),["prevent"]),["space"])],onMouseover:B=>X(V.value)},[ne("div",{class:Le(V.className)},[$.$slots.item?Pe($.$slots,"item",{key:0,item:V}):oe("",!0),$.$slots.item?oe("",!0):(D(),J(Ae,{key:1},[Qe(Xe(V.text),1)],64))],2)],42,hZ))),128))],2))),128))],6),$.$slots["button-icon"]?Ji((D(),J("button",{key:0,ref_key:"toggleButton",ref:_,type:"button","aria-label":(Z=k(l))==null?void 0:Z.toggleOverlay,class:Le(A.value),tabindex:"0",onClick:C,onKeydown:[at(C,["enter"]),at(C,["tab"])]},[Pe($.$slots,"button-icon")],42,fZ)),[[Cs,!k(d)($.hideNavigation,$.type)]]):oe("",!0)],46,cZ)}}}),Xm=Ie({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean}},setup(t){const e=t,n=re(()=>e.multiCalendars>0?[...Array(e.multiCalendars).keys()]:[0]),r=re(()=>({dp__instance_calendar:e.multiCalendars>0}));return(i,s)=>(D(),J("div",{class:Le({dp__menu_inner:!i.stretch,"dp--menu--inner-stretched":i.stretch,dp__flex_display:i.multiCalendars>0})},[(D(!0),J(Ae,null,ut(n.value,(o,a)=>(D(),J("div",{key:o,class:Le(r.value)},[Pe(i.$slots,"default",{instance:o,index:a})],2))),128))],2))}}),pZ=["aria-label","aria-disabled"],Bc=Ie({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(t,{emit:e}){const n=e,r=ue(null);return an(()=>n("set-ref",r)),(i,s)=>(D(),J("button",{ref_key:"elRef",ref:r,type:"button",class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":i.ariaLabel,"aria-disabled":i.disabled||void 0,onClick:s[0]||(s[0]=o=>i.$emit("activate")),onKeydown:[s[1]||(s[1]=at(Pt(o=>i.$emit("activate"),["prevent"]),["enter"])),s[2]||(s[2]=at(Pt(o=>i.$emit("activate"),["prevent"]),["space"]))]},[ne("span",{class:Le(["dp__inner_nav",{dp__inner_nav_disabled:i.disabled}])},[Pe(i.$slots,"default")],2)],40,pZ))}}),mZ={class:"dp--year-mode-picker"},gZ=["aria-label"],eN=Ie({__name:"YearModePicker",props:{...Fi,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(t,{emit:e}){const n=e,r=t,{showRightIcon:i,showLeftIcon:s}=qm(),{defaultedConfig:o,defaultedMultiCalendars:a,defaultedAriaLabels:l,defaultedTransitions:u}=Cn(r),{showTransition:c,transitionName:d}=lh(u),h=(m=!1,y)=>{n("toggle-year-picker",{flow:m,show:y})},f=m=>{n("year-select",m)},p=(m=!1)=>{n("handle-year",m)};return(m,y)=>{var _,v,b;return D(),J("div",mZ,[k(s)(k(a),t.instance)?(D(),ve(Bc,{key:0,ref:"mpPrevIconRef","aria-label":(_=k(l))==null?void 0:_.prevYear,disabled:t.isDisabled(!1),onActivate:y[0]||(y[0]=g=>p(!1))},{default:ye(()=>[m.$slots["arrow-left"]?Pe(m.$slots,"arrow-left",{key:0}):oe("",!0),m.$slots["arrow-left"]?oe("",!0):(D(),ve(k(m_),{key:1}))]),_:3},8,["aria-label","disabled"])):oe("",!0),ne("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":(v=k(l))==null?void 0:v.openYearsOverlay,onClick:y[1]||(y[1]=()=>h(!1)),onKeydown:y[2]||(y[2]=at(()=>h(!1),["enter"]))},[m.$slots.year?Pe(m.$slots,"year",{key:0,year:t.year}):oe("",!0),m.$slots.year?oe("",!0):(D(),J(Ae,{key:1},[Qe(Xe(t.year),1)],64))],40,gZ),k(i)(k(a),t.instance)?(D(),ve(Bc,{key:1,ref:"mpNextIconRef","aria-label":(b=k(l))==null?void 0:b.nextYear,disabled:t.isDisabled(!0),onActivate:y[3]||(y[3]=g=>p(!0))},{default:ye(()=>[m.$slots["arrow-right"]?Pe(m.$slots,"arrow-right",{key:0}):oe("",!0),m.$slots["arrow-right"]?oe("",!0):(D(),ve(k(g_),{key:1}))]),_:3},8,["aria-label","disabled"])):oe("",!0),ae(Us,{name:k(d)(t.showYearPicker),css:k(c)},{default:ye(()=>[t.showYearPicker?(D(),ve(ch,{key:0,items:t.items,"text-input":m.textInput,"esc-close":m.escClose,config:m.config,"is-last":m.autoApply&&!k(o).keepActionRow,type:"year",onToggle:h,onSelected:y[4]||(y[4]=g=>f(g))},nr({"button-icon":ye(()=>[m.$slots["calendar-icon"]?Pe(m.$slots,"calendar-icon",{key:0}):oe("",!0),m.$slots["calendar-icon"]?oe("",!0):(D(),ve(k(ah),{key:1}))]),_:2},[m.$slots["year-overlay-value"]?{name:"item",fn:ye(({item:g})=>[Pe(m.$slots,"year-overlay-value",{text:g.text,value:g.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last"])):oe("",!0)]),_:3},8,["name","css"])])}}}),C_=(t,e,n)=>{if(e.value&&Array.isArray(e.value))if(e.value.some(r=>Nt(t,r))){const r=e.value.filter(i=>!Nt(i,t));e.value=r.length?r:null}else(n&&+n>e.value.length||!n)&&e.value.push(t);else e.value=[t]},I_=(t,e,n)=>{let r=t.value?t.value.slice():[];return r.length===2&&r[1]!==null&&(r=[]),r.length?er(e,r[0])?(r.unshift(e),n("range-start",r[0]),n("range-start",r[1])):(r[1]=e,n("range-end",e)):(r=[e],n("range-start",e)),t.value=r,r},Jm=(t,e,n,r)=>{t[0]&&t[1]&&n&&e("auto-apply"),t[0]&&!t[1]&&r&&n&&e("auto-apply")},tN=({multiCalendars:t,highlight:e,calendars:n,modelValue:r,props:i,year:s,month:o,emit:a})=>{const l=re(()=>E_(i.yearRange,i.reverseYears)),u=ue([!1]),c=re(()=>(g,w)=>{const T=nn(ki(new Date),{month:o.value(g),year:s.value(g)});return QO(T,i.maxDate,i.minDate,i.preventMinMaxNavigation,w)}),d=()=>{for(let g=0;g<t.value.count;g++)if(g===0)n.value[g]=n.value[0];else{const w=nn(_e(),n.value[g-1]);n.value[g]={month:At(w),year:ht(a_(w,1))}}},h=g=>{if(!g)return d();const w=nn(_e(),n.value[g]);return n.value[0].year=ht(UO(w,t.value.count-1)),d()},f=g=>i.focusStartDate?g[0]:g[1]?g[1]:g[0],p=()=>{if(r.value){const g=Array.isArray(r.value)?f(r.value):r.value;n.value[0]={month:At(g),year:ht(g)}}};an(()=>{p(),t.value.count&&d()});const m=(g,w)=>{n.value[w].year=g,t.value.count&&!t.value.solo&&h(w)},y=re(()=>g=>mu(l.value,w=>{const T=s.value(g)===w.value,M=Ed(w.value,gu(i.minDate),gu(i.maxDate)),x=S_(e.value,w.value);return{active:T,disabled:M,highlighted:x}})),_=(g,w)=>{m(g,w),b(w)},v=(g,w=!1)=>{if(!c.value(g,w)){const T=w?s.value(g)+1:s.value(g)-1;m(T,g)}},b=(g,w=!1,T)=>{w||a("reset-flow"),T!==void 0?u.value[g]=T:u.value[g]=!u.value[g],u.value||a("overlay-closed")};return{isDisabled:c,groupedYears:y,showYearPicker:u,selectYear:m,toggleYearPicker:b,handleYearSelect:_,handleYear:v}},vZ=(t,e)=>{const{defaultedMultiCalendars:n,defaultedAriaLabels:r,defaultedTransitions:i,defaultedConfig:s,defaultedHighlight:o}=Cn(t),{modelValue:a,year:l,month:u,calendars:c}=uh(t,e),d=re(()=>HO(t.formatLocale,t.locale,t.monthNameFormat)),h=ue(null),{selectYear:f,groupedYears:p,showYearPicker:m,toggleYearPicker:y,handleYearSelect:_,handleYear:v,isDisabled:b}=tN({modelValue:a,multiCalendars:n,highlight:o,calendars:c,year:l,month:u,props:t,emit:e}),g=W=>W?{month:At(W),year:ht(W)}:{month:null,year:null},w=()=>a.value?Array.isArray(a.value)?a.value.map(W=>g(W)):g(a.value):g(),T=(W,X)=>{const $=c.value[W],I=w();return Array.isArray(I)?I.some(Z=>Z.year===($==null?void 0:$.year)&&Z.month===X):($==null?void 0:$.year)===I.year&&X===I.month},M=(W,X,$)=>{var I,Z;const ie=w();return Array.isArray(ie)?l.value(X)===((I=ie[$])==null?void 0:I.year)&&W===((Z=ie[$])==null?void 0:Z.month):!1},x=(W,X)=>{if(t.range){const $=w();if(Array.isArray(a.value)&&Array.isArray($)){const I=M(W,X,0)||M(W,X,1),Z=Ts(ki(_e()),W,l.value(X));return zm(a.value,h.value,Z)&&!I}return!1}return!1},A=re(()=>W=>mu(d.value,X=>{const $=T(W,X.value),I=Ed(X.value,KO(l.value(W),t.minDate),YO(l.value(W),t.maxDate))||UJ(t.disabledDates,l.value(W)).includes(X.value),Z=x(X.value,W),ie=JO(o.value,X.value,l.value(W));return{active:$,disabled:I,isBetween:Z,highlighted:ie}})),S=(W,X)=>Ts(ki(_e()),W,l.value(X)),N=(W,X)=>{const $=a.value?a.value:ki(new Date);a.value=Ts($,W,l.value(X)),e("auto-apply")},U=(W,X)=>{const $=I_(a,S(W,X),e);Jm($,e,t.autoApply,t.modelAuto)},C=(W,X)=>{C_(S(W,X),a,t.multiDatesLimit),e("auto-apply",!0)},H=(W,X)=>(c.value[X].month=W,R(X,c.value[X].year,W),t.multiDates?C(W,X):t.range?U(W,X):N(W,X)),O=(W,X)=>{f(W,X),R(X,W,null)},R=(W,X,$)=>{let I=$;if(!I){const Z=w();I=Array.isArray(Z)?Z[W].month:Z.month}e("update-month-year",{instance:W,year:X,month:I})};return{groupedMonths:A,groupedYears:p,year:l,isDisabled:b,defaultedMultiCalendars:n,defaultedAriaLabels:r,defaultedTransitions:i,defaultedConfig:s,showYearPicker:m,modelValue:a,setHoverDate:(W,X)=>{h.value=S(W,X)},selectMonth:H,selectYear:O,toggleYearPicker:y,handleYearSelect:_,handleYear:v,getModelMonthYear:w}},yZ=Ie({compatConfig:{MODE:3},__name:"MonthPicker",props:{...Fi},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year"],setup(t,{expose:e,emit:n}){const r=n,i=No(),s=ti(i,"yearMode"),o=t,{groupedMonths:a,groupedYears:l,year:u,isDisabled:c,defaultedMultiCalendars:d,defaultedConfig:h,showYearPicker:f,modelValue:p,setHoverDate:m,selectMonth:y,selectYear:_,toggleYearPicker:v,handleYearSelect:b,handleYear:g,getModelMonthYear:w}=vZ(o,r);return e({getSidebarProps:()=>({modelValue:p,year:u,getModelMonthYear:w,selectMonth:y,selectYear:_,handleYear:g})}),(T,M)=>(D(),ve(Xm,{"multi-calendars":k(d).count,stretch:""},{default:ye(({instance:x})=>[T.$slots["month-year"]?Pe(T.$slots,"month-year",Tn(Ht({key:0},{year:k(u),months:k(a)(x),years:k(l)(x),selectMonth:k(y),selectYear:k(_),instance:x}))):(D(),ve(ch,{key:1,items:k(a)(x),"arrow-navigation":T.arrowNavigation,"is-last":T.autoApply&&!k(h).keepActionRow,"esc-close":T.escClose,height:k(h).modeHeight,config:T.config,"no-overlay-focus":T.noOverlayFocus,"use-relative":"",type:"month",onSelected:A=>k(y)(A,x),onHoverValue:A=>k(m)(A,x)},{header:ye(()=>[ae(eN,Ht(T.$props,{items:k(l)(x),instance:x,"show-year-picker":k(f)[x],year:k(u)(x),"is-disabled":A=>k(c)(x,A),onHandleYear:A=>k(g)(x,A),onYearSelect:A=>k(b)(A,x),onToggleYearPicker:A=>k(v)(x,A==null?void 0:A.flow,A==null?void 0:A.show)}),nr({_:2},[ut(k(s),(A,S)=>({name:A,fn:ye(N=>[Pe(T.$slots,A,Tn(tr(N)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars"]))}}),wZ=(t,e)=>{const{modelValue:n}=uh(t,e),r=ue(null),{defaultedHighlight:i}=Cn(t),s=u=>Array.isArray(n.value)?n.value.some(c=>ht(c)===u):n.value?ht(n.value)===u:!1,o=u=>t.range&&Array.isArray(n.value)?zm(n.value,r.value,l(u)):!1,a=re(()=>mu(E_(t.yearRange,t.reverseYears),u=>{const c=s(u.value),d=Ed(u.value,gu(t.minDate),gu(t.maxDate)),h=o(u.value),f=S_(i.value,u.value);return{active:c,disabled:d,isBetween:h,highlighted:f}})),l=u=>Qi(ki(new Date),u);return{groupedYears:a,modelValue:n,setHoverValue:u=>{r.value=Qi(ki(new Date),u)},selectYear:u=>{var c;if(t.multiDates)return n.value?Array.isArray(n.value)&&(((c=n.value)==null?void 0:c.map(d=>ht(d))).includes(u)?n.value=n.value.filter(d=>ht(d)!==u):n.value.push(Qi(zr(_e()),u))):n.value=[Qi(zr(_e()),u)],e("auto-apply",!0);if(t.range){const d=I_(n,l(u),e);return Jm(d,e,t.autoApply,t.modelAuto)}n.value=l(u),e("auto-apply")}}},bZ=Ie({compatConfig:{MODE:3},__name:"YearPicker",props:{...Fi},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply"],setup(t,{expose:e,emit:n}){const r=n,i=t,{groupedYears:s,modelValue:o,selectYear:a,setHoverValue:l}=wZ(i,r),{defaultedConfig:u}=Cn(i);return e({getSidebarProps:()=>({modelValue:o,selectYear:a})}),(c,d)=>(D(),J("div",null,[c.$slots["month-year"]?Pe(c.$slots,"month-year",Tn(Ht({key:0},{years:k(s),selectYear:k(a)}))):(D(),ve(ch,{key:1,items:k(s),"is-last":c.autoApply&&!k(u).keepActionRow,height:k(u).modeHeight,config:c.config,"no-overlay-focus":c.noOverlayFocus,type:"year","use-relative":"",onSelected:k(a),onHoverValue:k(l)},nr({_:2},[c.$slots["year-overlay-value"]?{name:"item",fn:ye(({item:h})=>[Pe(c.$slots,"year-overlay-value",{text:h.text,value:h.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","onSelected","onHoverValue"]))]))}}),_Z={key:0,class:"dp__time_input"},TZ=["aria-label","onKeydown","onClick"],EZ=ne("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),SZ=ne("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),CZ=["aria-label","disabled","onKeydown","onClick"],IZ=["aria-label","onKeydown","onClick"],AZ=ne("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),kZ=ne("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),xZ={key:0},PZ=["aria-label","onKeydown"],DZ=Ie({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Fi},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:n}){const r=n,i=t,{setTimePickerElements:s,setTimePickerBackRef:o}=Bo(),{defaultedAriaLabels:a,defaultedTransitions:l,defaultedFilters:u,defaultedConfig:c}=Cn(i),{transitionName:d,showTransition:h}=lh(l),f=Ln({hours:!1,minutes:!1,seconds:!1}),p=ue("AM"),m=ue(null),y=ue([]);an(()=>{r("mounted")});const _=B=>nn(new Date,{hours:B.hours,minutes:B.minutes,seconds:i.enableSeconds?B.seconds:0,milliseconds:0}),v=re(()=>B=>H(B,i[B])||g(B,i[B])),b=re(()=>({hours:i.hours,minutes:i.minutes,seconds:i.seconds})),g=(B,q)=>i.range&&!i.disableTimeRangeValidation?!i.validateTime(B,q):!1,w=(B,q)=>{if(i.range&&!i.disableTimeRangeValidation){const le=q?+i[`${B}Increment`]:-+i[`${B}Increment`],Y=i[B]+le;return!i.validateTime(B,Y)}return!1},T=re(()=>B=>!R(+i[B]+ +i[`${B}Increment`],B)||w(B,!0)),M=re(()=>B=>!R(+i[B]-+i[`${B}Increment`],B)||w(B,!1)),x=(B,q)=>yO(nn(_e(),B),q),A=(B,q)=>QX(nn(_e(),B),q),S=re(()=>({dp__time_col:!0,dp__time_col_block:!i.timePickerInline,dp__time_col_reg_block:!i.enableSeconds&&i.is24&&!i.timePickerInline,dp__time_col_reg_inline:!i.enableSeconds&&i.is24&&i.timePickerInline,dp__time_col_reg_with_button:!i.enableSeconds&&!i.is24,dp__time_col_sec:i.enableSeconds&&i.is24,dp__time_col_sec_with_button:i.enableSeconds&&!i.is24})),N=re(()=>{const B=[{type:"hours"},{type:"",separator:!0},{type:"minutes"}];return i.enableSeconds?B.concat([{type:"",separator:!0},{type:"seconds"}]):B}),U=re(()=>N.value.filter(B=>!B.separator)),C=re(()=>B=>{if(B==="hours"){const q=Z(+i.hours);return{text:q<10?`0${q}`:`${q}`,value:q}}return{text:i[B]<10?`0${i[B]}`:`${i[B]}`,value:i[B]}}),H=(B,q)=>{var le;if(!i.disabledTimesConfig)return!1;const Y=i.disabledTimesConfig(i.order,B==="hours"?q:void 0);return Y[B]?!!((le=Y[B])!=null&&le.includes(q)):!0},O=B=>{const q=i.is24?24:12,le=B==="hours"?q:60,Y=+i[`${B}GridIncrement`],pe=B==="hours"&&!i.is24?Y:0,Se=[];for(let E=pe;E<le;E+=Y)Se.push({value:E,text:E<10?`0${E}`:`${E}`});return B==="hours"&&!i.is24&&Se.push({value:0,text:"12"}),mu(Se,E=>({active:!1,disabled:u.value.times[B].includes(E.value)||!R(E.value,B)||H(B,E.value)||g(B,E.value)}))},R=(B,q)=>{const le=i.minTime?_(mv(i.minTime)):null,Y=i.maxTime?_(mv(i.maxTime)):null,pe=_(mv(b.value,q,B));return le&&Y?(Td(pe,Y)||kl(pe,Y))&&(_d(pe,le)||kl(pe,le)):le?_d(pe,le)||kl(pe,le):Y?Td(pe,Y)||kl(pe,Y):!0},W=B=>i[`no${B[0].toUpperCase()+B.slice(1)}Overlay`],X=B=>{W(B)||(f[B]=!f[B],f[B]||r("overlay-closed"))},$=B=>B==="hours"?Ni:B==="minutes"?rs:fu,I=(B,q=!0)=>{const le=q?x:A,Y=q?+i[`${B}Increment`]:-+i[`${B}Increment`];R(+i[B]+Y,B)&&r(`update:${B}`,$(B)(le({[B]:+i[B]},{[B]:+i[`${B}Increment`]})))},Z=B=>i.is24?B:(B>=12?p.value="PM":p.value="AM",CJ(B)),ie=()=>{p.value==="PM"?(p.value="AM",r("update:hours",i.hours-12)):(p.value="PM",r("update:hours",i.hours+12)),r("am-pm-change",p.value)},ee=B=>{f[B]=!0},V=(B,q,le)=>{if(B&&i.arrowNavigation){Array.isArray(y.value[q])?y.value[q][le]=B:y.value[q]=[B];const Y=y.value.reduce((pe,Se)=>Se.map((E,P)=>[...pe[P]||[],Se[P]]),[]);o(i.closeTimePickerBtn),m.value&&(Y[1]=Y[1].concat(m.value)),s(Y,i.order)}},we=(B,q)=>(X(B),B==="hours"&&!i.is24?r(`update:${B}`,p.value==="PM"?q+12:q):r(`update:${B}`,q));return e({openChildCmp:ee}),(B,q)=>{var le;return B.disabled?oe("",!0):(D(),J("div",_Z,[(D(!0),J(Ae,null,ut(N.value,(Y,pe)=>{var Se,E,P;return D(),J("div",{key:pe,class:Le(S.value)},[Y.separator?(D(),J(Ae,{key:0},[Qe(" : ")],64)):(D(),J(Ae,{key:1},[ne("button",{ref_for:!0,ref:F=>V(F,pe,0),type:"button",class:Le({dp__btn:!0,dp__inc_dec_button:!B.timePickerInline,dp__inc_dec_button_inline:B.timePickerInline,dp__tp_inline_btn_top:B.timePickerInline,dp__inc_dec_button_disabled:T.value(Y.type)}),"aria-label":(Se=k(a))==null?void 0:Se.incrementValue(Y.type),tabindex:"0",onKeydown:[at(Pt(F=>I(Y.type),["prevent"]),["enter"]),at(Pt(F=>I(Y.type),["prevent"]),["space"])],onClick:F=>I(Y.type)},[i.timePickerInline?(D(),J(Ae,{key:1},[EZ,SZ],64)):(D(),J(Ae,{key:0},[B.$slots["arrow-up"]?Pe(B.$slots,"arrow-up",{key:0}):oe("",!0),B.$slots["arrow-up"]?oe("",!0):(D(),ve(k(y_),{key:1}))],64))],42,TZ),ne("button",{ref_for:!0,ref:F=>V(F,pe,1),type:"button","aria-label":(E=k(a))==null?void 0:E.openTpOverlay(Y.type),class:Le({dp__time_display:!0,dp__time_display_block:!B.timePickerInline,dp__time_display_inline:B.timePickerInline,"dp--time-invalid":v.value(Y.type),"dp--time-overlay-btn":!v.value(Y.type)}),disabled:W(Y.type),tabindex:"0",onKeydown:[at(Pt(F=>X(Y.type),["prevent"]),["enter"]),at(Pt(F=>X(Y.type),["prevent"]),["space"])],onClick:F=>X(Y.type)},[B.$slots[Y.type]?Pe(B.$slots,Y.type,{key:0,text:C.value(Y.type).text,value:C.value(Y.type).value}):oe("",!0),B.$slots[Y.type]?oe("",!0):(D(),J(Ae,{key:1},[Qe(Xe(C.value(Y.type).text),1)],64))],42,CZ),ne("button",{ref_for:!0,ref:F=>V(F,pe,2),type:"button",class:Le({dp__btn:!0,dp__inc_dec_button:!B.timePickerInline,dp__inc_dec_button_inline:B.timePickerInline,dp__tp_inline_btn_bottom:B.timePickerInline,dp__inc_dec_button_disabled:M.value(Y.type)}),"aria-label":(P=k(a))==null?void 0:P.decrementValue(Y.type),tabindex:"0",onKeydown:[at(Pt(F=>I(Y.type,!1),["prevent"]),["enter"]),at(Pt(F=>I(Y.type,!1),["prevent"]),["space"])],onClick:F=>I(Y.type,!1)},[i.timePickerInline?(D(),J(Ae,{key:1},[AZ,kZ],64)):(D(),J(Ae,{key:0},[B.$slots["arrow-down"]?Pe(B.$slots,"arrow-down",{key:0}):oe("",!0),B.$slots["arrow-down"]?oe("",!0):(D(),ve(k(w_),{key:1}))],64))],42,IZ)],64))],2)}),128)),B.is24?oe("",!0):(D(),J("div",xZ,[B.$slots["am-pm-button"]?Pe(B.$slots,"am-pm-button",{key:0,toggle:ie,value:p.value}):oe("",!0),B.$slots["am-pm-button"]?oe("",!0):(D(),J("button",{key:1,ref_key:"amPmButton",ref:m,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(le=k(a))==null?void 0:le.amPmButton,tabindex:"0",onClick:ie,onKeydown:[at(Pt(ie,["prevent"]),["enter"]),at(Pt(ie,["prevent"]),["space"])]},Xe(p.value),41,PZ))])),(D(!0),J(Ae,null,ut(U.value,(Y,pe)=>(D(),ve(Us,{key:pe,name:k(d)(f[Y.type]),css:k(h)},{default:ye(()=>[f[Y.type]?(D(),ve(ch,{key:0,items:O(Y.type),"is-last":B.autoApply&&!k(c).keepActionRow,"esc-close":B.escClose,type:Y.type,"text-input":B.textInput,config:B.config,"arrow-navigation":B.arrowNavigation,onSelected:Se=>we(Y.type,Se),onToggle:Se=>X(Y.type),onResetFlow:q[0]||(q[0]=Se=>B.$emit("reset-flow"))},nr({"button-icon":ye(()=>[B.$slots["clock-icon"]?Pe(B.$slots,"clock-icon",{key:0}):oe("",!0),B.$slots["clock-icon"]?oe("",!0):(D(),ve(k(v_),{key:1}))]),_:2},[B.$slots[`${Y.type}-overlay-value`]?{name:"item",fn:ye(({item:Se})=>[Pe(B.$slots,`${Y.type}-overlay-value`,{text:Se.text,value:Se.value})]),key:"0"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","onSelected","onToggle"])):oe("",!0)]),_:2},1032,["name","css"]))),128))]))}}}),RZ={class:"dp--tp-wrap"},OZ=["aria-label","tabindex"],NZ=["tabindex"],MZ=["aria-label"],nN=Ie({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Fi},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:n}){const r=n,i=t,{buildMatrix:s,setTimePicker:o}=Bo(),a=No(),{defaultedTransitions:l,defaultedAriaLabels:u,defaultedTextInput:c,defaultedConfig:d}=Cn(i),{transitionName:h,showTransition:f}=lh(l),{hideNavigationButtons:p}=qm(),m=ue(null),y=ue(null),_=ue([]),v=ue(null);an(()=>{r("mount"),!i.timePicker&&i.arrowNavigation?s([On(m.value)],"time"):o(!0,i.timePicker)});const b=re(()=>i.range&&i.modelAuto?WO(i.internalModelValue):!0),g=ue(!1),w=O=>({hours:Array.isArray(i.hours)?i.hours[O]:i.hours,minutes:Array.isArray(i.minutes)?i.minutes[O]:i.minutes,seconds:Array.isArray(i.seconds)?i.seconds[O]:i.seconds}),T=re(()=>{const O=[];if(i.range)for(let R=0;R<2;R++)O.push(w(R));else O.push(w(0));return O}),M=(O,R=!1,W="")=>{R||r("reset-flow"),g.value=O,r(O?"overlay-opened":"overlay-closed"),i.arrowNavigation&&o(O),Rr(()=>{W!==""&&_.value[0]&&_.value[0].openChildCmp(W)})},x=re(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:i.autoApply&&!d.value.keepActionRow})),A=ti(a,"timePicker"),S=(O,R,W)=>i.range?R===0?[O,T.value[1][W]]:[T.value[0][W],O]:O,N=O=>{r("update:hours",O)},U=O=>{r("update:minutes",O)},C=O=>{r("update:seconds",O)},H=()=>{if(v.value&&!c.value.enabled&&!i.noOverlayFocus){const O=AJ(v.value);O&&O.focus({preventScroll:!0})}};return e({toggleTimePicker:M}),(O,R)=>{var W;return D(),J("div",RZ,[!O.timePicker&&!O.timePickerInline?Ji((D(),J("button",{key:0,ref_key:"openTimePickerBtn",ref:m,type:"button",class:Le(x.value),"aria-label":(W=k(u))==null?void 0:W.openTimePicker,tabindex:O.noOverlayFocus?void 0:0,onKeydown:[R[0]||(R[0]=at(X=>M(!0),["enter"])),R[1]||(R[1]=at(X=>M(!0),["space"]))],onClick:R[2]||(R[2]=X=>M(!0))},[O.$slots["clock-icon"]?Pe(O.$slots,"clock-icon",{key:0}):oe("",!0),O.$slots["clock-icon"]?oe("",!0):(D(),ve(k(v_),{key:1}))],42,OZ)),[[Cs,!k(p)(O.hideNavigation,"time")]]):oe("",!0),ae(Us,{name:k(h)(g.value),css:k(f)&&!O.timePickerInline},{default:ye(()=>{var X;return[g.value||O.timePicker||O.timePickerInline?(D(),J("div",{key:0,ref_key:"overlayRef",ref:v,class:Le({dp__overlay:!O.timePickerInline,"dp--overlay-absolute":!i.timePicker&&!O.timePickerInline,"dp--overlay-relative":i.timePicker}),style:Nn(O.timePicker?{height:`${k(d).modeHeight}px`}:void 0),tabindex:O.timePickerInline?void 0:0},[ne("div",{class:Le(O.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[O.$slots["time-picker-overlay"]?Pe(O.$slots,"time-picker-overlay",{key:0,hours:t.hours,minutes:t.minutes,seconds:t.seconds,setHours:N,setMinutes:U,setSeconds:C}):oe("",!0),O.$slots["time-picker-overlay"]?oe("",!0):(D(),J("div",{key:1,class:Le(O.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(D(!0),J(Ae,null,ut(T.value,($,I)=>Ji((D(),ve(DZ,Ht({key:I},{...O.$props,order:I,hours:$.hours,minutes:$.minutes,seconds:$.seconds,closeTimePickerBtn:y.value,disabledTimesConfig:t.disabledTimesConfig,disabled:I===0?O.fixedStart:O.fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:_,"validate-time":(Z,ie)=>t.validateTime(Z,S(ie,I,Z)),"onUpdate:hours":Z=>N(S(Z,I,"hours")),"onUpdate:minutes":Z=>U(S(Z,I,"minutes")),"onUpdate:seconds":Z=>C(S(Z,I,"seconds")),onMounted:H,onOverlayClosed:H,onAmPmChange:R[3]||(R[3]=Z=>O.$emit("am-pm-change",Z))}),nr({_:2},[ut(k(A),(Z,ie)=>({name:Z,fn:ye(ee=>[Pe(O.$slots,Z,Tn(tr(ee)))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[Cs,I===0?!0:b.value]])),128))],2)),!O.timePicker&&!O.timePickerInline?Ji((D(),J("button",{key:2,ref_key:"closeTimePickerBtn",ref:y,type:"button",class:Le(x.value),"aria-label":(X=k(u))==null?void 0:X.closeTimePicker,tabindex:"0",onKeydown:[R[4]||(R[4]=at($=>M(!1),["enter"])),R[5]||(R[5]=at($=>M(!1),["space"]))],onClick:R[6]||(R[6]=$=>M(!1))},[O.$slots["calendar-icon"]?Pe(O.$slots,"calendar-icon",{key:0}):oe("",!0),O.$slots["calendar-icon"]?oe("",!0):(D(),ve(k(ah),{key:1}))],42,MZ)),[[Cs,!k(p)(O.hideNavigation,"time")]]):oe("",!0)],2)],14,NZ)):oe("",!0)]}),_:3},8,["name","css"])])}}}),rN=(t,e,n,r)=>{const i=(_,v)=>Array.isArray(e[_])?e[_][v]:e[_],s=_=>t.enableSeconds?Array.isArray(e.seconds)?e.seconds[_]:e.seconds:0,o=(_,v)=>_?v!==void 0?To(_,i("hours",v),i("minutes",v),s(v)):To(_,e.hours,e.minutes,s()):p_(_e(),s(v)),a=(_,v)=>{e[_]=v},l=(_,v)=>{const b=Object.fromEntries(Object.keys(e).map(g=>g===_?[g,v]:[g,e[g]].slice()));if(t.range&&!t.disableTimeRangeValidation){const g=T=>n.value?To(n.value[T],b.hours[T],b.minutes[T],b.seconds[T]):null,w=T=>f_(n.value[T],0);return!(Nt(g(0),g(1))&&(_d(g(0),w(1))||Td(g(1),w(0))))}return!0},u=(_,v)=>{l(_,v)&&(a(_,v),r&&r())},c=_=>{u("hours",_)},d=_=>{u("minutes",_)},h=_=>{u("seconds",_)},f=(_,v,b,g)=>{v&&c(_),!v&&!b&&d(_),b&&h(_),n.value&&g(n.value)},p=_=>{if(_){const v=Array.isArray(_),b=v?[+_[0].hours,+_[1].hours]:+_.hours,g=v?[+_[0].minutes,+_[1].minutes]:+_.minutes,w=v?[+_[0].seconds,+_[1].seconds]:+_.seconds;a("hours",b),a("minutes",g),t.enableSeconds&&a("seconds",w)}},m=(_,v)=>{const b={hours:Array.isArray(e.hours)?e.hours[_]:e.hours,disabledArr:[]};return(v||v===0)&&(b.hours=v),Array.isArray(t.disabledTimes)&&(b.disabledArr=t.range&&Array.isArray(t.disabledTimes[_])?t.disabledTimes[_]:t.disabledTimes),b},y=re(()=>(_,v)=>{var b;if(Array.isArray(t.disabledTimes)){const{disabledArr:g,hours:w}=m(_,v),T=g.filter(M=>+M.hours===w);return((b=T[0])==null?void 0:b.minutes)==="*"?{hours:[w],minutes:void 0,seconds:void 0}:{hours:[],minutes:(T==null?void 0:T.map(M=>+M.minutes))??[],seconds:(T==null?void 0:T.map(M=>M.seconds?+M.seconds:void 0))??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:a,updateHours:c,updateMinutes:d,updateSeconds:h,getSetDateTime:o,updateTimeValues:f,getSecondsValue:s,assignStartTime:p,validateTime:l,disabledTimesConfig:y}},LZ=(t,e)=>{const{modelValue:n,time:r}=uh(t,e),{defaultedStartTime:i}=Cn(t),{updateTimeValues:s,getSetDateTime:o,setTime:a,assignStartTime:l,disabledTimesConfig:u,validateTime:c}=rN(t,r,n),d=v=>{const{hours:b,minutes:g,seconds:w}=v;return{hours:+b,minutes:+g,seconds:w?+w:0}},h=()=>{if(t.startTime){if(Array.isArray(t.startTime)){const b=d(t.startTime[0]),g=d(t.startTime[1]);return[nn(_e(),b),nn(_e(),g)]}const v=d(t.startTime);return nn(_e(),v)}return t.range?[null,null]:null},f=()=>{if(t.range){const[v,b]=h();n.value=[o(v,0),o(b,1)]}else n.value=o(h())},p=v=>Array.isArray(v)?[ya(_e(v[0])),ya(_e(v[1]))]:[ya(v??_e())],m=(v,b,g)=>{a("hours",v),a("minutes",b),a("seconds",t.enableSeconds?g:0)},y=()=>{const[v,b]=p(n.value);return t.range?m([v.hours,b.hours],[v.minutes,b.minutes],[v.seconds,b.minutes]):m(v.hours,v.minutes,v.seconds)};an(()=>{if(!t.shadow)return l(i.value),n.value?y():f()});const _=()=>{Array.isArray(n.value)?n.value=n.value.map((v,b)=>v&&o(v,b)):n.value=o(n.value),e("time-update")};return{modelValue:n,time:r,disabledTimesConfig:u,updateTime:(v,b=!0,g=!1)=>{s(v,b,g,_)},validateTime:c}},$Z=Ie({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...Fi},emits:["update:internal-model-value","time-update","am-pm-change"],setup(t,{expose:e,emit:n}){const r=n,i=t,s=No(),o=ti(s,"timePicker"),{time:a,modelValue:l,disabledTimesConfig:u,updateTime:c,validateTime:d}=LZ(i,r);return e({getSidebarProps:()=>({modelValue:l,time:a,updateTime:c})}),(h,f)=>(D(),ve(Xm,{"multi-calendars":0,stretch:""},{default:ye(()=>[ae(nN,Ht(h.$props,{hours:k(a).hours,minutes:k(a).minutes,seconds:k(a).seconds,"internal-model-value":h.internalModelValue,"disabled-times-config":k(u),"validate-time":k(d),"onUpdate:hours":f[0]||(f[0]=p=>k(c)(p)),"onUpdate:minutes":f[1]||(f[1]=p=>k(c)(p,!1)),"onUpdate:seconds":f[2]||(f[2]=p=>k(c)(p,!1,!0)),onAmPmChange:f[3]||(f[3]=p=>h.$emit("am-pm-change",p))}),nr({_:2},[ut(k(o),(p,m)=>({name:p,fn:ye(y=>[Pe(h.$slots,p,Tn(tr(y)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3}))}}),UZ={class:"dp__month_year_row"},FZ=["aria-label","onClick","onKeydown"],VZ=Ie({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...Fi},emits:["update-month-year","mount","reset-flow","overlay-closed"],setup(t,{expose:e,emit:n}){const r=n,i=t,{defaultedTransitions:s,defaultedAriaLabels:o,defaultedMultiCalendars:a,defaultedFilters:l,defaultedConfig:u,defaultedHighlight:c}=Cn(i),{transitionName:d,showTransition:h}=lh(s),{buildMatrix:f}=Bo(),{handleMonthYearChange:p,isDisabled:m,updateMonthYear:y}=QJ(i,r),{showLeftIcon:_,showRightIcon:v}=qm(),b=ue(!1),g=ue(!1),w=ue([null,null,null,null]);an(()=>{r("mount")});const T=I=>({get:()=>i[I],set:Z=>{const ie=I===Ti.month?Ti.year:Ti.month;r("update-month-year",{[I]:Z,[ie]:i[ie]}),I===Ti.month?H(!0):O(!0)}}),M=re(T(Ti.month)),x=re(T(Ti.year)),A=re(()=>I=>({month:i.month,year:i.year,items:I===Ti.month?i.months:i.years,instance:i.instance,updateMonthYear:y,toggle:I===Ti.month?H:O})),S=re(()=>i.months.find(Z=>Z.value===i.month)||{text:"",value:0}),N=re(()=>mu(i.months,I=>{const Z=i.month===I.value,ie=Ed(I.value,KO(i.year,i.minDate),YO(i.year,i.maxDate))||l.value.months.includes(I.value),ee=JO(c.value,I.value,i.year);return{active:Z,disabled:ie,highlighted:ee}})),U=re(()=>mu(i.years,I=>{const Z=i.year===I.value,ie=Ed(I.value,gu(i.minDate),gu(i.maxDate))||l.value.years.includes(I.value),ee=S_(c.value,I.value);return{active:Z,disabled:ie,highlighted:ee}})),C=(I,Z)=>{Z!==void 0?I.value=Z:I.value=!I.value,I.value||r("overlay-closed")},H=(I=!1,Z)=>{R(I),C(b,Z)},O=(I=!1,Z)=>{R(I),C(g,Z)},R=I=>{I||r("reset-flow")},W=(I,Z)=>{i.arrowNavigation&&(w.value[Z]=On(I),f(w.value,"monthYear"))},X=re(()=>{var I,Z;return[{type:Ti.month,index:1,toggle:H,modelValue:M.value,updateModelValue:ie=>M.value=ie,text:S.value.text,showSelectionGrid:b.value,items:N.value,ariaLabel:(I=o.value)==null?void 0:I.openMonthsOverlay},{type:Ti.year,index:2,toggle:O,modelValue:x.value,updateModelValue:ie=>x.value=ie,text:i.year,showSelectionGrid:g.value,items:U.value,ariaLabel:(Z=o.value)==null?void 0:Z.openYearsOverlay}]}),$=re(()=>i.disableYearSelect?[X.value[0]]:i.yearFirst?[...X.value].reverse():X.value);return e({toggleMonthPicker:H,toggleYearPicker:O,handleMonthYearChange:p}),(I,Z)=>{var ie,ee,V;return D(),J("div",UZ,[I.$slots["month-year"]?Pe(I.$slots,"month-year",Tn(Ht({key:0},{month:t.month,year:t.year,months:t.months,years:t.years,updateMonthYear:k(y),handleMonthYearChange:k(p),instance:t.instance}))):(D(),J(Ae,{key:1},[k(_)(k(a),t.instance)&&!I.vertical?(D(),ve(Bc,{key:0,"aria-label":(ie=k(o))==null?void 0:ie.prevMonth,disabled:k(m)(!1),onActivate:Z[0]||(Z[0]=we=>k(p)(!1,!0)),onSetRef:Z[1]||(Z[1]=we=>W(we,0))},{default:ye(()=>[I.$slots["arrow-left"]?Pe(I.$slots,"arrow-left",{key:0}):oe("",!0),I.$slots["arrow-left"]?oe("",!0):(D(),ve(k(m_),{key:1}))]),_:3},8,["aria-label","disabled"])):oe("",!0),ne("div",{class:Le(["dp__month_year_wrap",{dp__year_disable_select:I.disableYearSelect}])},[(D(!0),J(Ae,null,ut($.value,(we,B)=>(D(),J(Ae,{key:we.type},[ne("button",{ref_for:!0,ref:q=>W(q,B+1),type:"button",class:"dp__btn dp__month_year_select",tabindex:"0","aria-label":we.ariaLabel,onClick:we.toggle,onKeydown:[at(Pt(we.toggle,["prevent"]),["enter"]),at(Pt(we.toggle,["prevent"]),["space"])]},[I.$slots[we.type]?Pe(I.$slots,we.type,{key:0,text:we.text,value:i[we.type]}):oe("",!0),I.$slots[we.type]?oe("",!0):(D(),J(Ae,{key:1},[Qe(Xe(we.text),1)],64))],40,FZ),ae(Us,{name:k(d)(we.showSelectionGrid),css:k(h)},{default:ye(()=>[we.showSelectionGrid?(D(),ve(ch,{key:0,items:we.items,"arrow-navigation":I.arrowNavigation,"hide-navigation":I.hideNavigation,"is-last":I.autoApply&&!k(u).keepActionRow,"skip-button-ref":!1,config:I.config,type:we.type,"header-refs":[],"esc-close":I.escClose,"text-input":I.textInput,onSelected:we.updateModelValue,onToggle:we.toggle},nr({"button-icon":ye(()=>[I.$slots["calendar-icon"]?Pe(I.$slots,"calendar-icon",{key:0}):oe("",!0),I.$slots["calendar-icon"]?oe("",!0):(D(),ve(k(ah),{key:1}))]),_:2},[I.$slots[`${we.type}-overlay-value`]?{name:"item",fn:ye(({item:q})=>[Pe(I.$slots,`${we.type}-overlay-value`,{text:q.text,value:q.value})]),key:"0"}:void 0,I.$slots[`${we.type}-overlay`]?{name:"overlay",fn:ye(()=>[Pe(I.$slots,`${we.type}-overlay`,Tn(tr(A.value(we.type))))]),key:"1"}:void 0,I.$slots[`${we.type}-overlay-header`]?{name:"header",fn:ye(()=>[Pe(I.$slots,`${we.type}-overlay-header`,{toggle:we.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","text-input","onSelected","onToggle"])):oe("",!0)]),_:2},1032,["name","css"])],64))),128))],2),k(_)(k(a),t.instance)&&I.vertical?(D(),ve(Bc,{key:1,"aria-label":(ee=k(o))==null?void 0:ee.prevMonth,disabled:k(m)(!1),onActivate:Z[2]||(Z[2]=we=>k(p)(!1,!0))},{default:ye(()=>[I.$slots["arrow-up"]?Pe(I.$slots,"arrow-up",{key:0}):oe("",!0),I.$slots["arrow-up"]?oe("",!0):(D(),ve(k(y_),{key:1}))]),_:3},8,["aria-label","disabled"])):oe("",!0),k(v)(k(a),t.instance)?(D(),ve(Bc,{key:2,ref:"rightIcon",disabled:k(m)(!0),"aria-label":(V=k(o))==null?void 0:V.nextMonth,onActivate:Z[3]||(Z[3]=we=>k(p)(!0,!0)),onSetRef:Z[4]||(Z[4]=we=>W(we,I.disableYearSelect?2:3))},{default:ye(()=>[I.$slots[I.vertical?"arrow-down":"arrow-right"]?Pe(I.$slots,I.vertical?"arrow-down":"arrow-right",{key:0}):oe("",!0),I.$slots[I.vertical?"arrow-down":"arrow-right"]?oe("",!0):(D(),ve(Ad(I.vertical?k(w_):k(g_)),{key:1}))]),_:3},8,["disabled","aria-label"])):oe("",!0)],64))])}}}),BZ=["aria-label"],jZ={class:"dp__calendar_header",role:"row"},HZ={key:0,class:"dp__calendar_header_item",role:"gridcell"},WZ=ne("div",{class:"dp__calendar_header_separator"},null,-1),KZ=["aria-label"],YZ={key:0,role:"gridcell",class:"dp__calendar_item dp__week_num"},GZ={class:"dp__cell_inner"},zZ=["id","aria-selected","aria-disabled","aria-label","onClick","onKeydown","onMouseenter","onMouseleave"],qZ=Ie({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...Fi},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(t,{expose:e,emit:n}){const r=n,i=t,{buildMultiLevelMatrix:s}=Bo(),{defaultedTransitions:o,defaultedConfig:a,defaultedAriaLabels:l,defaultedMultiCalendars:u}=Cn(i),c=ue(null),d=ue({bottom:"",left:"",transform:""}),h=ue([]),f=ue(null),p=ue(!0),m=ue(""),y=ue({startX:0,endX:0,startY:0,endY:0}),_=ue([]),v=ue({left:"50%"}),b=re(()=>i.calendar?i.calendar(i.mappedDates):i.mappedDates),g=re(()=>i.dayNames?Array.isArray(i.dayNames)?i.dayNames:i.dayNames(i.locale,+i.weekStart):SJ(i.formatLocale,i.locale,+i.weekStart));an(()=>{r("mount",{cmp:"calendar",refs:h}),a.value.noSwipe||f.value&&(f.value.addEventListener("touchstart",H,{passive:!1}),f.value.addEventListener("touchend",O,{passive:!1}),f.value.addEventListener("touchmove",R,{passive:!1})),i.monthChangeOnScroll&&f.value&&f.value.addEventListener("wheel",$,{passive:!1})});const w=ee=>ee?i.vertical?"vNext":"next":i.vertical?"vPrevious":"previous",T=(ee,V)=>{if(i.transitions){const we=zr(Ts(_e(),i.month,i.year));m.value=gr(zr(Ts(_e(),ee,V)),we)?o.value[w(!0)]:o.value[w(!1)],p.value=!1,Rr(()=>{p.value=!0})}},M=re(()=>({[i.calendarClassName]:!!i.calendarClassName})),x=re(()=>ee=>{const V=IJ(ee);return{dp__marker_dot:V.type==="dot",dp__marker_line:V.type==="line"}}),A=re(()=>ee=>Nt(ee,c.value)),S=re(()=>({dp__calendar:!0,dp__calendar_next:u.value.count>0&&i.instance!==0})),N=re(()=>ee=>i.hideOffsetDates?ee.current:!0),U=async(ee,V,we)=>{var B,q;if(r("set-hover-date",ee),(q=(B=ee.marker)==null?void 0:B.tooltip)!=null&&q.length){const le=On(h.value[V][we]);if(le){const{width:Y,height:pe}=le.getBoundingClientRect();c.value=ee.value;let Se={left:`${Y/2}px`},E=-50;if(await Rr(),_.value[0]){const{left:P,width:F}=_.value[0].getBoundingClientRect();P<0&&(Se={left:"0"},E=0,v.value.left=`${Y/2}px`),window.innerWidth<P+F&&(Se={right:"0"},E=0,v.value.left=`${F-Y/2}px`)}d.value={bottom:`${pe}px`,...Se,transform:`translateX(${E}%)`},r("tooltip-open",ee.marker)}}},C=ee=>{c.value&&(c.value=null,d.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),r("tooltip-close",ee.marker))},H=ee=>{y.value.startX=ee.changedTouches[0].screenX,y.value.startY=ee.changedTouches[0].screenY},O=ee=>{y.value.endX=ee.changedTouches[0].screenX,y.value.endY=ee.changedTouches[0].screenY,W()},R=ee=>{i.vertical&&!i.inline&&ee.preventDefault()},W=()=>{const ee=i.vertical?"Y":"X";Math.abs(y.value[`start${ee}`]-y.value[`end${ee}`])>10&&r("handle-swipe",y.value[`start${ee}`]>y.value[`end${ee}`]?"right":"left")},X=(ee,V,we)=>{ee&&(Array.isArray(h.value[V])?h.value[V][we]=ee:h.value[V]=[ee]),i.arrowNavigation&&s(h.value,"calendar")},$=ee=>{i.monthChangeOnScroll&&(ee.preventDefault(),r("handle-scroll",ee))},I=ee=>{const V=ee[0];return i.weekNumbers==="local"?MQ(V.value,{weekStartsOn:+i.weekStart}):i.weekNumbers==="iso"?DQ(V.value):typeof i.weekNumbers=="function"?i.weekNumbers(V.value):""},Z=(ee,V)=>{_o(ee,a.value),r("select-date",V)},ie=ee=>{_o(ee,a.value)};return e({triggerTransition:T}),(ee,V)=>{var we;return D(),J("div",{class:Le(S.value)},[ne("div",{ref_key:"calendarWrapRef",ref:f,role:"grid",class:Le(M.value),"aria-label":(we=k(l))==null?void 0:we.calendarWrap},[(D(),J(Ae,{key:0},[ne("div",jZ,[ee.weekNumbers?(D(),J("div",HZ,Xe(ee.weekNumName),1)):oe("",!0),(D(!0),J(Ae,null,ut(g.value,(B,q)=>(D(),J("div",{key:q,class:"dp__calendar_header_item",role:"gridcell"},[ee.$slots["calendar-header"]?Pe(ee.$slots,"calendar-header",{key:0,day:B,index:q}):oe("",!0),ee.$slots["calendar-header"]?oe("",!0):(D(),J(Ae,{key:1},[Qe(Xe(B),1)],64))]))),128))]),WZ,ae(Us,{name:m.value,css:!!ee.transitions},{default:ye(()=>{var B;return[p.value?(D(),J("div",{key:0,class:"dp__calendar",role:"rowgroup","aria-label":((B=k(l))==null?void 0:B.calendarDays)||void 0},[(D(!0),J(Ae,null,ut(b.value,(q,le)=>(D(),J("div",{key:le,class:"dp__calendar_row",role:"row"},[ee.weekNumbers?(D(),J("div",YZ,[ne("div",GZ,Xe(I(q.days)),1)])):oe("",!0),(D(!0),J(Ae,null,ut(q.days,(Y,pe)=>{var Se,E,P;return D(),J("div",{id:Y.value.toISOString().split("T")[0],ref_for:!0,ref:F=>X(F,le,pe),key:pe+le,role:"gridcell",class:"dp__calendar_item","aria-selected":Y.classData.dp__active_date||Y.classData.dp__range_start||Y.classData.dp__range_start,"aria-disabled":Y.classData.dp__cell_disabled||void 0,"aria-label":(E=(Se=k(l))==null?void 0:Se.day)==null?void 0:E.call(Se,Y),tabindex:"0",onClick:Pt(F=>Z(F,Y),["prevent"]),onKeydown:[at(F=>ee.$emit("select-date",Y),["enter"]),at(F=>ee.$emit("handle-space",Y),["space"])],onMouseenter:F=>U(Y,le,pe),onMouseleave:F=>C(Y)},[ne("div",{class:Le(["dp__cell_inner",Y.classData])},[ee.$slots.day&&N.value(Y)?Pe(ee.$slots,"day",{key:0,day:+Y.text,date:Y.value}):oe("",!0),ee.$slots.day?oe("",!0):(D(),J(Ae,{key:1},[Qe(Xe(Y.text),1)],64)),Y.marker&&N.value(Y)?(D(),J(Ae,{key:2},[ee.$slots.marker?Pe(ee.$slots,"marker",{key:0,marker:Y.marker,day:+Y.text,date:Y.value}):(D(),J("div",{key:1,class:Le(x.value(Y.marker)),style:Nn(Y.marker.color?{backgroundColor:Y.marker.color}:{})},null,6))],64)):oe("",!0),A.value(Y.value)?(D(),J("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:_,class:"dp__marker_tooltip",style:Nn(d.value)},[(P=Y.marker)!=null&&P.tooltip?(D(),J("div",{key:0,class:"dp__tooltip_content",onClick:ie},[(D(!0),J(Ae,null,ut(Y.marker.tooltip,(F,z)=>(D(),J("div",{key:z,class:"dp__tooltip_text"},[ee.$slots["marker-tooltip"]?Pe(ee.$slots,"marker-tooltip",{key:0,tooltip:F,day:Y.value}):oe("",!0),ee.$slots["marker-tooltip"]?oe("",!0):(D(),J(Ae,{key:1},[ne("div",{class:"dp__tooltip_mark",style:Nn(F.color?{backgroundColor:F.color}:{})},null,4),ne("div",null,Xe(F.text),1)],64))]))),128)),ne("div",{class:"dp__arrow_bottom_tp",style:Nn(v.value)},null,4)])):oe("",!0)],4)):oe("",!0)],2)],40,zZ)}),128))]))),128))],8,KZ)):oe("",!0)]}),_:3},8,["name","css"])],64))],10,BZ)],2)}}}),JS=t=>Array.isArray(t),QZ=(t,e,n,r)=>{const i=ue([]),{modelValue:s,calendars:o,time:a}=uh(t,e),{defaultedMultiCalendars:l,defaultedStartTime:u}=Cn(t),{validateMonthYearInRange:c,isDisabled:d,isDateRangeAllowed:h,checkMinMaxRange:f}=Ou(t),{updateTimeValues:p,getSetDateTime:m,setTime:y,assignStartTime:_,validateTime:v,disabledTimesConfig:b}=rN(t,a,s,r),g=re(()=>Q=>o.value[Q]?o.value[Q].month:0),w=re(()=>Q=>o.value[Q]?o.value[Q].year:0),T=(Q,L,K)=>{var j,se;o.value[Q]||(o.value[Q]={month:0,year:0}),o.value[Q].month=YS(L)?(j=o.value[Q])==null?void 0:j.month:L,o.value[Q].year=YS(K)?(se=o.value[Q])==null?void 0:se.year:K},M=()=>{t.autoApply&&e("select-date")};pn(s,(Q,L)=>{JSON.stringify(Q)!==JSON.stringify(L)&&S()}),an(()=>{t.shadow||(s.value||(I(),u.value&&_(u.value)),S(!0),t.focusStartDate&&t.startDate&&I())});const x=re(()=>{var Q;return(Q=t.flow)!=null&&Q.length&&!t.partialFlow?t.flowStep===t.flow.length:!0}),A=()=>{t.autoApply&&x.value&&e("auto-apply",t.partialFlow)},S=(Q=!1)=>{if(s.value)return Array.isArray(s.value)?(i.value=s.value,R(Q)):U(s.value,Q);if(l.value.count&&Q&&!t.startDate)return N(_e(),Q)},N=(Q,L=!1)=>{if((!l.value.count||!l.value.static||L)&&T(0,At(Q),ht(Q)),l.value.count)for(let K=1;K<l.value.count;K++){const j=nn(_e(),{month:g.value(K-1),year:w.value(K-1)}),se=yO(j,{months:1});o.value[K]={month:At(se),year:ht(se)}}},U=(Q,L)=>{N(Q),y("hours",Ni(Q)),y("minutes",rs(Q)),y("seconds",fu(Q)),l.value.count&&L&&$()},C=Q=>{if(l.value.count){if(l.value.solo)return 0;const L=At(Q[0]),K=At(Q[1]);return Math.abs(K-L)<l.value.count?0:1}return 1},H=(Q,L)=>{Q[1]&&t.showLastInRange?N(Q[C(Q)],L):N(Q[0],L);const K=(j,se)=>[j(Q[0]),Q[1]?j(Q[1]):a[se][1]];y("hours",K(Ni,"hours")),y("minutes",K(rs,"minutes")),y("seconds",K(fu,"seconds"))},O=(Q,L)=>{if((t.range||t.weekPicker)&&!t.multiDates)return H(Q,L);if(t.multiDates&&L){const K=Q[Q.length-1];return U(K,L)}},R=Q=>{const L=s.value;O(L,Q),l.value.count&&l.value.solo&&$()},W=(Q,L)=>{const K=nn(_e(),{month:g.value(L),year:w.value(L)}),j=Q<0?Oi(K,1):pu(K,1);c(At(j),ht(j),Q<0,t.preventMinMaxNavigation)&&(T(L,At(j),ht(j)),e("update-month-year",{instance:L,month:At(j),year:ht(j)}),l.value.count&&!l.value.solo&&X(L),n())},X=Q=>{for(let L=Q-1;L>=0;L--){const K=pu(nn(_e(),{month:g.value(L+1),year:w.value(L+1)}),1);T(L,At(K),ht(K))}for(let L=Q+1;L<=l.value.count-1;L++){const K=Oi(nn(_e(),{month:g.value(L-1),year:w.value(L-1)}),1);T(L,At(K),ht(K))}},$=()=>{if(Array.isArray(s.value)&&s.value.length===2){const Q=_e(_e(s.value[1]?s.value[1]:Oi(s.value[0],1))),[L,K]=[At(s.value[0]),ht(s.value[0])],[j,se]=[At(s.value[1]),ht(s.value[1])];(L!==j||L===j&&K!==se)&&l.value.solo&&T(1,At(Q),ht(Q))}else s.value&&!Array.isArray(s.value)&&(T(0,At(s.value),ht(s.value)),N(_e()))},I=()=>{t.startDate&&(T(0,At(_e(t.startDate)),ht(_e(t.startDate))),l.value.count&&X(0))},Z=(Q,L)=>{t.monthChangeOnScroll&&W(t.monthChangeOnScroll!=="inverse"?-Q.deltaY:Q.deltaY,L)},ie=(Q,L,K=!1)=>{t.monthChangeOnArrows&&t.vertical===K&&ee(Q,L)},ee=(Q,L)=>{W(Q==="right"?-1:1,L)},V=Q=>t.markers.find(L=>Nt(zS(Q.value),zS(L.date))),we=(Q,L)=>{switch(t.sixWeeks===!0?"append":t.sixWeeks){case"prepend":return[!0,!1];case"center":return[Q==0,!0];case"fair":return[Q==0||L>Q,!0];case"append":return[!1,!1];default:return[!1,!1]}},B=(Q,L,K,j)=>{if(t.sixWeeks&&Q.length<6){const se=6-Q.length,me=(L.getDay()+7-j)%7,je=6-(K.getDay()+7-j)%7,[$e,et]=we(me,je);for(let Ut=1;Ut<=se;Ut++)if(et?!!(Ut%2)==$e:$e){const ze=Q[0].days[0],Be=q(vs(ze.value,-7),At(L));Q.unshift({days:Be})}else{const ze=Q[Q.length-1],Be=ze.days[ze.days.length-1],qe=q(vs(Be.value,1),At(L));Q.push({days:qe})}}return Q},q=(Q,L)=>{const K=_e(Q),j=[];for(let se=0;se<7;se++){const me=vs(K,se),je=At(me)!==L;j.push({text:t.hideOffsetDates&&je?"":me.getDate(),value:me,current:!je,classData:{}})}return j},le=(Q,L)=>{const K=[],j=_e(pi(new Date(L,Q),t.timezone)),se=_e(pi(new Date(L,Q+1,0),t.timezone)),me=t.weekStart,je=Ua(j,{weekStartsOn:me}),$e=et=>{const Ut=q(et,Q);if(K.push({days:Ut}),!K[K.length-1].days.some(ze=>Nt(zr(ze.value),zr(se)))){const ze=vs(et,7);$e(ze)}};return $e(je),B(K,j,se,me)},Y=Q=>(s.value=bf(_e(Q.value),t.timezone,t.weekStart),e("date-update",Q.value),A()),pe=Q=>{const L=To(_e(Q.value),a.hours,a.minutes,de());e("date-update",L),t.multiDates?C_(L,s,t.multiDatesLimit):s.value=L,r(),Rr().then(()=>{A()})},Se=Q=>t.noDisabledRange?zO(i.value[0],Q).some(L=>d(L)):!1,E=()=>{i.value=s.value?s.value.slice():[],i.value.length===2&&!(t.fixedStart||t.fixedEnd)&&(i.value=[])},P=(Q,L)=>{const K=[_e(Q.value),vs(_e(Q.value),+t.autoRange)];h(K)?(L&&F(Q.value),i.value=K):e("invalid-date",Q.value)},F=Q=>{const L=At(_e(Q)),K=ht(_e(Q));if(T(0,L,K),l.value.count>0)for(let j=1;j<l.value.count;j++){const se=NJ(nn(_e(Q),{year:g.value(j-1),month:w.value(j-1)}));T(j,se.month,se.year)}},z=Q=>Array.isArray(s.value)&&s.value.length===2?t.fixedStart&&(gr(Q,s.value[0])||Nt(Q,s.value[0]))?[s.value[0],Q]:t.fixedEnd&&(er(Q,s.value[1])||Nt(Q,s.value[1]))?[Q,s.value[1]]:(e("invalid-fixed-range",Q),s.value):[],he=Q=>{if(Se(Q.value)||!f(Q.value,s.value,t.fixedStart?0:1))return e("invalid-date",Q.value);i.value=z(_e(Q.value))},fe=(Q,L)=>{if(E(),t.autoRange)return P(Q,L);if(t.fixedStart||t.fixedEnd)return he(Q);i.value[0]?f(_e(Q.value),s.value)&&!Se(Q.value)?er(_e(Q.value),_e(i.value[0]))?(i.value.unshift(_e(Q.value)),e("range-end",i.value[0])):(i.value[1]=_e(Q.value),e("range-end",i.value[1])):(t.autoApply&&e("auto-apply-invalid",Q.value),e("invalid-date",Q.value)):(i.value[0]=_e(Q.value),e("range-start",i.value[0]))},de=(Q=!0)=>t.enableSeconds?Array.isArray(a.seconds)?Q?a.seconds[0]:a.seconds[1]:a.seconds:0,te=Q=>{i.value[Q]=To(i.value[Q],a.hours[Q],a.minutes[Q],de(Q!==1))},G=()=>{var Q,L;i.value[0]&&i.value[1]&&+((Q=i.value)==null?void 0:Q[0])>+((L=i.value)==null?void 0:L[1])&&(i.value.reverse(),e("range-start",i.value[0]),e("range-end",i.value[1]))},ce=()=>{i.value.length&&(i.value[0]&&!i.value[1]?te(0):(te(0),te(1),r()),G(),s.value=i.value.slice(),Jm(i.value,e,t.autoApply,t.modelAuto))},be=(Q,L=!1)=>{if(d(Q.value)||!Q.current&&t.hideOffsetDates)return e("invalid-date",Q.value);if(t.weekPicker)return Y(Q);if(!t.range)return pe(Q);JS(a.hours)&&JS(a.minutes)&&!t.multiDates&&(fe(Q,L),ce())},Ce=(Q,L)=>{var K;T(Q,L.month,L.year),l.value.count&&!l.value.solo&&X(Q),e("update-month-year",{instance:Q,month:L.month,year:L.year}),n(l.value.solo?Q:void 0);const j=(K=t.flow)!=null&&K.length?t.flow[t.flowStep]:void 0;!L.fromNav&&(j===Bi.month||j===Bi.year)&&r()},Ne=(Q,L)=>{Array.isArray(Q)&&Q.length<=2&&t.range?s.value=Q.map(K=>pi(_e(K),L?void 0:t.timezone)):Array.isArray(Q)||(s.value=pi(_e(Q),L?void 0:t.timezone)),M(),t.multiCalendars&&Rr().then(()=>S(!0))},Te=()=>{t.range?s.value&&Array.isArray(s.value)&&s.value[0]?s.value=er(_e(),s.value[0])?[_e(),s.value[0]]:[s.value[0],_e()]:s.value=[_e()]:s.value=_e(),M()},Me=()=>{if(Array.isArray(s.value))if(t.multiDates){const Q=pt();s.value[s.value.length-1]=m(Q)}else s.value=s.value.map((Q,L)=>Q&&m(Q,L));else s.value=m(s.value);e("time-update")},pt=()=>Array.isArray(s.value)&&s.value.length?s.value[s.value.length-1]:null;return{calendars:o,modelValue:s,month:g,year:w,time:a,disabledTimesConfig:b,validateTime:v,getCalendarDays:le,getMarker:V,handleScroll:Z,handleSwipe:ee,handleArrow:ie,selectDate:be,updateMonthYear:Ce,presetDate:Ne,selectCurrentDate:Te,updateTime:(Q,L=!0,K=!1)=>{p(Q,L,K,Me)}}},XZ={key:0},JZ=Ie({__name:"DatePicker",props:{...Fi},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:n}){const r=n,i=t,{calendars:s,month:o,year:a,modelValue:l,time:u,disabledTimesConfig:c,validateTime:d,getCalendarDays:h,getMarker:f,handleArrow:p,handleScroll:m,handleSwipe:y,selectDate:_,updateMonthYear:v,presetDate:b,selectCurrentDate:g,updateTime:w}=QZ(i,r,$,I),T=No(),{setHoverDate:M,getDayClassData:x,clearHoverDate:A}=eZ(l,i),{defaultedMultiCalendars:S}=Cn(i),N=ue([]),U=ue([]),C=ue(null),H=ti(T,"calendar"),O=ti(T,"monthYear"),R=ti(T,"timePicker"),W=ie=>{i.shadow||r("mount",ie)};pn(s,()=>{i.shadow||setTimeout(()=>{r("recalculate-position")},0)},{deep:!0});const X=re(()=>ie=>h(o.value(ie),a.value(ie)).map(ee=>({...ee,days:ee.days.map(V=>(V.marker=f(V),V.classData=x(V),V))})));function $(ie){var ee;ie||ie===0?(ee=U.value[ie])==null||ee.triggerTransition(o.value(ie),a.value(ie)):U.value.forEach((V,we)=>V.triggerTransition(o.value(we),a.value(we)))}function I(){r("update-flow-step")}const Z=(ie,ee=!1)=>{_(ie,ee),i.spaceConfirm&&r("select-date")};return e({clearHoverDate:A,presetDate:b,selectCurrentDate:g,toggleMonthPicker:(ie,ee,V=0)=>{var we;(we=N.value[V])==null||we.toggleMonthPicker(ie,ee)},toggleYearPicker:(ie,ee,V=0)=>{var we;(we=N.value[V])==null||we.toggleYearPicker(ie,ee)},toggleTimePicker:(ie,ee,V)=>{var we;(we=C.value)==null||we.toggleTimePicker(ie,ee,V)},handleArrow:p,updateMonthYear:v,getSidebarProps:()=>({modelValue:l,month:o,year:a,time:u,updateTime:w,updateMonthYear:v,selectDate:_,presetDate:b})}),(ie,ee)=>(D(),J(Ae,null,[ae(Xm,{"multi-calendars":k(S).count},{default:ye(({instance:V,index:we})=>[ie.disableMonthYearSelect?oe("",!0):(D(),ve(VZ,Ht({key:0,ref:B=>{B&&(N.value[we]=B)},months:k(HO)(ie.formatLocale,ie.locale,ie.monthNameFormat),years:k(E_)(ie.yearRange,ie.reverseYears),month:k(o)(V),year:k(a)(V),instance:V},ie.$props,{onMount:ee[0]||(ee[0]=B=>W(k(wa).header)),onResetFlow:ee[1]||(ee[1]=B=>ie.$emit("reset-flow")),onUpdateMonthYear:B=>k(v)(V,B),onOverlayClosed:ee[2]||(ee[2]=B=>ie.$emit("focus-menu"))}),nr({_:2},[ut(k(O),(B,q)=>({name:B,fn:ye(le=>[Pe(ie.$slots,B,Tn(tr(le)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),ae(qZ,Ht({ref:B=>{B&&(U.value[we]=B)},"mapped-dates":X.value(V),month:k(o)(V),year:k(a)(V),instance:V},ie.$props,{onSelectDate:B=>k(_)(B,V!==1),onHandleSpace:B=>Z(B,V!==1),onSetHoverDate:ee[3]||(ee[3]=B=>k(M)(B)),onHandleScroll:B=>k(m)(B,V),onHandleSwipe:B=>k(y)(B,V),onMount:ee[4]||(ee[4]=B=>W(k(wa).calendar)),onResetFlow:ee[5]||(ee[5]=B=>ie.$emit("reset-flow")),onTooltipOpen:ee[6]||(ee[6]=B=>ie.$emit("tooltip-open",B)),onTooltipClose:ee[7]||(ee[7]=B=>ie.$emit("tooltip-close",B))}),nr({_:2},[ut(k(H),(B,q)=>({name:B,fn:ye(le=>[Pe(ie.$slots,B,Tn(tr({...le})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars"]),ie.enableTimePicker?(D(),J("div",XZ,[ie.$slots["time-picker"]?Pe(ie.$slots,"time-picker",Tn(Ht({key:0},{time:k(u),updateTime:k(w)}))):(D(),ve(nN,Ht({key:1,ref_key:"timePickerRef",ref:C},ie.$props,{hours:k(u).hours,minutes:k(u).minutes,seconds:k(u).seconds,"internal-model-value":ie.internalModelValue,"disabled-times-config":k(c),"validate-time":k(d),onMount:ee[8]||(ee[8]=V=>W(k(wa).timePicker)),"onUpdate:hours":ee[9]||(ee[9]=V=>k(w)(V)),"onUpdate:minutes":ee[10]||(ee[10]=V=>k(w)(V,!1)),"onUpdate:seconds":ee[11]||(ee[11]=V=>k(w)(V,!1,!0)),onResetFlow:ee[12]||(ee[12]=V=>ie.$emit("reset-flow")),onOverlayClosed:ee[13]||(ee[13]=V=>ie.$emit("time-picker-close")),onOverlayOpened:ee[14]||(ee[14]=V=>ie.$emit("time-picker-open",V)),onAmPmChange:ee[15]||(ee[15]=V=>ie.$emit("am-pm-change",V))}),nr({_:2},[ut(k(R),(V,we)=>({name:V,fn:ye(B=>[Pe(ie.$slots,V,Tn(tr(B)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):oe("",!0)],64))}}),ZZ=(t,e)=>{const n=ue(),{defaultedMultiCalendars:r,defaultedConfig:i,defaultedHighlight:s}=Cn(t),{modelValue:o,year:a,month:l,calendars:u}=uh(t,e),{isDisabled:c}=Ou(t),{selectYear:d,groupedYears:h,showYearPicker:f,isDisabled:p,toggleYearPicker:m,handleYearSelect:y,handleYear:_}=tN({modelValue:o,multiCalendars:r,highlight:s,calendars:u,month:l,year:a,props:t,emit:e}),v=(A,S)=>[A,S].map(N=>bo(N,"MMMM",{locale:t.formatLocale})).join("-"),b=re(()=>A=>o.value?Array.isArray(o.value)?o.value.some(S=>MS(A,S)):MS(o.value,A):!1),g=A=>{if(t.range){if(Array.isArray(o.value)){const S=Nt(A,o.value[0])||Nt(A,o.value[1]);return zm(o.value,n.value,A)&&!S}return!1}return!1},w=re(()=>A=>{const S=nn(new Date,{year:a.value(A)});return bq({start:Tq(S),end:_q(S)}).map(N=>{const U=bd(N),C=kS(N),H=c(N),O=g(U),R=typeof s.value=="function"?s.value({quarter:AS(U),year:ht(U)}):!!s.value.quarters.find(W=>W.quarter===AS(U)&&W.year===ht(U));return{text:v(U,C),value:U,active:b.value(U),highlighted:R,disabled:H,isBetween:O}})}),T=A=>{C_(A,o,t.multiDatesLimit),e("auto-apply",!0)},M=A=>{const S=I_(o,A,e);Jm(S,e,t.autoApply,t.modelAuto)},x=A=>{o.value=A,e("auto-apply")};return{defaultedConfig:i,defaultedMultiCalendars:r,groupedYears:h,year:a,isDisabled:p,quarters:w,showYearPicker:f,modelValue:o,setHoverDate:A=>{n.value=A},selectYear:d,selectQuarter:(A,S,N)=>{if(!N)return u.value[S].month=At(kS(A)),t.multiDates?T(A):t.range?M(A):x(A)},toggleYearPicker:m,handleYearSelect:y,handleYear:_}},eee={class:"dp--quarter-items"},tee=["disabled","onClick","onMouseover"],nee=Ie({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...Fi},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end"],setup(t,{expose:e,emit:n}){const r=n,i=t,s=No(),o=ti(s,"yearMode"),{defaultedMultiCalendars:a,defaultedConfig:l,groupedYears:u,year:c,isDisabled:d,quarters:h,modelValue:f,showYearPicker:p,setHoverDate:m,selectQuarter:y,toggleYearPicker:_,handleYearSelect:v,handleYear:b}=ZZ(i,r);return e({getSidebarProps:()=>({modelValue:f,year:c,selectQuarter:y,handleYearSelect:v,handleYear:b})}),(g,w)=>(D(),ve(Xm,{"multi-calendars":k(a).count,stretch:""},{default:ye(({instance:T})=>[ne("div",{class:"dp-quarter-picker-wrap",style:Nn({minHeight:`${k(l).modeHeight}px`})},[ne("div",null,[ae(eN,Ht(g.$props,{items:k(u)(T),instance:T,"show-year-picker":k(p)[T],year:k(c)(T),"is-disabled":M=>k(d)(T,M),onHandleYear:M=>k(b)(T,M),onYearSelect:M=>k(v)(M,T),onToggleYearPicker:M=>k(_)(T,M==null?void 0:M.flow,M==null?void 0:M.show)}),nr({_:2},[ut(k(o),(M,x)=>({name:M,fn:ye(A=>[Pe(g.$slots,M,Tn(tr(A)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),ne("div",eee,[(D(!0),J(Ae,null,ut(k(h)(T),(M,x)=>(D(),J("div",{key:x},[ne("button",{type:"button",class:Le(["dp--qr-btn",{"dp--qr-btn-active":M.active,"dp--qr-btn-between":M.isBetween,"dp--qr-btn-disabled":M.disabled,"dp--highlighted":M.highlighted}]),disabled:M.disabled,onClick:A=>k(y)(M.value,T,M.disabled),onMouseover:A=>k(m)(M.value)},[g.$slots.quarter?Pe(g.$slots,"quarter",{key:0,value:M.value,text:M.text}):(D(),J(Ae,{key:1},[Qe(Xe(M.text),1)],64))],42,tee)]))),128))])],4)]),_:3},8,["multi-calendars"]))}}),ree=["id","onKeydown"],iee={key:0,class:"dp__sidebar_left"},see={key:1,class:"dp--preset-dates"},oee=["onClick","onKeydown"],aee={key:2,class:"dp__sidebar_right"},lee={key:3,class:"dp__action_extra"},ZS=Ie({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...Qm,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:n}){const r=n,i=t,s=re(()=>{const{openOnTop:E,...P}=i;return{...P,flowStep:x.value,noOverlayFocus:i.noOverlayFocus}}),{setMenuFocused:o,setShiftKey:a,control:l}=ZO(),u=No(),{defaultedTextInput:c,defaultedInline:d,defaultedConfig:h}=Cn(i),f=ue(null),p=ue(0),m=ue(null),y=ue(null),_=ue(!1),v=ue(null);an(()=>{if(!i.shadow){_.value=!0,b(),window.addEventListener("resize",b);const E=On(m);if(E&&!c.value.enabled&&!d.value.enabled&&(o(!0),C()),E){const P=F=>{h.value.allowPreventDefault&&F.preventDefault(),_o(F,h.value,!0)};E.addEventListener("pointerdown",P),E.addEventListener("mousedown",P)}}}),ja(()=>{window.removeEventListener("resize",b)});const b=()=>{const E=On(y);E&&(p.value=E.getBoundingClientRect().width)},{arrowRight:g,arrowLeft:w,arrowDown:T,arrowUp:M}=Bo(),{flowStep:x,updateFlowStep:A,childMount:S,resetFlow:N}=tZ(i,r,v),U=re(()=>i.monthPicker?yZ:i.yearPicker?bZ:i.timePicker?$Z:i.quarterPicker?nee:JZ),C=()=>{const E=On(m);E&&E.focus({preventScroll:!0})},H=re(()=>{var E;return((E=v.value)==null?void 0:E.getSidebarProps())||{}}),O=()=>{i.openOnTop&&r("recalculate-position")},R=ti(u,"action"),W=re(()=>i.monthPicker||i.yearPicker?ti(u,"monthYear"):i.timePicker?ti(u,"timePicker"):ti(u,"shared")),X=re(()=>i.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),$=re(()=>({dp__menu_disabled:i.disabled,dp__menu_readonly:i.readonly})),I=re(()=>({dp__menu:!0,dp__menu_index:!d.value.enabled,dp__relative:d.value.enabled,[i.menuClassName]:!!i.menuClassName})),Z=E=>{_o(E,h.value,!0)},ie=()=>{i.escClose&&r("close-picker")},ee=E=>{if(i.arrowNavigation){if(E==="up")return M();if(E==="down")return T();if(E==="left")return w();if(E==="right")return g()}else E==="left"||E==="up"?le("handleArrow","left",0,E==="up"):le("handleArrow","right",0,E==="down")},V=E=>{a(E.shiftKey),!i.disableMonthYearSelect&&E.code==="Tab"&&E.target.classList.contains("dp__menu")&&l.value.shiftKeyInMenu&&(E.preventDefault(),_o(E,h.value,!0),r("close-picker"))},we=()=>{C(),r("time-picker-close")},B=E=>{var P,F,z;(P=v.value)==null||P.toggleTimePicker(!1,!1),(F=v.value)==null||F.toggleMonthPicker(!1,!1,E),(z=v.value)==null||z.toggleYearPicker(!1,!1,E)},q=(E,P=0)=>{var F,z,he;return E==="month"?(F=v.value)==null?void 0:F.toggleMonthPicker(!1,!0,P):E==="year"?(z=v.value)==null?void 0:z.toggleYearPicker(!1,!0,P):E==="time"?(he=v.value)==null?void 0:he.toggleTimePicker(!0,!1):B(P)},le=(E,...P)=>{var F,z;(F=v.value)!=null&&F[E]&&((z=v.value)==null||z[E](...P))},Y=()=>{le("selectCurrentDate")},pe=(E,P)=>{le("presetDate",E,P)},Se=()=>{le("clearHoverDate")};return e({updateMonthYear:(E,P)=>{le("updateMonthYear",E,P)},switchView:q}),(E,P)=>{var F;return D(),J("div",{id:E.uid?`dp-menu-${E.uid}`:void 0,ref_key:"dpMenuRef",ref:m,tabindex:"0",role:"dialog",class:Le(I.value),onMouseleave:Se,onClick:Z,onKeydown:[at(ie,["esc"]),P[18]||(P[18]=at(Pt(z=>ee("left"),["prevent"]),["left"])),P[19]||(P[19]=at(Pt(z=>ee("up"),["prevent"]),["up"])),P[20]||(P[20]=at(Pt(z=>ee("down"),["prevent"]),["down"])),P[21]||(P[21]=at(Pt(z=>ee("right"),["prevent"]),["right"])),V]},[(E.disabled||E.readonly)&&k(d).enabled?(D(),J("div",{key:0,class:Le($.value)},null,2)):oe("",!0),!k(d).enabled&&!E.teleportCenter?(D(),J("div",{key:1,class:Le(X.value)},null,2)):oe("",!0),ne("div",{ref_key:"innerMenuRef",ref:y,class:Le({dp__menu_content_wrapper:((F=E.presetDates)==null?void 0:F.length)||!!E.$slots["left-sidebar"]||!!E.$slots["right-sidebar"]}),style:Nn({"--dp-menu-width":`${p.value}px`})},[E.$slots["left-sidebar"]?(D(),J("div",iee,[Pe(E.$slots,"left-sidebar",Tn(tr(H.value)))])):oe("",!0),E.presetDates.length?(D(),J("div",see,[(D(!0),J(Ae,null,ut(E.presetDates,(z,he)=>(D(),J(Ae,{key:he},[z.slot?Pe(E.$slots,z.slot,{key:0,presetDate:pe,label:z.label,value:z.value}):(D(),J("button",{key:1,type:"button",style:Nn(z.style||{}),class:"dp__btn dp--preset-range",onClick:Pt(fe=>pe(z.value,z.noTz),["prevent"]),onKeydown:[at(Pt(fe=>pe(z.value,z.noTz),["prevent"]),["enter"]),at(Pt(fe=>pe(z.value,z.noTz),["prevent"]),["space"])]},Xe(z.label),45,oee))],64))),128))])):oe("",!0),ne("div",{ref_key:"calendarWrapperRef",ref:f,class:"dp__instance_calendar",role:"document"},[(D(),ve(Ad(U.value),Ht({ref_key:"dynCmpRef",ref:v},s.value,{"flow-step":k(x),onMount:k(S),onUpdateFlowStep:k(A),onResetFlow:k(N),onFocusMenu:C,onSelectDate:P[0]||(P[0]=z=>E.$emit("select-date")),onDateUpdate:P[1]||(P[1]=z=>E.$emit("date-update",z)),onTooltipOpen:P[2]||(P[2]=z=>E.$emit("tooltip-open",z)),onTooltipClose:P[3]||(P[3]=z=>E.$emit("tooltip-close",z)),onAutoApply:P[4]||(P[4]=z=>E.$emit("auto-apply",z)),onRangeStart:P[5]||(P[5]=z=>E.$emit("range-start",z)),onRangeEnd:P[6]||(P[6]=z=>E.$emit("range-end",z)),onInvalidFixedRange:P[7]||(P[7]=z=>E.$emit("invalid-fixed-range",z)),onTimeUpdate:P[8]||(P[8]=z=>E.$emit("time-update")),onAmPmChange:P[9]||(P[9]=z=>E.$emit("am-pm-change",z)),onTimePickerOpen:P[10]||(P[10]=z=>E.$emit("time-picker-open",z)),onTimePickerClose:we,onRecalculatePosition:O,onUpdateMonthYear:P[11]||(P[11]=z=>E.$emit("update-month-year",z)),onAutoApplyInvalid:P[12]||(P[12]=z=>E.$emit("auto-apply-invalid",z)),onInvalidDate:P[13]||(P[13]=z=>E.$emit("invalid-date",z)),"onUpdate:internalModelValue":P[14]||(P[14]=z=>E.$emit("update:internal-model-value",z))}),nr({_:2},[ut(W.value,(z,he)=>({name:z,fn:ye(fe=>[Pe(E.$slots,z,Tn(tr({...fe})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),E.$slots["right-sidebar"]?(D(),J("div",aee,[Pe(E.$slots,"right-sidebar",Tn(tr(H.value)))])):oe("",!0),E.$slots["action-extra"]?(D(),J("div",lee,[E.$slots["action-extra"]?Pe(E.$slots,"action-extra",{key:0,selectCurrentDate:Y}):oe("",!0)])):oe("",!0)],6),!E.autoApply||k(h).keepActionRow?(D(),ve(uZ,Ht({key:2,"menu-mount":_.value},s.value,{"calendar-width":p.value,onClosePicker:P[15]||(P[15]=z=>E.$emit("close-picker")),onSelectDate:P[16]||(P[16]=z=>E.$emit("select-date")),onInvalidSelect:P[17]||(P[17]=z=>E.$emit("invalid-select")),onSelectNow:Y}),nr({_:2},[ut(k(R),(z,he)=>({name:z,fn:ye(fe=>[Pe(E.$slots,z,Tn(tr({...fe})))])}))]),1040,["menu-mount","calendar-width"])):oe("",!0)],42,ree)}}}),uee=typeof window<"u"?window:void 0,Ev=()=>{},cee=t=>Np()?(A0(t),!0):!1,dee=(t,e,n,r)=>{if(!t)return Ev;let i=Ev;const s=pn(()=>k(t),a=>{i(),a&&(a.addEventListener(e,n,r),i=()=>{a.removeEventListener(e,n,r),i=Ev})},{immediate:!0,flush:"post"}),o=()=>{s(),i()};return cee(o),o},hee=(t,e,n,r={})=>{const{window:i=uee,event:s="pointerdown"}=r;return i?dee(i,s,o=>{const a=On(t),l=On(e);!a||!l||a===o.target||o.composedPath().includes(a)||o.composedPath().includes(l)||n(o)},{passive:!0}):void 0},fee=Ie({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...Qm},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date"],setup(t,{expose:e,emit:n}){const r=n,i=t,s=No(),o=ue(!1),a=Kl(i,"modelValue"),l=Kl(i,"timezone"),u=ue(null),c=ue(null),d=ue(null),h=ue(!1),f=ue(null),p=ue(!1),{setMenuFocused:m,setShiftKey:y}=ZO(),{clearArrowNav:_}=Bo(),{mapDatesArrToMap:v,validateDate:b,isValidTime:g}=Ou(i),{defaultedTransitions:w,defaultedTextInput:T,defaultedInline:M,defaultedConfig:x}=Cn(i),{menuTransition:A,showTransition:S}=lh(w);an(()=>{ie(i.modelValue),Rr().then(()=>{M.value.enabled||(X(f.value).addEventListener("scroll",pe),window.addEventListener("resize",Se))}),M.value.enabled&&(o.value=!0)});const N=re(()=>v());ja(()=>{if(!M.value.enabled){const j=X(f.value);j&&j.removeEventListener("scroll",pe),window.removeEventListener("resize",Se)}});const U=ti(s,"all",i.presetDates),C=ti(s,"input");pn([a,l],()=>{ie(a.value)},{deep:!0});const{openOnTop:H,menuStyle:O,xCorrect:R,setMenuPosition:W,getScrollableParent:X,shadowRender:$}=XJ({menuRef:u,menuRefInner:c,inputRef:d,pickerWrapperRef:f,inline:M,emit:r,props:i,slots:s}),{inputValue:I,internalModelValue:Z,parseExternalModelValue:ie,emitModelValue:ee,formatInputValue:V,checkBeforeEmit:we}=qJ(r,i,h),B=re(()=>({dp__main:!0,dp__theme_dark:i.dark,dp__theme_light:!i.dark,dp__flex_display:M.value.enabled,dp__flex_display_with_input:M.value.input})),q=re(()=>i.dark?"dp__theme_dark":"dp__theme_light"),le=re(()=>i.teleport?{to:typeof i.teleport=="boolean"?"body":i.teleport,disabled:M.value.enabled}:{class:"dp__outer_menu_wrap"}),Y=re(()=>M.value.enabled&&(i.timePicker||i.monthPicker||i.yearPicker||i.quarterPicker)),pe=()=>{o.value&&(x.value.closeOnScroll?G():W())},Se=()=>{o.value&&W()},E=()=>{!i.disabled&&!i.readonly&&($(ZS,i),W(!1),o.value=!0,o.value&&r("open"),o.value||te(),ie(i.modelValue))},P=()=>{var j;I.value="",te(),(j=d.value)==null||j.setParsedDate(null),r("update:model-value",null),r("update:model-timezone-value",null),r("cleared"),x.value.closeOnClearValue&&G()},F=()=>{const j=Z.value;return!j||!Array.isArray(j)&&b(j)?!0:Array.isArray(j)?j.length===2&&b(j[0])&&b(j[1])?!0:i.partialRange&&!i.timePicker?b(j[0]):!1:!1},z=()=>{we()&&F()?(ee(),G()):r("invalid-select",Z.value)},he=j=>{fe(),ee(),x.value.closeOnAutoApply&&!j&&G()},fe=()=>{d.value&&T.value.enabled&&d.value.setParsedDate(Z.value)},de=(j=!1)=>{i.autoApply&&g(Z.value)&&F()&&(i.range&&Array.isArray(Z.value)?(i.partialRange||Z.value.length===2)&&he(j):he(j))},te=()=>{T.value.enabled||(Z.value=null)},G=()=>{M.value.enabled||(o.value&&(o.value=!1,R.value=!1,m(!1),y(!1),_(),r("closed"),I.value&&ie(a.value)),te(),r("blur"))},ce=(j,se,me=!1)=>{if(!j){Z.value=null;return}const je=Array.isArray(j)?!j.some(et=>!b(et)):b(j),$e=g(j);je&&$e&&(Z.value=j,se&&(p.value=me,z(),r("text-submit")))},be=()=>{i.autoApply&&g(Z.value)&&ee(),fe()},Ce=()=>o.value?G():E(),Ne=j=>{Z.value=j},Te=()=>{T.value.enabled&&(h.value=!0,V()),r("focus")},Me=()=>{if(T.value.enabled&&(h.value=!1,ie(i.modelValue),p.value)){const j=DJ(f.value);j==null||j.focus()}r("blur")},pt=j=>{c.value&&c.value.updateMonthYear(0,{month:KS(j.month),year:KS(j.year)})},Q=j=>{ie(j??i.modelValue)},L=(j,se)=>{var me;(me=c.value)==null||me.switchView(j,se)},K=j=>x.value.onClickOutside?x.value.onClickOutside(j):G();return hee(u,d,()=>K(F)),e({closeMenu:G,selectDate:z,clearValue:P,openMenu:E,onScroll:pe,formatInputValue:V,updateInternalModelValue:Ne,setMonthYear:pt,parseModel:Q,switchView:L}),(j,se)=>(D(),J("div",{ref_key:"pickerWrapperRef",ref:f,class:Le(B.value)},[ae(sZ,Ht({ref_key:"inputRef",ref:d,"input-value":k(I),"onUpdate:inputValue":se[0]||(se[0]=me=>zt(I)?I.value=me:null),"is-menu-open":o.value},j.$props,{onClear:P,onOpen:E,onSetInputDate:ce,onSetEmptyDate:k(ee),onSelectDate:z,onToggle:Ce,onClose:G,onFocus:Te,onBlur:Me,onRealBlur:se[1]||(se[1]=me=>h.value=!1)}),nr({_:2},[ut(k(C),(me,je)=>({name:me,fn:ye($e=>[Pe(j.$slots,me,Tn(tr($e)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),ae(Us,{name:k(A)(k(H)),css:k(S)&&!k(M).enabled},{default:ye(()=>[o.value?(D(),ve(Ad(j.teleport?sI:"div"),Ht({key:0,ref_key:"dpWrapMenuRef",ref:u},le.value,{class:{"dp--menu-wrapper":!k(M).enabled},style:k(M).enabled?void 0:k(O)}),{default:ye(()=>[ae(ZS,Ht({ref_key:"dpMenuRef",ref:c},j.$props,{"internal-model-value":k(Z),"onUpdate:internalModelValue":se[2]||(se[2]=me=>zt(Z)?Z.value=me:null),class:{[q.value]:!0,"dp--menu-wrapper":j.teleport},style:j.teleport?k(O):void 0,"open-on-top":k(H),"arr-map-values":N.value,"no-overlay-focus":Y.value,onClosePicker:G,onSelectDate:z,onAutoApply:de,onTimeUpdate:be,onFlowStep:se[3]||(se[3]=me=>j.$emit("flow-step",me)),onUpdateMonthYear:se[4]||(se[4]=me=>j.$emit("update-month-year",me)),onInvalidSelect:se[5]||(se[5]=me=>j.$emit("invalid-select",k(Z))),onAutoApplyInvalid:se[6]||(se[6]=me=>j.$emit("invalid-select",me)),onInvalidFixedRange:se[7]||(se[7]=me=>j.$emit("invalid-fixed-range",me)),onRecalculatePosition:k(W),onTooltipOpen:se[8]||(se[8]=me=>j.$emit("tooltip-open",me)),onTooltipClose:se[9]||(se[9]=me=>j.$emit("tooltip-close",me)),onTimePickerOpen:se[10]||(se[10]=me=>j.$emit("time-picker-open",me)),onTimePickerClose:se[11]||(se[11]=me=>j.$emit("time-picker-close",me)),onAmPmChange:se[12]||(se[12]=me=>j.$emit("am-pm-change",me)),onRangeStart:se[13]||(se[13]=me=>j.$emit("range-start",me)),onRangeEnd:se[14]||(se[14]=me=>j.$emit("range-end",me)),onDateUpdate:se[15]||(se[15]=me=>j.$emit("date-update",me)),onInvalidDate:se[16]||(se[16]=me=>j.$emit("invalid-date",me))}),nr({_:2},[ut(k(U),(me,je)=>({name:me,fn:ye($e=>[Pe(j.$slots,me,Tn(tr({...$e})))])}))]),1040,["internal-model-value","class","style","open-on-top","arr-map-values","no-overlay-focus","onRecalculatePosition"])]),_:3},16,["class","style"])):oe("",!0)]),_:3},8,["name","css"])],2))}}),A_=(()=>{const t=fee;return t.install=e=>{e.component("Vue3DatePicker",t)},t})(),pee=Object.freeze(Object.defineProperty({__proto__:null,default:A_},Symbol.toStringTag,{value:"Module"}));Object.entries(pee).forEach(([t,e])=>{t!=="default"&&(A_[t]=e)});const Nu=MI(E$);Nu.use(o_);Nu.use(lK,{firebaseApp:JA,modules:[aK()]});Nu.use(ik);Nu.use(hL);Nu.component("VueDatePicker",A_);Nu.mount("#app");
