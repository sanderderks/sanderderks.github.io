import{ak as E,al as T,bB as j,b as w,c as A,e as P,Y as b,d as _,l as $,g as F,f as Y,z as k,C as d,X as v}from"../bundle.js";var B={root:{position:"relative"}},L={root:"p-chart"},H=E.extend({name:"chart",classes:L,inlineStyles:B}),N={name:"BaseChart",extends:T,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:H,provide:function(){return{$pcChart:this,$parentInstance:this}}},C={name:"Chart",extends:N,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;j(()=>import("./c-auto-CquwA8NN.js"),[],import.meta.url).then(function(a){e.chart&&(e.chart.destroy(),e.chart=null),a&&a.default&&(e.chart=new a.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var a=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);a&&a[0]&&r&&this.$emit("select",{originalEvent:e,element:a[0],dataset:r})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function m(t){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(t)}function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?D(Object(a),!0).forEach(function(r){R(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function R(t,e,a){return(e=x(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function x(t){var e=I(t,"string");return m(e)=="symbol"?e:e+""}function I(t,e){if(m(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V=["width","height"];function J(t,e,a,r,i,l){return w(),A("div",b({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[P("canvas",b({ref:"canvas",width:t.width,height:t.height,onClick:e[0]||(e[0]=function(c){return l.onCanvasClick(c)})},S(S({},t.canvasProps),t.ptm("canvas"))),null,16,V)],16)}C.render=J;const z=_({__name:"Chart",props:{headers:{},datasets:{}},setup(t){const e=k(),a=()=>{const r=getComputedStyle(document.documentElement),i="white",l="white",c=r.getPropertyValue("--p-content-border-color");return{stacked:!1,maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:i}}},scales:{x:{ticks:{color:l},grid:{color:c}},y:{type:"linear",display:!0,position:"left",beginAtZero:!0,ticks:{color:l},grid:{color:c}},y1:{type:"linear",display:!1,position:"right",ticks:{color:l},grid:{drawOnChartArea:!1,color:c}}}}};return $(()=>{e.value=a()}),(r,i)=>(w(),F(Y(C),{type:"line",data:{labels:t.headers,datasets:t.datasets},options:e.value,class:"h-[30rem]"},null,8,["data","options"]))}});var K=(t=>(t[t.MONTHS=0]="MONTHS",t[t.YEARS_HALF=1]="YEARS_HALF",t[t.YEARS=2]="YEARS",t))(K||{});const p={0:{amount:12,getStartDate:t=>{const e=new Date(t);return e.setMonth(e.getMonth()-p[0].amount+1,1),e},calculateStartDate:(t,e)=>{const a=new Date(t);return a.setMonth(a.getMonth()+e),a},calculateEndDate:t=>{const e=new Date(t);return e.setMonth(t.getMonth()+1,0),e},getLabel:t=>y[t.getMonth()]},1:{amount:10,getStartDate:t=>{const e=new Date(t);return e.setMonth(e.getMonth()-6*p[1].amount+1,1),e},calculateStartDate:(t,e)=>{const a=new Date(t);return a.setMonth(a.getMonth()+e*6),a},calculateEndDate:t=>{const e=new Date(t);return e.setMonth(e.getMonth()+6,0),e},getLabel:(t,e)=>{const a=y[t.getMonth()].substring(0,3),r=y[e.getMonth()].substring(0,3);return`${a}-${r} ${e.getFullYear()}`}},2:{amount:10,getStartDate:t=>{const e=new Date(t);return e.setFullYear(e.getFullYear()-p[2].amount+1,0,1),e},calculateStartDate:(t,e)=>{const a=new Date(t);return a.setFullYear(a.getFullYear()+e,0,1),a},calculateEndDate:t=>{const e=new Date(t);return e.setFullYear(e.getFullYear(),12,0),e},getLabel:t=>`${t.getFullYear()}`}},y=["January","February","March","April","May","June","July","August","September","October","November","December"],X=(t,e)=>{const a=d(()=>v(t)),r=d(()=>v(e)),i=d(()=>{const n=new Date,s=new Date(n.getFullYear(),n.getMonth(),n.getDate());return p[r.value].getStartDate(s).getTime()}),l=d(()=>{const n=i.value;return a.value.filter(s=>s.date.getTime()>=n)}),c=d(()=>{const n=o=>{const u=p[r.value].calculateStartDate(new Date(i.value),o),h=p[r.value].calculateEndDate(u);return[u.getTime(),h.getTime()]},s=(o,u)=>l.value.some(h=>h.date.getTime()>=o&&h.date.getTime()<u),f=[];let g=!1;for(let o=0;o<p[r.value].amount;o++){const[u,h]=n(o);(g||s(u,h))&&(g=!0,f.push({label:p[r.value].getLabel(new Date(u),new Date(h)),startTime:u,endTime:h}))}return f}),O=d(()=>c.value.map(n=>n.label)),M=d(()=>{const n=[];return c.value.forEach(s=>{const f=l.value.filter(g=>{const o=g.date.getTime();return o>=s.startTime&&o<s.endTime});f.length?n.push({x:s.label,y:f.reduce((g,o)=>g+o.value,0)/f.length}):n.push({x:s.label,y:null})}),n});return{headers:O,filteredData:M}};export{K as D,z as _,X as u};
