import{_ as C,a as le}from"./c-Bubble.vue_vue_type_script_setup_true_lang-iHAaGDxw.js";import{d as ce,aG as fe,aH as ee,s as j,r as F,c as i,M as ae,aI as q,aJ as de,aK as te,aL as ve,aM as se,e as L,l as r,m as f,p as s,q as k,k as e,ay as he,E as z,H as D,n as g,D as A,G as O,o as pe,as as _e,w as re,t as I,h as me,f as ge,O as we,R as ke,ah as Ee}from"../bundle.js";import{_ as ye}from"./c-Dice6.vue_vue_type_script_setup_true_lang-CyLZpKXP.js";import{u as Se,H as $e}from"./c-useScoreInfo-CiqEtEpb.js";import{_ as Te}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-mAvcSgfL.js";import{_ as ne}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-SwitchField.vue_vue_type_script_setup_true_lang-JQE6dSwt.js";import"./c-SelectField.vue_vue_type_script_setup_true_lang-Bu9S1e-e.js";import"./c-validation-DokkLKHB.js";var S=(l=>(l[l.ONES=0]="ONES",l[l.TWOS=1]="TWOS",l[l.THREES=2]="THREES",l[l.FOURS=3]="FOURS",l[l.FIVES=4]="FIVES",l[l.SIXES=5]="SIXES",l[l.THREE_OF_A_KIND=6]="THREE_OF_A_KIND",l[l.FOUR_OF_A_KIND=7]="FOUR_OF_A_KIND",l[l.FULL_HOUSE=8]="FULL_HOUSE",l[l.SMALL_STRAIGHT=9]="SMALL_STRAIGHT",l[l.LARGE_STRAIGHT=10]="LARGE_STRAIGHT",l[l.YAHTZEE=11]="YAHTZEE",l[l.CHANCE=12]="CHANCE",l))(S||{});const Y={0:{title:"Ones",section:"top"},1:{title:"Twos",section:"top",multiplier:2},2:{title:"Threes",section:"top",multiplier:3},3:{title:"Fours",section:"top",multiplier:4},4:{title:"Fives",section:"top",multiplier:5},5:{title:"Sixes",section:"top",multiplier:6},6:{title:"Three of a Kind",section:"bottom"},7:{title:"Four of a Kind",section:"bottom"},8:{title:"Full House",section:"bottom",trueValue:25},9:{title:"Small Straight",section:"bottom",trueValue:30},10:{title:"Large Straight",section:"bottom",trueValue:40},11:{title:"Yahtzee",section:"bottom",trueValue:50},12:{title:"Chance",section:"bottom"}},Q=ce("yahtzeeStore",()=>{const l=fe(ee.YAHTZEE)(),{personalBest:o,highscorePosition:h}=j(l),{setPreviousHighscores:w,updateHighscores:p,sortHighscores:E}=l,_=F([]),c=F(0),$=F(null),T=F(-1),d=F(-1),v=F(oe()),G=i(()=>T.value>=0),V=i(()=>_.value.length===13),N=i(()=>v.value.some(n=>n.isRolling)),M=i(()=>n=>v.value.filter(a=>a.value===n).length),R=i(()=>W(3)),b=i(()=>W(4)),P=i(()=>U(2)&&U(3)?Y[8].trueValue??!1:!1),B=i(()=>J(4)?Y[9].trueValue??!1:!1),X=i(()=>J(5)?Y[10].trueValue??!1:!1),t=i(()=>U(5)?Y[11].trueValue??!1:!1),m=i(()=>{let n=0;return v.value.forEach(a=>{n+=a.value}),n}),Z=i(()=>n=>{let a=0;return _.value.filter(u=>Y[u.row].section===n).forEach(u=>{u.value!==!1&&(a+=u.value)}),a});ae(V,n=>{if(n){let a=Z.value("top");a>=63&&(a+=35),a+=Z.value("bottom"),a+=c.value,$.value=a,p($.value,{score:$.value,bonus:c.value}),q(de)}});const K=()=>{_.value=[],c.value=0,$.value=null,T.value=-1,d.value=-1,v.value=oe(),w()},W=n=>{for(let a=1;a<=6;a++)if(v.value.filter(u=>u.value===a).length>=n){let u=0;return v.value.forEach(y=>{u+=y.value}),u}return!1},U=n=>{for(let a=1;a<=6;a++)if(v.value.filter(u=>u.value===a).length===n)return!0;return!1},J=n=>{let a=0,u=n;do{e:for(let y=u-n+1;y<=u;y++)if(v.value.some(ie=>ie.value===y))a++;else break e;if(a===n)return!0;a=0,u++}while(u<=6);return!1};return{score:_,bonus:c,finalScore:$,round:T,reroll:d,dices:v,hasStarted:G,hasFinished:V,isRolling:N,hasOfValue:M,hasThreeOfAKind:R,hasFourOfAKind:b,hasFullHouse:P,hasSmallStraight:B,hasLargeStraight:X,hasYahtzee:t,diceTotal:m,scoreTotalOf:Z,personalBest:o,highscorePosition:h,$reset:K,start:()=>{T.value=0},roll:()=>{const n=l.diceRollSpeed*1e3;d.value++,v.value.forEach(a=>{a.selected||(a.isRolling=!0,setTimeout(()=>{a.value=te(6),a.isRolling=!1,d.value===2&&(a.selected=!0),v.value.sort((u,y)=>u.value-y.value)},te(n,n/3)))}),q(ve)},getScore:n=>_.value.find(a=>a.row===n),getActualValue:(n,a)=>{let u=a;if(u===!1)return!1;const y=Y[n];return y.multiplier?u*=y.multiplier:y.trueValue&&(u=y.trueValue),u},selectDice:n=>{d.value>=0&&d.value<2&&(n.selected=!n.selected,q(se))},selectScore:(n,a)=>{if(!N.value){if(t.value){const u=_.value.find(y=>y.row===11);u&&u.value!==!1&&(c.value+=100)}_.value.push({row:n,value:a}),T.value++,d.value=-1,v.value.forEach(u=>{u.selected=!1}),q(se)}},setPreviousHighscores:w,updateHighscores:p,sortHighscores:E}},{persist:{enabled:!0}}),oe=()=>[{id:1,value:1,selected:!1,isRolling:!1},{id:2,value:2,selected:!1,isRolling:!1},{id:3,value:3,selected:!1,isRolling:!1},{id:4,value:4,selected:!1,isRolling:!1},{id:5,value:5,selected:!1,isRolling:!1}],be={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},xe=["fill"],Ae=["fill"],Oe=L({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(l){return(o,h)=>(r(),f("svg",be,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,xe),s("circle",{cx:"50",cy:"50",r:"10",fill:o.color},null,8,Ae)]))}}),He={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ce=["fill"],Ie=["fill"],Fe=["fill"],Ve=L({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(l){return(o,h)=>(r(),f("svg",He,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ce),s("circle",{cx:"25",cy:"25",r:"10",fill:o.color},null,8,Ie),s("circle",{cx:"75",cy:"75",r:"10",fill:o.color},null,8,Fe)]))}}),De={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Le=["fill"],Ne=["fill"],Re=["fill"],Be=["fill"],Ge=L({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(l){return(o,h)=>(r(),f("svg",De,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Le),s("circle",{cx:"25",cy:"25",r:"10",fill:o.color},null,8,Ne),s("circle",{cx:"50",cy:"50",r:"10",fill:o.color},null,8,Re),s("circle",{cx:"75",cy:"75",r:"10",fill:o.color},null,8,Be)]))}}),Ue={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ye=["fill"],Pe=["fill"],Me=["fill"],Ze=["fill"],ze=["fill"],je=L({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(l){return(o,h)=>(r(),f("svg",Ue,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ye),s("circle",{cx:"25",cy:"25",r:"10",fill:o.color},null,8,Pe),s("circle",{cx:"25",cy:"75",r:"10",fill:o.color},null,8,Me),s("circle",{cx:"75",cy:"25",r:"10",fill:o.color},null,8,Ze),s("circle",{cx:"75",cy:"75",r:"10",fill:o.color},null,8,ze)]))}}),Xe={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},We=["fill"],Je=["fill"],qe=["fill"],Qe=["fill"],Ke=["fill"],el=["fill"],ll=L({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(l){return(o,h)=>(r(),f("svg",Xe,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,We),s("circle",{cx:"25",cy:"25",r:"10",fill:o.color},null,8,Je),s("circle",{cx:"25",cy:"75",r:"10",fill:o.color},null,8,qe),s("circle",{cx:"50",cy:"50",r:"10",fill:o.color},null,8,Qe),s("circle",{cx:"75",cy:"25",r:"10",fill:o.color},null,8,Ke),s("circle",{cx:"75",cy:"75",r:"10",fill:o.color},null,8,el)]))}}),tl=L({__name:"Dice",props:{dice:{}},setup(l){const{selectDice:o}=Q(),h={1:Oe,2:Ve,3:Ge,4:je,5:ll,6:ye};return(w,p)=>(r(),f("div",{class:z(["cursor-pointer",{"animate-spin":w.dice.isRolling}])},[(r(),k(he(h[w.dice.value]),{color:"black",backgroundColor:w.dice.selected?"#2563eb":"white",width:"40",height:"40",onClick:p[0]||(p[0]=E=>e(o)(w.dice))},null,8,["backgroundColor"]))],2))}}),sl={class:"h-12 md:h-auto"},ol={class:"w-1/2 md:w-1/3"},al={key:0},rl={key:1,class:"!ps-1 md:ps-1"},nl={key:2},ul=L({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(l){const o=l,h=Q(),{reroll:w}=j(h),{selectScore:p,getScore:E,getActualValue:_}=h,c=F(!1),$=Y[o.row],T=i(()=>E(o.row)),d=i(()=>_(o.row,o.hasValue)),v=i(()=>d.value===!1?"X":d.value);return ae(()=>d.value,()=>{c.value=!0,setTimeout(()=>{c.value=!1})}),(G,V)=>(r(),f("tr",sl,[s("th",ol,D(e($).title),1),T.value?(r(),f("td",al,D(T.value.value===!1?"X":T.value.value),1)):e(w)>=0&&!c.value?(r(),f("td",rl,[g(C,{class:"!p-0 !h-10 md:!h-auto",type:d.value===!1||d.value===0?"neutral":void 0,onClick:V[0]||(V[0]=N=>e(p)(G.row,d.value))},{default:A(()=>[O(D(v.value),1)]),_:1},8,["type"])])):(r(),f("td",nl))]))}}),x=ne(ul,[["__scopeId","data-v-cc8f6556"]]),il={key:0,class:"h-12 md:h-auto text-red-500"},cl={class:"h-12 md:h-auto text-pink-500"},fl={key:0,class:"text-purple-500 font-bold"},dl={key:1,class:"text-red-500 font-bold"},vl={key:2,class:"text-green-500 font-bold"},hl=L({__name:"Scoreboard",setup(l){const o=Q(),{bonus:h,hasStarted:w,hasFinished:p,hasOfValue:E,hasThreeOfAKind:_,hasFourOfAKind:c,hasFullHouse:$,hasSmallStraight:T,hasLargeStraight:d,hasYahtzee:v,diceTotal:G,scoreTotalOf:V,finalScore:N}=j(o),{currentHighscorePosition:M,hasImprovedHighscorePosition:R,hasImprovedPersonalBest:b}=Se(ee.YAHTZEE),P=F(),B=F(!1),X=i(()=>E.value(1)),t=i(()=>E.value(2)),m=i(()=>E.value(3)),Z=i(()=>E.value(4)),K=i(()=>E.value(5)),W=i(()=>E.value(6)),U=i(()=>V.value("top")),J=i(()=>V.value("bottom"));return pe(()=>{P.value=setInterval(()=>{B.value=!B.value},500)}),_e(()=>{clearInterval(P.value)}),(ue,H)=>(r(),f("table",{class:z(["w-full mt-5 text-sm md:text-base text-left",e(p)?"text-neutral-500":"text-white",e(w)?void 0:B.value?"even":"odd"])},[s("tbody",null,[g(x,{row:e(S).ONES,"has-value":X.value},null,8,["row","has-value"]),g(x,{row:e(S).TWOS,"has-value":t.value},null,8,["row","has-value"]),g(x,{row:e(S).THREES,"has-value":m.value},null,8,["row","has-value"]),g(x,{row:e(S).FOURS,"has-value":Z.value},null,8,["row","has-value"]),g(x,{row:e(S).FIVES,"has-value":K.value},null,8,["row","has-value"]),g(x,{row:e(S).SIXES,"has-value":W.value},null,8,["row","has-value"]),s("tr",{class:z(["h-12 md:h-auto",e(p)?"text-white":"text-neutral-500"])},[H[0]||(H[0]=s("th",null,"TOP",-1)),s("td",null,D(e(w)?U.value:""),1)],2),s("tr",{class:z(["h-12 md:h-auto",e(p)?U.value>=63?"text-yellow-500":"text-white":"text-neutral-500"])},[H[1]||(H[1]=s("th",null,"BONUS",-1)),s("td",null,D(U.value>=63?35:e(p)?"X":""),1)],2),g(x,{row:e(S).THREE_OF_A_KIND,"has-value":e(_)},null,8,["row","has-value"]),g(x,{row:e(S).FOUR_OF_A_KIND,"has-value":e(c)},null,8,["row","has-value"]),g(x,{row:e(S).FULL_HOUSE,"has-value":e($)},null,8,["row","has-value"]),g(x,{row:e(S).SMALL_STRAIGHT,"has-value":e(T)},null,8,["row","has-value"]),g(x,{row:e(S).LARGE_STRAIGHT,"has-value":e(d)},null,8,["row","has-value"]),g(x,{row:e(S).YAHTZEE,"has-value":e(v)},null,8,["row","has-value"]),g(x,{row:e(S).CHANCE,"has-value":e(G)},null,8,["row","has-value"]),s("tr",{class:z(["h-12 md:h-auto",e(p)?"text-white":"text-neutral-500"])},[H[2]||(H[2]=s("th",null,"BOTTOM",-1)),s("td",null,D(e(w)?J.value:""),1)],2),e(p)&&e(N)?(r(),f(re,{key:0},[e(h)?(r(),f("tr",il,[H[3]||(H[3]=s("th",null,"YAHTZEE BONUS",-1)),s("td",null,D(e(h)),1)])):I("",!0),s("tr",cl,[H[4]||(H[4]=s("th",null,"TOTAL",-1)),s("td",null,[O(D(e(N))+" ",1),e(R)&&e(M)===1?(r(),f("span",fl," HIGHSCORE! ")):e(R)?(r(),f("span",dl," LEADERBOARD IMPROVEMENT! ")):e(b)?(r(),f("span",vl," PERSONAL BEST! ")):I("",!0)])])],64)):I("",!0)])],2))}}),pl=ne(hl,[["__scopeId","data-v-1cc8c08e"]]),_l={class:"flex flex-wrap justify-center gap-3"},ml={key:3,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},gl={class:"w-full md:w-1/2 flex justify-center gap-3"},wl={class:"w-full md:w-1/2 flex justify-center gap-3"},kl={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},El={key:2,class:"flex flex-wrap gap-3 mt-3 justify-center"},Dl=L({__name:"Yahtzee",setup(l){const o=ge(),h=Q(),w=me(),{reroll:p,dices:E,hasStarted:_,hasFinished:c,finalScore:$,bonus:T,personalBest:d}=j(h),{firebaseUser:v}=j(w),{start:G,$reset:V,roll:N,updateHighscores:M}=h,R=F(!1),b=F(!1),P=()=>{b.value=!1,G()},B=()=>{b.value=!1,V()};return(X,t)=>(r(),k(le,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:"Play solo."},{right:A(()=>[g(C,{class:"border-none h-fit",type:"neutral",icon:"pi pi-cog",onClick:t[0]||(t[0]=m=>R.value=!0)})]),default:A(()=>[s("div",_l,[e(_)?I("",!0):(r(),k(C,{key:0,class:"w-full md:w-1/2",onClick:P},{default:A(()=>t[8]||(t[8]=[O(" Start ")])),_:1})),!e(_)&&!b.value?(r(),k(C,{key:1,class:"w-full md:w-1/2",type:"neutral",onClick:t[1]||(t[1]=m=>b.value=!0)},{default:A(()=>t[9]||(t[9]=[O(" View Highscores ")])),_:1})):e(_)?e(c)?I("",!0):(r(),f("div",ml,[s("div",gl,[!e(c)&&e(p)<2?(r(),k(C,{key:0,class:"w-full",type:"tertiary",disabled:e(E).every(m=>m.selected),onClick:e(N)},{default:A(()=>[O(D(e(p)>=0?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):I("",!0)]),s("div",wl,[(r(!0),f(re,null,we(e(E),m=>(r(),k(tl,{dice:m},null,8,["dice"]))),256))])])):(r(),k(C,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:t[2]||(t[2]=m=>b.value=!1)},{default:A(()=>t[10]||(t[10]=[O(" Go Back ")])),_:1}))]),b.value?(r(),k($e,{key:0,"game-id":e(ee).YAHTZEE},null,8,["game-id"])):(r(),k(pl,{key:1})),s("div",kl,[e(_)&&!e(c)?(r(),k(C,{key:0,class:"w-full md:w-1/2",type:"neutral",onClick:B},{default:A(()=>t[11]||(t[11]=[O(" Restart ")])),_:1})):I("",!0),e(c)?(r(),k(C,{key:1,class:"w-full md:w-1/2",type:"secondary",onClick:B},{default:A(()=>t[12]||(t[12]=[O(" Play Again ")])),_:1})):I("",!0),e(c)&&!b.value?(r(),k(C,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:t[3]||(t[3]=m=>b.value=!0)},{default:A(()=>t[13]||(t[13]=[O(" View Highscores ")])),_:1})):e(c)?(r(),k(C,{key:3,class:"w-full md:w-1/2",type:"neutral",onClick:t[4]||(t[4]=m=>b.value=!1)},{default:A(()=>t[14]||(t[14]=[O(" View Your Score ")])),_:1})):I("",!0)]),e(c)?(r(),f("div",El,[e(v)?e($)&&e(d)<e($)?(r(),k(C,{key:1,class:"w-full md:w-1/2",type:"primary",onClick:t[6]||(t[6]=m=>e(M)(e($),e(T)))},{default:A(()=>t[17]||(t[17]=[O(" Add To Leaderboard ")])),_:1})):I("",!0):(r(),k(le,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:A(()=>[t[15]||(t[15]=O(" Please ")),s("a",{class:"cursor-pointer",onClick:t[5]||(t[5]=m=>e(o).push({name:e(ke).LOGIN,params:{redirect:JSON.stringify({name:e(Ee).GAMES_YAHTZEE})}}))}," Login "),t[16]||(t[16]=O(" to add your score to the leaderboard. "))]),_:1}))])):I("",!0),g(Te,{"is-open":R.value,"onUpdate:isOpen":t[7]||(t[7]=m=>R.value=m)},null,8,["is-open"])]),_:1}))}});export{Dl as default};
