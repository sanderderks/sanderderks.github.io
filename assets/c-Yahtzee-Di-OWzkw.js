import{_ as x,a as ne}from"./c-Bubble.vue_vue_type_script_setup_true_lang-D5P5JaPh.js";import{bO as _e,cF as me,aS as C,q as i,cG as V,cH as ue,cI as le,cJ as ge,cK as ie,M as L,aK as n,u as p,v as a,s as w,bi as e,aZ as we,at as j,bU as X,bC as ce,b9 as D,I as m,bH as H,H as T,bV as de,aC as Ee,aH as ke,F as fe,t as O,bT as ye,aV as Se,bZ as He,cn as Te}from"../bundle.js";import{_ as be}from"./c-Dice6.vue_vue_type_script_setup_true_lang-lzciAH4f.js";import{u as Ae,H as $e}from"./c-useScoreInfo-J_CFfIqD.js";import{_ as xe}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-BeH_klFQ.js";import{_ as he}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-SwitchField.vue_vue_type_script_setup_true_lang-Bl_d9scF.js";import"./c-SelectField.vue_vue_type_script_setup_true_lang-DPHKk-JN.js";import"./c-validation-Bf-E2UlI.js";var k=(l=>(l[l.ONES=0]="ONES",l[l.TWOS=1]="TWOS",l[l.THREES=2]="THREES",l[l.FOURS=3]="FOURS",l[l.FIVES=4]="FIVES",l[l.SIXES=5]="SIXES",l[l.THREE_OF_A_KIND=6]="THREE_OF_A_KIND",l[l.FOUR_OF_A_KIND=7]="FOUR_OF_A_KIND",l[l.FULL_HOUSE=8]="FULL_HOUSE",l[l.SMALL_STRAIGHT=9]="SMALL_STRAIGHT",l[l.LARGE_STRAIGHT=10]="LARGE_STRAIGHT",l[l.YAHTZEE=11]="YAHTZEE",l[l.CHANCE=12]="CHANCE",l))(k||{});const P={0:{title:"Ones",section:"top"},1:{title:"Twos",section:"top",multiplier:2},2:{title:"Threes",section:"top",multiplier:3},3:{title:"Fours",section:"top",multiplier:4},4:{title:"Fives",section:"top",multiplier:5},5:{title:"Sixes",section:"top",multiplier:6},6:{title:"Three of a Kind",section:"bottom"},7:{title:"Four of a Kind",section:"bottom"},8:{title:"Full House",section:"bottom",trueValue:25},9:{title:"Small Straight",section:"bottom",trueValue:30},10:{title:"Large Straight",section:"bottom",trueValue:40},11:{title:"Yahtzee",section:"bottom",trueValue:50},12:{title:"Chance",section:"bottom"}},Oe=()=>({score:[],bonus:0,finalScore:null,round:-1,reroll:-1,dices:[...te.map(l=>({...l}))]}),q=_e("yahtzeeStore",()=>{const l=me(),t=C([]),f=C(0),_=C(null),h=C(-1),d=C(-1),c=C([...te.map(s=>({...s}))]),$=i(()=>h.value>=0),N=i(()=>t.value.length===13),I=i(()=>c.value.some(s=>s.isRolling)),b=i(()=>s=>c.value.filter(r=>r.value===s).length),R=i(()=>v(3)),B=i(()=>v(4)),F=i(()=>z(2)&&z(3)?P[8].trueValue??!1:!1),A=i(()=>W(4)?P[9].trueValue??!1:!1),G=i(()=>W(5)?P[10].trueValue??!1:!1),g=i(()=>z(5)?P[11].trueValue??!1:!1),M=i(()=>{let s=0;return c.value.forEach(r=>{s+=r.value}),s}),Y=i(()=>s=>{let r=0;return t.value.filter(u=>P[u.row].section===s).forEach(u=>{u.value!==!1&&(r+=u.value)}),r}),U=i(()=>s=>l.personalBest(V.YAHTZEE,s)),o=i(()=>s=>l.highscorePosition(V.YAHTZEE,s)),v=s=>{for(let r=1;r<=6;r++)if(c.value.filter(u=>u.value===r).length>=s){let u=0;return c.value.forEach(E=>{u+=E.value}),u}return!1},z=s=>{for(let r=1;r<=6;r++)if(c.value.filter(u=>u.value===r).length===s)return!0;return!1},W=s=>{let r=0,u=s;do{e:for(let E=u-s+1;E<=u;E++)if(c.value.some(pe=>pe.value===E))r++;else break e;if(r===s)return!0;r=0,u++}while(u<=6);return!1};return{score:t,bonus:f,finalScore:_,round:h,reroll:d,dices:c,hasStarted:$,hasFinished:N,isRolling:I,hasOfValue:b,hasThreeOfAKind:R,hasFourOfAKind:B,hasFullHouse:F,hasSmallStraight:A,hasLargeStraight:G,hasYahtzee:g,diceTotal:M,scoreTotalOf:Y,personalBest:U,highscorePosition:o,reset:s=>{t.value=[],f.value=0,_.value=null,h.value=-1,d.value=-1,c.value=[...te.map(r=>({...r}))],l.setPreviousHighscores(V.YAHTZEE,s)},start:()=>{h.value=0},roll:()=>{const s=l.diceRollSpeed*1e3;d.value++,c.value.forEach(r=>{r.selected||(r.isRolling=!0,setTimeout(()=>{r.value=ue(6),r.isRolling=!1,d.value===2&&(r.selected=!0),c.value.sort((u,E)=>u.value-E.value)},ue(s,s/3)))}),le(ge)},getScore:s=>t.value.find(r=>r.row===s),getActualValue:(s,r)=>{let u=r;if(u===!1)return!1;const E=P[s];return E.multiplier?u*=E.multiplier:E.trueValue&&(u=E.trueValue),u},selectDice:s=>{d.value>=0&&d.value<2&&(s.selected=!s.selected,le(ie))},selectScore:(s,r)=>{if(!I.value){if(g){const u=t.value.find(E=>E.row===11);u&&u.value!==!1&&(f.value+=100)}t.value.push({row:s,value:r}),h.value++,d.value=Oe().reroll,c.value.forEach(u=>{u.selected=!1}),le(ie)}},setPreviousHighscores:(s,r)=>l.setPreviousHighscores(V.YAHTZEE,s,r),fetchGameData:s=>l.fetchGameData(V.YAHTZEE,s),updateHighscores:(s,r,u)=>l.updateHighscores(V.YAHTZEE,s,r,u),sortHighscores:()=>l.sortHighscores(V.YAHTZEE)}},{persist:{enabled:!0}}),te=[{id:1,value:1,selected:!1,isRolling:!1},{id:2,value:2,selected:!1,isRolling:!1},{id:3,value:3,selected:!1,isRolling:!1},{id:4,value:4,selected:!1,isRolling:!1},{id:5,value:5,selected:!1,isRolling:!1}],Ce={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ie=["fill"],Fe=["fill"],Ve=L({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(l){return(t,f)=>(n(),p("svg",Ce,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ie),a("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Fe)]))}}),De={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Le=["fill"],Ne=["fill"],Re=["fill"],Be=L({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(l){return(t,f)=>(n(),p("svg",De,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Le),a("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Ne),a("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Re)]))}}),Ge={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ye=["fill"],Ue=["fill"],Pe=["fill"],Ze=["fill"],Me=L({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(l){return(t,f)=>(n(),p("svg",Ge,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ye),a("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Ue),a("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Pe),a("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Ze)]))}}),ze={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},je=["fill"],Xe=["fill"],We=["fill"],Je=["fill"],qe=["fill"],Qe=L({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(l){return(t,f)=>(n(),p("svg",ze,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,je),a("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Xe),a("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,We),a("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,Je),a("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,qe)]))}}),Ke={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},el=["fill"],ll=["fill"],tl=["fill"],sl=["fill"],ol=["fill"],al=["fill"],rl=L({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(l){return(t,f)=>(n(),p("svg",Ke,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,el),a("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,ll),a("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,tl),a("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,sl),a("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,ol),a("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,al)]))}}),nl=L({__name:"Dice",props:{dice:{}},setup(l){const{selectDice:t}=q(),f={1:Ve,2:Be,3:Me,4:Qe,5:rl,6:be};return(_,h)=>(n(),p("div",{class:j(["cursor-pointer",{"animate-spin":_.dice.isRolling}])},[(n(),w(we(f[_.dice.value]),{color:"black",backgroundColor:_.dice.selected?"#2563eb":"white",width:"40",height:"40",onClick:h[0]||(h[0]=d=>e(t)(_.dice))},null,8,["backgroundColor"]))],2))}}),ul={class:"h-12 md:h-auto"},il={class:"w-1/2 md:w-1/3"},cl={key:0},dl={key:1,class:"!ps-1 md:ps-1"},fl={key:2},hl=L({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(l){const t=l,f=q(),{reroll:_}=X(f),{selectScore:h,getScore:d,getActualValue:c}=f,$=C(!1),N=P[t.row],I=i(()=>d(t.row)),b=i(()=>c(t.row,t.hasValue)),R=i(()=>b.value===!1?"X":b.value);return ce(()=>b.value,()=>{$.value=!0,setTimeout(()=>{$.value=!1})}),(B,F)=>(n(),p("tr",ul,[a("th",il,D(e(N).title),1),I.value?(n(),p("td",cl,D(I.value.value===!1?"X":I.value.value),1)):e(_)>=0&&!$.value?(n(),p("td",dl,[m(x,{class:"!p-0 !h-10 md:!h-auto",type:b.value===!1||b.value===0?"neutral":void 0,onClick:F[0]||(F[0]=A=>e(h)(B.row,b.value))},{default:H(()=>[T(D(R.value),1)]),_:1},8,["type"])])):(n(),p("td",fl))]))}}),S=he(hl,[["__scopeId","data-v-cc8f6556"]]),vl={key:0,class:"h-12 md:h-auto text-red-500"},pl={class:"h-12 md:h-auto text-pink-500"},_l={key:0,class:"text-purple-500 font-bold"},ml={key:1,class:"text-red-500 font-bold"},gl={key:2,class:"text-green-500 font-bold"},wl=L({__name:"Scoreboard",setup(l){const t=q(),{bonus:f,hasStarted:_,hasFinished:h,hasOfValue:d,hasThreeOfAKind:c,hasFourOfAKind:$,hasFullHouse:N,hasSmallStraight:I,hasLargeStraight:b,hasYahtzee:R,diceTotal:B,scoreTotalOf:F,finalScore:A}=X(t),{updateHighscores:G}=t,{firebaseUser:g}=X(de()),{currentHighscorePosition:M,hasImprovedHighscorePosition:Y,hasImprovedPersonalBest:U}=Ae(V.YAHTZEE),o=C(),v=C(!1),z=i(()=>d.value(1)),W=i(()=>d.value(2)),se=i(()=>d.value(3)),oe=i(()=>d.value(4)),ae=i(()=>d.value(5)),re=i(()=>d.value(6)),Z=i(()=>F.value("top")),Q=i(()=>F.value("bottom"));return Ee(()=>{o.value=setInterval(()=>{v.value=!v.value},500)}),ke(()=>{clearInterval(o.value)}),ce(h,(J,y)=>{var K,ee;J&&J!==y&&(A.value=Z.value+(Z.value>=63?35:0)+Q.value+f.value,(K=g.value)!=null&&K.uid&&G((ee=g.value)==null?void 0:ee.uid,A.value,f.value),new Audio("/sounds/applause-and-cheer.mp3").play())}),(J,y)=>(n(),p("table",{class:j(["w-full mt-5 text-sm md:text-base text-left",e(h)?"text-neutral-500":"text-white",e(_)?void 0:v.value?"even":"odd"])},[a("tbody",null,[m(S,{row:e(k).ONES,"has-value":z.value},null,8,["row","has-value"]),m(S,{row:e(k).TWOS,"has-value":W.value},null,8,["row","has-value"]),m(S,{row:e(k).THREES,"has-value":se.value},null,8,["row","has-value"]),m(S,{row:e(k).FOURS,"has-value":oe.value},null,8,["row","has-value"]),m(S,{row:e(k).FIVES,"has-value":ae.value},null,8,["row","has-value"]),m(S,{row:e(k).SIXES,"has-value":re.value},null,8,["row","has-value"]),a("tr",{class:j(["h-12 md:h-auto",e(h)?"text-white":"text-neutral-500"])},[y[0]||(y[0]=a("th",null,"TOP",-1)),a("td",null,D(e(_)?Z.value:""),1)],2),a("tr",{class:j(["h-12 md:h-auto",e(h)?Z.value>=63?"text-yellow-500":"text-white":"text-neutral-500"])},[y[1]||(y[1]=a("th",null,"BONUS",-1)),a("td",null,D(Z.value>=63?35:e(h)?"X":""),1)],2),m(S,{row:e(k).THREE_OF_A_KIND,"has-value":e(c)},null,8,["row","has-value"]),m(S,{row:e(k).FOUR_OF_A_KIND,"has-value":e($)},null,8,["row","has-value"]),m(S,{row:e(k).FULL_HOUSE,"has-value":e(N)},null,8,["row","has-value"]),m(S,{row:e(k).SMALL_STRAIGHT,"has-value":e(I)},null,8,["row","has-value"]),m(S,{row:e(k).LARGE_STRAIGHT,"has-value":e(b)},null,8,["row","has-value"]),m(S,{row:e(k).YAHTZEE,"has-value":e(R)},null,8,["row","has-value"]),m(S,{row:e(k).CHANCE,"has-value":e(B)},null,8,["row","has-value"]),a("tr",{class:j(["h-12 md:h-auto",e(h)?"text-white":"text-neutral-500"])},[y[2]||(y[2]=a("th",null,"BOTTOM",-1)),a("td",null,D(e(_)?Q.value:""),1)],2),e(h)&&e(A)?(n(),p(fe,{key:0},[e(f)?(n(),p("tr",vl,[y[3]||(y[3]=a("th",null,"YAHTZEE BONUS",-1)),a("td",null,D(e(f)),1)])):O("",!0),a("tr",pl,[y[4]||(y[4]=a("th",null,"TOTAL",-1)),a("td",null,[T(D(e(A))+" ",1),e(Y)&&e(M)===1?(n(),p("span",_l," HIGHSCORE! ")):e(Y)?(n(),p("span",ml," LEADERBOARD IMPROVEMENT! ")):e(U)?(n(),p("span",gl," PERSONAL BEST! ")):O("",!0)])])],64)):O("",!0)])],2))}}),El=he(wl,[["__scopeId","data-v-90f6a693"]]),kl={class:"flex flex-wrap justify-center gap-3"},yl={key:3,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},Sl={class:"w-full md:w-1/2 flex justify-center gap-3"},Hl={class:"w-full md:w-1/2 flex justify-center gap-3"},Tl={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},bl={key:2,class:"flex flex-wrap gap-3 mt-3 justify-center"},Ll=L({__name:"Yahtzee",setup(l){const t=ye(),f=q(),{reroll:_,dices:h,hasStarted:d,hasFinished:c,finalScore:$,bonus:N,personalBest:I}=X(f),{start:b,reset:R,roll:B,updateHighscores:F}=f,{firebaseUser:A}=X(de()),G=C(!1),g=C(!1),M=()=>{g.value=!1,b()},Y=()=>{var U;g.value=!1,R((U=A.value)==null?void 0:U.uid)};return(U,o)=>(n(),w(ne,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:"Play solo."},{right:H(()=>[m(x,{class:"border-none h-fit",type:"neutral",icon:"pi pi-cog",onClick:o[0]||(o[0]=v=>G.value=!0)})]),default:H(()=>[a("div",kl,[e(d)?O("",!0):(n(),w(x,{key:0,class:"w-full md:w-1/2",onClick:M},{default:H(()=>o[8]||(o[8]=[T(" Start ")])),_:1})),!e(d)&&!g.value?(n(),w(x,{key:1,class:"w-full md:w-1/2",type:"neutral",onClick:o[1]||(o[1]=v=>g.value=!0)},{default:H(()=>o[9]||(o[9]=[T(" View Highscores ")])),_:1})):e(d)?e(c)?O("",!0):(n(),p("div",yl,[a("div",Sl,[!e(c)&&e(_)<2?(n(),w(x,{key:0,class:"w-full",type:"tertiary",disabled:e(h).every(v=>v.selected),onClick:e(B)},{default:H(()=>[T(D(e(_)>=0?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):O("",!0)]),a("div",Hl,[(n(!0),p(fe,null,Se(e(h),v=>(n(),w(nl,{dice:v},null,8,["dice"]))),256))])])):(n(),w(x,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:o[2]||(o[2]=v=>g.value=!1)},{default:H(()=>o[10]||(o[10]=[T(" Go Back ")])),_:1}))]),g.value?(n(),w($e,{key:0,"game-id":e(V).YAHTZEE},null,8,["game-id"])):(n(),w(El,{key:1})),a("div",Tl,[e(d)&&!e(c)?(n(),w(x,{key:0,class:"w-full md:w-1/2",type:"neutral",onClick:Y},{default:H(()=>o[11]||(o[11]=[T(" Restart ")])),_:1})):O("",!0),e(c)?(n(),w(x,{key:1,class:"w-full md:w-1/2",type:"secondary",onClick:Y},{default:H(()=>o[12]||(o[12]=[T(" Play Again ")])),_:1})):O("",!0),e(c)&&!g.value?(n(),w(x,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:o[3]||(o[3]=v=>g.value=!0)},{default:H(()=>o[13]||(o[13]=[T(" View Highscores ")])),_:1})):e(c)?(n(),w(x,{key:3,class:"w-full md:w-1/2",type:"neutral",onClick:o[4]||(o[4]=v=>g.value=!1)},{default:H(()=>o[14]||(o[14]=[T(" View Your Score ")])),_:1})):O("",!0)]),e(c)?(n(),p("div",bl,[e(A)?e($)&&e(I)(e(A).uid)<e($)?(n(),w(x,{key:1,class:"w-full md:w-1/2",type:"primary",onClick:o[6]||(o[6]=v=>e(F)(e(A).uid,e($),e(N)))},{default:H(()=>o[17]||(o[17]=[T(" Add To Leaderboard ")])),_:1})):O("",!0):(n(),w(ne,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:H(()=>[o[15]||(o[15]=T(" Please ")),a("a",{class:"cursor-pointer",onClick:o[5]||(o[5]=v=>e(t).push({name:e(He).LOGIN,params:{redirect:JSON.stringify({name:e(Te).GAMES_YAHTZEE})}}))}," Login "),o[16]||(o[16]=T(" to add your score to the leaderboard. "))]),_:1}))])):O("",!0),m(xe,{"is-open":G.value,"onUpdate:isOpen":o[7]||(o[7]=v=>G.value=v)},null,8,["is-open"])]),_:1}))}});export{Ll as default};
