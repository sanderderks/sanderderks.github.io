import{_ as A,a as re}from"./c-Bubble.vue_vue_type_script_setup_true_lang-BbZDUAgW.js";import{bO as _e,cI as me,aS as O,q as c,cJ as D,cK as ue,cL as le,cM as ge,cN as ne,M as N,aK as u,u as h,v as o,s as w,bi as e,aZ as we,at as j,bX as W,bC as ce,b9 as L,I as m,bH as H,H as b,bV as de,aC as Ee,aH as ke,F as fe,t as x,bT as ye,aV as Se,b_ as Te,cq as He}from"../bundle.js";import{_ as be}from"./c-Dice6.vue_vue_type_script_setup_true_lang-lzciAH4f.js";import{u as $e,H as Ae}from"./c-useScoreInfo-CPxptXKv.js";import{_ as xe}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-DgRimmb9.js";import{_ as he}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-SwitchField.vue_vue_type_script_setup_true_lang-CyzScboS.js";import"./c-SelectField.vue_vue_type_script_setup_true_lang-zbes3M22.js";import"./c-validation-Bf-E2UlI.js";var k=(l=>(l[l.ONES=0]="ONES",l[l.TWOS=1]="TWOS",l[l.THREES=2]="THREES",l[l.FOURS=3]="FOURS",l[l.FIVES=4]="FIVES",l[l.SIXES=5]="SIXES",l[l.THREE_OF_A_KIND=6]="THREE_OF_A_KIND",l[l.FOUR_OF_A_KIND=7]="FOUR_OF_A_KIND",l[l.FULL_HOUSE=8]="FULL_HOUSE",l[l.SMALL_STRAIGHT=9]="SMALL_STRAIGHT",l[l.LARGE_STRAIGHT=10]="LARGE_STRAIGHT",l[l.YAHTZEE=11]="YAHTZEE",l[l.CHANCE=12]="CHANCE",l))(k||{});const P={0:{title:"Ones",section:"top"},1:{title:"Twos",section:"top",multiplier:2},2:{title:"Threes",section:"top",multiplier:3},3:{title:"Fours",section:"top",multiplier:4},4:{title:"Fives",section:"top",multiplier:5},5:{title:"Sixes",section:"top",multiplier:6},6:{title:"Three of a Kind",section:"bottom"},7:{title:"Four of a Kind",section:"bottom"},8:{title:"Full House",section:"bottom",trueValue:25},9:{title:"Small Straight",section:"bottom",trueValue:30},10:{title:"Large Straight",section:"bottom",trueValue:40},11:{title:"Yahtzee",section:"bottom",trueValue:50},12:{title:"Chance",section:"bottom"}},Q=_e("yahtzeeStore",()=>{const l=me(),t=O([]),v=O(0),_=O(null),p=O(-1),d=O(-1),i=O(ie()),g=c(()=>p.value>=0),F=c(()=>t.value.length===13),C=c(()=>i.value.some(a=>a.isRolling)),$=c(()=>a=>i.value.filter(r=>r.value===a).length),I=c(()=>f(3)),Y=c(()=>f(4)),R=c(()=>X(2)&&X(3)?P[8].trueValue??!1:!1),G=c(()=>q(4)?P[9].trueValue??!1:!1),B=c(()=>q(5)?P[10].trueValue??!1:!1),V=c(()=>X(5)?P[11].trueValue??!1:!1),y=c(()=>{let a=0;return i.value.forEach(r=>{a+=r.value}),a}),Z=c(()=>a=>{let r=0;return t.value.filter(n=>P[n.row].section===a).forEach(n=>{n.value!==!1&&(r+=n.value)}),r}),M=c(()=>a=>l.personalBest(D.YAHTZEE,a)),U=c(()=>a=>l.highscorePosition(D.YAHTZEE,a)),s=a=>{t.value=[],v.value=0,_.value=null,p.value=-1,d.value=-1,i.value=ie(),l.setPreviousHighscores(D.YAHTZEE,a)},f=a=>{for(let r=1;r<=6;r++)if(i.value.filter(n=>n.value===r).length>=a){let n=0;return i.value.forEach(E=>{n+=E.value}),n}return!1},X=a=>{for(let r=1;r<=6;r++)if(i.value.filter(n=>n.value===r).length===a)return!0;return!1},q=a=>{let r=0,n=a;do{e:for(let E=n-a+1;E<=n;E++)if(i.value.some(pe=>pe.value===E))r++;else break e;if(r===a)return!0;r=0,n++}while(n<=6);return!1};return{score:t,bonus:v,finalScore:_,round:p,reroll:d,dices:i,hasStarted:g,hasFinished:F,isRolling:C,hasOfValue:$,hasThreeOfAKind:I,hasFourOfAKind:Y,hasFullHouse:R,hasSmallStraight:G,hasLargeStraight:B,hasYahtzee:V,diceTotal:y,scoreTotalOf:Z,personalBest:M,highscorePosition:U,$reset:s,start:()=>{p.value=0},roll:()=>{const a=l.diceRollSpeed*1e3;d.value++,i.value.forEach(r=>{r.selected||(r.isRolling=!0,setTimeout(()=>{r.value=ue(6),r.isRolling=!1,d.value===2&&(r.selected=!0),i.value.sort((n,E)=>n.value-E.value)},ue(a,a/3)))}),le(ge)},getScore:a=>t.value.find(r=>r.row===a),getActualValue:(a,r)=>{let n=r;if(n===!1)return!1;const E=P[a];return E.multiplier?n*=E.multiplier:E.trueValue&&(n=E.trueValue),n},selectDice:a=>{d.value>=0&&d.value<2&&(a.selected=!a.selected,le(ne))},selectScore:(a,r)=>{if(!C.value){if(V.value){const n=t.value.find(E=>E.row===11);n&&n.value!==!1&&(v.value+=100)}t.value.push({row:a,value:r}),p.value++,d.value=-1,i.value.forEach(n=>{n.selected=!1}),le(ne)}},setPreviousHighscores:(a,r)=>l.setPreviousHighscores(D.YAHTZEE,a,r),fetchGameData:a=>l.fetchGameData(D.YAHTZEE,a),updateHighscores:(a,r,n)=>l.updateHighscores(D.YAHTZEE,a,r,n),sortHighscores:()=>l.sortHighscores(D.YAHTZEE)}},{persist:{enabled:!0}}),ie=()=>[{id:1,value:1,selected:!1,isRolling:!1},{id:2,value:2,selected:!1,isRolling:!1},{id:3,value:3,selected:!1,isRolling:!1},{id:4,value:4,selected:!1,isRolling:!1},{id:5,value:5,selected:!1,isRolling:!1}],Oe={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ce=["fill"],Ie=["fill"],Fe=N({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(u(),h("svg",Oe,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ce),o("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Ie)]))}}),Ve={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},De=["fill"],Le=["fill"],Ne=["fill"],Re=N({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(u(),h("svg",Ve,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,De),o("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Le),o("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Ne)]))}}),Be={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ye=["fill"],Ge=["fill"],Ue=["fill"],Pe=["fill"],Ze=N({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(u(),h("svg",Be,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ye),o("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Ge),o("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Ue),o("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Pe)]))}}),Me={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},ze=["fill"],Xe=["fill"],je=["fill"],We=["fill"],qe=["fill"],Je=N({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(u(),h("svg",Me,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,ze),o("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Xe),o("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,je),o("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,We),o("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,qe)]))}}),Qe={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ke=["fill"],el=["fill"],ll=["fill"],tl=["fill"],sl=["fill"],ol=["fill"],al=N({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(u(),h("svg",Qe,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ke),o("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,el),o("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,ll),o("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,tl),o("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,sl),o("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,ol)]))}}),rl=N({__name:"Dice",props:{dice:{}},setup(l){const{selectDice:t}=Q(),v={1:Fe,2:Re,3:Ze,4:Je,5:al,6:be};return(_,p)=>(u(),h("div",{class:j(["cursor-pointer",{"animate-spin":_.dice.isRolling}])},[(u(),w(we(v[_.dice.value]),{color:"black",backgroundColor:_.dice.selected?"#2563eb":"white",width:"40",height:"40",onClick:p[0]||(p[0]=d=>e(t)(_.dice))},null,8,["backgroundColor"]))],2))}}),ul={class:"h-12 md:h-auto"},nl={class:"w-1/2 md:w-1/3"},il={key:0},cl={key:1,class:"!ps-1 md:ps-1"},dl={key:2},fl=N({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(l){const t=l,v=Q(),{reroll:_}=W(v),{selectScore:p,getScore:d,getActualValue:i}=v,g=O(!1),F=P[t.row],C=c(()=>d(t.row)),$=c(()=>i(t.row,t.hasValue)),I=c(()=>$.value===!1?"X":$.value);return ce(()=>$.value,()=>{g.value=!0,setTimeout(()=>{g.value=!1})}),(Y,R)=>(u(),h("tr",ul,[o("th",nl,L(e(F).title),1),C.value?(u(),h("td",il,L(C.value.value===!1?"X":C.value.value),1)):e(_)>=0&&!g.value?(u(),h("td",cl,[m(A,{class:"!p-0 !h-10 md:!h-auto",type:$.value===!1||$.value===0?"neutral":void 0,onClick:R[0]||(R[0]=G=>e(p)(Y.row,$.value))},{default:H(()=>[b(L(I.value),1)]),_:1},8,["type"])])):(u(),h("td",dl))]))}}),T=he(fl,[["__scopeId","data-v-cc8f6556"]]),hl={key:0,class:"h-12 md:h-auto text-red-500"},vl={class:"h-12 md:h-auto text-pink-500"},pl={key:0,class:"text-purple-500 font-bold"},_l={key:1,class:"text-red-500 font-bold"},ml={key:2,class:"text-green-500 font-bold"},gl=N({__name:"Scoreboard",setup(l){const t=Q(),v=de(),{bonus:_,hasStarted:p,hasFinished:d,hasOfValue:i,hasThreeOfAKind:g,hasFourOfAKind:F,hasFullHouse:C,hasSmallStraight:$,hasLargeStraight:I,hasYahtzee:Y,diceTotal:R,scoreTotalOf:G,finalScore:B}=W(t),{firebaseUser:V}=W(v),{currentHighscorePosition:y,hasImprovedHighscorePosition:Z,hasImprovedPersonalBest:M}=$e(D.YAHTZEE),{updateHighscores:U}=t,s=O(),f=O(!1),X=c(()=>i.value(1)),q=c(()=>i.value(2)),te=c(()=>i.value(3)),se=c(()=>i.value(4)),oe=c(()=>i.value(5)),ae=c(()=>i.value(6)),z=c(()=>G.value("top")),K=c(()=>G.value("bottom"));return Ee(()=>{s.value=setInterval(()=>{f.value=!f.value},500)}),ke(()=>{clearInterval(s.value)}),ce(d,(J,S)=>{var ee;J&&J!==S&&(B.value=z.value+(z.value>=63?35:0)+K.value+_.value,(ee=V.value)!=null&&ee.uid&&U(V.value.uid,B.value,_.value),new Audio("/sounds/applause-and-cheer.mp3").play())}),(J,S)=>(u(),h("table",{class:j(["w-full mt-5 text-sm md:text-base text-left",e(d)?"text-neutral-500":"text-white",e(p)?void 0:f.value?"even":"odd"])},[o("tbody",null,[m(T,{row:e(k).ONES,"has-value":X.value},null,8,["row","has-value"]),m(T,{row:e(k).TWOS,"has-value":q.value},null,8,["row","has-value"]),m(T,{row:e(k).THREES,"has-value":te.value},null,8,["row","has-value"]),m(T,{row:e(k).FOURS,"has-value":se.value},null,8,["row","has-value"]),m(T,{row:e(k).FIVES,"has-value":oe.value},null,8,["row","has-value"]),m(T,{row:e(k).SIXES,"has-value":ae.value},null,8,["row","has-value"]),o("tr",{class:j(["h-12 md:h-auto",e(d)?"text-white":"text-neutral-500"])},[S[0]||(S[0]=o("th",null,"TOP",-1)),o("td",null,L(e(p)?z.value:""),1)],2),o("tr",{class:j(["h-12 md:h-auto",e(d)?z.value>=63?"text-yellow-500":"text-white":"text-neutral-500"])},[S[1]||(S[1]=o("th",null,"BONUS",-1)),o("td",null,L(z.value>=63?35:e(d)?"X":""),1)],2),m(T,{row:e(k).THREE_OF_A_KIND,"has-value":e(g)},null,8,["row","has-value"]),m(T,{row:e(k).FOUR_OF_A_KIND,"has-value":e(F)},null,8,["row","has-value"]),m(T,{row:e(k).FULL_HOUSE,"has-value":e(C)},null,8,["row","has-value"]),m(T,{row:e(k).SMALL_STRAIGHT,"has-value":e($)},null,8,["row","has-value"]),m(T,{row:e(k).LARGE_STRAIGHT,"has-value":e(I)},null,8,["row","has-value"]),m(T,{row:e(k).YAHTZEE,"has-value":e(Y)},null,8,["row","has-value"]),m(T,{row:e(k).CHANCE,"has-value":e(R)},null,8,["row","has-value"]),o("tr",{class:j(["h-12 md:h-auto",e(d)?"text-white":"text-neutral-500"])},[S[2]||(S[2]=o("th",null,"BOTTOM",-1)),o("td",null,L(e(p)?K.value:""),1)],2),e(d)&&e(B)?(u(),h(fe,{key:0},[e(_)?(u(),h("tr",hl,[S[3]||(S[3]=o("th",null,"YAHTZEE BONUS",-1)),o("td",null,L(e(_)),1)])):x("",!0),o("tr",vl,[S[4]||(S[4]=o("th",null,"TOTAL",-1)),o("td",null,[b(L(e(B))+" ",1),e(Z)&&e(y)===1?(u(),h("span",pl," HIGHSCORE! ")):e(Z)?(u(),h("span",_l," LEADERBOARD IMPROVEMENT! ")):e(M)?(u(),h("span",ml," PERSONAL BEST! ")):x("",!0)])])],64)):x("",!0)])],2))}}),wl=he(gl,[["__scopeId","data-v-8f29d901"]]),El={class:"flex flex-wrap justify-center gap-3"},kl={key:3,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},yl={class:"w-full md:w-1/2 flex justify-center gap-3"},Sl={class:"w-full md:w-1/2 flex justify-center gap-3"},Tl={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},Hl={key:2,class:"flex flex-wrap gap-3 mt-3 justify-center"},Dl=N({__name:"Yahtzee",setup(l){const t=ye(),v=Q(),_=de(),{reroll:p,dices:d,hasStarted:i,hasFinished:g,finalScore:F,bonus:C,personalBest:$}=W(v),{firebaseUser:I}=W(_),{start:Y,$reset:R,roll:G,updateHighscores:B}=v,V=O(!1),y=O(!1),Z=()=>{y.value=!1,Y()},M=()=>{var U;y.value=!1,R((U=I.value)==null?void 0:U.uid)};return(U,s)=>(u(),w(re,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:"Play solo."},{right:H(()=>[m(A,{class:"border-none h-fit",type:"neutral",icon:"pi pi-cog",onClick:s[0]||(s[0]=f=>V.value=!0)})]),default:H(()=>[o("div",El,[e(i)?x("",!0):(u(),w(A,{key:0,class:"w-full md:w-1/2",onClick:Z},{default:H(()=>s[8]||(s[8]=[b(" Start ")])),_:1})),!e(i)&&!y.value?(u(),w(A,{key:1,class:"w-full md:w-1/2",type:"neutral",onClick:s[1]||(s[1]=f=>y.value=!0)},{default:H(()=>s[9]||(s[9]=[b(" View Highscores ")])),_:1})):e(i)?e(g)?x("",!0):(u(),h("div",kl,[o("div",yl,[!e(g)&&e(p)<2?(u(),w(A,{key:0,class:"w-full",type:"tertiary",disabled:e(d).every(f=>f.selected),onClick:e(G)},{default:H(()=>[b(L(e(p)>=0?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):x("",!0)]),o("div",Sl,[(u(!0),h(fe,null,Se(e(d),f=>(u(),w(rl,{dice:f},null,8,["dice"]))),256))])])):(u(),w(A,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:s[2]||(s[2]=f=>y.value=!1)},{default:H(()=>s[10]||(s[10]=[b(" Go Back ")])),_:1}))]),y.value?(u(),w(Ae,{key:0,"game-id":e(D).YAHTZEE},null,8,["game-id"])):(u(),w(wl,{key:1})),o("div",Tl,[e(i)&&!e(g)?(u(),w(A,{key:0,class:"w-full md:w-1/2",type:"neutral",onClick:M},{default:H(()=>s[11]||(s[11]=[b(" Restart ")])),_:1})):x("",!0),e(g)?(u(),w(A,{key:1,class:"w-full md:w-1/2",type:"secondary",onClick:M},{default:H(()=>s[12]||(s[12]=[b(" Play Again ")])),_:1})):x("",!0),e(g)&&!y.value?(u(),w(A,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:s[3]||(s[3]=f=>y.value=!0)},{default:H(()=>s[13]||(s[13]=[b(" View Highscores ")])),_:1})):e(g)?(u(),w(A,{key:3,class:"w-full md:w-1/2",type:"neutral",onClick:s[4]||(s[4]=f=>y.value=!1)},{default:H(()=>s[14]||(s[14]=[b(" View Your Score ")])),_:1})):x("",!0)]),e(g)?(u(),h("div",Hl,[e(I)?e(F)&&e($)(e(I).uid)<e(F)?(u(),w(A,{key:1,class:"w-full md:w-1/2",type:"primary",onClick:s[6]||(s[6]=f=>e(B)(e(I).uid,e(F),e(C)))},{default:H(()=>s[17]||(s[17]=[b(" Add To Leaderboard ")])),_:1})):x("",!0):(u(),w(re,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:H(()=>[s[15]||(s[15]=b(" Please ")),o("a",{class:"cursor-pointer",onClick:s[5]||(s[5]=f=>e(t).push({name:e(Te).LOGIN,params:{redirect:JSON.stringify({name:e(He).GAMES_YAHTZEE})}}))}," Login "),s[16]||(s[16]=b(" to add your score to the leaderboard. "))]),_:1}))])):x("",!0),m(xe,{"is-open":V.value,"onUpdate:isOpen":s[7]||(s[7]=f=>V.value=f)},null,8,["is-open"])]),_:1}))}});export{Dl as default};
