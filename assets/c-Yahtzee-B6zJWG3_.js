import{aT as Ye,aU as Be,c as Pe,aV as Fe,aR as Te,s as j,aW as We,aX as Re,aS as X,w as z,aQ as y,a9 as xe,f as W,o as $e,L as ie,aY as je,aZ as Ue,a_ as _e,a$ as ze,aq as ke,b0 as Ze,b1 as Ve,d as D,g as c,j as a,q as r,z as U,l as L,b2 as qe,h as e,C as Y,E as ue,m as K,I as N,a3 as B,_ as se,A as J,k as Z,N as Je,ax as Ke,y as Qe,a7 as Xe}from"../bundle.js";import{u as el,H as ll,_ as tl}from"./c-useScoreInfo-BuqgYv10.js";import{a as sl,_ as al}from"./c-GameChat.vue_vue_type_script_setup_true_lang-ChPyUbG1.js";import{_ as ol,a as nl}from"./c-GameActions.vue_vue_type_script_setup_true_lang-8vcJs5mA.js";import{_ as il}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B6MMtiVw.js";import{_ as rl}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";var te=(s=>(s[s.Purple=0]="Purple",s[s.Blue=1]="Blue",s[s.Yellow=2]="Yellow",s[s.Orange=3]="Orange",s[s.Red=4]="Red",s))(te||{}),$=(s=>(s[s.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",s[s.FINDING_OPPONENT=1]="FINDING_OPPONENT",s[s.IS_PLAYING=2]="IS_PLAYING",s[s.HAS_FINISHED=3]="HAS_FINISHED",s))($||{}),V=(s=>(s[s.WAITING_FOR_OPPONENTS=0]="WAITING_FOR_OPPONENTS",s[s.HAS_STARTED=1]="HAS_STARTED",s[s.HAS_THROWN_DICES=2]="HAS_THROWN_DICES",s[s.HAS_CHOSEN_SCORE=3]="HAS_CHOSEN_SCORE",s[s.CAN_CHOOSE_REMAINING=4]="CAN_CHOOSE_REMAINING",s[s.HAS_CHOSEN_REMAINING=5]="HAS_CHOSEN_REMAINING",s))(V||{});const ce=Ye("yahtzeeRainbowStore",()=>{const s=Be(),t=Pe(),o=Fe(),u=Te(),{personalBest:R,highscorePosition:k}=j(o),{firebaseUser:f}=j(t),{games:n,gamesLoading:H,gameId:b,creatorId:F,players:x,opponents:g,partyName:w,maxPlayers:v,chat:E,isOwner:G}=j(u),{setPreviousHighscores:Q,updateHighscores:q,sortHighscores:ae}=o,oe={onlineGames:We(s,Re.GAME_DATA,X.YAHTZEE_RAINBOW,Re.ONLINE_GAMES)},A=z(y.SOLO),T=z(0),m=z(1),M=z(!1),d=z("soloPlayer"),S=z(d.value),h=z(be()),O=xe({}),I=xe({}),ne=W(()=>h.value.some(l=>l.isRolling)),P=W(()=>h.value.filter(l=>l.color===null)),he=W(()=>!!(S.value===d.value&&P.value.length&&!M.value&&m.value===1)),ge=W(()=>l=>!!(S.value===l&&!ne.value&&h.value.some(_=>_.color===null)&&!M.value&&(A.value===y.SOLO&&m.value===2||A.value===y.MULTIPLAYER&&[4,2].includes(m.value)))),me=W(()=>S.value===d.value&&!ne.value&&!M.value),He=W(()=>(l,_)=>{if(S.value!==l)return[];const i=[],p=h.value.find(C=>C.color===_);return P.value.length===2?(i.push(P.value[0].value+P.value[1].value),p&&(i.push(P.value[0].value+p.value),i.push(P.value[1].value+p.value))):P.value.length===1&&p&&i.push(P.value[0].value+p.value),i}),Ce=W(()=>(l,_,i)=>{var p;return!!((p=O[l])!=null&&p[_].find(C=>C.row===i))});$e(()=>{o.$init(X.YAHTZEE_RAINBOW)}),ie(O,()=>{T.value!==3&&Ie().size===2&&(A.value===y.SOLO||G.value)&&(T.value=3)}),ie(T,l=>{l===3&&S.value===d.value&&(A.value===y.SOLO?(Ee(d.value),Ae(),ve()):G.value&&(x.value.forEach(_=>{Ee(_.userId)}),Ae(),we()),_e(Ve))}),ie(I,()=>{var l;if(A.value===y.MULTIPLAYER){const _=(l=I[d.value])==null?void 0:l.winStatus;(_==="win"||_==="tie")&&ve()}}),ie([T,m,S,ne],()=>{A.value===y.MULTIPLAYER&&we()},{deep:!0}),ie(x,()=>{m.value===0&&v.value&&x.value.length===v.value&&(m.value=1)});const de=()=>{u.$reset(),A.value=y.SOLO,T.value=0,m.value=1,M.value=!1,d.value="soloPlayer",S.value=d.value,h.value=ee(),Object.keys(O).forEach(l=>{delete O[l],delete I[l]}),Q()},Le=(l,_=null,i=null)=>{f.value&&(l=[{userId:f.value.uid,isOnline:!0},...l],A.value=y.MULTIPLAYER,T.value=2,m.value=i?0:1,d.value=f.value.uid,S.value=d.value,l.forEach(p=>{O[p.userId]=fe(),I[p.userId]=null}),u.$init(X.YAHTZEE_RAINBOW,pe,ye,de),u.createGame(l,_,i))},De=l=>{f.value&&(A.value=y.MULTIPLAYER,d.value=f.value.uid,u.$init(X.YAHTZEE_RAINBOW,pe,ye,de),u.continueGame(l))},pe=()=>({gameStatus:T.value,yahtzeeStatus:m.value,activePlayerId:S.value,dices:h.value,score:O,finalScore:I}),ye=l=>{var i;const _=(i=f.value)==null?void 0:i.uid;!_||S.value===d.value||(T.value=l.gameStatus,m.value=l.yahtzeeStatus,S.value=l.activePlayerId,h.value=l.dices,Object.assign(O,l.score),Object.assign(I,l.finalScore),Object.keys(O).includes(_)||(O[_]=fe(),I[_]=null))},we=()=>{!f.value||S.value!==d.value&&!M.value||u.pushState()},Se=async()=>{for(;ne.value;)await new Promise(l=>setTimeout(l,o.diceRollSpeed*1e3));return!0},Ie=()=>{const l=new Set;for(const _ of Object.values(O))for(const[i,p]of Object.entries(_))p.some(C=>C.row===10)&&l.add(Number(i));return l},ee=()=>be().filter(l=>l.color===null||!Ie().has(l.color)),Ge=()=>{A.value=y.SOLO,T.value=2,m.value=1,O[d.value]=fe(),I[d.value]=null},Oe=async()=>{if(!he.value)return;const l=o.diceRollSpeed*1e3;h.value.forEach(_=>{_.isRolling=!0,setTimeout(()=>{_.value=je(6),_.isRolling=!1},Ue(l,l/3))}),await Se(),m.value=2,_e(ze)},Me=(l,_,i)=>{if(ge.value){if(O[d.value][l].push({row:_}),P.value.length===2&&P.value[0].value+P.value[1].value===i)h.value=h.value.filter(p=>p.color!==null);else{const p=h.value.find(C=>C.color===l);if(p){const C=P.value.find(le=>le.value+p.value===i);C&&(h.value=h.value.filter(le=>le.id!==p.id&&le.id!==C.id))}}A.value===y.MULTIPLAYER&&(M.value=!0,m.value===4?m.value=5:m.value=3,setTimeout(async()=>{M.value=!1,await ke(),await Ne()},o.diceRollSpeed*1e3)),_e(Ze)}},Ne=async()=>{me.value&&(A.value===y.SOLO?(m.value=1,h.value=ee()):m.value===4?(m.value=1,h.value=ee(),await Oe()):m.value===5?(m.value=1,h.value=ee()):(P.value.length===1?m.value=4:(m.value=1,h.value=ee()),M.value=!0,S.value=u.getNextPlayerId(S.value),h.value.some(l=>l.color===null)||(h.value=ee()),await ke(),M.value=!1))},Ee=l=>{let _=0;Object.values(O[l]).forEach(i=>{i.length&&(_+=ul[i.length])});for(let i=0;i<10;i++){const p=Object.values(O[l]).filter(C=>!!C.find(le=>le.row===i)).length;p>=3&&(_+=cl[p][i])}I[l]={total:_}},Ae=()=>{const l=Math.max(...Object.values(I).map(i=>(i==null?void 0:i.total)??0)),_=Object.keys(I).filter(i=>{var p;return((p=I[i])==null?void 0:p.total)===l});A.value===y.SOLO?I[d.value].winStatus="win":x.value.forEach(i=>{_.includes(i.userId)?_.length===1?I[i.userId].winStatus="win":I[i.userId].winStatus="tie":I[i.userId].winStatus="lose"})},ve=()=>{f!=null&&f.value&&I[d.value]&&q({gameId:b.value??null,score:I[d.value].total})};return{collections:oe,games:n,gamesLoading:H,gameId:b,creatorId:F,players:x,opponents:g,partyName:w,maxPlayers:v,chat:E,isOwner:G,gameType:A,gameStatus:T,yahtzeeStatus:m,yahtzeeStatusLoading:M,myPlayerId:d,activePlayerId:S,score:O,finalScore:I,dices:h,whiteDices:P,isRolling:ne,canRoll:he,canSelectScore:ge,canSkipTurn:me,hasSelectedScore:Ce,canChooseOf:He,personalBest:R,highscorePosition:k,$reset:de,start:Ge,roll:Oe,hasFinishedRolling:Se,selectScore:Me,passTurn:Ne,setPreviousHighscores:Q,updateYahtzeeHighscore:ve,sortHighscores:ae,fetchOnlineGames:u.fetchGames,createOnlineGame:Le,continueOnlineGame:De,leaveOnlineGame:u.leaveGame,deleteOnlineGame:u.deleteGame,getPlayerDisplayName:u.getPlayerDisplayName,getNextPlayerId:u.getNextPlayerId}},{persist:{enabled:!0}}),be=()=>[{id:1,color:4,value:1,isRolling:!1},{id:2,color:3,value:2,isRolling:!1},{id:3,color:2,value:3,isRolling:!1},{id:4,color:1,value:4,isRolling:!1},{id:5,color:0,value:5,isRolling:!1},{id:6,color:null,value:6,isRolling:!1},{id:7,color:null,value:6,isRolling:!1}],fe=()=>({0:[],1:[],2:[],3:[],4:[]}),re={0:[12,10,8,6,4,2,4,6,8,10,12],1:[2,4,6,8,10,12,10,8,6,4,2],2:[12,11,10,9,8,7,6,5,4,3,2],3:[2,3,4,5,6,7,8,9,10,11,12],4:[2,3,4,5,6,7,8,9,10,11,12]},ul={1:1,2:2,3:4,4:7,5:11,6:16,7:22,8:29,9:37,10:46,11:56},cl={3:[2,2,1,1,1,1,1,1,1,2,2],4:[5,4,4,2,2,2,2,2,1,2,4],5:[10,8,6,4,2,0,2,4,6,8,10]},dl={0:"text-purple-500",1:"text-blue-500",2:"text-yellow-500",3:"text-orange-500",4:"text-red-500"},vl={0:"bg-purple-700",1:"bg-blue-700",2:"bg-yellow-700",3:"bg-orange-700",4:"bg-red-700"},_l={0:"fill-purple-500",1:"fill-blue-500",2:"fill-yellow-500",3:"fill-orange-500",4:"fill-red-500"},fl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},hl=["fill"],gl=D({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",fl,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,hl)]))}}),ml={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},pl=["fill"],yl=["fill"],wl=D({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",ml,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,pl),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,yl)]))}}),Sl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Il=["fill"],Ol=["fill"],Nl=["fill"],El=D({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Sl,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Il),r("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Ol),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Nl)]))}}),Al={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Rl=["fill"],xl=["fill"],kl=["fill"],bl=["fill"],Pl=D({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Al,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Rl),r("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,xl),r("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,kl),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,bl)]))}}),Tl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},$l=["fill"],Hl=["fill"],Cl=["fill"],Ll=["fill"],Dl=["fill"],Gl=D({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Tl,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,$l),r("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,Hl),r("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Cl),r("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,Ll),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Dl)]))}}),Ml={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Yl=["fill"],Bl=["fill"],Fl=["fill"],Wl=["fill"],jl=["fill"],Ul=["fill"],zl=D({__name:"Dice6",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Ml,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Yl),r("circle",{cx:"25",cy:"50",r:"10",fill:t.color},null,8,Bl),r("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,Fl),r("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,Wl),r("circle",{cx:"75",cy:"50",r:"10",fill:t.color},null,8,jl),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Ul)]))}}),Zl=D({__name:"Dice",props:{dice:{}},setup(s){const t={1:gl,2:wl,3:El,4:Pl,5:Gl,6:zl};return(o,u)=>(a(),c("div",{class:U(["cursor-pointer",{"animate-spin":o.dice.isRolling}])},[(a(),L(qe(t[o.dice.value]),{color:"black",backgroundColor:o.dice.color!==null?e(_l)[o.dice.color]:"fill-white",width:"40",height:"40"},null,8,["backgroundColor"]))],2))}}),Vl={class:"w-full flex flex-col md:flex-row justify-between gap-3 md:gap-10"},ql={key:0,class:"text-white"},Jl={key:1},Kl=D({__name:"Scoreboard",setup(s){const t=ce(),{myPlayerId:o,gameType:u,gameStatus:R,canChooseOf:k,canSelectScore:f,score:n,players:H}=j(t),b=W(()=>u.value===y.SOLO?[{userId:o.value,isOnline:!0}]:H.value);return(F,x)=>(a(),c("div",Vl,[(a(!0),c(Y,null,ue(b.value,g=>(a(),c("table",{key:g.userId,class:U(["w-full mt-5 text-sm md:text-base text-left",e(R)===e($).HAS_FINISHED?"text-neutral-500":"text-white"])},[e(u)===e(y).MULTIPLAYER?(a(),c("thead",ql,[r("tr",null,[r("th",{class:U(["text-center",g.isOnline?"text-green-400":"text-red-400"]),colspan:"5"},N(g.userId===e(o)?"You":e(t).getPlayerDisplayName(g.userId)),3)])])):K("",!0),e(n)[g.userId]?(a(),c("tbody",Jl,[(a(),c(Y,null,ue(11,w=>r("tr",{key:w},[(a(!0),c(Y,null,ue([e(te).Red,e(te).Orange,e(te).Yellow,e(te).Blue,e(te).Purple],v=>(a(),c("td",{key:v,class:U([e(dl)[v],{[e(vl)[v]]:e(n)[g.userId][v].length&&w-1<=e(n)[g.userId][v][e(n)[g.userId][v].length-1].row,"opacity-25":e(n)[g.userId][v].length&&w-1<e(n)[g.userId][v][e(n)[g.userId][v].length-1].row&&e(n)[g.userId][v].every(E=>E.row!==w-1)}])},[e(n)[g.userId][v].length&&w-1<=e(n)[g.userId][v][e(n)[g.userId][v].length-1].row?(a(),c(Y,{key:0},[B(N(e(re)[v][w-1]),1)],64)):e(f)(g.userId)&&e(k)(g.userId,v).includes(e(re)[v][w-1])?(a(),L(se,{key:1,class:"size-8",variant:"neutral",disabled:g.userId!==e(o),onClick:E=>e(t).selectScore(v,w-1,e(re)[v][w-1])},{default:J(()=>[B(N(e(re)[v][w-1]),1)]),_:2},1032,["disabled","onClick"])):(a(),c(Y,{key:2},[B(N(e(re)[v][w-1]),1)],64))],2))),128))])),64))])):K("",!0)],2))),128))]))}}),Ql=rl(Kl,[["__scopeId","data-v-d5afb153"]]),Xl={class:"w-full flex justify-center"},et={class:"text-lg"},lt=D({__name:"StatusHeader",setup(s){const t=ce(),{yahtzeeStatus:o,yahtzeeStatusLoading:u,activePlayerId:R,myPlayerId:k,players:f}=j(t),n=W(()=>{var H;return R.value===k.value?"You":((H=f.value.find(b=>b.userId===R.value))==null?void 0:H.displayName)||"Unknown"});return(H,b)=>(a(),c("div",Xl,[r("h3",et,[e(o)===e(V).HAS_STARTED||e(o)===e(V).HAS_CHOSEN_REMAINING?(a(),c(Y,{key:0},[B(N(n.value)+" can now roll the dices. ",1)],64)):e(o)===e(V).HAS_THROWN_DICES?(a(),c(Y,{key:1},[B(N(n.value)+" can now choose a score, or pass the turn. ",1)],64)):e(o)===e(V).HAS_CHOSEN_SCORE?(a(),c(Y,{key:2},[B(N(n.value)+" chose a score. ",1)],64)):e(o)===e(V).CAN_CHOOSE_REMAINING?(a(),c(Y,{key:3},[B(N(n.value)+" can choose from the remaining dices. ",1)],64)):K("",!0)])]))}}),tt={class:"w-full flex flex-col gap-3"},st={class:"w-full flex flex-col md:flex-row gap-5 md:gap-10 justify-center"},at={class:"w-full md:w-1/2 flex justify-center gap-3"},ot=D({__name:"YahtzeeMainGame",setup(s){const t=ce(),o=Te(),{gameType:u,yahtzeeStatus:R,yahtzeeStatusLoading:k,myPlayerId:f,activePlayerId:n,dices:H,chat:b,maxPlayers:F,isRolling:x,canRoll:g,canSkipTurn:w}=j(t),{players:v}=j(o),E=W(()=>F.value?F.value-v.value.length:0);return(G,Q)=>(a(),c("div",tt,[Z(lt),r("div",st,[Z(e(Je),{class:"w-full md:w-1/2"},{default:J(()=>[e(R)===e(V).WAITING_FOR_OPPONENTS||e(n)!==e(f)?(a(),L(se,{key:0,class:"w-full",variant:"tertiary",disabled:""},{default:J(()=>[B(N(E.value?`Waiting for ${E.value} more player${E.value!==1?"s":""}`:e(n)!==e(f)?`${e(o).getPlayerDisplayName(e(n))}'s turn`:"Roll"),1)]),_:1})):e(x)||e(k)?(a(),L(se,{key:1,class:"w-full",variant:"neutral",disabled:""},{default:J(()=>[B(N(e(x)?"Rolling...":"Loading..."),1)]),_:1})):e(g)?(a(),L(se,{key:2,class:"w-full",variant:"tertiary",disabled:e(x),onClick:e(t).roll},{default:J(()=>[B(N(e(n)!==e(f)?`${e(o).getPlayerDisplayName(e(n))}'s turn`:"Roll"),1)]),_:1},8,["disabled","onClick"])):e(w)?(a(),L(se,{key:3,class:"w-full",variant:"neutral",onClick:e(t).passTurn},{default:J(()=>[B(N(e(u)===e(y).SOLO||e(R)===e(V).CAN_CHOOSE_REMAINING?"Reroll":e(R)===e(V).HAS_CHOSEN_SCORE?"Next player":"Pass turn"),1)]),_:1},8,["onClick"])):K("",!0)]),_:1}),r("div",at,[(a(!0),c(Y,null,ue(e(H),q=>(a(),L(Zl,{key:q.id,dice:q},null,8,["dice"]))),128))])]),Z(Ql),e(u)===e(y).MULTIPLAYER?(a(),L(sl,{key:0,chats:e(b)??[],onSendChat:Q[0]||(Q[0]=q=>b.value=[...e(b)??[],q])},null,8,["chats"])):K("",!0)]))}}),nt={class:"flex flex-col gap-3"},it={class:"text-center text-xl md:text-3xl font-bold"},rt={key:0,class:"text-green-500"},ut={key:1,class:"text-purple-500"},ct={key:2,class:"text-red-500"},dt={key:3,class:"text-blue-500 font-bold"},vt={key:4,class:"text-blue-500 font-bold"},_t={key:5,class:"text-blue-500 font-bold"},ft={class:"text-center text-md md:text-lg"},ht=D({__name:"YahtzeeResults",setup(s){const t=ce(),{myPlayerId:o,finalScore:u,opponents:R}=j(t),{currentHighscorePosition:k,hasImprovedHighscorePosition:f,hasImprovedPersonalBest:n}=el(X.YAHTZEE_RAINBOW);return(H,b)=>{var F,x,g,w,v;return a(),c("div",nt,[r("div",it,[((F=e(u)[e(o)])==null?void 0:F.winStatus)==="win"?(a(),c("p",rt," You won with "+N((x=e(u)[e(o)])==null?void 0:x.total)+" points! ",1)):((g=e(u)[e(o)])==null?void 0:g.winStatus)==="tie"?(a(),c("p",ut," You tied with "+N((w=e(u)[e(o)])==null?void 0:w.total)+" points! ",1)):(a(),c("p",ct," You lost with "+N((v=e(u)[e(o)])==null?void 0:v.total)+" points. ",1)),e(f)&&e(k)===1?(a(),c("p",dt," HIGHSCORE! ")):e(f)?(a(),c("p",vt," LEADERBOARD IMPROVEMENT! ")):e(n)?(a(),c("p",_t," PERSONAL BEST! ")):K("",!0)]),r("div",ft,[(a(!0),c(Y,null,ue(e(R),E=>{var G;return a(),c("p",{key:E.userId},N(E.displayName)+" has "+N((G=e(u)[E.userId])==null?void 0:G.total)+" points ",1)}),128))])])}}}),gt={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},mt={class:"flex flex-wrap justify-center gap-3"},pt={key:0,class:"w-full"},Rt=D({__name:"Yahtzee",setup(s){const t=ce(),o=Pe(),{gameId:u,partyName:R,isOwner:k,gameType:f,gameStatus:n,myPlayerId:H,finalScore:b,personalBest:F}=j(t),{isLoggedIn:x}=j(o),{start:g,$reset:w,createOnlineGame:v,continueOnlineGame:E,leaveOnlineGame:G,deleteOnlineGame:Q,updateYahtzeeHighscore:q}=t,ae=z(!1),oe=z(!1),A=()=>{f.value=y.MULTIPLAYER,n.value=$.FINDING_OPPONENT},T=async()=>{u.value&&(k.value?await Q():await G()),w()},m=async()=>{u.value&&await G(),w()};return $e(()=>{u.value&&E(u.value)}),Ke(async()=>{u.value&&(await G(),w())}),(M,d)=>(a(),L(Qe,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainbow Yahtzee",tags:e(f)===e(y).MULTIPLAYER&&e(R)?[{value:e(R),severity:"danger"}]:void 0,description:e(n)===e($).HAS_NOT_STARTED?e(f)===e(y).SOLO?"Play solo or with a friend.":"Play with a friend.":void 0},{right:J(()=>[r("div",gt,[Z(se,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:d[0]||(d[0]=S=>ae.value=!0)}),Z(nl,{"icon-only":"","is-solo":e(f)===e(y).SOLO,"is-owner":e(k),"has-game-started":e(n)>=e($).IS_PLAYING,"is-game-over":e(n)===e($).HAS_FINISHED,onDelete:T},null,8,["is-solo","is-owner","has-game-started","is-game-over"])])]),default:J(()=>{var S;return[r("div",mt,[e(n)===e($).FINDING_OPPONENT?(a(),c("div",pt,[Z(al,{"allow-party":"",onCreateOnlineGame:d[1]||(d[1]=h=>e(v)([{userId:h}])),onContinueOnlineGame:e(E),onCreateParty:d[2]||(d[2]=(h,O)=>e(v)([],h,O)),onJoinParty:e(E)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(n)===e($).IS_PLAYING?(a(),L(ot,{key:1})):e(n)===e($).HAS_FINISHED?(a(),L(ht,{key:2})):K("",!0)]),Z(ol,{"is-viewing-highscores":oe.value,"onUpdate:isViewingHighscores":d[3]||(d[3]=h=>oe.value=h),"has-solo":e(k),"is-solo":e(f)===e(y).SOLO,hasMultiplayer:"",isMultiplayer:e(f)===e(y).MULTIPLAYER,"is-owner":e(k),"is-main-menu":e(n)===e($).HAS_NOT_STARTED,"has-game-started":e(n)>=e($).IS_PLAYING,"is-game-over":e(n)===e($).HAS_FINISHED,onPlaySolo:e(g),onPlayMultiplayer:A,onRestart:T,onGoBack:m},null,8,["is-viewing-highscores","has-solo","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),oe.value?(a(),L(ll,{key:0,"game-id":e(X).YAHTZEE_RAINBOW},null,8,["game-id"])):K("",!0),Z(tl,{"is-logged-in":e(x),"is-solo":e(f)===e(y).SOLO,"is-game-over":e(n)===e($).HAS_FINISHED,"final-score":((S=e(b)[e(H)])==null?void 0:S.total)??0,"personal-best":e(F),"redirect-route":e(Xe).GAMES_YAHTZEE_RAINBOW,onUpdateHighscore:d[4]||(d[4]=h=>e(q)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),Z(il,{"game-id":e(X).YAHTZEE_RAINBOW,"is-open":ae.value,"onUpdate:isOpen":d[5]||(d[5]=h=>ae.value=h)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{Rt as default};
