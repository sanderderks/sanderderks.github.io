import{d as ne,s as W,w as X,f as O,L as _e,g as a,j as t,q as n,m as u,I as v,h as e,k as i,_ as ee,A as K,a3 as U,aQ as c,C as E,E as P,aR as Se,aS as re,o as de,ax as ve,z as Q,c as he,l as $,a7 as ye,y as fe}from"../bundle.js";import{u as ue,s as pe,G as l,S as T,B as j,_ as Ie}from"./c-Dice.vue_vue_type_script_setup_true_lang-CdyTwF-J.js";import{u as Te,H as we,_ as Ee}from"./c-useScoreInfo-C7Ryy6s_.js";import{_ as ge,a as Ae}from"./c-GameChat.vue_vue_type_script_setup_true_lang-B7axdFog.js";import{_ as He,a as Oe}from"./c-GameActions.vue_vue_type_script_setup_true_lang-DHzFLEm_.js";import{_ as Re}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B2NbM3Lv.js";import{_ as ce}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-Dice5.vue_vue_type_script_setup_true_lang-DK-8hWiG.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";const Pe={class:"h-10"},Ne={class:"w-1/2 md:w-1/3"},ke={key:0},Le={key:1,class:"!ps-1 md:ps-1"},xe={key:2},De={key:0},$e={key:1},Ye={key:2},Me=ne({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(te){const S=te,Y=ue(),{gameType:m,gameStatus:h,activePlayerId:A,myPlayerId:N,opponents:y,reroll:g}=W(Y),{selectScore:f,getScore:o,getActualValue:L}=Y,R=X(!1),F=pe[S.row],k=O(()=>o(S.row,N.value)),p=O(()=>L(S.row,S.hasValue)),M=O(()=>p.value===!1?"X":p.value);return _e(()=>p.value,()=>{R.value=!0,setTimeout(()=>{R.value=!1})}),(I,b)=>(t(),a("tr",Pe,[n("th",Ne,v(e(F).title),1),k.value?(t(),a("td",ke,v(k.value.value===!1?"X":k.value.value),1)):e(A)===e(N)&&e(g)>=0&&!R.value?(t(),a("td",Le,[i(ee,{class:"size-8",variant:p.value===!1||p.value===0?"neutral":void 0,onClick:b[0]||(b[0]=H=>e(f)(I.row,p.value))},{default:K(()=>[U(v(M.value),1)]),_:1},8,["variant"])])):(t(),a("td",xe)),e(m)===e(c).MULTIPLAYER?(t(!0),a(E,{key:3},P(e(y),H=>(t(),a(E,null,[e(o)(I.row,H.userId)?(t(),a("td",De,v(e(o)(I.row,H.userId).value===!1?"X":e(o)(I.row,H.userId).value),1)):e(A)===H.userId&&e(h)>e(l).HAS_STARTED?(t(),a("td",$e,[i(ee,{class:"size-8",variant:p.value===!1||p.value===0?"neutral":"danger"},{default:K(()=>[U(v(M.value),1)]),_:1},8,["variant"])])):(t(),a("td",Ye))],64))),256)):u("",!0)]))}}),w=ce(Me,[["__scopeId","data-v-fe496a9d"]]),be={key:0,class:"text-white"},Ge={key:1,class:"h-12 md:h-auto text-yellow-500"},Ue={key:3,class:"h-12 md:h-auto text-yellow-500"},Fe={class:"h-12 md:h-auto text-pink-500"},Ce={key:0,class:"text-purple-500 font-bold"},Be={key:1,class:"text-red-500 font-bold"},Ve={key:2,class:"text-green-500 font-bold"},ze={key:0,class:"h-12 md:h-auto text-red-500 font-bold"},Ze=ne({__name:"Scoreboard",setup(te){const S=ue(),Y=Se(),{gameType:m,gameStatus:h,myPlayerId:A,bonusScore:N,finalScore:y,hasOfValue:g,hasThreeOfAKind:f,hasFourOfAKind:o,hasFullHouse:L,hasSmallStraight:R,hasLargeStraight:F,hasYahtzee:k,diceTotal:p}=W(S),{players:M,opponents:I}=W(Y),{currentHighscorePosition:b,hasImprovedHighscorePosition:H,hasImprovedPersonalBest:C}=Te(re.YAHTZEE),B=X(),x=X(!1),V=O(()=>g.value(1)),ae=O(()=>g.value(2)),se=O(()=>g.value(3)),le=O(()=>g.value(4)),oe=O(()=>g.value(5)),z=O(()=>g.value(6));return de(()=>{B.value=setInterval(()=>{x.value=!x.value},500)}),ve(()=>{clearInterval(B.value)}),(D,d)=>{var J,Z,q;return t(),a("table",{class:Q(["w-full mt-5 text-sm md:text-base text-left",e(h)===e(l).HAS_FINISHED?"text-neutral-500":"text-white",e(h)===e(l).HAS_NOT_STARTED?x.value?"even":"odd":void 0])},[e(m)===e(c).MULTIPLAYER?(t(),a("thead",be,[n("tr",null,[d[0]||(d[0]=n("th",null,null,-1)),d[1]||(d[1]=n("th",null,"You",-1)),(t(!0),a(E,null,P(e(I),r=>(t(),a("th",{key:r.userId,class:Q(r.isOnline?"text-green-400":"text-red-400")},v(e(S).getPlayerDisplayName(r.userId)),3))),128))])])):u("",!0),n("tbody",null,[i(w,{row:e(T).ONES,"has-value":V.value},null,8,["row","has-value"]),i(w,{row:e(T).TWOS,"has-value":ae.value},null,8,["row","has-value"]),i(w,{row:e(T).THREES,"has-value":se.value},null,8,["row","has-value"]),i(w,{row:e(T).FOURS,"has-value":le.value},null,8,["row","has-value"]),i(w,{row:e(T).FIVES,"has-value":oe.value},null,8,["row","has-value"]),i(w,{row:e(T).SIXES,"has-value":z.value},null,8,["row","has-value"]),e(h)>=e(l).HAS_FINISHED?(t(),a("tr",{key:0,class:Q(["h-12 md:h-auto",e(h)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[d[2]||(d[2]=n("th",null,"TOP",-1)),n("td",null,v(((J=e(y)[e(A)])==null?void 0:J.top)??""),1),e(m)===e(c).MULTIPLAYER?(t(!0),a(E,{key:0},P(e(I),r=>{var s;return t(),a("td",null,v(((s=e(y)[r.userId])==null?void 0:s.top)??""),1)}),256)):u("",!0)],2)):u("",!0),e(h)>e(l).HAS_NOT_STARTED&&Object.values(e(N)).some(r=>r.includes(e(j).TOP))?(t(),a("tr",Ge,[d[3]||(d[3]=n("th",null,"BONUS",-1)),n("td",null,v(e(S).getBonus(e(j).TOP,e(A))||""),1),e(m)===e(c).MULTIPLAYER?(t(!0),a(E,{key:0},P(e(I),r=>(t(),a("td",null,v(e(S).getBonus(e(j).TOP,r.userId)||""),1))),256)):u("",!0)])):u("",!0),i(w,{row:e(T).THREE_OF_A_KIND,"has-value":e(f)},null,8,["row","has-value"]),i(w,{row:e(T).FOUR_OF_A_KIND,"has-value":e(o)},null,8,["row","has-value"]),i(w,{row:e(T).FULL_HOUSE,"has-value":e(L)},null,8,["row","has-value"]),i(w,{row:e(T).SMALL_STRAIGHT,"has-value":e(R)},null,8,["row","has-value"]),i(w,{row:e(T).LARGE_STRAIGHT,"has-value":e(F)},null,8,["row","has-value"]),i(w,{row:e(T).YAHTZEE,"has-value":e(k)},null,8,["row","has-value"]),i(w,{row:e(T).CHANCE,"has-value":e(p)},null,8,["row","has-value"]),e(h)>=e(l).HAS_FINISHED?(t(),a("tr",{key:2,class:Q(["h-12 md:h-auto",e(h)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[d[4]||(d[4]=n("th",null,"BOTTOM",-1)),n("td",null,v(((Z=e(y)[e(A)])==null?void 0:Z.bottom)??""),1),e(m)===e(c).MULTIPLAYER?(t(!0),a(E,{key:0},P(e(I),r=>{var s;return t(),a("td",null,v(((s=e(y)[r.userId])==null?void 0:s.bottom)??""),1)}),256)):u("",!0)],2)):u("",!0),Object.values(e(N)).some(r=>r.length>0)?(t(),a("tr",Ue,[d[5]||(d[5]=n("th",null,"YAHTZEE BONUS",-1)),n("td",null,v(e(S).getBonus(e(j).YAHTZEE,e(A))||""),1),e(m)===e(c).MULTIPLAYER?(t(!0),a(E,{key:0},P(e(I),r=>(t(),a("td",null,v(e(S).getBonus(e(j).YAHTZEE,r.userId)||""),1))),256)):u("",!0)])):u("",!0),e(h)===e(l).HAS_FINISHED?(t(),a(E,{key:4},[n("tr",Fe,[d[6]||(d[6]=n("th",null,"TOTAL",-1)),n("td",null,[U(v(((q=e(y)[e(A)])==null?void 0:q.total)??"")+" ",1),e(H)&&e(b)===1?(t(),a("span",Ce," HIGHSCORE! ")):e(H)?(t(),a("span",Be," LEADERBOARD IMPROVEMENT! ")):e(C)?(t(),a("span",Ve," PERSONAL BEST! ")):u("",!0)]),e(m)===e(c).MULTIPLAYER?(t(!0),a(E,{key:0},P(e(I),r=>{var s;return t(),a("td",null,v(((s=e(y)[r.userId])==null?void 0:s.total)??""),1)}),256)):u("",!0)]),e(m)===e(c).MULTIPLAYER?(t(),a("tr",ze,[d[7]||(d[7]=n("td",null,null,-1)),(t(!0),a(E,null,P(e(M),r=>{var s,G;return t(),a("td",null,[((s=e(y)[r.userId])==null?void 0:s.winStatus)==="win"?(t(),a(E,{key:0},[U(" WINNER! ")],64)):((G=e(y)[r.userId])==null?void 0:G.winStatus)==="tie"?(t(),a(E,{key:1},[U(" TIE! ")],64)):u("",!0)])}),256))])):u("",!0)],64)):u("",!0)])],2)}}}),ie=ce(Ze,[["__scopeId","data-v-0e7762c8"]]),je={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Ke={class:"flex flex-wrap justify-center gap-3"},We={key:0,class:"w-full"},Xe={key:1,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},Je={class:"w-full md:w-1/2 flex justify-center gap-3"},qe={class:"w-full md:w-1/2 flex justify-center gap-3"},dt=ne({__name:"Yahtzee",setup(te){const S=ue(),Y=he(),{gameId:m,chat:h,players:A,partyName:N,maxPlayers:y,isOwner:g,gameType:f,gameStatus:o,activePlayerId:L,myPlayerId:R,canRoll:F,canReroll:k,dices:p,finalScore:M,personalBest:I}=W(S),{isLoggedIn:b}=W(Y),{start:H,$reset:C,createOnlineGame:B,continueOnlineGame:x,leaveOnlineGame:V,deleteOnlineGame:ae,getPlayerDisplayName:se,roll:le,updateYahtzeeHighscore:oe}=S,z=X(!1),D=X(!1),d=O(()=>y.value?y.value-A.value.length:0),J=()=>{f.value=c.MULTIPLAYER,o.value=l.FINDING_OPPONENT},Z=async()=>{m.value&&(g.value?await ae():await V()),C()},q=async()=>{m.value&&await V(),C()};return de(()=>{m.value&&x(m.value)}),ve(async()=>{m.value&&(await V(),C())}),(r,s)=>(t(),$(fe,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",tags:e(f)===e(c).MULTIPLAYER&&e(N)?[{value:e(N),severity:"danger"}]:void 0,description:e(f)===e(c).SOLO?e(o)===e(l).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:K(()=>[n("div",je,[i(ee,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:s[0]||(s[0]=G=>z.value=!0)}),i(Oe,{"icon-only":"","is-solo":e(f)===e(c).SOLO,"is-owner":e(g),"has-game-started":e(o)>=e(l).HAS_STARTED,"is-game-over":e(o)===e(l).HAS_FINISHED,onDelete:Z},null,8,["is-solo","is-owner","has-game-started","is-game-over"])])]),default:K(()=>{var G;return[n("div",Ke,[e(o)===e(l).FINDING_OPPONENT?(t(),a("div",We,[i(ge,{"allow-party":"",onCreateOnlineGame:s[1]||(s[1]=_=>e(B)([{userId:_}])),onContinueOnlineGame:e(x),onCreateParty:s[2]||(s[2]=(_,me)=>e(B)([],_,me)),onJoinParty:e(x)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(o)>=e(l).HAS_STARTED&&e(o)<e(l).HAS_FINISHED?(t(),a("div",Xe,[n("div",Je,[e(f)===e(c).MULTIPLAYER||e(F)||e(k)?(t(),$(ee,{key:0,class:"w-full",variant:"tertiary",disabled:e(L)!==e(R)||e(o)===e(l).HAS_CHOSEN_DICES||e(o)===e(l).WAITING_FOR_OPPONENTS||e(p).every(_=>_.selected),onClick:e(le)},{default:K(()=>[U(v(d.value?`Waiting for ${d.value} more player${d.value!==1?"s":""}`:e(L)!==e(R)?`${e(se)(e(L))}'s turn`:e(k)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):u("",!0)]),n("div",qe,[(t(!0),a(E,null,P(e(p),_=>(t(),$(Ie,{key:_.id,dice:_},null,8,["dice"]))),128))])])):u("",!0)]),!D.value&&e(o)>=e(l).HAS_STARTED?(t(),$(ie,{key:0})):u("",!0),!D.value&&e(f)===e(c).MULTIPLAYER&&e(o)>=e(l).HAS_STARTED?(t(),$(Ae,{key:1,chats:e(h)??[],onSendChat:s[3]||(s[3]=_=>h.value=[...e(h)??[],_])},null,8,["chats"])):u("",!0),i(He,{"is-viewing-highscores":D.value,"onUpdate:isViewingHighscores":s[4]||(s[4]=_=>D.value=_),"has-solo":"","is-solo":e(f)===e(c).SOLO,hasMultiplayer:"",isMultiplayer:e(f)===e(c).MULTIPLAYER,"is-owner":e(g),"is-main-menu":e(o)===e(l).HAS_NOT_STARTED,"has-game-started":e(o)>=e(l).HAS_STARTED,"is-game-over":e(o)===e(l).HAS_FINISHED,onPlaySolo:e(H),onPlayMultiplayer:J,onRestart:Z,onGoBack:q},null,8,["is-viewing-highscores","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),!D.value&&e(o)===e(l).HAS_NOT_STARTED?(t(),$(ie,{key:2})):u("",!0),D.value?(t(),$(we,{key:3,"game-id":e(re).YAHTZEE},null,8,["game-id"])):u("",!0),i(Ee,{"is-logged-in":e(b),"is-solo":e(f)===e(c).SOLO,"is-game-over":e(o)===e(l).HAS_FINISHED,"final-score":((G=e(M)[e(R)])==null?void 0:G.total)??0,"personal-best":e(I),"redirect-route":e(ye).GAMES_YAHTZEE,onUpdateHighscore:s[5]||(s[5]=_=>e(oe)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),i(Re,{"game-id":e(re).YAHTZEE,"is-open":z.value,"onUpdate:isOpen":s[6]||(s[6]=_=>z.value=_)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{dt as default};
