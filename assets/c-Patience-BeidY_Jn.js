import{g as i,j as s,ac as se,q as l,d as z,af as q,ag as Y,s as M,f as C,l as y,y as U,ap as le,z as G,A as m,a3 as _,aT as Q,I as V,k as a,m as f,h as e,aN as ae,aS as K,c as re,w as W,a as ne,T as de,an as oe,_ as A,a7 as ce,R as ie}from"../bundle.js";import{a as J,b as u,D as r,C as p,_ as pe}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-DyQMKhMT.js";import{u as ue,H as ye}from"./c-useScoreInfo-BCYDvVMj.js";import{_ as F}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import{S as Z}from"./c-Spades-HPmwGyS9.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-BGsOqr_m.js";const fe={},me={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function ke(D,n){return s(),i("svg",me,n[0]||(n[0]=[se('<circle cx="50" cy="30" r="15" fill="black"></circle><circle cx="35" cy="50" r="15" fill="black"></circle><circle cx="65" cy="50" r="15" fill="black"></circle><rect x="45" y="50" width="10" height="30" fill="black"></rect><rect x="40" y="80" width="20" height="10" fill="black"></rect>',5)]))}const X=F(fe,[["render",ke]]),xe={},Se={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function ge(D,n){return s(),i("svg",Se,n[0]||(n[0]=[l("polygon",{points:"50,10 80,50 50,90 20,50",fill:"red"},null,-1)]))}const ee=F(xe,[["render",ge]]),ve={},we={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function _e(D,n){return s(),i("svg",we,n[0]||(n[0]=[l("path",{d:"M50 70 Q20 50 20 30 Q20 10 40 10 Q50 10 50 20 Q50 10 60 10 Q80 10 80 30 Q80 50 50 70 Z",fill:"red"},null,-1)]))}const te=F(ve,[["render",_e]]),Ee={key:0,class:"w-full h-full flex justify-center"},be={key:1,class:"relative w-full flex"},Te={class:"relative flex text-xs md:text-md lg:text-lg font-bold"},Ce=z({__name:"Card",props:{card:{},index:{}},emits:["select"],setup(D,{emit:n}){const o=D,R=n,h=q(Y).greaterOrEqual("lg"),d=J(),{gameStatus:S,cards:N}=M(d),{isPlayDeck:I}=d,L=C(()=>{if(o.card.hidden)return"";switch(o.card.value){case 13:return"K";case 12:return"Q";case 11:return"J";case 1:return"A";default:return`${o.card.value}`}}),B=C(()=>o.card.hidden?"text-primary":o.card.color==="black"?"text-black":"text-red-500"),O=C(()=>o.index===N.value[o.card.deck].length-1),$=C(()=>S.value===u.HAS_STARTED&&(O.value||!o.card.hidden)),g=C(()=>I(o.card.deck)||h.value&&o.card.deck===r.STOCK_CLOSED),j=C(()=>I(o.card.deck)?20:10),H={[p.HEARTS]:te,[p.SPADES]:Z,[p.DIAMONDS]:ee,[p.CLUBS]:X};return(k,x)=>(s(),y(U,{class:G(["z-10 absolute h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px] !p-1 !pt-0 bg-opacity-100 !rounded-primary flex justify-center border border-white",[B.value,k.card.hidden?"bg-violet-950 border-1 !border-yellow-700":"bg-neutral-300",k.card.selected?"border-[3px] !border-red-600":"!border-black",{"draggable-card":$.value&&!k.card.hidden}]]),style:le({top:g.value?`${j.value*k.index}px`:0}),"title-props":{class:"text-xl"},clickable:$.value,onClick:x[0]||(x[0]=v=>R("select"))},{fullControl:m(()=>[k.card.hidden?(s(),i("div",Ee,x[1]||(x[1]=[l("div",{class:"flex flex-col justify-center"},[l("p",{class:"mb-2 text-5xl text-yellow-300"},"?")],-1)]))):(s(),i("div",be,[l("div",Te,[(s(),y(Q(H[k.card.type]),{class:"mt-[5px] sm:mt-[1px] h-[10px] w-[10px] sm:h-[20px] sm:w-[20px] md:h-[25px] md:w-[25px]"})),_(" "+V(L.value),1)]),(s(),y(Q(H[k.card.type]),{class:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[25px] sm:w-[35px] md:w-[50px]"}))]))]),_:1},8,["class","style","clickable"]))}}),Ae={class:"absolute h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px]"},De=z({__name:"CardDeck",props:{deckType:{},cardType:{}},setup(D){const n=D,R=q(Y).greaterOrEqual("md"),P=J(),{cards:h}=M(P),{shuffle:d,selectCard:S,selectEmptyDeck:N,selectFinalDeck:I,deselectAllCards:L,isPlayDeck:B,isFinalDeck:O}=P,$={[p.HEARTS]:te,[p.SPADES]:Z,[p.DIAMONDS]:ee,[p.CLUBS]:X},g=C(()=>h.value[n.deckType]),j=C(()=>!g.value.length&&!n.cardType),H=C(()=>j.value&&n.deckType!==r.STOCK_OPEN),k=()=>{H.value&&N(n.deckType)},x=()=>{L()},v=E=>{E.added&&(S(E.added.element),g.value.length?S(g.value[g.value.length-1]):B(n.deckType)?N(n.deckType):O(n.deckType)&&I(n.deckType))};return(E,b)=>(s(),i("div",{class:G(["relative h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px]",{"border border-neutral-500":g.value.length===0,"cursor-pointer":H.value}]),onClick:k},[a(e(ae),{list:[...g.value],itemKey:T=>`${T.type}.s${T.value}`,group:"patience",draggable:".draggable-card",delay:e(R)?0:100,onStart:x,onChange:v,onEnd:x},{item:m(({element:T,index:t})=>[a(Ce,{card:T,index:t,onSelect:w=>e(S)(T)},null,8,["card","index","onSelect"])]),header:m(()=>[l("div",Ae,[E.cardType?(s(),y(Q($[E.cardType]),{key:0,class:"absolute left-1/2 transform -translate-x-1/2 w-[50px] cursor-pointer",onClick:b[0]||(b[0]=T=>e(I)(E.deckType))})):E.deckType===e(r).STOCK_CLOSED?(s(),i("div",{key:1,class:"w-full h-full flex justify-center",onClick:b[1]||(b[1]=(...T)=>e(d)&&e(d)(...T))},b[2]||(b[2]=[l("div",{class:"flex flex-col justify-center"},[l("p",{class:"text-neutral-300 text-xs md:text-md lg:text-lg mb-2"},"Shuffle")],-1)]))):f("",!0)])]),_:1},8,["list","itemKey","delay"])],2))}}),c=F(De,[["__scopeId","data-v-1f64f67d"]]),he={class:"flex justify-center"},Ie={key:0,class:"w-full flex flex-wrap gap-3 justify-center"},He={key:1,class:"w-full flex flex-col gap-3"},Pe={class:"my-3"},Ne={key:1},Oe={key:2,class:"w-full grid grid-cols-4 md:grid-cols-6 justify-items-center"},$e={key:1,class:"mt-5 text-center text-xl md:text-3xl font-bold"},Re={class:"text-purple-500"},Le={key:0,class:"text-blue-500 font-bold"},Be={key:1,class:"text-blue-500 font-bold"},je={key:2,class:"text-blue-500 font-bold"},Ve={class:"mt-5 flex flex-wrap gap-3 justify-center"},Ge={key:0,class:"flex flex-wrap gap-3 mt-3 justify-center"},qe=z({__name:"Patience",setup(D){const o=q(Y).greaterOrEqual("lg"),R=ne(),P=J(),{difficulty:h,gameStatus:d,score:S,turns:N,formattedTime:I,personalBest:L}=M(P),{currentHighscorePosition:B,hasImprovedHighscorePosition:O,hasImprovedPersonalBest:$}=ue(K.PATIENCE),{start:g,$reset:j,updatePatienceHighscore:H}=P,{firebaseUser:k}=M(re()),x=W(!1),v=W(!1),E=()=>{v.value=!1,g()},b=()=>{v.value=!1,j()};return(T,t)=>(s(),y(U,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Patience",description:"Play solo."},{right:m(()=>[a(A,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:t[0]||(t[0]=w=>x.value=!0)})]),default:m(()=>[l("div",he,[e(d)===e(u).HAS_NOT_STARTED?(s(),i("div",Ie,[t[9]||(t[9]=l("div",{class:"w-full md:w-1/2 mb-5 text-pink-300"},[l("p",{class:"mb-3 text-xl text-center"},"Welcome to Patience!"),l("div",{class:"ms-3"},[l("p",{class:"text-red-400"},"1. Click a card to select it."),l("p",{class:"text-orange-400"},"2. Click another to move the selected card."),l("p",{class:"text-yellow-400"},"3. You can also drag cards, but the animations are not yet perfect."),l("p",{class:"text-green-400 font-bold"},"Enjoy!")])],-1)),a(de,{class:"w-full md:w-1/2",name:"difficulty",label:"Difficulty",modelValue:e(h),"onUpdate:modelValue":t[1]||(t[1]=w=>oe(h)?h.value=w:null),options:[{label:"Easy",value:"easy"},{label:"Hard",value:"hard"}]},null,8,["modelValue"]),a(A,{class:"w-full md:w-1/2",onClick:E},{default:m(()=>t[8]||(t[8]=[_(" Start ")])),_:1,__:[8]})])):f("",!0),e(d)===e(u).HAS_STARTED?(s(),i("div",He,[l("div",Pe,[l("p",null,"Time: "+V(e(I)),1),l("p",null,"Turns: "+V(e(N)),1),l("p",null,"Score: "+V(e(S)),1)]),l("div",{class:G(["w-full grid gap-1 justify-items-center",e(o)?"grid-cols-8":"grid-cols-7"])},[e(o)?f("",!0):(s(),y(c,{key:0,"deck-type":e(r).STOCK_CLOSED},null,8,["deck-type"])),a(c,{"deck-type":e(r).STOCK_OPEN},null,8,["deck-type"]),t[10]||(t[10]=l("div",null,null,-1)),e(o)?(s(),i("div",Ne)):f("",!0),a(c,{"deck-type":e(r).HEARTS,"card-type":e(p).HEARTS},null,8,["deck-type","card-type"]),a(c,{"deck-type":e(r).SPADES,"card-type":e(p).SPADES},null,8,["deck-type","card-type"]),a(c,{"deck-type":e(r).DIAMONDS,"card-type":e(p).DIAMONDS},null,8,["deck-type","card-type"]),a(c,{"deck-type":e(r).CLUBS,"card-type":e(p).CLUBS},null,8,["deck-type","card-type"])],2),e(d)===e(u).HAS_STARTED?(s(),i("div",{key:0,class:G(["w-full grid gap-1 justify-items-center",e(o)?"grid-cols-8":"grid-cols-7"])},[e(o)?(s(),y(c,{key:0,"deck-type":e(r).STOCK_CLOSED},null,8,["deck-type"])):f("",!0),a(c,{"deck-type":e(r).PILE1},null,8,["deck-type"]),a(c,{"deck-type":e(r).PILE2},null,8,["deck-type"]),a(c,{"deck-type":e(r).PILE3},null,8,["deck-type"]),a(c,{"deck-type":e(r).PILE4},null,8,["deck-type"]),a(c,{"deck-type":e(r).PILE5},null,8,["deck-type"]),a(c,{"deck-type":e(r).PILE6},null,8,["deck-type"]),a(c,{"deck-type":e(r).PILE7},null,8,["deck-type"])],2)):f("",!0)])):e(d)===e(u).HAS_FINISHED?(s(),i("div",Oe,[a(c,{class:"md:col-start-2","deck-type":e(r).HEARTS,"card-type":e(p).HEARTS},null,8,["deck-type","card-type"]),a(c,{"deck-type":e(r).SPADES,"card-type":e(p).SPADES},null,8,["deck-type","card-type"]),a(c,{"deck-type":e(r).DIAMONDS,"card-type":e(p).DIAMONDS},null,8,["deck-type","card-type"]),a(c,{"deck-type":e(r).CLUBS,"card-type":e(p).CLUBS},null,8,["deck-type","card-type"])])):f("",!0)]),v.value?(s(),y(ye,{key:0,"game-id":e(K).PATIENCE,unit:"point"},null,8,["game-id"])):e(d)===e(u).HAS_FINISHED?(s(),i("div",$e,[l("p",Re,"You won with "+V(e(S))+" points!",1),e(O)&&e(B)===1?(s(),i("p",Le," HIGHSCORE! ")):e(O)?(s(),i("p",Be," LEADERBOARD IMPROVEMENT! ")):e($)?(s(),i("p",je," PERSONAL BEST! ")):f("",!0)])):f("",!0),l("div",{class:G(["flex flex-col",{"h-[50vh] justify-end":e(d)===e(u).HAS_STARTED}])},[l("div",Ve,[e(d)!==e(u).HAS_NOT_STARTED&&e(d)!==e(u).HAS_FINISHED?(s(),y(A,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:b},{default:m(()=>t[11]||(t[11]=[_(" Restart ")])),_:1,__:[11]})):e(d)===e(u).HAS_FINISHED?(s(),y(A,{key:1,class:"w-full md:w-1/2",variant:"secondary",onClick:b},{default:m(()=>t[12]||(t[12]=[_(" Play Again ")])),_:1,__:[12]})):f("",!0),!v.value&&(e(d)===e(u).HAS_NOT_STARTED||e(d)===e(u).HAS_FINISHED)?(s(),y(A,{key:2,class:"w-full md:w-1/2",variant:"neutral",onClick:t[2]||(t[2]=w=>v.value=!0)},{default:m(()=>t[13]||(t[13]=[_(" View Highscores ")])),_:1,__:[13]})):e(d)===e(u).HAS_NOT_STARTED?(s(),y(A,{key:3,class:"w-full md:w-1/2",variant:"neutral",onClick:t[3]||(t[3]=w=>v.value=!1)},{default:m(()=>t[14]||(t[14]=[_(" Go Back ")])),_:1,__:[14]})):e(d)===e(u).HAS_FINISHED?(s(),y(A,{key:4,class:"w-full md:w-1/2",variant:"neutral",onClick:t[4]||(t[4]=w=>v.value=!1)},{default:m(()=>t[15]||(t[15]=[_(" View Your Score ")])),_:1,__:[15]})):f("",!0)]),e(d)===e(u).HAS_FINISHED?(s(),i("div",Ge,[e(k)?e(S)&&e(L)<e(S)?(s(),y(A,{key:1,class:"w-full md:w-1/2",variant:"primary",onClick:t[6]||(t[6]=w=>e(H)())},{default:m(()=>t[18]||(t[18]=[_(" Add To Leaderboard ")])),_:1,__:[18]})):f("",!0):(s(),y(U,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:m(()=>[t[16]||(t[16]=_(" Please ")),l("a",{class:"cursor-pointer",onClick:t[5]||(t[5]=w=>e(R).push({name:e(ie).LOGIN,params:{redirect:JSON.stringify({name:e(ce).GAMES_PATIENCE})}}))}," Login "),t[17]||(t[17]=_(" to add your score to the leaderboard. "))]),_:1,__:[16,17]}))])):f("",!0)],2),a(pe,{"game-id":e(K).PATIENCE,"is-open":x.value,"onUpdate:isOpen":t[7]||(t[7]=w=>x.value=w)},null,8,["game-id","is-open"])]),_:1}))}});export{qe as default};
