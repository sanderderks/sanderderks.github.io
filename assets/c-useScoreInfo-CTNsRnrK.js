import{e as P,A as B,aG as S,s as f,o as D,l as o,m as a,p as n,k as b,w as p,O as I,H as r,G as m,t as k,C as _,h as G,c as y}from"../bundle.js";import{_ as N}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"w-full mt-5 text-sm md:text-base text-left"},w={key:1},x=P({__name:"Highscores",props:{gameId:{},unit:{}},setup(u){const v=u,g=B(),l=S(v.gameId)(),{publicUsers:h}=f(g),{allGameData:d}=f(l),{fetchGameData:i}=l,c=s=>{var t;return((t=h.value.find(e=>e.id===s))==null?void 0:t.displayName)??"Unknown"};return D(()=>{i(),setInterval(()=>{i()},1e3*60*5)}),(s,t)=>(o(),a("table",U,[n("tbody",null,[b(d)[s.gameId].gameData.highscores.length?(o(!0),a(p,{key:0},I(b(d)[s.gameId].gameData.highscores,(e,H)=>(o(),a("tr",null,[n("th",null,r(H+1),1),n("th",null,r(c(e.id)),1),n("td",null,[m(r(e.score)+" ",1),s.unit?(o(),a(p,{key:0},[m(r(s.unit),1),e.score!==1?(o(),a(p,{key:0},[m("s")],64)):k("",!0),t[0]||(t[0]=m(" "+r(" ")))],64)):k("",!0),e.bonus?(o(),a(p,{key:1},[m("("+r(e.bonus)+" bonus)",1)],64)):k("",!0)]),n("td",null,r(b(_)(e.date)),1)]))),256)):(o(),a("tr",w,t[1]||(t[1]=[n("th",null,"There are no highscores yet.",-1)])))])]))}}),V=N(x,[["__scopeId","data-v-98aab2a5"]]),A=u=>{const v=G(),g=S(u)(),{allGameData:l,highscorePosition:h,personalBest:d}=f(g),{firebaseUser:i}=f(v),c=y(()=>i.value?h.value:null),s=y(()=>{const e=l.value[u].previousHighscorePosition;return c.value&&e?e>c.value:!1}),t=y(()=>{const e=l.value[u].previousPersonalBest;return i.value&&e?e<d.value:!1});return{currentHighscorePosition:c,hasImprovedHighscorePosition:s,hasImprovedPersonalBest:t}};export{V as H,A as u};
