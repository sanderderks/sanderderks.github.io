import{_ as B,a as re}from"./c-Bubble.vue_vue_type_script_setup_true_lang-BShtm6_i.js";import{B as ne,_ as le,x as se,l as i,m as p,p as l,y as K,e as te,r as H,o as oe,q,k as u,c as f,au as F,h as ue,A as ie,s as I,av as de,g as ce,D as Z,u as pe,f as fe,n as k,R as V,H as b,t as v,C as Q,aw as me,ax as ge,ay as ve,w as j,az as ye}from"../bundle.js";import{_ as he}from"./c-Countdown.vue_vue_type_script_setup_true_lang-CuCP4XWO.js";import{a as we}from"./c-SwitchField.vue_vue_type_script_setup_true_lang-C6J-GyL9.js";import{_ as be}from"./c-Page.vue_vue_type_script_setup_true_lang-BGhe9uNp.js";import{u as Se}from"./c-useCatCalc-6gobbMX9.js";import{_ as De}from"./c-PetDialog.vue_vue_type_script_setup_true_lang-DyQwRqYN.js";import{_ as _e}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-DateField-CWvNIfkF.js";import"./c-FileUpload.vue_vue_type_script_setup_true_lang-DbzAxtwG.js";import"./c-TextField.vue_vue_type_script_setup_true_lang-aj-wueri.js";import"./c-validation-DokkLKHB.js";import"./c-SelectField.vue_vue_type_script_setup_true_lang-BanvuRMQ.js";import"./c-accordiontab.esm-CX-DBziB.js";import"./c-vuedraggable.umd-CzRFyTns.js";var xe={root:{position:"relative"}},Ce={root:"p-chart"},Ae=ne.extend({name:"chart",inlineStyles:xe,classes:Ce}),Oe={name:"BaseChart",extends:se,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:Ae,provide:function(){return{$parentInstance:this}}},ae={name:"Chart",extends:Oe,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;le(()=>import("./c-auto-U_pncEX3.js"),__vite__mapDeps([]),import.meta.url).then(function(n){e.chart&&(e.chart.destroy(),e.chart=null),n&&n.default&&(e.chart=new n.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),s=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&s&&this.$emit("select",{originalEvent:e,element:n[0],dataset:s})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function R(t){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(t)}function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X(Object(n),!0).forEach(function(s){ke(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function ke(t,e,n){return e=Me(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Me(t){var e=Ee(t,"string");return R(e)=="symbol"?e:String(e)}function Ee(t,e){if(R(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e||"default");if(R(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pe=["width","height"];function Te(t,e,n,s,o,y){return i(),p("div",K({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[l("canvas",K({ref:"canvas",width:t.width,height:t.height,onClick:e[0]||(e[0]=function(w){return y.onCanvasClick(w)})},ee(ee({},t.canvasProps),t.ptm("canvas"))),null,16,Pe)],16)}ae.render=Te;const $e=te({__name:"Chart",props:{headers:{},datasets:{}},setup(t){const e=H(),n=()=>{const s=getComputedStyle(document.documentElement),o="white",y="white",w=s.getPropertyValue("--p-content-border-color");return{stacked:!1,maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:o}}},scales:{x:{ticks:{color:y},grid:{color:w}},y:{type:"linear",display:!0,position:"left",beginAtZero:!0,ticks:{color:y},grid:{color:w}},y1:{type:"linear",display:!1,position:"right",ticks:{color:y},grid:{drawOnChartArea:!1,color:w}}}}};return oe(()=>{e.value=n()}),(s,o)=>(i(),q(u(ae),{type:"line",data:{labels:s.headers,datasets:s.datasets},options:e.value,class:"h-[30rem]"},null,8,["data","options"]))}});var E=(t=>(t[t.MONTHS=0]="MONTHS",t[t.YEARS_HALF=1]="YEARS_HALF",t[t.YEARS=2]="YEARS",t))(E||{});const P={0:{amount:12,getStartDate:t=>{const e=new Date(t);return e.setMonth(e.getMonth()-P[0].amount+1,1),e},calculateStartDate:(t,e)=>{const n=new Date(t);return n.setMonth(n.getMonth()+e),n},calculateEndDate:t=>{const e=new Date(t);return e.setMonth(t.getMonth()+1,0),e},getLabel:t=>z[t.getMonth()]},1:{amount:10,getStartDate:t=>{const e=new Date(t);return e.setMonth(e.getMonth()-6*P[1].amount+1,1),e},calculateStartDate:(t,e)=>{const n=new Date(t);return n.setMonth(n.getMonth()+e*6),n},calculateEndDate:t=>{const e=new Date(t);return e.setMonth(e.getMonth()+6,0),e},getLabel:(t,e)=>{const n=z[t.getMonth()],s=z[e.getMonth()];return`${n}-${s} ${e.getFullYear()}`}},2:{amount:10,getStartDate:t=>{const e=new Date(t);return e.setFullYear(e.getFullYear()-P[2].amount+1,0,1),e},calculateStartDate:(t,e)=>{const n=new Date(t);return n.setFullYear(n.getFullYear()+e,0,1),n},calculateEndDate:t=>{const e=new Date(t);return e.setFullYear(e.getFullYear(),12,0),e},getLabel:t=>`${t.getFullYear()}`}},z=["January","February","March","April","May","June","July","August","September","October","November","December"],Be=(t,e)=>{const n=f(()=>F(t)),s=f(()=>F(e)),o=f(()=>{const d=new Date;return P[s.value].getStartDate(d).getTime()}),y=f(()=>{const d=o.value;return n.value.filter(h=>h.date.getTime()>=d)}),w=f(()=>{const d=c=>{const C=P[s.value].calculateStartDate(new Date(o.value),c),_=P[s.value].calculateEndDate(C);return[C.getTime(),_.getTime()]},h=(c,C)=>y.value.some(_=>_.date.getTime()>=c&&_.date.getTime()<C),a=[];let g=!1;for(let c=0;c<P[s.value].amount;c++){const[C,_]=d(c);(g||h(C,_))&&(g=!0,a.push({label:P[s.value].getLabel(new Date(C),new Date(_)),startTime:C,endTime:_}))}return a}),m=f(()=>w.value.map(d=>d.label)),A=f(()=>{const d=[];return w.value.forEach(h=>{const a=y.value.filter(g=>{const c=g.date.getTime();return c>=h.startTime&&c<h.endTime});a.length?d.push({x:h.label,y:a.reduce((g,c)=>g+c.value,0)/a.length}):d.push({x:h.label,y:null})}),d});return{headers:m,filteredData:A}},W=t=>{const e=ue(),n=ie(),{isOwner:s,firebaseUser:o}=I(e),{publicUsers:y}=I(n),w=H(E.MONTHS),m=f(()=>F(t)),A=f(()=>{var S;return(S=m.value)!=null&&S.dateOfBirth?(new Date().getTime()-new Date(m.value.dateOfBirth).getTime())/(1e3*60*60*24*365.25):0}),d=f(()=>A.value*12),h=f(()=>A.value*52),a=f(()=>y.value.find(S=>{var D;return S.id===((D=m.value)==null?void 0:D.userId)})),g=f(()=>{var S,D;return((S=m.value)==null?void 0:S.userId)===((D=o.value)==null?void 0:D.uid)||s.value}),c=f(()=>{var S;return((S=m.value)==null?void 0:S.weightLog.map(D=>({date:new Date(D.date),value:D.weight})))??[]}),{headers:C,filteredData:_}=Be(c,w),N=f(()=>{var Y;if(!((Y=m.value)!=null&&Y.dateOfBirth)||!m.value.dewormingDate)return null;const S=new Date(m.value.dateOfBirth).getTime(),D=1e3*60*60*24*365.25,O=(T,L)=>new Date(S+D/T*L);switch(!0){case h.value<3:return O(52,3);case h.value<5:return O(52,5);case h.value<7:return O(52,7);case h.value<9:return O(52,9);case d.value<3:return O(12,3);case d.value<4:return O(12,4);case d.value<5:return O(12,5);case d.value<6:return O(12,6);default:{const T=(L,$)=>new Date(new Date(m.value.dewormingDate).getTime()+D/L*$);if(m.value.type==="cat")return T(12,m.value.insideCat?6:3);if(m.value.type==="dog")return T(12,3)}}});return{weightLogPeriod:w,petAgeYears:A,petAgeMonths:d,petAgeWeeks:h,petOwner:a,isMyPet:g,nextDeworming:N,chartHeaders:C,chartData:_}},Ye=t=>{var d,h;const e=f(()=>F(t)),{petAgeYears:n,petAgeMonths:s,petAgeWeeks:o}=W(e),y=f(()=>{var g,c;if(((g=e.value)==null?void 0:g.type)!=="cat"||!((c=e.value)!=null&&c.dateOfBirth))return null;const a=n.value;switch(!0){case a<1:return{value:"kitten",label:"Kitten (0-12 months)"};case(a>=1&&a<3):return{value:"junior",label:"Junior (1-2 years)"};case(a>=3&&a<7):return{value:"adult",label:"Adult (3-6 years)"};case(a>=7&&a<11):return{value:"mature",label:"Mature (7-10 years)"};case(a>=11&&a<15):return{value:"senior",label:"Senior (11-14 years)"};case a>=15:return{value:"geriatric",label:"Geriatric (15+ years)"};default:return null}}),w=f(()=>{var a,g,c;if(!((a=e.value)!=null&&a.dateOfBirth))return null;switch((g=y.value)==null?void 0:g.value){case"kitten":return s.value<=4?"kitten0.4":"kitten1";default:return(c=e.value)!=null&&c.castrated?"castrated":"default"}}),{requiredCaloriesByWeightAndAgeAndSize:m,requiredFoodDry:A}=Se("average",((d=e.value)==null?void 0:d.weight)??"",w.value??"default",((h=e.value)==null?void 0:h.gender)??"male","35","default");return{catLifeStage:y,requiredCaloriesByWeightAndAgeAndSize:y?m:null,requiredFoodDry:y?A:null}},Le=t=>{const e=f(()=>F(t)),{petAgeYears:n}=W(e);return{dogLifeStage:f(()=>{var y,w,m;if(((y=e.value)==null?void 0:y.type)!=="dog"||!((w=e.value)!=null&&w.dateOfBirth)||!((m=e.value)!=null&&m.breedSize))return null;const o=n.value;switch(e.value.breedSize){case"small":return o<1?{value:"puppy",label:"Puppy (0-12 months)"}:o<3?{value:"young_adult",label:"Young Adult (1-2 years)"}:o<8?{value:"adult",label:"Adult (3-7 years)"}:o<11?{value:"mature",label:"Mature (8-10 years)"}:o<15?{value:"senior",label:"Senior (11-14 years)"}:{value:"geriatric",label:"Geriatric (15+ years)"};case"medium":return o<1?{value:"puppy",label:"Puppy (0-12 months)"}:o<3?{value:"young_adult",label:"Young Adult (1-2 years)"}:o<7?{value:"adult",label:"Adult (3-6 years)"}:o<10?{value:"mature",label:"Mature (7-9 years)"}:o<13?{value:"senior",label:"Senior (10-12 years)"}:{value:"geriatric",label:"Geriatric (13+ years)"};case"large":return o<1?{value:"puppy",label:"Puppy (0-12 months)"}:o<3?{value:"young_adult",label:"Young Adult (1-2 years)"}:o<6?{value:"adult",label:"Adult (3-5 years)"}:o<9?{value:"mature",label:"Mature (6-8 years)"}:o<12?{value:"senior",label:"Senior (9-11 years)"}:{value:"geriatric",label:"Geriatric (12+ years)"};case"giant":return o<1?{value:"puppy",label:"Puppy (0-12 months)"}:o<2?{value:"young_adult",label:"Young Adult (1-1.5 years)"}:o<5?{value:"adult",label:"Adult (2-4 years)"}:o<8?{value:"mature",label:"Mature (5-7 years)"}:o<10?{value:"senior",label:"Senior (8-9 years)"}:{value:"geriatric",label:"Geriatric (10+ years)"};default:return null}})}},Fe={class:"grid grid-cols-6 mb-5 gap-5"},Re={class:"my-5"},je={class:"table-auto text-left"},He={key:0},Ie={key:1},Ne={key:2},Ve={key:3},ze={key:4},qe={key:5},We={key:6},Ge={key:7},Ue={key:8},Je={key:9},Ke={class:"my-5"},Ze={key:0,class:"flex flex-wrap md:flex-nowrap gap-3 justify-around my-5 md:mb-0"},Qe={class:"ps-5 md:ps-10 flex flex-col gap-3"},Xe={key:0,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},et={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300"},tt={key:1,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},at={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300 sm:place-self-end"},rt={key:2,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},nt={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300 sm:place-self-end"},lt={key:0,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},st={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300"},ot={key:2,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},ut={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300 sm:place-self-end"},it={class:"flex justify-center gap-3"},dt={key:4,class:"w-full text-neutral-300"},ct={class:"mt-10 flex gap-3"},pt=te({__name:"Pet",setup(t){const e=pe(),n=fe(),s=de(),o=ce(),{pets:y}=I(s),{routeLoading:w}=I(o),{deletePet:m}=s,A=H(!1),d=H(!1),h=f(()=>e.params.petId),a=f(()=>y.value.find($=>$.id===h.value)),{weightLogPeriod:g,petOwner:c,isMyPet:C,nextDeworming:_,chartHeaders:N,chartData:S}=W(a),{catLifeStage:D,requiredCaloriesByWeightAndAgeAndSize:O,requiredFoodDry:Y}=Ye(a),{dogLifeStage:T}=Le(a),L=async $=>{await m($),n.push({name:V.PET_OVERVIEW})};return($,r)=>(i(),q(be,null,{content:Z(()=>[l("div",Fe,[k(B,{class:"col-span-full md:col-span-4 lg:col-span-2",type:"tertiary",route:u(V).PET_OVERVIEW,loading:u(w)===u(V).PET_OVERVIEW,label:"Back to all pets",icon:"pi pi-arrow-up-left"},null,8,["route","loading"])]),a.value?(i(),q(re,{key:0,class:"!bg-primary-500 !bg-opacity-35 my-5",title:a.value.name,"title-props":{class:"text-3xl ms-5 md:text-5xl"},avatar:a.value.avatar??void 0,"avatar-props":{class:"h-20 w-20 md:h-32 md:w-32"}},{default:Z(()=>{var G,U,J;return[l("div",Re,[l("table",je,[l("tbody",null,[r[18]||(r[18]=l("tr",{class:"thead"},[l("th",{class:"text-xl"},"Details")],-1)),u(c)?(i(),p("tr",He,[r[8]||(r[8]=l("th",null,"Owner:",-1)),l("td",null,b(u(c).displayName),1)])):v("",!0),a.value.dateOfBirth?(i(),p("tr",Ie,[r[9]||(r[9]=l("th",null,"Date of birth:",-1)),l("td",null,b(u(Q)(a.value.dateOfBirth)),1)])):v("",!0),a.value.type?(i(),p("tr",Ne,[r[10]||(r[10]=l("th",null,"Type:",-1)),l("td",null,b((G=u(me).find(({value:x})=>{var M;return x===((M=a.value)==null?void 0:M.type)}))==null?void 0:G.label),1)])):v("",!0),a.value.breed?(i(),p("tr",Ve,[r[11]||(r[11]=l("th",null,"Breed:",-1)),l("td",null,b(a.value.breed),1)])):v("",!0),a.value.breedSize&&a.value.type==="dog"?(i(),p("tr",ze,[r[12]||(r[12]=l("th",null,"Breed size:",-1)),l("td",null,b((U=u(ge).find(({value:x})=>{var M;return x===((M=a.value)==null?void 0:M.breedSize)}))==null?void 0:U.label),1)])):v("",!0),a.value.gender?(i(),p("tr",qe,[r[13]||(r[13]=l("th",null,"Gender:",-1)),l("td",null,b((J=u(ve).find(({value:x})=>{var M;return x===((M=a.value)==null?void 0:M.gender)}))==null?void 0:J.label),1)])):v("",!0),r[19]||(r[19]=l("tr",{class:"thead"},[l("th",{class:"text-xl"},"Health")],-1)),a.value.weight?(i(),p("tr",We,[r[14]||(r[14]=l("th",null,"Weight:",-1)),l("td",null,b(a.value.weight)+"kg",1)])):v("",!0),typeof a.value.insideCat=="boolean"?(i(),p("tr",Ge,[r[15]||(r[15]=l("th",null,"Inside Cat:",-1)),l("td",null,b(a.value.insideCat?"Yes":"No"),1)])):v("",!0),a.value.castrated!==void 0?(i(),p("tr",Ue,[r[16]||(r[16]=l("th",null,"Castrated:",-1)),l("td",null,b(a.value.castrated?"Yes":"No"),1)])):v("",!0),a.value.dewormingDate?(i(),p("tr",Je,[r[17]||(r[17]=l("th",null,"Last deworming:",-1)),l("td",null,b(u(Q)(a.value.dewormingDate)),1)])):v("",!0)])])]),l("div",Ke,[a.value.dateOfBirth?(i(),p("div",Ze,[k(he,{class:"w-full md:w-3/4 text-neutral-300 bg-neutral-900 rounded-secondary",time:new Date(a.value.dateOfBirth).getTime(),direction:"up"},null,8,["time"])])):v("",!0),r[25]||(r[25]=l("p",{class:"mt-5 text-xl font-bold"},"Statistics",-1)),l("div",Qe,[a.value.type==="cat"?(i(),p(j,{key:0},[u(D)?(i(),p("div",Xe,[r[20]||(r[20]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Life stage:",-1)),l("p",et,b(u(D).label),1)])):v("",!0),u(O)?(i(),p("div",tt,[r[21]||(r[21]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Required energy per day:",-1)),l("p",at,b(u(O).toFixed(1))+" kcal ",1)])):v("",!0),u(Y)?(i(),p("div",rt,[r[22]||(r[22]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Required dry food per day:",-1)),l("p",nt,b(u(Y).toFixed(1))+" g ",1)])):v("",!0)],64)):a.value.type==="dog"?(i(),p(j,{key:1},[u(T)?(i(),p("div",lt,[r[23]||(r[23]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Life stage:",-1)),l("p",st,b(u(T).label),1)])):v("",!0)],64)):v("",!0),u(_)?(i(),p("div",ot,[r[24]||(r[24]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Next deworming:",-1)),l("p",ut,b(u(ye)(u(_))),1)])):v("",!0),a.value.weightLog.length?(i(),p(j,{key:3},[l("div",it,[k(B,{type:"neutral",label:"Months",outlined:u(g)===u(E).MONTHS,onClick:r[0]||(r[0]=x=>g.value=u(E).MONTHS)},null,8,["outlined"]),k(B,{type:"neutral",label:"Half Years",outlined:u(g)===u(E).YEARS_HALF,onClick:r[1]||(r[1]=x=>g.value=u(E).YEARS_HALF)},null,8,["outlined"]),k(B,{type:"neutral",label:"Years",outlined:u(g)===u(E).YEARS,onClick:r[2]||(r[2]=x=>g.value=u(E).YEARS)},null,8,["outlined"])]),k($e,{headers:u(N),datasets:[{label:`${a.value.name}'s weight (kg)`,fill:!1,borderColor:"red",yAxisID:"y",tension:.4,data:u(S),spanGaps:!0}]},null,8,["headers","datasets"])],64)):v("",!0),a.value.type==="other"?(i(),p("p",dt," Nothing to show yet. ")):v("",!0)])]),u(C)?(i(),p(j,{key:0},[l("div",ct,[k(B,{label:"Edit",outlined:"",onClick:r[3]||(r[3]=x=>A.value=!0)}),k(B,{label:"Delete",type:"danger",outlined:"",onClick:r[4]||(r[4]=x=>d.value=!0)})]),k(De,{"is-open":A.value,"original-pet":a.value??null,onClose:r[5]||(r[5]=x=>A.value=!1)},null,8,["is-open","original-pet"]),k(we,{"is-open":d.value,title:"Delete Pet",description:"Are you sure you want to delete your pet?","confirm-text":"Confirm","confirm-props":{type:"danger",outlined:!0},onConfirm:r[6]||(r[6]=x=>L(a.value.id)),onCancel:r[7]||(r[7]=x=>d.value=!1)},null,8,["is-open"])],64)):v("",!0)]}),_:1},8,["title","avatar"])):v("",!0)]),_:1}))}}),kt=_e(pt,[["__scopeId","data-v-65e9a212"]]);export{kt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
