import{_ as y}from"./c-UsersBar.vue_vue_type_script_setup_true_lang-DjHGpPgu.js";import{d as S,aU as V,aV as P,v as L,c as B,s as f,f as C,o as $,g as u,j as r,k as M,l as j,m as A,h as U,C as N,w as q,P as x,E,q as w,I,am as D}from"../bundle.js";const J=S({__name:"FindOpponent",props:V({collection:{},onlineGamesLoading:{type:Boolean},fetchOnlineGames:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:V(["createOnlineGame","continueOnlineGame"],["update:modelValue"]),setup(v,{emit:g}){const h=v,d=g,m=P(v,"modelValue"),G=L(),o=B(),{onlineUsers:b,publicUsers:k}=f(G),{firebaseUser:a}=f(o),l=C(()=>{var e;return(e=a.value)==null?void 0:e.uid}),n=C(()=>m.value.filter(e=>e.creatorId===l.value||e.opponentId===l.value)),i=C(()=>b.value.filter(e=>e.id===l.value||!_(e.id))),p=e=>k.value.find(t=>t.id===e),_=e=>n.value.find(t=>t.creatorId===e||t.opponentId===e),F=e=>e.creatorId===l.value?p(e.opponentId):p(e.creatorId),O=e=>{const t=_(e);t?d("continueOnlineGame",t.id):d("createOnlineGame",e)};return $(async()=>{await h.fetchOnlineGames()}),(e,t)=>(r(),u(N,null,[M(y,{title:"Choose opponent",listOfUsers:i.value,"custom-click-action":"","get-color":s=>{var c;return e.onlineGamesLoading||s===((c=U(a))==null?void 0:c.uid)?"bg-neutral-500":"bg-green-500"},isClickable:s=>{var c;return!e.onlineGamesLoading&&s!==((c=U(a))==null?void 0:c.uid)},onClick:t[0]||(t[0]=s=>O(s))},null,8,["listOfUsers","get-color","isClickable"]),n.value.length?(r(),j(y,{key:0,title:"Active games",listOfUsers:n.value.map(s=>F(s)).filter(s=>!!s),"custom-click-action":"","get-color":()=>e.onlineGamesLoading?"bg-neutral-500":"bg-purple-500 bg-opacity-50",isClickable:()=>!e.onlineGamesLoading,onClick:t[1]||(t[1]=s=>O(s))},null,8,["listOfUsers","get-color","isClickable"])):A("",!0)],64))}}),R={key:0,class:"mt-3 md:ms-10 flex flex-col gap-3"},T={class:"flex gap-2"},W={class:"font-bold"},K=S({__name:"GameChat",props:{chats:{}},emits:["sendChat"],setup(v,{emit:g}){const h=B(),d=L(),{firebaseUser:m}=f(h),{combinedUsers:G}=f(d),o=q(""),b=()=>{if(m.value&&o.value){const a={userId:m.value.uid,message:o.value};k("sendChat",a),o.value=""}},k=g;return(a,l)=>(r(),u("form",{class:"w-full my-10 flex flex-wrap items-center justify-center",action:"",onSubmit:D(b,["prevent"])},[M(x,{name:"chat",class:"w-full md:w-1/2",inputProps:{autocomplete:"off"},placeholder:"chat...",modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=n=>o.value=n)},null,8,["modelValue"]),a.chats.length?(r(),u("div",R,[(r(!0),u(N,null,E([...a.chats].reverse().filter((n,i)=>i<3),n=>{var i;return r(),u("div",T,[w("p",W,I(((i=U(G).find(p=>p.id===n.userId))==null?void 0:i.displayName)??"unknown")+":",1),w("p",null,I(n.message),1)])}),256))])):A("",!0)],32))}});export{J as _,K as a};
