import{aT as ze,aU as Ze,c as Ce,aV as Ve,aR as Le,s as K,aW as qe,aX as Te,aS as te,w as V,aQ as w,a9 as $e,f as U,o as De,L as ie,aY as Je,aZ as Ke,a_ as he,a$ as Qe,aq as Pe,b0 as Xe,b1 as el,d as Y,g as o,j as t,q as r,z,l as D,b2 as ll,h as e,k as q,C as H,E as ee,m as G,I as O,a3 as B,_ as le,A as Q,N as tl,ax as sl,y as al,a7 as ol}from"../bundle.js";import{u as nl,H as rl,_ as il}from"./c-useScoreInfo-BuqgYv10.js";import{a as ul,_ as cl}from"./c-GameChat.vue_vue_type_script_setup_true_lang-h5tQHG7E.js";import{_ as dl,a as vl}from"./c-GameActions.vue_vue_type_script_setup_true_lang-BNBQOUbb.js";import{_ as _l}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B6MMtiVw.js";import{_ as fl}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";var F=(a=>(a[a.Purple=0]="Purple",a[a.Blue=1]="Blue",a[a.Yellow=2]="Yellow",a[a.Orange=3]="Orange",a[a.Red=4]="Red",a))(F||{}),L=(a=>(a[a.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",a[a.FINDING_OPPONENT=1]="FINDING_OPPONENT",a[a.IS_PLAYING=2]="IS_PLAYING",a[a.HAS_FINISHED=3]="HAS_FINISHED",a))(L||{}),J=(a=>(a[a.WAITING_FOR_OPPONENTS=0]="WAITING_FOR_OPPONENTS",a[a.HAS_STARTED=1]="HAS_STARTED",a[a.HAS_THROWN_DICES=2]="HAS_THROWN_DICES",a[a.HAS_CHOSEN_SCORE=3]="HAS_CHOSEN_SCORE",a[a.CAN_CHOOSE_REMAINING=4]="CAN_CHOOSE_REMAINING",a[a.HAS_CHOSEN_REMAINING=5]="HAS_CHOSEN_REMAINING",a))(J||{});const ce=ze("yahtzeeRainbowStore",()=>{const a=Ze(),s=Ce(),i=Ve(),v=Le(),{personalBest:$,highscorePosition:b}=K(i),{firebaseUser:p}=K(s),{games:c,gamesLoading:x,gameId:S,creatorId:M,players:R,opponents:T,partyName:_,maxPlayers:f,isLocked:d,chat:k,isOwner:W}=K(v),{setPreviousHighscores:se,updateHighscores:oe,sortHighscores:ae}=i,X={onlineGames:qe(a,Te.GAME_DATA,te.YAHTZEE_RAINBOW,Te.ONLINE_GAMES)},I=V(w.SOLO),C=V(0),y=V(1),j=V(!1),h=V("soloPlayer"),N=V(h.value),m=V(ge()),A=$e({}),E=$e({}),ne=U(()=>m.value.some(l=>l.isRolling)),P=U(()=>m.value.filter(l=>l.color===null)),pe=U(()=>!!(N.value===h.value&&P.value.length&&!j.value&&y.value===1)),ye=U(()=>l=>!!(N.value===l&&!ne.value&&m.value.some(u=>u.color===null)&&!j.value&&(I.value===w.SOLO&&y.value===2||I.value===w.MULTIPLAYER&&[4,2].includes(y.value)))),we=U(()=>N.value===h.value&&!ne.value&&!j.value),Ge=U(()=>(l,u)=>{if(N.value!==l)return[];const n=[],g=m.value.find(Z=>Z.color===u);return P.value.length===2?(n.push(P.value[0].value+P.value[1].value),g&&(n.push(P.value[0].value+g.value),n.push(P.value[1].value+g.value))):P.value.length===1&&g&&n.push(P.value[0].value+g.value),n}),Me=U(()=>(l,u,n)=>{var g;return!!((g=A[l])!=null&&g[u].find(Z=>Z.row===n))});De(()=>{i.$init(te.YAHTZEE_RAINBOW)}),ie(A,()=>{C.value!==3&&Ee().size===2&&(I.value===w.SOLO||W.value)&&(C.value=3)}),ie(C,l=>{l===3&&N.value===h.value&&(I.value===w.SOLO?(xe(h.value),Re(),fe()):W.value&&(R.value.forEach(u=>{xe(u.userId)}),Re(),Oe()),he(el))}),ie(E,()=>{var l;if(I.value===w.MULTIPLAYER){const u=(l=E[h.value])==null?void 0:l.winStatus;(u==="win"||u==="tie")&&fe()}}),ie([C,y,N,ne],()=>{I.value===w.MULTIPLAYER&&Oe()},{deep:!0}),ie(R,()=>{y.value===0&&f.value&&R.value.length===f.value&&(d.value=!0,y.value=1)});const _e=()=>{v.$reset(),I.value=w.SOLO,C.value=0,y.value=1,j.value=!1,h.value="soloPlayer",N.value=h.value,m.value=ge(),Object.keys(A).forEach(l=>{delete A[l],delete E[l]}),se()},Be=(l,u=null,n=null)=>{p.value&&(l=[{userId:p.value.uid,isOnline:!0},...l],I.value=w.MULTIPLAYER,C.value=2,y.value=n?0:1,h.value=p.value.uid,N.value=h.value,l.forEach(g=>{A[g.userId]=me(),E[g.userId]=null}),v.$init(te.YAHTZEE_RAINBOW,Se,Ie,_e),v.createGame(l,u,n))},Ye=l=>{p.value&&(I.value=w.MULTIPLAYER,h.value=p.value.uid,v.$init(te.YAHTZEE_RAINBOW,Se,Ie,_e),v.continueGame(l))},Se=()=>({gameStatus:C.value,yahtzeeStatus:y.value,activePlayerId:N.value,dices:m.value,score:A,finalScore:E}),Ie=l=>{var n;const u=(n=p.value)==null?void 0:n.uid;!u||N.value===h.value||(C.value=l.gameStatus,y.value=l.yahtzeeStatus,N.value=l.activePlayerId,m.value=l.dices,Object.assign(A,l.score),Object.assign(E,l.finalScore),Object.keys(A).includes(u)||(A[u]=me(),E[u]=null))},Oe=()=>{!p.value||N.value!==h.value&&!j.value||v.pushState()},Ne=async()=>{for(;ne.value;)await new Promise(l=>setTimeout(l,i.diceRollSpeed*1e3));return!0},Ee=()=>{const l=new Set;for(const u of Object.values(A))for(const[n,g]of Object.entries(u))g.some(Z=>Z.row===10)&&l.add(Number(n));return l},re=()=>ge().filter(l=>l.color===null||!Ee().has(l.color)),We=()=>{I.value=w.SOLO,C.value=2,y.value=1,A[h.value]=me(),E[h.value]=null},Ae=async()=>{if(!pe.value)return;const l=i.diceRollSpeed*1e3;m.value.forEach(u=>{u.isRolling=!0,setTimeout(()=>{u.value=Je(6),u.isRolling=!1},Ke(l,l/3))}),await Ne(),y.value=2,he(Qe)},je=(l,u,n)=>{if(ye.value){if(A[h.value][l].push({row:u}),P.value.length===2&&P.value[0].value+P.value[1].value===n)m.value=m.value.filter(g=>g.color!==null);else{const g=m.value.find(Z=>Z.color===l);if(g){const Z=P.value.find(de=>de.value+g.value===n);Z&&(m.value=m.value.filter(de=>de.id!==g.id&&de.id!==Z.id))}}I.value===w.MULTIPLAYER&&(j.value=!0,y.value===4?y.value=5:y.value=3,setTimeout(async()=>{j.value=!1,await Pe(),await ke()},i.diceRollSpeed*1e3)),he(Xe)}},ke=async()=>{we.value&&(I.value===w.SOLO?(y.value=1,m.value=re()):y.value===4?(y.value=1,m.value=re(),await Ae()):y.value===5?(y.value=1,m.value=re()):(P.value.length===1?y.value=4:(y.value=1,m.value=re()),j.value=!0,N.value=v.getNextPlayerId(N.value),m.value.some(l=>l.color===null)||(m.value=re()),await Pe(),j.value=!1))},be=(l,u)=>Object.values(A[l]).filter(n=>!!n.find(g=>g.row===u)).length,Fe=(l,u)=>He[A[l][u].length]||0,Ue=(l,u)=>{let n=0;for(let g=0;g<10;g++)be(l,g)===u&&(n+=ve[u][g]||0);return n},xe=l=>{let u=0;Object.values(A[l]).forEach(n=>{n.length&&(u+=He[n.length])});for(let n=0;n<10;n++){const g=be(l,n);g>=3&&(u+=ve[g][n])}E[l]={total:u}},Re=()=>{const l=Math.max(...Object.values(E).map(n=>(n==null?void 0:n.total)??0)),u=Object.keys(E).filter(n=>{var g;return((g=E[n])==null?void 0:g.total)===l});I.value===w.SOLO?E[h.value].winStatus="win":R.value.forEach(n=>{u.includes(n.userId)?u.length===1?E[n.userId].winStatus="win":E[n.userId].winStatus="tie":E[n.userId].winStatus="lose"})},fe=()=>{p!=null&&p.value&&E[h.value]&&oe({gameId:S.value??null,score:E[h.value].total})};return{collections:X,games:c,gamesLoading:x,gameId:S,creatorId:M,players:R,opponents:T,partyName:_,maxPlayers:f,isLocked:d,chat:k,isOwner:W,gameType:I,gameStatus:C,yahtzeeStatus:y,yahtzeeStatusLoading:j,myPlayerId:h,activePlayerId:N,score:A,finalScore:E,dices:m,whiteDices:P,isRolling:ne,canRoll:pe,canSelectScore:ye,canSkipTurn:we,hasSelectedScore:Me,canChooseOf:Ge,personalBest:$,highscorePosition:b,$reset:_e,start:We,roll:Ae,hasFinishedRolling:Ne,selectScore:je,passTurn:ke,getColumnTotal:Fe,getBonusColumnTotal:Ue,setPreviousHighscores:se,updateYahtzeeHighscore:fe,sortHighscores:ae,fetchOnlineGames:v.fetchGames,createOnlineGame:Be,continueOnlineGame:Ye,leaveOnlineGame:v.leaveGame,deleteOnlineGame:v.deleteGame,getPlayerDisplayName:v.getPlayerDisplayName,getNextPlayerId:v.getNextPlayerId}},{persist:{enabled:!0}}),ge=()=>[{id:1,color:4,value:1,isRolling:!1},{id:2,color:3,value:2,isRolling:!1},{id:3,color:2,value:3,isRolling:!1},{id:4,color:1,value:4,isRolling:!1},{id:5,color:0,value:5,isRolling:!1},{id:6,color:null,value:6,isRolling:!1},{id:7,color:null,value:6,isRolling:!1}],me=()=>({0:[],1:[],2:[],3:[],4:[]}),ue={0:[12,10,8,6,4,2,4,6,8,10,12],1:[2,4,6,8,10,12,10,8,6,4,2],2:[12,11,10,9,8,7,6,5,4,3,2],3:[2,3,4,5,6,7,8,9,10,11,12],4:[2,3,4,5,6,7,8,9,10,11,12]},He={1:1,2:2,3:4,4:7,5:11,6:16,7:22,8:29,9:37,10:46,11:56},ve={3:[2,2,1,1,1,1,1,1,1,2],4:[5,4,4,2,2,3,2,2,4,4],5:[10,8,6,3,4,5,4,3,6,8]},hl={0:"text-purple-500",1:"text-blue-500",2:"text-yellow-500",3:"text-orange-500",4:"text-red-500"},gl={0:"bg-purple-700",1:"bg-blue-700",2:"bg-yellow-700",3:"bg-orange-700",4:"bg-red-700"},ml={0:"fill-purple-500",1:"fill-blue-500",2:"fill-yellow-500",3:"fill-orange-500",4:"fill-red-500"},pl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},yl=["fill"],wl=Y({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(a){return(s,i)=>(t(),o("svg",pl,[r("rect",{class:z(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"50",cy:"50",r:"10",fill:s.color},null,8,yl)]))}}),Sl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Il=["fill"],Ol=["fill"],Nl=Y({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(a){return(s,i)=>(t(),o("svg",Sl,[r("rect",{class:z(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,Il),r("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,Ol)]))}}),El={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Al=["fill"],kl=["fill"],bl=["fill"],xl=Y({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(a){return(s,i)=>(t(),o("svg",El,[r("rect",{class:z(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,Al),r("circle",{cx:"50",cy:"50",r:"10",fill:s.color},null,8,kl),r("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,bl)]))}}),Rl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Tl=["fill"],$l=["fill"],Pl=["fill"],Hl=["fill"],Cl=Y({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(a){return(s,i)=>(t(),o("svg",Rl,[r("rect",{class:z(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,Tl),r("circle",{cx:"25",cy:"75",r:"10",fill:s.color},null,8,$l),r("circle",{cx:"75",cy:"25",r:"10",fill:s.color},null,8,Pl),r("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,Hl)]))}}),Ll={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Dl=["fill"],Gl=["fill"],Ml=["fill"],Bl=["fill"],Yl=["fill"],Wl=Y({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(a){return(s,i)=>(t(),o("svg",Ll,[r("rect",{class:z(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,Dl),r("circle",{cx:"25",cy:"75",r:"10",fill:s.color},null,8,Gl),r("circle",{cx:"50",cy:"50",r:"10",fill:s.color},null,8,Ml),r("circle",{cx:"75",cy:"25",r:"10",fill:s.color},null,8,Bl),r("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,Yl)]))}}),jl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Fl=["fill"],Ul=["fill"],zl=["fill"],Zl=["fill"],Vl=["fill"],ql=["fill"],Jl=Y({__name:"Dice6",props:{color:{},backgroundColor:{}},setup(a){return(s,i)=>(t(),o("svg",jl,[r("rect",{class:z(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,Fl),r("circle",{cx:"25",cy:"50",r:"10",fill:s.color},null,8,Ul),r("circle",{cx:"25",cy:"75",r:"10",fill:s.color},null,8,zl),r("circle",{cx:"75",cy:"25",r:"10",fill:s.color},null,8,Zl),r("circle",{cx:"75",cy:"50",r:"10",fill:s.color},null,8,Vl),r("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,ql)]))}}),Kl=Y({__name:"Dice",props:{dice:{}},setup(a){const s={1:wl,2:Nl,3:xl,4:Cl,5:Wl,6:Jl};return(i,v)=>(t(),o("div",{class:z(["cursor-pointer",{"animate-spin":i.dice.isRolling}])},[(t(),D(ll(s[i.dice.value]),{color:"black",backgroundColor:i.dice.color!==null?e(ml)[i.dice.color]:"fill-white",width:"40",height:"40"},null,8,["backgroundColor"]))],2))}}),Ql={class:"w-full flex flex-col md:flex-row justify-between gap-3 md:gap-10"},Xl={class:"text-white"},et={key:0,class:"border-none"},lt={key:1,class:"text-center",colspan:"3"},tt={key:0},st={key:0,class:"border-none"},at={key:0},ot={key:1},nt=Y({__name:"Scoreboard",setup(a){const s=ce(),{myPlayerId:i,gameType:v,gameStatus:$,canChooseOf:b,canSelectScore:p,score:c,players:x}=K(s),S=V(!1),M=U(()=>v.value===w.SOLO?[{userId:i.value,isOnline:!0}]:x.value);return(R,T)=>(t(),o("div",Ql,[(t(!0),o(H,null,ee(M.value,_=>(t(),o("table",{key:_.userId,class:z(["w-full mt-5 text-sm md:text-base text-left",e($)===e(L).HAS_FINISHED?"text-neutral-500":"text-white"])},[r("thead",Xl,[r("tr",null,[r("th",{class:z(["text-center",e(v)===e(w).MULTIPLAYER?_.isOnline?"text-green-400":"text-red-400":"text-white"]),colspan:"5"},O(_.userId===e(i)?"You":e(s).getPlayerDisplayName(_.userId)),3),S.value?(t(),o("th",et)):G("",!0),S.value?(t(),o("th",lt," Bonus ")):G("",!0)])]),e(c)[_.userId]?(t(),o("tbody",tt,[(t(),o(H,null,ee(11,f=>r("tr",{key:f},[(t(!0),o(H,null,ee([e(F).Red,e(F).Orange,e(F).Yellow,e(F).Blue,e(F).Purple],d=>(t(),o("td",{key:d,class:z([e(hl)[d],{[e(gl)[d]]:e(c)[_.userId][d].length&&f-1<=e(c)[_.userId][d][e(c)[_.userId][d].length-1].row,"opacity-25":e(c)[_.userId][d].length&&f-1<e(c)[_.userId][d][e(c)[_.userId][d].length-1].row&&e(c)[_.userId][d].every(k=>k.row!==f-1)}])},[e(c)[_.userId][d].length&&f-1<=e(c)[_.userId][d][e(c)[_.userId][d].length-1].row?(t(),o(H,{key:0},[B(O(e(ue)[d][f-1]),1)],64)):e(p)(_.userId)&&e(b)(_.userId,d).includes(e(ue)[d][f-1])?(t(),D(le,{key:1,class:"size-8",variant:"neutral",disabled:_.userId!==e(i),onClick:k=>e(s).selectScore(d,f-1,e(ue)[d][f-1])},{default:Q(()=>[B(O(e(ue)[d][f-1]),1)]),_:2},1032,["disabled","onClick"])):(t(),o(H,{key:2},[B(O(e(ue)[d][f-1]),1)],64))],2))),128)),S.value?(t(),o("td",st)):G("",!0),S.value&&f<11?(t(!0),o(H,{key:1},ee(Object.keys(e(ve)),d=>(t(),o("td",{key:d,class:z({"bg-opacity-75 bg-white text-black font-bold":Object.values(e(c)[_.userId]).flat().filter(k=>k.row===f-1).length===Number(d)})},O(e(ve)[Number(d)][f-1]),3))),128)):G("",!0)])),64)),S.value?(t(),o("tr",at,T[1]||(T[1]=[r("td",{class:"h-6 border-none",colspan:"5"},null,-1)]))):G("",!0),S.value?(t(),o("tr",ot,[(t(!0),o(H,null,ee([e(F).Red,e(F).Orange,e(F).Yellow,e(F).Blue,e(F).Purple],f=>(t(),o("td",{key:f},O(e(s).getColumnTotal(_.userId,f)),1))),128)),T[2]||(T[2]=r("td",{class:"border-none"},null,-1)),(t(),o(H,null,ee([3,4,5],f=>r("td",{key:f},O(e(s).getBonusColumnTotal(_.userId,f)),1)),64))])):G("",!0)])):G("",!0)],2))),128)),q(le,{class:"!w-full",variant:"neutral",icon:S.value?"pi pi-eye-slash":"pi pi-eye",text:"",label:S.value?"Hide scores":"Show scores",onClick:T[0]||(T[0]=_=>S.value=!S.value)},null,8,["icon","label"])]))}}),rt=fl(nt,[["__scopeId","data-v-f2884049"]]),it={class:"w-full flex justify-center"},ut={class:"text-lg"},ct=Y({__name:"StatusHeader",setup(a){const s=ce(),{yahtzeeStatus:i,yahtzeeStatusLoading:v,activePlayerId:$,myPlayerId:b,players:p}=K(s),c=U(()=>{var x;return $.value===b.value?"You":((x=p.value.find(S=>S.userId===$.value))==null?void 0:x.displayName)||"Unknown"});return(x,S)=>(t(),o("div",it,[r("h3",ut,[e(i)===e(J).HAS_STARTED||e(i)===e(J).HAS_CHOSEN_REMAINING?(t(),o(H,{key:0},[B(O(c.value)+" can now roll the dices. ",1)],64)):e(i)===e(J).HAS_THROWN_DICES?(t(),o(H,{key:1},[B(O(c.value)+" can now choose a score, or pass the turn. ",1)],64)):e(i)===e(J).HAS_CHOSEN_SCORE?(t(),o(H,{key:2},[B(O(c.value)+" chose a score. ",1)],64)):e(i)===e(J).CAN_CHOOSE_REMAINING?(t(),o(H,{key:3},[B(O(c.value)+" can choose from the remaining dices. ",1)],64)):G("",!0)])]))}}),dt={class:"w-full flex flex-col gap-3"},vt={class:"w-full flex flex-col md:flex-row gap-5 md:gap-10 justify-center"},_t={class:"w-full md:w-1/2 flex justify-center gap-3"},ft=Y({__name:"YahtzeeMainGame",setup(a){const s=ce(),i=Le(),{isOwner:v,gameType:$,yahtzeeStatus:b,yahtzeeStatusLoading:p,myPlayerId:c,activePlayerId:x,dices:S,chat:M,maxPlayers:R,isLocked:T,isRolling:_,canRoll:f,canSkipTurn:d}=K(s),{players:k}=K(i),W=U(()=>R.value!==null&&R.value>0?R.value-k.value.length:0),se=U(()=>v.value&&k.value.length>1),oe=()=>{T.value=!0,b.value=J.HAS_STARTED};return(ae,X)=>(t(),o("div",dt,[q(ct),r("div",vt,[q(e(tl),{class:"w-full md:w-1/2"},{default:Q(()=>[e(b)===e(J).WAITING_FOR_OPPONENTS?(t(),D(le,{key:0,class:"w-full",variant:"tertiary",disabled:!se.value,onClick:oe},{default:Q(()=>[B(O(W.value?`Waiting for ${W.value} more player${W.value!==1?"s":""}`:e(v)?e(k).length>1?"Everyone is here? Start the game!":"Waiting for more players to join":"Waiting for the game to start"),1)]),_:1},8,["disabled"])):e(x)!==e(c)?(t(),D(le,{key:1,class:"w-full",variant:"tertiary",disabled:""},{default:Q(()=>[B(O(`${e(i).getPlayerDisplayName(e(x))}'s turn`),1)]),_:1})):e(_)||e(p)?(t(),D(le,{key:2,class:"w-full",variant:"neutral",disabled:""},{default:Q(()=>[B(O(e(_)?"Rolling...":"Loading..."),1)]),_:1})):e(f)?(t(),D(le,{key:3,class:"w-full",variant:"tertiary",disabled:e(_),onClick:e(s).roll},{default:Q(()=>[B(O(e(x)!==e(c)?`${e(i).getPlayerDisplayName(e(x))}'s turn`:"Roll"),1)]),_:1},8,["disabled","onClick"])):e(d)?(t(),D(le,{key:4,class:"w-full",variant:"neutral",onClick:e(s).passTurn},{default:Q(()=>[B(O(e($)===e(w).SOLO||e(b)===e(J).CAN_CHOOSE_REMAINING?"Reroll":e(b)===e(J).HAS_CHOSEN_SCORE?"Next player":"Pass turn"),1)]),_:1},8,["onClick"])):G("",!0)]),_:1}),r("div",_t,[(t(!0),o(H,null,ee(e(S),I=>(t(),D(Kl,{key:I.id,dice:I},null,8,["dice"]))),128))])]),q(rt),e($)===e(w).MULTIPLAYER?(t(),D(ul,{key:0,chats:e(M)??[],onSendChat:X[0]||(X[0]=I=>M.value=[...e(M)??[],I])},null,8,["chats"])):G("",!0)]))}}),ht={class:"flex flex-col gap-3"},gt={class:"text-center text-xl md:text-3xl font-bold"},mt={key:0,class:"text-green-500"},pt={key:1,class:"text-purple-500"},yt={key:2,class:"text-red-500"},wt={key:3,class:"text-blue-500 font-bold"},St={key:4,class:"text-blue-500 font-bold"},It={key:5,class:"text-blue-500 font-bold"},Ot={class:"text-center text-md md:text-lg"},Nt=Y({__name:"YahtzeeResults",setup(a){const s=ce(),{myPlayerId:i,finalScore:v,opponents:$}=K(s),{currentHighscorePosition:b,hasImprovedHighscorePosition:p,hasImprovedPersonalBest:c}=nl(te.YAHTZEE_RAINBOW);return(x,S)=>{var M,R,T,_,f;return t(),o("div",ht,[r("div",gt,[((M=e(v)[e(i)])==null?void 0:M.winStatus)==="win"?(t(),o("p",mt," You won with "+O((R=e(v)[e(i)])==null?void 0:R.total)+" points! ",1)):((T=e(v)[e(i)])==null?void 0:T.winStatus)==="tie"?(t(),o("p",pt," You tied with "+O((_=e(v)[e(i)])==null?void 0:_.total)+" points! ",1)):(t(),o("p",yt," You lost with "+O((f=e(v)[e(i)])==null?void 0:f.total)+" points. ",1)),e(p)&&e(b)===1?(t(),o("p",wt," HIGHSCORE! ")):e(p)?(t(),o("p",St," LEADERBOARD IMPROVEMENT! ")):e(c)?(t(),o("p",It," PERSONAL BEST! ")):G("",!0)]),r("div",Ot,[(t(!0),o(H,null,ee(e($),d=>{var k;return t(),o("p",{key:d.userId},O(d.displayName)+" has "+O((k=e(v)[d.userId])==null?void 0:k.total)+" points ",1)}),128))])])}}}),Et={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},At={class:"flex flex-wrap justify-center gap-3"},kt={key:0,class:"w-full"},Lt=Y({__name:"Yahtzee",setup(a){const s=ce(),i=Ce(),{gameId:v,partyName:$,isOwner:b,gameType:p,gameStatus:c,myPlayerId:x,finalScore:S,personalBest:M}=K(s),{isLoggedIn:R,isOwner:T}=K(i),{start:_,$reset:f,createOnlineGame:d,continueOnlineGame:k,leaveOnlineGame:W,deleteOnlineGame:se,updateYahtzeeHighscore:oe}=s,ae=V(!1),X=V(!1),I=()=>{p.value=w.MULTIPLAYER,c.value=L.FINDING_OPPONENT},C=async()=>{v.value&&(b.value?await se():await W()),f()},y=async()=>{v.value&&await W(),f()};return De(()=>{v.value&&k(v.value)}),sl(async()=>{v.value&&(await W(),f())}),(j,h)=>(t(),D(al,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainbow Yahtzee",tags:e(p)===e(w).MULTIPLAYER&&e($)?[{value:e($),severity:"danger"}]:void 0,description:e(c)===e(L).HAS_NOT_STARTED?e(p)===e(w).SOLO?"Play solo or with a friend.":"Play with a friend.":void 0},{right:Q(()=>[r("div",Et,[q(le,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:h[0]||(h[0]=N=>ae.value=!0)}),q(vl,{"icon-only":"","is-solo":e(p)===e(w).SOLO,"is-owner":e(b),"has-game-started":e(c)>=e(L).IS_PLAYING,"is-game-over":e(c)===e(L).HAS_FINISHED,onDelete:C},null,8,["is-solo","is-owner","has-game-started","is-game-over"])])]),default:Q(()=>{var N;return[r("div",At,[e(c)===e(L).FINDING_OPPONENT?(t(),o("div",kt,[q(cl,{"allow-party":"",onCreateOnlineGame:h[1]||(h[1]=m=>e(d)([{userId:m}])),onContinueOnlineGame:e(k),onCreateParty:h[2]||(h[2]=(m,A)=>e(d)([],m,A)),onJoinParty:e(k)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(c)===e(L).IS_PLAYING?(t(),D(ft,{key:1})):e(c)===e(L).HAS_FINISHED?(t(),D(Nt,{key:2})):G("",!0)]),q(dl,{"is-viewing-highscores":X.value,"onUpdate:isViewingHighscores":h[3]||(h[3]=m=>X.value=m),"has-solo":e(T),"is-solo":e(p)===e(w).SOLO,hasMultiplayer:"",isMultiplayer:e(p)===e(w).MULTIPLAYER,"is-owner":e(b),"is-main-menu":e(c)===e(L).HAS_NOT_STARTED,"has-game-started":e(c)>=e(L).IS_PLAYING,"is-game-over":e(c)===e(L).HAS_FINISHED,onPlaySolo:e(_),onPlayMultiplayer:I,onRestart:C,onGoBack:y},null,8,["is-viewing-highscores","has-solo","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),X.value?(t(),D(rl,{key:0,"game-id":e(te).YAHTZEE_RAINBOW},null,8,["game-id"])):G("",!0),q(il,{"is-logged-in":e(R),"is-solo":e(p)===e(w).SOLO,"is-game-over":e(c)===e(L).HAS_FINISHED,"final-score":((N=e(S)[e(x)])==null?void 0:N.total)??0,"personal-best":e(M),"redirect-route":e(ol).GAMES_YAHTZEE_RAINBOW,onUpdateHighscore:h[4]||(h[4]=m=>e(oe)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),q(_l,{"game-id":e(te).YAHTZEE_RAINBOW,"is-open":ae.value,"onUpdate:isOpen":h[5]||(h[5]=m=>ae.value=m)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{Lt as default};
