import{d as ie,s as K,U as Se,b as t,c as a,e as n,t as d,f as e,h as i,i as j,w as W,k as F,bc as v,O as E,Q as L,J as u,z as X,C as O,bd as ye,be as ue,l as ce,aB as me,n as te,q as fe,g as $,S as Ie,_ as Te}from"../bundle.js";import{u as de,s as pe,G as s,S as p,B as V,_ as we}from"./c-Dice.vue_vue_type_script_setup_true_lang-CT_0Qa1j.js";import{u as Ee,H as ge,_ as Oe}from"./c-useScoreInfo-COMBkdNG.js";import{_ as Ae,a as Ne}from"./c-GameChat.vue_vue_type_script_setup_true_lang-CJhvUHFU.js";import{_ as Pe,a as He}from"./c-GameActions.vue_vue_type_script_setup_true_lang-CJKuhNc1.js";import{_ as Re}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-DIjGe0gg.js";import{_ as _e}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-Dice5.vue_vue_type_script_setup_true_lang-C6p2XO2T.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-asLvsLFP.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-gyxqVQj5.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-ChRuyxYJ.js";const ke={class:"h-10"},Le={class:"w-1/2 md:w-1/3"},xe={key:0},$e={key:1,class:"!ps-1 md:ps-1"},De={key:2},Ge={key:0},be={key:1},Ye={key:2},Fe=ie({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(D){const h=D,M=de(),{gameType:m,gameStatus:S,activePlayerId:g,myPlayerId:x,opponents:y,reroll:A}=K(M),{selectScore:P,getScore:c,getActualValue:r}=M,H=X(!1),G=pe[h.row],b=O(()=>c(h.row,x.value)),T=O(()=>r(h.row,h.hasValue)),Y=O(()=>T.value===!1?"X":T.value);return Se(()=>T.value,()=>{H.value=!0,setTimeout(()=>{H.value=!1})}),(R,U)=>(t(),a("tr",ke,[n("th",Le,d(e(G).title),1),b.value?(t(),a("td",xe,d(b.value.value===!1?"X":b.value.value),1)):e(g)===e(x)&&e(A)>=0&&!H.value?(t(),a("td",$e,[i(j,{class:"size-8",variant:T.value===!1||T.value===0?"neutral":void 0,onClick:U[0]||(U[0]=N=>e(P)(D.row,T.value))},{default:W(()=>[F(d(Y.value),1)]),_:1},8,["variant"])])):(t(),a("td",De)),e(m)===e(v).MULTIPLAYER?(t(!0),a(E,{key:3},L(e(y),N=>(t(),a(E,null,[e(c)(D.row,N.userId)?(t(),a("td",Ge,d(e(c)(D.row,N.userId).value===!1?"X":e(c)(D.row,N.userId).value),1)):e(g)===N.userId&&e(S)>e(s).HAS_STARTED?(t(),a("td",be,[i(j,{class:"size-8",variant:T.value===!1||T.value===0?"neutral":"danger"},{default:W(()=>[F(d(Y.value),1)]),_:1},8,["variant"])])):(t(),a("td",Ye))],64))),256)):u("",!0)]))}}),w=_e(Fe,[["__scopeId","data-v-1e847acc"]]),Me={key:0,class:"text-white"},Ue={key:1,class:"h-12 md:h-auto text-yellow-500"},Ce={key:3,class:"h-12 md:h-auto text-yellow-500"},Be={class:"h-12 md:h-auto text-pink-500"},Ve={key:0,class:"text-purple-500 font-bold"},We={key:1,class:"text-red-500 font-bold"},ze={key:2,class:"text-green-500 font-bold"},Ze={key:0,class:"h-12 md:h-auto text-red-500 font-bold"},je=ie({__name:"Scoreboard",setup(D){const h=de(),M=ye(),{gameType:m,gameStatus:S,myPlayerId:g,bonusScore:x,finalScore:y,hasOfValue:A,hasThreeOfAKind:P,hasFourOfAKind:c,hasFullHouse:r,hasSmallStraight:H,hasLargeStraight:G,hasYahtzee:b,diceTotal:T}=K(h),{players:Y,opponents:R}=K(M),{currentHighscorePosition:U,hasImprovedHighscorePosition:N,hasImprovedPersonalBest:ae}=Ee(ue.YAHTZEE),C=X(),B=X(!1),z=O(()=>A.value(1)),Z=O(()=>A.value(2)),se=O(()=>A.value(3)),le=O(()=>A.value(4)),oe=O(()=>A.value(5)),re=O(()=>A.value(6));return ce(()=>{C.value=setInterval(()=>{B.value=!B.value},500)}),me(()=>{clearInterval(C.value)}),(J,l)=>{var k,q,Q;return t(),a("table",{class:te(["w-full mt-5 text-sm md:text-base text-left",e(S)===e(s).HAS_FINISHED?"text-neutral-500":"text-white",e(S)===e(s).HAS_NOT_STARTED?B.value?"even":"odd":void 0])},[e(m)===e(v).MULTIPLAYER?(t(),a("thead",Me,[n("tr",null,[l[0]||(l[0]=n("th",null,null,-1)),l[1]||(l[1]=n("th",null,"You",-1)),(t(!0),a(E,null,L(e(R),o=>(t(),a("th",{key:o.userId,class:te(o.isOnline?"text-green-400":"text-red-400")},d(e(h).getPlayerDisplayName(o.userId)),3))),128))])])):u("",!0),n("tbody",null,[i(w,{row:e(p).ONES,"has-value":z.value},null,8,["row","has-value"]),i(w,{row:e(p).TWOS,"has-value":Z.value},null,8,["row","has-value"]),i(w,{row:e(p).THREES,"has-value":se.value},null,8,["row","has-value"]),i(w,{row:e(p).FOURS,"has-value":le.value},null,8,["row","has-value"]),i(w,{row:e(p).FIVES,"has-value":oe.value},null,8,["row","has-value"]),i(w,{row:e(p).SIXES,"has-value":re.value},null,8,["row","has-value"]),e(S)>=e(s).HAS_FINISHED?(t(),a("tr",{key:0,class:te(["h-12 md:h-auto",e(S)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[l[2]||(l[2]=n("th",null,"TOP",-1)),n("td",null,d(((k=e(y)[e(g)])==null?void 0:k.top)??""),1),e(m)===e(v).MULTIPLAYER?(t(!0),a(E,{key:0},L(e(R),o=>{var f;return t(),a("td",null,d(((f=e(y)[o.userId])==null?void 0:f.top)??""),1)}),256)):u("",!0)],2)):u("",!0),e(S)>e(s).HAS_NOT_STARTED&&Object.values(e(x)).some(o=>o.includes(e(V).TOP))?(t(),a("tr",Ue,[l[3]||(l[3]=n("th",null,"BONUS",-1)),n("td",null,d(e(h).getBonus(e(V).TOP,e(g))||""),1),e(m)===e(v).MULTIPLAYER?(t(!0),a(E,{key:0},L(e(R),o=>(t(),a("td",null,d(e(h).getBonus(e(V).TOP,o.userId)||""),1))),256)):u("",!0)])):u("",!0),i(w,{row:e(p).THREE_OF_A_KIND,"has-value":e(P)},null,8,["row","has-value"]),i(w,{row:e(p).FOUR_OF_A_KIND,"has-value":e(c)},null,8,["row","has-value"]),i(w,{row:e(p).FULL_HOUSE,"has-value":e(r)},null,8,["row","has-value"]),i(w,{row:e(p).SMALL_STRAIGHT,"has-value":e(H)},null,8,["row","has-value"]),i(w,{row:e(p).LARGE_STRAIGHT,"has-value":e(G)},null,8,["row","has-value"]),i(w,{row:e(p).YAHTZEE,"has-value":e(b)},null,8,["row","has-value"]),i(w,{row:e(p).CHANCE,"has-value":e(T)},null,8,["row","has-value"]),e(S)>=e(s).HAS_FINISHED?(t(),a("tr",{key:2,class:te(["h-12 md:h-auto",e(S)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[l[4]||(l[4]=n("th",null,"BOTTOM",-1)),n("td",null,d(((q=e(y)[e(g)])==null?void 0:q.bottom)??""),1),e(m)===e(v).MULTIPLAYER?(t(!0),a(E,{key:0},L(e(R),o=>{var f;return t(),a("td",null,d(((f=e(y)[o.userId])==null?void 0:f.bottom)??""),1)}),256)):u("",!0)],2)):u("",!0),Object.values(e(x)).some(o=>o.includes(e(V).YAHTZEE))?(t(),a("tr",Ce,[l[5]||(l[5]=n("th",null,"YAHTZEE BONUS",-1)),n("td",null,d(e(h).getBonus(e(V).YAHTZEE,e(g))||""),1),e(m)===e(v).MULTIPLAYER?(t(!0),a(E,{key:0},L(e(R),o=>(t(),a("td",null,d(e(h).getBonus(e(V).YAHTZEE,o.userId)||""),1))),256)):u("",!0)])):u("",!0),e(S)===e(s).HAS_FINISHED?(t(),a(E,{key:4},[n("tr",Be,[l[6]||(l[6]=n("th",null,"TOTAL",-1)),n("td",null,[F(d(((Q=e(y)[e(g)])==null?void 0:Q.total)??"")+" ",1),e(N)&&e(U)===1?(t(),a("span",Ve," HIGHSCORE! ")):e(N)?(t(),a("span",We," LEADERBOARD IMPROVEMENT! ")):e(ae)?(t(),a("span",ze," PERSONAL BEST! ")):u("",!0)]),e(m)===e(v).MULTIPLAYER?(t(!0),a(E,{key:0},L(e(R),o=>{var f;return t(),a("td",null,d(((f=e(y)[o.userId])==null?void 0:f.total)??""),1)}),256)):u("",!0)]),e(m)===e(v).MULTIPLAYER?(t(),a("tr",Ze,[l[7]||(l[7]=n("td",null,null,-1)),(t(!0),a(E,null,L(e(Y),o=>{var f,ee;return t(),a("td",null,[((f=e(y)[o.userId])==null?void 0:f.winStatus)==="win"?(t(),a(E,{key:0},[F(" WINNER! ")],64)):((ee=e(y)[o.userId])==null?void 0:ee.winStatus)==="tie"?(t(),a(E,{key:1},[F(" TIE! ")],64)):u("",!0)])}),256))])):u("",!0)],64)):u("",!0)])],2)}}}),ve=_e(je,[["__scopeId","data-v-c7cf0c06"]]),Ke={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Xe={class:"flex flex-wrap justify-center gap-3"},Je={key:0,class:"w-full"},qe={key:1,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},Qe={class:"w-full md:w-1/2 flex justify-center gap-3"},et={class:"w-full md:w-1/2 flex justify-center gap-3"},mt=ie({__name:"Yahtzee",setup(D){const h=de(),M=fe(),{gameId:m,chat:S,players:g,partyName:x,maxPlayers:y,isLocked:A,isOwner:P,gameType:c,gameStatus:r,activePlayerId:H,myPlayerId:G,canRoll:b,canReroll:T,dices:Y,finalScore:R,personalBest:U}=K(h),{isLoggedIn:N}=K(M),{start:ae,$reset:C,createOnlineGame:B,continueOnlineGame:z,leaveOnlineGame:Z,deleteOnlineGame:se,getPlayerDisplayName:le,roll:oe,updateYahtzeeHighscore:re}=h,J=X(!1),l=X(!1),k=O(()=>y.value!==null&&y.value>0?y.value-g.value.length:0),q=O(()=>P.value&&g.value.length>1),Q=()=>{c.value=v.MULTIPLAYER,r.value=s.FINDING_OPPONENT},o=()=>{A.value=!0,r.value=s.HAS_STARTED},f=async()=>{m.value&&(P.value?await se():await Z()),C()},ee=async()=>{m.value&&await Z(),C()};return ce(()=>{m.value&&z(m.value)}),me(async()=>{m.value&&(await Z(),C())}),(tt,I)=>(t(),$(Te,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",tags:e(c)===e(v).MULTIPLAYER&&e(x)?[{value:e(x),severity:"danger"}]:void 0,description:e(c)===e(v).SOLO?e(r)===e(s).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:W(()=>[n("div",Ke,[i(j,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:I[0]||(I[0]=ne=>J.value=!0)}),i(He,{"icon-only":"","is-solo":e(c)===e(v).SOLO,"is-owner":e(P),"has-game-started":e(r)>=e(s).WAITING_FOR_OPPONENTS,"is-game-over":e(r)===e(s).HAS_FINISHED,onDelete:f},null,8,["is-solo","is-owner","has-game-started","is-game-over"])])]),default:W(()=>{var ne;return[n("div",Xe,[e(r)===e(s).FINDING_OPPONENT?(t(),a("div",Je,[i(Ae,{"allow-party":"",onCreateOnlineGame:I[1]||(I[1]=_=>e(B)([{userId:_}])),onContinueOnlineGame:e(z),onCreateParty:I[2]||(I[2]=(_,he)=>e(B)([],_,he)),onJoinParty:e(z)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(r)>=e(s).WAITING_FOR_OPPONENTS&&e(r)<e(s).HAS_FINISHED?(t(),a("div",qe,[n("div",Qe,[e(r)===e(s).WAITING_FOR_OPPONENTS?(t(),$(j,{key:0,class:"w-full",variant:"tertiary",disabled:!q.value,onClick:o},{default:W(()=>[F(d(k.value?`Waiting for ${k.value} more player${k.value!==1?"s":""}`:e(P)?e(g).length>1?"Everyone is here? Start the game!":"Waiting for more players to join":"Waiting for the game to start"),1)]),_:1},8,["disabled"])):e(c)===e(v).MULTIPLAYER||e(b)||e(T)?(t(),$(j,{key:1,class:"w-full",variant:"tertiary",disabled:e(H)!==e(G)||e(r)===e(s).HAS_CHOSEN_DICES||e(Y).every(_=>_.selected),onClick:e(oe)},{default:W(()=>[F(d(k.value?`Waiting for ${k.value} more player${k.value!==1?"s":""}`:e(H)!==e(G)?`${e(le)(e(H))}'s turn`:e(T)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):u("",!0)]),n("div",et,[(t(!0),a(E,null,L(e(Y),_=>(t(),$(we,{key:_.id,dice:_},null,8,["dice"]))),128))])])):u("",!0)]),!l.value&&e(r)>=e(s).WAITING_FOR_OPPONENTS?(t(),$(ve,{key:0})):u("",!0),!l.value&&e(c)===e(v).MULTIPLAYER&&e(r)>=e(s).WAITING_FOR_OPPONENTS?(t(),$(Ne,{key:1,chats:e(S)??[],onSendChat:I[3]||(I[3]=_=>S.value=[...e(S)??[],_])},null,8,["chats"])):u("",!0),i(Pe,{"is-viewing-highscores":l.value,"onUpdate:isViewingHighscores":I[4]||(I[4]=_=>l.value=_),"has-solo":"","is-solo":e(c)===e(v).SOLO,hasMultiplayer:"",isMultiplayer:e(c)===e(v).MULTIPLAYER,"is-owner":e(P),"is-main-menu":e(r)===e(s).HAS_NOT_STARTED,"has-game-started":e(r)>=e(s).WAITING_FOR_OPPONENTS,"is-game-over":e(r)===e(s).HAS_FINISHED,onPlaySolo:e(ae),onPlayMultiplayer:Q,onRestart:f,onGoBack:ee},null,8,["is-viewing-highscores","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),!l.value&&e(r)===e(s).HAS_NOT_STARTED?(t(),$(ve,{key:2})):u("",!0),l.value?(t(),$(ge,{key:3,"game-id":e(ue).YAHTZEE},null,8,["game-id"])):u("",!0),i(Oe,{"is-logged-in":e(N),"is-solo":e(c)===e(v).SOLO,"is-game-over":e(r)===e(s).HAS_FINISHED,"final-score":((ne=e(R)[e(G)])==null?void 0:ne.total)??0,"personal-best":e(U),"redirect-route":e(Ie).GAMES_YAHTZEE,onUpdateHighscore:I[5]||(I[5]=_=>e(re)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),i(Re,{"game-id":e(ue).YAHTZEE,"is-open":J.value,"onUpdate:isOpen":I[6]||(I[6]=_=>J.value=_)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{mt as default};
