import{aT as Be,aU as We,c as Te,aV as Fe,aR as $e,s as z,aW as je,aX as xe,aS as ee,w as V,aQ as y,a9 as be,f as F,o as He,L as re,aY as Ue,aZ as ze,a_ as fe,a$ as Ze,aq as Pe,b0 as Ve,b1 as qe,d as M,g as c,j as a,q as i,z as Z,l as H,b2 as Je,h as e,C as j,E as ce,m as Q,I as N,a3 as G,_ as X,A as q,k as J,N as Ke,ax as Qe,y as Xe,a7 as el}from"../bundle.js";import{u as ll,H as tl,_ as sl}from"./c-useScoreInfo-BuqgYv10.js";import{a as al,_ as ol}from"./c-GameChat.vue_vue_type_script_setup_true_lang-h5tQHG7E.js";import{_ as nl,a as il}from"./c-GameActions.vue_vue_type_script_setup_true_lang-BNBQOUbb.js";import{_ as rl}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B6MMtiVw.js";import{_ as ul}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";var ae=(s=>(s[s.Purple=0]="Purple",s[s.Blue=1]="Blue",s[s.Yellow=2]="Yellow",s[s.Orange=3]="Orange",s[s.Red=4]="Red",s))(ae||{}),$=(s=>(s[s.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",s[s.FINDING_OPPONENT=1]="FINDING_OPPONENT",s[s.IS_PLAYING=2]="IS_PLAYING",s[s.HAS_FINISHED=3]="HAS_FINISHED",s))($||{}),U=(s=>(s[s.WAITING_FOR_OPPONENTS=0]="WAITING_FOR_OPPONENTS",s[s.HAS_STARTED=1]="HAS_STARTED",s[s.HAS_THROWN_DICES=2]="HAS_THROWN_DICES",s[s.HAS_CHOSEN_SCORE=3]="HAS_CHOSEN_SCORE",s[s.CAN_CHOOSE_REMAINING=4]="CAN_CHOOSE_REMAINING",s[s.HAS_CHOSEN_REMAINING=5]="HAS_CHOSEN_REMAINING",s))(U||{});const de=Be("yahtzeeRainbowStore",()=>{const s=We(),t=Te(),o=Fe(),u=$e(),{personalBest:x,highscorePosition:A}=z(o),{firebaseUser:h}=z(t),{games:r,gamesLoading:R,gameId:C,creatorId:Y,players:k,opponents:g,partyName:w,maxPlayers:d,isLocked:b,chat:L,isOwner:B}=z(u),{setPreviousHighscores:le,updateHighscores:oe,sortHighscores:te}=o,K={onlineGames:je(s,xe.GAME_DATA,ee.YAHTZEE_RAINBOW,xe.ONLINE_GAMES)},S=V(y.SOLO),T=V(0),m=V(1),W=V(!1),v=V("soloPlayer"),I=V(v.value),f=V(he()),E=be({}),O=be({}),ne=F(()=>f.value.some(l=>l.isRolling)),P=F(()=>f.value.filter(l=>l.color===null)),me=F(()=>!!(I.value===v.value&&P.value.length&&!W.value&&m.value===1)),pe=F(()=>l=>!!(I.value===l&&!ne.value&&f.value.some(_=>_.color===null)&&!W.value&&(S.value===y.SOLO&&m.value===2||S.value===y.MULTIPLAYER&&[4,2].includes(m.value)))),ye=F(()=>I.value===v.value&&!ne.value&&!W.value),Ce=F(()=>(l,_)=>{if(I.value!==l)return[];const n=[],p=f.value.find(D=>D.color===_);return P.value.length===2?(n.push(P.value[0].value+P.value[1].value),p&&(n.push(P.value[0].value+p.value),n.push(P.value[1].value+p.value))):P.value.length===1&&p&&n.push(P.value[0].value+p.value),n}),Le=F(()=>(l,_,n)=>{var p;return!!((p=E[l])!=null&&p[_].find(D=>D.row===n))});He(()=>{o.$init(ee.YAHTZEE_RAINBOW)}),re(E,()=>{T.value!==3&&Ne().size===2&&(S.value===y.SOLO||B.value)&&(T.value=3)}),re(T,l=>{l===3&&I.value===v.value&&(S.value===y.SOLO?(Re(v.value),ke(),_e()):B.value&&(k.value.forEach(_=>{Re(_.userId)}),ke(),Ie()),fe(qe))}),re(O,()=>{var l;if(S.value===y.MULTIPLAYER){const _=(l=O[v.value])==null?void 0:l.winStatus;(_==="win"||_==="tie")&&_e()}}),re([T,m,I,ne],()=>{S.value===y.MULTIPLAYER&&Ie()},{deep:!0}),re(k,()=>{m.value===0&&d.value&&k.value.length===d.value&&(b.value=!0,m.value=1)});const ve=()=>{u.$reset(),S.value=y.SOLO,T.value=0,m.value=1,W.value=!1,v.value="soloPlayer",I.value=v.value,f.value=he(),Object.keys(E).forEach(l=>{delete E[l],delete O[l]}),le()},De=(l,_=null,n=null)=>{h.value&&(l=[{userId:h.value.uid,isOnline:!0},...l],S.value=y.MULTIPLAYER,T.value=2,m.value=n?0:1,v.value=h.value.uid,I.value=v.value,l.forEach(p=>{E[p.userId]=ge(),O[p.userId]=null}),u.$init(ee.YAHTZEE_RAINBOW,we,Se,ve),u.createGame(l,_,n))},Ge=l=>{h.value&&(S.value=y.MULTIPLAYER,v.value=h.value.uid,u.$init(ee.YAHTZEE_RAINBOW,we,Se,ve),u.continueGame(l))},we=()=>({gameStatus:T.value,yahtzeeStatus:m.value,activePlayerId:I.value,dices:f.value,score:E,finalScore:O}),Se=l=>{var n;const _=(n=h.value)==null?void 0:n.uid;!_||I.value===v.value||(T.value=l.gameStatus,m.value=l.yahtzeeStatus,I.value=l.activePlayerId,f.value=l.dices,Object.assign(E,l.score),Object.assign(O,l.finalScore),Object.keys(E).includes(_)||(E[_]=ge(),O[_]=null))},Ie=()=>{!h.value||I.value!==v.value&&!W.value||u.pushState()},Oe=async()=>{for(;ne.value;)await new Promise(l=>setTimeout(l,o.diceRollSpeed*1e3));return!0},Ne=()=>{const l=new Set;for(const _ of Object.values(E))for(const[n,p]of Object.entries(_))p.some(D=>D.row===10)&&l.add(Number(n));return l},ie=()=>he().filter(l=>l.color===null||!Ne().has(l.color)),Me=()=>{S.value=y.SOLO,T.value=2,m.value=1,E[v.value]=ge(),O[v.value]=null},Ee=async()=>{if(!me.value)return;const l=o.diceRollSpeed*1e3;f.value.forEach(_=>{_.isRolling=!0,setTimeout(()=>{_.value=Ue(6),_.isRolling=!1},ze(l,l/3))}),await Oe(),m.value=2,fe(Ze)},Ye=(l,_,n)=>{if(pe.value){if(E[v.value][l].push({row:_}),P.value.length===2&&P.value[0].value+P.value[1].value===n)f.value=f.value.filter(p=>p.color!==null);else{const p=f.value.find(D=>D.color===l);if(p){const D=P.value.find(se=>se.value+p.value===n);D&&(f.value=f.value.filter(se=>se.id!==p.id&&se.id!==D.id))}}S.value===y.MULTIPLAYER&&(W.value=!0,m.value===4?m.value=5:m.value=3,setTimeout(async()=>{W.value=!1,await Pe(),await Ae()},o.diceRollSpeed*1e3)),fe(Ve)}},Ae=async()=>{ye.value&&(S.value===y.SOLO?(m.value=1,f.value=ie()):m.value===4?(m.value=1,f.value=ie(),await Ee()):m.value===5?(m.value=1,f.value=ie()):(P.value.length===1?m.value=4:(m.value=1,f.value=ie()),W.value=!0,I.value=u.getNextPlayerId(I.value),f.value.some(l=>l.color===null)||(f.value=ie()),await Pe(),W.value=!1))},Re=l=>{let _=0;Object.values(E[l]).forEach(n=>{n.length&&(_+=cl[n.length])});for(let n=0;n<10;n++){const p=Object.values(E[l]).filter(D=>!!D.find(se=>se.row===n)).length;p>=3&&(_+=dl[p][n])}O[l]={total:_}},ke=()=>{const l=Math.max(...Object.values(O).map(n=>(n==null?void 0:n.total)??0)),_=Object.keys(O).filter(n=>{var p;return((p=O[n])==null?void 0:p.total)===l});S.value===y.SOLO?O[v.value].winStatus="win":k.value.forEach(n=>{_.includes(n.userId)?_.length===1?O[n.userId].winStatus="win":O[n.userId].winStatus="tie":O[n.userId].winStatus="lose"})},_e=()=>{h!=null&&h.value&&O[v.value]&&oe({gameId:C.value??null,score:O[v.value].total})};return{collections:K,games:r,gamesLoading:R,gameId:C,creatorId:Y,players:k,opponents:g,partyName:w,maxPlayers:d,isLocked:b,chat:L,isOwner:B,gameType:S,gameStatus:T,yahtzeeStatus:m,yahtzeeStatusLoading:W,myPlayerId:v,activePlayerId:I,score:E,finalScore:O,dices:f,whiteDices:P,isRolling:ne,canRoll:me,canSelectScore:pe,canSkipTurn:ye,hasSelectedScore:Le,canChooseOf:Ce,personalBest:x,highscorePosition:A,$reset:ve,start:Me,roll:Ee,hasFinishedRolling:Oe,selectScore:Ye,passTurn:Ae,setPreviousHighscores:le,updateYahtzeeHighscore:_e,sortHighscores:te,fetchOnlineGames:u.fetchGames,createOnlineGame:De,continueOnlineGame:Ge,leaveOnlineGame:u.leaveGame,deleteOnlineGame:u.deleteGame,getPlayerDisplayName:u.getPlayerDisplayName,getNextPlayerId:u.getNextPlayerId}},{persist:{enabled:!0}}),he=()=>[{id:1,color:4,value:1,isRolling:!1},{id:2,color:3,value:2,isRolling:!1},{id:3,color:2,value:3,isRolling:!1},{id:4,color:1,value:4,isRolling:!1},{id:5,color:0,value:5,isRolling:!1},{id:6,color:null,value:6,isRolling:!1},{id:7,color:null,value:6,isRolling:!1}],ge=()=>({0:[],1:[],2:[],3:[],4:[]}),ue={0:[12,10,8,6,4,2,4,6,8,10,12],1:[2,4,6,8,10,12,10,8,6,4,2],2:[12,11,10,9,8,7,6,5,4,3,2],3:[2,3,4,5,6,7,8,9,10,11,12],4:[2,3,4,5,6,7,8,9,10,11,12]},cl={1:1,2:2,3:4,4:7,5:11,6:16,7:22,8:29,9:37,10:46,11:56},dl={3:[2,2,1,1,1,1,1,1,1,2,2],4:[5,4,4,2,2,2,2,2,1,2,4],5:[10,8,6,4,2,0,2,4,6,8,10]},vl={0:"text-purple-500",1:"text-blue-500",2:"text-yellow-500",3:"text-orange-500",4:"text-red-500"},_l={0:"bg-purple-700",1:"bg-blue-700",2:"bg-yellow-700",3:"bg-orange-700",4:"bg-red-700"},fl={0:"fill-purple-500",1:"fill-blue-500",2:"fill-yellow-500",3:"fill-orange-500",4:"fill-red-500"},hl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},gl=["fill"],ml=M({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",hl,[i("rect",{class:Z(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,gl)]))}}),pl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},yl=["fill"],wl=["fill"],Sl=M({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",pl,[i("rect",{class:Z(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,yl),i("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,wl)]))}}),Il={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ol=["fill"],Nl=["fill"],El=["fill"],Al=M({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Il,[i("rect",{class:Z(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Ol),i("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Nl),i("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,El)]))}}),Rl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},kl=["fill"],xl=["fill"],bl=["fill"],Pl=["fill"],Tl=M({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Rl,[i("rect",{class:Z(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,kl),i("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,xl),i("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,bl),i("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Pl)]))}}),$l={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Hl=["fill"],Cl=["fill"],Ll=["fill"],Dl=["fill"],Gl=["fill"],Ml=M({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",$l,[i("rect",{class:Z(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Hl),i("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,Cl),i("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Ll),i("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,Dl),i("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Gl)]))}}),Yl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Bl=["fill"],Wl=["fill"],Fl=["fill"],jl=["fill"],Ul=["fill"],zl=["fill"],Zl=M({__name:"Dice6",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Yl,[i("rect",{class:Z(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Bl),i("circle",{cx:"25",cy:"50",r:"10",fill:t.color},null,8,Wl),i("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,Fl),i("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,jl),i("circle",{cx:"75",cy:"50",r:"10",fill:t.color},null,8,Ul),i("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,zl)]))}}),Vl=M({__name:"Dice",props:{dice:{}},setup(s){const t={1:ml,2:Sl,3:Al,4:Tl,5:Ml,6:Zl};return(o,u)=>(a(),c("div",{class:Z(["cursor-pointer",{"animate-spin":o.dice.isRolling}])},[(a(),H(Je(t[o.dice.value]),{color:"black",backgroundColor:o.dice.color!==null?e(fl)[o.dice.color]:"fill-white",width:"40",height:"40"},null,8,["backgroundColor"]))],2))}}),ql={class:"w-full flex flex-col md:flex-row justify-between gap-3 md:gap-10"},Jl={key:0,class:"text-white"},Kl={key:1},Ql=M({__name:"Scoreboard",setup(s){const t=de(),{myPlayerId:o,gameType:u,gameStatus:x,canChooseOf:A,canSelectScore:h,score:r,players:R}=z(t),C=F(()=>u.value===y.SOLO?[{userId:o.value,isOnline:!0}]:R.value);return(Y,k)=>(a(),c("div",ql,[(a(!0),c(j,null,ce(C.value,g=>(a(),c("table",{key:g.userId,class:Z(["w-full mt-5 text-sm md:text-base text-left",e(x)===e($).HAS_FINISHED?"text-neutral-500":"text-white"])},[e(u)===e(y).MULTIPLAYER?(a(),c("thead",Jl,[i("tr",null,[i("th",{class:Z(["text-center",g.isOnline?"text-green-400":"text-red-400"]),colspan:"5"},N(g.userId===e(o)?"You":e(t).getPlayerDisplayName(g.userId)),3)])])):Q("",!0),e(r)[g.userId]?(a(),c("tbody",Kl,[(a(),c(j,null,ce(11,w=>i("tr",{key:w},[(a(!0),c(j,null,ce([e(ae).Red,e(ae).Orange,e(ae).Yellow,e(ae).Blue,e(ae).Purple],d=>(a(),c("td",{key:d,class:Z([e(vl)[d],{[e(_l)[d]]:e(r)[g.userId][d].length&&w-1<=e(r)[g.userId][d][e(r)[g.userId][d].length-1].row,"opacity-25":e(r)[g.userId][d].length&&w-1<e(r)[g.userId][d][e(r)[g.userId][d].length-1].row&&e(r)[g.userId][d].every(b=>b.row!==w-1)}])},[e(r)[g.userId][d].length&&w-1<=e(r)[g.userId][d][e(r)[g.userId][d].length-1].row?(a(),c(j,{key:0},[G(N(e(ue)[d][w-1]),1)],64)):e(h)(g.userId)&&e(A)(g.userId,d).includes(e(ue)[d][w-1])?(a(),H(X,{key:1,class:"size-8",variant:"neutral",disabled:g.userId!==e(o),onClick:b=>e(t).selectScore(d,w-1,e(ue)[d][w-1])},{default:q(()=>[G(N(e(ue)[d][w-1]),1)]),_:2},1032,["disabled","onClick"])):(a(),c(j,{key:2},[G(N(e(ue)[d][w-1]),1)],64))],2))),128))])),64))])):Q("",!0)],2))),128))]))}}),Xl=ul(Ql,[["__scopeId","data-v-d5afb153"]]),et={class:"w-full flex justify-center"},lt={class:"text-lg"},tt=M({__name:"StatusHeader",setup(s){const t=de(),{yahtzeeStatus:o,yahtzeeStatusLoading:u,activePlayerId:x,myPlayerId:A,players:h}=z(t),r=F(()=>{var R;return x.value===A.value?"You":((R=h.value.find(C=>C.userId===x.value))==null?void 0:R.displayName)||"Unknown"});return(R,C)=>(a(),c("div",et,[i("h3",lt,[e(o)===e(U).HAS_STARTED||e(o)===e(U).HAS_CHOSEN_REMAINING?(a(),c(j,{key:0},[G(N(r.value)+" can now roll the dices. ",1)],64)):e(o)===e(U).HAS_THROWN_DICES?(a(),c(j,{key:1},[G(N(r.value)+" can now choose a score, or pass the turn. ",1)],64)):e(o)===e(U).HAS_CHOSEN_SCORE?(a(),c(j,{key:2},[G(N(r.value)+" chose a score. ",1)],64)):e(o)===e(U).CAN_CHOOSE_REMAINING?(a(),c(j,{key:3},[G(N(r.value)+" can choose from the remaining dices. ",1)],64)):Q("",!0)])]))}}),st={class:"w-full flex flex-col gap-3"},at={class:"w-full flex flex-col md:flex-row gap-5 md:gap-10 justify-center"},ot={class:"w-full md:w-1/2 flex justify-center gap-3"},nt=M({__name:"YahtzeeMainGame",setup(s){const t=de(),o=$e(),{isOwner:u,gameType:x,yahtzeeStatus:A,yahtzeeStatusLoading:h,myPlayerId:r,activePlayerId:R,dices:C,chat:Y,maxPlayers:k,isLocked:g,isRolling:w,canRoll:d,canSkipTurn:b}=z(t),{players:L}=z(o),B=F(()=>k.value!==null&&k.value>0?k.value-L.value.length:0),le=F(()=>u.value&&L.value.length>1),oe=()=>{g.value=!0,A.value=U.HAS_STARTED};return(te,K)=>(a(),c("div",st,[J(tt),i("div",at,[J(e(Ke),{class:"w-full md:w-1/2"},{default:q(()=>[e(A)===e(U).WAITING_FOR_OPPONENTS?(a(),H(X,{key:0,class:"w-full",variant:"tertiary",disabled:!le.value,onClick:oe},{default:q(()=>[G(N(B.value?`Waiting for ${B.value} more player${B.value!==1?"s":""}`:e(u)?e(L).length>1?"Everyone is here? Start the game!":"Waiting for more players to join":"Waiting for the game to start"),1)]),_:1},8,["disabled"])):e(R)!==e(r)?(a(),H(X,{key:1,class:"w-full",variant:"tertiary",disabled:""},{default:q(()=>[G(N(`${e(o).getPlayerDisplayName(e(R))}'s turn`),1)]),_:1})):e(w)||e(h)?(a(),H(X,{key:2,class:"w-full",variant:"neutral",disabled:""},{default:q(()=>[G(N(e(w)?"Rolling...":"Loading..."),1)]),_:1})):e(d)?(a(),H(X,{key:3,class:"w-full",variant:"tertiary",disabled:e(w),onClick:e(t).roll},{default:q(()=>[G(N(e(R)!==e(r)?`${e(o).getPlayerDisplayName(e(R))}'s turn`:"Roll"),1)]),_:1},8,["disabled","onClick"])):e(b)?(a(),H(X,{key:4,class:"w-full",variant:"neutral",onClick:e(t).passTurn},{default:q(()=>[G(N(e(x)===e(y).SOLO||e(A)===e(U).CAN_CHOOSE_REMAINING?"Reroll":e(A)===e(U).HAS_CHOSEN_SCORE?"Next player":"Pass turn"),1)]),_:1},8,["onClick"])):Q("",!0)]),_:1}),i("div",ot,[(a(!0),c(j,null,ce(e(C),S=>(a(),H(Vl,{key:S.id,dice:S},null,8,["dice"]))),128))])]),J(Xl),e(x)===e(y).MULTIPLAYER?(a(),H(al,{key:0,chats:e(Y)??[],onSendChat:K[0]||(K[0]=S=>Y.value=[...e(Y)??[],S])},null,8,["chats"])):Q("",!0)]))}}),it={class:"flex flex-col gap-3"},rt={class:"text-center text-xl md:text-3xl font-bold"},ut={key:0,class:"text-green-500"},ct={key:1,class:"text-purple-500"},dt={key:2,class:"text-red-500"},vt={key:3,class:"text-blue-500 font-bold"},_t={key:4,class:"text-blue-500 font-bold"},ft={key:5,class:"text-blue-500 font-bold"},ht={class:"text-center text-md md:text-lg"},gt=M({__name:"YahtzeeResults",setup(s){const t=de(),{myPlayerId:o,finalScore:u,opponents:x}=z(t),{currentHighscorePosition:A,hasImprovedHighscorePosition:h,hasImprovedPersonalBest:r}=ll(ee.YAHTZEE_RAINBOW);return(R,C)=>{var Y,k,g,w,d;return a(),c("div",it,[i("div",rt,[((Y=e(u)[e(o)])==null?void 0:Y.winStatus)==="win"?(a(),c("p",ut," You won with "+N((k=e(u)[e(o)])==null?void 0:k.total)+" points! ",1)):((g=e(u)[e(o)])==null?void 0:g.winStatus)==="tie"?(a(),c("p",ct," You tied with "+N((w=e(u)[e(o)])==null?void 0:w.total)+" points! ",1)):(a(),c("p",dt," You lost with "+N((d=e(u)[e(o)])==null?void 0:d.total)+" points. ",1)),e(h)&&e(A)===1?(a(),c("p",vt," HIGHSCORE! ")):e(h)?(a(),c("p",_t," LEADERBOARD IMPROVEMENT! ")):e(r)?(a(),c("p",ft," PERSONAL BEST! ")):Q("",!0)]),i("div",ht,[(a(!0),c(j,null,ce(e(x),b=>{var L;return a(),c("p",{key:b.userId},N(b.displayName)+" has "+N((L=e(u)[b.userId])==null?void 0:L.total)+" points ",1)}),128))])])}}}),mt={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},pt={class:"flex flex-wrap justify-center gap-3"},yt={key:0,class:"w-full"},kt=M({__name:"Yahtzee",setup(s){const t=de(),o=Te(),{gameId:u,partyName:x,isOwner:A,gameType:h,gameStatus:r,myPlayerId:R,finalScore:C,personalBest:Y}=z(t),{isLoggedIn:k,isOwner:g}=z(o),{start:w,$reset:d,createOnlineGame:b,continueOnlineGame:L,leaveOnlineGame:B,deleteOnlineGame:le,updateYahtzeeHighscore:oe}=t,te=V(!1),K=V(!1),S=()=>{h.value=y.MULTIPLAYER,r.value=$.FINDING_OPPONENT},T=async()=>{u.value&&(A.value?await le():await B()),d()},m=async()=>{u.value&&await B(),d()};return He(()=>{u.value&&L(u.value)}),Qe(async()=>{u.value&&(await B(),d())}),(W,v)=>(a(),H(Xe,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainbow Yahtzee",tags:e(h)===e(y).MULTIPLAYER&&e(x)?[{value:e(x),severity:"danger"}]:void 0,description:e(r)===e($).HAS_NOT_STARTED?e(h)===e(y).SOLO?"Play solo or with a friend.":"Play with a friend.":void 0},{right:q(()=>[i("div",mt,[J(X,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:v[0]||(v[0]=I=>te.value=!0)}),J(il,{"icon-only":"","is-solo":e(h)===e(y).SOLO,"is-owner":e(A),"has-game-started":e(r)>=e($).IS_PLAYING,"is-game-over":e(r)===e($).HAS_FINISHED,onDelete:T},null,8,["is-solo","is-owner","has-game-started","is-game-over"])])]),default:q(()=>{var I;return[i("div",pt,[e(r)===e($).FINDING_OPPONENT?(a(),c("div",yt,[J(ol,{"allow-party":"",onCreateOnlineGame:v[1]||(v[1]=f=>e(b)([{userId:f}])),onContinueOnlineGame:e(L),onCreateParty:v[2]||(v[2]=(f,E)=>e(b)([],f,E)),onJoinParty:e(L)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(r)===e($).IS_PLAYING?(a(),H(nt,{key:1})):e(r)===e($).HAS_FINISHED?(a(),H(gt,{key:2})):Q("",!0)]),J(nl,{"is-viewing-highscores":K.value,"onUpdate:isViewingHighscores":v[3]||(v[3]=f=>K.value=f),"has-solo":e(g),"is-solo":e(h)===e(y).SOLO,hasMultiplayer:"",isMultiplayer:e(h)===e(y).MULTIPLAYER,"is-owner":e(A),"is-main-menu":e(r)===e($).HAS_NOT_STARTED,"has-game-started":e(r)>=e($).IS_PLAYING,"is-game-over":e(r)===e($).HAS_FINISHED,onPlaySolo:e(w),onPlayMultiplayer:S,onRestart:T,onGoBack:m},null,8,["is-viewing-highscores","has-solo","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),K.value?(a(),H(tl,{key:0,"game-id":e(ee).YAHTZEE_RAINBOW},null,8,["game-id"])):Q("",!0),J(sl,{"is-logged-in":e(k),"is-solo":e(h)===e(y).SOLO,"is-game-over":e(r)===e($).HAS_FINISHED,"final-score":((I=e(C)[e(R)])==null?void 0:I.total)??0,"personal-best":e(Y),"redirect-route":e(el).GAMES_YAHTZEE_RAINBOW,onUpdateHighscore:v[4]||(v[4]=f=>e(oe)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),J(rl,{"game-id":e(ee).YAHTZEE_RAINBOW,"is-open":te.value,"onUpdate:isOpen":v[5]||(v[5]=f=>te.value=f)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{kt as default};
