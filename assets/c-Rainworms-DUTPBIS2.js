import{e as T,l as t,m as r,p as o,a6 as He,s as M,c as V,q as h,k as e,as as Le,E as ne,g as De,A as ge,h as we,r as ae,o as Ge,al as Ye,am as Se,n as C,D as g,G as S,t as f,w as P,O as W,R as fe,ae as he,aP as de,f as Me,H as x,V as ze,a4 as Be}from"../bundle.js";import{a as K,_ as E}from"./c-Bubble.vue_vue_type_script_setup_true_lang-BLfz40U2.js";import{u as Fe,H as We}from"./c-useScoreInfo-BX-f5KaG.js";import{u as ie,G as n,a as U,P as i,F as oe,_ as Ve,L as ye}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-jQyu4mMx.js";import{W as re}from"./c-Worm-JshW0EFQ.js";import{_ as je}from"./c-TextField.vue_vue_type_script_setup_true_lang-DeJvJEAf.js";import"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-SwitchField.vue_vue_type_script_setup_true_lang-R6e5xvIM.js";import"./c-SelectField.vue_vue_type_script_setup_true_lang-DIKuGEia.js";import"./c-validation-DokkLKHB.js";const Ue={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ke=["fill"],qe=["fill"],Je=T({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(N){return(a,_)=>(t(),r("svg",Ue,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:a.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ke),o("circle",{cx:"50",cy:"50",r:"10",fill:a.color},null,8,qe)]))}}),Qe={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Xe=["fill"],Ze=["fill"],et=["fill"],tt=T({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(N){return(a,_)=>(t(),r("svg",Qe,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:a.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Xe),o("circle",{cx:"25",cy:"25",r:"10",fill:a.color},null,8,Ze),o("circle",{cx:"75",cy:"75",r:"10",fill:a.color},null,8,et)]))}}),lt={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},st=["fill"],ot=["fill"],at=["fill"],rt=["fill"],nt=T({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(N){return(a,_)=>(t(),r("svg",lt,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:a.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,st),o("circle",{cx:"25",cy:"25",r:"10",fill:a.color},null,8,ot),o("circle",{cx:"50",cy:"50",r:"10",fill:a.color},null,8,at),o("circle",{cx:"75",cy:"75",r:"10",fill:a.color},null,8,rt)]))}}),it={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},ct=["fill"],ut=["fill"],dt=["fill"],pt=["fill"],ft=["fill"],ht=T({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(N){return(a,_)=>(t(),r("svg",it,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:a.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,ct),o("circle",{cx:"25",cy:"25",r:"10",fill:a.color},null,8,ut),o("circle",{cx:"25",cy:"75",r:"10",fill:a.color},null,8,dt),o("circle",{cx:"75",cy:"25",r:"10",fill:a.color},null,8,pt),o("circle",{cx:"75",cy:"75",r:"10",fill:a.color},null,8,ft)]))}}),_t={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},vt=["fill"],mt=["fill"],yt=["fill"],gt=["fill"],wt=["fill"],St=["fill"],bt=T({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(N){return(a,_)=>(t(),r("svg",_t,[o("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:a.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,vt),o("circle",{cx:"25",cy:"25",r:"10",fill:a.color},null,8,mt),o("circle",{cx:"25",cy:"75",r:"10",fill:a.color},null,8,yt),o("circle",{cx:"50",cy:"50",r:"10",fill:a.color},null,8,gt),o("circle",{cx:"75",cy:"25",r:"10",fill:a.color},null,8,wt),o("circle",{cx:"75",cy:"75",r:"10",fill:a.color},null,8,St)]))}}),kt={height:"800px",width:"800px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512.002 512.002","xml:space":"preserve"},Nt=["fill"],Ot=T({__name:"WormDice",props:{color:{},backgroundColor:{}},setup(N){return(a,_)=>(t(),r("svg",kt,[o("rect",{width:"800",height:"800",rx:"10",ry:"10",fill:a.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Nt),_[0]||(_[0]=He(`<path style="fill:#fbb0ad;" d="M458.048,291.389c23.391,0,42.35,18.959,42.35,42.35c0,23.391-18.959,42.35-42.35,42.35h-25.131\r
	v-84.699H458.048L458.048,291.389z"></path><path style="fill:#fbcdcb;" d="M432.917,291.389v84.699h-15.814c-28.554,0-54.811-10.025-75.44-26.732l0.035-0.035l55.31-64.209\r
	c5.708,3.956,12.635,6.277,20.096,6.277H432.917L432.917,291.389z"></path><path style="fill:#fbb0ad;" d="M397.007,285.112l-55.31,64.209l-0.035,0.035c-22.08-17.868-37.72-43.394-42.825-72.505l0.081-0.012\r
	l81.706-37.001c0.719,5.291,1.091,10.686,1.091,16.162C381.714,268.056,387.771,278.719,397.007,285.112z"></path><path style="fill:#fbcdcb;" d="M380.624,239.839l-81.706,37.001l-0.081,0.012c-1.195-6.776-1.822-13.737-1.822-20.85\r
	c0-9.468-3.736-18.088-9.816-24.447l0.035-0.035l54.428-64.963C362.442,185.156,376.714,210.879,380.624,239.839z"></path><path style="fill:#fbb0ad;" d="M287.199,231.554c-6.451-6.741-15.524-10.941-25.572-10.941h-2.75v-84.699h2.75\r
	c30.712,0,58.779,11.591,80.035,30.643l-54.428,64.963L287.199,231.554z"></path><path style="fill:#fbcdcb;" d="M258.877,135.914v84.699h-2.854c-10.025,0-19.086,4.189-25.526,10.895l-54.451-64.998\r
	c21.244-19.017,49.288-30.596,79.977-30.596C256.023,135.914,258.877,135.914,258.877,135.914z"></path><path style="fill:#fbb0ad;" d="M176.046,166.51l54.451,64.998c-6.103,6.358-9.862,15.002-9.862,24.493\r
	c0,7.101-0.615,14.074-1.81,20.838l-81.798-37.036C140.949,210.832,155.243,185.098,176.046,166.51z"></path><path style="fill:#fbcdcb;" d="M137.027,239.804l81.798,37.036c-5.105,29.088-20.722,54.602-42.779,72.47l-55.333-64.232\r
	c9.189-6.405,15.223-17.044,15.223-29.076C135.936,250.513,136.307,245.106,137.027,239.804z"></path><path style="fill:#fbb0ad;" d="M120.714,285.077l55.333,64.232c-20.641,16.743-46.909,26.779-75.498,26.779H53.952\r
	c-23.391,0-42.35-18.959-42.35-42.35s18.959-42.35,42.35-42.35h46.596C108.032,291.389,114.993,289.057,120.714,285.077z"></path><path d="M458.048,387.691h-40.946c-30.012,0-59.397-10.412-82.742-29.32c-24.803-20.071-41.478-48.312-46.951-79.516\r
	c-1.325-7.506-1.997-15.198-1.997-22.854c0-6.144-2.344-11.977-6.6-16.428c-4.539-4.743-10.644-7.357-17.187-7.357h-5.604\r
	c-6.526,0-12.619,2.602-17.157,7.328c-4.274,4.452-6.629,10.297-6.629,16.457c0,7.706-0.668,15.397-1.986,22.857\r
	c-5.471,31.17-22.128,59.397-46.901,79.466c-23.346,18.934-52.754,29.366-82.802,29.366H53.952C24.203,387.691,0,363.489,0,333.739\r
	s24.203-53.952,53.952-53.952h46.596c4.877,0,9.558-1.464,13.538-4.233c6.414-4.47,10.247-11.781,10.247-19.553\r
	c0-5.934,0.403-11.909,1.196-17.758c4.186-30.924,19.381-59.474,42.786-80.385c24.165-21.631,55.315-33.547,87.708-33.547h5.604\r
	c32.426,0,63.6,11.934,87.778,33.606c23.371,20.916,38.544,49.462,42.716,80.37c0.792,5.823,1.194,11.787,1.194,17.715\r
	c0,7.793,3.847,15.109,10.294,19.57c3.981,2.759,8.643,4.215,13.492,4.215h40.946c6.407,0,11.603,5.196,11.603,11.603\r
	c0,6.407-5.196,11.603-11.603,11.603h-40.946c-9.595,0-18.83-2.884-26.705-8.343c-12.7-8.79-20.286-23.24-20.286-38.647\r
	c0-4.885-0.331-9.796-0.985-14.598c-3.436-25.451-15.937-48.957-35.202-66.201c-19.922-17.855-45.596-27.685-72.298-27.685h-5.604\r
	c-26.672,0-52.328,9.816-72.239,27.639c-19.295,17.239-31.814,40.748-35.26,66.206c-0.654,4.821-0.986,9.745-0.986,14.64\r
	c0,15.355-7.549,29.784-20.191,38.595c-7.896,5.494-17.16,8.396-26.8,8.396H53.952c-16.954,0-30.747,13.793-30.747,30.747\r
	s13.793,30.747,30.747,30.747h46.596c25.101,0,48.681-8.364,68.19-24.188c20.426-16.549,34.156-39.796,38.66-65.464\r
	c1.086-6.146,1.636-12.477,1.636-18.832c0-12.178,4.65-23.731,13.095-32.528c8.956-9.327,20.994-14.463,33.896-14.463h5.604\r
	c12.935,0,24.993,5.157,33.955,14.522c8.407,8.792,13.036,20.323,13.036,32.469c0,6.308,0.555,12.645,1.645,18.833\r
	c4.506,25.695,18.25,48.953,38.699,65.501c19.228,15.574,43.427,24.148,68.141,24.148h40.946c16.954,0,30.747-13.793,30.747-30.747\r
	c0-6.407,5.196-11.603,11.603-11.603c6.407,0,11.603,5.196,11.603,11.603C512,363.489,487.797,387.691,458.048,387.691z"></path><path d="M489.883,317.405c-3.22,0-6.423-1.332-8.717-3.94c-0.543-0.616-1.116-1.219-1.706-1.793\r
	c-4.595-4.467-4.7-11.813-0.233-16.407c4.466-4.595,11.813-4.699,16.407-0.233c1.022,0.992,2.015,2.039,2.956,3.107\r
	c4.231,4.812,3.762,12.143-1.049,16.375C495.337,316.452,492.604,317.405,489.883,317.405z"></path><path d="M70.521,351.143c-6.408,0-11.603-5.196-11.603-11.603v-10.825c0-6.407,5.194-11.603,11.603-11.603\r
	c6.408,0,11.603,5.196,11.603,11.603v10.825C82.123,345.947,76.929,351.143,70.521,351.143z"></path><path d="M176.046,360.918c-3.651,0-6.909-1.685-9.036-4.321l-55.023-63.874c-4.002-4.557-3.834-11.507,0.516-15.857\r
	c4.531-4.53,11.871-4.538,16.404-0.006c0.203,0.204,0.41,0.426,0.598,0.644l55.333,64.232c1.813,2.105,2.811,4.793,2.811,7.572\r
	C187.649,355.716,182.455,360.918,176.046,360.918z"></path><path d="M218.818,288.446c-1.6,0-3.226-0.333-4.779-1.037l-81.798-37.036c-5.837-2.642-8.427-9.518-5.784-15.355\r
	c2.644-5.836,9.518-8.428,15.355-5.783l81.798,37.036c5.837,2.642,8.427,9.518,5.784,15.355\r
	C227.455,285.909,223.234,288.446,218.818,288.446z"></path><path d="M258.879,232.216c-6.408,0-11.603-5.196-11.603-11.603v-84.699c0-6.407,5.194-11.603,11.603-11.603\r
	c6.407,0,11.603,5.196,11.603,11.603v84.699C270.481,227.02,265.286,232.216,258.879,232.216z"></path><path d="M230.503,243.119c-3.152,0-6.291-1.277-8.58-3.795l-0.012-0.013c-0.106-0.116-0.209-0.233-0.309-0.354l-54.451-64.998\r
	c-4.115-4.911-3.469-12.23,1.443-16.346c4.911-4.114,12.229-3.469,16.345,1.443l54.416,64.955c4.019,4.747,3.59,11.868-1.049,16.084\r
	C236.084,242.121,233.288,243.119,230.503,243.119z"></path><path d="M341.692,360.924c-2.681,0-5.375-0.925-7.566-2.812c-4.856-4.182-5.4-11.507-1.218-16.363l55.239-64.129\r
	c3.9-4.62,10.779-5.516,15.73-1.895c5.171,3.784,6.313,11.02,2.529,16.191c-0.181,0.248-0.407,0.535-0.607,0.767l-55.31,64.209\r
	C348.193,359.557,344.953,360.924,341.692,360.924z"></path><path d="M298.925,288.446c-4.416,0-8.636-2.535-10.576-6.82c-2.643-5.837-0.055-12.712,5.783-15.355l81.706-37.001\r
	c0.224-0.102,0.453-0.196,0.683-0.283c5.996-2.265,12.736,0.738,15.002,6.732c2.224,5.884-0.601,12.426-6.374,14.81l-81.443,36.881\r
	C302.152,288.113,300.525,288.444,298.925,288.446z"></path><path d="M287.228,243.122c-2.63,0-5.273-0.889-7.445-2.709c-4.911-4.115-5.558-11.433-1.442-16.345l54.384-64.911\r
	c3.934-4.761,10.98-5.64,15.952-1.88c5.111,3.865,6.14,11.119,2.275,16.23c-0.117,0.154-0.272,0.352-0.397,0.5l-54.428,64.963\r
	C293.834,241.71,290.542,243.122,287.228,243.122z"></path><path d="M432.918,387.691c-6.407,0-11.603-5.196-11.603-11.603v-84.699c0-6.407,5.196-11.603,11.603-11.603\r
	c6.407,0,11.603,5.196,11.603,11.603v84.699C444.52,382.495,439.325,387.691,432.918,387.691z"></path>`,20))]))}}),xt=T({__name:"Dice",props:{dice:{}},setup(N){const a=N,_=ie(),{gameStatus:z,hasAlreadyChosen:$,canPlay:I}=M(_),{selectDice:k}=_,B=V(()=>$.value(a.dice.value)),R={1:Je,2:tt,3:nt,4:ht,5:bt,6:Ot};return(v,s)=>(t(),r("div",{class:ne(["cursor-pointer",{"animate-spin":v.dice.isRolling}])},[(t(),h(Le(R[v.dice.value]),{color:"black",backgroundColor:v.dice.selected?e(I)()?"#2563eb":"#e11d48":B.value?"gray":e(z)===e(n).HAS_LOST?"red":"white",width:"40",height:"40",onClick:s[0]||(s[0]=m=>e(k)(v.dice))},null,8,["backgroundColor"]))],2))}}),Et={class:"mt-1"},Ct={key:0,class:"text-neutral-400"},Pt={class:"mt-1"},At={key:0,class:"text-neutral-400"},Tt=T({__name:"FindOpponent",emits:["click"],setup(N,{emit:a}){const _=De(),z=ge(),$=we(),I=ie(),{routeLoading:k,routeLoadingId:B}=M(_),{onlineUsers:R,publicUsers:v}=M(z),{firebaseUser:s}=M($),{onlineGames:m,onlineGamesLoading:H}=M(I),{collections:O,fetchOnlineGames:L,continueOnlineGame:D}=I,q=ae(null),y=d=>v.value.find(u=>u.id===d),ee=V(()=>{var u;const d=(u=s.value)==null?void 0:u.uid;return m.value.filter(c=>c.creatorId===d||c.opponentId===d)}),J=V(()=>R.value.filter(d=>{var u;return d.id!==((u=s.value)==null?void 0:u.uid)&&!!X(d.id)})),te=V(()=>R.value.filter(d=>!J.value.includes(d))),X=d=>ee.value.find(u=>u.creatorId===d||u.opponentId===d),le=d=>{const u=X(d);u?D(u.id):F("click",d)};Ge(async()=>{await L(),q.value=Ye(O.onlineGames,d=>{for(const u of d.docChanges())if(u.type==="added"){const c=u.doc.data();m.value=[...m.value.filter(G=>G.id!==c.id),c]}else u.type==="removed"&&(m.value=m.value.filter(c=>c.id!==u.doc.id));d.docs&&L()})}),Se(()=>{var d;(d=q.value)==null||d.call(q)});const F=a;return(d,u)=>(t(),r(P,null,[C(K,{class:"my-5 flex flex-wrap gap-3 gap-y-1 !px-1 !py-2 !rounded-primary"},{default:g(()=>[o("p",Et,[u[0]||(u[0]=S(" Choose opponent: ")),te.value.length?f("",!0):(t(),r("span",Ct," none "))]),(t(!0),r(P,null,W(te.value,c=>{var G,j;return t(),r(P,{key:c.id},[y(c.id)?(t(),h(K,{key:0,class:ne(["w-fit h-fit !py-0 !p-3 bg-opacity-25",[{"!ps-1":y(c.id).avatar},e(H)||c.id===((G=e(s))==null?void 0:G.uid)?"bg-neutral-500":"bg-green-500"]]),title:y(c.id).displayName,"title-props":{class:"!text-sm mt-2"},avatar:y(c.id).avatar,"avatar-props":{class:["mt-1 h-7 w-7",{"animate-spin":e(k)===e(fe).USER_DETAILS&&e(B)===y(c.id).id}]},clickable:!e(H)&&c.id!==((j=e(s))==null?void 0:j.uid),onClick:se=>le(c.id)},null,8,["class","title","avatar","avatar-props","clickable","onClick"])):f("",!0)],64)}),128))]),_:1}),J.value.length?(t(),h(K,{key:0,class:"my-5 flex flex-wrap gap-3 gap-y-1 !px-1 !py-2 !rounded-primary"},{default:g(()=>[o("p",Pt,[u[1]||(u[1]=S(" Active games: ")),J.value.length?f("",!0):(t(),r("span",At," none "))]),(t(!0),r(P,null,W(J.value,c=>{var G,j;return t(),r(P,{key:c.id},[y(c.id)?(t(),h(K,{key:0,class:ne(["w-fit h-fit !py-0 !p-3 bg-opacity-25",[{"!ps-1":y(c.id).avatar},e(H)||c.id===((G=e(s))==null?void 0:G.uid)?"bg-neutral-500":"bg-purple-500 bg-opacity-50"]]),title:y(c.id).displayName,"title-props":{class:"!text-sm mt-2"},avatar:y(c.id).avatar,"avatar-props":{class:["mt-1 h-7 w-7",{"animate-spin":e(k)===e(fe).USER_DETAILS&&e(B)===y(c.id).id}]},clickable:!e(H)&&c.id!==((j=e(s))==null?void 0:j.uid),onClick:se=>le(c.id)},null,8,["class","title","avatar","avatar-props","clickable","onClick"])):f("",!0)],64)}),128))]),_:1})):f("",!0)],64))}}),w=12,pe=T({__name:"Tile",props:{tile:{},selectable:{type:Boolean},stealable:{type:Boolean},owner:{}},setup(N){const a=N,_=ie(),{selectedDiceTotal:z,canPlay:$,hasWorm:I,gameStatus:k,activePlayer:B}=M(_),{selectTile:R}=_,v=[[{x:0,y:0}],[{x:-w,y:0},{x:w+3,y:0}],[{x:0,y:w},{x:-w,y:-(w/2)},{x:w+3,y:-(w/2)}],[{x:-w,y:w},{x:w+3,y:w},{x:-w,y:-w},{x:w+3,y:-w}]],s=V(()=>(a.selectable||a.stealable)&&a.owner!==B.value&&(k.value===n.HAS_THROWN_DICES||k.value===n.HAS_CHOSEN_DICES)&&I.value&&(a.stealable?z.value===a.tile.displayValue:z.value>=a.tile.displayValue)),m=V(()=>s.value?$.value()?"bg-primary-600 cursor-pointer":"bg-secondary-600 cursor-pointer":$.value()?"bg-primary-400":"bg-secondary-400"),H=()=>{$.value()&&s.value&&R(a.tile,a.stealable)};return(O,L)=>(t(),h(K,{class:ne(["relative z-10 !p-3 !rounded-primary flex justify-center w-[60px] h-[100px] border border-white",m.value]),title:`${O.tile.displayValue}`,"title-props":{class:"text-xl"},clickable:s.value,onClick:H},{default:g(()=>[(t(!0),r(P,null,W(O.tile.value,D=>(t(),h(re,{class:"absolute",style:he({left:`${15+v[O.tile.value-1][D-1].x}px`,bottom:`${15+v[O.tile.value-1][D-1].y}px`}),width:"25",height:"25"},null,8,["style"]))),256))]),_:1},8,["class","title","clickable"]))}}),$t={class:"flex justify-center"},It={key:0,class:"w-full flex flex-wrap gap-3 justify-center"},Rt={key:0,class:"w-full mb-5"},Ht={key:1,class:"w-full flex flex-wrap gap-3 justify-center"},Lt={key:0,class:"text-red-400"},Dt={class:"grid grid-cols-4 sm:grid-cols-8 justify-center gap-3 mt-2 md:mt-5 lg:mt-0"},Gt={class:"grid grid-cols-6 justify-center gap-3 mt-2 md:mt-5"},Yt={class:"flex flex-col text-center"},Mt={class:"text-sm text-nowrap"},zt={class:"relative flex justify-center"},Bt={class:"min-h-[25vh] col-span-4 flex justify-center text-center"},Ft={class:"w-fit grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-1 sm:gap-2"},Wt={class:"flex flex-col text-center"},Vt={class:"font-bold"},jt={class:"text-sm text-nowrap"},Ut={class:"relative flex justify-center"},Kt={key:2,class:"text-center text-xl md:text-3xl font-bold"},qt={key:0,class:"text-purple-500"},Jt={key:1,class:"text-green-500"},Qt={key:2,class:"text-red-500"},Xt={key:3,class:"text-blue-500 font-bold"},Zt={key:4,class:"text-blue-500 font-bold"},el={key:5,class:"text-blue-500 font-bold"},tl={key:6,class:"flex justify-around"},ll={class:"mt-5 flex flex-wrap gap-3 justify-center"},sl={key:0,class:"w-full mb-10 flex flex-wrap items-center justify-center"},ol={key:0,class:"md:ms-10 flex flex-col gap-3"},al={class:"flex gap-2"},rl={class:"font-bold"},nl={key:3,class:"flex flex-wrap gap-3 mt-3 justify-center"},yl=T({__name:"Rainworms",setup(N){const a=Me(),_=ie(),z=we(),$=ge(),{onlineGameId:I,onlineGameChat:k,onlineGameOpponentName:B,isOnlineGameOwner:R,gameType:v,gameStatus:s,gameStatusActivator:m,loseStatus:H,finishStatus:O,activePlayer:L,dices:D,tiles:q,score:y,canSelectAnyTile:ee,canPlay:J,hasWorm:te,selectedDiceTotal:X,isRolling:le,totalScore:F,personalBest:d}=M(_),{firebaseUser:u,isLoggedIn:c}=M(z),{combinedUsers:G}=M($),{currentHighscorePosition:j,hasImprovedHighscorePosition:se,hasImprovedPersonalBest:be}=Fe(de.RAINWORMS),{$reset:_e,start:ke,startOnlineGame:Ne,leaveOnlineGame:ve,deleteOnlineGame:Oe,roll:xe,passTurn:Ee,loseTurn:Ce,updateRainwormsHighscore:Pe}=_,ce=ae(!1),Y=ae(!1),Z=ae(""),b=V(()=>v.value===U.SOLO?"Robot":B.value),Ae=V(()=>{if(le.value)return"Rolling...";switch(s.value){case n.HAS_THROWN_DICES:switch(L.value){case i.OPPONENT:return`${b.value} is thinking...`;case i.PLAYER:return ee.value(X.value)?"Pick a type of dice or choose a tile":"Pick a type of dice"}case n.HAS_CHOSEN_DICES:switch(L.value){case i.OPPONENT:return`${b.value} has decided`;case i.PLAYER:return ee.value(X.value)?D.value.some(Q=>!Q.selected)?"Choose a tile or roll again":"Choose a tile":D.value.some(Q=>!Q.selected)?"Roll again":(Ce(),`Nothing to choose from. Pass turn to ${b.value}`)}case n.HAS_CHOSEN_TILE:switch(L.value){case i.OPPONENT:return m.value===i.PLAYER?`${b.value}'s turn`:`${b.value} chose a tile`;case i.PLAYER:return m.value===i.PLAYER?"You chose a tile":"Your turn"}case n.HAS_LOST:switch(L.value){case i.OPPONENT:return m.value===i.PLAYER?`${b.value}'s turn`:"Your turn";case i.PLAYER:return m.value===i.PLAYER?H.value===ye.HAS_LOST_TILE?`You lost a tile. Pass turn to ${b.value}`:`You busted. Pass turn to ${b.value}`:H.value===ye.HAS_LOST_TILE?`${b.value} lost a tile. Click to roll`:`${b.value} busted. Click to roll`}default:return v.value===U.ONLINE&&L.value===i.OPPONENT?`${b.value}'s turn`:"Roll"}}),Te=()=>{Y.value=!1,ke()},$e=()=>{s.value===n.HAS_LOST&&m.value===i.PLAYER?Ee(!0):xe()},me=async()=>{Y.value=!1,I.value&&(R.value?await Oe():await ve()),_e()},Ie=()=>{if(u.value&&Z.value){const Q={userId:u.value.uid,message:Z.value};k.value=[...k.value??[],Q],Z.value=""}};return Se(async()=>{I.value&&(await ve(),_e())}),(Q,l)=>(t(),h(K,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainworms",description:e(s)!==e(n).HAS_LOST||e(m)!==e(i).PLAYER?`Play against ${e(v)===e(U).SOLO&&e(s)!==e(n).FINDING_OPPONENT?"a robot":e(s)===e(n).FINDING_OPPONENT?"a player":b.value}. Collect as many worms as possible!`:void 0},{right:g(()=>[C(E,{class:"border-none h-fit",type:"neutral",icon:"pi pi-cog",onClick:l[0]||(l[0]=ue=>ce.value=!0)})]),default:g(()=>{var ue;return[o("div",$t,[e(s)===e(n).HAS_NOT_STARTED?(t(),r("div",It,[e(v)===e(U).SOLO?(t(),r("div",Rt,l[10]||(l[10]=[o("p",{class:"text-neutral-400"},[o("b",null,"Warning"),S(": robot prefers stealing over scoring!")],-1)]))):f("",!0),C(E,{class:"w-full md:w-1/2",onClick:Te},{default:g(()=>l[11]||(l[11]=[S(" Play against Robot ")])),_:1}),e(c)?(t(),h(E,{key:1,class:"w-full md:w-1/2",type:"purple",onClick:l[1]||(l[1]=p=>s.value=e(n).FINDING_OPPONENT)},{default:g(()=>l[12]||(l[12]=[S(" Play Online ")])),_:1})):f("",!0)])):e(s)!==e(n).FINDING_OPPONENT&&e(s)!==e(n).HAS_FINISHED?(t(),r("div",Ht,[e(s)===e(n).HAS_LOST&&e(m)===e(i).PLAYER?(t(),r("p",Lt,x(e(te)?"Remember, to survive you must roll a dice value that hasn't already been collected.":"To stay in the game, you must collect at least one worm."),1)):f("",!0),C(E,{class:"w-full md:w-1/2",type:"tertiary",disabled:!e(J)()||e(s)===e(n).HAS_THROWN_DICES||e(s)===e(n).HAS_CHOSEN_DICES&&e(D).every(p=>p.selected)||e(s)===e(n).HAS_CHOSEN_TILE&&e(m)===e(i).PLAYER,onClick:$e},{default:g(()=>[S(x(Ae.value),1)]),_:1},8,["disabled"]),o("div",Dt,[(t(!0),r(P,null,W(e(D),p=>(t(),h(xt,{dice:p},null,8,["dice"]))),256))]),o("div",Gt,[o("div",Yt,[l[13]||(l[13]=o("p",{class:"font-bold"},"You:",-1)),o("p",Mt,x(e(F)(e(i).PLAYER))+" worms",1),o("div",zt,[e(y)[e(i).PLAYER].length?(t(!0),r(P,{key:0},W(e(y)[e(i).PLAYER],(p,A)=>(t(),r("div",{class:"absolute mt-3",style:he({top:`${7*A}px`})},[C(pe,{tile:p,stealable:A===e(y)[e(i).PLAYER].length-1,owner:e(i).PLAYER},null,8,["tile","stealable","owner"])],4))),256)):f("",!0)])]),o("div",Bt,[o("div",Ft,[(t(!0),r(P,null,W(e(q),p=>(t(),h(pe,{tile:p,selectable:""},null,8,["tile"]))),256))])]),o("div",Wt,[o("p",Vt,x(b.value)+":",1),o("p",jt,x(e(F)(e(i).OPPONENT))+" worms",1),o("div",Ut,[e(y)[e(i).OPPONENT].length?(t(!0),r(P,{key:0},W(e(y)[e(i).OPPONENT],(p,A)=>(t(),r("div",{class:"absolute mt-3",style:he({top:`${7*A}px`})},[C(pe,{tile:p,stealable:A===e(y)[e(i).OPPONENT].length-1,owner:e(i).OPPONENT},null,8,["tile","stealable","owner"])],4))),256)):f("",!0)])])])])):f("",!0)]),Y.value&&e(s)===e(n).HAS_NOT_STARTED?(t(),h(We,{key:0,"game-id":e(de).RAINWORMS,unit:"worm"},null,8,["game-id"])):f("",!0),e(s)===e(n).FINDING_OPPONENT?(t(),h(Tt,{key:1,onClick:e(Ne)},null,8,["onClick"])):e(s)===e(n).HAS_FINISHED&&!Y.value?(t(),r("div",Kt,[e(O)===e(oe).WINNER_HIGHEST_SCORE?(t(),r("p",qt," You won with "+x(e(F)(e(i).PLAYER))+" worms! ",1)):e(O)===e(oe).WINNER_HIGHEST_TILE?(t(),r("p",Jt," You won with "+x(e(F)(e(i).PLAYER))+" worms and the highest tile value! ",1)):(t(),r("p",Qt," You lost with a lower score than "+x(e(v)===e(U).SOLO?"the robot":b.value)+". ",1)),e(se)&&e(j)===1?(t(),r("p",Xt," HIGHSCORE! ")):e(se)?(t(),r("p",Zt," LEADERBOARD IMPROVEMENT! ")):e(be)?(t(),r("p",el," PERSONAL BEST! ")):f("",!0),e(O)!==e(oe).LOSER?(t(),r("div",tl,[C(re),C(re),C(re)])):f("",!0)])):f("",!0),o("div",ll,[e(v)===e(U).ONLINE&&e(s)!==e(n).FINDING_OPPONENT&&e(s)!==e(n).HAS_NOT_STARTED?(t(),r("div",sl,[C(je,{name:"chat",class:"w-full md:w-1/2",inputProps:{class:"rounded-primary text-gray-100 !placeholder-gray-400 bg-primary-600 !bg-opacity-20",autocomplete:"off"},placeholder:"chat...",modelValue:Z.value,"onUpdate:modelValue":l[2]||(l[2]=p=>Z.value=p),onKeydown:ze(Ie,["enter"])},null,8,["modelValue"]),(ue=e(k))!=null&&ue.length?(t(),r("div",ol,[(t(!0),r(P,null,W([...e(k)].reverse().filter((p,A)=>A<3),p=>{var A;return t(),r("div",al,[o("p",rl,x(((A=e(G).find(Re=>Re.id===p.userId))==null?void 0:A.displayName)??"Opponent")+":",1),o("p",null,x(p.message),1)])}),256))])):f("",!0)])):f("",!0),e(s)!==e(n).FINDING_OPPONENT&&e(s)!==e(n).HAS_NOT_STARTED&&e(s)!==e(n).HAS_FINISHED?(t(),h(E,{key:1,class:"w-full md:w-1/2",type:"neutral",onClick:me},{default:g(()=>[S(x(e(v)===e(U).ONLINE&&!e(R)?"Go Back":"Restart"),1)]),_:1})):e(s)===e(n).HAS_FINISHED?(t(),h(E,{key:2,class:"w-full md:w-1/2",type:"secondary",onClick:me},{default:g(()=>l[14]||(l[14]=[S(" Play Again ")])),_:1})):f("",!0),!Y.value&&(e(s)===e(n).HAS_NOT_STARTED||e(s)===e(n).HAS_FINISHED)?(t(),h(E,{key:3,class:"w-full md:w-1/2",type:"neutral",onClick:l[3]||(l[3]=p=>Y.value=!0)},{default:g(()=>l[15]||(l[15]=[S(" View Highscores ")])),_:1})):Y.value&&e(s)===e(n).HAS_NOT_STARTED?(t(),h(E,{key:4,class:"w-full md:w-1/2",type:"neutral",onClick:l[4]||(l[4]=p=>Y.value=!1)},{default:g(()=>l[16]||(l[16]=[S(" Go Back ")])),_:1})):e(s)===e(n).FINDING_OPPONENT?(t(),h(E,{key:5,class:"w-full md:w-1/2",type:"neutral",onClick:l[5]||(l[5]=p=>s.value=e(n).HAS_NOT_STARTED)},{default:g(()=>l[17]||(l[17]=[S(" Go Back ")])),_:1})):e(s)===e(n).HAS_FINISHED?(t(),h(E,{key:6,class:"w-full md:w-1/2",type:"neutral",onClick:l[6]||(l[6]=p=>Y.value=!1)},{default:g(()=>l[18]||(l[18]=[S(" View Your Score ")])),_:1})):f("",!0)]),e(s)===e(n).HAS_FINISHED&&e(O)!==e(oe).LOSER?(t(),r("div",nl,[e(u)?e(F)(e(i).PLAYER)&&e(d)<e(F)(e(i).PLAYER)?(t(),h(E,{key:1,class:"w-full md:w-1/2",type:"primary",onClick:l[8]||(l[8]=p=>e(Pe)())},{default:g(()=>l[21]||(l[21]=[S(" Add To Leaderboard ")])),_:1})):f("",!0):(t(),h(K,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:g(()=>[l[19]||(l[19]=S(" Please ")),o("a",{class:"cursor-pointer",onClick:l[7]||(l[7]=p=>e(a).push({name:e(fe).LOGIN,params:{redirect:JSON.stringify({name:e(Be).GAMES_RAINWORMS})}}))}," Login "),l[20]||(l[20]=S(" to add your score to the leaderboard. "))]),_:1}))])):f("",!0),C(Ve,{"game-id":e(de).RAINWORMS,"is-open":ce.value,"onUpdate:isOpen":l[9]||(l[9]=p=>ce.value=p)},null,8,["game-id","is-open"])]}),_:1},8,["description"]))}});export{yl as default};
