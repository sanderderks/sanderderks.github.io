import{_ as b,a as Q}from"./c-Bubble.vue_vue_type_script_setup_true_lang-BCV75Q1e.js";import{_ as X}from"./c-Page.vue_vue_type_script_setup_true_lang-C2f422yB.js";import{e as Z,h as ee,at as te,g as ae,A as le,s as w,r as T,c as i,q as A,D as E,u as se,f as re,l as s,p as t,n as f,k as d,R as k,m as r,H as n,t as o,C as I,au as ne,av as oe,aw as ue,w as $}from"../bundle.js";import{_ as ie}from"./c-PetDialog.vue_vue_type_script_setup_true_lang-B9r3rNaC.js";import{a as de}from"./c-SwitchField.vue_vue_type_script_setup_true_lang-DO60apDL.js";import{_ as pe}from"./c-Countdown.vue_vue_type_script_setup_true_lang-BPe_RTK2.js";import{u as me}from"./c-useCatCalc-BxIgqXJq.js";import{_ as fe}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-DateField.vue_vue_type_script_setup_true_lang-DmSg3HvC.js";import"./c-FileUpload.vue_vue_type_script_setup_true_lang-DujMNBuu.js";import"./c-TextField.vue_vue_type_script_setup_true_lang-RH4jMlrW.js";import"./c-validation-DokkLKHB.js";import"./c-SelectField.vue_vue_type_script_setup_true_lang-CJSXwXGa.js";import"./c-accordiontab.esm-N1e9m9o0.js";const ve={class:"grid grid-cols-6 mb-5 gap-5"},ce={class:"my-5"},we={class:"table-auto text-left"},ge={key:0},ye={key:1},xe={key:2},_e={key:3},be={key:4},ke={key:5},De={key:6},he={key:7},Ce={key:8},Oe={class:"my-5"},Be={key:0,class:"flex flex-wrap md:flex-nowrap gap-3 justify-around my-5 md:mb-0"},Se={class:"ps-5 md:ps-10 flex flex-col gap-3"},Te={class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},Ae={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300"},Ee={class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},Ie={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300 sm:place-self-end"},$e={class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},Pe={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300 sm:place-self-end"},Re={key:0,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},Ve={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300 sm:place-self-end"},Ne={key:1,class:"w-full text-neutral-300"},je={class:"mt-10 flex gap-3"},We=Z({__name:"Pet",setup(qe){var O,B;const P=se(),R=re(),V=ee(),D=te(),N=ae(),j=le(),{pets:W}=w(D),{routeLoading:q}=w(N),{isOwner:F,firebaseUser:Y}=w(V),{publicUsers:L}=w(j),{deletePet:M}=D,g=T(!1),y=T(!1),G=i(()=>P.params.petId),a=i(()=>W.value.find(l=>l.id===G.value)),x=i(()=>{var l;return(l=a.value)!=null&&l.dateOfBirth?(new Date().getTime()-new Date(a.value.dateOfBirth).getTime())/(1e3*60*60*24*365.25):0}),m=i(()=>x.value*12),c=i(()=>x.value*52),h=i(()=>L.value.find(l=>{var e;return l.id===((e=a.value)==null?void 0:e.userId)})),U=i(()=>{var l,e;return((l=a.value)==null?void 0:l.userId)===((e=Y.value)==null?void 0:e.uid)||F.value}),_=i(()=>{var e,u;if(((e=a.value)==null?void 0:e.type)!=="cat"||!((u=a.value)!=null&&u.dateOfBirth))return null;const l=x.value;switch(!0){case l<1:return{value:"kitten",label:"Kitten (0-12 months)"};case(l>=1&&l<3):return{value:"junior",label:"Junior (1-2 years)"};case(l>=3&&l<7):return{value:"adult",label:"Adult (3-6 years)"};case(l>=7&&l<11):return{value:"mature",label:"Mature (7-10 years)"};case(l>=11&&l<15):return{value:"senior",label:"Senior (11-14 years)"};case l>=15:return{value:"geriatric",label:"Geriatric (15+ years)"};default:return null}}),H=i(()=>{var l,e,u;if(!((l=a.value)!=null&&l.dateOfBirth))return null;switch((e=_.value)==null?void 0:e.value){case"kitten":return m.value<=4?"kitten0.4":"kitten1";default:return(u=a.value)!=null&&u.castrated?"castrated":"default"}}),{requiredCaloriesByWeightAndAgeAndSize:z,requiredFoodDry:J}=me("average",((O=a.value)==null?void 0:O.weight)??"",H.value??"default",((B=a.value)==null?void 0:B.gender)??"male","35","default"),C=i(()=>{var u;if(!((u=a.value)!=null&&u.dateOfBirth)||!a.value.dewormingDate)return null;const l=new Date(a.value.dateOfBirth).getTime(),e=1e3*60*60*24*365.25;if(m.value>=6)return new Date(new Date(a.value.dewormingDate).getTime()+e/(a.value.insideCat?2:4));switch(!0){case c.value<3:return new Date(l+e/52*3);case c.value<5:return new Date(l+e/52*5);case c.value<7:return new Date(l+e/52*7);case c.value<9:return new Date(l+e/52*9);case m.value<3:return new Date(l+e/12*3);case m.value<4:return new Date(l+e/12*4);case m.value<5:return new Date(l+e/12*5);case m.value<6:return new Date(l+e/12*6);default:return null}}),K=async l=>{await M(l),R.push({name:k.PET_OVERVIEW})};return(l,e)=>(s(),A(X,null,{content:E(()=>[t("div",ve,[f(b,{class:"col-span-full md:col-span-4 lg:col-span-2",type:"tertiary",route:d(k).PET_OVERVIEW,loading:d(q)===d(k).PET_OVERVIEW,label:"Back to all pets",icon:"pi pi-arrow-up-left"},null,8,["route","loading"])]),a.value?(s(),A(Q,{key:0,class:"!bg-primary-500 !bg-opacity-35 my-5",title:a.value.name,"title-props":{class:"text-3xl ms-5 md:text-5xl"},avatar:a.value.avatar??void 0,"avatar-props":{class:"h-20 w-20 md:h-32 md:w-32"}},{default:E(()=>{var u,S;return[t("div",ce,[t("table",we,[t("tbody",null,[e[14]||(e[14]=t("tr",{class:"thead"},[t("th",{class:"text-xl"},"Details")],-1)),h.value?(s(),r("tr",ge,[e[5]||(e[5]=t("th",null,"Owner:",-1)),t("td",null,n(h.value.displayName),1)])):o("",!0),a.value.dateOfBirth?(s(),r("tr",ye,[e[6]||(e[6]=t("th",null,"Date of birth:",-1)),t("td",null,n(d(I)(a.value.dateOfBirth)),1)])):o("",!0),a.value.gender?(s(),r("tr",xe,[e[7]||(e[7]=t("th",null,"Gender:",-1)),t("td",null,n((u=d(ne).find(({value:p})=>{var v;return p===((v=a.value)==null?void 0:v.gender)}))==null?void 0:u.label),1)])):o("",!0),a.value.type?(s(),r("tr",_e,[e[8]||(e[8]=t("th",null,"Type:",-1)),t("td",null,n((S=d(oe).find(({value:p})=>{var v;return p===((v=a.value)==null?void 0:v.type)}))==null?void 0:S.label),1)])):o("",!0),a.value.breed?(s(),r("tr",be,[e[9]||(e[9]=t("th",null,"Breed:",-1)),t("td",null,n(a.value.breed),1)])):o("",!0),e[15]||(e[15]=t("tr",{class:"thead"},[t("th",{class:"text-xl"},"Health")],-1)),a.value.weight?(s(),r("tr",ke,[e[10]||(e[10]=t("th",null,"Weight:",-1)),t("td",null,n(a.value.weight)+"kg",1)])):o("",!0),typeof a.value.insideCat=="boolean"?(s(),r("tr",De,[e[11]||(e[11]=t("th",null,"Inside Cat:",-1)),t("td",null,n(a.value.insideCat?"Yes":"No"),1)])):o("",!0),a.value.castrated!==void 0?(s(),r("tr",he,[e[12]||(e[12]=t("th",null,"Castrated:",-1)),t("td",null,n(a.value.castrated?"Yes":"No"),1)])):o("",!0),a.value.dewormingDate?(s(),r("tr",Ce,[e[13]||(e[13]=t("th",null,"Last deworming:",-1)),t("td",null,n(d(I)(a.value.dewormingDate)),1)])):o("",!0)])])]),t("div",Oe,[a.value.dateOfBirth?(s(),r("div",Be,[f(pe,{class:"w-full md:w-3/4 text-neutral-300 bg-neutral-900 rounded-secondary",time:new Date(a.value.dateOfBirth).getTime(),direction:"up"},null,8,["time"])])):o("",!0),e[20]||(e[20]=t("p",{class:"mt-5 text-xl font-bold"},"Statistics",-1)),t("div",Se,[_.value?(s(),r($,{key:0},[t("div",Te,[e[16]||(e[16]=t("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Life stage:",-1)),t("p",Ae,n(_.value.label),1)]),t("div",Ee,[e[17]||(e[17]=t("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Required energy per day:",-1)),t("p",Ie,n(d(z).toFixed(1))+" kcal ",1)]),t("div",$e,[e[18]||(e[18]=t("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Required dry food per day:",-1)),t("p",Pe,n(d(J).toFixed(1))+" g ",1)]),C.value?(s(),r("div",Re,[e[19]||(e[19]=t("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Next deworming:",-1)),t("p",Ve,n(d(ue)(C.value)),1)])):o("",!0)],64)):(s(),r("p",Ne," Nothing to show yet. "))])]),U.value?(s(),r($,{key:0},[t("div",je,[f(b,{label:"Edit",outlined:"",onClick:e[0]||(e[0]=p=>g.value=!0)}),f(b,{label:"Delete",type:"danger",outlined:"",onClick:e[1]||(e[1]=p=>y.value=!0)})]),f(ie,{"is-open":g.value,"original-pet":a.value??null,onClose:e[2]||(e[2]=p=>g.value=!1)},null,8,["is-open","original-pet"]),f(de,{"is-open":y.value,title:"Delete Pet",description:"Are you sure you want to delete your pet?","confirm-text":"Confirm","confirm-props":{type:"danger",outlined:!0},onConfirm:e[3]||(e[3]=p=>K(a.value.id)),onCancel:e[4]||(e[4]=p=>y.value=!1)},null,8,["is-open"])],64)):o("",!0)]}),_:1},8,["title","avatar"])):o("",!0)]),_:1}))}}),tt=fe(We,[["__scopeId","data-v-a5acb79f"]]);export{tt as default};
