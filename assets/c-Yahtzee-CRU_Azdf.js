import{d as oe,s as U,w as z,f as N,L as de,g as s,j as t,q as n,m as r,I as d,h as e,k as u,_ as S,A as m,a3 as _,aQ as p,C as F,aR as ve,aS as se,o as me,ax as re,z as X,a as _e,c as ce,l as y,an as fe,E as Se,y as ue,a7 as pe,R as we}from"../bundle.js";import{u as ne,s as ye,P as b,G as l,S as O,_ as Ne}from"./c-Dice.vue_vue_type_script_setup_true_lang-UMm3wgY2.js";import{_ as Oe}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-A-6A6Sts.js";import{u as Ee,H as Te}from"./c-useScoreInfo-BCYDvVMj.js";import{_ as ie}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Ie,a as Ae}from"./c-GameChat.vue_vue_type_script_setup_true_lang-ByfsnxNw.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-BGsOqr_m.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-DjHGpPgu.js";const He={class:"h-10"},he={class:"w-1/2 md:w-1/3"},ke={key:0},ge={key:1,class:"!ps-1 md:ps-1"},De={key:2},Re={key:0},xe={key:1},Ge={key:2},Pe=oe({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(Z){const H=Z,D=ne(),{gameType:A,gameStatus:i,activePlayer:C,reroll:T}=U(D),{selectScore:R,getScore:h,getActualValue:I}=D,o=z(!1),$=ye[H.row],x=N(()=>h(H.row)),k=N(()=>h(H.row,b.OPPONENT)),c=N(()=>I(H.row,H.hasValue)),g=N(()=>c.value===!1?"X":c.value);return de(()=>c.value,()=>{o.value=!0,setTimeout(()=>{o.value=!1})}),(B,L)=>(t(),s("tr",He,[n("th",he,d(e($).title),1),x.value?(t(),s("td",ke,d(x.value.value===!1?"X":x.value.value),1)):e(T)>=0&&!o.value?(t(),s("td",ge,[u(S,{class:"size-8",variant:c.value===!1||c.value===0?"neutral":void 0,onClick:L[0]||(L[0]=j=>e(R)(B.row,c.value))},{default:m(()=>[_(d(g.value),1)]),_:1},8,["variant"])])):(t(),s("td",De)),e(A)===e(p).ONLINE?(t(),s(F,{key:3},[k.value?(t(),s("td",Re,d(k.value.value===!1?"X":k.value.value),1)):e(C)===e(b).OPPONENT&&e(i)!==e(l).HAS_STARTED?(t(),s("td",xe,[u(S,{class:"size-8",variant:c.value===!1||c.value===0?"neutral":"danger"},{default:m(()=>[_(d(g.value),1)]),_:1},8,["variant"])])):(t(),s("td",Ge))],64)):r("",!0)]))}}),E=ie(Pe,[["__scopeId","data-v-6b1a7992"]]),Ce={key:0,class:"text-white"},$e={key:0},Le={key:0},Fe={key:0},be={key:0,class:"h-12 md:h-auto text-red-500"},Be={key:0},Ve={class:"h-12 md:h-auto text-pink-500"},Ye={key:0,class:"text-purple-500 font-bold"},Ue={key:1,class:"text-red-500 font-bold"},ze={key:2,class:"text-green-500 font-bold"},je={key:0},Me=oe({__name:"Scoreboard",setup(Z){const H=ne(),D=ve(),{gameType:A,gameStatus:i,bonus:C,hasOfValue:T,hasThreeOfAKind:R,hasFourOfAKind:h,hasFullHouse:I,hasSmallStraight:o,hasLargeStraight:$,hasYahtzee:x,diceTotal:k,scoreTotalOf:c,finalScore:g,finalScoreOpponent:B}=U(H),{onlineGameOpponentName:L}=U(D),{currentHighscorePosition:j,hasImprovedHighscorePosition:M,hasImprovedPersonalBest:K}=Ee(se.YAHTZEE),G=z(),V=z(!1),q=N(()=>T.value(1)),J=N(()=>T.value(2)),Y=N(()=>T.value(3)),Q=N(()=>T.value(4)),W=N(()=>T.value(5)),ee=N(()=>T.value(6)),P=N(()=>c.value("top")),w=N(()=>c.value("top",b.OPPONENT)),ae=N(()=>c.value("bottom")),te=N(()=>c.value("bottom",b.OPPONENT));return me(()=>{G.value=setInterval(()=>{V.value=!V.value},500)}),re(()=>{clearInterval(G.value)}),(le,f)=>(t(),s("table",{class:X(["w-full mt-5 text-sm md:text-base text-left",e(i)===e(l).HAS_FINISHED?"text-neutral-500":"text-white",e(i)===e(l).HAS_NOT_STARTED?V.value?"even":"odd":void 0])},[e(A)===e(p).ONLINE?(t(),s("thead",Ce,[n("tr",null,[f[0]||(f[0]=n("th",null,null,-1)),f[1]||(f[1]=n("th",null,"You",-1)),n("th",null,d(e(L)),1)])])):r("",!0),n("tbody",null,[u(E,{row:e(O).ONES,"has-value":q.value},null,8,["row","has-value"]),u(E,{row:e(O).TWOS,"has-value":J.value},null,8,["row","has-value"]),u(E,{row:e(O).THREES,"has-value":Y.value},null,8,["row","has-value"]),u(E,{row:e(O).FOURS,"has-value":Q.value},null,8,["row","has-value"]),u(E,{row:e(O).FIVES,"has-value":W.value},null,8,["row","has-value"]),u(E,{row:e(O).SIXES,"has-value":ee.value},null,8,["row","has-value"]),n("tr",{class:X(["h-12 md:h-auto",e(i)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[f[2]||(f[2]=n("th",null,"TOP",-1)),n("td",null,d(e(i)>=e(l).HAS_STARTED?P.value:""),1),e(A)===e(p).ONLINE?(t(),s("td",$e,d(e(i)>=e(l).HAS_STARTED?w.value:""),1)):r("",!0)],2),n("tr",{class:X(["h-12 md:h-auto",e(i)===e(l).HAS_FINISHED?P.value>=63?"text-yellow-500":"text-white":"text-neutral-500"])},[f[3]||(f[3]=n("th",null,"BONUS",-1)),n("td",null,d(P.value>=63?35:e(i)===e(l).HAS_FINISHED?"X":""),1),e(A)===e(p).ONLINE?(t(),s("td",Le,d(w.value>=63?35:e(i)===e(l).HAS_FINISHED?"X":""),1)):r("",!0)],2),u(E,{row:e(O).THREE_OF_A_KIND,"has-value":e(R)},null,8,["row","has-value"]),u(E,{row:e(O).FOUR_OF_A_KIND,"has-value":e(h)},null,8,["row","has-value"]),u(E,{row:e(O).FULL_HOUSE,"has-value":e(I)},null,8,["row","has-value"]),u(E,{row:e(O).SMALL_STRAIGHT,"has-value":e(o)},null,8,["row","has-value"]),u(E,{row:e(O).LARGE_STRAIGHT,"has-value":e($)},null,8,["row","has-value"]),u(E,{row:e(O).YAHTZEE,"has-value":e(x)},null,8,["row","has-value"]),u(E,{row:e(O).CHANCE,"has-value":e(k)},null,8,["row","has-value"]),n("tr",{class:X(["h-12 md:h-auto",e(i)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[f[4]||(f[4]=n("th",null,"BOTTOM",-1)),n("td",null,d(e(i)>=e(l).HAS_STARTED?ae.value:""),1),e(A)===e(p).ONLINE?(t(),s("td",Fe,d(e(i)>=e(l).HAS_STARTED?te.value:""),1)):r("",!0)],2),e(i)===e(l).HAS_FINISHED&&e(g)?(t(),s(F,{key:0},[e(C)?(t(),s("tr",be,[f[5]||(f[5]=n("th",null,"YAHTZEE BONUS",-1)),n("td",null,d(e(C)),1),e(A)===e(p).ONLINE?(t(),s("td",Be)):r("",!0)])):r("",!0),n("tr",Ve,[f[6]||(f[6]=n("th",null,"TOTAL",-1)),n("td",null,[_(d(e(g))+" ",1),e(M)&&e(j)===1?(t(),s("span",Ye," HIGHSCORE! ")):e(M)?(t(),s("span",Ue," LEADERBOARD IMPROVEMENT! ")):e(K)?(t(),s("span",ze," PERSONAL BEST! ")):r("",!0)]),e(A)===e(p).ONLINE?(t(),s("td",je,d(e(B)),1)):r("",!0)])],64)):r("",!0)])],2))}}),Xe=ie(Me,[["__scopeId","data-v-aea74a24"]]),Ze={class:"flex flex-wrap justify-center gap-3"},Ke={key:1,class:"w-full"},qe={class:"flex justify-center"},Je={key:2,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},Qe={class:"w-full md:w-1/2 flex justify-center gap-3"},We={class:"w-full md:w-1/2 flex justify-center gap-3"},ea={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},aa={key:3,class:"flex flex-wrap gap-3 mt-3 justify-center"},ma=oe({__name:"Yahtzee",setup(Z){const H=_e(),D=ne(),A=ce(),{onlineGames:i,onlineGamesLoading:C,onlineGameId:T,onlineGameChat:R,isOnlineGameOwner:h,gameType:I,gameStatus:o,activePlayer:$,canRoll:x,canReroll:k,dices:c,finalScore:g,personalBest:B,onlineGameOpponentName:L}=U(D),{firebaseUser:j}=U(A),{collections:M,start:K,$reset:G,fetchOnlineGames:V,createOnlineGame:q,continueOnlineGame:J,leaveOnlineGame:Y,deleteOnlineGame:Q,roll:W,updateYahtzeeHighscore:ee}=D,P=z(!1),w=z(!1),ae=()=>{w.value=!1,G()},te=()=>{w.value=!1,I.value=p.SOLO,K()},le=async()=>{T.value&&await Y(),G()},f=async()=>{w.value=!1,T.value&&(h.value?await Q():await Y()),G()};return re(async()=>{T.value&&(await Y(),G())}),(ta,a)=>(t(),y(ue,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:e(I)===e(p).SOLO?e(o)===e(l).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:m(()=>[u(S,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:a[0]||(a[0]=v=>P.value=!0)})]),default:m(()=>[n("div",Ze,[e(o)===e(l).HAS_NOT_STARTED?(t(),s(F,{key:0},[u(S,{class:"w-full md:w-1/2",onClick:te},{default:m(()=>a[11]||(a[11]=[_(" Play Solo ")])),_:1,__:[11]}),u(S,{class:"w-full md:w-1/2",variant:"purple",onClick:a[1]||(a[1]=()=>{o.value=e(l).FINDING_OPPONENT,I.value=e(p).ONLINE})},{default:m(()=>a[12]||(a[12]=[_(" Play Online ")])),_:1,__:[12]}),e(o)===e(l).HAS_NOT_STARTED&&!w.value?(t(),y(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:a[2]||(a[2]=v=>w.value=!0)},{default:m(()=>a[13]||(a[13]=[_(" View Highscores ")])),_:1,__:[13]})):e(o)===e(l).HAS_NOT_STARTED?(t(),y(S,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[3]||(a[3]=v=>w.value=!1)},{default:m(()=>a[14]||(a[14]=[_(" Go Back ")])),_:1,__:[14]})):r("",!0)],64)):e(o)===e(l).FINDING_OPPONENT?(t(),s("div",Ke,[u(Ie,{modelValue:e(i),"onUpdate:modelValue":a[4]||(a[4]=v=>fe(i)?i.value=v:null),collection:e(M).onlineGames,"online-games-loading":e(C),"fetch-online-games":e(V),onCreateOnlineGame:e(q),onContinueOnlineGame:e(J)},null,8,["modelValue","collection","online-games-loading","fetch-online-games","onCreateOnlineGame","onContinueOnlineGame"]),n("div",qe,[u(S,{class:"w-full md:w-1/2",variant:"neutral",onClick:le},{default:m(()=>a[15]||(a[15]=[_(" Go Back ")])),_:1,__:[15]})])])):e(o)!==e(l).HAS_FINISHED?(t(),s("div",Je,[n("div",Qe,[e(I)===e(p).ONLINE||e(x)||e(k)?(t(),y(S,{key:0,class:"w-full",variant:"tertiary",disabled:e($)!==e(b).PLAYER||e(o)===e(l).HAS_CHOSEN_DICES||e(c).every(v=>v.selected),onClick:e(W)},{default:m(()=>[_(d(e($)===e(b).OPPONENT?`${e(L)}'s turn`:e(k)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):r("",!0)]),n("div",We,[(t(!0),s(F,null,Se(e(c),v=>(t(),y(Ne,{key:v.id,dice:v},null,8,["dice"]))),128))])])):r("",!0)]),w.value?(t(),y(Te,{key:0,"game-id":e(se).YAHTZEE},null,8,["game-id"])):!w.value&&e(o)!==e(l).FINDING_OPPONENT?(t(),y(Xe,{key:1})):r("",!0),e(I)===e(p).ONLINE&&e(o)>=e(l).HAS_STARTED?(t(),y(Ae,{key:2,chats:e(R)??[],onSendChat:a[5]||(a[5]=v=>R.value=[...e(R)??[],v])},null,8,["chats"])):r("",!0),n("div",ea,[e(o)>=e(l).HAS_STARTED&&e(o)<=e(l).HAS_FINISHED?(t(),s(F,{key:0},[e(I)===e(p).SOLO?(t(),y(S,{key:0,class:"w-full md:w-1/2",variant:e(o)===e(l).HAS_FINISHED?"secondary":"neutral",onClick:ae},{default:m(()=>[_(d(e(o)===e(l).HAS_FINISHED?"Play Again":"Restart"),1)]),_:1},8,["variant"])):e(I)===e(p).ONLINE?(t(),s(F,{key:1},[u(S,{class:"w-full md:w-1/2",variant:e(o)===e(l).HAS_FINISHED||!e(h)?"neutral":"danger",onClick:f},{default:m(()=>[_(d(e(o)===e(l).HAS_FINISHED?"Play Again":e(h)?"Restart":"Go Back"),1)]),_:1},8,["variant"]),e(h)&&e(o)!==e(l).HAS_FINISHED?(t(),y(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:le},{default:m(()=>a[16]||(a[16]=[_(" Go Back ")])),_:1,__:[16]})):r("",!0)],64)):r("",!0)],64)):r("",!0),e(o)===e(l).HAS_FINISHED&&!w.value?(t(),y(S,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[6]||(a[6]=v=>w.value=!0)},{default:m(()=>a[17]||(a[17]=[_(" View Highscores ")])),_:1,__:[17]})):e(o)===e(l).HAS_FINISHED?(t(),y(S,{key:2,class:"w-full md:w-1/2",variant:"neutral",onClick:a[7]||(a[7]=v=>w.value=!1)},{default:m(()=>a[18]||(a[18]=[_(" View Your Score ")])),_:1,__:[18]})):r("",!0)]),e(o)===e(l).HAS_FINISHED?(t(),s("div",aa,[e(j)?e(I)===e(p).SOLO&&e(g)&&e(B)<e(g)?(t(),y(S,{key:1,class:"w-full md:w-1/2",variant:"primary",onClick:a[9]||(a[9]=v=>e(ee)())},{default:m(()=>a[21]||(a[21]=[_(" Add To Leaderboard ")])),_:1,__:[21]})):r("",!0):(t(),y(ue,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:m(()=>[a[19]||(a[19]=_(" Please ")),n("a",{class:"cursor-pointer",onClick:a[8]||(a[8]=v=>e(H).push({name:e(we).LOGIN,params:{redirect:JSON.stringify({name:e(pe).GAMES_YAHTZEE})}}))}," Login "),a[20]||(a[20]=_(" to add your score to the leaderboard. "))]),_:1,__:[19,20]}))])):r("",!0),u(Oe,{"game-id":e(se).YAHTZEE,"is-open":P.value,"onUpdate:isOpen":a[10]||(a[10]=v=>P.value=v)},null,8,["game-id","is-open"])]),_:1},8,["description"]))}});export{ma as default};
