import{aS as Ye,aT as Le,c as Re,aU as ze,aQ as He,s as Z,aV as Ze,aW as ke,aR as te,v as U,o as Ce,K as ie,a8 as be,m as L,aX as Ve,aY as Ue,aZ as ve,a_ as Je,ap as Ee,a$ as Ke,b0 as qe,d as B,g as s,h as o,q as r,x as j,k as D,b1 as Qe,f as e,z as b,C as X,G as w,l as P,a0 as G,_ as ee,y as J,j as W,M as Xe,aw as el,w as ll,a6 as tl}from"../bundle.js";import{u as sl,H as al,_ as ol}from"./c-useScoreInfo-D9zv1RWr.js";import{a as nl,_ as rl}from"./c-GameChat.vue_vue_type_script_setup_true_lang-BoYgKTz7.js";import{_ as il,a as cl}from"./c-GameActions.vue_vue_type_script_setup_true_lang-BiMrBWnS.js";import{_ as ul}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-Bqm1JFVv.js";import{_ as dl}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-ByNG_u7v.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-BV-3iJDN.js";var M=(l=>(l[l.Purple=0]="Purple",l[l.Blue=1]="Blue",l[l.Yellow=2]="Yellow",l[l.Orange=3]="Orange",l[l.Red=4]="Red",l))(M||{}),C=(l=>(l[l.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",l[l.FINDING_OPPONENT=1]="FINDING_OPPONENT",l[l.IS_PLAYING=2]="IS_PLAYING",l[l.HAS_FINISHED=3]="HAS_FINISHED",l))(C||{}),z=(l=>(l[l.WAITING_FOR_OPPONENTS=0]="WAITING_FOR_OPPONENTS",l[l.HAS_STARTED=1]="HAS_STARTED",l[l.HAS_THROWN_DICES=2]="HAS_THROWN_DICES",l[l.HAS_CHOSEN_SCORE=3]="HAS_CHOSEN_SCORE",l[l.CAN_CHOOSE_REMAINING=4]="CAN_CHOOSE_REMAINING",l[l.HAS_CHOSEN_REMAINING=5]="HAS_CHOSEN_REMAINING",l))(z||{});const oe=Ye("yahtzeeRainbowStore",()=>{const l=Le(),g=Re(),u=ze(),d=He(),{personalBest:N,highscorePosition:R}=Z(u),{firebaseUser:a}=Z(g),{games:S,gamesLoading:y,gameId:H,creatorId:x,players:i,opponents:v,partyName:c,maxPlayers:p,isLocked:T,chat:F,isOwner:K}=Z(d),{setPreviousHighscores:q,updateHighscores:ne,sortHighscores:le}=u,Q={onlineGames:Ze(l,ke.GAME_DATA,te.YAHTZEE_RAINBOW,ke.ONLINE_GAMES)},V=U(0),h=U(1),E=U(!1),m=U("soloPlayer"),O=U(m.value),I=U(fe()),A=be({}),k=be({}),se=L(()=>I.value.some(t=>t.isRolling)),$=L(()=>I.value.filter(t=>t.color===null)),_e=L(()=>!!(O.value===m.value&&$.value.length&&!E.value&&h.value===1)),he=L(()=>t=>!!(O.value===t&&!se.value&&I.value.some(f=>f.color===null)&&!E.value&&[4,2].includes(h.value))),ge=L(()=>O.value===m.value&&!se.value&&!E.value),Te=L(()=>(t,f)=>{if(O.value!==t)return[];const n=[],_=I.value.find(Y=>Y.color===f);return $.value.length===2?(n.push($.value[0].value+$.value[1].value),_&&(n.push($.value[0].value+_.value),n.push($.value[1].value+_.value))):$.value.length===1&&_&&n.push($.value[0].value+_.value),n}),Pe=L(()=>(t,f,n)=>{var _;return!!((_=A[t])!=null&&_[f].find(Y=>Y.row===n))});Ce(()=>{u.$init(te.YAHTZEE_RAINBOW)}),ie(V,t=>{t===3&&(K.value&&(i.value.forEach(f=>{je(f.userId)}),Fe(),we()),ve(qe))}),ie(k,()=>{Oe()}),ie([V,h,O,se,()=>i.value.length],()=>{we()},{deep:!0}),ie(i,()=>{h.value===0&&p.value&&i.value.length===p.value&&(T.value=!0,h.value=1)});const ue=()=>{d.$reset(),V.value=0,h.value=1,E.value=!1,m.value="soloPlayer",O.value=m.value,I.value=fe(),Object.keys(A).forEach(t=>{delete A[t],delete k[t]}),q()},De=(t,f=null,n=null)=>{a.value&&(t=[{userId:a.value.uid,isOnline:!0},...t],V.value=2,h.value=n?0:1,m.value=a.value.uid,O.value=m.value,t.forEach(_=>{A[_.userId]=Ae(),k[_.userId]=null}),d.$init(te.YAHTZEE_RAINBOW,me,ye,ue),d.createGame(t,f,n))},Ge=t=>{a.value&&(m.value=a.value.uid,d.$init(te.YAHTZEE_RAINBOW,me,ye,ue),d.continueGame(t))},me=()=>(i.value.forEach(t=>{Object.keys(A).includes(t.userId)||(A[t.userId]=Ae(),k[t.userId]=null)}),{gameStatus:V.value,yahtzeeStatus:h.value,activePlayerId:O.value,dices:I.value,score:A,finalScore:k}),ye=t=>{var n;!((n=a.value)!=null&&n.uid)||O.value===m.value||(V.value=t.gameStatus,h.value=t.yahtzeeStatus,O.value=t.activePlayerId,I.value=t.dices,Object.assign(A,t.score),Object.assign(k,t.finalScore))},we=()=>{!a.value||O.value!==m.value&&!E.value||d.pushState()},Ie=async()=>{for(;se.value;)await new Promise(t=>setTimeout(t,u.diceRollSpeed*1e3));return!0},Se=()=>{const t=new Set;for(const f of Object.values(A))for(const[n,_]of Object.entries(f))_.some(Y=>Y.row===10)&&t.add(Number(n));return t},de=()=>fe().filter(t=>t.color===null||!Se().has(t.color)),xe=async()=>{if(!_e.value)return;const t=u.diceRollSpeed*1e3;I.value.forEach(f=>{f.isRolling=!0,setTimeout(()=>{f.value=Ve(6),f.isRolling=!1},Ue(t,t/3))}),await Ie(),h.value=2,ve(Je)},Be=(t,f,n)=>{if(he.value){if(A[m.value][t].push({row:f}),$.value.length===2&&$.value[0].value+$.value[1].value===n)I.value=I.value.filter(_=>_.color!==null);else{const _=I.value.find(Y=>Y.color===t);if(_){const Y=$.value.find(re=>re.value+_.value===n);Y&&(I.value=I.value.filter(re=>re.id!==_.id&&re.id!==Y.id))}}Se().size===2?V.value=3:(E.value=!0,h.value===4?h.value=5:h.value=3,setTimeout(async()=>{E.value=!1,await Ee(),await pe()},u.diceRollSpeed*1e3)),ve(Ke)}},pe=async()=>{if(ge.value)switch(h.value){case 1:case 2:case 3:{$.value.length>0?h.value=4:(h.value=1,I.value=de()),E.value=!0,O.value=d.getNextPlayerId(O.value),I.value.some(t=>t.color===null)||(I.value=de()),await Ee(),E.value=!1;break}case 4:case 5:{h.value=1,I.value=de(),await xe();break}}},Ne=(t,f)=>Object.values(A[t]).filter(n=>!!n.find(_=>_.row===f)).length,Me=(t,f)=>$e[A[t][f].length]||0,We=(t,f)=>{let n=0;for(let _=0;_<10;_++)Ne(t,_)===f&&(n+=ce[f][_]||0);return n},je=t=>{let f=0;Object.values(A[t]).forEach(n=>{n.length&&(f+=$e[n.length])});for(let n=0;n<10;n++){const _=Ne(t,n);_>=3&&(f+=ce[_][n])}k[t]={total:f}},Fe=()=>{const t=Math.max(...Object.values(k).map(n=>(n==null?void 0:n.total)??0)),f=Object.keys(k).filter(n=>{var _;return((_=k[n])==null?void 0:_.total)===t});i.value.forEach(n=>{f.includes(n.userId)?f.length===1?k[n.userId].winStatus="win":k[n.userId].winStatus="tie":k[n.userId].winStatus="lose"})},Oe=()=>{a!=null&&a.value&&k[m.value]&&ne({gameId:H.value??null,score:k[m.value].total})};return{collections:Q,games:S,gamesLoading:y,gameId:H,creatorId:x,players:i,opponents:v,partyName:c,maxPlayers:p,isLocked:T,chat:F,isOwner:K,gameStatus:V,yahtzeeStatus:h,yahtzeeStatusLoading:E,myPlayerId:m,activePlayerId:O,score:A,finalScore:k,dices:I,whiteDices:$,isRolling:se,canRoll:_e,canSelectScore:he,canSkipTurn:ge,hasSelectedScore:Pe,canChooseOf:Te,personalBest:N,highscorePosition:R,$reset:ue,roll:xe,hasFinishedRolling:Ie,selectScore:Be,passTurn:pe,getColumnTotal:Me,getBonusColumnTotal:We,setPreviousHighscores:q,updateYahtzeeHighscore:Oe,sortHighscores:le,fetchOnlineGames:d.fetchGames,createOnlineGame:De,continueOnlineGame:Ge,leaveOnlineGame:d.leaveGame,deleteOnlineGame:d.deleteGame,getPlayerDisplayName:d.getPlayerDisplayName,getNextPlayerId:d.getNextPlayerId}},{persist:{enabled:!0}}),fe=()=>[{id:1,color:4,value:1,isRolling:!1},{id:2,color:3,value:2,isRolling:!1},{id:3,color:2,value:3,isRolling:!1},{id:4,color:1,value:4,isRolling:!1},{id:5,color:0,value:5,isRolling:!1},{id:6,color:null,value:6,isRolling:!1},{id:7,color:null,value:6,isRolling:!1}],Ae=()=>({0:[],1:[],2:[],3:[],4:[]}),ae={0:[12,10,8,6,4,2,4,6,8,10,12],1:[2,4,6,8,10,12,10,8,6,4,2],2:[12,11,10,9,8,7,6,5,4,3,2],3:[2,3,4,5,6,7,8,9,10,11,12],4:[2,3,4,5,6,7,8,9,10,11,12]},$e={1:1,2:2,3:4,4:7,5:11,6:16,7:22,8:29,9:37,10:46,11:56},ce={3:[2,2,1,1,1,1,1,1,1,2],4:[5,4,4,2,2,3,2,2,4,4],5:[10,8,6,3,4,5,4,3,6,8]},vl={0:"text-purple-500",1:"text-blue-500",2:"text-yellow-500",3:"text-orange-500",4:"text-red-500"},fl={0:"bg-purple-700",1:"bg-blue-700",2:"bg-yellow-700",3:"bg-orange-700",4:"bg-red-700"},_l={0:"fill-purple-500",1:"fill-blue-500",2:"fill-yellow-500",3:"fill-orange-500",4:"fill-red-500"},hl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},gl=["fill"],ml=B({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(l){return(g,u)=>(s(),o("svg",hl,[r("rect",{class:j(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,gl)]))}}),yl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},wl=["fill"],Il=["fill"],Sl=B({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(l){return(g,u)=>(s(),o("svg",yl,[r("rect",{class:j(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,wl),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Il)]))}}),xl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},pl=["fill"],Nl=["fill"],Ol=["fill"],kl=B({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(l){return(g,u)=>(s(),o("svg",xl,[r("rect",{class:j(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,pl),r("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,Nl),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Ol)]))}}),bl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},El=["fill"],Al=["fill"],$l=["fill"],Rl=["fill"],Hl=B({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(l){return(g,u)=>(s(),o("svg",bl,[r("rect",{class:j(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,El),r("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Al),r("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,$l),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Rl)]))}}),Cl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Tl=["fill"],Pl=["fill"],Dl=["fill"],Gl=["fill"],Bl=["fill"],Ml=B({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(l){return(g,u)=>(s(),o("svg",Cl,[r("rect",{class:j(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,Tl),r("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Pl),r("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,Dl),r("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,Gl),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Bl)]))}}),Wl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},jl=["fill"],Fl=["fill"],Yl=["fill"],Ll=["fill"],zl=["fill"],Zl=["fill"],Vl=B({__name:"Dice6",props:{color:{},backgroundColor:{}},setup(l){return(g,u)=>(s(),o("svg",Wl,[r("rect",{class:j(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,jl),r("circle",{cx:"25",cy:"50",r:"10",fill:l.color},null,8,Fl),r("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Yl),r("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,Ll),r("circle",{cx:"75",cy:"50",r:"10",fill:l.color},null,8,zl),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Zl)]))}}),Ul=B({__name:"Dice",props:{dice:{}},setup(l){const g={1:ml,2:Sl,3:kl,4:Hl,5:Ml,6:Vl};return(u,d)=>(s(),o("div",{class:j(["cursor-pointer",{"animate-spin":l.dice.isRolling}])},[(s(),D(Qe(g[l.dice.value]),{color:"black",backgroundColor:l.dice.color!==null?e(_l)[l.dice.color]:"fill-white",width:"40",height:"40"},null,8,["backgroundColor"]))],2))}}),Jl={class:"w-full flex flex-col md:flex-row justify-between gap-3 md:gap-10"},Kl={class:"text-white"},ql={key:0,class:"border-none"},Ql={key:1,class:"text-center",colspan:"3"},Xl={key:0},et={key:0,class:"border-none"},lt={key:0},tt={key:1},st=B({__name:"Scoreboard",setup(l){const g=oe(),{myPlayerId:u,gameStatus:d,canChooseOf:N,canSelectScore:R,score:a,players:S}=Z(g),y=U(!1);return(H,x)=>(s(),o(b,null,[r("div",Jl,[(s(!0),o(b,null,X(e(S),i=>(s(),o("table",{key:i.userId,class:j(["w-full mt-5 text-sm md:text-base text-left",e(d)===e(C).HAS_FINISHED?"text-neutral-500":"text-white"])},[r("thead",Kl,[r("tr",null,[r("th",{class:j(["text-center",i.isOnline?"text-green-400":"text-red-400"]),colspan:"5"},w(i.userId===e(u)?"You":e(g).getPlayerDisplayName(i.userId)),3),y.value?(s(),o("th",ql)):P("",!0),y.value?(s(),o("th",Ql," Bonus ")):P("",!0)])]),e(a)[i.userId]?(s(),o("tbody",Xl,[(s(),o(b,null,X(11,v=>r("tr",{key:v},[(s(!0),o(b,null,X([e(M).Red,e(M).Orange,e(M).Yellow,e(M).Blue,e(M).Purple],c=>(s(),o("td",{key:c,class:j(["relative",[e(vl)[c],{[e(fl)[c]]:e(a)[i.userId][c].length&&v-1<=e(a)[i.userId][c][e(a)[i.userId][c].length-1].row,"opacity-25":e(a)[i.userId][c].length&&v-1<e(a)[i.userId][c][e(a)[i.userId][c].length-1].row&&e(a)[i.userId][c].every(p=>p.row!==v-1)}]])},[e(a)[i.userId][c].length&&v-1<=e(a)[i.userId][c][e(a)[i.userId][c].length-1].row?(s(),o(b,{key:0},[G(w(e(ae)[c][v-1]),1)],64)):e(R)(i.userId)&&e(N)(i.userId,c).includes(e(ae)[c][v-1])?(s(),D(ee,{key:1,class:"size-7 !absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",variant:"neutral",disabled:i.userId!==e(u),onClick:p=>e(g).selectScore(c,v-1,e(ae)[c][v-1])},{default:J(()=>[G(w(e(ae)[c][v-1]),1)]),_:2},1032,["disabled","onClick"])):(s(),o(b,{key:2},[G(w(e(ae)[c][v-1]),1)],64))],2))),128)),y.value?(s(),o("td",et)):P("",!0),y.value&&v<11?(s(!0),o(b,{key:1},X(Object.keys(e(ce)),c=>(s(),o("td",{key:c,class:j({"bg-opacity-75 bg-white text-black font-bold":Object.values(e(a)[i.userId]).flat().filter(p=>p.row===v-1).length===Number(c)})},w(e(ce)[Number(c)][v-1]),3))),128)):P("",!0)])),64)),y.value?(s(),o("tr",lt,[...x[1]||(x[1]=[r("td",{class:"h-6 border-none",colspan:"5"},null,-1)])])):P("",!0),y.value?(s(),o("tr",tt,[(s(!0),o(b,null,X([e(M).Red,e(M).Orange,e(M).Yellow,e(M).Blue,e(M).Purple],v=>(s(),o("td",{key:v},w(e(g).getColumnTotal(i.userId,v)),1))),128)),x[2]||(x[2]=r("td",{class:"border-none"},null,-1)),(s(),o(b,null,X([3,4,5],v=>r("td",{key:v},w(e(g).getBonusColumnTotal(i.userId,v)),1)),64))])):P("",!0)])):P("",!0)],2))),128))]),W(ee,{class:"!w-full",variant:"neutral",icon:y.value?"pi pi-eye-slash":"pi pi-eye",text:"",label:y.value?"Hide scores":"Show scores",onClick:x[0]||(x[0]=i=>y.value=!y.value)},null,8,["icon","label"])],64))}}),at=dl(st,[["__scopeId","data-v-7dfd2de2"]]),ot={class:"w-full flex justify-center"},nt={class:"text-lg"},rt=B({__name:"StatusHeader",setup(l){const g=oe(),{yahtzeeStatus:u,yahtzeeStatusLoading:d,activePlayerId:N,myPlayerId:R,players:a}=Z(g),S=L(()=>{var y;return N.value===R.value?"You":((y=a.value.find(H=>H.userId===N.value))==null?void 0:y.displayName)||"Unknown"});return(y,H)=>(s(),o("div",ot,[r("h3",nt,[e(u)===e(z).HAS_STARTED||e(u)===e(z).HAS_CHOSEN_REMAINING?(s(),o(b,{key:0},[G(w(S.value)+" can now roll the dices. ",1)],64)):e(u)===e(z).HAS_THROWN_DICES?(s(),o(b,{key:1},[G(w(S.value)+" can now choose a score, or pass the turn. ",1)],64)):e(u)===e(z).HAS_CHOSEN_SCORE?(s(),o(b,{key:2},[G(w(S.value)+" chose a score. ",1)],64)):e(u)===e(z).CAN_CHOOSE_REMAINING?(s(),o(b,{key:3},[G(w(S.value)+" can choose from the remaining dices. ",1)],64)):P("",!0)])]))}}),it={class:"w-full flex flex-col gap-3"},ct={class:"w-full flex flex-col md:flex-row gap-5 md:gap-10 justify-center"},ut={class:"w-full md:w-1/2 flex justify-center gap-3"},dt=B({__name:"YahtzeeMainGame",setup(l){const g=oe(),u=He(),{isOwner:d,yahtzeeStatus:N,yahtzeeStatusLoading:R,myPlayerId:a,activePlayerId:S,dices:y,chat:H,maxPlayers:x,isLocked:i,isRolling:v,canRoll:c,canSkipTurn:p}=Z(g),{players:T}=Z(u),F=L(()=>x.value!==null&&x.value>0?x.value-T.value.length:0),K=L(()=>d.value&&T.value.length>1),q=()=>{i.value=!0,N.value=z.HAS_STARTED};return(ne,le)=>(s(),o("div",it,[W(rt),r("div",ct,[W(e(Xe),{class:"w-full md:w-1/2"},{default:J(()=>[e(N)===e(z).WAITING_FOR_OPPONENTS?(s(),D(ee,{key:0,class:"w-full",variant:"tertiary",disabled:!K.value,onClick:q},{default:J(()=>[G(w(F.value?`Waiting for ${F.value} more player${F.value!==1?"s":""}`:e(d)?e(T).length>1?"Everyone is here? Start the game!":"Waiting for more players to join":"Waiting for the game to start"),1)]),_:1},8,["disabled"])):e(S)!==e(a)?(s(),D(ee,{key:1,class:"w-full",variant:"tertiary",disabled:""},{default:J(()=>[G(w(`${e(u).getPlayerDisplayName(e(S))}'s turn`),1)]),_:1})):e(v)||e(R)?(s(),D(ee,{key:2,class:"w-full",variant:"neutral",disabled:""},{default:J(()=>[G(w(e(v)?"Rolling...":"Loading..."),1)]),_:1})):e(c)?(s(),D(ee,{key:3,class:"w-full",variant:"tertiary",disabled:e(v),onClick:e(g).roll},{default:J(()=>[G(w(e(S)!==e(a)?`${e(u).getPlayerDisplayName(e(S))}'s turn`:"Roll"),1)]),_:1},8,["disabled","onClick"])):e(p)?(s(),D(ee,{key:4,class:"w-full",variant:"neutral",onClick:e(g).passTurn},{default:J(()=>[G(w(e(N)===e(z).CAN_CHOOSE_REMAINING?"Reroll":e(N)===e(z).HAS_CHOSEN_SCORE?"Next player":"Pass turn"),1)]),_:1},8,["onClick"])):P("",!0)]),_:1}),r("div",ut,[(s(!0),o(b,null,X(e(y),Q=>(s(),D(Ul,{key:Q.id,dice:Q},null,8,["dice"]))),128))])]),W(at),W(nl,{chats:e(H)??[],onSendChat:le[0]||(le[0]=Q=>H.value=[...e(H)??[],Q])},null,8,["chats"])]))}}),vt={class:"flex flex-col gap-3"},ft={class:"text-center text-xl md:text-3xl font-bold"},_t={key:0,class:"text-green-500"},ht={key:1,class:"text-purple-500"},gt={key:2,class:"text-red-500"},mt={key:3,class:"text-blue-500 font-bold"},yt={key:4,class:"text-blue-500 font-bold"},wt={key:5,class:"text-blue-500 font-bold"},It={class:"text-center text-md md:text-lg"},St=B({__name:"YahtzeeResults",setup(l){const g=oe(),{myPlayerId:u,finalScore:d,opponents:N}=Z(g),{currentHighscorePosition:R,hasImprovedHighscorePosition:a,hasImprovedPersonalBest:S}=sl(te.YAHTZEE_RAINBOW);return(y,H)=>{var x,i,v,c,p;return s(),o("div",vt,[r("div",ft,[((x=e(d)[e(u)])==null?void 0:x.winStatus)==="win"?(s(),o("p",_t," You won with "+w((i=e(d)[e(u)])==null?void 0:i.total)+" points! ",1)):((v=e(d)[e(u)])==null?void 0:v.winStatus)==="tie"?(s(),o("p",ht," You tied with "+w((c=e(d)[e(u)])==null?void 0:c.total)+" points! ",1)):(s(),o("p",gt," You lost with "+w((p=e(d)[e(u)])==null?void 0:p.total)+" points. ",1)),e(a)&&e(R)===1?(s(),o("p",mt," HIGHSCORE! ")):e(a)?(s(),o("p",yt," LEADERBOARD IMPROVEMENT! ")):e(S)?(s(),o("p",wt," PERSONAL BEST! ")):P("",!0)]),r("div",It,[(s(!0),o(b,null,X(e(N),T=>{var F;return s(),o("p",{key:T.userId},w(T.displayName)+" has "+w((F=e(d)[T.userId])==null?void 0:F.total)+" points ",1)}),128))])])}}}),xt={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},pt={class:"flex flex-wrap justify-center gap-3"},Nt={key:0,class:"w-full"},Ct=B({__name:"Yahtzee",setup(l){const g=oe(),u=Re(),{gameId:d,partyName:N,isOwner:R,gameStatus:a,myPlayerId:S,finalScore:y,personalBest:H}=Z(g),{isLoggedIn:x}=Z(u),{$reset:i,createOnlineGame:v,continueOnlineGame:c,leaveOnlineGame:p,deleteOnlineGame:T,updateYahtzeeHighscore:F}=g,K=U(!1),q=U(!1),ne=()=>{a.value=C.FINDING_OPPONENT},le=async()=>{d.value&&(R.value?await T():await p()),i()},Q=async()=>{d.value&&await p(),i()};return Ce(()=>{d.value&&c(d.value)}),el(async()=>{d.value&&(await p(),i())}),(V,h)=>(s(),D(ll,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainbow Yahtzee",tags:e(N)?[{value:e(N),severity:"danger"}]:void 0,description:e(a)===e(C).HAS_NOT_STARTED?"Play with a friend.":void 0},{right:J(()=>[r("div",xt,[W(ee,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:h[0]||(h[0]=E=>K.value=!0)}),W(cl,{"icon-only":"","is-solo":!1,"is-owner":e(R),"has-game-started":e(a)>=e(C).IS_PLAYING,"is-game-over":e(a)===e(C).HAS_FINISHED,onDelete:le},null,8,["is-owner","has-game-started","is-game-over"])])]),default:J(()=>{var E;return[r("div",pt,[e(a)===e(C).FINDING_OPPONENT?(s(),o("div",Nt,[W(rl,{"allow-party":"",onCreateOnlineGame:h[1]||(h[1]=m=>e(v)([{userId:m}])),onContinueOnlineGame:e(c),onCreateParty:h[2]||(h[2]=(m,O)=>e(v)([],m,O)),onJoinParty:e(c)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(a)===e(C).IS_PLAYING?(s(),D(dt,{key:1})):e(a)===e(C).HAS_FINISHED?(s(),D(St,{key:2})):P("",!0)]),W(il,{"is-viewing-highscores":q.value,"onUpdate:isViewingHighscores":h[3]||(h[3]=m=>q.value=m),"has-solo":!1,"is-solo":!1,hasMultiplayer:"",isMultiplayer:"","is-owner":e(R),"is-main-menu":e(a)===e(C).HAS_NOT_STARTED,"has-game-started":e(a)>=e(C).IS_PLAYING,"is-game-over":e(a)===e(C).HAS_FINISHED,onPlayMultiplayer:ne,onRestart:le,onGoBack:Q},null,8,["is-viewing-highscores","is-owner","is-main-menu","has-game-started","is-game-over"]),q.value?(s(),D(al,{key:0,"game-id":e(te).YAHTZEE_RAINBOW},null,8,["game-id"])):P("",!0),W(ol,{"is-logged-in":e(x),"is-solo":!1,"is-game-over":e(a)===e(C).HAS_FINISHED,"final-score":((E=e(y)[e(S)])==null?void 0:E.total)??0,"personal-best":e(H),"redirect-route":e(tl).GAMES_YAHTZEE_RAINBOW,onUpdateHighscore:h[4]||(h[4]=m=>e(F)())},null,8,["is-logged-in","is-game-over","final-score","personal-best","redirect-route"]),W(ul,{"game-id":e(te).YAHTZEE_RAINBOW,"is-open":K.value,"onUpdate:isOpen":h[5]||(h[5]=m=>K.value=m)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{Ct as default};
