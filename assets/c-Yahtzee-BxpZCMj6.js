import{aS as Ue,aT as Je,c as Ce,aU as Ke,aQ as Pe,s as Y,aV as Qe,aW as Re,aR as te,v as M,a8 as Ee,f as V,o as De,K as se,aX as Ge,aY as Xe,aZ as _e,a_ as qe,ap as ge,a$ as el,b0 as ll,d as B,g as a,j as t,p as r,y as L,l as D,b1 as tl,h as e,m as T,H as p,A as x,D as J,k as j,a2 as C,_ as ee,z as K,M as sl,aw as al,x as ol,a6 as nl}from"../bundle.js";import{u as rl,H as il,_ as cl}from"./c-useScoreInfo-5ha8EABe.js";import{a as ul,_ as dl}from"./c-GameChat.vue_vue_type_script_setup_true_lang-DnHPIIpF.js";import{_ as vl,a as fl}from"./c-GameActions.vue_vue_type_script_setup_true_lang-C4Az8Ulu.js";import{_ as _l}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-qX3Y_JFC.js";import{_ as hl}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-DpcigFXf.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CDjfIsRS.js";var F=(l=>(l[l.Purple=0]="Purple",l[l.Blue=1]="Blue",l[l.Yellow=2]="Yellow",l[l.Orange=3]="Orange",l[l.Red=4]="Red",l))(F||{}),P=(l=>(l[l.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",l[l.FINDING_OPPONENT=1]="FINDING_OPPONENT",l[l.IS_PLAYING=2]="IS_PLAYING",l[l.HAS_FINISHED=3]="HAS_FINISHED",l))(P||{}),G=(l=>(l[l.WAITING_FOR_OPPONENTS=0]="WAITING_FOR_OPPONENTS",l[l.CHOSING_WHO_STARTS=1]="CHOSING_WHO_STARTS",l[l.HAS_STARTED=2]="HAS_STARTED",l[l.HAS_THROWN_DICES=3]="HAS_THROWN_DICES",l[l.HAS_CHOSEN_SCORE=4]="HAS_CHOSEN_SCORE",l[l.CAN_CHOOSE_REMAINING=5]="CAN_CHOOSE_REMAINING",l[l.HAS_CHOSEN_REMAINING=6]="HAS_CHOSEN_REMAINING",l))(G||{});const ae=Ue("yahtzeeRainbowStore",()=>{const l=Je(),g=Ce(),d=Ke(),v=Pe(),{personalBest:y,highscorePosition:k}=Y(d),{firebaseUser:n}=Y(g),{games:b,gamesLoading:w,gameId:N,creatorId:I,players:u,opponents:i,partyName:o,maxPlayers:m,isLocked:W,chat:z,isOwner:Q}=Y(v),{setPreviousHighscores:X,updateHighscores:re,sortHighscores:le}=d,q={onlineGames:Qe(l,Re.GAME_DATA,te.YAHTZEE_RAINBOW,Re.ONLINE_GAMES)},U=M(0),h=M(2),E=M(!1),S=M("soloPlayer"),A=M(S.value),ie=M([]),de=M(!1),O=M(he()),H=Ee({}),R=Ee({}),oe=V(()=>O.value.some(s=>s.isRolling)),$=V(()=>O.value.filter(s=>s.color===null)),me=V(()=>!!(A.value===S.value&&$.value.length&&!E.value&&h.value===2)),ye=V(()=>s=>!!(A.value===s&&!oe.value&&O.value.some(f=>f.color===null)&&!E.value&&[5,3].includes(h.value))),we=V(()=>A.value===S.value&&!oe.value&&!E.value),We=V(()=>(s,f)=>{if(A.value!==s)return[];const c=[],_=O.value.find(Z=>Z.color===f);return $.value.length===2?(c.push($.value[0].value+$.value[1].value),_&&(c.push($.value[0].value+_.value),c.push($.value[1].value+_.value))):$.value.length===1&&_&&c.push($.value[0].value+_.value),c}),Me=V(()=>(s,f,c)=>{var _;return!!((_=H[s])!=null&&_[f].find(Z=>Z.row===c))});De(()=>{d.$init(te.YAHTZEE_RAINBOW)}),se(U,s=>{s===3&&(Q.value&&(u.value.forEach(f=>{Ze(f.userId)}),Ve(),pe()),_e(ll))}),se(R,()=>{Ae()}),se([U,h,A,oe,de,()=>u.value.length],()=>{pe()},{deep:!0}),se(u,()=>{h.value===0&&m.value&&u.value.length===m.value&&(W.value=!0,h.value=1)});const ve=()=>{v.$reset(),U.value=0,h.value=2,E.value=!1,S.value="soloPlayer",A.value=S.value,ie.value=[],de.value=!1,O.value=he(),Object.keys(H).forEach(s=>{delete H[s],delete R[s]}),X()},je=(s,f=null,c=null)=>{n.value&&(s=[{userId:n.value.uid,isOnline:!0},...s],U.value=2,h.value=c?0:1,S.value=n.value.uid,A.value=S.value,s.forEach(_=>{H[_.userId]=He(),R[_.userId]=null}),v.$init(te.YAHTZEE_RAINBOW,Ie,Se,ve),v.createGame(s,f,c))},Fe=s=>{n.value&&(S.value=n.value.uid,v.$init(te.YAHTZEE_RAINBOW,Ie,Se,ve),v.continueGame(s))},Ie=()=>(u.value.forEach(s=>{Object.keys(H).includes(s.userId)||(H[s.userId]=He(),R[s.userId]=null)}),{gameStatus:U.value,yahtzeeStatus:h.value,activePlayerId:A.value,playersWhoBattle:ie.value,dices:O.value,score:H,finalScore:R}),Se=s=>{var c;!((c=n.value)!=null&&c.uid)||A.value===S.value||(U.value=s.gameStatus,h.value=s.yahtzeeStatus,A.value=s.activePlayerId,ie.value=s.playersWhoBattle,O.value=s.dices,Object.assign(H,s.score),Object.assign(R,s.finalScore))},pe=()=>{!n.value||A.value!==S.value&&!E.value||v.pushState()},xe=async()=>{for(;oe.value;)await new Promise(s=>setTimeout(s,d.diceRollSpeed*1e3));return!0},Ne=()=>{const s=new Set;for(const f of Object.values(H))for(const[c,_]of Object.entries(f))_.some(Z=>Z.row===10)&&s.add(Number(c));return s},fe=()=>he().filter(s=>s.color===null||!Ne().has(s.color)),Oe=async()=>{if(!me.value)return;const s=d.diceRollSpeed*1e3;O.value.forEach(f=>{f.isRolling=!0,setTimeout(()=>{f.value=Ge(6),f.isRolling=!1},Xe(s,s/3))}),await xe(),h.value=3,_e(qe)},Le=(s,f,c)=>{if(ye.value){if(H[S.value][s].push({row:f}),$.value.length===2&&$.value[0].value+$.value[1].value===c)O.value=O.value.filter(_=>_.color!==null);else{const _=O.value.find(Z=>Z.color===s);if(_){const Z=$.value.find(ce=>ce.value+_.value===c);Z&&(O.value=O.value.filter(ce=>ce.id!==_.id&&ce.id!==Z.id))}}Ne().size===2?U.value=3:(E.value=!0,h.value===5?h.value=6:h.value=4,setTimeout(async()=>{E.value=!1,await ge(),await ke()},d.diceRollSpeed*1e3)),_e(el)}},ke=async()=>{if(we.value)switch(h.value){case 2:case 3:case 4:{$.value.length>0?h.value=5:(h.value=2,O.value=fe()),E.value=!0,A.value=v.getNextPlayerId(A.value),O.value.some(s=>s.color===null)||(O.value=fe()),await ge(),E.value=!1;break}case 5:case 6:{h.value=2,O.value=fe(),await Oe();break}}},be=(s,f)=>Object.values(H[s]).filter(c=>!!c.find(_=>_.row===f)).length,Ye=(s,f)=>$e[H[s][f].length]||0,ze=(s,f)=>{let c=0;for(let _=0;_<10;_++)be(s,_)===f&&(c+=ue[f][_]||0);return c},Ze=s=>{let f=0;Object.values(H[s]).forEach(c=>{c.length&&(f+=$e[c.length])});for(let c=0;c<10;c++){const _=be(s,c);_>=3&&(f+=ue[_][c])}R[s]={total:f}},Ve=()=>{const s=Math.max(...Object.values(R).map(c=>(c==null?void 0:c.total)??0)),f=Object.keys(R).filter(c=>{var _;return((_=R[c])==null?void 0:_.total)===s});u.value.forEach(c=>{f.includes(c.userId)?f.length===1?R[c.userId].winStatus="win":R[c.userId].winStatus="tie":R[c.userId].winStatus="lose"})},Ae=()=>{n!=null&&n.value&&R[S.value]&&re({gameId:N.value??null,score:R[S.value].total})};return{collections:q,games:b,gamesLoading:w,gameId:N,creatorId:I,players:u,opponents:i,partyName:o,maxPlayers:m,isLocked:W,chat:z,isOwner:Q,gameStatus:U,yahtzeeStatus:h,yahtzeeStatusLoading:E,myPlayerId:S,activePlayerId:A,playersWhoBattle:ie,playersWhoBattleIsRolling:de,score:H,finalScore:R,dices:O,whiteDices:$,isRolling:oe,canRoll:me,canSelectScore:ye,canSkipTurn:we,hasSelectedScore:Me,canChooseOf:We,personalBest:y,highscorePosition:k,$reset:ve,roll:Oe,hasFinishedRolling:xe,selectScore:Le,passTurn:ke,getColumnTotal:Ye,getBonusColumnTotal:ze,setPreviousHighscores:X,updateYahtzeeHighscore:Ae,sortHighscores:le,fetchOnlineGames:v.fetchGames,createOnlineGame:je,continueOnlineGame:Fe,leaveOnlineGame:v.leaveGame,deleteOnlineGame:v.deleteGame,getPlayerDisplayName:v.getPlayerDisplayName,getNextPlayerId:v.getNextPlayerId}},{persist:{enabled:!0}}),he=()=>[{id:1,color:4,value:1,isRolling:!1},{id:2,color:3,value:2,isRolling:!1},{id:3,color:2,value:3,isRolling:!1},{id:4,color:1,value:4,isRolling:!1},{id:5,color:0,value:5,isRolling:!1},{id:6,color:null,value:6,isRolling:!1},{id:7,color:null,value:6,isRolling:!1}],He=()=>({0:[],1:[],2:[],3:[],4:[]}),ne={0:[12,10,8,6,4,2,4,6,8,10,12],1:[2,4,6,8,10,12,10,8,6,4,2],2:[12,11,10,9,8,7,6,5,4,3,2],3:[2,3,4,5,6,7,8,9,10,11,12],4:[2,3,4,5,6,7,8,9,10,11,12]},$e={1:1,2:2,3:4,4:7,5:11,6:16,7:22,8:29,9:37,10:46,11:56},ue={3:[2,2,1,1,1,1,1,1,1,2],4:[5,4,4,2,2,3,2,2,4,4],5:[10,8,6,3,4,5,4,3,6,8]},gl={0:"text-purple-500",1:"text-blue-500",2:"text-yellow-500",3:"text-orange-500",4:"text-red-500"},ml={0:"bg-purple-700",1:"bg-blue-700",2:"bg-yellow-700",3:"bg-orange-700",4:"bg-red-700"},yl={0:"fill-purple-500",1:"fill-blue-500",2:"fill-yellow-500",3:"fill-orange-500",4:"fill-red-500"},wl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Il=["fill"],Sl=B({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(l){return(g,d)=>(t(),a("svg",wl,[r("rect",{class:L(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,Il)]))}}),pl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},xl=["fill"],Nl=["fill"],Ol=B({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(l){return(g,d)=>(t(),a("svg",pl,[r("rect",{class:L(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,xl),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Nl)]))}}),kl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},bl=["fill"],Al=["fill"],Rl=["fill"],El=B({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(l){return(g,d)=>(t(),a("svg",kl,[r("rect",{class:L(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,bl),r("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,Al),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Rl)]))}}),Hl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},$l=["fill"],Tl=["fill"],Cl=["fill"],Pl=["fill"],Dl=B({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(l){return(g,d)=>(t(),a("svg",Hl,[r("rect",{class:L(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,$l),r("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Tl),r("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,Cl),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Pl)]))}}),Gl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Bl=["fill"],Wl=["fill"],Ml=["fill"],jl=["fill"],Fl=["fill"],Ll=B({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(l){return(g,d)=>(t(),a("svg",Gl,[r("rect",{class:L(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,Bl),r("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Wl),r("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,Ml),r("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,jl),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Fl)]))}}),Yl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},zl=["fill"],Zl=["fill"],Vl=["fill"],Ul=["fill"],Jl=["fill"],Kl=["fill"],Ql=B({__name:"Dice6",props:{color:{},backgroundColor:{}},setup(l){return(g,d)=>(t(),a("svg",Yl,[r("rect",{class:L(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,zl),r("circle",{cx:"25",cy:"50",r:"10",fill:l.color},null,8,Zl),r("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Vl),r("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,Ul),r("circle",{cx:"75",cy:"50",r:"10",fill:l.color},null,8,Jl),r("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Kl)]))}}),Be=B({__name:"Dice",props:{dice:{}},setup(l){const g={1:Sl,2:Ol,3:El,4:Dl,5:Ll,6:Ql};return(d,v)=>(t(),a("div",{class:L(["cursor-pointer",{"animate-spin":l.dice.isRolling}])},[(t(),D(tl(g[l.dice.value]),{color:"black",backgroundColor:l.dice.color!==null?e(yl)[l.dice.color]:"fill-white",width:"40",height:"40"},null,8,["backgroundColor"]))],2))}}),Xl={class:"flex flex-col justify-center gap-3"},ql={key:0,class:"w-full text-lg text-center"},et={class:"w-full flex justify-center"},lt={class:"flex justify-center"},Te=2e3,tt=B({__name:"ChooseWhoStarts",setup(l){const g=ae(),{isOwner:d,players:v,playersWhoBattle:y,playersWhoBattleIsRolling:k,yahtzeeStatus:n,yahtzeeStatusLoading:b,activePlayerId:w}=Y(g),N=M(null),I=async()=>{k.value=!0,y.value.forEach(i=>{i.dice.isRolling=!0,setTimeout(()=>{i.dice.value=Ge(6),i.dice.isRolling=!1},Te)})},u=async()=>{const i=Math.max(...y.value.map(m=>m.dice.value)),o=y.value.filter(m=>m.dice.value===i);o.length===1?(N.value=o[0].player.displayName,setTimeout(async()=>{b.value=!0,w.value=o[0].player.userId,n.value=G.HAS_STARTED,await ge(),b.value=!1},Te)):(y.value=o,I())};return se(v,i=>{d.value&&!y.value.length&&i.every(o=>o.isOnline)&&(y.value=v.value.map((o,m)=>({player:o,dice:{id:m,value:1,isRolling:!1,color:null}})),I())},{immediate:!0}),se(y,i=>{d.value&&k.value&&i.every(o=>!o.dice.isRolling)&&(k.value=!1,u())},{deep:!0}),(i,o)=>(t(),a("div",Xl,[N.value?(t(),a("h3",ql,p(N.value)+" will start the game! ",1)):T("",!0),r("div",et,[(t(!0),a(x,null,J(e(y),m=>(t(),a("div",{key:m.player.userId,class:"flex flex-col gap-3"},[r("p",null,p(m.player.displayName),1),r("div",lt,[j(Be,{dice:m.dice},null,8,["dice"])])]))),128))])]))}}),st={class:"w-full flex flex-col md:flex-row justify-between gap-3 md:gap-10"},at={class:"text-white"},ot={key:0,class:"border-none"},nt={key:1,class:"text-center",colspan:"3"},rt={key:0},it={key:0,class:"border-none"},ct={key:0},ut={key:1},dt=B({__name:"Scoreboard",setup(l){const g=ae(),{myPlayerId:d,gameStatus:v,canChooseOf:y,canSelectScore:k,score:n,players:b}=Y(g),w=M(!1);return(N,I)=>(t(),a(x,null,[r("div",st,[(t(!0),a(x,null,J(e(b),u=>(t(),a("table",{key:u.userId,class:L(["w-full mt-5 text-sm md:text-base text-left",e(v)===e(P).HAS_FINISHED?"text-neutral-500":"text-white"])},[r("thead",at,[r("tr",null,[r("th",{class:L(["text-center",u.isOnline?"text-green-400":"text-red-400"]),colspan:"5"},p(u.userId===e(d)?"You":e(g).getPlayerDisplayName(u.userId)),3),w.value?(t(),a("th",ot)):T("",!0),w.value?(t(),a("th",nt," Bonus ")):T("",!0)])]),e(n)[u.userId]?(t(),a("tbody",rt,[(t(),a(x,null,J(11,i=>r("tr",{key:i},[(t(!0),a(x,null,J([e(F).Red,e(F).Orange,e(F).Yellow,e(F).Blue,e(F).Purple],o=>(t(),a("td",{key:o,class:L(["relative",[e(gl)[o],{[e(ml)[o]]:e(n)[u.userId][o].length&&i-1<=e(n)[u.userId][o][e(n)[u.userId][o].length-1].row,"opacity-25":e(n)[u.userId][o].length&&i-1<e(n)[u.userId][o][e(n)[u.userId][o].length-1].row&&e(n)[u.userId][o].every(m=>m.row!==i-1)}]])},[e(n)[u.userId][o].length&&i-1<=e(n)[u.userId][o][e(n)[u.userId][o].length-1].row?(t(),a(x,{key:0},[C(p(e(ne)[o][i-1]),1)],64)):e(k)(u.userId)&&e(y)(u.userId,o).includes(e(ne)[o][i-1])?(t(),D(ee,{key:1,class:"size-7 !absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",variant:"neutral",disabled:u.userId!==e(d),onClick:m=>e(g).selectScore(o,i-1,e(ne)[o][i-1])},{default:K(()=>[C(p(e(ne)[o][i-1]),1)]),_:2},1032,["disabled","onClick"])):(t(),a(x,{key:2},[C(p(e(ne)[o][i-1]),1)],64))],2))),128)),w.value?(t(),a("td",it)):T("",!0),w.value&&i<11?(t(!0),a(x,{key:1},J(Object.keys(e(ue)),o=>(t(),a("td",{key:o,class:L({"bg-opacity-75 bg-white text-black font-bold":Object.values(e(n)[u.userId]).flat().filter(m=>m.row===i-1).length===Number(o)})},p(e(ue)[Number(o)][i-1]),3))),128)):T("",!0)])),64)),w.value?(t(),a("tr",ct,[...I[1]||(I[1]=[r("td",{class:"h-6 border-none",colspan:"5"},null,-1)])])):T("",!0),w.value?(t(),a("tr",ut,[(t(!0),a(x,null,J([e(F).Red,e(F).Orange,e(F).Yellow,e(F).Blue,e(F).Purple],i=>(t(),a("td",{key:i},p(e(g).getColumnTotal(u.userId,i)),1))),128)),I[2]||(I[2]=r("td",{class:"border-none"},null,-1)),(t(),a(x,null,J([3,4,5],i=>r("td",{key:i},p(e(g).getBonusColumnTotal(u.userId,i)),1)),64))])):T("",!0)])):T("",!0)],2))),128))]),j(ee,{class:"!w-full",variant:"neutral",icon:w.value?"pi pi-eye-slash":"pi pi-eye",text:"",label:w.value?"Hide scores":"Show scores",onClick:I[0]||(I[0]=u=>w.value=!w.value)},null,8,["icon","label"])],64))}}),vt=hl(dt,[["__scopeId","data-v-7dfd2de2"]]),ft={class:"w-full flex justify-center"},_t={class:"text-lg"},ht=B({__name:"StatusHeader",setup(l){const g=ae(),{yahtzeeStatus:d,activePlayerId:v,myPlayerId:y,players:k,playersWhoBattle:n,playersWhoBattleIsRolling:b}=Y(g),w=V(()=>{var N;return v.value===y.value?"You":((N=k.value.find(I=>I.userId===v.value))==null?void 0:N.displayName)||"Unknown"});return(N,I)=>(t(),a("div",ft,[r("h3",_t,[e(d)===e(G).CHOSING_WHO_STARTS?(t(),a(x,{key:0},[e(n).length?(t(),a(x,{key:0},[e(b)?(t(),a(x,{key:0},[C(" Determining who starts the game... ")],64)):T("",!0)],64)):(t(),a(x,{key:1},[C(" Waiting for all players to join... ")],64))],64)):e(d)===e(G).HAS_STARTED||e(d)===e(G).HAS_CHOSEN_REMAINING?(t(),a(x,{key:1},[C(p(w.value)+" can now roll the dices. ",1)],64)):e(d)===e(G).HAS_THROWN_DICES?(t(),a(x,{key:2},[C(p(w.value)+" can now choose a score, or pass the turn. ",1)],64)):e(d)===e(G).HAS_CHOSEN_SCORE?(t(),a(x,{key:3},[C(p(w.value)+" chose a score. ",1)],64)):e(d)===e(G).CAN_CHOOSE_REMAINING?(t(),a(x,{key:4},[C(p(w.value)+" can choose from the remaining dices. ",1)],64)):T("",!0)])]))}}),gt={class:"w-full flex flex-col gap-3"},mt={key:1,class:"w-full flex flex-col md:flex-row gap-5 md:gap-10 justify-center"},yt={class:"w-full md:w-1/2 flex justify-center gap-3"},wt=B({__name:"YahtzeeMainGame",setup(l){const g=ae(),d=Pe(),{isOwner:v,yahtzeeStatus:y,yahtzeeStatusLoading:k,myPlayerId:n,activePlayerId:b,dices:w,chat:N,maxPlayers:I,isLocked:u,isRolling:i,canRoll:o,canSkipTurn:m}=Y(g),{players:W}=Y(d),z=V(()=>I.value!==null&&I.value>0?I.value-W.value.length:0),Q=V(()=>v.value&&W.value.length>1),X=()=>{u.value=!0,y.value=G.CHOSING_WHO_STARTS};return(re,le)=>(t(),a("div",gt,[j(ht),e(y)===e(G).CHOSING_WHO_STARTS?(t(),D(tt,{key:0})):(t(),a("div",mt,[j(e(sl),{class:"w-full md:w-1/2"},{default:K(()=>[e(y)===e(G).WAITING_FOR_OPPONENTS?(t(),D(ee,{key:0,class:"w-full",variant:"tertiary",disabled:!Q.value,onClick:X},{default:K(()=>[C(p(z.value?`Waiting for ${z.value} more player${z.value!==1?"s":""}`:e(v)?e(W).length>1?"Everyone is here? Start the game!":"Waiting for more players to join":"Waiting for the game to start"),1)]),_:1},8,["disabled"])):e(b)!==e(n)?(t(),D(ee,{key:1,class:"w-full",variant:"tertiary",disabled:""},{default:K(()=>[C(p(`${e(d).getPlayerDisplayName(e(b))}'s turn`),1)]),_:1})):e(i)||e(k)?(t(),D(ee,{key:2,class:"w-full",variant:"neutral",disabled:""},{default:K(()=>[C(p(e(i)?"Rolling...":"Loading..."),1)]),_:1})):e(o)?(t(),D(ee,{key:3,class:"w-full",variant:"tertiary",disabled:e(i),onClick:e(g).roll},{default:K(()=>[C(p(e(b)!==e(n)?`${e(d).getPlayerDisplayName(e(b))}'s turn`:"Roll"),1)]),_:1},8,["disabled","onClick"])):e(m)?(t(),D(ee,{key:4,class:"w-full",variant:"neutral",onClick:e(g).passTurn},{default:K(()=>[C(p(e(y)===e(G).CAN_CHOOSE_REMAINING?"Reroll":e(y)===e(G).HAS_CHOSEN_SCORE?"Next player":"Pass turn"),1)]),_:1},8,["onClick"])):T("",!0)]),_:1}),r("div",yt,[(t(!0),a(x,null,J(e(w),q=>(t(),D(Be,{key:q.id,dice:q},null,8,["dice"]))),128))])])),j(vt),j(ul,{chats:e(N)??[],onSendChat:le[0]||(le[0]=q=>N.value=[...e(N)??[],q])},null,8,["chats"])]))}}),It={class:"flex flex-col gap-3"},St={class:"text-center text-xl md:text-3xl font-bold"},pt={key:0,class:"text-green-500"},xt={key:1,class:"text-purple-500"},Nt={key:2,class:"text-red-500"},Ot={key:3,class:"text-blue-500 font-bold"},kt={key:4,class:"text-blue-500 font-bold"},bt={key:5,class:"text-blue-500 font-bold"},At={class:"text-center text-md md:text-lg"},Rt=B({__name:"YahtzeeResults",setup(l){const g=ae(),{myPlayerId:d,finalScore:v,opponents:y}=Y(g),{currentHighscorePosition:k,hasImprovedHighscorePosition:n,hasImprovedPersonalBest:b}=rl(te.YAHTZEE_RAINBOW);return(w,N)=>{var I,u,i,o,m;return t(),a("div",It,[r("div",St,[((I=e(v)[e(d)])==null?void 0:I.winStatus)==="win"?(t(),a("p",pt," You won with "+p((u=e(v)[e(d)])==null?void 0:u.total)+" points! ",1)):((i=e(v)[e(d)])==null?void 0:i.winStatus)==="tie"?(t(),a("p",xt," You tied with "+p((o=e(v)[e(d)])==null?void 0:o.total)+" points! ",1)):(t(),a("p",Nt," You lost with "+p((m=e(v)[e(d)])==null?void 0:m.total)+" points. ",1)),e(n)&&e(k)===1?(t(),a("p",Ot," HIGHSCORE! ")):e(n)?(t(),a("p",kt," LEADERBOARD IMPROVEMENT! ")):e(b)?(t(),a("p",bt," PERSONAL BEST! ")):T("",!0)]),r("div",At,[(t(!0),a(x,null,J(e(y),W=>{var z;return t(),a("p",{key:W.userId},p(W.displayName)+" has "+p((z=e(v)[W.userId])==null?void 0:z.total)+" points ",1)}),128))])])}}}),Et={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Ht={class:"flex flex-wrap justify-center gap-3"},$t={key:0,class:"w-full"},jt=B({__name:"Yahtzee",setup(l){const g=ae(),d=Ce(),{gameId:v,partyName:y,isOwner:k,gameStatus:n,myPlayerId:b,finalScore:w,personalBest:N}=Y(g),{isLoggedIn:I}=Y(d),{$reset:u,createOnlineGame:i,continueOnlineGame:o,leaveOnlineGame:m,deleteOnlineGame:W,updateYahtzeeHighscore:z}=g,Q=M(!1),X=M(!1),re=()=>{n.value=P.FINDING_OPPONENT},le=async()=>{v.value&&(k.value?await W():await m()),u()},q=async()=>{v.value&&await m(),u()};return De(()=>{v.value&&o(v.value)}),al(async()=>{v.value&&(await m(),u())}),(U,h)=>(t(),D(ol,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainbow Yahtzee",tags:e(y)?[{value:e(y),severity:"danger"}]:void 0,description:e(n)===e(P).HAS_NOT_STARTED?"Play with a friend.":void 0},{right:K(()=>[r("div",Et,[j(ee,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:h[0]||(h[0]=E=>Q.value=!0)}),j(fl,{"icon-only":"","is-solo":!1,"is-owner":e(k),"has-game-started":e(n)>=e(P).IS_PLAYING,"is-game-over":e(n)===e(P).HAS_FINISHED,onDelete:le},null,8,["is-owner","has-game-started","is-game-over"])])]),default:K(()=>{var E;return[r("div",Ht,[e(n)===e(P).FINDING_OPPONENT?(t(),a("div",$t,[j(dl,{"allow-party":"",onCreateOnlineGame:h[1]||(h[1]=S=>e(i)([{userId:S}])),onContinueOnlineGame:e(o),onCreateParty:h[2]||(h[2]=(S,A)=>e(i)([],S,A)),onJoinParty:e(o)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(n)===e(P).IS_PLAYING?(t(),D(wt,{key:1})):e(n)===e(P).HAS_FINISHED?(t(),D(Rt,{key:2})):T("",!0)]),j(vl,{"is-viewing-highscores":X.value,"onUpdate:isViewingHighscores":h[3]||(h[3]=S=>X.value=S),"has-solo":!1,"is-solo":!1,hasMultiplayer:"",isMultiplayer:"","is-owner":e(k),"is-main-menu":e(n)===e(P).HAS_NOT_STARTED,"has-game-started":e(n)>=e(P).IS_PLAYING,"is-game-over":e(n)===e(P).HAS_FINISHED,onPlayMultiplayer:re,onRestart:le,onGoBack:q},null,8,["is-viewing-highscores","is-owner","is-main-menu","has-game-started","is-game-over"]),X.value?(t(),D(il,{key:0,"game-id":e(te).YAHTZEE_RAINBOW},null,8,["game-id"])):T("",!0),j(cl,{"is-logged-in":e(I),"is-solo":!1,"is-game-over":e(n)===e(P).HAS_FINISHED,"final-score":((E=e(w)[e(b)])==null?void 0:E.total)??0,"personal-best":e(N),"redirect-route":e(nl).GAMES_YAHTZEE_RAINBOW,onUpdateHighscore:h[4]||(h[4]=S=>e(z)())},null,8,["is-logged-in","is-game-over","final-score","personal-best","redirect-route"]),j(_l,{"game-id":e(te).YAHTZEE_RAINBOW,"is-open":Q.value,"onUpdate:isOpen":h[5]||(h[5]=S=>Q.value=S)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{jt as default};
