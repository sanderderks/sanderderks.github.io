import{M as B,bU as d,bW as D,bV as k,cF as H,aC as I,aK as o,u as r,v as l,bi as h,F as v,aV as S,b9 as i,H as f,t as y,c0 as U,q as _}from"../bundle.js";import{_ as N}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"w-full mt-5 text-sm md:text-base text-left"},G={key:1},x=B({__name:"Highscores",props:{gameId:{},unit:{}},setup(n){const c=n,{publicUsers:b}=d(D()),{firebaseUser:m}=d(k()),a=H(),{allGameData:u}=d(a),{fetchGameData:p}=a,g=e=>{var s;return((s=b.value.find(t=>t.id===e))==null?void 0:s.displayName)??"Unknown"};return I(()=>{var e;p(c.gameId,(e=m.value)==null?void 0:e.uid),setInterval(()=>{var s;p(c.gameId,(s=m.value)==null?void 0:s.uid)},1e3*60*5)}),(e,s)=>(o(),r("table",V,[l("tbody",null,[h(u)[e.gameId].gameData.highscores.length?(o(!0),r(v,{key:0},S(h(u)[e.gameId].gameData.highscores,(t,P)=>(o(),r("tr",null,[l("th",null,i(P+1),1),l("th",null,i(g(t.id)),1),l("td",null,[f(i(t.score)+" ",1),e.unit?(o(),r(v,{key:0},[f(i(e.unit),1),t.score!==1?(o(),r(v,{key:0},[f("s")],64)):y("",!0)],64)):y("",!0),t.bonus?(o(),r(v,{key:1},[f("("+i(t.bonus)+" bonus)",1)],64)):y("",!0)]),l("td",null,i(h(U)(t.date)),1)]))),256)):(o(),r("tr",G,s[0]||(s[0]=[l("th",null,"There are no highscores yet.",-1)])))])]))}}),T=N(x,[["__scopeId","data-v-d2ca7d8b"]]),w=n=>{const{allGameData:c,highscorePosition:b,personalBest:m}=d(H()),{firebaseUser:a}=d(k()),u=_(()=>a.value?b.value(n,a.value.uid):null),p=_(()=>{const e=c.value[n].previousHighscorePosition;return u.value&&e?e>u.value:!1}),g=_(()=>{const e=c.value[n].previousPersonalBest;return a.value&&e?e<m.value(n,a.value.uid):!1});return{currentHighscorePosition:u,hasImprovedHighscorePosition:p,hasImprovedPersonalBest:g}};export{T as H,w as u};
