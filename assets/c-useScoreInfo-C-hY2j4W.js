import{M as D,bU as H,c0 as I,cG as P,bW as c,aC as U,aK as o,u as r,v as l,bi as y,F as f,aV as G,b9 as i,H as h,t as _,c1 as N,q as k}from"../bundle.js";import{_ as V}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";const x={class:"w-full mt-5 text-sm md:text-base text-left"},C={key:1},M=D({__name:"Highscores",props:{gameId:{},unit:{}},setup(n){const m=n,g=H(),d=I(),p=P(),{publicUsers:b}=c(d),{firebaseUser:a}=c(g),{allGameData:u}=c(p),{fetchGameData:v}=p,S=e=>{var t;return((t=b.value.find(s=>s.id===e))==null?void 0:t.displayName)??"Unknown"};return U(()=>{var e;v(m.gameId,(e=a.value)==null?void 0:e.uid),setInterval(()=>{var t;v(m.gameId,(t=a.value)==null?void 0:t.uid)},1e3*60*5)}),(e,t)=>(o(),r("table",x,[l("tbody",null,[y(u)[e.gameId].gameData.highscores.length?(o(!0),r(f,{key:0},G(y(u)[e.gameId].gameData.highscores,(s,B)=>(o(),r("tr",null,[l("th",null,i(B+1),1),l("th",null,i(S(s.id)),1),l("td",null,[h(i(s.score)+" ",1),e.unit?(o(),r(f,{key:0},[h(i(e.unit),1),s.score!==1?(o(),r(f,{key:0},[h("s")],64)):_("",!0)],64)):_("",!0),s.bonus?(o(),r(f,{key:1},[h("("+i(s.bonus)+" bonus)",1)],64)):_("",!0)]),l("td",null,i(y(N)(s.date)),1)]))),256)):(o(),r("tr",C,t[0]||(t[0]=[l("th",null,"There are no highscores yet.",-1)])))])]))}}),F=V(M,[["__scopeId","data-v-76103fc6"]]),q=n=>{const m=H(),g=P(),{allGameData:d,highscorePosition:p,personalBest:b}=c(g),{firebaseUser:a}=c(m),u=k(()=>a.value?p.value(n,a.value.uid):null),v=k(()=>{const e=d.value[n].previousHighscorePosition;return u.value&&e?e>u.value:!1}),S=k(()=>{const e=d.value[n].previousPersonalBest;return a.value&&e?e<b.value(n,a.value.uid):!1});return{currentHighscorePosition:u,hasImprovedHighscorePosition:v,hasImprovedPersonalBest:S}};export{F as H,q as u};
