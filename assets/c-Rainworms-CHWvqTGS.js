import{d as E,a as pe,c as ue,s as G,g as n,j as t,l as p,m,h as e,y as se,A as y,a3 as x,q as s,a7 as fe,R as _e,_ as N,ac as he,f as M,z as oe,aT as me,C as I,E as j,ap as le,aU as P,I as H,k as O,aS as V,aV as ve,w as ne,ax as ye,an as ge}from"../bundle.js";import{u as B,P as a,G as d,L as re,F as U,_ as we}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B7V19gF1.js";import{_ as Se}from"./c-FindOpponentDeprecated.vue_vue_type_script_setup_true_lang-CSEzKHji.js";import{_ as ie}from"./c-GameChat.vue_vue_type_script_setup_true_lang-BHc_8rRc.js";import{u as be,H as ce}from"./c-useScoreInfo-BCYDvVMj.js";import{W as q}from"./c-Worm-BfqNfYMo.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CWtsg3qw.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-wWpAWb7S.js";import"./c-_plugin-vue_export-helper-DlAUqK2U.js";const xe={class:"flex flex-wrap gap-3 mt-3 justify-center"},Oe=E({__name:"AddToLeaderboard",setup(g){const l=pe(),u=B(),w=ue(),{totalScore:c,personalBest:i}=G(u),{firebaseUser:f}=G(w),{updateRainwormsHighscore:S}=u;return(_,r)=>(t(),n("div",xe,[e(f)?e(c)(e(a).PLAYER)&&e(i)<e(c)(e(a).PLAYER)?(t(),p(N,{key:1,class:"w-full md:w-1/2",onClick:r[1]||(r[1]=v=>e(S)())},{default:y(()=>r[4]||(r[4]=[x(" Add To Leaderboard ")])),_:1,__:[4]})):m("",!0):(t(),p(se,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:y(()=>[r[2]||(r[2]=x(" Please ")),s("a",{class:"cursor-pointer",onClick:r[0]||(r[0]=v=>e(l).push({name:e(_e).LOGIN,params:{redirect:JSON.stringify({name:e(fe).GAMES_RAINWORMS})}}))}," Login "),r[3]||(r[3]=x(" to add your score to the leaderboard. "))]),_:1,__:[2,3]}))]))}}),ke={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},$e=["fill"],Ce=["fill"],Ne=E({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(g){return(l,u)=>(t(),n("svg",ke,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:l.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,$e),s("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,Ce)]))}}),Ee={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Re=["fill"],Pe=["fill"],Ae=["fill"],Te=E({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(g){return(l,u)=>(t(),n("svg",Ee,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:l.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Re),s("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,Pe),s("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Ae)]))}}),Le={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},He=["fill"],Ie=["fill"],Ge=["fill"],Me=["fill"],Ye=E({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(g){return(l,u)=>(t(),n("svg",Le,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:l.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,He),s("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,Ie),s("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,Ge),s("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Me)]))}}),De={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},ze=["fill"],Be=["fill"],je=["fill"],Ve=["fill"],We=["fill"],Fe=E({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(g){return(l,u)=>(t(),n("svg",De,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:l.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,ze),s("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,Be),s("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,je),s("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,Ve),s("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,We)]))}}),Ue={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},qe=["fill"],Je=["fill"],Ke=["fill"],Qe=["fill"],Xe=["fill"],Ze=["fill"],et=E({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(g){return(l,u)=>(t(),n("svg",Ue,[s("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:l.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,qe),s("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,Je),s("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Ke),s("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,Qe),s("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,Xe),s("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Ze)]))}}),tt={height:"800px",width:"800px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512.002 512.002","xml:space":"preserve"},lt=["fill"],st=E({__name:"WormDice",props:{color:{},backgroundColor:{}},setup(g){return(l,u)=>(t(),n("svg",tt,[s("rect",{width:"800",height:"800",rx:"10",ry:"10",fill:l.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,lt),u[0]||(u[0]=he(`<path style="fill:#fbb0ad;" d="M458.048,291.389c23.391,0,42.35,18.959,42.35,42.35c0,23.391-18.959,42.35-42.35,42.35h-25.131\r
	v-84.699H458.048L458.048,291.389z"></path><path style="fill:#fbcdcb;" d="M432.917,291.389v84.699h-15.814c-28.554,0-54.811-10.025-75.44-26.732l0.035-0.035l55.31-64.209\r
	c5.708,3.956,12.635,6.277,20.096,6.277H432.917L432.917,291.389z"></path><path style="fill:#fbb0ad;" d="M397.007,285.112l-55.31,64.209l-0.035,0.035c-22.08-17.868-37.72-43.394-42.825-72.505l0.081-0.012\r
	l81.706-37.001c0.719,5.291,1.091,10.686,1.091,16.162C381.714,268.056,387.771,278.719,397.007,285.112z"></path><path style="fill:#fbcdcb;" d="M380.624,239.839l-81.706,37.001l-0.081,0.012c-1.195-6.776-1.822-13.737-1.822-20.85\r
	c0-9.468-3.736-18.088-9.816-24.447l0.035-0.035l54.428-64.963C362.442,185.156,376.714,210.879,380.624,239.839z"></path><path style="fill:#fbb0ad;" d="M287.199,231.554c-6.451-6.741-15.524-10.941-25.572-10.941h-2.75v-84.699h2.75\r
	c30.712,0,58.779,11.591,80.035,30.643l-54.428,64.963L287.199,231.554z"></path><path style="fill:#fbcdcb;" d="M258.877,135.914v84.699h-2.854c-10.025,0-19.086,4.189-25.526,10.895l-54.451-64.998\r
	c21.244-19.017,49.288-30.596,79.977-30.596C256.023,135.914,258.877,135.914,258.877,135.914z"></path><path style="fill:#fbb0ad;" d="M176.046,166.51l54.451,64.998c-6.103,6.358-9.862,15.002-9.862,24.493\r
	c0,7.101-0.615,14.074-1.81,20.838l-81.798-37.036C140.949,210.832,155.243,185.098,176.046,166.51z"></path><path style="fill:#fbcdcb;" d="M137.027,239.804l81.798,37.036c-5.105,29.088-20.722,54.602-42.779,72.47l-55.333-64.232\r
	c9.189-6.405,15.223-17.044,15.223-29.076C135.936,250.513,136.307,245.106,137.027,239.804z"></path><path style="fill:#fbb0ad;" d="M120.714,285.077l55.333,64.232c-20.641,16.743-46.909,26.779-75.498,26.779H53.952\r
	c-23.391,0-42.35-18.959-42.35-42.35s18.959-42.35,42.35-42.35h46.596C108.032,291.389,114.993,289.057,120.714,285.077z"></path><path d="M458.048,387.691h-40.946c-30.012,0-59.397-10.412-82.742-29.32c-24.803-20.071-41.478-48.312-46.951-79.516\r
	c-1.325-7.506-1.997-15.198-1.997-22.854c0-6.144-2.344-11.977-6.6-16.428c-4.539-4.743-10.644-7.357-17.187-7.357h-5.604\r
	c-6.526,0-12.619,2.602-17.157,7.328c-4.274,4.452-6.629,10.297-6.629,16.457c0,7.706-0.668,15.397-1.986,22.857\r
	c-5.471,31.17-22.128,59.397-46.901,79.466c-23.346,18.934-52.754,29.366-82.802,29.366H53.952C24.203,387.691,0,363.489,0,333.739\r
	s24.203-53.952,53.952-53.952h46.596c4.877,0,9.558-1.464,13.538-4.233c6.414-4.47,10.247-11.781,10.247-19.553\r
	c0-5.934,0.403-11.909,1.196-17.758c4.186-30.924,19.381-59.474,42.786-80.385c24.165-21.631,55.315-33.547,87.708-33.547h5.604\r
	c32.426,0,63.6,11.934,87.778,33.606c23.371,20.916,38.544,49.462,42.716,80.37c0.792,5.823,1.194,11.787,1.194,17.715\r
	c0,7.793,3.847,15.109,10.294,19.57c3.981,2.759,8.643,4.215,13.492,4.215h40.946c6.407,0,11.603,5.196,11.603,11.603\r
	c0,6.407-5.196,11.603-11.603,11.603h-40.946c-9.595,0-18.83-2.884-26.705-8.343c-12.7-8.79-20.286-23.24-20.286-38.647\r
	c0-4.885-0.331-9.796-0.985-14.598c-3.436-25.451-15.937-48.957-35.202-66.201c-19.922-17.855-45.596-27.685-72.298-27.685h-5.604\r
	c-26.672,0-52.328,9.816-72.239,27.639c-19.295,17.239-31.814,40.748-35.26,66.206c-0.654,4.821-0.986,9.745-0.986,14.64\r
	c0,15.355-7.549,29.784-20.191,38.595c-7.896,5.494-17.16,8.396-26.8,8.396H53.952c-16.954,0-30.747,13.793-30.747,30.747\r
	s13.793,30.747,30.747,30.747h46.596c25.101,0,48.681-8.364,68.19-24.188c20.426-16.549,34.156-39.796,38.66-65.464\r
	c1.086-6.146,1.636-12.477,1.636-18.832c0-12.178,4.65-23.731,13.095-32.528c8.956-9.327,20.994-14.463,33.896-14.463h5.604\r
	c12.935,0,24.993,5.157,33.955,14.522c8.407,8.792,13.036,20.323,13.036,32.469c0,6.308,0.555,12.645,1.645,18.833\r
	c4.506,25.695,18.25,48.953,38.699,65.501c19.228,15.574,43.427,24.148,68.141,24.148h40.946c16.954,0,30.747-13.793,30.747-30.747\r
	c0-6.407,5.196-11.603,11.603-11.603c6.407,0,11.603,5.196,11.603,11.603C512,363.489,487.797,387.691,458.048,387.691z"></path><path d="M489.883,317.405c-3.22,0-6.423-1.332-8.717-3.94c-0.543-0.616-1.116-1.219-1.706-1.793\r
	c-4.595-4.467-4.7-11.813-0.233-16.407c4.466-4.595,11.813-4.699,16.407-0.233c1.022,0.992,2.015,2.039,2.956,3.107\r
	c4.231,4.812,3.762,12.143-1.049,16.375C495.337,316.452,492.604,317.405,489.883,317.405z"></path><path d="M70.521,351.143c-6.408,0-11.603-5.196-11.603-11.603v-10.825c0-6.407,5.194-11.603,11.603-11.603\r
	c6.408,0,11.603,5.196,11.603,11.603v10.825C82.123,345.947,76.929,351.143,70.521,351.143z"></path><path d="M176.046,360.918c-3.651,0-6.909-1.685-9.036-4.321l-55.023-63.874c-4.002-4.557-3.834-11.507,0.516-15.857\r
	c4.531-4.53,11.871-4.538,16.404-0.006c0.203,0.204,0.41,0.426,0.598,0.644l55.333,64.232c1.813,2.105,2.811,4.793,2.811,7.572\r
	C187.649,355.716,182.455,360.918,176.046,360.918z"></path><path d="M218.818,288.446c-1.6,0-3.226-0.333-4.779-1.037l-81.798-37.036c-5.837-2.642-8.427-9.518-5.784-15.355\r
	c2.644-5.836,9.518-8.428,15.355-5.783l81.798,37.036c5.837,2.642,8.427,9.518,5.784,15.355\r
	C227.455,285.909,223.234,288.446,218.818,288.446z"></path><path d="M258.879,232.216c-6.408,0-11.603-5.196-11.603-11.603v-84.699c0-6.407,5.194-11.603,11.603-11.603\r
	c6.407,0,11.603,5.196,11.603,11.603v84.699C270.481,227.02,265.286,232.216,258.879,232.216z"></path><path d="M230.503,243.119c-3.152,0-6.291-1.277-8.58-3.795l-0.012-0.013c-0.106-0.116-0.209-0.233-0.309-0.354l-54.451-64.998\r
	c-4.115-4.911-3.469-12.23,1.443-16.346c4.911-4.114,12.229-3.469,16.345,1.443l54.416,64.955c4.019,4.747,3.59,11.868-1.049,16.084\r
	C236.084,242.121,233.288,243.119,230.503,243.119z"></path><path d="M341.692,360.924c-2.681,0-5.375-0.925-7.566-2.812c-4.856-4.182-5.4-11.507-1.218-16.363l55.239-64.129\r
	c3.9-4.62,10.779-5.516,15.73-1.895c5.171,3.784,6.313,11.02,2.529,16.191c-0.181,0.248-0.407,0.535-0.607,0.767l-55.31,64.209\r
	C348.193,359.557,344.953,360.924,341.692,360.924z"></path><path d="M298.925,288.446c-4.416,0-8.636-2.535-10.576-6.82c-2.643-5.837-0.055-12.712,5.783-15.355l81.706-37.001\r
	c0.224-0.102,0.453-0.196,0.683-0.283c5.996-2.265,12.736,0.738,15.002,6.732c2.224,5.884-0.601,12.426-6.374,14.81l-81.443,36.881\r
	C302.152,288.113,300.525,288.444,298.925,288.446z"></path><path d="M287.228,243.122c-2.63,0-5.273-0.889-7.445-2.709c-4.911-4.115-5.558-11.433-1.442-16.345l54.384-64.911\r
	c3.934-4.761,10.98-5.64,15.952-1.88c5.111,3.865,6.14,11.119,2.275,16.23c-0.117,0.154-0.272,0.352-0.397,0.5l-54.428,64.963\r
	C293.834,241.71,290.542,243.122,287.228,243.122z"></path><path d="M432.918,387.691c-6.407,0-11.603-5.196-11.603-11.603v-84.699c0-6.407,5.196-11.603,11.603-11.603\r
	c6.407,0,11.603,5.196,11.603,11.603v84.699C444.52,382.495,439.325,387.691,432.918,387.691z"></path>`,20))]))}}),ot=E({__name:"Dice",props:{dice:{}},setup(g){const l=g,u=B(),{gameStatus:w,hasAlreadyChosen:c,canPlay:i}=G(u),{selectDice:f}=u,S=M(()=>c.value(l.dice.value)),_={1:Ne,2:Te,3:Ye,4:Fe,5:et,6:st};return(r,v)=>(t(),n("div",{class:oe(["flex justify-center cursor-pointer",{"animate-spin":r.dice.isRolling}])},[(t(),p(me(_[r.dice.value]),{color:"black",backgroundColor:r.dice.selected?e(i)()?"#2563eb":"#e11d48":S.value?"gray":e(w)===e(d).HAS_LOST?"red":"white",width:"40",height:"40",onClick:v[0]||(v[0]=k=>e(f)(r.dice))},null,8,["backgroundColor"]))],2))}}),D=12,te=E({__name:"Tile",props:{tile:{},selectable:{type:Boolean},stealable:{type:Boolean},owner:{}},setup(g){const l=g,u=B(),{selectedDiceTotal:w,canPlay:c,hasWorm:i,gameStatus:f,activePlayer:S}=G(u),{selectTile:_}=u,r=[[{x:0,y:0}],[{x:-12,y:0},{x:D+3,y:0}],[{x:0,y:D},{x:-12,y:-6},{x:D+3,y:-6}],[{x:-12,y:D},{x:D+3,y:D},{x:-12,y:-12},{x:D+3,y:-12}]],v=M(()=>(l.selectable||l.stealable)&&l.owner!==S.value&&(f.value===d.HAS_THROWN_DICES||f.value===d.HAS_CHOSEN_DICES)&&i.value&&(l.stealable?w.value===l.tile.displayValue:w.value>=l.tile.displayValue)),k=M(()=>v.value?c.value()?"bg-primary-600 cursor-pointer":"bg-secondary-600 cursor-pointer":c.value()?"bg-primary-400":"bg-secondary-400"),R=()=>{c.value()&&v.value&&_(l.tile,l.stealable)};return(A,W)=>(t(),p(se,{class:oe(["relative z-10 !p-3 !rounded-primary flex justify-center w-[60px] h-[100px] border border-white",k.value]),title:`${A.tile.displayValue}`,"title-props":{class:"text-xl"},clickable:v.value,onClick:R},{default:y(()=>[(t(!0),n(I,null,j(A.tile.value,T=>(t(),p(q,{class:"absolute",style:le({left:`${15+r[A.tile.value-1][T-1].x}px`,bottom:`${15+r[A.tile.value-1][T-1].y}px`}),width:"25",height:"25"},null,8,["style"]))),256))]),_:1},8,["class","title","clickable"]))}}),at={class:"my-5 w-full flex flex-col gap-3 justify-center"},nt={key:0,class:"text-red-400"},rt={class:"w-full flex flex-col md:flex-row gap-3 justify-center items-center"},it={class:"grid grid-cols-4 sm:grid-cols-8 justify-center items-center gap-3 mt-2 md:mt-0"},ct={class:"grid grid-cols-6 justify-center gap-3 mt-2 md:mt-5"},ut={class:"flex flex-col text-center"},dt={class:"text-sm text-nowrap"},pt={class:"relative flex justify-center"},ft={class:"min-h-[25vh] col-span-4 flex justify-center text-center"},_t={class:"w-fit grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-1 sm:gap-2"},ht={class:"flex flex-col text-center"},mt={class:"text-sm text-nowrap"},vt={class:"relative flex justify-center"},yt=E({__name:"RainwormsMainGame",setup(g){const l=B(),{onlineGameOpponentActive:u,onlineGameOpponentName:w,gameType:c,gameStatus:i,gameStatusActivator:f,loseStatus:S,activePlayer:_,dices:r,tiles:v,score:k,canSelectAnyTile:R,canPlay:A,hasWorm:W,isRolling:T,totalScore:F}=G(l),{roll:J,passTurn:K,loseTurn:Q}=l,h=M(()=>c.value===P.SOLO?"Robot":w.value),X=M(()=>{if(T.value)return"Rolling...";switch(i.value){case d.HAS_THROWN_DICES:switch(_.value){case a.OPPONENT:return`${h.value} is thinking...`;case a.PLAYER:return R.value?"Pick a type of dice or choose a tile":"Pick a type of dice"}case d.HAS_CHOSEN_DICES:switch(_.value){case a.OPPONENT:return`${h.value} has decided`;case a.PLAYER:return R.value?r.value.some(L=>!L.selected)?"Choose a tile or roll again":"Choose a tile":r.value.some(L=>!L.selected)?"Roll again":(Q(),`Nothing to choose from. Pass turn to ${h.value}`)}case d.HAS_CHOSEN_TILE:switch(_.value){case a.OPPONENT:return f.value===a.PLAYER?`${h.value}'s turn`:`${h.value} chose a tile`;case a.PLAYER:return f.value===a.PLAYER?"You chose a tile":"Your turn"}case d.HAS_LOST:switch(_.value){case a.OPPONENT:return f.value===a.PLAYER?`${h.value}'s turn`:"Your turn";case a.PLAYER:return f.value===a.PLAYER?S.value===re.HAS_LOST_TILE?`You lost a tile. Pass turn to ${h.value}`:`You busted. Pass turn to ${h.value}`:S.value===re.HAS_LOST_TILE?`${h.value} lost a tile. Click to roll`:`${h.value} busted. Click to roll`}default:return c.value===P.ONLINE&&_.value===a.OPPONENT?`${h.value}'s turn`:"Roll"}}),Z=()=>{i.value===d.HAS_LOST&&f.value===a.PLAYER?K(!0):J()};return(L,b)=>(t(),n("div",at,[e(i)===e(d).HAS_LOST&&e(f)===e(a).PLAYER?(t(),n("p",nt,H(e(W)?"Remember, to survive you must roll a dice value that hasn't already been collected.":"To stay in the game, you must collect at least one worm."),1)):m("",!0),s("div",rt,[O(N,{class:"w-full md:w-1/2",variant:"tertiary",disabled:!e(A)()||e(i)===e(d).HAS_THROWN_DICES||e(i)===e(d).HAS_CHOSEN_DICES&&e(r).every($=>$.selected)||e(i)===e(d).HAS_CHOSEN_TILE&&e(f)===e(a).PLAYER,onClick:Z},{default:y(()=>[x(H(X.value),1)]),_:1},8,["disabled"]),s("div",it,[(t(!0),n(I,null,j(e(r),$=>(t(),p(ot,{key:$.id,dice:$},null,8,["dice"]))),128))])]),s("div",ct,[s("div",ut,[b[0]||(b[0]=s("p",{class:"font-bold"},"You:",-1)),s("p",dt,H(e(F)(e(a).PLAYER))+" worms",1),s("div",pt,[e(k)[e(a).PLAYER].length?(t(!0),n(I,{key:0},j(e(k)[e(a).PLAYER],($,Y)=>(t(),n("div",{class:"absolute mt-3",style:le({top:`${7*Y}px`})},[O(te,{tile:$,stealable:Y===e(k)[e(a).PLAYER].length-1,owner:e(a).PLAYER},null,8,["tile","stealable","owner"])],4))),256)):m("",!0)])]),s("div",ft,[s("div",_t,[(t(!0),n(I,null,j(e(v),$=>(t(),p(te,{tile:$,selectable:""},null,8,["tile"]))),256))])]),s("div",ht,[s("p",{class:oe(["font-bold",e(u)?"text-green-400":"text-red-400"])},H(h.value)+": ",3),s("p",mt,H(e(F)(e(a).OPPONENT))+" worms",1),s("div",vt,[e(k)[e(a).OPPONENT].length?(t(!0),n(I,{key:0},j(e(k)[e(a).OPPONENT],($,Y)=>(t(),n("div",{class:"absolute mt-3",style:le({top:`${7*Y}px`})},[O(te,{tile:$,stealable:Y===e(k)[e(a).OPPONENT].length-1,owner:e(a).OPPONENT},null,8,["tile","stealable","owner"])],4))),256)):m("",!0)])])])]))}}),gt={class:"text-center text-xl md:text-3xl font-bold"},wt={key:0,class:"text-purple-500"},St={key:1,class:"text-green-500"},bt={key:2,class:"text-red-500"},xt={key:3,class:"text-blue-500 font-bold"},Ot={key:4,class:"text-blue-500 font-bold"},kt={key:5,class:"text-blue-500 font-bold"},$t={key:6,class:"flex justify-around"},Ct=E({__name:"RainwormsResults",setup(g){const l=B(),{onlineGameOpponentName:u,gameType:w,finishStatus:c,totalScore:i}=G(l),{currentHighscorePosition:f,hasImprovedHighscorePosition:S,hasImprovedPersonalBest:_}=be(V.RAINWORMS),r=M(()=>w.value===P.SOLO?"Robot":u.value);return(v,k)=>(t(),n("div",gt,[e(c)===e(U).WINNER_HIGHEST_SCORE?(t(),n("p",wt," You won with "+H(e(i)(e(a).PLAYER))+" worms! ",1)):e(c)===e(U).WINNER_HIGHEST_TILE?(t(),n("p",St," You won with "+H(e(i)(e(a).PLAYER))+" worms and the highest tile value! ",1)):(t(),n("p",bt," You lost with a lower score than "+H(e(w)===e(P).SOLO?"the robot":r.value)+". ",1)),e(S)&&e(f)===1?(t(),n("p",xt," HIGHSCORE! ")):e(S)?(t(),n("p",Ot," LEADERBOARD IMPROVEMENT! ")):e(_)?(t(),n("p",kt," PERSONAL BEST! ")):m("",!0),e(c)!==e(U).LOSER?(t(),n("div",$t,[O(q),O(q),O(q)])):m("",!0)]))}}),Nt={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Et={key:0,class:"mt-10 flex flex-col gap-3"},Rt={class:"flex flex-wrap justify-center gap-3"},Pt={class:"flex flex-wrap justify-center gap-3"},At={class:"flex justify-center"},Tt={key:0,class:"w-full mb-5"},Lt={class:"mt-10 flex flex-wrap justify-center gap-3"},Ht={class:"mt-10 flex flex-wrap justify-center gap-3"},Wt=E({__name:"Rainworms",setup(g){const l=B(),u=ve(),w=ue(),{gameType:c,gameStatus:i,gameStatusActivator:f,finishStatus:S,onlineGames:_,onlineGamesLoading:r,onlineGameId:v,onlineGameOpponentName:k,onlineGameChat:R,isOnlineGameOwner:A}=G(l),{isLoggedIn:W}=G(w),{$reset:T,start:F,fetchOnlineGames:J,createOnlineGame:K,continueOnlineGame:Q,leaveOnlineGame:h,deleteOnlineGame:X}=l,{collections:Z}=u,L=ne(!1),b=ne(!1),$=M(()=>{if(i.value===d.HAS_LOST||f.value===a.OPPONENT||c.value===null)return;let z="";return c.value===P.SOLO?i.value===d.HAS_NOT_STARTED?z="a robot or a friend":z="a robot":i.value<d.HAS_STARTED?z="a friend":z=Y.value,`Play against ${z}. Collect as many worms as possible!`}),Y=M(()=>c.value===P.SOLO?"Robot":k.value),de=()=>{b.value=!1,F()},ae=async()=>{v.value&&await h(),T()},ee=async()=>{b.value=!1,v.value&&(A.value?await X():await h()),T()};return ye(async()=>{v.value&&(await h(),T())}),(z,o)=>(t(),p(se,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainworms",description:$.value},{right:y(()=>[s("div",Nt,[O(N,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:o[0]||(o[0]=C=>L.value=!0)}),e(A)?(t(),p(N,{key:0,variant:"danger",icon:"pi pi-trash",onClick:ee})):m("",!0)])]),default:y(()=>[e(i)===e(d).HAS_NOT_STARTED?(t(),n("div",Et,[s("div",Rt,[O(N,{class:"w-full md:w-1/2",onClick:de},{default:y(()=>o[10]||(o[10]=[x(" Play Solo ")])),_:1,__:[10]}),e(W)?(t(),p(N,{key:0,class:"w-full md:w-1/2",variant:"purple",onClick:o[1]||(o[1]=()=>{i.value=e(d).FINDING_OPPONENT,c.value=e(P).ONLINE})},{default:y(()=>o[11]||(o[11]=[x(" Play Online ")])),_:1,__:[11]})):m("",!0)]),b.value?(t(),p(ce,{key:0,class:"!mt-0","game-id":e(V).RAINWORMS,unit:"worm","with-back-button":"",onClose:o[2]||(o[2]=C=>b.value=!1)},null,8,["game-id"])):m("",!0),s("div",Pt,[b.value?m("",!0):(t(),p(N,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:o[3]||(o[3]=C=>b.value=!0)},{default:y(()=>o[12]||(o[12]=[x(" View Highscores ")])),_:1,__:[12]}))])])):e(i)===e(d).FINDING_OPPONENT?(t(),n(I,{key:1},[O(Se,{modelValue:e(_),"onUpdate:modelValue":o[4]||(o[4]=C=>ge(_)?_.value=C:null),collection:e(Z).onlineGames[e(V).RAINWORMS],"online-games-loading":e(r),"fetch-online-games":e(J),onCreateOnlineGame:e(K),onContinueOnlineGame:e(Q)},null,8,["modelValue","collection","online-games-loading","fetch-online-games","onCreateOnlineGame","onContinueOnlineGame"]),s("div",At,[O(N,{class:"w-full md:w-1/2",variant:"neutral",onClick:ae},{default:y(()=>o[13]||(o[13]=[x(" Go Back ")])),_:1,__:[13]})])],64)):e(i)>=e(d).HAS_STARTED&&e(i)<=e(d).HAS_LOST?(t(),n(I,{key:2},[e(c)===e(P).SOLO?(t(),n("div",Tt,o[14]||(o[14]=[s("p",{class:"text-neutral-400"},[s("b",null,"Warning"),x(": robot prefers stealing over scoring!")],-1)]))):m("",!0),O(yt),e(c)===e(P).ONLINE?(t(),p(ie,{key:1,chats:e(R)??[],onSendChat:o[5]||(o[5]=C=>R.value=[...e(R)??[],C])},null,8,["chats"])):m("",!0),s("div",Lt,[e(c)===e(P).ONLINE?(t(),p(N,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:ae},{default:y(()=>o[15]||(o[15]=[x(" Go Back ")])),_:1,__:[15]})):(t(),p(N,{key:1,class:"w-full md:w-1/2 bg-opacity-75",variant:"danger",onClick:ee},{default:y(()=>o[16]||(o[16]=[x(" Restart ")])),_:1,__:[16]}))])],64)):e(i)===e(d).HAS_FINISHED?(t(),n(I,{key:3},[b.value?m("",!0):(t(),p(Ct,{key:0})),e(c)===e(P).ONLINE?(t(),p(ie,{key:1,chats:e(R)??[],onSendChat:o[6]||(o[6]=C=>R.value=[...e(R)??[],C])},null,8,["chats"])):m("",!0),e(S)!==e(U).LOSER?(t(),p(Oe,{key:2})):m("",!0),s("div",Ht,[O(N,{class:"w-full md:w-1/2",variant:"secondary",onClick:ee},{default:y(()=>o[17]||(o[17]=[x(" Play Again ")])),_:1,__:[17]}),b.value?(t(),p(ce,{key:0,class:"!mt-0 w-full","game-id":e(V).RAINWORMS,unit:"worm","with-back-button":"","back-button-text":"View Your Score",onClose:o[7]||(o[7]=C=>b.value=!1)},null,8,["game-id"])):(t(),p(N,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:o[8]||(o[8]=C=>b.value=!0)},{default:y(()=>o[18]||(o[18]=[x(" View Highscores ")])),_:1,__:[18]}))])],64)):m("",!0),O(we,{"game-id":e(V).RAINWORMS,"is-open":L.value,"onUpdate:isOpen":o[9]||(o[9]=C=>L.value=C)},null,8,["game-id","is-open"])]),_:1},8,["description"]))}});export{Wt as default};
