import{aT as Ye,aU as Be,c as Pe,aV as Fe,aR as Te,s as j,aW as We,aX as Re,aS as X,w as Z,aQ as p,a9 as xe,f as W,o as $e,L as ne,aY as je,aZ as Ue,a_ as _e,a$ as ze,aq as ke,b0 as Ze,b1 as Ve,d as G,g as c,j as a,q as r,z as U,l as D,b2 as qe,h as e,C as Y,E as re,m as Q,I as E,a3 as B,_ as se,A as K,k as V,N as Je,ax as Ke,y as Qe,a7 as Xe}from"../bundle.js";import{u as el,H as ll,_ as tl}from"./c-useScoreInfo-BuqgYv10.js";import{a as sl,_ as al}from"./c-GameChat.vue_vue_type_script_setup_true_lang-ChPyUbG1.js";import{_ as ol,a as nl}from"./c-GameActions.vue_vue_type_script_setup_true_lang-8vcJs5mA.js";import{_ as il}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B6MMtiVw.js";import{_ as rl}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";var te=(s=>(s[s.Purple=0]="Purple",s[s.Blue=1]="Blue",s[s.Yellow=2]="Yellow",s[s.Orange=3]="Orange",s[s.Red=4]="Red",s))(te||{}),T=(s=>(s[s.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",s[s.FINDING_OPPONENT=1]="FINDING_OPPONENT",s[s.IS_PLAYING=2]="IS_PLAYING",s[s.HAS_FINISHED=3]="HAS_FINISHED",s))(T||{}),q=(s=>(s[s.WAITING_FOR_OPPONENTS=0]="WAITING_FOR_OPPONENTS",s[s.HAS_STARTED=1]="HAS_STARTED",s[s.HAS_THROWN_DICES=2]="HAS_THROWN_DICES",s[s.HAS_CHOSEN_SCORE=3]="HAS_CHOSEN_SCORE",s[s.CAN_CHOOSE_REMAINING=4]="CAN_CHOOSE_REMAINING",s[s.HAS_CHOSEN_REMAINING=5]="HAS_CHOSEN_REMAINING",s))(q||{});const ue=Ye("yahtzeeRainbowStore",()=>{const s=Be(),t=Pe(),o=Fe(),u=Te(),{personalBest:A,highscorePosition:P}=j(o),{firebaseUser:_}=j(t),{games:n,gamesLoading:$,gameId:k,creatorId:F,players:R,opponents:h,partyName:O,maxPlayers:d,chat:x,isOwner:M}=j(u),{setPreviousHighscores:z,updateHighscores:J,sortHighscores:ce}=o,ae={onlineGames:We(s,Re.GAME_DATA,X.YAHTZEE_RAINBOW,Re.ONLINE_GAMES)},N=Z(p.SOLO),H=Z(0),g=Z(1),C=Z(!1),S=Z("soloPlayer"),f=Z(S.value),y=Z(be()),w=xe({}),I=xe({}),oe=W(()=>y.value.some(l=>l.isRolling)),b=W(()=>y.value.filter(l=>l.color===null)),he=W(()=>!!(f.value===S.value&&b.value.length&&!C.value&&g.value===1)),ge=W(()=>l=>!!(f.value===l&&!oe.value&&y.value.some(v=>v.color===null)&&!C.value&&(N.value===p.SOLO&&g.value===2||N.value===p.MULTIPLAYER&&[4,2].includes(g.value)))),me=W(()=>f.value===S.value&&!oe.value&&!C.value),He=W(()=>(l,v)=>{if(f.value!==l)return[];const i=[],m=y.value.find(L=>L.color===v);return b.value.length===2?(i.push(b.value[0].value+b.value[1].value),m&&(i.push(b.value[0].value+m.value),i.push(b.value[1].value+m.value))):b.value.length===1&&m&&i.push(b.value[0].value+m.value),i}),Ce=W(()=>(l,v,i)=>{var m;return!!((m=w[l])!=null&&m[v].find(L=>L.row===i))});$e(()=>{o.$init(X.YAHTZEE_RAINBOW)}),ne(w,()=>{H.value!==3&&Ie().size===2&&(N.value===p.SOLO||M.value)&&(H.value=3)}),ne(H,l=>{l===3&&f.value===S.value&&(N.value===p.SOLO?(Ee(S.value),Ae(),ve()):M.value&&(R.value.forEach(v=>{Ee(v.userId)}),Ae(),we()),_e(Ve))}),ne(I,()=>{var l;if(N.value===p.MULTIPLAYER){const v=(l=I[S.value])==null?void 0:l.winStatus;(v==="win"||v==="tie")&&ve()}}),ne([H,g,f,oe],()=>{N.value===p.MULTIPLAYER&&we()},{deep:!0}),ne(R,()=>{g.value===0&&d.value&&R.value.length===d.value&&(g.value=1)});const de=()=>{u.$reset(),N.value=p.SOLO,H.value=0,g.value=1,C.value=!1,S.value="soloPlayer",f.value=S.value,y.value=ee(),Object.keys(w).forEach(l=>{delete w[l],delete I[l]}),z()},Le=(l,v=null,i=null)=>{_.value&&(l=[{userId:_.value.uid,isOnline:!0},...l],N.value=p.MULTIPLAYER,H.value=2,g.value=i?0:1,S.value=_.value.uid,f.value=S.value,l.forEach(m=>{w[m.userId]=fe(),I[m.userId]=null}),u.$init(X.YAHTZEE_RAINBOW,pe,ye,de),u.createGame(l,v,i))},De=l=>{_.value&&(N.value=p.MULTIPLAYER,S.value=_.value.uid,u.$init(X.YAHTZEE_RAINBOW,pe,ye,de),u.continueGame(l))},pe=()=>({gameStatus:H.value,yahtzeeStatus:g.value,activePlayerId:f.value,dices:y.value,score:w,finalScore:I}),ye=l=>{var i;const v=(i=_.value)==null?void 0:i.uid;!v||f.value===S.value||(H.value=l.gameStatus,g.value=l.yahtzeeStatus,f.value=l.activePlayerId,y.value=l.dices,Object.assign(w,l.score),Object.assign(I,l.finalScore),Object.keys(w).includes(v)||(w[v]=fe(),I[v]=null))},we=()=>{!_.value||f.value!==S.value&&!C.value||u.pushState()},Se=async()=>{for(;oe.value;)await new Promise(l=>setTimeout(l,o.diceRollSpeed*1e3));return!0},Ie=()=>{const l=new Set;for(const v of Object.values(w))for(const[i,m]of Object.entries(v))m.some(L=>L.row===10)&&l.add(Number(i));return l},ee=()=>be().filter(l=>l.color===null||!Ie().has(l.color)),Ge=()=>{N.value=p.SOLO,H.value=2,g.value=1,w[S.value]=fe(),I[S.value]=null},Oe=async()=>{if(!he.value)return;const l=o.diceRollSpeed*1e3;y.value.forEach(v=>{v.isRolling=!0,setTimeout(()=>{v.value=je(6),v.isRolling=!1},Ue(l,l/3))}),await Se(),g.value=2,_e(ze)},Me=(l,v,i)=>{if(ge.value){if(w[S.value][l].push({row:v}),b.value.length===2&&b.value[0].value+b.value[1].value===i)y.value=y.value.filter(m=>m.color!==null);else{const m=y.value.find(L=>L.color===l);if(m){const L=b.value.find(le=>le.value+m.value===i);L&&(y.value=y.value.filter(le=>le.id!==m.id&&le.id!==L.id))}}N.value===p.MULTIPLAYER&&(C.value=!0,g.value===4?g.value=5:g.value=3,setTimeout(async()=>{C.value=!1,await ke(),await Ne()},o.diceRollSpeed*1e3)),_e(Ze)}},Ne=async()=>{me.value&&(N.value===p.SOLO?(g.value=1,y.value=ee()):g.value===4?(g.value=1,y.value=ee(),await Oe()):g.value===5?(g.value=1,y.value=ee()):(b.value.length===1?g.value=4:(g.value=1,y.value=ee()),C.value=!0,f.value=u.getNextPlayerId(f.value),y.value.some(l=>l.color===null)||(y.value=ee()),await ke(),C.value=!1))},Ee=l=>{let v=0;Object.values(w[l]).forEach(i=>{i.length&&(v+=ul[i.length])});for(let i=0;i<10;i++){const m=Object.values(w[l]).filter(L=>!!L.find(le=>le.row===i)).length;m>=3&&(v+=cl[m][i])}I[l]={total:v}},Ae=()=>{const l=Math.max(...Object.values(I).map(i=>(i==null?void 0:i.total)??0)),v=Object.keys(I).filter(i=>{var m;return((m=I[i])==null?void 0:m.total)===l});N.value===p.SOLO?I[S.value].winStatus="win":R.value.forEach(i=>{v.includes(i.userId)?v.length===1?I[i.userId].winStatus="win":I[i.userId].winStatus="tie":I[i.userId].winStatus="lose"})},ve=()=>{_!=null&&_.value&&I[S.value]&&J({gameId:k.value??null,score:I[S.value].total})};return{collections:ae,games:n,gamesLoading:$,gameId:k,creatorId:F,players:R,opponents:h,partyName:O,maxPlayers:d,chat:x,isOwner:M,gameType:N,gameStatus:H,yahtzeeStatus:g,yahtzeeStatusLoading:C,myPlayerId:S,activePlayerId:f,score:w,finalScore:I,dices:y,whiteDices:b,isRolling:oe,canRoll:he,canSelectScore:ge,canSkipTurn:me,hasSelectedScore:Ce,canChooseOf:He,personalBest:A,highscorePosition:P,$reset:de,start:Ge,roll:Oe,hasFinishedRolling:Se,selectScore:Me,passTurn:Ne,setPreviousHighscores:z,updateYahtzeeHighscore:ve,sortHighscores:ce,fetchOnlineGames:u.fetchGames,createOnlineGame:Le,continueOnlineGame:De,leaveOnlineGame:u.leaveGame,deleteOnlineGame:u.deleteGame,getPlayerDisplayName:u.getPlayerDisplayName,getNextPlayerId:u.getNextPlayerId}},{persist:{enabled:!0}}),be=()=>[{id:1,color:4,value:1,isRolling:!1},{id:2,color:3,value:2,isRolling:!1},{id:3,color:2,value:3,isRolling:!1},{id:4,color:1,value:4,isRolling:!1},{id:5,color:0,value:5,isRolling:!1},{id:6,color:null,value:6,isRolling:!1},{id:7,color:null,value:6,isRolling:!1}],fe=()=>({0:[],1:[],2:[],3:[],4:[]}),ie={0:[12,10,8,6,4,2,4,6,8,10,12],1:[2,4,6,8,10,12,10,8,6,4,2],2:[12,11,10,9,8,7,6,5,4,3,2],3:[2,3,4,5,6,7,8,9,10,11,12],4:[2,3,4,5,6,7,8,9,10,11,12]},ul={1:1,2:2,3:4,4:7,5:11,6:16,7:22,8:29,9:37,10:46,11:56},cl={3:[2,2,1,1,1,1,1,1,1,2,2],4:[5,4,4,2,2,2,2,2,1,2,4],5:[10,8,6,4,2,0,2,4,6,8,10]},dl={0:"text-purple-500",1:"text-blue-500",2:"text-yellow-500",3:"text-orange-500",4:"text-red-500"},vl={0:"bg-purple-700",1:"bg-blue-700",2:"bg-yellow-700",3:"bg-orange-700",4:"bg-red-700"},_l={0:"fill-purple-500",1:"fill-blue-500",2:"fill-yellow-500",3:"fill-orange-500",4:"fill-red-500"},fl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},hl=["fill"],gl=G({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",fl,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,hl)]))}}),ml={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},pl=["fill"],yl=["fill"],wl=G({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",ml,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,pl),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,yl)]))}}),Sl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Il=["fill"],Ol=["fill"],Nl=["fill"],El=G({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Sl,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Il),r("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Ol),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Nl)]))}}),Al={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Rl=["fill"],xl=["fill"],kl=["fill"],bl=["fill"],Pl=G({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Al,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Rl),r("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,xl),r("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,kl),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,bl)]))}}),Tl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},$l=["fill"],Hl=["fill"],Cl=["fill"],Ll=["fill"],Dl=["fill"],Gl=G({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Tl,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,$l),r("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,Hl),r("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Cl),r("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,Ll),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Dl)]))}}),Ml={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Yl=["fill"],Bl=["fill"],Fl=["fill"],Wl=["fill"],jl=["fill"],Ul=["fill"],zl=G({__name:"Dice6",props:{color:{},backgroundColor:{}},setup(s){return(t,o)=>(a(),c("svg",Ml,[r("rect",{class:U(t.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),r("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Yl),r("circle",{cx:"25",cy:"50",r:"10",fill:t.color},null,8,Bl),r("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,Fl),r("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,Wl),r("circle",{cx:"75",cy:"50",r:"10",fill:t.color},null,8,jl),r("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Ul)]))}}),Zl=G({__name:"Dice",props:{dice:{}},setup(s){const t={1:gl,2:wl,3:El,4:Pl,5:Gl,6:zl};return(o,u)=>(a(),c("div",{class:U(["cursor-pointer",{"animate-spin":o.dice.isRolling}])},[(a(),D(qe(t[o.dice.value]),{color:"black",backgroundColor:o.dice.color!==null?e(_l)[o.dice.color]:"fill-white",width:"40",height:"40"},null,8,["backgroundColor"]))],2))}}),Vl={class:"w-full flex flex-col md:flex-row justify-between gap-3 md:gap-10"},ql={key:0,class:"text-white"},Jl={key:1},Kl=G({__name:"Scoreboard",setup(s){const t=ue(),{myPlayerId:o,gameType:u,gameStatus:A,canChooseOf:P,canSelectScore:_,score:n,players:$}=j(t),k=W(()=>u.value===p.SOLO?[{userId:o.value,isOnline:!0}]:$.value);return(F,R)=>(a(),c("div",Vl,[(a(!0),c(Y,null,re(k.value,h=>(a(),c("table",{key:h.userId,class:U(["w-full mt-5 text-sm md:text-base text-left",e(A)===e(T).HAS_FINISHED?"text-neutral-500":"text-white"])},[e(u)===e(p).MULTIPLAYER?(a(),c("thead",ql,[r("tr",null,[r("th",{class:U(["text-center",h.isOnline?"text-green-400":"text-red-400"]),colspan:"5"},E(h.userId===e(o)?"You":e(t).getPlayerDisplayName(h.userId)),3)])])):Q("",!0),e(n)[h.userId]?(a(),c("tbody",Jl,[(a(),c(Y,null,re(11,O=>r("tr",{key:O},[(a(!0),c(Y,null,re([e(te).Red,e(te).Orange,e(te).Yellow,e(te).Blue,e(te).Purple],d=>(a(),c("td",{key:d,class:U([e(dl)[d],{[e(vl)[d]]:e(n)[h.userId][d].length&&O-1<=e(n)[h.userId][d][e(n)[h.userId][d].length-1].row,"opacity-25":e(n)[h.userId][d].length&&O-1<e(n)[h.userId][d][e(n)[h.userId][d].length-1].row&&e(n)[h.userId][d].every(x=>x.row!==O-1)}])},[e(n)[h.userId][d].length&&O-1<=e(n)[h.userId][d][e(n)[h.userId][d].length-1].row?(a(),c(Y,{key:0},[B(E(e(ie)[d][O-1]),1)],64)):e(_)(h.userId)&&e(P)(h.userId,d).includes(e(ie)[d][O-1])?(a(),D(se,{key:1,class:"size-8",variant:"neutral",disabled:h.userId!==e(o),onClick:x=>e(t).selectScore(d,O-1,e(ie)[d][O-1])},{default:K(()=>[B(E(e(ie)[d][O-1]),1)]),_:2},1032,["disabled","onClick"])):(a(),c(Y,{key:2},[B(E(e(ie)[d][O-1]),1)],64))],2))),128))])),64))])):Q("",!0)],2))),128))]))}}),Ql=rl(Kl,[["__scopeId","data-v-d5afb153"]]),Xl={class:"w-full flex justify-center"},et={class:"text-lg"},lt=G({__name:"StatusHeader",setup(s){const t=ue(),{yahtzeeStatus:o,yahtzeeStatusLoading:u,activePlayerId:A,myPlayerId:P,players:_}=j(t),n=W(()=>{var $;return A.value===P.value?"You":(($=_.value.find(k=>k.userId===A.value))==null?void 0:$.displayName)||"Unknown"});return($,k)=>(a(),c("div",Xl,[r("h3",et,[e(o)===e(q).HAS_STARTED||e(o)===e(q).HAS_CHOSEN_REMAINING?(a(),c(Y,{key:0},[B(E(n.value)+" can now roll the dices. ",1)],64)):e(o)===e(q).HAS_THROWN_DICES?(a(),c(Y,{key:1},[B(E(n.value)+" can now choose a score, or pass the turn. ",1)],64)):e(o)===e(q).HAS_CHOSEN_SCORE?(a(),c(Y,{key:2},[B(E(n.value)+" chose a score. ",1)],64)):e(o)===e(q).CAN_CHOOSE_REMAINING?(a(),c(Y,{key:3},[B(E(n.value)+" can choose from the remaining dices. ",1)],64)):Q("",!0)])]))}}),tt={class:"w-full flex flex-col gap-3"},st={class:"w-full flex flex-col md:flex-row gap-5 md:gap-10 justify-center"},at={class:"w-full md:w-1/2 flex justify-center gap-3"},ot=G({__name:"YahtzeeMainGame",setup(s){const t=ue(),o=Te(),{gameType:u,yahtzeeStatus:A,yahtzeeStatusLoading:P,myPlayerId:_,activePlayerId:n,dices:$,chat:k,maxPlayers:F,isRolling:R,canRoll:h,canSkipTurn:O}=j(t),{players:d}=j(o),x=W(()=>F.value?F.value-d.value.length:0);return(M,z)=>(a(),c("div",tt,[V(lt),r("div",st,[V(e(Je),{class:"w-full md:w-1/2"},{default:K(()=>[e(A)===e(q).WAITING_FOR_OPPONENTS||e(n)!==e(_)?(a(),D(se,{key:0,class:"w-full",variant:"tertiary",disabled:""},{default:K(()=>[B(E(x.value?`Waiting for ${x.value} more player${x.value!==1?"s":""}`:e(n)!==e(_)?`${e(o).getPlayerDisplayName(e(n))}'s turn`:"Roll"),1)]),_:1})):e(R)||e(P)?(a(),D(se,{key:1,class:"w-full",variant:"neutral",disabled:""},{default:K(()=>[B(E(e(R)?"Rolling...":"Loading..."),1)]),_:1})):e(h)?(a(),D(se,{key:2,class:"w-full",variant:"tertiary",disabled:e(R),onClick:e(t).roll},{default:K(()=>[B(E(e(n)!==e(_)?`${e(o).getPlayerDisplayName(e(n))}'s turn`:"Roll"),1)]),_:1},8,["disabled","onClick"])):e(O)?(a(),D(se,{key:3,class:"w-full",variant:"neutral",onClick:e(t).passTurn},{default:K(()=>[B(E(e(u)===e(p).SOLO||e(A)===e(q).CAN_CHOOSE_REMAINING?"Reroll":e(A)===e(q).HAS_CHOSEN_SCORE?"Next player":"Pass turn"),1)]),_:1},8,["onClick"])):Q("",!0)]),_:1}),r("div",at,[(a(!0),c(Y,null,re(e($),J=>(a(),D(Zl,{key:J.id,dice:J},null,8,["dice"]))),128))])]),V(Ql),e(u)===e(p).MULTIPLAYER?(a(),D(sl,{key:0,chats:e(k)??[],onSendChat:z[0]||(z[0]=J=>k.value=[...e(k)??[],J])},null,8,["chats"])):Q("",!0)]))}}),nt={class:"flex flex-col gap-3"},it={class:"text-center text-xl md:text-3xl font-bold"},rt={key:0,class:"text-green-500"},ut={key:1,class:"text-purple-500"},ct={key:2,class:"text-red-500"},dt={key:3,class:"text-blue-500 font-bold"},vt={key:4,class:"text-blue-500 font-bold"},_t={key:5,class:"text-blue-500 font-bold"},ft={class:"text-center text-md md:text-lg"},ht=G({__name:"YahtzeeResults",setup(s){const t=ue(),{myPlayerId:o,finalScore:u,opponents:A}=j(t),{currentHighscorePosition:P,hasImprovedHighscorePosition:_,hasImprovedPersonalBest:n}=el(X.YAHTZEE_RAINBOW);return($,k)=>{var F,R,h,O,d;return a(),c("div",nt,[r("div",it,[((F=e(u)[e(o)])==null?void 0:F.winStatus)==="win"?(a(),c("p",rt," You won with "+E((R=e(u)[e(o)])==null?void 0:R.total)+" points! ",1)):((h=e(u)[e(o)])==null?void 0:h.winStatus)==="tie"?(a(),c("p",ut," You tied with "+E((O=e(u)[e(o)])==null?void 0:O.total)+" points! ",1)):(a(),c("p",ct," You lost with "+E((d=e(u)[e(o)])==null?void 0:d.total)+" points. ",1)),e(_)&&e(P)===1?(a(),c("p",dt," HIGHSCORE! ")):e(_)?(a(),c("p",vt," LEADERBOARD IMPROVEMENT! ")):e(n)?(a(),c("p",_t," PERSONAL BEST! ")):Q("",!0)]),r("div",ft,[(a(!0),c(Y,null,re(e(A),x=>{var M;return a(),c("p",{key:x.userId},E(x.displayName)+" has "+E((M=e(u)[x.userId])==null?void 0:M.total)+" points ",1)}),128))])])}}}),gt={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},mt={class:"flex flex-wrap justify-center gap-3"},pt={key:0,class:"w-full"},Rt=G({__name:"Yahtzee",setup(s){const t=ue(),o=Pe(),{gameId:u,partyName:A,isOwner:P,gameType:_,gameStatus:n,myPlayerId:$,finalScore:k,personalBest:F}=j(t),{isLoggedIn:R,isOwner:h}=j(o),{start:O,$reset:d,createOnlineGame:x,continueOnlineGame:M,leaveOnlineGame:z,deleteOnlineGame:J,updateYahtzeeHighscore:ce}=t,ae=Z(!1),N=Z(!1),H=()=>{_.value=p.MULTIPLAYER,n.value=T.FINDING_OPPONENT},g=async()=>{u.value&&(P.value?await J():await z()),d()},C=async()=>{u.value&&await z(),d()};return $e(()=>{u.value&&M(u.value)}),Ke(async()=>{u.value&&(await z(),d())}),(S,f)=>(a(),D(Qe,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainbow Yahtzee",tags:e(_)===e(p).MULTIPLAYER&&e(A)?[{value:e(A),severity:"danger"}]:void 0,description:e(n)===e(T).HAS_NOT_STARTED?e(_)===e(p).SOLO?"Play solo or with a friend.":"Play with a friend.":void 0},{right:K(()=>[r("div",gt,[V(se,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:f[0]||(f[0]=y=>ae.value=!0)}),V(nl,{"icon-only":"","is-solo":e(_)===e(p).SOLO,"is-owner":e(P),"has-game-started":e(n)>=e(T).IS_PLAYING,"is-game-over":e(n)===e(T).HAS_FINISHED,onDelete:g},null,8,["is-solo","is-owner","has-game-started","is-game-over"])])]),default:K(()=>{var y;return[r("div",mt,[e(n)===e(T).FINDING_OPPONENT?(a(),c("div",pt,[V(al,{"allow-party":"",onCreateOnlineGame:f[1]||(f[1]=w=>e(x)([{userId:w}])),onContinueOnlineGame:e(M),onCreateParty:f[2]||(f[2]=(w,I)=>e(x)([],w,I)),onJoinParty:e(M)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(n)===e(T).IS_PLAYING?(a(),D(ot,{key:1})):e(n)===e(T).HAS_FINISHED?(a(),D(ht,{key:2})):Q("",!0)]),V(ol,{"is-viewing-highscores":N.value,"onUpdate:isViewingHighscores":f[3]||(f[3]=w=>N.value=w),"has-solo":e(h),"is-solo":e(_)===e(p).SOLO,hasMultiplayer:"",isMultiplayer:e(_)===e(p).MULTIPLAYER,"is-owner":e(P),"is-main-menu":e(n)===e(T).HAS_NOT_STARTED,"has-game-started":e(n)>=e(T).IS_PLAYING,"is-game-over":e(n)===e(T).HAS_FINISHED,onPlaySolo:e(O),onPlayMultiplayer:H,onRestart:g,onGoBack:C},null,8,["is-viewing-highscores","has-solo","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),N.value?(a(),D(ll,{key:0,"game-id":e(X).YAHTZEE_RAINBOW},null,8,["game-id"])):Q("",!0),V(tl,{"is-logged-in":e(R),"is-solo":e(_)===e(p).SOLO,"is-game-over":e(n)===e(T).HAS_FINISHED,"final-score":((y=e(k)[e($)])==null?void 0:y.total)??0,"personal-best":e(F),"redirect-route":e(Xe).GAMES_YAHTZEE_RAINBOW,onUpdateHighscore:f[4]||(f[4]=w=>e(ce)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),V(il,{"game-id":e(X).YAHTZEE_RAINBOW,"is-open":ae.value,"onUpdate:isOpen":f[5]||(f[5]=w=>ae.value=w)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{Rt as default};
