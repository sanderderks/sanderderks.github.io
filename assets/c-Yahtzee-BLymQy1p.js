import{d as ie,s as W,w as K,f as L,L as Se,g as l,j as t,q as u,m as r,I as f,h as e,k as d,_ as S,A as y,a3 as v,aQ as I,C as w,E as D,aR as we,aS as ue,o as fe,ax as me,z as Q,a as Ie,c as ce,l as _,y as ve,a7 as pe,R as Ee}from"../bundle.js";import{u as de,s as Ae,G as s,S as H,B as Z,_ as Te}from"./c-Dice.vue_vue_type_script_setup_true_lang-CdL98Z-D.js";import{_ as ke}from"./c-FindOpponent.vue_vue_type_script_setup_true_lang-CEkO_95R.js";import{_ as Oe}from"./c-GameChat.vue_vue_type_script_setup_true_lang-BHc_8rRc.js";import{_ as He}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B2hoAcWM.js";import{u as ge,H as he}from"./c-useScoreInfo-DzvOvupf.js";import{_ as ye}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-Dice5.vue_vue_type_script_setup_true_lang-DK-8hWiG.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-B1iNImaq.js";const Ne={class:"h-10"},Pe={class:"w-1/2 md:w-1/3"},Re={key:0},Le={key:1,class:"!ps-1 md:ps-1"},xe={key:2},De={key:0},Ce={key:1},$e={key:2},Ge=ie({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(ee){const A=ee,C=de(),{gameType:N,gameStatus:c,activePlayerId:h,myPlayerId:$,onlineGameOpponents:T,reroll:P}=W(C),{selectScore:G,getScore:p,getActualValue:n}=C,x=K(!1),F=Ae[A.row],Y=L(()=>p(A.row,$.value)),k=L(()=>n(A.row,A.hasValue)),b=L(()=>k.value===!1?"X":k.value);return Se(()=>k.value,()=>{x.value=!0,setTimeout(()=>{x.value=!1})}),(O,U)=>(t(),l("tr",Ne,[u("th",Pe,f(e(F).title),1),Y.value?(t(),l("td",Re,f(Y.value.value===!1?"X":Y.value.value),1)):e(h)===e($)&&e(P)>=0&&!x.value?(t(),l("td",Le,[d(S,{class:"size-8",variant:k.value===!1||k.value===0?"neutral":void 0,onClick:U[0]||(U[0]=R=>e(G)(O.row,k.value))},{default:y(()=>[v(f(b.value),1)]),_:1},8,["variant"])])):(t(),l("td",xe)),e(N)===e(I).MULTIPLAYER?(t(!0),l(w,{key:3},D(e(T),R=>(t(),l(w,null,[e(p)(O.row,R.userId)?(t(),l("td",De,f(e(p)(O.row,R.userId).value===!1?"X":e(p)(O.row,R.userId).value),1)):e(h)===R.userId&&e(c)>e(s).HAS_STARTED?(t(),l("td",Ce,[d(S,{class:"size-8",variant:k.value===!1||k.value===0?"neutral":"danger"},{default:y(()=>[v(f(b.value),1)]),_:1},8,["variant"])])):(t(),l("td",$e))],64))),256)):r("",!0)]))}}),g=ye(Ge,[["__scopeId","data-v-6635e5de"]]),Fe={key:0,class:"text-white"},Ye={key:1,class:"h-12 md:h-auto text-yellow-500"},be={key:3,class:"h-12 md:h-auto text-yellow-500"},Be={class:"h-12 md:h-auto text-pink-500"},Ue={key:0,class:"text-purple-500 font-bold"},Me={key:1,class:"text-red-500 font-bold"},Ve={key:2,class:"text-green-500 font-bold"},je={key:0,class:"h-12 md:h-auto text-red-500 font-bold"},ze=ie({__name:"Scoreboard",setup(ee){const A=de(),C=we(),{gameType:N,gameStatus:c,myPlayerId:h,bonusScore:$,finalScore:T,hasOfValue:P,hasThreeOfAKind:G,hasFourOfAKind:p,hasFullHouse:n,hasSmallStraight:x,hasLargeStraight:F,hasYahtzee:Y,diceTotal:k}=W(A),{players:b,opponents:O}=W(C),{currentHighscorePosition:U,hasImprovedHighscorePosition:R,hasImprovedPersonalBest:te}=ge(ue.YAHTZEE),B=K(),M=K(!1),j=L(()=>P.value(1)),z=L(()=>P.value(2)),ae=L(()=>P.value(3)),le=L(()=>P.value(4)),se=L(()=>P.value(5)),oe=L(()=>P.value(6));return fe(()=>{B.value=setInterval(()=>{M.value=!M.value},500)}),me(()=>{clearInterval(B.value)}),(X,o)=>{var V,J,q;return t(),l("table",{class:Q(["w-full mt-5 text-sm md:text-base text-left",e(c)===e(s).HAS_FINISHED?"text-neutral-500":"text-white",e(c)===e(s).HAS_NOT_STARTED?M.value?"even":"odd":void 0])},[e(N)===e(I).MULTIPLAYER?(t(),l("thead",Fe,[u("tr",null,[o[0]||(o[0]=u("th",null,null,-1)),o[1]||(o[1]=u("th",null,"You",-1)),(t(!0),l(w,null,D(e(O),i=>(t(),l("th",{key:i.userId,class:Q(i.isOnline?"text-green-400":"text-red-400")},f(e(A).getPlayerDisplayName(i.userId)),3))),128))])])):r("",!0),u("tbody",null,[d(g,{row:e(H).ONES,"has-value":j.value},null,8,["row","has-value"]),d(g,{row:e(H).TWOS,"has-value":z.value},null,8,["row","has-value"]),d(g,{row:e(H).THREES,"has-value":ae.value},null,8,["row","has-value"]),d(g,{row:e(H).FOURS,"has-value":le.value},null,8,["row","has-value"]),d(g,{row:e(H).FIVES,"has-value":se.value},null,8,["row","has-value"]),d(g,{row:e(H).SIXES,"has-value":oe.value},null,8,["row","has-value"]),e(c)>=e(s).HAS_FINISHED?(t(),l("tr",{key:0,class:Q(["h-12 md:h-auto",e(c)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[o[2]||(o[2]=u("th",null,"TOP",-1)),u("td",null,f(((V=e(T)[e(h)])==null?void 0:V.top)??""),1),e(N)===e(I).MULTIPLAYER?(t(!0),l(w,{key:0},D(e(O),i=>{var E;return t(),l("td",null,f(((E=e(T)[i.userId])==null?void 0:E.top)??""),1)}),256)):r("",!0)],2)):r("",!0),e(c)>e(s).HAS_NOT_STARTED&&Object.values(e($)).some(i=>i.includes(e(Z).TOP))?(t(),l("tr",Ye,[o[3]||(o[3]=u("th",null,"BONUS",-1)),u("td",null,f(e(A).getBonus(e(Z).TOP,e(h))||""),1),e(N)===e(I).MULTIPLAYER?(t(!0),l(w,{key:0},D(e(O),i=>(t(),l("td",null,f(e(A).getBonus(e(Z).TOP,i.userId)||""),1))),256)):r("",!0)])):r("",!0),d(g,{row:e(H).THREE_OF_A_KIND,"has-value":e(G)},null,8,["row","has-value"]),d(g,{row:e(H).FOUR_OF_A_KIND,"has-value":e(p)},null,8,["row","has-value"]),d(g,{row:e(H).FULL_HOUSE,"has-value":e(n)},null,8,["row","has-value"]),d(g,{row:e(H).SMALL_STRAIGHT,"has-value":e(x)},null,8,["row","has-value"]),d(g,{row:e(H).LARGE_STRAIGHT,"has-value":e(F)},null,8,["row","has-value"]),d(g,{row:e(H).YAHTZEE,"has-value":e(Y)},null,8,["row","has-value"]),d(g,{row:e(H).CHANCE,"has-value":e(k)},null,8,["row","has-value"]),e(c)>=e(s).HAS_FINISHED?(t(),l("tr",{key:2,class:Q(["h-12 md:h-auto",e(c)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[o[4]||(o[4]=u("th",null,"BOTTOM",-1)),u("td",null,f(((J=e(T)[e(h)])==null?void 0:J.bottom)??""),1),e(N)===e(I).MULTIPLAYER?(t(!0),l(w,{key:0},D(e(O),i=>{var E;return t(),l("td",null,f(((E=e(T)[i.userId])==null?void 0:E.bottom)??""),1)}),256)):r("",!0)],2)):r("",!0),Object.values(e($)).some(i=>i.length>0)?(t(),l("tr",be,[o[5]||(o[5]=u("th",null,"YAHTZEE BONUS",-1)),u("td",null,f(e(A).getBonus(e(Z).YAHTZEE,e(h))||""),1),e(N)===e(I).MULTIPLAYER?(t(!0),l(w,{key:0},D(e(O),i=>(t(),l("td",null,f(e(A).getBonus(e(Z).YAHTZEE,i.userId)||""),1))),256)):r("",!0)])):r("",!0),e(c)===e(s).HAS_FINISHED?(t(),l(w,{key:4},[u("tr",Be,[o[6]||(o[6]=u("th",null,"TOTAL",-1)),u("td",null,[v(f(((q=e(T)[e(h)])==null?void 0:q.total)??"")+" ",1),e(R)&&e(U)===1?(t(),l("span",Ue," HIGHSCORE! ")):e(R)?(t(),l("span",Me," LEADERBOARD IMPROVEMENT! ")):e(te)?(t(),l("span",Ve," PERSONAL BEST! ")):r("",!0)]),e(N)===e(I).MULTIPLAYER?(t(!0),l(w,{key:0},D(e(O),i=>{var E;return t(),l("td",null,f(((E=e(T)[i.userId])==null?void 0:E.total)??""),1)}),256)):r("",!0)]),e(N)===e(I).MULTIPLAYER?(t(),l("tr",je,[o[7]||(o[7]=u("td",null,null,-1)),(t(!0),l(w,null,D(e(b),i=>{var E,re;return t(),l("td",null,[((E=e(T)[i.userId])==null?void 0:E.winStatus)==="win"?(t(),l(w,{key:0},[v(" WINNER! ")],64)):((re=e(T)[i.userId])==null?void 0:re.winStatus)==="tie"?(t(),l(w,{key:1},[v(" TIE! ")],64)):r("",!0)])}),256))])):r("",!0)],64)):r("",!0)])],2)}}}),Ze=ye(ze,[["__scopeId","data-v-0e7762c8"]]),We={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Ke={class:"flex flex-wrap justify-center gap-3"},Xe={key:1,class:"w-full"},Je={class:"flex justify-center"},qe={key:2,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},Qe={class:"w-full md:w-1/2 flex justify-center gap-3"},et={class:"w-full md:w-1/2 flex justify-center gap-3"},tt={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},at={key:3,class:"flex flex-wrap gap-3 mt-3 justify-center"},yt=ie({__name:"Yahtzee",setup(ee){const A=Ie(),C=de(),N=ce(),{onlineGameId:c,onlineGameChat:h,onlineGamePlayers:$,partyName:T,maxPlayers:P,isOnlineGameOwner:G,gameType:p,gameStatus:n,activePlayerId:x,myPlayerId:F,canRoll:Y,canReroll:k,dices:b,finalScore:O,personalBest:U}=W(C),{firebaseUser:R}=W(N),{start:te,$reset:B,createOnlineGame:M,continueOnlineGame:j,leaveOnlineGame:z,deleteOnlineGame:ae,getPlayerDisplayName:le,roll:se,updateYahtzeeHighscore:oe}=C,X=K(!1),o=K(!1),V=L(()=>P.value?P.value-$.value.length:0),J=()=>{o.value=!1,B()},q=()=>{o.value=!1,p.value=I.SOLO,te()},i=async()=>{c.value&&await z(),B()},E=async()=>{o.value=!1,c.value&&(G.value?await ae():await z()),B()};return fe(()=>{c.value&&j(c.value)}),me(async()=>{c.value&&(await z(),B())}),(re,a)=>(t(),_(ve,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",tags:e(p)===e(I).MULTIPLAYER&&e(T)?[{value:e(T),severity:"danger"}]:void 0,description:e(p)===e(I).SOLO?e(n)===e(s).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:y(()=>[u("div",We,[d(S,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:a[0]||(a[0]=ne=>X.value=!0)}),e(G)&&e(n)!==e(s).HAS_FINISHED?(t(),_(S,{key:0,variant:"danger",icon:"pi pi-trash",onClick:E})):r("",!0)])]),default:y(()=>{var ne;return[u("div",Ke,[e(n)===e(s).HAS_NOT_STARTED?(t(),l(w,{key:0},[d(S,{class:"w-full md:w-1/2",onClick:q},{default:y(()=>a[12]||(a[12]=[v(" Play Solo ")])),_:1,__:[12]}),d(S,{class:"w-full md:w-1/2",variant:"purple",onClick:a[1]||(a[1]=()=>{n.value=e(s).FINDING_OPPONENT,p.value=e(I).MULTIPLAYER})},{default:y(()=>a[13]||(a[13]=[v(" Play Online ")])),_:1,__:[13]}),e(n)===e(s).HAS_NOT_STARTED&&!o.value?(t(),_(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:a[2]||(a[2]=m=>o.value=!0)},{default:y(()=>a[14]||(a[14]=[v(" View Highscores ")])),_:1,__:[14]})):e(n)===e(s).HAS_NOT_STARTED?(t(),_(S,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[3]||(a[3]=m=>o.value=!1)},{default:y(()=>a[15]||(a[15]=[v(" Go Back ")])),_:1,__:[15]})):r("",!0)],64)):e(n)===e(s).FINDING_OPPONENT?(t(),l("div",Xe,[d(ke,{"allow-party":"",onCreateOnlineGame:a[4]||(a[4]=m=>e(M)([{userId:m}])),onContinueOnlineGame:e(j),onCreateParty:a[5]||(a[5]=(m,_e)=>e(M)([],m,_e)),onJoinParty:e(j)},null,8,["onContinueOnlineGame","onJoinParty"]),u("div",Je,[d(S,{class:"w-full md:w-1/2",variant:"neutral",onClick:i},{default:y(()=>a[16]||(a[16]=[v(" Go Back ")])),_:1,__:[16]})])])):e(n)!==e(s).HAS_FINISHED?(t(),l("div",qe,[u("div",Qe,[e(p)===e(I).MULTIPLAYER||e(Y)||e(k)?(t(),_(S,{key:0,class:"w-full",variant:"tertiary",disabled:e(x)!==e(F)||e(n)===e(s).HAS_CHOSEN_DICES||e(n)===e(s).WAITING_FOR_OPPONENTS||e(b).every(m=>m.selected),onClick:e(se)},{default:y(()=>[v(f(V.value?`Waiting for ${V.value} more player${V.value!==1?"s":""}`:e(x)!==e(F)?`${e(le)(e(x))}'s turn`:e(k)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):r("",!0)]),u("div",et,[(t(!0),l(w,null,D(e(b),m=>(t(),_(Te,{key:m.id,dice:m},null,8,["dice"]))),128))])])):r("",!0)]),o.value?(t(),_(he,{key:0,"game-id":e(ue).YAHTZEE},null,8,["game-id"])):!o.value&&e(n)!==e(s).FINDING_OPPONENT?(t(),_(Ze,{key:1})):r("",!0),e(p)===e(I).MULTIPLAYER&&e(n)>=e(s).HAS_STARTED?(t(),_(Oe,{key:2,chats:e(h)??[],onSendChat:a[6]||(a[6]=m=>h.value=[...e(h)??[],m])},null,8,["chats"])):r("",!0),u("div",tt,[e(n)>=e(s).WAITING_FOR_OPPONENTS&&e(n)<=e(s).HAS_FINISHED?(t(),l(w,{key:0},[e(p)===e(I).SOLO?(t(),_(S,{key:0,class:"w-full md:w-1/2",variant:e(n)===e(s).HAS_FINISHED?"secondary":"neutral",onClick:J},{default:y(()=>[v(f(e(n)===e(s).HAS_FINISHED?"Play Again":"Restart"),1)]),_:1},8,["variant"])):e(p)===e(I).MULTIPLAYER?(t(),l(w,{key:1},[e(G)?(t(),l(w,{key:1},[e(n)!==e(s).HAS_FINISHED?(t(),_(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:i},{default:y(()=>a[17]||(a[17]=[v(" Go Back ")])),_:1,__:[17]})):(t(),_(S,{key:1,class:"w-full md:w-1/2",variant:"danger",onClick:E},{default:y(()=>a[18]||(a[18]=[v(" Play Again ")])),_:1,__:[18]}))],64)):(t(),_(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:E},{default:y(()=>[v(f(e(n)===e(s).HAS_FINISHED?"Play Again":"Go Back"),1)]),_:1}))],64)):r("",!0)],64)):r("",!0),e(n)===e(s).HAS_FINISHED&&!o.value?(t(),_(S,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[7]||(a[7]=m=>o.value=!0)},{default:y(()=>a[19]||(a[19]=[v(" View Highscores ")])),_:1,__:[19]})):e(n)===e(s).HAS_FINISHED?(t(),_(S,{key:2,class:"w-full md:w-1/2",variant:"neutral",onClick:a[8]||(a[8]=m=>o.value=!1)},{default:y(()=>a[20]||(a[20]=[v(" View Your Score ")])),_:1,__:[20]})):r("",!0)]),e(n)===e(s).HAS_FINISHED?(t(),l("div",at,[e(R)?e(p)===e(I).SOLO&&(((ne=e(O)[e(F)])==null?void 0:ne.total)??0)>e(U)?(t(),_(S,{key:1,class:"w-full md:w-1/2",variant:"primary",onClick:a[10]||(a[10]=m=>e(oe)())},{default:y(()=>a[23]||(a[23]=[v(" Add To Leaderboard ")])),_:1,__:[23]})):r("",!0):(t(),_(ve,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:y(()=>[a[21]||(a[21]=v(" Please ")),u("a",{class:"cursor-pointer",onClick:a[9]||(a[9]=m=>e(A).push({name:e(Ee).LOGIN,params:{redirect:JSON.stringify({name:e(pe).GAMES_YAHTZEE})}}))}," Login "),a[22]||(a[22]=v(" to add your score to the leaderboard. "))]),_:1,__:[21,22]}))])):r("",!0),d(He,{"game-id":e(ue).YAHTZEE,"is-open":X.value,"onUpdate:isOpen":a[11]||(a[11]=m=>X.value=m)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{yt as default};
