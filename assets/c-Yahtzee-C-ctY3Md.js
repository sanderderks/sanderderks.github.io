import{d as ie,s as j,w as K,f as A,L as Se,g as a,j as t,q as n,m as u,I as d,h as e,k as i,_ as Z,A as V,a3 as F,aQ as v,C as g,E as L,aR as ye,aS as ue,o as ce,ax as me,z as ee,c as fe,l as $,a7 as Ie,y as pe}from"../bundle.js";import{u as de,s as Te,G as s,S as E,B,_ as Ee}from"./c-Dice.vue_vue_type_script_setup_true_lang-Ne4AvyUR.js";import{u as we,H as ge,_ as Oe}from"./c-useScoreInfo-BuqgYv10.js";import{_ as Ae,a as Ne}from"./c-GameChat.vue_vue_type_script_setup_true_lang-h5tQHG7E.js";import{_ as Pe,a as He}from"./c-GameActions.vue_vue_type_script_setup_true_lang-BNBQOUbb.js";import{_ as Re}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B6MMtiVw.js";import{_ as _e}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-Dice5.vue_vue_type_script_setup_true_lang-DK-8hWiG.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";const ke={class:"h-10"},Le={class:"w-1/2 md:w-1/3"},xe={key:0},$e={key:1,class:"!ps-1 md:ps-1"},De={key:2},Ge={key:0},Ye={key:1},Fe={key:2},be=ie({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(te){const h=te,b=de(),{gameType:m,gameStatus:S,activePlayerId:O,myPlayerId:x,opponents:y,reroll:N}=j(b),{selectScore:H,getScore:c,getActualValue:r}=b,R=K(!1),D=Te[h.row],G=A(()=>c(h.row,x.value)),p=A(()=>r(h.row,h.hasValue)),Y=A(()=>p.value===!1?"X":p.value);return Se(()=>p.value,()=>{R.value=!0,setTimeout(()=>{R.value=!1})}),(T,M)=>(t(),a("tr",ke,[n("th",Le,d(e(D).title),1),G.value?(t(),a("td",xe,d(G.value.value===!1?"X":G.value.value),1)):e(O)===e(x)&&e(N)>=0&&!R.value?(t(),a("td",$e,[i(Z,{class:"size-8",variant:p.value===!1||p.value===0?"neutral":void 0,onClick:M[0]||(M[0]=P=>e(H)(T.row,p.value))},{default:V(()=>[F(d(Y.value),1)]),_:1},8,["variant"])])):(t(),a("td",De)),e(m)===e(v).MULTIPLAYER?(t(!0),a(g,{key:3},L(e(y),P=>(t(),a(g,null,[e(c)(T.row,P.userId)?(t(),a("td",Ge,d(e(c)(T.row,P.userId).value===!1?"X":e(c)(T.row,P.userId).value),1)):e(O)===P.userId&&e(S)>e(s).HAS_STARTED?(t(),a("td",Ye,[i(Z,{class:"size-8",variant:p.value===!1||p.value===0?"neutral":"danger"},{default:V(()=>[F(d(Y.value),1)]),_:1},8,["variant"])])):(t(),a("td",Fe))],64))),256)):u("",!0)]))}}),w=_e(be,[["__scopeId","data-v-fe496a9d"]]),Me={key:0,class:"text-white"},Ue={key:1,class:"h-12 md:h-auto text-yellow-500"},Ce={key:3,class:"h-12 md:h-auto text-yellow-500"},Be={class:"h-12 md:h-auto text-pink-500"},Ve={key:0,class:"text-purple-500 font-bold"},We={key:1,class:"text-red-500 font-bold"},ze={key:2,class:"text-green-500 font-bold"},Ze={key:0,class:"h-12 md:h-auto text-red-500 font-bold"},je=ie({__name:"Scoreboard",setup(te){const h=de(),b=ye(),{gameType:m,gameStatus:S,myPlayerId:O,bonusScore:x,finalScore:y,hasOfValue:N,hasThreeOfAKind:H,hasFourOfAKind:c,hasFullHouse:r,hasSmallStraight:R,hasLargeStraight:D,hasYahtzee:G,diceTotal:p}=j(h),{players:Y,opponents:T}=j(b),{currentHighscorePosition:M,hasImprovedHighscorePosition:P,hasImprovedPersonalBest:ae}=we(ue.YAHTZEE),U=K(),C=K(!1),W=A(()=>N.value(1)),z=A(()=>N.value(2)),se=A(()=>N.value(3)),le=A(()=>N.value(4)),oe=A(()=>N.value(5)),re=A(()=>N.value(6));return ce(()=>{U.value=setInterval(()=>{C.value=!C.value},500)}),me(()=>{clearInterval(U.value)}),(X,l)=>{var k,J,q;return t(),a("table",{class:ee(["w-full mt-5 text-sm md:text-base text-left",e(S)===e(s).HAS_FINISHED?"text-neutral-500":"text-white",e(S)===e(s).HAS_NOT_STARTED?C.value?"even":"odd":void 0])},[e(m)===e(v).MULTIPLAYER?(t(),a("thead",Me,[n("tr",null,[l[0]||(l[0]=n("th",null,null,-1)),l[1]||(l[1]=n("th",null,"You",-1)),(t(!0),a(g,null,L(e(T),o=>(t(),a("th",{key:o.userId,class:ee(o.isOnline?"text-green-400":"text-red-400")},d(e(h).getPlayerDisplayName(o.userId)),3))),128))])])):u("",!0),n("tbody",null,[i(w,{row:e(E).ONES,"has-value":W.value},null,8,["row","has-value"]),i(w,{row:e(E).TWOS,"has-value":z.value},null,8,["row","has-value"]),i(w,{row:e(E).THREES,"has-value":se.value},null,8,["row","has-value"]),i(w,{row:e(E).FOURS,"has-value":le.value},null,8,["row","has-value"]),i(w,{row:e(E).FIVES,"has-value":oe.value},null,8,["row","has-value"]),i(w,{row:e(E).SIXES,"has-value":re.value},null,8,["row","has-value"]),e(S)>=e(s).HAS_FINISHED?(t(),a("tr",{key:0,class:ee(["h-12 md:h-auto",e(S)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[l[2]||(l[2]=n("th",null,"TOP",-1)),n("td",null,d(((k=e(y)[e(O)])==null?void 0:k.top)??""),1),e(m)===e(v).MULTIPLAYER?(t(!0),a(g,{key:0},L(e(T),o=>{var f;return t(),a("td",null,d(((f=e(y)[o.userId])==null?void 0:f.top)??""),1)}),256)):u("",!0)],2)):u("",!0),e(S)>e(s).HAS_NOT_STARTED&&Object.values(e(x)).some(o=>o.includes(e(B).TOP))?(t(),a("tr",Ue,[l[3]||(l[3]=n("th",null,"BONUS",-1)),n("td",null,d(e(h).getBonus(e(B).TOP,e(O))||""),1),e(m)===e(v).MULTIPLAYER?(t(!0),a(g,{key:0},L(e(T),o=>(t(),a("td",null,d(e(h).getBonus(e(B).TOP,o.userId)||""),1))),256)):u("",!0)])):u("",!0),i(w,{row:e(E).THREE_OF_A_KIND,"has-value":e(H)},null,8,["row","has-value"]),i(w,{row:e(E).FOUR_OF_A_KIND,"has-value":e(c)},null,8,["row","has-value"]),i(w,{row:e(E).FULL_HOUSE,"has-value":e(r)},null,8,["row","has-value"]),i(w,{row:e(E).SMALL_STRAIGHT,"has-value":e(R)},null,8,["row","has-value"]),i(w,{row:e(E).LARGE_STRAIGHT,"has-value":e(D)},null,8,["row","has-value"]),i(w,{row:e(E).YAHTZEE,"has-value":e(G)},null,8,["row","has-value"]),i(w,{row:e(E).CHANCE,"has-value":e(p)},null,8,["row","has-value"]),e(S)>=e(s).HAS_FINISHED?(t(),a("tr",{key:2,class:ee(["h-12 md:h-auto",e(S)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[l[4]||(l[4]=n("th",null,"BOTTOM",-1)),n("td",null,d(((J=e(y)[e(O)])==null?void 0:J.bottom)??""),1),e(m)===e(v).MULTIPLAYER?(t(!0),a(g,{key:0},L(e(T),o=>{var f;return t(),a("td",null,d(((f=e(y)[o.userId])==null?void 0:f.bottom)??""),1)}),256)):u("",!0)],2)):u("",!0),Object.values(e(x)).some(o=>o.includes(e(B).YAHTZEE))?(t(),a("tr",Ce,[l[5]||(l[5]=n("th",null,"YAHTZEE BONUS",-1)),n("td",null,d(e(h).getBonus(e(B).YAHTZEE,e(O))||""),1),e(m)===e(v).MULTIPLAYER?(t(!0),a(g,{key:0},L(e(T),o=>(t(),a("td",null,d(e(h).getBonus(e(B).YAHTZEE,o.userId)||""),1))),256)):u("",!0)])):u("",!0),e(S)===e(s).HAS_FINISHED?(t(),a(g,{key:4},[n("tr",Be,[l[6]||(l[6]=n("th",null,"TOTAL",-1)),n("td",null,[F(d(((q=e(y)[e(O)])==null?void 0:q.total)??"")+" ",1),e(P)&&e(M)===1?(t(),a("span",Ve," HIGHSCORE! ")):e(P)?(t(),a("span",We," LEADERBOARD IMPROVEMENT! ")):e(ae)?(t(),a("span",ze," PERSONAL BEST! ")):u("",!0)]),e(m)===e(v).MULTIPLAYER?(t(!0),a(g,{key:0},L(e(T),o=>{var f;return t(),a("td",null,d(((f=e(y)[o.userId])==null?void 0:f.total)??""),1)}),256)):u("",!0)]),e(m)===e(v).MULTIPLAYER?(t(),a("tr",Ze,[l[7]||(l[7]=n("td",null,null,-1)),(t(!0),a(g,null,L(e(Y),o=>{var f,Q;return t(),a("td",null,[((f=e(y)[o.userId])==null?void 0:f.winStatus)==="win"?(t(),a(g,{key:0},[F(" WINNER! ")],64)):((Q=e(y)[o.userId])==null?void 0:Q.winStatus)==="tie"?(t(),a(g,{key:1},[F(" TIE! ")],64)):u("",!0)])}),256))])):u("",!0)],64)):u("",!0)])],2)}}}),ve=_e(je,[["__scopeId","data-v-1103da31"]]),Ke={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Xe={class:"flex flex-wrap justify-center gap-3"},Je={key:0,class:"w-full"},qe={key:1,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},Qe={class:"w-full md:w-1/2 flex justify-center gap-3"},et={class:"w-full md:w-1/2 flex justify-center gap-3"},mt=ie({__name:"Yahtzee",setup(te){const h=de(),b=fe(),{gameId:m,chat:S,players:O,partyName:x,maxPlayers:y,isLocked:N,isOwner:H,gameType:c,gameStatus:r,activePlayerId:R,myPlayerId:D,canRoll:G,canReroll:p,dices:Y,finalScore:T,personalBest:M}=j(h),{isLoggedIn:P}=j(b),{start:ae,$reset:U,createOnlineGame:C,continueOnlineGame:W,leaveOnlineGame:z,deleteOnlineGame:se,getPlayerDisplayName:le,roll:oe,updateYahtzeeHighscore:re}=h,X=K(!1),l=K(!1),k=A(()=>y.value!==null&&y.value>0?y.value-O.value.length:0),J=A(()=>H.value&&O.value.length>1),q=()=>{c.value=v.MULTIPLAYER,r.value=s.FINDING_OPPONENT},o=()=>{N.value=!0,r.value=s.HAS_STARTED},f=async()=>{m.value&&(H.value?await se():await z()),U()},Q=async()=>{m.value&&await z(),U()};return ce(()=>{m.value&&W(m.value)}),me(async()=>{m.value&&(await z(),U())}),(tt,I)=>(t(),$(pe,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",tags:e(c)===e(v).MULTIPLAYER&&e(x)?[{value:e(x),severity:"danger"}]:void 0,description:e(c)===e(v).SOLO?e(r)===e(s).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:V(()=>[n("div",Ke,[i(Z,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:I[0]||(I[0]=ne=>X.value=!0)}),i(He,{"icon-only":"","is-solo":e(c)===e(v).SOLO,"is-owner":e(H),"has-game-started":e(r)>=e(s).WAITING_FOR_OPPONENTS,"is-game-over":e(r)===e(s).HAS_FINISHED,onDelete:f},null,8,["is-solo","is-owner","has-game-started","is-game-over"])])]),default:V(()=>{var ne;return[n("div",Xe,[e(r)===e(s).FINDING_OPPONENT?(t(),a("div",Je,[i(Ae,{"allow-party":"",onCreateOnlineGame:I[1]||(I[1]=_=>e(C)([{userId:_}])),onContinueOnlineGame:e(W),onCreateParty:I[2]||(I[2]=(_,he)=>e(C)([],_,he)),onJoinParty:e(W)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(r)>=e(s).WAITING_FOR_OPPONENTS&&e(r)<e(s).HAS_FINISHED?(t(),a("div",qe,[n("div",Qe,[e(r)===e(s).WAITING_FOR_OPPONENTS?(t(),$(Z,{key:0,class:"w-full",variant:"tertiary",disabled:!J.value,onClick:o},{default:V(()=>[F(d(k.value?`Waiting for ${k.value} more player${k.value!==1?"s":""}`:e(H)?e(O).length>1?"Everyone is here? Start the game!":"Waiting for more players to join":"Waiting for the game to start"),1)]),_:1},8,["disabled"])):e(c)===e(v).MULTIPLAYER||e(G)||e(p)?(t(),$(Z,{key:1,class:"w-full",variant:"tertiary",disabled:e(R)!==e(D)||e(r)===e(s).HAS_CHOSEN_DICES||e(Y).every(_=>_.selected),onClick:e(oe)},{default:V(()=>[F(d(k.value?`Waiting for ${k.value} more player${k.value!==1?"s":""}`:e(R)!==e(D)?`${e(le)(e(R))}'s turn`:e(p)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):u("",!0)]),n("div",et,[(t(!0),a(g,null,L(e(Y),_=>(t(),$(Ee,{key:_.id,dice:_},null,8,["dice"]))),128))])])):u("",!0)]),!l.value&&e(r)>=e(s).WAITING_FOR_OPPONENTS?(t(),$(ve,{key:0})):u("",!0),!l.value&&e(c)===e(v).MULTIPLAYER&&e(r)>=e(s).WAITING_FOR_OPPONENTS?(t(),$(Ne,{key:1,chats:e(S)??[],onSendChat:I[3]||(I[3]=_=>S.value=[...e(S)??[],_])},null,8,["chats"])):u("",!0),i(Pe,{"is-viewing-highscores":l.value,"onUpdate:isViewingHighscores":I[4]||(I[4]=_=>l.value=_),"has-solo":"","is-solo":e(c)===e(v).SOLO,hasMultiplayer:"",isMultiplayer:e(c)===e(v).MULTIPLAYER,"is-owner":e(H),"is-main-menu":e(r)===e(s).HAS_NOT_STARTED,"has-game-started":e(r)>=e(s).WAITING_FOR_OPPONENTS,"is-game-over":e(r)===e(s).HAS_FINISHED,onPlaySolo:e(ae),onPlayMultiplayer:q,onRestart:f,onGoBack:Q},null,8,["is-viewing-highscores","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),!l.value&&e(r)===e(s).HAS_NOT_STARTED?(t(),$(ve,{key:2})):u("",!0),l.value?(t(),$(ge,{key:3,"game-id":e(ue).YAHTZEE},null,8,["game-id"])):u("",!0),i(Oe,{"is-logged-in":e(P),"is-solo":e(c)===e(v).SOLO,"is-game-over":e(r)===e(s).HAS_FINISHED,"final-score":((ne=e(T)[e(D)])==null?void 0:ne.total)??0,"personal-best":e(M),"redirect-route":e(Ie).GAMES_YAHTZEE,onUpdateHighscore:I[5]||(I[5]=_=>e(re)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),i(Re,{"game-id":e(ue).YAHTZEE,"is-open":X.value,"onUpdate:isOpen":I[6]||(I[6]=_=>X.value=_)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{mt as default};
