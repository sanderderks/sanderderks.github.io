import{_ as S,a as R,c as q}from"./Bubble.vue_vue_type_script_setup_true_lang-Bg7w0uV0.js";import{a4 as J,aC as Q,d as x,s as U,a as d,o as i,c as p,i as r,t as v,u as l,j as o,x as T,k as A,v as F,l as H,F as K,B as ee,n as te}from"../bundle.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";var u=(e=>(e[e.ONES=0]="ONES",e[e.TWOS=1]="TWOS",e[e.THREES=2]="THREES",e[e.FOURS=3]="FOURS",e[e.FIVES=4]="FIVES",e[e.SIXES=5]="SIXES",e[e.THREE_OF_A_KIND=6]="THREE_OF_A_KIND",e[e.FOUR_OF_A_KIND=7]="FOUR_OF_A_KIND",e[e.FULL_HOUSE=8]="FULL_HOUSE",e[e.SMALL_STRAIGHT=9]="SMALL_STRAIGHT",e[e.LARGE_STRAIGHT=10]="LARGE_STRAIGHT",e[e.YAHTZEE=11]="YAHTZEE",e[e.CHANCE=12]="CHANCE",e))(u||{});const _={0:{title:"Ones",section:"top"},1:{title:"Twos",section:"top",multiplier:2},2:{title:"Threes",section:"top",multiplier:3},3:{title:"Fours",section:"top",multiplier:4},4:{title:"Fives",section:"top",multiplier:5},5:{title:"Sixes",section:"top",multiplier:6},6:{title:"Three of a Kind",section:"bottom"},7:{title:"Four of a Kind",section:"bottom"},8:{title:"Full House",section:"bottom",trueValue:25},9:{title:"Small Straight",section:"bottom",trueValue:30},10:{title:"Large Straight",section:"bottom",trueValue:40},11:{title:"Yahtzee",section:"bottom",trueValue:50},12:{title:"Chance",section:"bottom"}},N=(e,a)=>{for(let t=1;t<=6;t++)if(e.yahtzee.dices.filter(s=>s.value===t).length>=a){let s=0;return e.yahtzee.dices.forEach(c=>{s+=c.value}),s}return!1},V=(e,a)=>{for(let t=1;t<=6;t++)if(e.yahtzee.dices.filter(s=>s.value===t).length===a)return!0;return!1},b=(e,a)=>{let t=0,s=a;do{e:for(let c=s-a+1;c<=s;c++)if(e.yahtzee.dices.some(f=>f.value===c))t++;else break e;if(t===a)return!0;t=0,s++}while(s<=6);return!1},k=()=>({score:[],round:-1,reroll:-1,dices:[{id:1,value:1,selected:!1},{id:2,value:1,selected:!1},{id:3,value:1,selected:!1},{id:4,value:1,selected:!1},{id:5,value:1,selected:!1}]}),G=J("gameStore",{state:()=>({yahtzee:k()}),getters:{hasStarted:e=>e.yahtzee.round>=0,hasFinished:e=>e.yahtzee.score.length===13,hasOfValue:e=>a=>e.yahtzee.dices.filter(t=>t.value===a).length,hasThreeOfAKind:e=>N(e,3),hasFourOfAKind:e=>N(e,4),hasFullHouse:e=>V(e,2)&&V(e,3)?_[8].trueValue??!1:!1,hasSmallStraight:e=>b(e,4)?_[9].trueValue??!1:!1,hasLargeStraight:e=>b(e,5)?_[10].trueValue??!1:!1,hasYahtzee:e=>V(e,5)?_[11].trueValue??!1:!1,diceTotal:e=>{let a=0;return e.yahtzee.dices.forEach(t=>{a+=t.value}),a},scoreTotalTop:e=>{let a=0;return e.yahtzee.score.filter(t=>_[t.row].section==="top").forEach(t=>{t.value!==!1&&(a+=t.value)}),a},scoreTotalBottom:e=>{let a=0;return e.yahtzee.score.filter(t=>_[t.row].section==="bottom").forEach(t=>{t.value!==!1&&(a+=t.value)}),a}},actions:{reset(){this.$patch({yahtzee:k()})},start(){this.yahtzee.round=0},roll(){this.yahtzee.reroll++,this.yahtzee.dices.forEach(e=>{e.selected||(e.value=Q(6))}),this.yahtzee.dices.sort((e,a)=>e.value-a.value)},getScore(e){return this.yahtzee.score.find(a=>a.row===e)},getActualValue(e,a){let t=a;if(t===!1)return!1;const s=_[e];return s.multiplier?t*=s.multiplier:s.trueValue&&(t=s.trueValue),t},selectScore(e,a){this.yahtzee.score.push({row:e,value:a}),this.yahtzee.round++;const t=k();this.yahtzee.reroll=t.reroll,this.yahtzee.dices=t.dices}},persist:{enabled:!0}}),le={class:"w-1/3"},ae={key:0},se={key:1},re={key:2},oe=x({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(e){const a=e,t=G(),{yahtzee:s}=U(t),{selectScore:c,getScore:f,getActualValue:y}=t,w=_[a.row],E=d(()=>f(a.row)),m=d(()=>y(a.row,a.hasValue));return(C,z)=>(i(),p("tr",null,[r("th",le,v(l(w).title),1),E.value?(i(),p("td",ae,v(E.value.value===!1?"X":E.value.value),1)):l(s).reroll>=0?(i(),p("td",se,[o(S,{class:"!p-0",type:m.value===!1||m.value===0?"neutral":void 0,onClick:z[0]||(z[0]=L=>l(c)(C.row,m.value))},{default:T(()=>[A(v(m.value===!1?"X":m.value),1)]),_:1},8,["type"])])):(i(),p("td",re))]))}}),n=$(oe,[["__scopeId","data-v-5c3d6f31"]]),ue={class:"flex justify-center"},ne={key:1,class:"w-full flex justify-between"},ie={class:"w-1/2 flex gap-3 justify-center"},he={key:0,class:"w-1/2 flex justify-center gap-3"},ce={class:"w-full mt-5 text-left"},fe={class:"text-neutral-500"},ve={class:"text-neutral-500"},_e={class:"text-neutral-500"},de={key:0,class:"text-pink-500"},pe=x({__name:"Yahtzee",setup(e){const a=G(),{yahtzee:t,hasStarted:s,hasFinished:c,hasOfValue:f,hasThreeOfAKind:y,hasFourOfAKind:w,hasFullHouse:E,hasSmallStraight:m,hasLargeStraight:C,hasYahtzee:z,diceTotal:L,scoreTotalTop:O,scoreTotalBottom:I}=U(a),{start:B,reset:D,roll:Y}=a,X=d(()=>f.value(1)),j=d(()=>f.value(2)),M=d(()=>f.value(3)),W=d(()=>f.value(4)),Z=d(()=>f.value(5)),P=d(()=>f.value(6));return(Te,h)=>(i(),F(q,null,{content:T(()=>[o(R,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:"Play solo."},{default:T(()=>[r("div",ue,[l(s)?(i(),p("div",ne,[r("div",ie,[o(S,{class:"w-1/4",type:"neutral",onClick:l(D)},{default:T(()=>h[1]||(h[1]=[A(" Restart ")])),_:1},8,["onClick"]),!l(c)&&l(t).reroll<2?(i(),F(S,{key:0,class:"w-1/4",type:"tertiary",onClick:l(Y)},{default:T(()=>[A(v(l(t).reroll>=0?"Reroll":"Roll"),1)]),_:1},8,["onClick"])):H("",!0)]),l(t).reroll>=0?(i(),p("div",he,[(i(!0),p(K,null,ee(l(t).dices,g=>(i(),F(S,{type:g.selected?"danger":"neutral",onClick:Ee=>g.selected=!g.selected},{default:T(()=>[A(v(g.value),1)]),_:2},1032,["type","onClick"]))),256))])):H("",!0)])):(i(),F(S,{key:0,class:"w-1/4",onClick:l(B)},{default:T(()=>h[0]||(h[0]=[A(" Start ")])),_:1},8,["onClick"]))]),r("table",ce,[r("tbody",null,[o(n,{row:l(u).ONES,"has-value":X.value},null,8,["row","has-value"]),o(n,{row:l(u).TWOS,"has-value":j.value},null,8,["row","has-value"]),o(n,{row:l(u).THREES,"has-value":M.value},null,8,["row","has-value"]),o(n,{row:l(u).FOURS,"has-value":W.value},null,8,["row","has-value"]),o(n,{row:l(u).FIVES,"has-value":Z.value},null,8,["row","has-value"]),o(n,{row:l(u).SIXES,"has-value":P.value},null,8,["row","has-value"]),r("tr",fe,[h[2]||(h[2]=r("th",null,"TOP",-1)),r("td",null,v(l(O)),1)]),r("tr",ve,[h[3]||(h[3]=r("th",null,"BONUS",-1)),r("td",{class:te(l(O)>=63?"text-yellow-500":"text-neutral-500")},v(l(O)>=63?35:l(c)?"X":""),3)]),o(n,{row:l(u).THREE_OF_A_KIND,"has-value":l(y)},null,8,["row","has-value"]),o(n,{row:l(u).FOUR_OF_A_KIND,"has-value":l(w)},null,8,["row","has-value"]),o(n,{row:l(u).FULL_HOUSE,"has-value":l(E)},null,8,["row","has-value"]),o(n,{row:l(u).SMALL_STRAIGHT,"has-value":l(m)},null,8,["row","has-value"]),o(n,{row:l(u).LARGE_STRAIGHT,"has-value":l(C)},null,8,["row","has-value"]),o(n,{row:l(u).YAHTZEE,"has-value":l(z)},null,8,["row","has-value"]),o(n,{row:l(u).CHANCE,"has-value":l(L)},null,8,["row","has-value"]),r("tr",_e,[h[4]||(h[4]=r("th",null,"BOTTOM",-1)),r("td",null,v(l(I)),1)]),l(c)?(i(),p("tr",de,[h[5]||(h[5]=r("th",null,"TOTAL",-1)),r("td",null,v(l(O)+(l(O)>=63?35:0)+l(I)),1)])):H("",!0)])])]),_:1})]),_:1}))}}),me=$(pe,[["__scopeId","data-v-2f745a5b"]]),Fe=x({__name:"Games",setup(e){return(a,t)=>(i(),F(me))}});export{Fe as default};
