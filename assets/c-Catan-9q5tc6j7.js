import{aW as Ll,a_ as Ml,c as je,aX as Hl,aV as Fl,s as ce,a$ as Yl,b0 as sl,aS as he,w as se,a9 as il,f as h,b1 as Ul,L as Ye,o as Vl,b2 as Ue,K as k,b3 as zl,b4 as Wl,aY as ol,b5 as jl,aZ as Kl,d as fe,g as i,j as a,z as M,l as j,aT as ml,C as z,q as v,t as Ve,m as S,I as N,h as e,A as Q,_ as B,a3 as ue,k as G,E as ze,y as Zl,an as ql}from"../bundle.js";import{_ as Jl}from"./c-FindOpponentDeprecated.vue_vue_type_script_setup_true_lang-CSEzKHji.js";import{_ as Xl}from"./c-GameChat.vue_vue_type_script_setup_true_lang-BHc_8rRc.js";import{P as rl,_ as Ql}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B7V19gF1.js";import{_ as en,a as ln,b as nn,c as tn,d as an}from"./c-Dice5.vue_vue_type_script_setup_true_lang-DK-8hWiG.js";import{_ as sn}from"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import{_ as me}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-wWpAWb7S.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CWtsg3qw.js";var ie=(n=>(n[n.PLAYER=0]="PLAYER",n[n.OPPONENT=1]="OPPONENT",n))(ie||{}),w=(n=>(n[n.DESERT=0]="DESERT",n[n.WOOD_FOREST=1]="WOOD_FOREST",n[n.SHEEP_PASTURE=2]="SHEEP_PASTURE",n[n.GRAIN_FIELD=3]="GRAIN_FIELD",n[n.BRICK_HILL=4]="BRICK_HILL",n[n.ORE_MOUNTAIN=5]="ORE_MOUNTAIN",n))(w||{}),K=(n=>(n[n.ROAD=0]="ROAD",n[n.VILLAGE=1]="VILLAGE",n[n.CITY=2]="CITY",n))(K||{}),ge=(n=>(n[n.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",n[n.FINDING_OPPONENT=1]="FINDING_OPPONENT",n[n.IS_PLAYING=2]="IS_PLAYING",n[n.HAS_FINISHED=3]="HAS_FINISHED",n))(ge||{}),ee=(n=>(n[n.IS_INITIALIZING=0]="IS_INITIALIZING",n[n.IS_CREATING_MAP=1]="IS_CREATING_MAP",n[n.BUILDING_PHASE=2]="BUILDING_PHASE",n[n.FINISHED_BUILDING_PHASE=3]="FINISHED_BUILDING_PHASE",n[n.IS_GENERATING_NUMBERS=4]="IS_GENERATING_NUMBERS",n[n.IS_FINISHING_UP=5]="IS_FINISHING_UP",n[n.CAN_MOVE_ROBBER=6]="CAN_MOVE_ROBBER",n[n.PRODUCTION_PHASE=7]="PRODUCTION_PHASE",n[n.ACTION_PHASE=8]="ACTION_PHASE",n))(ee||{}),ke=(n=>(n[n.CAN_BUILD=0]="CAN_BUILD",n[n.CAN_MOVE=1]="CAN_MOVE",n))(ke||{});const _e=Ll("catanStore",()=>{const n=Ml(),o=je(),g=Hl(),m=Fl(),{firebaseUser:u}=ce(o),{onlineGames:Z,onlineGamesLoading:W,onlineGameId:A,onlineGameCreatorId:q,onlineGameOpponentId:H,onlineGameOpponentActive:P,onlineGameChat:_,isInitializingOnlineGame:Y,isOnlineGameOwner:p,onlineGameOpponentName:O}=ce(m),{fetchOnlineGames:F,createOnlineGame:f,continueOnlineGame:T,updateOnlineGame:x,leaveOnlineGame:U,deleteOnlineGame:re}=m,de={onlineGames:Yl(n,sl.GAME_DATA,he.CATAN,sl.ONLINE_GAMES)},D=se(0),I=se(0),$=se(0),b=se(0),E=se(!1),X=se(ul()),be=se(cl()),Ie=se(dl()),c=se([]),le=se([]),te=se([]),V=il(gl()),ve=il(fl()),_l=h(()=>[[c.value[19],c.value[20],c.value[21],c.value[22]],[c.value[36],c.value[18],c.value[7],c.value[8],c.value[23]],[c.value[35],c.value[17],c.value[6],c.value[1],c.value[9],c.value[24]],[c.value[34],c.value[16],c.value[5],c.value[0],c.value[2],c.value[10],c.value[25]],[c.value[33],c.value[15],c.value[4],c.value[3],c.value[11],c.value[26]],[c.value[32],c.value[14],c.value[13],c.value[12],c.value[27]],[c.value[31],c.value[30],c.value[29],c.value[28]]].map(l=>l.filter(t=>!!t))),s=h(()=>V[0]),Ge=h(()=>X.value.some(l=>l.isRolling)),Ke=h(()=>Ul(X.value,l=>l.value)),$e=h(()=>b.value===0&&[2,8].includes(I.value)),xe=h(()=>s.value.buildings[0]===vl),Be=h(()=>s.value.buildings[1]===Ne&&!xe.value),Te=h(()=>s.value.buildings[0]===vl-1&&!Be.value),Ze=h(()=>s.value.buildings[1]===Ne-1&&!Te.value);Ye(ve,l=>{(l[0]===10||l[1]===10)&&(D.value=3)},{deep:!0}),Ye(D,l=>{l===3&&ol(Kl)}),Ye([D,I,$,b,Ge],()=>{nl()},{deep:!0}),Vl(()=>{g.$init(he.CATAN)});const De=()=>{m.$reset(),D.value=0,E.value=!1,I.value=0,$.value=0,b.value=0,X.value=ul(),be.value=cl(),Ie.value=dl(),c.value=[],le.value=[],te.value=[],Object.assign(V,gl()),Object.assign(ve,fl())},Il=()=>{const l=Ue(be.value.length);return be.value.splice(l,1)[0]},yl=()=>{const l=Ue(Ie.value.length);return Ie.value.splice(l,1)[0]},pe=l=>le.value.find(t=>t.id===l),Ae=(l,t)=>te.value.find(r=>r.cornerFromId===l&&r.cornerToId===t),qe=l=>c.value.filter(we).filter(t=>t.cornerIds.includes(l)),Je=l=>te.value.filter(t=>t.cornerFromId===l||t.cornerToId===l),Pe=l=>l.cornerIds.flatMap(pe).filter(t=>!!t),Ee=l=>te.value.filter(t=>l.cornerIds.includes(t.cornerFromId)&&l.cornerIds.includes(t.cornerToId)),Xe=l=>{const t=pe(l);return(t==null?void 0:t.connectedCornerIds.map(pe).filter(d=>!!d))??[]},Qe=l=>{var r;const t=l===0?(r=u.value)==null?void 0:r.uid:H.value;return te.value.filter(d=>{var R;return((R=d.building)==null?void 0:R.type)===0&&d.building.ownerId===t})},Le=l=>{var r;const t=l===0?(r=u.value)==null?void 0:r.uid:H.value;return le.value.filter(d=>{var R;return((R=d.building)==null?void 0:R.type)===1&&d.building.ownerId===t})},wl=l=>{var r;const t=l===0?(r=u.value)==null?void 0:r.uid:H.value;return le.value.filter(d=>{var R;return((R=d.building)==null?void 0:R.type)===2&&d.building.ownerId===t})},we=l=>"cornerIds"in l&&"isBlocked"in l,Ol=l=>"inputType"in l&&"input"in l&&"output"in l,Me=l=>!!l&&"connectedCornerIds"in l,He=l=>!!l&&"cornerFromId"in l,Ce=l=>Je(l).some(t=>{var r;return t.building&&t.building.ownerId===((r=u.value)==null?void 0:r.uid)}),Re=(l,t)=>Xe(l).some(r=>r.building&&(r.building.type===1||r.building.type===2)&&(t===void 0||r.id!==t)),el=async()=>{for(;Ge.value;)await new Promise(l=>setTimeout(l,g.diceRollSpeed*1e3));return!0},Nl=async()=>{if(p.value){I.value=1;for(let l=1;l<=19;l++)c.value.push({id:l,type:l===1?0:Il(),value:null,cornerIds:pl[l],isBlocked:l===1}),pl[l].forEach(t=>{le.value.find(r=>r.id===t)||le.value.push({id:t,building:null,connectedCornerIds:un[t]})}),await new Promise(t=>setTimeout(t,500));for(let l=1e3;l<=1018;l++){const t=yl();c.value.push({id:l,inputType:t??null,input:t?2:t===null?3:0,output:1}),await new Promise(r=>setTimeout(r,500))}te.value=cn.map(([l,t])=>({cornerFromId:l,cornerToId:t,building:null})),I.value=2}},hl=async()=>{if(!p.value)return;I.value=4;const l=[2,3,3,4,4,5,5,6,6,8,8,9,9,10,10,11,11,12];for(let t=0;t<18;t++){const r=c.value.filter(we).filter(y=>y.type!==0&&!y.value),d=Ue(r.length),R=r[d];R.value=l[t],await new Promise(y=>setTimeout(y,500))}I.value=5,await ll(null),I.value=7},ll=async l=>{var t,r,d,R;if(l===null){const y=le.value.filter(L=>!!L.building);for(const L of y){const ne=L.building,C=qe(L.id);for(const oe of C)oe.type&&(ne.type===1?ne.ownerId===((t=u.value)==null?void 0:t.uid)?V[0].cards[oe.type]++:V[1].cards[oe.type]++:ne.type===2&&(ne.ownerId===((r=u.value)==null?void 0:r.uid)?V[0].cards[oe.type]+=2:V[1].cards[oe.type]+=2),await new Promise(ae=>setTimeout(ae,500)))}}else{const y=c.value.filter(we).filter(C=>C.value===l),L=new Map;for(const C of y){if(!C.type)continue;if(C.isBlocked){k.error("Blocked by the Robber!");continue}const oe=C.cornerIds.map(pe).map(ae=>ae==null?void 0:ae.building).filter(ae=>!!ae);for(const ae of oe)ae.type===1?ae.ownerId===((d=u.value)==null?void 0:d.uid)?(V[0].cards[C.type]++,L.set(C.type,(L.get(C.type)||0)+1)):V[1].cards[C.type]++:ae.type===2&&(ae.ownerId===((R=u.value)==null?void 0:R.uid)?(V[0].cards[C.type]+=2,L.set(C.type,(L.get(C.type)||0)+2)):V[1].cards[C.type]+=2),await new Promise(Dl=>setTimeout(Dl,500))}let ne=!1;for(const[C,oe]of L.entries())oe>0&&(ne=!0,k.success(`You received ${oe} ${w[C].toString().substring(0,1).toUpperCase()}${w[C].toString().substring(1)}${oe>1?"s":""}!`));ne||k.error("No cards this time!")}},kl=l=>{s.value.selected!==l?s.value.buildings[l]>0?$e.value?[1,0].includes(l)?s.value.selected=l:k.warning("You cannot choose this building at this point"):k.warning("You cannot do this at this point"):k.warning("You don't have any!"):s.value.selected=null},Al=l=>{var t,r,d,R;if(I.value===6)if(!l.isBlocked&&l.type!==0){const y=c.value.filter(we).find(L=>L.isBlocked);y&&(y.isBlocked=!1,l.isBlocked=!0,Fe(),k.success("Moved the Robber!"))}else k.warning("Move the Robber to another card");else if($e.value)if($.value===0)if(s.value.selected!==null)if(b.value===0)switch(s.value.selected){case 0:{xe.value||Te.value?Pl(l):(s.value.selected=null,k.warning("You can only place two roads at this point"));break}case 1:{Be.value||Ze.value?Cl(l):(s.value.selected=null,k.warning("You can only place two villages at this point"));break}}else k.warning("It is not your turn");else k.warning("Select a building type first");else $.value===1&&(((r=(t=s.value.lastPlaced)==null?void 0:t.building)==null?void 0:r.type)===0?Ee(l).some(y=>!!y.building)&&El(l):((R=(d=s.value.lastPlaced)==null?void 0:d.building)==null?void 0:R.type)===1&&Pe(l).some(y=>!!y.building)&&Rl(l))},Pl=l=>{const t=Ee(l),r=t.filter(d=>!!d.building);if(r.length===6)k.warning("No building spots left here!");else if(!r.length)Oe(t[0],0);else for(const d of t)if(!d.building){Oe(d,0);break}},El=l=>{var d;if(!u.value)return;const t=Ee(l),r=t.filter(R=>!!R.building);if(r.length===6)k.warning("Nothing can be moved");else if(r.length){const R=s.value.lastPlaced;if(He(R)){const y=Ae(R.cornerFromId,R.cornerToId);if(((d=y==null?void 0:y.building)==null?void 0:d.ownerId)===u.value.uid){let L=t.indexOf(y);for(let ne=0;ne<5;ne++){L<5?L++:L=0;const C=t[L];if(C!==y&&!C.building){Oe(C,0,!0),y.building=null;break}}}}}},Cl=l=>{const t=Pe(l);if(t.filter(d=>!!d.building).length===3)k.warning("No building spots left here!");else{for(const d of t)if(!d.building&&Ce(d.id)&&!Re(d.id)){Oe(d,1);return}t.every(d=>!Ce(d.id))?k.warning("A village needs to be attached to a road."):t.some(d=>Re(d.id))&&k.warning("A village cannot be next to another village.")}},Rl=l=>{var d;if(!u.value)return;const t=Pe(l),r=t.filter(R=>!!R.building);if(r.length===3)k.warning("Nothing can be moved");else if(r.length){const R=s.value.lastPlaced;if(Me(R)){const y=pe(R.id);if(((d=y==null?void 0:y.building)==null?void 0:d.ownerId)===u.value.uid){let L=t.indexOf(y);for(let ne=0;ne<5;ne++){L<5?L++:L=0;const C=t[L];if(C!==y&&!C.building&&Ce(C.id)&&!Re(C.id,y.id)){Oe(C,1,!0),y.building=null;return}}}}}},Oe=(l,t,r=!1)=>{if(u.value){if(t!==0&&Me(l)){const d=pe(l.id);d&&(d.building={ownerId:u.value.uid,type:t},s.value.lastPlaced=d)}else if(t===0&&He(l)){const d=Ae(l.cornerFromId,l.cornerToId);d&&(d.building={ownerId:u.value.uid,type:t},s.value.lastPlaced=d)}r||(s.value.selected=null,s.value.buildings[t]--),$.value=1}},Sl=async()=>{const l=g.diceRollSpeed*1e3;X.value[0].isRolling=!0,X.value.forEach(t=>{t.isRolling=!0,setTimeout(()=>{t.value=zl(6),t.isRolling=!1},Wl(l,l/3))}),ol(jl),await el(),Ke.value===7?I.value=6:(await ll(Ke.value),I.value=8)},Gl=()=>{var l,t;$.value===1&&(s.value.buildings[1]>=Ne-1&&((t=(l=s.value.lastPlaced)==null?void 0:l.building)==null?void 0:t.type)===0?$.value=0:Fe())},$l=()=>{var l,t;if($.value===1&&(l=s.value.lastPlaced)!=null&&l.building&&s.value.lastPlaced.building.ownerId===((t=u.value)==null?void 0:t.uid)){if(s.value.buildings[s.value.lastPlaced.building.type]++,s.value.selected=s.value.lastPlaced.building.type,Me(s.value.lastPlaced)){const r=pe(s.value.lastPlaced.id);r&&(r.building=null)}else if(He(s.value.lastPlaced)){const r=Ae(s.value.lastPlaced.cornerFromId,s.value.lastPlaced.cornerToId);r&&(r.building=null)}s.value.lastPlaced=null,$.value=0}},Fe=()=>{I.value===2?V[0].buildings[1]===Ne-2&&V[1].buildings[1]===Ne-2?(E.value=!0,I.value=3,$.value=0,b.value=1):(E.value=!0,$.value=0,b.value=1):(I.value===8||I.value===6)&&(E.value=!0,I.value=7,b.value=1)},xl=l=>{switch(l){case 0:{s.value.buildings[0]+Qe(0).length<Se?s.value.cards[1]>=1&&s.value.cards[4]>=1?(s.value.cards[1]--,s.value.cards[4]--,s.value.buildings[0]++,k.success("You bought a road")):k.warning("Not enough resources"):k.warning("You cannot buy more roads");break}case 1:{s.value.buildings[1]+Le(0).length<Se?s.value.cards[3]>=1&&s.value.cards[2]>=1&&s.value.cards[1]>=1&&s.value.cards[4]>=1?(s.value.cards[3]--,s.value.cards[2]--,s.value.cards[1]--,s.value.cards[4]--,s.value.buildings[1]++,k.success("You bought a village")):k.warning("Not enough resources"):k.warning("You cannot buy more villages");break}case 2:{s.value.buildings[2]+Le(0).length<Se?s.value.cards[3]>=2&&s.value.cards[5]>=3?(s.value.cards[3]-=2,s.value.cards[5]-=3,s.value.buildings[2]++,k.success("You bought a city")):k.warning("Not enough resources"):k.warning("You cannot buy more cities");break}case"development":{s.value.cards[2]>=1&&s.value.cards[3]>=1&&s.value.cards[5]>=1?(s.value.cards[3]--,s.value.cards[5]--,s.value.cards.development++,k.success("You bought a development card")):k.warning("Not enough resources");break}}},Bl=l=>{u.value&&(D.value=2,m.$init(he.CATAN,al,tl,De),f(l))},Tl=l=>{m.$init(he.CATAN,al,tl,De),T(l)},nl=()=>{!(u!=null&&u.value)||!H.value||b.value===1&&!E.value&&!Y.value||x()},tl=(l,t)=>({gameStatus:D.value,catanStatus:I.value,buildingStatus:$.value,activePlayer:b.value===0?l:t,dices:X.value,cardMap:c.value,cornerMap:le.value,roadMap:te.value,score:{[l]:ve[0],[t]:ve[1]},inventoryState:{[l]:V[0],[t]:V[1]}}),al=l=>{var r;const t=(r=u.value)==null?void 0:r.uid;!t||b.value===0&&!Y.value||(D.value=l.gameStatus,I.value=l.catanStatus,$.value=l.buildingStatus,b.value=l.activePlayer===t?0:1,X.value=l.dices,c.value=l.cardMap,le.value=l.cornerMap,te.value=l.roadMap,p.value?(ve[0]=l.score[l.creatorId],ve[1]=l.score[l.opponentId],V[0]=l.inventoryState[l.creatorId],V[1]=l.inventoryState[l.opponentId]):(ve[0]=l.score[l.opponentId],ve[1]=l.score[l.creatorId],V[0]=l.inventoryState[l.opponentId],V[1]=l.inventoryState[l.creatorId]))};return{collections:de,onlineGames:Z,onlineGamesLoading:W,onlineGameId:A,onlineGameCreatorId:q,onlineGameOpponentId:H,onlineGameOpponentActive:P,onlineGameChat:_,isOnlineGameOwner:p,onlineGameOpponentName:O,gameStatus:D,catanStatus:I,buildingStatus:$,activePlayer:b,activePlayerChanging:E,dices:X,_landTypes:be,cardMap:c,cornerMap:le,roadMap:te,inventoryState:V,score:ve,mappedMap:_l,myInventoryState:s,isRolling:Ge,canBuild:$e,canBuildFirstRoad:xe,canBuildFirstVillage:Be,canBuildSecondRoad:Te,canBuildSecondVillage:Ze,$reset:De,getCorner:pe,getSide:Ae,getCardsOfCorner:qe,getSidesOfCorner:Je,getCornersOfCard:Pe,getSidesOfCard:Ee,getNeighborsOfCorner:Xe,getRoadsOfPlayer:Qe,getVillagesOfPlayer:Le,getCitiesOfPlayer:wl,generateMap:Nl,generateNumbers:hl,isCornerAttachedToRoad:Ce,isCornerAttachedToVillage:Re,isLandCard:we,isOceanCard:Ol,selectBuildingType:kl,selectCard:Al,roll:Sl,finishMoving:Gl,cancelBuild:$l,passTurn:Fe,buy:xl,hasFinishedRolling:el,fetchOnlineGames:F,createOnlineGame:Bl,continueOnlineGame:Tl,updateOnlineGame:nl,leaveOnlineGame:U,deleteOnlineGame:re}},{persist:{enabled:!0}}),ul=()=>[{id:1,value:1,isRolling:!1},{id:2,value:2,isRolling:!1}],cl=()=>[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,5,5,5],dl=()=>[null,null,null,null,1,2,4,5,3,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],vl=2,Se=15,Ne=2,on=5,rn=4,gl=()=>({0:{buildings:{0:2,1:2,2:0},cards:{0:0,3:0,1:0,2:0,4:0,5:0,development:0},selected:null,lastPlaced:null},1:{buildings:{0:2,1:2,2:0},cards:{0:0,3:0,1:0,2:0,4:0,5:0,development:0},selected:null,lastPlaced:null}}),fl=()=>({0:0,1:0}),pl={1:[1,2,3,4,5,6],2:[8,9,10,2,1,7],3:[10,11,12,13,3,2],4:[3,13,14,15,16,4],5:[5,4,16,17,18,19],6:[22,6,5,19,20,21],7:[24,7,1,6,22,23],8:[25,26,8,7,24,54],9:[27,28,29,9,8,26],10:[29,30,31,11,10,9],11:[31,32,33,34,12,11],12:[12,34,35,36,14,13],13:[14,36,37,38,39,15],14:[16,15,39,40,41,17],15:[18,17,41,42,43,44],16:[20,19,18,44,45,46],17:[49,21,20,46,47,48],18:[51,23,22,21,49,50],19:[53,54,24,23,51,52]},un={1:[7,2,6],2:[1,10,3],3:[2,13,4],4:[3,16,5],5:[6,4,19],6:[1,5,22],7:[8,1,24],8:[9,7,26],9:[29,10,8],10:[9,11,2],11:[31,12,10],12:[11,34,13],13:[12,14,3],14:[13,36,15],15:[14,39,16],16:[4,15,17],17:[16,41,18],18:[19,17,44],19:[5,18,20],20:[21,19,46],21:[22,20,49],22:[23,6,21],23:[24,22,51],24:[54,7,23],25:[26,54],26:[27,8,25],27:[28,26],28:[29,27],29:[28,30,9],30:[29,31],31:[30,32,11],32:[31,33],33:[32,34],34:[33,35,12],35:[34,36],36:[35,37,14],37:[36,38],38:[37,39],39:[15,38,40],40:[39,41],41:[17,40,42],42:[41,43],43:[42,44],44:[18,43,45],45:[44,46],46:[20,45,47],47:[48,46],48:[49,47],49:[50,21,48],50:[51,49],51:[52,23,50],52:[53,51],53:[54,52],54:[25,24,53]},cn=[[1,2],[1,6],[1,7],[2,3],[2,10],[3,4],[3,13],[4,5],[4,16],[5,6],[5,19],[6,22],[7,8],[7,24],[8,9],[8,26],[9,10],[9,29],[10,11],[11,12],[11,31],[12,13],[12,34],[13,14],[14,15],[14,36],[15,16],[15,39],[16,17],[17,18],[17,41],[18,19],[18,44],[19,20],[20,21],[20,46],[21,22],[21,49],[22,23],[23,24],[23,51],[24,54],[25,26],[26,27],[27,28],[28,29],[29,30],[30,31],[31,32],[32,33],[33,34],[34,35],[35,36],[36,37],[37,38],[38,39],[39,40],[40,41],[41,42],[42,43],[43,44],[44,45],[45,46],[46,47],[47,48],[48,49],[49,50],[50,51],[51,52],[52,53],[53,54],[25,54]],J=n=>{switch(n){case 1:return"Wood";case 2:return"Sheep";case 3:return"Grain";case 4:return"Brick";case 5:return"Ore";default:return"Unknown"}},dn=fe({__name:"Dice",props:{dice:{}},setup(n){const o={1:an,2:tn,3:nn,4:ln,5:en,6:sn};return(g,m)=>(a(),i("div",{class:M({"animate-spin":g.dice.isRolling})},[(a(),j(ml(o[g.dice.value]),{color:"black",backgroundColor:"white",width:"40",height:"40"}))],2))}}),vn={class:"text-xl font-bold"},gn={key:0,class:"mb-3"},fn={class:"mb-3"},ye=fe({__name:"CatanStatusHeader",props:{title:{},activePlayer:{},onlineGameOpponentName:{}},setup(n){return(o,g)=>(a(),i(z,null,[v("h3",vn,N(o.title),1),o.activePlayer===e(ie).PLAYER?(a(),i("p",gn,"It's your turn.")):(a(),i(z,{key:1},[v("p",fn,N(o.onlineGameOpponentName)+"'s turn.",1),Ve(o.$slots,"descriptionOpponent")],64)),Ve(o.$slots,"description"),o.activePlayer===e(ie).PLAYER?Ve(o.$slots,"actions",{key:2}):S("",!0)],64))}}),pn={class:"w-full flex flex-col items-center gap-3 p-3"},bn={key:1},mn={key:1},_n={class:"flex gap-3 items-center"},In=fe({__name:"CatanStatus",setup(n){const o=_e(),{catanStatus:g,buildingStatus:m,activePlayer:u,dices:Z,cardMap:W,myInventoryState:A,canBuildFirstRoad:q,canBuildFirstVillage:H,canBuildSecondRoad:P,canBuildSecondVillage:_,isRolling:Y,isOnlineGameOwner:p,onlineGameOpponentName:O}=ce(o),{generateMap:F,generateNumbers:f,roll:T,finishMoving:x,cancelBuild:U,passTurn:re}=o;return(de,D)=>(a(),i("div",pn,[e(g)===e(ee).IS_INITIALIZING?(a(),j(ye,{key:0,title:"Welcome to Catan!",activePlayer:e(u),onlineGameOpponentName:e(O)},{description:Q(()=>[e(p)?(a(),j(B,{key:0,class:"w-full",variant:"green",label:"Generate Map",onClick:e(F)},null,8,["onClick"])):(a(),i("p",bn,"The game is about to start."))]),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(ee).IS_CREATING_MAP?(a(),i(z,{key:1},[ue(" Map is generating. Status "+N((e(W).length/38*100).toFixed(0))+"% ",1)],64)):e(g)===e(ee).BUILDING_PHASE?(a(),j(ye,{key:2,title:"Initial Building Phase",activePlayer:e(u),onlineGameOpponentName:e(O)},{actions:Q(()=>{var I,$,b,E;return[e(m)===e(ke).CAN_BUILD?(a(),i(z,{key:0},[e(q)?(a(),i(z,{key:0},[ue(" You can now build your first road! ")],64)):e(H)?(a(),i(z,{key:1},[ue(" You can now build your first village! ")],64)):e(P)?(a(),i(z,{key:2},[ue(" You can now build your second road! ")],64)):e(_)?(a(),i(z,{key:3},[ue(" You can now build your second village! ")],64)):S("",!0)],64)):e(m)===e(ke).CAN_MOVE?(a(),i(z,{key:1},[(($=(I=e(A).lastPlaced)==null?void 0:I.building)==null?void 0:$.type)===e(K).ROAD?(a(),i(z,{key:0},[ue(" You can now move your road by clicking on it. ")],64)):((E=(b=e(A).lastPlaced)==null?void 0:b.building)==null?void 0:E.type)===e(K).VILLAGE?(a(),i(z,{key:1},[ue(" You can now move your village by clicking on it. ")],64)):S("",!0),G(B,{class:"w-full",variant:"green",label:"Place Building",onClick:e(x)},null,8,["onClick"]),G(B,{class:"w-full",variant:"neutral",label:"Cancel Building",onClick:e(U)},null,8,["onClick"])],64)):S("",!0)]}),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(ee).FINISHED_BUILDING_PHASE?(a(),j(ye,{key:3,title:"Nearly there.",activePlayer:e(u),onlineGameOpponentName:e(O)},{description:Q(()=>[e(p)?(a(),j(B,{key:0,class:"w-full",variant:"green",label:"Reveal Numbers",onClick:e(f)},null,8,["onClick"])):(a(),i("p",mn,"The numbers will soon be revealed!"))]),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(ee).CAN_MOVE_ROBBER?(a(),j(ye,{key:4,title:"The Robber",activePlayer:e(u),onlineGameOpponentName:e(O)},{description:Q(()=>D[0]||(D[0]=[ue(" The Robber can be moved to another tile. ")])),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(ee).PRODUCTION_PHASE?(a(),j(ye,{key:5,title:"Production Phase",activePlayer:e(u),onlineGameOpponentName:e(O)},{description:Q(()=>[D[1]||(D[1]=v("ul",{class:"list-disc"},[v("li",{class:"line-through"},"Play a development card (optional)"),v("li",null,"Roll the dices"),v("li",null,"Collect resources")],-1)),v("div",_n,[(a(!0),i(z,null,ze(e(Z),I=>(a(),j(dn,{dice:I},null,8,["dice"]))),256))])]),actions:Q(()=>[G(B,{class:"w-full",label:"Roll Dices",disabled:e(Y),onClick:e(T)},null,8,["disabled","onClick"])]),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(ee).ACTION_PHASE?(a(),j(ye,{key:6,title:"Action Phase",activePlayer:e(u),onlineGameOpponentName:e(O)},{description:Q(()=>D[2]||(D[2]=[v("ul",{class:"list-disc"},[v("li",{class:"line-through"},"Trade"),v("li",null,"Build roads, villages, cities and development cards"),v("li",{class:"line-through"},"Play a development card if you didn't already")],-1)])),actions:Q(()=>[G(B,{class:"w-full",variant:"neutral",label:"End Turn",onClick:e(re)},null,8,["onClick"])]),_:1},8,["activePlayer","onlineGameOpponentName"])):S("",!0)]))}}),yn={},wn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function On(n,o){return a(),i("svg",wn,o[0]||(o[0]=[v("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#b22222",stroke:"#7b1b1b","stroke-width":"2"},null,-1)]))}const Nn=me(yn,[["render",On]]),hn={},kn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function An(n,o){return a(),i("svg",kn,o[0]||(o[0]=[v("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#f4e6b0",stroke:"#c2a865","stroke-width":"2"},null,-1)]))}const Pn=me(hn,[["render",An]]),En={},Cn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function Rn(n,o){return a(),i("svg",Cn,o[0]||(o[0]=[v("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#fdd835",stroke:"#c2a600","stroke-width":"2"},null,-1)]))}const Sn=me(En,[["render",Rn]]),Gn={},$n={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function xn(n,o){return a(),i("svg",$n,o[0]||(o[0]=[v("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#a9a9a9",stroke:"#696969","stroke-width":"2"},null,-1)]))}const Bn=me(Gn,[["render",xn]]),Tn={},Dn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function Ln(n,o){return a(),i("svg",Dn,o[0]||(o[0]=[v("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#9acd32",stroke:"#6b8e23","stroke-width":"2"},null,-1)]))}const Mn=me(Tn,[["render",Ln]]),Hn={},Fn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function Yn(n,o){return a(),i("svg",Fn,o[0]||(o[0]=[v("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#228b22",stroke:"#145214","stroke-width":"2"},null,-1)]))}const Un=me(Hn,[["render",Yn]]),Vn={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},zn={key:0,class:"size-10 rounded-full bg-black"},Wn=fe({__name:"LandCard",props:{card:{},isDisabled:{type:Boolean},isBlocked:{type:Boolean}},emits:["onClick"],setup(n,{emit:o}){const g=n,m=o,u={[w.DESERT]:Pn,[w.BRICK_HILL]:Nn,[w.SHEEP_PASTURE]:Mn,[w.GRAIN_FIELD]:Sn,[w.WOOD_FOREST]:Un,[w.ORE_MOUNTAIN]:Bn},Z=_e(),W=je(),{firebaseUser:A}=ce(W),{getCornersOfCard:q,getSidesOfCard:H}=Z,P=h(()=>q(g.card)),_=h(()=>{const p=g.card.cornerIds;return!p||p.length!==6?[]:p.map((O,F)=>{const f=p[(F+1)%6];return H(g.card).find(T=>T.cornerFromId===O&&T.cornerToId===f||T.cornerFromId===f&&T.cornerToId===O)})}),Y=()=>{g.isDisabled||m("onClick")};return(p,O)=>{var F,f,T,x,U,re,de,D,I,$,b,E,X,be,Ie,c,le,te;return a(),i("div",{class:M(["relative",{"cursor-pointer":!p.isDisabled}]),onClick:Y},[(a(),j(ml(u[p.card.type??e(w).DESERT]),{class:"size-[80px] md:size-[100px]"})),v("div",Vn,[p.isBlocked?(a(),i("div",zn)):p.card.value?(a(),i("p",{key:1,class:M(["text-3xl text-black font-bold",p.card.value===2||p.card.value===12?"text-blue-600":p.card.value===6||p.card.value===8?"text-red-600":"text-black"])},N(p.card.value),3)):S("",!0)]),P.value.length===6?(a(),i(z,{key:0},[P.value[0].building?(a(),i("div",{key:0,class:M(["absolute z-10 top-0 left-1/2 -translate-x-1/2 size-3 md:size-4 rounded-full",P.value[0].building.ownerId===((F=e(A))==null?void 0:F.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),P.value[1].building?(a(),i("div",{key:1,class:M(["absolute z-10 top-[25%] -right-2 -translate-y-1/2 size-3 md:size-4 rounded-full",P.value[1].building.ownerId===((f=e(A))==null?void 0:f.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),P.value[2].building?(a(),i("div",{key:2,class:M(["absolute z-10 bottom-[25%] -right-2 translate-y-1/2 size-3 md:size-4 rounded-full",P.value[2].building.ownerId===((T=e(A))==null?void 0:T.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),P.value[3].building?(a(),i("div",{key:3,class:M(["absolute z-10 bottom-0 left-1/2 translate-x-[-50%] size-3 md:size-4 rounded-full",P.value[3].building.ownerId===((x=e(A))==null?void 0:x.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),P.value[4].building?(a(),i("div",{key:4,class:M(["absolute z-10 bottom-[25%] -left-2 translate-y-1/2 size-3 md:size-4 rounded-full",P.value[4].building.ownerId===((U=e(A))==null?void 0:U.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),P.value[5].building?(a(),i("div",{key:5,class:M(["absolute z-10 top-[25%] -left-2 -translate-y-1/2 size-3 md:size-4 rounded-full",P.value[5].building.ownerId===((re=e(A))==null?void 0:re.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0)],64)):S("",!0),_.value.length===6?(a(),i(z,{key:1},[(de=_.value[0])!=null&&de.building?(a(),i("div",{key:0,class:M(["absolute top-0 right-0 w-[45%] h-[6px] rotate-[27deg] origin-top-left",_.value[0].building.ownerId===((D=e(A))==null?void 0:D.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),(I=_.value[1])!=null&&I.building?(a(),i("div",{key:1,class:M(["absolute top-1/2 right-0 -translate-y-1/2 h-[45%] w-[6px]",_.value[1].building.ownerId===(($=e(A))==null?void 0:$.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),(b=_.value[2])!=null&&b.building?(a(),i("div",{key:2,class:M(["absolute bottom-1 right-0 w-[45%] h-[6px] -rotate-[27deg] origin-bottom-left",_.value[2].building.ownerId===((E=e(A))==null?void 0:E.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),(X=_.value[3])!=null&&X.building?(a(),i("div",{key:3,class:M(["absolute bottom-1 left-0 w-[45%] h-[6px] rotate-[27deg] origin-bottom-right",_.value[3].building.ownerId===((be=e(A))==null?void 0:be.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),(Ie=_.value[4])!=null&&Ie.building?(a(),i("div",{key:4,class:M(["absolute top-1/2 -left-2 -translate-y-1/2 h-[45%] w-[6px]",_.value[4].building.ownerId===((c=e(A))==null?void 0:c.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0),(le=_.value[5])!=null&&le.building?(a(),i("div",{key:5,class:M(["absolute top-0 left-0 w-[45%] h-[6px] -rotate-[30deg] origin-top-right",_.value[5].building.ownerId===((te=e(A))==null?void 0:te.uid)?"bg-blue-500":"bg-red-500"])},null,2)):S("",!0)],64)):S("",!0)],2)}}}),jn={},Kn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function Zn(n,o){return a(),i("svg",Kn,o[0]||(o[0]=[v("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#429bf5",stroke:"#429bf5","stroke-width":"2"},null,-1)]))}const qn=me(jn,[["render",Zn]]),Jn={key:0,class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},Xn={class:"text-3xl text-white font-bold text-nowrap"},Qn={key:0,class:"text-lg text-white text-nowrap text-center"},et=fe({__name:"OceanCard",props:{card:{}},emits:["onClick"],setup(n,{emit:o}){const g=o,m=()=>{g("onClick")};return(u,Z)=>(a(),i("div",{class:"relative",onClick:m},[G(qn,{class:"size-[80px] md:size-[100px]"}),u.card.input?(a(),i("div",Jn,[v("p",Xn,N(u.card.input)+" : "+N(u.card.output),1),u.card.inputType?(a(),i("p",Qn,N(e(J)(u.card.inputType)),1)):S("",!0)])):S("",!0)]))}}),We=n=>{const o=_e(),g=je(),{inventoryState:m,cornerMap:u,roadMap:Z,onlineGameOpponentId:W}=ce(o),{firebaseUser:A}=ce(g),q=h(()=>{var b;return n===ie.PLAYER?(b=A.value)==null?void 0:b.uid:W.value}),H=h(()=>m.value[n].buildings[K.ROAD]),P=h(()=>m.value[n].buildings[K.VILLAGE]),_=h(()=>m.value[n].buildings[K.CITY]),Y=h(()=>m.value[n].cards[w.GRAIN_FIELD]),p=h(()=>m.value[n].cards[w.WOOD_FOREST]),O=h(()=>m.value[n].cards[w.SHEEP_PASTURE]),F=h(()=>m.value[n].cards[w.BRICK_HILL]),f=h(()=>m.value[n].cards[w.ORE_MOUNTAIN]),T=h(()=>Z.value.filter(b=>{var E;return((E=b.building)==null?void 0:E.type)===K.ROAD&&b.building.ownerId===q.value}).length),x=h(()=>u.value.filter(b=>{var E;return((E=b.building)==null?void 0:E.type)===K.VILLAGE&&b.building.ownerId===q.value}).length),U=h(()=>u.value.filter(b=>{var E;return((E=b.building)==null?void 0:E.type)===K.CITY&&b.building.ownerId===q.value}).length),re=h(()=>p.value>=1&&F.value>=1),de=h(()=>Y.value>=1&&O.value>=1&&p.value>=1&&F.value>=1),D=h(()=>Y.value>=2&&f.value>=3),I=h(()=>O.value>=1&&Y.value>=1&&f.value>=1),$=h(()=>Y.value+p.value+O.value+F.value+f.value);return{selected:m.value[n].selected,roads:H,villages:P,cities:_,grain:Y,wood:p,sheep:O,brick:F,ore:f,roadBuildings:T,villageBuildings:x,cityBuildings:U,canBuyRoad:re,canBuyVillage:de,canBuyCity:D,canBuyDevelopment:I,totalCards:$}},lt={key:0,class:"font-bold"},nt={class:"flex flex-col gap-1"},bl=fe({__name:"PlayerInventory",props:{player:{}},setup(n){const o=n,g=_e(),{catanStatus:m,buildingStatus:u,activePlayer:Z,canBuild:W,canBuildFirstRoad:A,canBuildSecondRoad:q,canBuildFirstVillage:H,canBuildSecondVillage:P,onlineGameOpponentName:_,onlineGameOpponentActive:Y}=ce(g),{selectBuildingType:p}=g,{selected:O,roads:F,villages:f,cities:T,grain:x,sheep:U,wood:re,brick:de,ore:D}=We(ie.PLAYER),{totalCards:I}=We(ie.OPPONENT),$=h(()=>Z.value!==o.player||!W.value);return(b,E)=>(a(),i("div",{class:M(["flex flex-col gap-3",b.player===e(ie).PLAYER?"items-start":"items-end"])},[b.player===e(ie).PLAYER?(a(),i("p",lt," You ")):(a(),i("p",{key:1,class:M(["font-bold",e(Y)?"text-green-400":"text-red-400"])},N(e(_)),3)),v("div",nt,[G(B,{"pt:root":"!justify-start",class:M([e(O)===e(K).ROAD?"!border-white":"!border-none"]),variant:"neutral",icon:"pi pi-ellipsis-h",label:`${e(F)}/${e(Se)-e(F)} roads`,disabled:$.value||e(u)!==e(ke).CAN_BUILD||!e(A)&&!e(q)||!e(F),onClick:E[0]||(E[0]=X=>e(p)(e(K).ROAD))},null,8,["class","label","disabled"]),G(B,{"pt:root":"!justify-start",class:M([e(O)===e(K).VILLAGE?"!border-white":"!border-none"]),variant:"neutral",icon:"pi pi-home",label:`${e(f)}/${e(on)-e(f)} villages`,disabled:$.value||e(u)!==e(ke).CAN_BUILD||!e(H)&&!e(P)||!e(f),onClick:E[1]||(E[1]=X=>e(p)(e(K).VILLAGE))},null,8,["class","label","disabled"]),G(B,{"pt:root":"!justify-start",class:M([e(O)===e(K).CITY?"!border-white":"!border-none"]),variant:"neutral",icon:"pi pi-building",label:`${e(T)}/${e(rn)-e(T)} cities`,disabled:$.value||e(m)!==e(ee).PRODUCTION_PHASE||!e(T),onClick:E[2]||(E[2]=X=>e(p)(e(K).CITY))},null,8,["class","label","disabled"]),b.player===e(ie).PLAYER?(a(),i(z,{key:0},[G(B,{class:"!border-yellow-500",outlined:"",label:`${e(x)} ${e(J)(e(w).GRAIN_FIELD)}`},null,8,["label"]),G(B,{class:"!border-lime-500",outlined:"",label:`${e(U)} ${e(J)(e(w).SHEEP_PASTURE)}`},null,8,["label"]),G(B,{class:"!border-green-500",outlined:"",label:`${e(re)} ${e(J)(e(w).WOOD_FOREST)}`},null,8,["label"]),G(B,{class:"!border-orange-500",outlined:"",label:`${e(de)} ${e(J)(e(w).BRICK_HILL)}`},null,8,["label"]),G(B,{class:"!border-slate-300",outlined:"",label:`${e(D)} ${e(J)(e(w).ORE_MOUNTAIN)}`},null,8,["label"])],64)):(a(),j(B,{key:1,class:"!border-white",variant:"neutral",label:`${e(I)} cards`},null,8,["label"]))])],2))}}),tt={class:"w-full flex flex-col gap-3 items-center"},at={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},st={class:"flex flex-col items-start"},it={class:"flex flex-col items-start"},ot={class:"flex flex-col items-start"},rt={class:"flex flex-col items-start"},ut=fe({__name:"Shop",setup(n){const o=_e(),{catanStatus:g,activePlayer:m}=ce(o),{buy:u}=o,{wood:Z,brick:W,grain:A,sheep:q,ore:H,canBuyRoad:P,canBuyVillage:_,canBuyCity:Y,canBuyDevelopment:p}=We(rl.PLAYER),O=h(()=>[ee.PRODUCTION_PHASE,ee.ACTION_PHASE].includes(g.value)&&m.value===rl.PLAYER);return(F,f)=>(a(),i("div",tt,[f[8]||(f[8]=v("h3",{class:"text-xl font-bold"},"Buy items:",-1)),v("div",at,[G(B,{class:"!justify-start !items-start",variant:"neutral",disabled:!O.value||!e(P),onClick:f[0]||(f[0]=T=>e(u)(e(K).ROAD))},{default:Q(()=>[v("div",st,[f[4]||(f[4]=v("p",{class:"text-lg font-bold"},"Road",-1)),v("p",null,N(e(Z))+"/1 "+N(e(J)(e(w).WOOD_FOREST)),1),v("p",null,N(e(W))+"/1 "+N(e(J)(e(w).BRICK_HILL)),1)])]),_:1},8,["disabled"]),G(B,{class:"!justify-start !items-start",variant:"neutral",disabled:!O.value||!e(_),onClick:f[1]||(f[1]=T=>e(u)(e(K).VILLAGE))},{default:Q(()=>[v("div",it,[f[5]||(f[5]=v("p",{class:"text-lg font-bold"},"Village",-1)),v("p",null,N(e(A))+"/1 "+N(e(J)(e(w).GRAIN_FIELD)),1),v("p",null,N(e(q))+"/1 "+N(e(J)(e(w).SHEEP_PASTURE)),1),v("p",null,N(e(Z))+"/1 "+N(e(J)(e(w).WOOD_FOREST)),1),v("p",null,N(e(W))+"/1 "+N(e(J)(e(w).BRICK_HILL)),1)])]),_:1},8,["disabled"]),G(B,{class:"!justify-start !items-start",variant:"neutral",disabled:!O.value||!e(Y),onClick:f[2]||(f[2]=T=>e(u)(e(K).CITY))},{default:Q(()=>[v("div",ot,[f[6]||(f[6]=v("p",{class:"text-lg font-bold"},"City",-1)),v("p",null,N(e(A))+"/2 "+N(e(J)(e(w).GRAIN_FIELD)),1),v("p",null,N(e(H))+"/3 "+N(e(J)(e(w).ORE_MOUNTAIN)),1)])]),_:1},8,["disabled"]),G(B,{class:"!justify-start !items-start",variant:"neutral",disabled:!O.value||!e(p),onClick:f[3]||(f[3]=T=>e(u)("development"))},{default:Q(()=>[v("div",rt,[f[7]||(f[7]=v("p",{class:"text-lg font-bold"},"Development",-1)),v("p",null,N(e(A))+"/1 "+N(e(J)(e(w).GRAIN_FIELD)),1),v("p",null,N(e(q))+"/1 "+N(e(J)(e(w).SHEEP_PASTURE)),1),v("p",null,N(e(H))+"/1 "+N(e(J)(e(w).ORE_MOUNTAIN)),1)])]),_:1},8,["disabled"])])]))}}),ct={class:"relative mt-5 w-full grid grid-cols-2 md:grid-cols-3 gap-3 justify-center"},dt={key:0,class:"col-span-full min-h-[25vh] flex flex-col"},vt=fe({__name:"CatanMainGame",setup(n){const o=_e(),{catanStatus:g,activePlayer:m,mappedMap:u}=ce(o),{isLandCard:Z,selectCard:W}=o;return(A,q)=>(a(),i("div",ct,[G(In,{class:"col-span-full md:col-span-1 md:col-start-2"}),e(g)>e(ee).IS_INITIALIZING?(a(),i("div",dt,[(a(!0),i(z,null,ze(e(u),(H,P)=>(a(),i("div",{key:P,class:M(["flex gap-1 justify-center",{"-mt-7 md:-mt-8":P>0}])},[(a(!0),i(z,null,ze(H,_=>(a(),i(z,{key:_.id},[e(Z)(_)?(a(),j(Wn,{key:0,card:_,isDisabled:e(m)!==e(ie).PLAYER,isBlocked:_.isBlocked&&e(g)>e(ee).IS_FINISHING_UP,onOnClick:Y=>e(W)(_)},null,8,["card","isDisabled","isBlocked","onOnClick"])):(a(),j(et,{key:1,card:_,onOnClick:()=>{}},null,8,["card"]))],64))),128))],2))),128))])):S("",!0),G(bl,{class:"md:absolute top-0 left-0",player:e(ie).PLAYER},null,8,["player"]),G(bl,{class:"md:absolute top-0 right-0",player:e(ie).OPPONENT},null,8,["player"]),e(g)>=e(ee).IS_FINISHING_UP?(a(),j(ut,{key:1,class:"col-span-full"})):S("",!0)]))}}),gt={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},ft={class:"flex flex-wrap justify-center gap-3"},pt={key:0,class:"w-full flex flex-col gap-3 items-center"},bt={key:1,class:"w-full flex flex-col items-center"},mt={key:4,class:"w-full flex flex-col gap-3 items-center"},Pt=fe({__name:"Catan",setup(n){const o=_e(),{gameStatus:g,onlineGameId:m,onlineGameChat:u,isOnlineGameOwner:Z,onlineGames:W,onlineGamesLoading:A}=ce(o),{collections:q,createOnlineGame:H,continueOnlineGame:P,leaveOnlineGame:_,deleteOnlineGame:Y,fetchOnlineGames:p}=o,O=se(!1),F=async()=>{m.value&&await Y(),o.$reset()},f=async()=>{m.value&&await _(),o.$reset()};return(T,x)=>(a(),j(Zl,{class:"!bg-red-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Catan",description:"Play with a friend."},{right:Q(()=>[v("div",gt,[G(B,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:x[0]||(x[0]=U=>O.value=!0)}),e(Z)?(a(),j(B,{key:0,variant:"danger",icon:"pi pi-trash",onClick:F})):S("",!0)])]),default:Q(()=>[v("div",ft,[e(g)===e(ge).HAS_NOT_STARTED?(a(),i("div",pt,[x[6]||(x[6]=ue(" Hallo en welkom Klik hier om te starten! ")),G(B,{class:"w-full md:w-1/2",label:"Start",onClick:x[1]||(x[1]=U=>g.value=e(ge).FINDING_OPPONENT)})])):e(g)===e(ge).FINDING_OPPONENT?(a(),i("div",bt,[G(Jl,{modelValue:e(W),"onUpdate:modelValue":x[2]||(x[2]=U=>ql(W)?W.value=U:null),collection:e(q).onlineGames,"online-games-loading":e(A),"fetch-online-games":e(p),onCreateOnlineGame:e(H),onContinueOnlineGame:e(P)},null,8,["modelValue","collection","online-games-loading","fetch-online-games","onCreateOnlineGame","onContinueOnlineGame"]),G(B,{class:"w-full md:w-1/2",variant:"neutral",label:"Go Back",onClick:x[3]||(x[3]=U=>g.value=e(ge).HAS_NOT_STARTED)})])):e(g)===e(ge).IS_PLAYING?(a(),j(vt,{key:2})):e(g)===e(ge).HAS_FINISHED?(a(),i(z,{key:3},[ue(" Je hebt gewonnen of verloren! ")],64)):S("",!0),e(g)===e(ge).IS_PLAYING||e(g)===e(ge).HAS_FINISHED?(a(),i("div",mt,[G(Xl,{chats:e(u)??[],onSendChat:x[4]||(x[4]=U=>u.value=[...e(u)??[],U])},null,8,["chats"]),G(B,{class:"w-full md:w-1/2",variant:"neutral",label:"Go Back",onClick:f})])):S("",!0)]),G(Ql,{"game-id":e(he).CATAN,"is-open":O.value,"onUpdate:isOpen":x[5]||(x[5]=U=>O.value=U)},null,8,["game-id","is-open"])]),_:1}))}});export{Pt as default};
