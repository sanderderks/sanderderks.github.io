import{b3 as Ye,bc as Le,q as Re,bd as ze,ba as He,s as Y,be as Ze,bf as ke,bb as te,z,l as Ce,U as ie,v as Oe,C as j,bg as Ue,b6 as Ve,bh as ve,bj as Je,m as Ee,bk as qe,bi as Ke,d as D,b as s,c as a,e as o,n as W,g as P,b1 as Qe,f as e,P as k,Q,t as m,J as C,k as T,i as X,w as Z,h as M,W as Xe,aA as el,_ as ll,S as tl}from"../bundle.js";import{u as sl,H as al,_ as ol}from"./c-useScoreInfo-AYhSYbDa.js";import{a as nl,_ as rl}from"./c-GameChat.vue_vue_type_script_setup_true_lang-8BgJZpGJ.js";import{_ as il,a as cl}from"./c-GameActions.vue_vue_type_script_setup_true_lang-D4EdVO14.js";import{_ as ul}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-DcM7CMCU.js";import{_ as dl}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-DRX61yU0.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-DI3Y1UAH.js";var B=(l=>(l[l.Purple=0]="Purple",l[l.Blue=1]="Blue",l[l.Yellow=2]="Yellow",l[l.Orange=3]="Orange",l[l.Red=4]="Red",l))(B||{}),H=(l=>(l[l.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",l[l.FINDING_OPPONENT=1]="FINDING_OPPONENT",l[l.IS_PLAYING=2]="IS_PLAYING",l[l.HAS_FINISHED=3]="HAS_FINISHED",l))(H||{}),F=(l=>(l[l.WAITING_FOR_OPPONENTS=0]="WAITING_FOR_OPPONENTS",l[l.HAS_STARTED=1]="HAS_STARTED",l[l.HAS_THROWN_DICES=2]="HAS_THROWN_DICES",l[l.HAS_CHOSEN_SCORE=3]="HAS_CHOSEN_SCORE",l[l.CAN_CHOOSE_REMAINING=4]="CAN_CHOOSE_REMAINING",l[l.HAS_CHOSEN_REMAINING=5]="HAS_CHOSEN_REMAINING",l))(F||{});const oe=Ye("yahtzeeRainbowStore",()=>{const l=Le(),g=Re(),c=ze(),u=He(),{personalBest:b,highscorePosition:R}=Y(c),{firebaseUser:n}=Y(g),{games:x,gamesLoading:y,gameId:G,creatorId:I,players:i,opponents:_,partyName:d,maxPlayers:O,isLocked:U,chat:ee,isOwner:V}=Y(u),{setPreviousHighscores:J,updateHighscores:ne,sortHighscores:le}=c,q={onlineGames:Ze(l,ke.GAME_DATA,te.YAHTZEE_RAINBOW,ke.ONLINE_GAMES)},L=z(0),f=z(1),w=z(!1),p=z("soloPlayer"),E=z(p.value),S=z(fe()),A=Oe({}),N=Oe({}),se=j(()=>S.value.some(t=>t.isRolling)),$=j(()=>S.value.filter(t=>t.color===null)),_e=j(()=>!!(E.value===p.value&&$.value.length&&!w.value&&f.value===1)),he=j(()=>t=>!!(E.value===t&&!se.value&&S.value.some(v=>v.color===null)&&!w.value&&[4,2].includes(f.value))),ge=j(()=>E.value===p.value&&!se.value&&!w.value),Pe=j(()=>(t,v)=>{if(E.value!==t)return[];const r=[],h=S.value.find(K=>K.color===v);return $.value.length===2?(r.push($.value[0].value+$.value[1].value),h&&(r.push($.value[0].value+h.value),r.push($.value[1].value+h.value))):$.value.length===1&&h&&r.push($.value[0].value+h.value),r}),Te=j(()=>(t,v,r)=>!!A[t]?.[v].find(h=>h.row===r));Ce(()=>{c.$init(te.YAHTZEE_RAINBOW)}),ie(L,t=>{t===3&&(V.value&&(i.value.forEach(v=>{je(v.userId)}),Fe(),we()),ve(Ke))}),ie(N,()=>{Ne()}),ie([L,f,E,se,()=>i.value.length],()=>{we()},{deep:!0}),ie(i,()=>{f.value===0&&O.value&&i.value.length===O.value&&(U.value=!0,f.value=1)});const ue=()=>{u.$reset(),L.value=0,f.value=1,w.value=!1,p.value="soloPlayer",E.value=p.value,S.value=fe(),Object.keys(A).forEach(t=>{delete A[t],delete N[t]}),J()},De=(t,v=null,r=null)=>{n.value&&(t=[{userId:n.value.uid,isOnline:!0},...t],L.value=2,f.value=r?0:1,p.value=n.value.uid,E.value=p.value,t.forEach(h=>{A[h.userId]=Ae(),N[h.userId]=null}),u.$init(te.YAHTZEE_RAINBOW,me,ye,ue),u.createGame(t,v,r))},Ge=t=>{n.value&&(p.value=n.value.uid,u.$init(te.YAHTZEE_RAINBOW,me,ye,ue),u.continueGame(t))},me=()=>(i.value.forEach(t=>{Object.keys(A).includes(t.userId)||(A[t.userId]=Ae(),N[t.userId]=null)}),{gameStatus:L.value,yahtzeeStatus:f.value,activePlayerId:E.value,dices:S.value,score:A,finalScore:N}),ye=t=>{!n.value?.uid||E.value===p.value||(L.value=t.gameStatus,f.value=t.yahtzeeStatus,E.value=t.activePlayerId,S.value=t.dices,Object.assign(A,t.score),Object.assign(N,t.finalScore))},we=()=>{!n.value||E.value!==p.value&&!w.value||u.pushState()},Ie=async()=>{for(;se.value;)await new Promise(t=>setTimeout(t,c.diceRollSpeed*1e3));return!0},Se=()=>{const t=new Set;for(const v of Object.values(A))for(const[r,h]of Object.entries(v))h.some(K=>K.row===10)&&t.add(Number(r));return t},de=()=>fe().filter(t=>t.color===null||!Se().has(t.color)),xe=async()=>{if(!_e.value)return;const t=c.diceRollSpeed*1e3;S.value.forEach(v=>{v.isRolling=!0,setTimeout(()=>{v.value=Ue(6),v.isRolling=!1},Ve(t,t/3))}),await Ie(),f.value=2,ve(Je)},Be=(t,v,r)=>{if(he.value){if(A[p.value][t].push({row:v}),$.value.length===2&&$.value[0].value+$.value[1].value===r)S.value=S.value.filter(h=>h.color!==null);else{const h=S.value.find(K=>K.color===t);if(h){const K=$.value.find(re=>re.value+h.value===r);K&&(S.value=S.value.filter(re=>re.id!==h.id&&re.id!==K.id))}}Se().size===2?L.value=3:(w.value=!0,f.value===4?f.value=5:f.value=3,setTimeout(async()=>{w.value=!1,await Ee(),await be()},c.diceRollSpeed*1e3)),ve(qe)}},be=async()=>{if(ge.value)switch(f.value){case 1:case 2:case 3:{$.value.length>0?f.value=4:(f.value=1,S.value=de()),w.value=!0,E.value=u.getNextPlayerId(E.value),S.value.some(t=>t.color===null)||(S.value=de()),await Ee(),w.value=!1;break}case 4:case 5:{f.value=1,S.value=de(),await xe();break}}},pe=(t,v)=>Object.values(A[t]).filter(r=>!!r.find(h=>h.row===v)).length,Me=(t,v)=>$e[A[t][v].length]||0,We=(t,v)=>{let r=0;for(let h=0;h<10;h++)pe(t,h)===v&&(r+=ce[v][h]||0);return r},je=t=>{let v=0;Object.values(A[t]).forEach(r=>{r.length&&(v+=$e[r.length])});for(let r=0;r<10;r++){const h=pe(t,r);h>=3&&(v+=ce[h][r])}N[t]={total:v}},Fe=()=>{const t=Math.max(...Object.values(N).map(r=>r?.total??0)),v=Object.keys(N).filter(r=>N[r]?.total===t);i.value.forEach(r=>{v.includes(r.userId)?v.length===1?N[r.userId].winStatus="win":N[r.userId].winStatus="tie":N[r.userId].winStatus="lose"})},Ne=()=>{n?.value&&N[p.value]&&ne({gameId:G.value??null,score:N[p.value].total})};return{collections:q,games:x,gamesLoading:y,gameId:G,creatorId:I,players:i,opponents:_,partyName:d,maxPlayers:O,isLocked:U,chat:ee,isOwner:V,gameStatus:L,yahtzeeStatus:f,yahtzeeStatusLoading:w,myPlayerId:p,activePlayerId:E,score:A,finalScore:N,dices:S,whiteDices:$,isRolling:se,canRoll:_e,canSelectScore:he,canSkipTurn:ge,hasSelectedScore:Te,canChooseOf:Pe,personalBest:b,highscorePosition:R,$reset:ue,roll:xe,hasFinishedRolling:Ie,selectScore:Be,passTurn:be,getColumnTotal:Me,getBonusColumnTotal:We,setPreviousHighscores:J,updateYahtzeeHighscore:Ne,sortHighscores:le,fetchOnlineGames:u.fetchGames,createOnlineGame:De,continueOnlineGame:Ge,leaveOnlineGame:u.leaveGame,deleteOnlineGame:u.deleteGame,getPlayerDisplayName:u.getPlayerDisplayName,getNextPlayerId:u.getNextPlayerId}},{}),fe=()=>[{id:1,color:4,value:1,isRolling:!1},{id:2,color:3,value:2,isRolling:!1},{id:3,color:2,value:3,isRolling:!1},{id:4,color:1,value:4,isRolling:!1},{id:5,color:0,value:5,isRolling:!1},{id:6,color:null,value:6,isRolling:!1},{id:7,color:null,value:6,isRolling:!1}],Ae=()=>({0:[],1:[],2:[],3:[],4:[]}),ae={0:[12,10,8,6,4,2,4,6,8,10,12],1:[2,4,6,8,10,12,10,8,6,4,2],2:[12,11,10,9,8,7,6,5,4,3,2],3:[2,3,4,5,6,7,8,9,10,11,12],4:[2,3,4,5,6,7,8,9,10,11,12]},$e={1:1,2:2,3:4,4:7,5:11,6:16,7:22,8:29,9:37,10:46,11:56},ce={3:[2,2,1,1,1,1,1,1,1,2],4:[5,4,4,2,2,3,2,2,4,4],5:[10,8,6,3,4,5,4,3,6,8]},vl={0:"text-purple-500",1:"text-blue-500",2:"text-yellow-500",3:"text-orange-500",4:"text-red-500"},fl={0:"bg-purple-700",1:"bg-blue-700",2:"bg-yellow-700",3:"bg-orange-700",4:"bg-red-700"},_l={0:"fill-purple-500",1:"fill-blue-500",2:"fill-yellow-500",3:"fill-orange-500",4:"fill-red-500"},hl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},gl=["fill"],ml=D({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(l){return(g,c)=>(s(),a("svg",hl,[o("rect",{class:W(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),o("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,gl)]))}}),yl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},wl=["fill"],Il=["fill"],Sl=D({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(l){return(g,c)=>(s(),a("svg",yl,[o("rect",{class:W(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),o("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,wl),o("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Il)]))}}),xl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},bl=["fill"],pl=["fill"],Nl=["fill"],kl=D({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(l){return(g,c)=>(s(),a("svg",xl,[o("rect",{class:W(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),o("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,bl),o("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,pl),o("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Nl)]))}}),Ol={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},El=["fill"],Al=["fill"],$l=["fill"],Rl=["fill"],Hl=D({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(l){return(g,c)=>(s(),a("svg",Ol,[o("rect",{class:W(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),o("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,El),o("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Al),o("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,$l),o("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Rl)]))}}),Cl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Pl=["fill"],Tl=["fill"],Dl=["fill"],Gl=["fill"],Bl=["fill"],Ml=D({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(l){return(g,c)=>(s(),a("svg",Cl,[o("rect",{class:W(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),o("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,Pl),o("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Tl),o("circle",{cx:"50",cy:"50",r:"10",fill:l.color},null,8,Dl),o("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,Gl),o("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Bl)]))}}),Wl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},jl=["fill"],Fl=["fill"],Yl=["fill"],Ll=["fill"],zl=["fill"],Zl=["fill"],Ul=D({__name:"Dice6",props:{color:{},backgroundColor:{}},setup(l){return(g,c)=>(s(),a("svg",Wl,[o("rect",{class:W(l.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),o("circle",{cx:"25",cy:"25",r:"10",fill:l.color},null,8,jl),o("circle",{cx:"25",cy:"50",r:"10",fill:l.color},null,8,Fl),o("circle",{cx:"25",cy:"75",r:"10",fill:l.color},null,8,Yl),o("circle",{cx:"75",cy:"25",r:"10",fill:l.color},null,8,Ll),o("circle",{cx:"75",cy:"50",r:"10",fill:l.color},null,8,zl),o("circle",{cx:"75",cy:"75",r:"10",fill:l.color},null,8,Zl)]))}}),Vl=D({__name:"Dice",props:{dice:{}},setup(l){const g={1:ml,2:Sl,3:kl,4:Hl,5:Ml,6:Ul};return(c,u)=>(s(),a("div",{class:W(["cursor-pointer",{"animate-spin":l.dice.isRolling}])},[(s(),P(Qe(g[l.dice.value]),{color:"black",backgroundColor:l.dice.color!==null?e(_l)[l.dice.color]:"fill-white",width:"40",height:"40"},null,8,["backgroundColor"]))],2))}}),Jl={class:"w-full flex flex-col md:flex-row justify-between gap-3 md:gap-10"},ql={class:"text-white"},Kl={key:0,class:"border-none"},Ql={key:1,class:"text-center",colspan:"3"},Xl={key:0},et={key:0,class:"border-none"},lt={key:0},tt={key:1},st=D({__name:"Scoreboard",setup(l){const g=oe(),{myPlayerId:c,gameStatus:u,canChooseOf:b,canSelectScore:R,score:n,players:x}=Y(g),y=z(!1);return(G,I)=>(s(),a(k,null,[o("div",Jl,[(s(!0),a(k,null,Q(e(x),i=>(s(),a("table",{key:i.userId,class:W(["w-full mt-5 text-sm md:text-base text-left",e(u)===e(H).HAS_FINISHED?"text-neutral-500":"text-white"])},[o("thead",ql,[o("tr",null,[o("th",{class:W(["text-center",i.isOnline?"text-green-400":"text-red-400"]),colspan:"5"},m(i.userId===e(c)?"You":e(g).getPlayerDisplayName(i.userId)),3),y.value?(s(),a("th",Kl)):C("",!0),y.value?(s(),a("th",Ql," Bonus ")):C("",!0)])]),e(n)[i.userId]?(s(),a("tbody",Xl,[(s(),a(k,null,Q(11,_=>o("tr",{key:_},[(s(!0),a(k,null,Q([e(B).Red,e(B).Orange,e(B).Yellow,e(B).Blue,e(B).Purple],d=>(s(),a("td",{key:d,class:W(["relative",[e(vl)[d],{[e(fl)[d]]:e(n)[i.userId][d].length&&_-1<=e(n)[i.userId][d][e(n)[i.userId][d].length-1].row,"opacity-25":e(n)[i.userId][d].length&&_-1<e(n)[i.userId][d][e(n)[i.userId][d].length-1].row&&e(n)[i.userId][d].every(O=>O.row!==_-1)}]])},[e(n)[i.userId][d].length&&_-1<=e(n)[i.userId][d][e(n)[i.userId][d].length-1].row?(s(),a(k,{key:0},[T(m(e(ae)[d][_-1]),1)],64)):e(R)(i.userId)&&e(b)(i.userId,d).includes(e(ae)[d][_-1])?(s(),P(X,{key:1,class:"size-7 !absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",variant:"neutral",disabled:i.userId!==e(c),onClick:O=>e(g).selectScore(d,_-1,e(ae)[d][_-1])},{default:Z(()=>[T(m(e(ae)[d][_-1]),1)]),_:2},1032,["disabled","onClick"])):(s(),a(k,{key:2},[T(m(e(ae)[d][_-1]),1)],64))],2))),128)),y.value?(s(),a("td",et)):C("",!0),y.value&&_<11?(s(!0),a(k,{key:1},Q(Object.keys(e(ce)),d=>(s(),a("td",{key:d,class:W({"bg-opacity-75 bg-white text-black font-bold":Object.values(e(n)[i.userId]).flat().filter(O=>O.row===_-1).length===Number(d)})},m(e(ce)[Number(d)][_-1]),3))),128)):C("",!0)])),64)),y.value?(s(),a("tr",lt,[...I[1]||(I[1]=[o("td",{class:"h-6 border-none",colspan:"5"},null,-1)])])):C("",!0),y.value?(s(),a("tr",tt,[(s(!0),a(k,null,Q([e(B).Red,e(B).Orange,e(B).Yellow,e(B).Blue,e(B).Purple],_=>(s(),a("td",{key:_},m(e(g).getColumnTotal(i.userId,_)),1))),128)),I[2]||(I[2]=o("td",{class:"border-none"},null,-1)),(s(),a(k,null,Q([3,4,5],_=>o("td",{key:_},m(e(g).getBonusColumnTotal(i.userId,_)),1)),64))])):C("",!0)])):C("",!0)],2))),128))]),M(X,{class:"!w-full",variant:"neutral",icon:y.value?"pi pi-eye-slash":"pi pi-eye",text:"",label:y.value?"Hide scores":"Show scores",onClick:I[0]||(I[0]=i=>y.value=!y.value)},null,8,["icon","label"])],64))}}),at=dl(st,[["__scopeId","data-v-7dfd2de2"]]),ot={class:"w-full flex justify-center"},nt={class:"text-lg"},rt=D({__name:"StatusHeader",setup(l){const g=oe(),{yahtzeeStatus:c,yahtzeeStatusLoading:u,activePlayerId:b,myPlayerId:R,players:n}=Y(g),x=j(()=>b.value===R.value?"You":n.value.find(y=>y.userId===b.value)?.displayName||"Unknown");return(y,G)=>(s(),a("div",ot,[o("h3",nt,[e(c)===e(F).HAS_STARTED||e(c)===e(F).HAS_CHOSEN_REMAINING?(s(),a(k,{key:0},[T(m(x.value)+" can now roll the dices. ",1)],64)):e(c)===e(F).HAS_THROWN_DICES?(s(),a(k,{key:1},[T(m(x.value)+" can now choose a score, or pass the turn. ",1)],64)):e(c)===e(F).HAS_CHOSEN_SCORE?(s(),a(k,{key:2},[T(m(x.value)+" chose a score. ",1)],64)):e(c)===e(F).CAN_CHOOSE_REMAINING?(s(),a(k,{key:3},[T(m(x.value)+" can choose from the remaining dices. ",1)],64)):C("",!0)])]))}}),it={class:"w-full flex flex-col gap-3"},ct={class:"w-full flex flex-col md:flex-row gap-5 md:gap-10 justify-center"},ut={class:"w-full md:w-1/2 flex justify-center gap-3"},dt=D({__name:"YahtzeeMainGame",setup(l){const g=oe(),c=He(),{isOwner:u,yahtzeeStatus:b,yahtzeeStatusLoading:R,myPlayerId:n,activePlayerId:x,dices:y,chat:G,maxPlayers:I,isLocked:i,isRolling:_,canRoll:d,canSkipTurn:O}=Y(g),{players:U}=Y(c),ee=j(()=>I.value!==null&&I.value>0?I.value-U.value.length:0),V=j(()=>u.value&&U.value.length>1),J=()=>{i.value=!0,b.value=F.HAS_STARTED};return(ne,le)=>(s(),a("div",it,[M(rt),o("div",ct,[M(e(Xe),{class:"w-full md:w-1/2"},{default:Z(()=>[e(b)===e(F).WAITING_FOR_OPPONENTS?(s(),P(X,{key:0,class:"w-full",variant:"tertiary",disabled:!V.value,onClick:J},{default:Z(()=>[T(m(ee.value?`Waiting for ${ee.value} more player${ee.value!==1?"s":""}`:e(u)?e(U).length>1?"Everyone is here? Start the game!":"Waiting for more players to join":"Waiting for the game to start"),1)]),_:1},8,["disabled"])):e(x)!==e(n)?(s(),P(X,{key:1,class:"w-full",variant:"tertiary",disabled:""},{default:Z(()=>[T(m(`${e(c).getPlayerDisplayName(e(x))}'s turn`),1)]),_:1})):e(_)||e(R)?(s(),P(X,{key:2,class:"w-full",variant:"neutral",disabled:""},{default:Z(()=>[T(m(e(_)?"Rolling...":"Loading..."),1)]),_:1})):e(d)?(s(),P(X,{key:3,class:"w-full",variant:"tertiary",disabled:e(_),onClick:e(g).roll},{default:Z(()=>[T(m(e(x)!==e(n)?`${e(c).getPlayerDisplayName(e(x))}'s turn`:"Roll"),1)]),_:1},8,["disabled","onClick"])):e(O)?(s(),P(X,{key:4,class:"w-full",variant:"neutral",onClick:e(g).passTurn},{default:Z(()=>[T(m(e(b)===e(F).CAN_CHOOSE_REMAINING?"Reroll":e(b)===e(F).HAS_CHOSEN_SCORE?"Next player":"Pass turn"),1)]),_:1},8,["onClick"])):C("",!0)]),_:1}),o("div",ut,[(s(!0),a(k,null,Q(e(y),q=>(s(),P(Vl,{key:q.id,dice:q},null,8,["dice"]))),128))])]),M(at),M(nl,{chats:e(G)??[],onSendChat:le[0]||(le[0]=q=>G.value=[...e(G)??[],q])},null,8,["chats"])]))}}),vt={class:"flex flex-col gap-3"},ft={class:"text-center text-xl md:text-3xl font-bold"},_t={key:0,class:"text-green-500"},ht={key:1,class:"text-purple-500"},gt={key:2,class:"text-red-500"},mt={key:3,class:"text-blue-500 font-bold"},yt={key:4,class:"text-blue-500 font-bold"},wt={key:5,class:"text-blue-500 font-bold"},It={class:"text-center text-md md:text-lg"},St=D({__name:"YahtzeeResults",setup(l){const g=oe(),{myPlayerId:c,finalScore:u,opponents:b}=Y(g),{currentHighscorePosition:R,hasImprovedHighscorePosition:n,hasImprovedPersonalBest:x}=sl(te.YAHTZEE_RAINBOW);return(y,G)=>(s(),a("div",vt,[o("div",ft,[e(u)[e(c)]?.winStatus==="win"?(s(),a("p",_t," You won with "+m(e(u)[e(c)]?.total)+" points! ",1)):e(u)[e(c)]?.winStatus==="tie"?(s(),a("p",ht," You tied with "+m(e(u)[e(c)]?.total)+" points! ",1)):(s(),a("p",gt," You lost with "+m(e(u)[e(c)]?.total)+" points. ",1)),e(n)&&e(R)===1?(s(),a("p",mt," HIGHSCORE! ")):e(n)?(s(),a("p",yt," LEADERBOARD IMPROVEMENT! ")):e(x)?(s(),a("p",wt," PERSONAL BEST! ")):C("",!0)]),o("div",It,[(s(!0),a(k,null,Q(e(b),I=>(s(),a("p",{key:I.userId},m(I.displayName)+" has "+m(e(u)[I.userId]?.total)+" points ",1))),128))])]))}}),xt={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},bt={class:"flex flex-wrap justify-center gap-3"},pt={key:0,class:"w-full"},Ct=D({__name:"Yahtzee",setup(l){const g=oe(),c=Re(),{gameId:u,partyName:b,isOwner:R,gameStatus:n,myPlayerId:x,finalScore:y,personalBest:G}=Y(g),{isLoggedIn:I}=Y(c),{$reset:i,createOnlineGame:_,continueOnlineGame:d,leaveOnlineGame:O,deleteOnlineGame:U,updateYahtzeeHighscore:ee}=g,V=z(!1),J=z(!1),ne=()=>{n.value=H.FINDING_OPPONENT},le=async()=>{u.value&&(R.value?await U():await O()),i()},q=async()=>{u.value&&await O(),i()};return Ce(()=>{u.value&&d(u.value)}),el(async()=>{u.value&&(await O(),i())}),(L,f)=>(s(),P(ll,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainbow Yahtzee",tags:e(b)?[{value:e(b),severity:"danger"}]:void 0,description:e(n)===e(H).HAS_NOT_STARTED?"Play with a friend.":void 0},{right:Z(()=>[o("div",xt,[M(X,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:f[0]||(f[0]=w=>V.value=!0)}),M(cl,{"icon-only":"","is-solo":!1,"is-owner":e(R),"has-game-started":e(n)>=e(H).IS_PLAYING,"is-game-over":e(n)===e(H).HAS_FINISHED,onDelete:le},null,8,["is-owner","has-game-started","is-game-over"])])]),default:Z(()=>[o("div",bt,[e(n)===e(H).FINDING_OPPONENT?(s(),a("div",pt,[M(rl,{"allow-party":"",onCreateOnlineGame:f[1]||(f[1]=w=>e(_)([{userId:w}])),onContinueOnlineGame:e(d),onCreateParty:f[2]||(f[2]=(w,p)=>e(_)([],w,p)),onJoinParty:e(d)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(n)===e(H).IS_PLAYING?(s(),P(dt,{key:1})):e(n)===e(H).HAS_FINISHED?(s(),P(St,{key:2})):C("",!0)]),M(il,{"is-viewing-highscores":J.value,"onUpdate:isViewingHighscores":f[3]||(f[3]=w=>J.value=w),"has-solo":!1,"is-solo":!1,hasMultiplayer:"",isMultiplayer:"","is-owner":e(R),"is-main-menu":e(n)===e(H).HAS_NOT_STARTED,"has-game-started":e(n)>=e(H).IS_PLAYING,"is-game-over":e(n)===e(H).HAS_FINISHED,onPlayMultiplayer:ne,onRestart:le,onGoBack:q},null,8,["is-viewing-highscores","is-owner","is-main-menu","has-game-started","is-game-over"]),J.value?(s(),P(al,{key:0,"game-id":e(te).YAHTZEE_RAINBOW},null,8,["game-id"])):C("",!0),M(ol,{"is-logged-in":e(I),"is-solo":!1,"is-game-over":e(n)===e(H).HAS_FINISHED,"final-score":e(y)[e(x)]?.total??0,"personal-best":e(G),"redirect-route":e(tl).GAMES_YAHTZEE_RAINBOW,onUpdateHighscore:f[4]||(f[4]=w=>e(ee)())},null,8,["is-logged-in","is-game-over","final-score","personal-best","redirect-route"]),M(ul,{"game-id":e(te).YAHTZEE_RAINBOW,"is-open":V.value,"onUpdate:isOpen":f[5]||(f[5]=w=>V.value=w)},null,8,["game-id","is-open"])]),_:1},8,["tags","description"]))}});export{Ct as default};
