import{_ as G}from"./c-Dialog.vue_vue_type_script_setup_true_lang-Dlac_hNb.js";import{_ as I}from"./c-DateField.vue_vue_type_script_setup_true_lang-BG1CbGZF.js";import{_ as T}from"./c-FileUpload.vue_vue_type_script_setup_true_lang-BYjoC5lX.js";import{_ as B}from"./c-SelectField.vue_vue_type_script_setup_true_lang-4iDIQG91.js";import{_ as m}from"./c-TextField.vue_vue_type_script_setup_true_lang-DT8z_rfW.js";import{e as j,h as A,at as E,s as U,a as K,c as v,r as i,M as L,l as W,q as z,D as s,p as k,n as o,k as n,au as H,av as J,aB as Q,b as X}from"../bundle.js";import{R as F}from"./c-validation-DokkLKHB.js";import{s as C,a as Y}from"./c-accordiontab.esm-CXU5YCf-.js";const Z={class:"pt-6 mb-4 xl:px-16"},ee={class:"basis-full lg:basis-1/2"},de=j({__name:"PetDialog",props:{isOpen:{type:Boolean},originalPet:{}},emits:["close"],setup(x,{emit:N}){const t=x,f=N,_=A(),g=E(),{isMutationLoading:$}=U(g),{firebaseUser:R}=U(_),{createPet:S,updatePet:D}=g,p=a=>({name:{value:(a==null?void 0:a.name)??"",error:""},avatar:{value:(a==null?void 0:a.avatar)??"",error:""},gender:{value:(a==null?void 0:a.gender)??"unknown",error:""},type:{value:(a==null?void 0:a.type)??"cat",error:""},breed:{value:(a==null?void 0:a.breed)??"",error:""},dateOfBirth:{value:(a==null?void 0:a.dateOfBirth)??null,error:""},weight:{value:a!=null&&a.weight?a.weight.toString():"",error:""}}),e=K(p(t.originalPet)),d=v(()=>{var a,r;return{name:e.name.value,userId:((a=t.originalPet)==null?void 0:a.userId)??((r=R.value)==null?void 0:r.uid)??"",avatar:e.avatar.value,gender:e.gender.value,type:e.type.value,breed:e.breed.value,dateOfBirth:e.dateOfBirth.value,weight:isNaN(+e.weight.value)?void 0:+e.weight.value}}),b=i(),y=i(),h=i(),V=i(),c=i(),w=i(),P=i(),u=v(()=>t.originalPet?Q.convert(t.originalPet):null),O=v(()=>!X(u.value,d.value)),M=async()=>{await Promise.all([b.value.test(),y.value.test(),h.value.test(),V.value.test(),c.value.test(),w.value.test(),P.value.test()]),!(e.name.error||e.avatar.error||e.type.error||e.gender.error||e.dateOfBirth.error||e.weight.error)&&(t.originalPet?await D(t.originalPet.id,d.value):await S(d.value),f("close"))},q=()=>{f("close")};return L(()=>[t.isOpen,t.originalPet],()=>{Object.assign(e,p(t.originalPet))}),(a,r)=>(W(),z(G,{isOpen:a.isOpen,title:u.value?"Update Pet":"Create Pet",description:"Keep in mind that pet data is visible to all authenticated users.","confirm-text":u.value?O.value?"Update":"Nothing changed":"Create","confirm-loading":n($),"confirm-props":{disabled:!O.value},onConfirm:M,onCancel:q},{default:s(()=>[k("form",Z,[o(m,{ref_key:"nameField",ref:b,id:"name",name:"name",label:"Name",placeholder:"Mogu",modelValue:e.name.value,"onUpdate:modelValue":r[0]||(r[0]=l=>e.name.value=l),error:e.name.error,"onUpdate:error":r[1]||(r[1]=l=>e.name.error=l),rules:[n(F).Required],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),o(n(Y),null,{default:s(()=>[o(n(C),{header:"Details"},{default:s(()=>[o(B,{ref_key:"genderField",ref:h,name:"gender",label:"Gender",modelValue:e.gender.value,"onUpdate:modelValue":r[2]||(r[2]=l=>e.gender.value=l),error:e.gender.error,"onUpdate:error":r[3]||(r[3]=l=>e.gender.error=l),options:n(H)},null,8,["modelValue","error","options"]),o(B,{ref_key:"typeField",ref:V,name:"type",label:"Type",modelValue:e.type.value,"onUpdate:modelValue":r[4]||(r[4]=l=>e.type.value=l),error:e.type.error,"onUpdate:error":r[5]||(r[5]=l=>e.type.error=l),options:n(J)},null,8,["modelValue","error","options"]),o(m,{ref_key:"breedField",ref:c,id:"breed",name:"breed",label:"Breed",placeholder:e.type.value==="dog"?"Golden Retriever":"Maine Coone",modelValue:e.breed.value,"onUpdate:modelValue":r[6]||(r[6]=l=>e.breed.value=l),error:e.breed.error,"onUpdate:error":r[7]||(r[7]=l=>e.breed.error=l),"min-length":3,"max-length":50},null,8,["placeholder","modelValue","error"])]),_:1}),o(n(C),{header:"Numbers"},{default:s(()=>[o(I,{ref_key:"dateOfBirthField",ref:w,name:"dateOfBirth",label:"Date of birth",modelValue:e.dateOfBirth.value,"onUpdate:modelValue":r[8]||(r[8]=l=>e.dateOfBirth.value=l),error:e.dateOfBirth.error,"onUpdate:error":r[9]||(r[9]=l=>e.dateOfBirth.error=l)},null,8,["modelValue","error"]),o(m,{ref_key:"weightField",ref:P,name:"weight",label:"Weight (kg)",modelValue:e.weight.value,"onUpdate:modelValue":r[10]||(r[10]=l=>e.weight.value=l),error:e.weight.error,"onUpdate:error":r[11]||(r[11]=l=>e.weight.error=l),rules:[n(F).Numeric],"min-value":1,"max-value":10,"input-props":{type:"number"}},null,8,["modelValue","error","rules"])]),_:1})]),_:1}),k("div",ee,[o(T,{ref_key:"avatarField",ref:y,id:"avatar",name:"avatar",label:"Avatar",modelValue:e.avatar.value,"onUpdate:modelValue":r[12]||(r[12]=l=>e.avatar.value=l),error:e.avatar.error,"onUpdate:error":r[13]||(r[13]=l=>e.avatar.error=l),"is-public":"","image-props":{class:"rounded-full"},"image-container-props":{class:"!h-64 !w-64"}},null,8,["modelValue","error"])])])]),_:1},8,["isOpen","title","confirm-text","confirm-loading","confirm-props"]))}});export{de as _};
