import{b as l,c as p,aO as X,e as s,d as M,E as U,I as K,s as B,g as h,_ as z,bo as ee,n as N,w as R,b4 as G,k as te,t as O,C as S,h as t,f as e,J as k,ag as se,be as V,q as le,ae,bp as ce,S as re,i as ne,z as Q}from"../bundle.js";import{u as oe,H as de,_ as ie}from"./c-useScoreInfo-9oa7esVu.js";import{a as F,C as u,b as m,D as a,_ as pe}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-zjCjwT7I.js";import{_ as ue,a as ye}from"./c-GameActions.vue_vue_type_script_setup_true_lang-p0OHCllL.js";import{_ as L}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import{S as q}from"./c-Spades-D3ibr4hA.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-ChRuyxYJ.js";const me={},fe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function xe(r,c){return l(),p("svg",fe,[...c[0]||(c[0]=[X('<circle cx="50" cy="30" r="15" fill="black"></circle><circle cx="35" cy="50" r="15" fill="black"></circle><circle cx="65" cy="50" r="15" fill="black"></circle><rect x="45" y="50" width="10" height="30" fill="black"></rect><rect x="40" y="80" width="20" height="10" fill="black"></rect>',5)])])}const J=L(me,[["render",xe]]),ge={},ke={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function Se(r,c){return l(),p("svg",ke,[...c[0]||(c[0]=[s("polygon",{points:"50,10 80,50 50,90 20,50",fill:"red"},null,-1)])])}const Y=L(ge,[["render",Se]]),ve={},he={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function _e(r,c){return l(),p("svg",he,[...c[0]||(c[0]=[s("path",{d:"M50 70 Q20 50 20 30 Q20 10 40 10 Q50 10 50 20 Q50 10 60 10 Q80 10 80 30 Q80 50 50 70 Z",fill:"red"},null,-1)])])}const W=L(ve,[["render",_e]]),be={key:0,class:"w-full h-full flex justify-center"},we={key:1,class:"relative w-full flex"},Ee={class:"relative flex text-xs md:text-md lg:text-lg font-bold"},Te=M({__name:"Card",props:{card:{},index:{}},emits:["select"],setup(r,{emit:c}){const n=r,T=c,i=U(K).greaterOrEqual("lg"),g=F(),{gameStatus:b,cards:D}=B(g),{isPlayDeck:w}=g,I=S(()=>{if(n.card.hidden)return"";switch(n.card.value){case 13:return"K";case 12:return"Q";case 11:return"J";case 1:return"A";default:return`${n.card.value}`}}),A=S(()=>n.card.hidden?"text-primary":n.card.color==="black"?"text-black":"text-red-500"),P=S(()=>n.index===D.value[n.card.deck].length-1),C=S(()=>b.value===m.HAS_STARTED&&(P.value||!n.card.hidden)),f=S(()=>w(n.card.deck)||i.value&&n.card.deck===a.STOCK_CLOSED),$=S(()=>w(n.card.deck)?20:10),E={[u.HEARTS]:W,[u.SPADES]:q,[u.DIAMONDS]:Y,[u.CLUBS]:J};return(H,x)=>(l(),h(z,{class:N(["z-10 absolute h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px] !p-1 !pt-0 bg-opacity-100 !rounded-primary flex justify-center border border-white",[A.value,r.card.hidden?"bg-violet-950 border-1 !border-yellow-700":"bg-neutral-300",r.card.selected?"border-[3px] !border-red-600":"!border-black",{"draggable-card":C.value&&!r.card.hidden}]]),style:ee({top:f.value?`${$.value*r.index}px`:0}),"title-props":{class:"text-xl"},clickable:C.value,onClick:x[0]||(x[0]=j=>T("select"))},{fullControl:R(()=>[r.card.hidden?(l(),p("div",be,[...x[1]||(x[1]=[s("div",{class:"flex flex-col justify-center"},[s("p",{class:"mb-2 text-5xl text-yellow-300"},"?")],-1)])])):(l(),p("div",we,[s("div",Ee,[(l(),h(G(E[r.card.type]),{class:"mt-[5px] sm:mt-[1px] h-[10px] w-[10px] sm:h-[20px] sm:w-[20px] md:h-[25px] md:w-[25px]"})),te(" "+O(I.value),1)]),(l(),h(G(E[r.card.type]),{class:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[25px] sm:w-[35px] md:w-[50px]"}))]))]),_:1},8,["class","style","clickable"]))}}),De={class:"absolute h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px]"},Ae=M({__name:"CardDeck",props:{deckType:{},cardType:{}},setup(r){const c=r,T=U(K).greaterOrEqual("md"),_=F(),{cards:i}=B(_),{shuffle:g,selectCard:b,selectEmptyDeck:D,selectFinalDeck:w,deselectAllCards:I,isPlayDeck:A,isFinalDeck:P}=_,C={[u.HEARTS]:W,[u.SPADES]:q,[u.DIAMONDS]:Y,[u.CLUBS]:J},f=S(()=>i.value[c.deckType]),$=S(()=>!f.value.length&&!c.cardType),E=S(()=>$.value&&c.deckType!==a.STOCK_OPEN),H=()=>{E.value&&D(c.deckType)},x=()=>{I()},j=o=>{o.added&&(b(o.added.element),f.value.length?b(f.value[f.value.length-1]):A(c.deckType)?D(c.deckType):P(c.deckType)&&w(c.deckType))};return(o,y)=>(l(),p("div",{class:N(["relative h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px]",{"border border-neutral-500":f.value.length===0,"cursor-pointer":E.value}]),onClick:H},[t(e(se),{list:[...f.value],itemKey:v=>`${v.type}.s${v.value}`,group:"patience",draggable:".draggable-card",delay:e(T)?0:100,onStart:x,onChange:j,onEnd:x},{item:R(({element:v,index:Z})=>[t(Te,{card:v,index:Z,onSelect:Ge=>e(b)(v)},null,8,["card","index","onSelect"])]),header:R(()=>[s("div",De,[r.cardType?(l(),h(G(C[r.cardType]),{key:0,class:"absolute left-1/2 transform -translate-x-1/2 w-[50px] cursor-pointer",onClick:y[0]||(y[0]=v=>e(w)(r.deckType))})):r.deckType===e(a).STOCK_CLOSED?(l(),p("div",{key:1,class:"w-full h-full flex justify-center",onClick:y[1]||(y[1]=(...v)=>e(g)&&e(g)(...v))},[...y[2]||(y[2]=[s("div",{class:"flex flex-col justify-center"},[s("p",{class:"text-neutral-300 text-xs md:text-md lg:text-lg mb-2"},"Shuffle")],-1)])])):k("",!0)])]),_:1},8,["list","itemKey","delay"])],2))}}),d=L(Ae,[["__scopeId","data-v-8dae886c"]]),Ce={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},He={class:"flex justify-center"},Ie={key:0,class:"w-full flex flex-wrap gap-3 justify-center"},Pe={key:1,class:"w-full flex flex-col gap-3"},$e={class:"my-3"},Oe={key:1},Ne={key:2,class:"w-full grid grid-cols-4 md:grid-cols-6 justify-items-center"},Re={key:1,class:"mt-5 text-center text-xl md:text-3xl font-bold"},Be={class:"text-purple-500"},Le={key:0,class:"text-blue-500 font-bold"},je={key:1,class:"text-blue-500 font-bold"},Ve={key:2,class:"text-blue-500 font-bold"},Je=M({__name:"Patience",setup(r){const n=U(K).greaterOrEqual("lg"),T=F(),{difficulty:_,gameStatus:i,score:g,turns:b,formattedTime:D,personalBest:w}=B(T),{currentHighscorePosition:I,hasImprovedHighscorePosition:A,hasImprovedPersonalBest:P}=oe(V.PATIENCE),{start:C,$reset:f,updatePatienceHighscore:$}=T,{isLoggedIn:E}=B(le()),H=Q(!1),x=Q(!1);return(j,o)=>(l(),h(z,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Patience",description:"Play solo."},{right:R(()=>[s("div",Ce,[t(ne,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:o[0]||(o[0]=y=>H.value=!0)}),t(ye,{"icon-only":"","is-solo":"","is-owner":!1,"has-game-started":e(i)>=e(m).HAS_STARTED,"is-game-over":e(i)===e(m).HAS_FINISHED,onDelete:e(f)},null,8,["has-game-started","is-game-over","onDelete"])])]),default:R(()=>[s("div",He,[!x.value&&e(i)===e(m).HAS_NOT_STARTED?(l(),p("div",Ie,[o[5]||(o[5]=s("div",{class:"w-full md:w-1/2 mb-5 text-pink-300"},[s("p",{class:"mb-3 text-xl text-center"},"Welcome to Patience!"),s("div",{class:"ms-3"},[s("p",{class:"text-red-400"},"1. Click a card to select it."),s("p",{class:"text-orange-400"},"2. Click another to move the selected card."),s("p",{class:"text-yellow-400"},"3. You can also drag cards, but the animations are not yet perfect."),s("p",{class:"text-green-400 font-bold"},"Enjoy!")])],-1)),t(ae,{class:"w-full md:w-1/2",name:"difficulty",label:"Difficulty",modelValue:e(_),"onUpdate:modelValue":o[1]||(o[1]=y=>ce(_)?_.value=y:null),options:[{label:"Easy",value:"easy"},{label:"Hard",value:"hard"}]},null,8,["modelValue"])])):k("",!0),e(i)===e(m).HAS_STARTED?(l(),p("div",Pe,[s("div",$e,[s("p",null,"Time: "+O(e(D)),1),s("p",null,"Turns: "+O(e(b)),1),s("p",null,"Score: "+O(e(g)),1)]),s("div",{class:N(["w-full grid gap-1 justify-items-center",e(n)?"grid-cols-8":"grid-cols-7"])},[e(n)?k("",!0):(l(),h(d,{key:0,"deck-type":e(a).STOCK_CLOSED},null,8,["deck-type"])),t(d,{"deck-type":e(a).STOCK_OPEN},null,8,["deck-type"]),o[6]||(o[6]=s("div",null,null,-1)),e(n)?(l(),p("div",Oe)):k("",!0),t(d,{"deck-type":e(a).HEARTS,"card-type":e(u).HEARTS},null,8,["deck-type","card-type"]),t(d,{"deck-type":e(a).SPADES,"card-type":e(u).SPADES},null,8,["deck-type","card-type"]),t(d,{"deck-type":e(a).DIAMONDS,"card-type":e(u).DIAMONDS},null,8,["deck-type","card-type"]),t(d,{"deck-type":e(a).CLUBS,"card-type":e(u).CLUBS},null,8,["deck-type","card-type"])],2),e(i)===e(m).HAS_STARTED?(l(),p("div",{key:0,class:N(["w-full grid gap-1 justify-items-center",e(n)?"grid-cols-8":"grid-cols-7"])},[e(n)?(l(),h(d,{key:0,"deck-type":e(a).STOCK_CLOSED},null,8,["deck-type"])):k("",!0),t(d,{"deck-type":e(a).PILE1},null,8,["deck-type"]),t(d,{"deck-type":e(a).PILE2},null,8,["deck-type"]),t(d,{"deck-type":e(a).PILE3},null,8,["deck-type"]),t(d,{"deck-type":e(a).PILE4},null,8,["deck-type"]),t(d,{"deck-type":e(a).PILE5},null,8,["deck-type"]),t(d,{"deck-type":e(a).PILE6},null,8,["deck-type"]),t(d,{"deck-type":e(a).PILE7},null,8,["deck-type"])],2)):k("",!0)])):e(i)===e(m).HAS_FINISHED?(l(),p("div",Ne,[t(d,{class:"md:col-start-2","deck-type":e(a).HEARTS,"card-type":e(u).HEARTS},null,8,["deck-type","card-type"]),t(d,{"deck-type":e(a).SPADES,"card-type":e(u).SPADES},null,8,["deck-type","card-type"]),t(d,{"deck-type":e(a).DIAMONDS,"card-type":e(u).DIAMONDS},null,8,["deck-type","card-type"]),t(d,{"deck-type":e(a).CLUBS,"card-type":e(u).CLUBS},null,8,["deck-type","card-type"])])):k("",!0)]),x.value?(l(),h(de,{key:0,"game-id":e(V).PATIENCE,unit:"point"},null,8,["game-id"])):e(i)===e(m).HAS_FINISHED?(l(),p("div",Re,[s("p",Be,"You won with "+O(e(g))+" points!",1),e(A)&&e(I)===1?(l(),p("p",Le," HIGHSCORE! ")):e(A)?(l(),p("p",je," LEADERBOARD IMPROVEMENT! ")):e(P)?(l(),p("p",Ve," PERSONAL BEST! ")):k("",!0)])):k("",!0),t(ue,{class:N({"flex flex-col mt-[25vh] items-center justify-end":e(i)===e(m).HAS_STARTED}),"is-viewing-highscores":x.value,"onUpdate:isViewingHighscores":o[2]||(o[2]=y=>x.value=y),"has-solo":"","is-solo":"","has-multiplayer":!1,"is-multiplayer":!1,"is-owner":!1,"is-main-menu":e(i)===e(m).HAS_NOT_STARTED,"has-game-started":e(i)>=e(m).HAS_STARTED,"is-game-over":e(i)===e(m).HAS_FINISHED,onPlaySolo:e(C),onRestart:e(f),onGoBack:e(f)},null,8,["class","is-viewing-highscores","is-main-menu","has-game-started","is-game-over","onPlaySolo","onRestart","onGoBack"]),t(ie,{"is-logged-in":e(E),"is-solo":"","is-game-over":e(i)===e(m).HAS_FINISHED,"final-score":e(g),"personal-best":e(w),"redirect-route":e(re).GAMES_PATIENCE,onUpdateHighscore:o[3]||(o[3]=y=>e($)())},null,8,["is-logged-in","is-game-over","final-score","personal-best","redirect-route"]),t(pe,{"game-id":e(V).PATIENCE,"is-open":H.value,"onUpdate:isOpen":o[4]||(o[4]=y=>H.value=y)},null,8,["game-id","is-open"])]),_:1}))}});export{Je as default};
