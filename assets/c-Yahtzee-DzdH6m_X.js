import{d as ne,s as z,w as j,f as O,L as ve,g as s,j as t,q as r,m as n,I as d,h as e,k as i,_ as S,A as _,a3 as c,aQ as y,C as L,aR as _e,aS as oe,o as ce,ax as ie,z as U,a as me,c as fe,l as f,an as Se,E as pe,y as ue,a7 as we,R as ye}from"../bundle.js";import{u as re,s as Oe,P as F,G as l,S as N,_ as Ne}from"./c-Dice.vue_vue_type_script_setup_true_lang-BtVQMwMt.js";import{_ as Ee}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-DyQMKhMT.js";import{u as Te,H as Ae}from"./c-useScoreInfo-BCYDvVMj.js";import{_ as de}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import{_ as he,a as He}from"./c-GameChat.vue_vue_type_script_setup_true_lang-ByfsnxNw.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-BGsOqr_m.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-DjHGpPgu.js";const Ie={class:"h-10"},ke={class:"w-1/2 md:w-1/3"},ge={key:0},xe={key:1,class:"!ps-1 md:ps-1"},De={key:2},Re={key:0},Ge={key:1},Pe={key:2},Ce=ne({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(J){const H=J,x=re(),{gameType:h,gameStatus:u,activePlayer:G,reroll:T}=z(x),{selectScore:D,getScore:I,getActualValue:A}=x,o=j(!1),P=Oe[H.row],R=O(()=>I(H.row)),k=O(()=>I(H.row,F.OPPONENT)),m=O(()=>A(H.row,H.hasValue)),g=O(()=>m.value===!1?"X":m.value);return ve(()=>m.value,()=>{o.value=!0,setTimeout(()=>{o.value=!1})}),(b,C)=>(t(),s("tr",Ie,[r("th",ke,d(e(P).title),1),R.value?(t(),s("td",ge,d(R.value.value===!1?"X":R.value.value),1)):e(T)>=0&&!o.value?(t(),s("td",xe,[i(S,{class:"size-8",variant:m.value===!1||m.value===0?"neutral":void 0,onClick:C[0]||(C[0]=M=>e(D)(b.row,m.value))},{default:_(()=>[c(d(g.value),1)]),_:1},8,["variant"])])):(t(),s("td",De)),e(h)===e(y).ONLINE?(t(),s(L,{key:3},[k.value?(t(),s("td",Re,d(k.value.value===!1?"X":k.value.value),1)):e(G)===e(F).OPPONENT&&e(u)!==e(l).HAS_STARTED?(t(),s("td",Ge,[i(S,{class:"size-8",variant:m.value===!1||m.value===0?"neutral":"danger"},{default:_(()=>[c(d(g.value),1)]),_:1},8,["variant"])])):(t(),s("td",Pe))],64)):n("",!0)]))}}),E=de(Ce,[["__scopeId","data-v-6b1a7992"]]),$e={key:0,class:"text-white"},Le={key:0},Fe={key:0},be={key:0},Be={key:0,class:"h-12 md:h-auto text-red-500"},Ve={key:0},Ye={class:"h-12 md:h-auto text-pink-500"},Ue={key:0,class:"text-purple-500 font-bold"},ze={key:1,class:"text-red-500 font-bold"},je={key:2,class:"text-green-500 font-bold"},Me={key:0},Xe=ne({__name:"Scoreboard",setup(J){const H=re(),x=_e(),{gameType:h,gameStatus:u,bonus:G,hasOfValue:T,hasThreeOfAKind:D,hasFourOfAKind:I,hasFullHouse:A,hasSmallStraight:o,hasLargeStraight:P,hasYahtzee:R,diceTotal:k,scoreTotalOf:m,finalScore:g,finalScoreOpponent:b}=z(H),{onlineGameOpponentActive:C,onlineGameOpponentName:M}=z(x),{currentHighscorePosition:Q,hasImprovedHighscorePosition:X,hasImprovedPersonalBest:$}=Te(oe.YAHTZEE),Z=j(),B=j(!1),W=O(()=>T.value(1)),V=O(()=>T.value(2)),ee=O(()=>T.value(3)),te=O(()=>T.value(4)),ae=O(()=>T.value(5)),Y=O(()=>T.value(6)),p=O(()=>m.value("top")),K=O(()=>m.value("top",F.OPPONENT)),le=O(()=>m.value("bottom")),q=O(()=>m.value("bottom",F.OPPONENT));return ce(()=>{Z.value=setInterval(()=>{B.value=!B.value},500)}),ie(()=>{clearInterval(Z.value)}),(se,w)=>(t(),s("table",{class:U(["w-full mt-5 text-sm md:text-base text-left",e(u)===e(l).HAS_FINISHED?"text-neutral-500":"text-white",e(u)===e(l).HAS_NOT_STARTED?B.value?"even":"odd":void 0])},[e(h)===e(y).ONLINE?(t(),s("thead",$e,[r("tr",null,[w[0]||(w[0]=r("th",null,null,-1)),w[1]||(w[1]=r("th",null,"You",-1)),r("th",{class:U(e(C)?"text-green-400":"text-red-400")},d(e(M)),3)])])):n("",!0),r("tbody",null,[i(E,{row:e(N).ONES,"has-value":W.value},null,8,["row","has-value"]),i(E,{row:e(N).TWOS,"has-value":V.value},null,8,["row","has-value"]),i(E,{row:e(N).THREES,"has-value":ee.value},null,8,["row","has-value"]),i(E,{row:e(N).FOURS,"has-value":te.value},null,8,["row","has-value"]),i(E,{row:e(N).FIVES,"has-value":ae.value},null,8,["row","has-value"]),i(E,{row:e(N).SIXES,"has-value":Y.value},null,8,["row","has-value"]),e(u)>e(l).HAS_NOT_STARTED?(t(),s("tr",{key:0,class:U(["h-12 md:h-auto",e(u)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[w[2]||(w[2]=r("th",null,"TOP",-1)),r("td",null,d(e(u)>=e(l).HAS_STARTED?p.value:""),1),e(h)===e(y).ONLINE?(t(),s("td",Le,d(e(u)>=e(l).HAS_STARTED?K.value:""),1)):n("",!0)],2)):n("",!0),e(u)>e(l).HAS_NOT_STARTED?(t(),s("tr",{key:1,class:U(["h-12 md:h-auto",e(u)===e(l).HAS_FINISHED?p.value>=63?"text-yellow-500":"text-white":"text-neutral-500"])},[w[3]||(w[3]=r("th",null,"BONUS",-1)),r("td",null,d(p.value>=63?35:e(u)===e(l).HAS_FINISHED?"X":""),1),e(h)===e(y).ONLINE?(t(),s("td",Fe,d(K.value>=63?35:e(u)===e(l).HAS_FINISHED?"X":""),1)):n("",!0)],2)):n("",!0),i(E,{row:e(N).THREE_OF_A_KIND,"has-value":e(D)},null,8,["row","has-value"]),i(E,{row:e(N).FOUR_OF_A_KIND,"has-value":e(I)},null,8,["row","has-value"]),i(E,{row:e(N).FULL_HOUSE,"has-value":e(A)},null,8,["row","has-value"]),i(E,{row:e(N).SMALL_STRAIGHT,"has-value":e(o)},null,8,["row","has-value"]),i(E,{row:e(N).LARGE_STRAIGHT,"has-value":e(P)},null,8,["row","has-value"]),i(E,{row:e(N).YAHTZEE,"has-value":e(R)},null,8,["row","has-value"]),i(E,{row:e(N).CHANCE,"has-value":e(k)},null,8,["row","has-value"]),e(u)>e(l).HAS_NOT_STARTED?(t(),s("tr",{key:2,class:U(["h-12 md:h-auto",e(u)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[w[4]||(w[4]=r("th",null,"BOTTOM",-1)),r("td",null,d(e(u)>=e(l).HAS_STARTED?le.value:""),1),e(h)===e(y).ONLINE?(t(),s("td",be,d(e(u)>=e(l).HAS_STARTED?q.value:""),1)):n("",!0)],2)):n("",!0),e(u)===e(l).HAS_FINISHED&&e(g)?(t(),s(L,{key:3},[e(G)?(t(),s("tr",Be,[w[5]||(w[5]=r("th",null,"YAHTZEE BONUS",-1)),r("td",null,d(e(G)),1),e(h)===e(y).ONLINE?(t(),s("td",Ve)):n("",!0)])):n("",!0),r("tr",Ye,[w[6]||(w[6]=r("th",null,"TOTAL",-1)),r("td",null,[c(d(e(g))+" ",1),e(X)&&e(Q)===1?(t(),s("span",Ue," HIGHSCORE! ")):e(X)?(t(),s("span",ze," LEADERBOARD IMPROVEMENT! ")):e($)?(t(),s("span",je," PERSONAL BEST! ")):n("",!0)]),e(h)===e(y).ONLINE?(t(),s("td",Me,d(e(b)),1)):n("",!0)])],64)):n("",!0)])],2))}}),Ze=de(Xe,[["__scopeId","data-v-2162e476"]]),Ke={class:"h-fit flex flex-col md:flex-row-reverse gap-3"},qe={class:"flex flex-wrap justify-center gap-3"},Je={key:1,class:"w-full"},Qe={class:"flex justify-center"},We={key:2,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},et={class:"w-full md:w-1/2 flex justify-center gap-3"},tt={class:"w-full md:w-1/2 flex justify-center gap-3"},at={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},lt={key:3,class:"flex flex-wrap gap-3 mt-3 justify-center"},ct=ne({__name:"Yahtzee",setup(J){const H=me(),x=re(),h=fe(),{onlineGames:u,onlineGamesLoading:G,onlineGameId:T,onlineGameChat:D,isOnlineGameOwner:I,gameType:A,gameStatus:o,activePlayer:P,canRoll:R,canReroll:k,dices:m,finalScore:g,personalBest:b,onlineGameOpponentName:C}=z(x),{firebaseUser:M}=z(h),{collections:Q,start:X,$reset:$,fetchOnlineGames:Z,createOnlineGame:B,continueOnlineGame:W,leaveOnlineGame:V,deleteOnlineGame:ee,roll:te,updateYahtzeeHighscore:ae}=x,Y=j(!1),p=j(!1),K=()=>{p.value=!1,$()},le=()=>{p.value=!1,A.value=y.SOLO,X()},q=async()=>{T.value&&await V(),$()},se=async()=>{p.value=!1,T.value&&(I.value?await ee():await V()),$()};return ie(async()=>{T.value&&(await V(),$())}),(w,a)=>(t(),f(ue,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:e(A)===e(y).SOLO?e(o)===e(l).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:_(()=>[r("div",Ke,[i(S,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:a[0]||(a[0]=v=>Y.value=!0)}),e(I)?(t(),f(S,{key:0,variant:"danger",icon:"pi pi-trash",onClick:se})):n("",!0)])]),default:_(()=>[r("div",qe,[e(o)===e(l).HAS_NOT_STARTED?(t(),s(L,{key:0},[i(S,{class:"w-full md:w-1/2",onClick:le},{default:_(()=>a[11]||(a[11]=[c(" Play Solo ")])),_:1,__:[11]}),i(S,{class:"w-full md:w-1/2",variant:"purple",onClick:a[1]||(a[1]=()=>{o.value=e(l).FINDING_OPPONENT,A.value=e(y).ONLINE})},{default:_(()=>a[12]||(a[12]=[c(" Play Online ")])),_:1,__:[12]}),e(o)===e(l).HAS_NOT_STARTED&&!p.value?(t(),f(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:a[2]||(a[2]=v=>p.value=!0)},{default:_(()=>a[13]||(a[13]=[c(" View Highscores ")])),_:1,__:[13]})):e(o)===e(l).HAS_NOT_STARTED?(t(),f(S,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[3]||(a[3]=v=>p.value=!1)},{default:_(()=>a[14]||(a[14]=[c(" Go Back ")])),_:1,__:[14]})):n("",!0)],64)):e(o)===e(l).FINDING_OPPONENT?(t(),s("div",Je,[i(he,{modelValue:e(u),"onUpdate:modelValue":a[4]||(a[4]=v=>Se(u)?u.value=v:null),collection:e(Q).onlineGames,"online-games-loading":e(G),"fetch-online-games":e(Z),onCreateOnlineGame:e(B),onContinueOnlineGame:e(W)},null,8,["modelValue","collection","online-games-loading","fetch-online-games","onCreateOnlineGame","onContinueOnlineGame"]),r("div",Qe,[i(S,{class:"w-full md:w-1/2",variant:"neutral",onClick:q},{default:_(()=>a[15]||(a[15]=[c(" Go Back ")])),_:1,__:[15]})])])):e(o)!==e(l).HAS_FINISHED?(t(),s("div",We,[r("div",et,[e(A)===e(y).ONLINE||e(R)||e(k)?(t(),f(S,{key:0,class:"w-full",variant:"tertiary",disabled:e(P)!==e(F).PLAYER||e(o)===e(l).HAS_CHOSEN_DICES||e(m).every(v=>v.selected),onClick:e(te)},{default:_(()=>[c(d(e(P)===e(F).OPPONENT?`${e(C)}'s turn`:e(k)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):n("",!0)]),r("div",tt,[(t(!0),s(L,null,pe(e(m),v=>(t(),f(Ne,{key:v.id,dice:v},null,8,["dice"]))),128))])])):n("",!0)]),p.value?(t(),f(Ae,{key:0,"game-id":e(oe).YAHTZEE},null,8,["game-id"])):!p.value&&e(o)!==e(l).FINDING_OPPONENT?(t(),f(Ze,{key:1})):n("",!0),e(A)===e(y).ONLINE&&e(o)>=e(l).HAS_STARTED?(t(),f(He,{key:2,chats:e(D)??[],onSendChat:a[5]||(a[5]=v=>D.value=[...e(D)??[],v])},null,8,["chats"])):n("",!0),r("div",at,[e(o)>=e(l).HAS_STARTED&&e(o)<=e(l).HAS_FINISHED?(t(),s(L,{key:0},[e(A)===e(y).SOLO?(t(),f(S,{key:0,class:"w-full md:w-1/2",variant:e(o)===e(l).HAS_FINISHED?"secondary":"neutral",onClick:K},{default:_(()=>[c(d(e(o)===e(l).HAS_FINISHED?"Play Again":"Restart"),1)]),_:1},8,["variant"])):e(A)===e(y).ONLINE?(t(),s(L,{key:1},[e(I)?e(o)!==e(l).HAS_FINISHED?(t(),f(S,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:q},{default:_(()=>a[16]||(a[16]=[c(" Go Back ")])),_:1,__:[16]})):n("",!0):(t(),f(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:se},{default:_(()=>[c(d(e(o)===e(l).HAS_FINISHED?"Play Again":"Go Back"),1)]),_:1}))],64)):n("",!0)],64)):n("",!0),e(o)===e(l).HAS_FINISHED&&!p.value?(t(),f(S,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[6]||(a[6]=v=>p.value=!0)},{default:_(()=>a[17]||(a[17]=[c(" View Highscores ")])),_:1,__:[17]})):e(o)===e(l).HAS_FINISHED?(t(),f(S,{key:2,class:"w-full md:w-1/2",variant:"neutral",onClick:a[7]||(a[7]=v=>p.value=!1)},{default:_(()=>a[18]||(a[18]=[c(" View Your Score ")])),_:1,__:[18]})):n("",!0)]),e(o)===e(l).HAS_FINISHED?(t(),s("div",lt,[e(M)?e(A)===e(y).SOLO&&e(g)&&e(b)<e(g)?(t(),f(S,{key:1,class:"w-full md:w-1/2",variant:"primary",onClick:a[9]||(a[9]=v=>e(ae)())},{default:_(()=>a[21]||(a[21]=[c(" Add To Leaderboard ")])),_:1,__:[21]})):n("",!0):(t(),f(ue,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:_(()=>[a[19]||(a[19]=c(" Please ")),r("a",{class:"cursor-pointer",onClick:a[8]||(a[8]=v=>e(H).push({name:e(ye).LOGIN,params:{redirect:JSON.stringify({name:e(we).GAMES_YAHTZEE})}}))}," Login "),a[20]||(a[20]=c(" to add your score to the leaderboard. "))]),_:1,__:[19,20]}))])):n("",!0),i(Ee,{"game-id":e(oe).YAHTZEE,"is-open":Y.value,"onUpdate:isOpen":a[10]||(a[10]=v=>Y.value=v)},null,8,["game-id","is-open"])]),_:1},8,["description"]))}});export{ct as default};
