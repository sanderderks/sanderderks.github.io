import{_ as he}from"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";import{_ as Le}from"./c-Page.vue_vue_type_script_setup_true_lang-DkPdZ16W.js";import{d as N,u as Oe,a as Se,b as pe,c as X,e as Z,s as T,f as L,o as Ue,i as Me,F as Ae,R as z,g as S,h as e,j as a,k as c,_ as q,l as U,m as V,n as Re,B as Ne,p as je,q as B,r as j,t as Y,v as me,w as i,x as ke,y as ue,z as K,A as x,C as H,D as oe,E as ve,G as Ge,H as we,I as Fe,J as ze,K as ce,L as ee,M as le,N as qe,O as Q,P as He,Q as Be,S as Je,T as F,U as se,V as We,W as Pe,X as ae,Y as Ye,Z as $e,$ as Qe,a0 as Ke,a1 as Xe,a2 as re,a3 as ne,a4 as ie,a5 as de,a6 as Ze}from"../bundle.js";import{_ as et}from"./c-BackButton.vue_vue_type_script_setup_true_lang-C2rqiF8o.js";import{_ as Ie,a as Ce,u as tt}from"./c-BlogPost.vue_vue_type_script_setup_true_lang-C4PQ8AIg.js";import{u as ot}from"./c-useUsers-b70JZ-jJ.js";const lt={key:0,class:"flex justify-center mt-5"},st={key:1,class:"flex flex-col gap-3"},at=N({__name:"BlogDetails",emits:["createClicked","editClicked","deleteClicked"],setup(n){const v=Oe(),$=Se(),f=pe(),k=X(),s=Z(),{routeLoading:p}=T(f),{isLoggedIn:C}=T(k),{blogPosts:w,blogReactions:h,isBlogPostsFetchLoading:g}=T(s),{fetchBlogPost:y}=s,m=L(()=>v.params.postId);return Ue(async()=>{var b;if(h.value.unread=[],m.value)if(((b=w.value.data.single)==null?void 0:b.id)!==m.value){const t=await y(m.value);if(Me(t)&&t===Ae.PERMISSION_DENIED&&!C.value){$.push({name:z.LOGIN,params:{redirect:JSON.stringify({name:z.BLOG_DETAILS,params:{postId:m.value}})}});return}}else w.value.data.single}),(b,t)=>e(g)?(a(),S("div",lt,[c(q,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:"",label:"Loading..."})])):(a(),S("div",st,[c(et,{"back-route":e(z).BLOG,label:"Back to other posts"},null,8,["back-route"]),e(w).data.single?(a(),U(Ie,{key:0,post:e(w).data.single,onEditClicked:t[0]||(t[0]=o=>b.$emit("editClicked",e(w).data.single)),onDeleteClicked:t[1]||(t[1]=o=>b.$emit("deleteClicked",e(w).data.single))},null,8,["post"])):V("",!0)]))}});var rt=Re`
    .p-card {
        background: dt('card.background');
        color: dt('card.color');
        box-shadow: dt('card.shadow');
        border-radius: dt('card.border.radius');
        display: flex;
        flex-direction: column;
    }

    .p-card-caption {
        display: flex;
        flex-direction: column;
        gap: dt('card.caption.gap');
    }

    .p-card-body {
        padding: dt('card.body.padding');
        display: flex;
        flex-direction: column;
        gap: dt('card.body.gap');
    }

    .p-card-title {
        font-size: dt('card.title.font.size');
        font-weight: dt('card.title.font.weight');
    }

    .p-card-subtitle {
        color: dt('card.subtitle.color');
    }
`,nt={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},it=Ne.extend({name:"card",style:rt,classes:nt}),dt={name:"BaseCard",extends:je,style:it,provide:function(){return{$pcCard:this,$parentInstance:this}}},_e={name:"Card",extends:dt,inheritAttrs:!1};function ut(n,v,$,f,k,s){return a(),S("div",j({class:n.cx("root")},n.ptmi("root")),[n.$slots.header?(a(),S("div",j({key:0,class:n.cx("header")},n.ptm("header")),[Y(n.$slots,"header")],16)):V("",!0),B("div",j({class:n.cx("body")},n.ptm("body")),[n.$slots.title||n.$slots.subtitle?(a(),S("div",j({key:0,class:n.cx("caption")},n.ptm("caption")),[n.$slots.title?(a(),S("div",j({key:0,class:n.cx("title")},n.ptm("title")),[Y(n.$slots,"title")],16)):V("",!0),n.$slots.subtitle?(a(),S("div",j({key:1,class:n.cx("subtitle")},n.ptm("subtitle")),[Y(n.$slots,"subtitle")],16)):V("",!0)],16)):V("",!0),B("div",j({class:n.cx("content")},n.ptm("content")),[Y(n.$slots,"content")],16),n.$slots.footer?(a(),S("div",j({key:1,class:n.cx("footer")},n.ptm("footer")),[Y(n.$slots,"footer")],16)):V("",!0)],16)],16)}_e.render=ut;const ct={class:"flex gap-3"},pt={class:"min-h-[50vh] flex flex-col"},mt={class:"flex justify-between h-fit mt-2 gap-2"},vt={class:"flex flex-wrap gap-3"},ft={class:"relative mt-5 min-h-[20vh] max-h-screen flex flex-col justify-end"},gt={class:"relative min-h-[20vh] max-h-full flex-grow"},yt={class:"flex flex-col gap-1"},bt={class:"flex justify-center mt-5"},kt={class:"flex justify-center mt-3"},wt=N({__name:"BlogPostOverview",props:{post:{}},emits:["editClicked","deleteClicked"],setup(n){const v=n,$=pe(),f=X(),k=me(),{routeLoading:s,routeLoadingId:p}=T($),{publicUsers:C}=T(k),{isOwner:w}=T(f),h=i(v.post.archived),g=L(()=>{var t;return(t=v.post.allowedUserIds)!=null&&t.length?C.value.filter(o=>{var l;return(l=v.post.allowedUserIds)==null?void 0:l.includes(o.id)}):[]}),y=L(()=>{const t=ke(v.post.date);return v.post.dateUpdated?t+` - updated ${ke(v.post.dateUpdated)}`:t}),m=L(()=>{const t=[];return v.post.datePinned&&t.push({value:"Pinned",severity:"success",rounded:!1}),v.post.locked&&t.push({value:"Locked",severity:"danger",rounded:!1,icon:"pi pi-lock"}),v.post.archived&&t.push({value:"Archived",severity:"warning",rounded:!1,icon:"pi pi-file-excel"}),t}),b=()=>{const t=document.createElement("textarea"),{protocol:o,hostname:l,port:r}=window.location,_=`${o}//${l}`+(l==="localhost"?`:${r}`:"");t.value=`${_}#${ze.BLOG.path}/${v.post.id}`,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),ce.success("Copied link!")};return(t,o)=>(a(),U(ue,{id:t.post.id,class:K([{"min-h-[50vh]":!h.value},"border-4 border-transparent","!rounded-primary",t.post.colorSecondary||t.post.colorPrimary||"bg-secondary-900",t.post.opacitySecondary||"bg-opacity-50"]),title:t.post.title,subTitle:y.value,tags:m.value,loading:t.post.loading,isCollapsed:h.value,clickable:"",route:{name:e(z).BLOG_DETAILS,params:{postId:t.post.id}}},{right:x(()=>[B("div",ct,[h.value?e(w)?(a(),U(Ce,{key:1,onEditClicked:o[0]||(o[0]=l=>t.$emit("editClicked")),onDeleteClicked:o[1]||(o[1]=l=>t.$emit("deleteClicked"))})):V("",!0):(a(),U(q,{key:0,class:"border-none h-fit",variant:"neutral",icon:"pi pi-copy",onClick:b}))])]),default:x(()=>{var l;return[B("div",pt,[B("div",mt,[B("div",vt,[g.value.length?(a(),S(H,{key:0},[c(e(oe),{class:"h-fit !p-0 !px-4 !py-1 !bg-red-800 !bg-opacity-50",icon:"pi pi-user",label:g.value[0].displayName,rounded:""},null,8,["label"]),g.value.length>1?(a(),U(e(oe),{key:0,class:"h-fit !p-0 !px-4 !py-1 !bg-red-800 !bg-opacity-50",icon:"pi pi-user",label:"You",rounded:""})):V("",!0),g.value.length>2?(a(),U(e(oe),{key:1,class:"h-fit !p-0 !px-4 !py-1 !bg-red-800 !bg-opacity-50",label:`${g.value.length-2} others`,rounded:""},null,8,["label"])):V("",!0)],64)):V("",!0)]),e(w)?(a(),S("div",{key:0,class:K(["flex justify-end ms-5",(l=t.post.allowedUserIds)!=null&&l.length?"flex-col md:flex-row":"flex-row"])},[c(Ce,{onEditClicked:o[2]||(o[2]=r=>t.$emit("editClicked")),onDeleteClicked:o[3]||(o[3]=r=>t.$emit("deleteClicked"))})],2)):V("",!0)]),B("div",ft,[o[6]||(o[6]=B("div",{class:"absolute inset-0 rounded-primary bg-gradient-to-t from-neutral-500 to-transparent"},null,-1)),B("div",gt,[c(e(_e),{class:K(["z-10 min-h-[20vh] p-5 text-neutral-300",t.post.colorPrimary,t.post.opacityPrimary||"bg-opacity-50"])},{content:x(()=>[B("div",yt,[(a(!0),S(H,null,ve(t.post.content.filter((r,_)=>_<2),r=>(a(),U(Ge,{key:r.id,class:"max-h-[150px] overflow-hidden",post:t.post,block:r},null,8,["post","block"]))),128))])]),_:1},8,["class"])])]),B("div",bt,[c(q,{class:"w-full md:w-1/2",variant:"neutral",label:"Read more",loading:e(s)===e(z).BLOG_DETAILS&&e(p)===t.post.id,onClick:o[4]||(o[4]=r=>e(we).push({name:e(z).BLOG_DETAILS,params:{postId:t.post.id}}))},null,8,["loading"])]),B("div",kt,[B("p",{class:K(t.post.reactions.length?"text-yellow-400 hover:text-yellow-500 cursor-pointer":"text-neutral-200"),onClick:o[5]||(o[5]=r=>e(we).push({name:e(z).BLOG_DETAILS,params:{postId:t.post.id}}))},Fe(t.post.reactions.length)+" replies ",3)])])]}),_:1},8,["id","class","title","subTitle","tags","loading","isCollapsed","route"]))}}),Pt={class:"w-full grid gap-4 md:gap-10 xl:gap-20"},$t={key:2,class:"w-full flex justify-center mt-5"},Ct=N({__name:"BlogPosts",props:{single:{type:Boolean}},emits:["createClicked","editClicked","deleteClicked"],setup(n){const v=X(),$=Z(),{blogPosts:f,visibleBlogPosts:k,isBlogPostsFetchLoading:s}=T($),{firebaseUser:p,isLoggedIn:C,isOwner:w}=T(v),{fetchBlogPosts:h}=$;tt();const g=i(),y=i(),m=i(),b=async o=>{var l;f.value.visibility!==o&&(f.value.data[o].length||await h((l=p.value)==null?void 0:l.uid,{visibility:o}),f.value.visibility=o,f.value.isLastPage=!1,le(g.value))},t=async()=>{var l;const o=k.value.length;await h((l=p.value)==null?void 0:l.uid),k.value[o]&&le(y.value[o])};return Ue(()=>{f.value.loadedOnce||(C.value?b("private"):f.value.visibility!=="public"&&b("public"),f.value.loadedOnce=!0)}),ee(()=>{var o;return(o=y.value)==null?void 0:o.length},()=>{var o;if((o=y.value)!=null&&o.length&&m.value){const l=k.value.find(r=>r.id===m.value);if(l){const r=k.value.indexOf(l);le(y.value[r]),m.value=void 0}}}),(o,l)=>(a(),S("div",{ref_key:"container",ref:g,class:"flex flex-col gap-5 items-center"},[e(w)?(a(),U(q,{key:0,class:"w-full md:w-1/2",variant:"tertiary",label:"New Post",onClick:l[0]||(l[0]=r=>o.$emit("createClicked"))})):V("",!0),e(C)?(a(),U(e(qe),{key:1,class:"w-full md:w-1/2"},{default:x(()=>[c(q,{class:"w-full",variant:"secondary",outlined:e(f).visibility!=="public",loading:e(f).isLoading.public.fetch,label:"Public Posts",onClick:l[1]||(l[1]=r=>b("public"))},null,8,["outlined","loading"]),c(q,{class:"w-full",variant:"secondary",outlined:e(f).visibility!=="private",loading:e(f).isLoading.private.fetch,label:"Private Posts",onClick:l[2]||(l[2]=r=>b("private"))},null,8,["outlined","loading"])]),_:1})):V("",!0),B("div",Pt,[e(k).length?(a(!0),S(H,{key:0},ve(e(k),(r,_)=>(a(),S("div",{key:r.id,ref_for:!0,ref_key:"posts",ref:y},[_===0||r.datePinned?(a(),U(Ie,{key:0,post:r,onEditClicked:P=>o.$emit("editClicked",r),onDeleteClicked:P=>o.$emit("deleteClicked",r)},null,8,["post","onEditClicked","onDeleteClicked"])):(a(),U(wt,{key:1,post:r,onEditClicked:P=>o.$emit("editClicked",r),onDeleteClicked:P=>o.$emit("deleteClicked",r)},null,8,["post","onEditClicked","onDeleteClicked"]))]))),128)):e(s)?(a(),U(ue,{key:1,class:"!bg-neutral-600 !bg-opacity-40 !rounded-primary",title:"Loading..."})):(a(),U(ue,{key:2,class:"!bg-red-900 !bg-opacity-40 !rounded-primary",title:"No posts"}))]),e(f).isLastPage?V("",!0):(a(),S("div",$t,[c(q,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:e(k).length>0&&e(s),label:"Load more posts",onClick:t},null,8,["loading"])]))],512))}}),ht=N({__name:"BlogPostContentDialog",emits:["update:selected","error"],setup(n,{expose:v,emit:$}){const f=$,k=Q(),{blogPostMutation:s}=T(k),p=i(),C=i(),w=L(()=>[C.value].some(g=>!!g));return v({test:async()=>{await Promise.all([p.value.test()]),f("error",w.value)}}),(g,y)=>(a(),S(H,null,[c(He,{ref_key:"title",ref:p,class:"w-full",name:"title",label:"Title",placeholder:"Amazing Post",modelValue:e(s).title,"onUpdate:modelValue":y[0]||(y[0]=m=>e(s).title=m),error:C.value,"onUpdate:error":y[1]||(y[1]=m=>C.value=m),rules:[e(Be).Required],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),c(Je,{modelValue:e(s).content,"onUpdate:modelValue":y[2]||(y[2]=m=>e(s).content=m)},null,8,["modelValue"])],64))}}),St=N({__name:"BlogPostSettingsDialog",emits:["error"],setup(n,{expose:v,emit:$}){const f=$,k=me(),s=Q(),{blogPostMutation:p}=T(s),{allowedPublicUsers:C}=k,{mappedUsers:w}=ot(),h=i(),g=i(),y=i(),m=i(),b=L({get(){return!!p.value.datePinned},set(d){p.value.datePinned=d?new Date:null}}),t=i(),o=i(),l=i(),r=i(),_=L(()=>[t.value,o.value,l.value,r.value].some(d=>!!d)),P=i([]),E=d=>{p.value.allowedUserIds=d},D=async()=>{p.value.allowedUserIds.length&&!P.value.length&&(t.value="Invalid user ID's"),await Promise.all([g.value.test(),y.value.test(),m.value.test()]),f("error",_.value)};return ee(()=>p.value.allowedUserIds,async d=>{P.value=await C(d)},{immediate:!0}),v({test:D}),(d,u)=>(a(),S(H,null,[c(F,{ref_key:"allowedUsers",ref:h,class:"w-full md:w-1/2",name:"allowedUserIds",label:"Allowed users",placeholder:"This post is public","model-value":e(p).allowedUserIds,error:t.value,"onUpdate:error":u[0]||(u[0]=A=>t.value=A),"onUpdate:arrayValue":E,options:e(w),multiple:""},null,8,["model-value","error","options"]),c(se,{ref_key:"pinned",ref:m,class:"w-full md:w-1/2",name:"pinned",label:"Pinned",modelValue:b.value,"onUpdate:modelValue":u[1]||(u[1]=A=>b.value=A)},null,8,["modelValue"]),c(se,{ref_key:"locked",ref:g,class:"w-full md:w-1/2",name:"locked",label:"Locked for commenting",modelValue:e(p).locked,"onUpdate:modelValue":u[2]||(u[2]=A=>e(p).locked=A)},null,8,["modelValue"]),c(se,{ref_key:"archived",ref:y,class:"w-full md:w-1/2",name:"archived",label:"Archived",modelValue:e(p).archived,"onUpdate:modelValue":u[3]||(u[3]=A=>e(p).archived=A)},null,8,["modelValue"])],64))}}),Ut=N({__name:"BlogPostStylingDialog",emits:["error"],setup(n,{expose:v,emit:$}){const f=$,k=Q(),{blogPostMutation:s}=T(k),p=i(),C=i(),w=i(),h=i(),g=i(),y=i(),m=i(),b=i(),t=i(),o=i(),l=i(),r=i(),_=L(()=>[m.value,b.value,t.value,o.value,l.value,r.value].some(D=>!!D)),P=L(()=>We(Pe.find(D=>D.value===s.value.colorPrimary)));return v({test:async()=>{await Promise.all([p.value.test(),C.value.test(),w.value.test(),h.value.test(),g.value.test(),y.value.test()]),f("error",_.value)}}),(D,d)=>(a(),S(H,null,[c(F,{ref_key:"colorPrimary",ref:p,class:"w-full md:w-1/2",name:"colorPrimary",label:"Primary Style",modelValue:e(s).colorPrimary,"onUpdate:modelValue":d[0]||(d[0]=u=>e(s).colorPrimary=u),error:m.value,"onUpdate:error":d[1]||(d[1]=u=>m.value=u),options:e(Pe),rules:[e(Be).Required]},null,8,["modelValue","error","options","rules"]),c(F,{ref_key:"opacityPrimary",ref:h,class:"w-full md:w-1/2",name:"opacityPrimary",label:"Primary Opacity",modelValue:e(s).opacityPrimary,"onUpdate:modelValue":d[2]||(d[2]=u=>e(s).opacityPrimary=u),error:o.value,"onUpdate:error":d[3]||(d[3]=u=>o.value=u),options:e(ae)},null,8,["modelValue","error","options"]),c(F,{ref_key:"colorSecondary",ref:C,class:"w-full md:w-1/2",name:"colorSecondary",label:"Secondary Style",modelValue:e(s).colorSecondary,"onUpdate:modelValue":d[4]||(d[4]=u=>e(s).colorSecondary=u),error:b.value,"onUpdate:error":d[5]||(d[5]=u=>b.value=u),options:P.value},null,8,["modelValue","error","options"]),c(F,{ref_key:"opacitySecondary",ref:g,class:"w-full md:w-1/2",name:"opacitySecondary",label:"Secondary Opacity",modelValue:e(s).opacitySecondary,"onUpdate:modelValue":d[6]||(d[6]=u=>e(s).opacitySecondary=u),error:l.value,"onUpdate:error":d[7]||(d[7]=u=>l.value=u),options:e(ae)},null,8,["modelValue","error","options"]),c(F,{ref_key:"colorTertiary",ref:w,class:"w-full md:w-1/2",name:"colorTertiary",label:"Tertiary Style",modelValue:e(s).colorTertiary,"onUpdate:modelValue":d[8]||(d[8]=u=>e(s).colorTertiary=u),error:t.value,"onUpdate:error":d[9]||(d[9]=u=>t.value=u),options:e(Ye)},null,8,["modelValue","error","options"]),c(F,{ref_key:"opacityTertiary",ref:y,class:"w-full md:w-1/2",name:"opacityTertiary",label:"Tertiary Opacity",modelValue:e(s).opacityTertiary,"onUpdate:modelValue":d[10]||(d[10]=u=>e(s).opacityTertiary=u),error:r.value,"onUpdate:error":d[11]||(d[11]=u=>r.value=u),options:e(ae)},null,8,["modelValue","error","options"])],64))}}),Bt=N({__name:"BlogPostDialog",emits:["scroll-to-updated"],setup(n,{emit:v}){const $=v,f=X(),k=Z(),s=Q(),{firebaseUser:p}=T(f),{isBlogPostsMutationLoading:C}=T(k),{createBlogPost:w,updateBlogPost:h,deleteFilesOfBlogPost:g,toggleBlogPostVisibility:y}=k,{getBlogPostMutationContent:m,getBlogPostMutationStyling:b,getBlogPostMutationSettings:t}=s,{isOpen:o,blogPostOriginal:l,blogPostMutationId:r,blogPostMutation:_,hasBlogPostMutationContentChanges:P,hasBlogPostMutationStylingChanges:E,hasBlogPostMutationSettingsChanges:D}=T(s),d=i(),u=i(),A=i(),fe=i(),ge=i(!1),ye=i(!1),be=i(!1),Ee=L(()=>{var O,I,M,J,W,R;return!!((I=(O=l.value)==null?void 0:O.allowedUserIds)!=null&&I.length)&&!((M=t().allowedUserIds)!=null&&M.length)||!((W=(J=l.value)==null?void 0:J.allowedUserIds)!=null&&W.length)&&!!((R=t().allowedUserIds)!=null&&R.length)}),xe=L(()=>{const O=[];return P.value&&O.push("Content"),E.value&&O.push("Styling"),D.value&&O.push("Settings"),O.length?"Update "+$e(O):void 0}),te=L(()=>Qe(l.value)),Ve=async()=>{var O,I,M,J,W;if(await Promise.all([u.value.test(),A.value.test(),fe.value.test()]),!(ge.value||ye.value||be.value))if(!l.value)await w(r.value,_.value,(O=p.value)==null?void 0:O.uid)&&(s.close(),$("scroll-to-updated",r.value));else if(Ee.value){const R=r.value;s.isOpen=!1,await y(R,Ze.convert(_.value),l.value.reactions,_.value.allowedUserIds.length?"private":"public",(I=p.value)==null?void 0:I.uid)&&(s.close(),ce.success("Successfully updated Post Visibility"),$("scroll-to-updated",R))}else{const R=r.value;let G=[];P.value&&G.push(await h(R,m(),te.value,(M=p.value)==null?void 0:M.uid)),E.value&&G.push(await h(R,b(),te.value,(J=p.value)==null?void 0:J.uid)),D.value&&(G.push(await h(R,t(),te.value,(W=p.value)==null?void 0:W.uid)),$("scroll-to-updated",R)),G=G.filter(De=>typeof De=="string"),G.length&&(ce.success(`Successfully updated Post ${$e(G)}`),s.close())}},Te=async()=>{g(_.value,l.value??void 0),s.close()};return ee(_,()=>{s.isMutationEqual()},{deep:!0}),(O,I)=>(a(),U(he,{isOpen:e(o),title:e(l)?"Update Post":"Create Post",description:e(l)?"Update this post":"Create a new post","confirm-text":e(l)?xe.value:"Create","confirm-loading":e(C),onConfirm:Ve,onCancel:Te},{default:x(()=>[B("form",{ref_key:"dialog",ref:d,class:"pt-6 mb-4 xl:px-16"},[e(o)?(a(),U(e(Ke),{key:0,"active-index":0,onTabOpen:e(Xe)},{default:x(()=>[c(e(de),{value:"content"},{default:x(()=>[c(e(re),null,{default:x(()=>I[3]||(I[3]=[ne(" Content ")])),_:1,__:[3]}),c(e(ie),{"pt:content":"flex flex-col justify-center items-center gap-3"},{default:x(()=>[c(ht,{ref_key:"content",ref:u,onError:I[0]||(I[0]=M=>ge.value=M)},null,512)]),_:1})]),_:1}),c(e(de),{value:"styling"},{default:x(()=>[c(e(re),null,{default:x(()=>I[4]||(I[4]=[ne(" Styling ")])),_:1,__:[4]}),c(e(ie),{"pt:content":"flex flex-col justify-center items-center gap-3"},{default:x(()=>[c(Ut,{ref_key:"styling",ref:A,onError:I[1]||(I[1]=M=>ye.value=M)},null,512)]),_:1})]),_:1}),c(e(de),{value:"settings"},{default:x(()=>[c(e(re),null,{default:x(()=>I[5]||(I[5]=[ne(" Settings ")])),_:1,__:[5]}),c(e(ie),{"pt:content":"flex flex-col justify-center items-center gap-3"},{default:x(()=>[c(St,{ref_key:"settings",ref:fe,onError:I[2]||(I[2]=M=>be.value=M)},null,512)]),_:1})]),_:1})]),_:1},8,["onTabOpen"])):V("",!0)],512)]),_:1},8,["isOpen","title","description","confirm-text","confirm-loading"]))}}),It={class:"grid mt-10 md:mt-15"},_t={class:"grid justify-center"},Et={class:"text-lg md:text-xl text-white"},xt=["innerHTML"],Vt={class:"grid my-5 xl:px-20"},Tt=N({__name:"Blog",setup(n){const v=Se(),$=pe(),f=me(),k=Z(),s=Q(),{menuItems:p,content:C}=T($),{publicUser:w}=T(f),{deleteBlogPost:h}=k,g=i(null),y=i(),m=i(!1),b=i(v.currentRoute.value.params.postId),t=L(()=>{var P;return w.value?[...C.value.blogDescriptionUser.map(E=>E.replace("%USER%",w.value.displayName||"Unknown user")),...((P=p.value.find(E=>E.id==="nfNQM4SMESU2VOkJtcgY"))==null?void 0:P.description)||[]]:C.value.blogDescriptionGuest}),o=()=>{s.openWith(null)},l=P=>{s.openWith(P)},r=P=>{g.value=P,m.value=!0},_=async P=>{await h(P)&&(m.value=!1,g.value=null)};return ee(v.currentRoute,P=>{b.value=P.params.postId}),(P,E)=>(a(),U(Le,null,{content:x(()=>[B("div",It,[B("div",_t,[(a(!0),S(H,null,ve(t.value,D=>(a(),S("h1",Et,[B("span",{innerHTML:D},null,8,xt)]))),256))]),B("div",Vt,[b.value?(a(),U(at,{key:0,onEditClicked:l,onDeleteClicked:r})):(a(),U(Ct,{key:1,onCreateClicked:o,onEditClicked:l,onDeleteClicked:r})),c(Bt,{onScrollToUpdated:E[0]||(E[0]=D=>y.value=D)}),g.value?(a(),U(he,{key:2,title:"Delete Post",isOpen:m.value,description:[` Are you sure you want to delete this post called ' ${g.value.title}'?`,"This cannot be undone."],"confirm-text":"Confirm","confirm-props":{variant:"danger",outlined:!0},onConfirm:E[1]||(E[1]=D=>_(g.value.id)),onCancel:E[2]||(E[2]=D=>m.value=!1)},null,8,["isOpen","description"])):V("",!0)])])]),_:1}))}}),Nt=N({__name:"Blog",setup(n){return(v,$)=>(a(),U(Tt))}});export{Nt as default};
