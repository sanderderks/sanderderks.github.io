import{d as ne,s as X,w as J,f as O,L as _e,g as a,j as t,q as u,m as o,I as v,h as e,k as d,_ as K,A as W,a3 as b,aQ as c,C as w,E as R,aR as he,aS as re,o as de,ax as ve,z as ee,c as Se,l as L,a7 as ye,y as pe}from"../bundle.js";import{u as ue,s as fe,G as l,S as I,B as j,_ as Ie}from"./c-Dice.vue_vue_type_script_setup_true_lang-BNJuaRqg.js";import{u as Te,_ as we,H as Ee,a as ge}from"./c-useScoreInfo-D3vuSgKd.js";import{_ as Ae,a as He}from"./c-GameChat.vue_vue_type_script_setup_true_lang-B7axdFog.js";import{_ as Oe}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-ZhxvtC1w.js";import{_ as ce}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-Dice5.vue_vue_type_script_setup_true_lang-DK-8hWiG.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";const Pe={class:"h-10"},Re={class:"w-1/2 md:w-1/3"},ke={key:0},Ne={key:1,class:"!ps-1 md:ps-1"},Le={key:2},xe={key:0},De={key:1},$e={key:2},Ye=ne({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(te){const h=te,Y=ue(),{gameType:m,gameStatus:S,activePlayerId:A,myPlayerId:k,opponents:y,reroll:E}=X(Y),{selectScore:g,getScore:r,getActualValue:x}=Y,P=J(!1),C=fe[h.row],N=O(()=>r(h.row,k.value)),p=O(()=>x(h.row,h.hasValue)),M=O(()=>p.value===!1?"X":p.value);return _e(()=>p.value,()=>{P.value=!0,setTimeout(()=>{P.value=!1})}),(f,G)=>(t(),a("tr",Pe,[u("th",Re,v(e(C).title),1),N.value?(t(),a("td",ke,v(N.value.value===!1?"X":N.value.value),1)):e(A)===e(k)&&e(E)>=0&&!P.value?(t(),a("td",Ne,[d(K,{class:"size-8",variant:p.value===!1||p.value===0?"neutral":void 0,onClick:G[0]||(G[0]=H=>e(g)(f.row,p.value))},{default:W(()=>[b(v(M.value),1)]),_:1},8,["variant"])])):(t(),a("td",Le)),e(m)===e(c).MULTIPLAYER?(t(!0),a(w,{key:3},R(e(y),H=>(t(),a(w,null,[e(r)(f.row,H.userId)?(t(),a("td",xe,v(e(r)(f.row,H.userId).value===!1?"X":e(r)(f.row,H.userId).value),1)):e(A)===H.userId&&e(S)>e(l).HAS_STARTED?(t(),a("td",De,[d(K,{class:"size-8",variant:p.value===!1||p.value===0?"neutral":"danger"},{default:W(()=>[b(v(M.value),1)]),_:1},8,["variant"])])):(t(),a("td",$e))],64))),256)):o("",!0)]))}}),T=ce(Ye,[["__scopeId","data-v-fe496a9d"]]),Me={key:0,class:"text-white"},Ge={key:1,class:"h-12 md:h-auto text-yellow-500"},Ue={key:3,class:"h-12 md:h-auto text-yellow-500"},be={class:"h-12 md:h-auto text-pink-500"},Ce={key:0,class:"text-purple-500 font-bold"},Fe={key:1,class:"text-red-500 font-bold"},Be={key:2,class:"text-green-500 font-bold"},Ve={key:0,class:"h-12 md:h-auto text-red-500 font-bold"},ze=ne({__name:"Scoreboard",setup(te){const h=ue(),Y=he(),{gameType:m,gameStatus:S,myPlayerId:A,bonusScore:k,finalScore:y,hasOfValue:E,hasThreeOfAKind:g,hasFourOfAKind:r,hasFullHouse:x,hasSmallStraight:P,hasLargeStraight:C,hasYahtzee:N,diceTotal:p}=X(h),{players:M,opponents:f}=X(Y),{currentHighscorePosition:G,hasImprovedHighscorePosition:H,hasImprovedPersonalBest:F}=Te(re.YAHTZEE),B=J(),D=J(!1),V=O(()=>E.value(1)),ae=O(()=>E.value(2)),se=O(()=>E.value(3)),le=O(()=>E.value(4)),oe=O(()=>E.value(5)),z=O(()=>E.value(6));return de(()=>{B.value=setInterval(()=>{D.value=!D.value},500)}),ve(()=>{clearInterval(B.value)}),($,i)=>{var q,Z,Q;return t(),a("table",{class:ee(["w-full mt-5 text-sm md:text-base text-left",e(S)===e(l).HAS_FINISHED?"text-neutral-500":"text-white",e(S)===e(l).HAS_NOT_STARTED?D.value?"even":"odd":void 0])},[e(m)===e(c).MULTIPLAYER?(t(),a("thead",Me,[u("tr",null,[i[0]||(i[0]=u("th",null,null,-1)),i[1]||(i[1]=u("th",null,"You",-1)),(t(!0),a(w,null,R(e(f),n=>(t(),a("th",{key:n.userId,class:ee(n.isOnline?"text-green-400":"text-red-400")},v(e(h).getPlayerDisplayName(n.userId)),3))),128))])])):o("",!0),u("tbody",null,[d(T,{row:e(I).ONES,"has-value":V.value},null,8,["row","has-value"]),d(T,{row:e(I).TWOS,"has-value":ae.value},null,8,["row","has-value"]),d(T,{row:e(I).THREES,"has-value":se.value},null,8,["row","has-value"]),d(T,{row:e(I).FOURS,"has-value":le.value},null,8,["row","has-value"]),d(T,{row:e(I).FIVES,"has-value":oe.value},null,8,["row","has-value"]),d(T,{row:e(I).SIXES,"has-value":z.value},null,8,["row","has-value"]),e(S)>=e(l).HAS_FINISHED?(t(),a("tr",{key:0,class:ee(["h-12 md:h-auto",e(S)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[i[2]||(i[2]=u("th",null,"TOP",-1)),u("td",null,v(((q=e(y)[e(A)])==null?void 0:q.top)??""),1),e(m)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),n=>{var s;return t(),a("td",null,v(((s=e(y)[n.userId])==null?void 0:s.top)??""),1)}),256)):o("",!0)],2)):o("",!0),e(S)>e(l).HAS_NOT_STARTED&&Object.values(e(k)).some(n=>n.includes(e(j).TOP))?(t(),a("tr",Ge,[i[3]||(i[3]=u("th",null,"BONUS",-1)),u("td",null,v(e(h).getBonus(e(j).TOP,e(A))||""),1),e(m)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),n=>(t(),a("td",null,v(e(h).getBonus(e(j).TOP,n.userId)||""),1))),256)):o("",!0)])):o("",!0),d(T,{row:e(I).THREE_OF_A_KIND,"has-value":e(g)},null,8,["row","has-value"]),d(T,{row:e(I).FOUR_OF_A_KIND,"has-value":e(r)},null,8,["row","has-value"]),d(T,{row:e(I).FULL_HOUSE,"has-value":e(x)},null,8,["row","has-value"]),d(T,{row:e(I).SMALL_STRAIGHT,"has-value":e(P)},null,8,["row","has-value"]),d(T,{row:e(I).LARGE_STRAIGHT,"has-value":e(C)},null,8,["row","has-value"]),d(T,{row:e(I).YAHTZEE,"has-value":e(N)},null,8,["row","has-value"]),d(T,{row:e(I).CHANCE,"has-value":e(p)},null,8,["row","has-value"]),e(S)>=e(l).HAS_FINISHED?(t(),a("tr",{key:2,class:ee(["h-12 md:h-auto",e(S)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[i[4]||(i[4]=u("th",null,"BOTTOM",-1)),u("td",null,v(((Z=e(y)[e(A)])==null?void 0:Z.bottom)??""),1),e(m)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),n=>{var s;return t(),a("td",null,v(((s=e(y)[n.userId])==null?void 0:s.bottom)??""),1)}),256)):o("",!0)],2)):o("",!0),Object.values(e(k)).some(n=>n.length>0)?(t(),a("tr",Ue,[i[5]||(i[5]=u("th",null,"YAHTZEE BONUS",-1)),u("td",null,v(e(h).getBonus(e(j).YAHTZEE,e(A))||""),1),e(m)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),n=>(t(),a("td",null,v(e(h).getBonus(e(j).YAHTZEE,n.userId)||""),1))),256)):o("",!0)])):o("",!0),e(S)===e(l).HAS_FINISHED?(t(),a(w,{key:4},[u("tr",be,[i[6]||(i[6]=u("th",null,"TOTAL",-1)),u("td",null,[b(v(((Q=e(y)[e(A)])==null?void 0:Q.total)??"")+" ",1),e(H)&&e(G)===1?(t(),a("span",Ce," HIGHSCORE! ")):e(H)?(t(),a("span",Fe," LEADERBOARD IMPROVEMENT! ")):e(F)?(t(),a("span",Be," PERSONAL BEST! ")):o("",!0)]),e(m)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),n=>{var s;return t(),a("td",null,v(((s=e(y)[n.userId])==null?void 0:s.total)??""),1)}),256)):o("",!0)]),e(m)===e(c).MULTIPLAYER?(t(),a("tr",Ve,[i[7]||(i[7]=u("td",null,null,-1)),(t(!0),a(w,null,R(e(M),n=>{var s,U;return t(),a("td",null,[((s=e(y)[n.userId])==null?void 0:s.winStatus)==="win"?(t(),a(w,{key:0},[b(" WINNER! ")],64)):((U=e(y)[n.userId])==null?void 0:U.winStatus)==="tie"?(t(),a(w,{key:1},[b(" TIE! ")],64)):o("",!0)])}),256))])):o("",!0)],64)):o("",!0)])],2)}}}),ie=ce(ze,[["__scopeId","data-v-0e7762c8"]]),Ze={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},je={class:"flex flex-wrap justify-center gap-3"},Ke={key:0,class:"w-full"},We={key:1,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},Xe={class:"w-full md:w-1/2 flex justify-center gap-3"},Je={class:"w-full md:w-1/2 flex justify-center gap-3"},ut=ne({__name:"Yahtzee",setup(te){const h=ue(),Y=Se(),{gameId:m,chat:S,players:A,partyName:k,maxPlayers:y,isOwner:E,gameType:g,gameStatus:r,activePlayerId:x,myPlayerId:P,canRoll:C,canReroll:N,dices:p,finalScore:M,personalBest:f}=X(h),{isLoggedIn:G}=X(Y),{start:H,$reset:F,createOnlineGame:B,continueOnlineGame:D,leaveOnlineGame:V,deleteOnlineGame:ae,getPlayerDisplayName:se,roll:le,updateYahtzeeHighscore:oe}=h,z=J(!1),$=J(!1),i=O(()=>y.value?y.value-A.value.length:0),q=()=>{g.value=c.MULTIPLAYER,r.value=l.FINDING_OPPONENT},Z=async()=>{m.value&&(E.value?await ae():await V()),F()},Q=async()=>{m.value&&await V(),F()};return de(()=>{m.value&&D(m.value)}),ve(async()=>{m.value&&(await V(),F())}),(n,s)=>(t(),L(pe,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",tags:e(g)===e(c).MULTIPLAYER&&e(k)?[{value:e(k),severity:"danger"}]:void 0,description:e(g)===e(c).SOLO?e(r)===e(l).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:W(()=>[u("div",Ze,[d(K,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:s[0]||(s[0]=U=>z.value=!0)}),e(E)?(t(),L(K,{key:0,variant:"danger",icon:"pi pi-trash",onClick:Z})):o("",!0)])]),default:W(()=>{var U;return[u("div",je,[e(r)===e(l).FINDING_OPPONENT?(t(),a("div",Ke,[d(Ae,{"allow-party":"",onCreateOnlineGame:s[1]||(s[1]=_=>e(B)([{userId:_}])),onContinueOnlineGame:e(D),onCreateParty:s[2]||(s[2]=(_,me)=>e(B)([],_,me)),onJoinParty:e(D)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(r)>=e(l).HAS_STARTED&&e(r)<e(l).HAS_FINISHED?(t(),a("div",We,[u("div",Xe,[e(g)===e(c).MULTIPLAYER||e(C)||e(N)?(t(),L(K,{key:0,class:"w-full",variant:"tertiary",disabled:e(x)!==e(P)||e(r)===e(l).HAS_CHOSEN_DICES||e(r)===e(l).WAITING_FOR_OPPONENTS||e(p).every(_=>_.selected),onClick:e(le)},{default:W(()=>[b(v(i.value?`Waiting for ${i.value} more player${i.value!==1?"s":""}`:e(x)!==e(P)?`${e(se)(e(x))}'s turn`:e(N)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):o("",!0)]),u("div",Je,[(t(!0),a(w,null,R(e(p),_=>(t(),L(Ie,{key:_.id,dice:_},null,8,["dice"]))),128))])])):o("",!0)]),!$.value&&e(r)>=e(l).HAS_STARTED?(t(),L(ie,{key:0})):o("",!0),!$.value&&e(g)===e(c).MULTIPLAYER&&e(r)>=e(l).HAS_STARTED?(t(),L(He,{key:1,chats:e(S)??[],onSendChat:s[3]||(s[3]=_=>S.value=[...e(S)??[],_])},null,8,["chats"])):o("",!0),d(we,{"is-viewing-highscores":$.value,"onUpdate:isViewingHighscores":s[4]||(s[4]=_=>$.value=_),"has-solo":"","is-solo":e(g)===e(c).SOLO,hasMultiplayer:"",isMultiplayer:e(g)===e(c).MULTIPLAYER,"is-owner":e(E),"is-main-menu":e(r)===e(l).HAS_NOT_STARTED,"has-game-started":e(r)>=e(l).HAS_STARTED,"is-game-over":e(r)===e(l).HAS_FINISHED,onPlaySolo:e(H),onPlayMultiplayer:q,onRestart:Z,onGoBack:Q},null,8,["is-viewing-highscores","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),!$.value&&e(r)===e(l).HAS_NOT_STARTED?(t(),L(ie,{key:2})):o("",!0),$.value?(t(),L(Ee,{key:3,"game-id":e(re).YAHTZEE},null,8,["game-id"])):o("",!0),d(ge,{"is-logged-in":e(G),"is-solo":e(g)===e(c).SOLO,"is-game-over":e(r)===e(l).HAS_FINISHED,"final-score":((U=e(M)[e(P)])==null?void 0:U.total)??0,"personal-best":e(f),"redirect-route":e(ye).GAMES_YAHTZEE,onUpdateHighscore:s[5]||(s[5]=_=>e(oe)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),d(Oe,{"game-id":e(re).YAHTZEE,"is-open":z.value,"onUpdate:isOpen":s[6]||(s[6]=_=>z.value=_)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{ut as default};
