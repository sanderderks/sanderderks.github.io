import{aU as Fl,aY as Ul,c as Re,aV as Hl,aZ as Yl,s as re,a_ as Vl,a$ as sl,aS as Ne,w as oe,a9 as il,f as k,b0 as zl,L as Ye,o as Il,b1 as Ve,K as S,b2 as Wl,b3 as jl,aW as ol,b4 as Kl,aX as Zl,d as de,b5 as rl,b6 as ql,v as Jl,g as i,j as a,k as B,l as Z,m as $,h as e,C as z,z as Y,aT as _l,q as f,t as ze,I as E,A as ee,_ as L,a3 as ce,E as We,y as Xl,an as Ql}from"../bundle.js";import{_ as ul}from"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import{_ as en}from"./c-GameChat.vue_vue_type_script_setup_true_lang-BHc_8rRc.js";import{_ as ln}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B2hoAcWM.js";import{_ as nn,a as tn,b as an,c as sn,d as on}from"./c-Dice5.vue_vue_type_script_setup_true_lang-DK-8hWiG.js";import{_ as rn}from"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import{_ as me}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-B1iNImaq.js";var ne=(n=>(n[n.PLAYER=0]="PLAYER",n[n.OPPONENT=1]="OPPONENT",n))(ne||{}),P=(n=>(n[n.DESERT=0]="DESERT",n[n.WOOD_FOREST=1]="WOOD_FOREST",n[n.SHEEP_PASTURE=2]="SHEEP_PASTURE",n[n.GRAIN_FIELD=3]="GRAIN_FIELD",n[n.BRICK_HILL=4]="BRICK_HILL",n[n.ORE_MOUNTAIN=5]="ORE_MOUNTAIN",n))(P||{}),q=(n=>(n[n.ROAD=0]="ROAD",n[n.VILLAGE=1]="VILLAGE",n[n.CITY=2]="CITY",n))(q||{}),fe=(n=>(n[n.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",n[n.FINDING_OPPONENT=1]="FINDING_OPPONENT",n[n.IS_PLAYING=2]="IS_PLAYING",n[n.HAS_FINISHED=3]="HAS_FINISHED",n))(fe||{}),le=(n=>(n[n.IS_INITIALIZING=0]="IS_INITIALIZING",n[n.IS_CREATING_MAP=1]="IS_CREATING_MAP",n[n.BUILDING_PHASE=2]="BUILDING_PHASE",n[n.FINISHED_BUILDING_PHASE=3]="FINISHED_BUILDING_PHASE",n[n.IS_GENERATING_NUMBERS=4]="IS_GENERATING_NUMBERS",n[n.IS_FINISHING_UP=5]="IS_FINISHING_UP",n[n.CAN_MOVE_ROBBER=6]="CAN_MOVE_ROBBER",n[n.PRODUCTION_PHASE=7]="PRODUCTION_PHASE",n[n.ACTION_PHASE=8]="ACTION_PHASE",n))(le||{}),he=(n=>(n[n.CAN_BUILD=0]="CAN_BUILD",n[n.CAN_MOVE=1]="CAN_MOVE",n))(he||{});const Ie=Fl("catanStore",()=>{const n=Ul(),o=Re(),g=Hl(),_=Yl(),{firebaseUser:r}=re(o),{onlineGames:W,onlineGamesLoading:V,onlineGameId:C,onlineGameCreatorId:j,onlineGameOpponentId:D,onlineGameOpponentActive:O,onlineGameChat:I,isInitializingOnlineGame:H,isOnlineGameOwner:b,onlineGameOpponentName:w}=re(_),{fetchOnlineGames:M,createOnlineGame:p,continueOnlineGame:d,updateOnlineGame:m,leaveOnlineGame:N,deleteOnlineGame:X}=_,ve={onlineGames:Vl(n,sl.GAME_DATA,Ne.CATAN,sl.ONLINE_GAMES)},F=oe(0),h=oe(0),T=oe(0),y=oe(0),G=oe(!1),Q=oe(cl()),be=oe(dl()),_e=oe(vl()),c=oe([]),te=oe([]),se=oe([]),K=il(fl()),ge=il(pl()),yl=k(()=>[[c.value[19],c.value[20],c.value[21],c.value[22]],[c.value[36],c.value[18],c.value[7],c.value[8],c.value[23]],[c.value[35],c.value[17],c.value[6],c.value[1],c.value[9],c.value[24]],[c.value[34],c.value[16],c.value[5],c.value[0],c.value[2],c.value[10],c.value[25]],[c.value[33],c.value[15],c.value[4],c.value[3],c.value[11],c.value[26]],[c.value[32],c.value[14],c.value[13],c.value[12],c.value[27]],[c.value[31],c.value[30],c.value[29],c.value[28]]].map(l=>l.filter(t=>!!t))),s=k(()=>K[0]),$e=k(()=>Q.value.some(l=>l.isRolling)),Ke=k(()=>zl(Q.value,l=>l.value)),Be=k(()=>y.value===0&&[2,8].includes(h.value)),xe=k(()=>s.value.buildings[0]===gl),Te=k(()=>s.value.buildings[1]===ke&&!xe.value),De=k(()=>s.value.buildings[0]===gl-1&&!Te.value),Ze=k(()=>s.value.buildings[1]===ke-1&&!De.value);Ye(ge,l=>{(l[0]===10||l[1]===10)&&(F.value=3)},{deep:!0}),Ye(F,l=>{l===3&&ol(Zl)}),Ye([F,h,T,y,$e],()=>{nl()},{deep:!0}),Il(()=>{g.$init(Ne.CATAN)});const Le=()=>{_.$reset(),F.value=0,G.value=!1,h.value=0,T.value=0,y.value=0,Q.value=cl(),be.value=dl(),_e.value=vl(),c.value=[],te.value=[],se.value=[],Object.assign(K,fl()),Object.assign(ge,pl())},Ol=()=>{const l=Ve(be.value.length);return be.value.splice(l,1)[0]},wl=()=>{const l=Ve(_e.value.length);return _e.value.splice(l,1)[0]},pe=l=>te.value.find(t=>t.id===l),Ae=(l,t)=>se.value.find(u=>u.cornerFromId===l&&u.cornerToId===t),qe=l=>c.value.filter(Oe).filter(t=>t.cornerIds.includes(l)),Je=l=>se.value.filter(t=>t.cornerFromId===l||t.cornerToId===l),Pe=l=>l.cornerIds.flatMap(pe).filter(t=>!!t),Ce=l=>se.value.filter(t=>l.cornerIds.includes(t.cornerFromId)&&l.cornerIds.includes(t.cornerToId)),Xe=l=>{const t=pe(l);return(t==null?void 0:t.connectedCornerIds.map(pe).filter(v=>!!v))??[]},Qe=l=>{var u;const t=l===0?(u=r.value)==null?void 0:u.uid:D.value;return se.value.filter(v=>{var x;return((x=v.building)==null?void 0:x.type)===0&&v.building.ownerId===t})},Me=l=>{var u;const t=l===0?(u=r.value)==null?void 0:u.uid:D.value;return te.value.filter(v=>{var x;return((x=v.building)==null?void 0:x.type)===1&&v.building.ownerId===t})},kl=l=>{var u;const t=l===0?(u=r.value)==null?void 0:u.uid:D.value;return te.value.filter(v=>{var x;return((x=v.building)==null?void 0:x.type)===2&&v.building.ownerId===t})},Oe=l=>"cornerIds"in l&&"isBlocked"in l,Nl=l=>"inputType"in l&&"input"in l&&"output"in l,Fe=l=>!!l&&"connectedCornerIds"in l,Ue=l=>!!l&&"cornerFromId"in l,Ee=l=>Je(l).some(t=>{var u;return t.building&&t.building.ownerId===((u=r.value)==null?void 0:u.uid)}),Se=(l,t)=>Xe(l).some(u=>u.building&&(u.building.type===1||u.building.type===2)&&(t===void 0||u.id!==t)),el=async()=>{for(;$e.value;)await new Promise(l=>setTimeout(l,g.diceRollSpeed*1e3));return!0},hl=async()=>{if(b.value){h.value=1;for(let l=1;l<=19;l++)c.value.push({id:l,type:l===1?0:Ol(),value:null,cornerIds:bl[l],isBlocked:l===1}),bl[l].forEach(t=>{te.value.find(u=>u.id===t)||te.value.push({id:t,building:null,connectedCornerIds:dn[t]})}),await new Promise(t=>setTimeout(t,500));for(let l=1e3;l<=1018;l++){const t=wl();c.value.push({id:l,inputType:t??null,input:t?2:t===null?3:0,output:1}),await new Promise(u=>setTimeout(u,500))}se.value=vn.map(([l,t])=>({cornerFromId:l,cornerToId:t,building:null})),h.value=2}},Al=async()=>{if(!b.value)return;h.value=4;const l=[2,3,3,4,4,5,5,6,6,8,8,9,9,10,10,11,11,12];for(let t=0;t<18;t++){const u=c.value.filter(Oe).filter(A=>A.type!==0&&!A.value),v=Ve(u.length),x=u[v];x.value=l[t],await new Promise(A=>setTimeout(A,500))}h.value=5,await ll(null),h.value=7},ll=async l=>{var t,u,v,x;if(l===null){const A=te.value.filter(U=>!!U.building);for(const U of A){const ae=U.building,R=qe(U.id);for(const ue of R)ue.type&&(ae.type===1?ae.ownerId===((t=r.value)==null?void 0:t.uid)?K[0].cards[ue.type]++:K[1].cards[ue.type]++:ae.type===2&&(ae.ownerId===((u=r.value)==null?void 0:u.uid)?K[0].cards[ue.type]+=2:K[1].cards[ue.type]+=2),await new Promise(ie=>setTimeout(ie,500)))}}else{const A=c.value.filter(Oe).filter(R=>R.value===l),U=new Map;for(const R of A){if(!R.type)continue;if(R.isBlocked){S.error("Blocked by the Robber!");continue}const ue=R.cornerIds.map(pe).map(ie=>ie==null?void 0:ie.building).filter(ie=>!!ie);for(const ie of ue)ie.type===1?ie.ownerId===((v=r.value)==null?void 0:v.uid)?(K[0].cards[R.type]++,U.set(R.type,(U.get(R.type)||0)+1)):K[1].cards[R.type]++:ie.type===2&&(ie.ownerId===((x=r.value)==null?void 0:x.uid)?(K[0].cards[R.type]+=2,U.set(R.type,(U.get(R.type)||0)+2)):K[1].cards[R.type]+=2),await new Promise(Ml=>setTimeout(Ml,500))}let ae=!1;for(const[R,ue]of U.entries())ue>0&&(ae=!0,S.success(`You received ${ue} ${P[R].toString().substring(0,1).toUpperCase()}${P[R].toString().substring(1)}${ue>1?"s":""}!`));ae||S.error("No cards this time!")}},Pl=l=>{s.value.selected!==l?s.value.buildings[l]>0?Be.value?[1,0].includes(l)?s.value.selected=l:S.warning("You cannot choose this building at this point"):S.warning("You cannot do this at this point"):S.warning("You don't have any!"):s.value.selected=null},Cl=l=>{var t,u,v,x;if(h.value===6)if(!l.isBlocked&&l.type!==0){const A=c.value.filter(Oe).find(U=>U.isBlocked);A&&(A.isBlocked=!1,l.isBlocked=!0,He(),S.success("Moved the Robber!"))}else S.warning("Move the Robber to another card");else if(Be.value)if(T.value===0)if(s.value.selected!==null)if(y.value===0)switch(s.value.selected){case 0:{xe.value||De.value?El(l):(s.value.selected=null,S.warning("You can only place two roads at this point"));break}case 1:{Te.value||Ze.value?Gl(l):(s.value.selected=null,S.warning("You can only place two villages at this point"));break}}else S.warning("It is not your turn");else S.warning("Select a building type first");else T.value===1&&(((u=(t=s.value.lastPlaced)==null?void 0:t.building)==null?void 0:u.type)===0?Ce(l).some(A=>!!A.building)&&Sl(l):((x=(v=s.value.lastPlaced)==null?void 0:v.building)==null?void 0:x.type)===1&&Pe(l).some(A=>!!A.building)&&Rl(l))},El=l=>{const t=Ce(l),u=t.filter(v=>!!v.building);if(u.length===6)S.warning("No building spots left here!");else if(!u.length)we(t[0],0);else for(const v of t)if(!v.building){we(v,0);break}},Sl=l=>{var v;if(!r.value)return;const t=Ce(l),u=t.filter(x=>!!x.building);if(u.length===6)S.warning("Nothing can be moved");else if(u.length){const x=s.value.lastPlaced;if(Ue(x)){const A=Ae(x.cornerFromId,x.cornerToId);if(((v=A==null?void 0:A.building)==null?void 0:v.ownerId)===r.value.uid){let U=t.indexOf(A);for(let ae=0;ae<5;ae++){U<5?U++:U=0;const R=t[U];if(R!==A&&!R.building){we(R,0,!0),A.building=null;break}}}}}},Gl=l=>{const t=Pe(l);if(t.filter(v=>!!v.building).length===3)S.warning("No building spots left here!");else{for(const v of t)if(!v.building&&Ee(v.id)&&!Se(v.id)){we(v,1);return}t.every(v=>!Ee(v.id))?S.warning("A village needs to be attached to a road."):t.some(v=>Se(v.id))&&S.warning("A village cannot be next to another village.")}},Rl=l=>{var v;if(!r.value)return;const t=Pe(l),u=t.filter(x=>!!x.building);if(u.length===3)S.warning("Nothing can be moved");else if(u.length){const x=s.value.lastPlaced;if(Fe(x)){const A=pe(x.id);if(((v=A==null?void 0:A.building)==null?void 0:v.ownerId)===r.value.uid){let U=t.indexOf(A);for(let ae=0;ae<5;ae++){U<5?U++:U=0;const R=t[U];if(R!==A&&!R.building&&Ee(R.id)&&!Se(R.id,A.id)){we(R,1,!0),A.building=null;return}}}}}},we=(l,t,u=!1)=>{if(r.value){if(t!==0&&Fe(l)){const v=pe(l.id);v&&(v.building={ownerId:r.value.uid,type:t},s.value.lastPlaced=v)}else if(t===0&&Ue(l)){const v=Ae(l.cornerFromId,l.cornerToId);v&&(v.building={ownerId:r.value.uid,type:t},s.value.lastPlaced=v)}u||(s.value.selected=null,s.value.buildings[t]--),T.value=1}},$l=async()=>{const l=g.diceRollSpeed*1e3;Q.value[0].isRolling=!0,Q.value.forEach(t=>{t.isRolling=!0,setTimeout(()=>{t.value=Wl(6),t.isRolling=!1},jl(l,l/3))}),ol(Kl),await el(),Ke.value===7?h.value=6:(await ll(Ke.value),h.value=8)},Bl=()=>{var l,t;T.value===1&&(s.value.buildings[1]>=ke-1&&((t=(l=s.value.lastPlaced)==null?void 0:l.building)==null?void 0:t.type)===0?T.value=0:He())},xl=()=>{var l,t;if(T.value===1&&(l=s.value.lastPlaced)!=null&&l.building&&s.value.lastPlaced.building.ownerId===((t=r.value)==null?void 0:t.uid)){if(s.value.buildings[s.value.lastPlaced.building.type]++,s.value.selected=s.value.lastPlaced.building.type,Fe(s.value.lastPlaced)){const u=pe(s.value.lastPlaced.id);u&&(u.building=null)}else if(Ue(s.value.lastPlaced)){const u=Ae(s.value.lastPlaced.cornerFromId,s.value.lastPlaced.cornerToId);u&&(u.building=null)}s.value.lastPlaced=null,T.value=0}},He=()=>{h.value===2?K[0].buildings[1]===ke-2&&K[1].buildings[1]===ke-2?(G.value=!0,h.value=3,T.value=0,y.value=1):(G.value=!0,T.value=0,y.value=1):(h.value===8||h.value===6)&&(G.value=!0,h.value=7,y.value=1)},Tl=l=>{switch(l){case 0:{s.value.buildings[0]+Qe(0).length<Ge?s.value.cards[1]>=1&&s.value.cards[4]>=1?(s.value.cards[1]--,s.value.cards[4]--,s.value.buildings[0]++,S.success("You bought a road")):S.warning("Not enough resources"):S.warning("You cannot buy more roads");break}case 1:{s.value.buildings[1]+Me(0).length<Ge?s.value.cards[3]>=1&&s.value.cards[2]>=1&&s.value.cards[1]>=1&&s.value.cards[4]>=1?(s.value.cards[3]--,s.value.cards[2]--,s.value.cards[1]--,s.value.cards[4]--,s.value.buildings[1]++,S.success("You bought a village")):S.warning("Not enough resources"):S.warning("You cannot buy more villages");break}case 2:{s.value.buildings[2]+Me(0).length<Ge?s.value.cards[3]>=2&&s.value.cards[5]>=3?(s.value.cards[3]-=2,s.value.cards[5]-=3,s.value.buildings[2]++,S.success("You bought a city")):S.warning("Not enough resources"):S.warning("You cannot buy more cities");break}case"development":{s.value.cards[2]>=1&&s.value.cards[3]>=1&&s.value.cards[5]>=1?(s.value.cards[3]--,s.value.cards[5]--,s.value.cards.development++,S.success("You bought a development card")):S.warning("Not enough resources");break}}},Dl=l=>{r.value&&(F.value=2,_.$init(Ne.CATAN,al,tl,Le),p(l))},Ll=l=>{_.$init(Ne.CATAN,al,tl,Le),d(l)},nl=()=>{!(r!=null&&r.value)||!D.value||y.value===1&&!G.value&&!H.value||m()},tl=(l,t)=>({gameStatus:F.value,catanStatus:h.value,buildingStatus:T.value,activePlayer:y.value===0?l:t,dices:Q.value,cardMap:c.value,cornerMap:te.value,roadMap:se.value,score:{[l]:ge[0],[t]:ge[1]},inventoryState:{[l]:K[0],[t]:K[1]}}),al=l=>{var u;const t=(u=r.value)==null?void 0:u.uid;!t||y.value===0&&!H.value||(F.value=l.gameStatus,h.value=l.catanStatus,T.value=l.buildingStatus,y.value=l.activePlayer===t?0:1,Q.value=l.dices,c.value=l.cardMap,te.value=l.cornerMap,se.value=l.roadMap,b.value?(ge[0]=l.score[l.creatorId],ge[1]=l.score[l.opponentId],K[0]=l.inventoryState[l.creatorId],K[1]=l.inventoryState[l.opponentId]):(ge[0]=l.score[l.opponentId],ge[1]=l.score[l.creatorId],K[0]=l.inventoryState[l.opponentId],K[1]=l.inventoryState[l.creatorId]))};return{collections:ve,onlineGames:W,onlineGamesLoading:V,onlineGameId:C,onlineGameCreatorId:j,onlineGameOpponentId:D,onlineGameOpponentActive:O,onlineGameChat:I,isOnlineGameOwner:b,onlineGameOpponentName:w,gameStatus:F,catanStatus:h,buildingStatus:T,activePlayer:y,activePlayerChanging:G,dices:Q,_landTypes:be,cardMap:c,cornerMap:te,roadMap:se,inventoryState:K,score:ge,mappedMap:yl,myInventoryState:s,isRolling:$e,canBuild:Be,canBuildFirstRoad:xe,canBuildFirstVillage:Te,canBuildSecondRoad:De,canBuildSecondVillage:Ze,$reset:Le,getCorner:pe,getSide:Ae,getCardsOfCorner:qe,getSidesOfCorner:Je,getCornersOfCard:Pe,getSidesOfCard:Ce,getNeighborsOfCorner:Xe,getRoadsOfPlayer:Qe,getVillagesOfPlayer:Me,getCitiesOfPlayer:kl,generateMap:hl,generateNumbers:Al,isCornerAttachedToRoad:Ee,isCornerAttachedToVillage:Se,isLandCard:Oe,isOceanCard:Nl,selectBuildingType:Pl,selectCard:Cl,roll:$l,finishMoving:Bl,cancelBuild:xl,passTurn:He,buy:Tl,hasFinishedRolling:el,fetchOnlineGames:M,createOnlineGame:Dl,continueOnlineGame:Ll,updateOnlineGame:nl,leaveOnlineGame:N,deleteOnlineGame:X}},{persist:{enabled:!0}}),cl=()=>[{id:1,value:1,isRolling:!1},{id:2,value:2,isRolling:!1}],dl=()=>[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,5,5,5],vl=()=>[null,null,null,null,1,2,4,5,3,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],gl=2,Ge=15,ke=2,un=5,cn=4,fl=()=>({0:{buildings:{0:2,1:2,2:0},cards:{0:0,3:0,1:0,2:0,4:0,5:0,development:0},selected:null,lastPlaced:null},1:{buildings:{0:2,1:2,2:0},cards:{0:0,3:0,1:0,2:0,4:0,5:0,development:0},selected:null,lastPlaced:null}}),pl=()=>({0:0,1:0}),bl={1:[1,2,3,4,5,6],2:[8,9,10,2,1,7],3:[10,11,12,13,3,2],4:[3,13,14,15,16,4],5:[5,4,16,17,18,19],6:[22,6,5,19,20,21],7:[24,7,1,6,22,23],8:[25,26,8,7,24,54],9:[27,28,29,9,8,26],10:[29,30,31,11,10,9],11:[31,32,33,34,12,11],12:[12,34,35,36,14,13],13:[14,36,37,38,39,15],14:[16,15,39,40,41,17],15:[18,17,41,42,43,44],16:[20,19,18,44,45,46],17:[49,21,20,46,47,48],18:[51,23,22,21,49,50],19:[53,54,24,23,51,52]},dn={1:[7,2,6],2:[1,10,3],3:[2,13,4],4:[3,16,5],5:[6,4,19],6:[1,5,22],7:[8,1,24],8:[9,7,26],9:[29,10,8],10:[9,11,2],11:[31,12,10],12:[11,34,13],13:[12,14,3],14:[13,36,15],15:[14,39,16],16:[4,15,17],17:[16,41,18],18:[19,17,44],19:[5,18,20],20:[21,19,46],21:[22,20,49],22:[23,6,21],23:[24,22,51],24:[54,7,23],25:[26,54],26:[27,8,25],27:[28,26],28:[29,27],29:[28,30,9],30:[29,31],31:[30,32,11],32:[31,33],33:[32,34],34:[33,35,12],35:[34,36],36:[35,37,14],37:[36,38],38:[37,39],39:[15,38,40],40:[39,41],41:[17,40,42],42:[41,43],43:[42,44],44:[18,43,45],45:[44,46],46:[20,45,47],47:[48,46],48:[49,47],49:[50,21,48],50:[51,49],51:[52,23,50],52:[53,51],53:[54,52],54:[25,24,53]},vn=[[1,2],[1,6],[1,7],[2,3],[2,10],[3,4],[3,13],[4,5],[4,16],[5,6],[5,19],[6,22],[7,8],[7,24],[8,9],[8,26],[9,10],[9,29],[10,11],[11,12],[11,31],[12,13],[12,34],[13,14],[14,15],[14,36],[15,16],[15,39],[16,17],[17,18],[17,41],[18,19],[18,44],[19,20],[20,21],[20,46],[21,22],[21,49],[22,23],[23,24],[23,51],[24,54],[25,26],[26,27],[27,28],[28,29],[29,30],[30,31],[31,32],[32,33],[33,34],[34,35],[35,36],[36,37],[37,38],[38,39],[39,40],[40,41],[41,42],[42,43],[43,44],[44,45],[45,46],[46,47],[47,48],[48,49],[49,50],[50,51],[51,52],[52,53],[53,54],[25,54]],J=n=>{switch(n){case 1:return"Wood";case 2:return"Sheep";case 3:return"Grain";case 4:return"Brick";case 5:return"Ore";default:return"Unknown"}},gn=de({__name:"FindOpponentDeprecated",props:rl({collection:{},onlineGamesLoading:{type:Boolean},fetchOnlineGames:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:rl(["createOnlineGame","continueOnlineGame"],["update:modelValue"]),setup(n,{emit:o}){const g=n,_=o,r=ql(n,"modelValue"),W=Jl(),V=Re(),{onlineUsers:C,publicUsers:j}=re(W),{firebaseUser:D}=re(V),O=k(()=>{var d;return(d=D.value)==null?void 0:d.uid}),I=k(()=>r.value.filter(d=>d.creatorId===O.value||d.opponentId===O.value)),H=k(()=>C.value.filter(d=>d.id===O.value||!w(d.id))),b=d=>j.value.find(m=>m.id===d),w=d=>I.value.find(m=>m.creatorId===d||m.opponentId===d),M=d=>d.creatorId===O.value?b(d.opponentId):b(d.creatorId),p=d=>{const m=w(d);m?_("continueOnlineGame",m.id):_("createOnlineGame",d)};return Il(async()=>{await g.fetchOnlineGames()}),(d,m)=>(a(),i(z,null,[B(ul,{title:"Choose opponent",listOfUsers:H.value,"custom-click-action":"","get-color":N=>{var X;return d.onlineGamesLoading||N===((X=e(D))==null?void 0:X.uid)?"bg-neutral-500":"bg-green-500"},isClickable:N=>{var X;return!d.onlineGamesLoading&&N!==((X=e(D))==null?void 0:X.uid)},onClick:m[0]||(m[0]=N=>p(N))},null,8,["listOfUsers","get-color","isClickable"]),I.value.length?(a(),Z(ul,{key:0,title:"Active games",listOfUsers:I.value.map(N=>M(N)).filter(N=>!!N),"custom-click-action":"","get-color":()=>d.onlineGamesLoading?"bg-neutral-500":"bg-purple-500 bg-opacity-50",isClickable:()=>!d.onlineGamesLoading,onClick:m[1]||(m[1]=N=>p(N))},null,8,["listOfUsers","get-color","isClickable"])):$("",!0)],64))}}),fn=de({__name:"Dice",props:{dice:{}},setup(n){const o={1:on,2:sn,3:an,4:tn,5:nn,6:rn};return(g,_)=>(a(),i("div",{class:Y({"animate-spin":g.dice.isRolling})},[(a(),Z(_l(o[g.dice.value]),{color:"black",backgroundColor:"white",width:"40",height:"40"}))],2))}}),pn={class:"text-xl font-bold"},bn={key:0,class:"mb-3"},mn={class:"mb-3"},ye=de({__name:"CatanStatusHeader",props:{title:{},activePlayer:{},onlineGameOpponentName:{}},setup(n){return(o,g)=>(a(),i(z,null,[f("h3",pn,E(o.title),1),o.activePlayer===e(ne).PLAYER?(a(),i("p",bn,"It's your turn.")):(a(),i(z,{key:1},[f("p",mn,E(o.onlineGameOpponentName)+"'s turn.",1),ze(o.$slots,"descriptionOpponent")],64)),ze(o.$slots,"description"),o.activePlayer===e(ne).PLAYER?ze(o.$slots,"actions",{key:2}):$("",!0)],64))}}),In={class:"w-full flex flex-col items-center gap-3 p-3"},_n={key:1},yn={key:1},On={class:"flex gap-3 items-center"},wn=de({__name:"CatanStatus",setup(n){const o=Ie(),{catanStatus:g,buildingStatus:_,activePlayer:r,dices:W,cardMap:V,myInventoryState:C,canBuildFirstRoad:j,canBuildFirstVillage:D,canBuildSecondRoad:O,canBuildSecondVillage:I,isRolling:H,isOnlineGameOwner:b,onlineGameOpponentName:w}=re(o),{generateMap:M,generateNumbers:p,roll:d,finishMoving:m,cancelBuild:N,passTurn:X}=o;return(ve,F)=>(a(),i("div",In,[e(g)===e(le).IS_INITIALIZING?(a(),Z(ye,{key:0,title:"Welcome to Catan!",activePlayer:e(r),onlineGameOpponentName:e(w)},{description:ee(()=>[e(b)?(a(),Z(L,{key:0,class:"w-full",variant:"green",label:"Generate Map",onClick:e(M)},null,8,["onClick"])):(a(),i("p",_n,"The game is about to start."))]),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(le).IS_CREATING_MAP?(a(),i(z,{key:1},[ce(" Map is generating. Status "+E((e(V).length/38*100).toFixed(0))+"% ",1)],64)):e(g)===e(le).BUILDING_PHASE?(a(),Z(ye,{key:2,title:"Initial Building Phase",activePlayer:e(r),onlineGameOpponentName:e(w)},{actions:ee(()=>{var h,T,y,G;return[e(_)===e(he).CAN_BUILD?(a(),i(z,{key:0},[e(j)?(a(),i(z,{key:0},[ce(" You can now build your first road! ")],64)):e(D)?(a(),i(z,{key:1},[ce(" You can now build your first village! ")],64)):e(O)?(a(),i(z,{key:2},[ce(" You can now build your second road! ")],64)):e(I)?(a(),i(z,{key:3},[ce(" You can now build your second village! ")],64)):$("",!0)],64)):e(_)===e(he).CAN_MOVE?(a(),i(z,{key:1},[((T=(h=e(C).lastPlaced)==null?void 0:h.building)==null?void 0:T.type)===e(q).ROAD?(a(),i(z,{key:0},[ce(" You can now move your road by clicking on it. ")],64)):((G=(y=e(C).lastPlaced)==null?void 0:y.building)==null?void 0:G.type)===e(q).VILLAGE?(a(),i(z,{key:1},[ce(" You can now move your village by clicking on it. ")],64)):$("",!0),B(L,{class:"w-full",variant:"green",label:"Place Building",onClick:e(m)},null,8,["onClick"]),B(L,{class:"w-full",variant:"neutral",label:"Cancel Building",onClick:e(N)},null,8,["onClick"])],64)):$("",!0)]}),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(le).FINISHED_BUILDING_PHASE?(a(),Z(ye,{key:3,title:"Nearly there.",activePlayer:e(r),onlineGameOpponentName:e(w)},{description:ee(()=>[e(b)?(a(),Z(L,{key:0,class:"w-full",variant:"green",label:"Reveal Numbers",onClick:e(p)},null,8,["onClick"])):(a(),i("p",yn,"The numbers will soon be revealed!"))]),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(le).CAN_MOVE_ROBBER?(a(),Z(ye,{key:4,title:"The Robber",activePlayer:e(r),onlineGameOpponentName:e(w)},{description:ee(()=>F[0]||(F[0]=[ce(" The Robber can be moved to another tile. ")])),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(le).PRODUCTION_PHASE?(a(),Z(ye,{key:5,title:"Production Phase",activePlayer:e(r),onlineGameOpponentName:e(w)},{description:ee(()=>[F[1]||(F[1]=f("ul",{class:"list-disc"},[f("li",{class:"line-through"},"Play a development card (optional)"),f("li",null,"Roll the dices"),f("li",null,"Collect resources")],-1)),f("div",On,[(a(!0),i(z,null,We(e(W),h=>(a(),Z(fn,{dice:h},null,8,["dice"]))),256))])]),actions:ee(()=>[B(L,{class:"w-full",label:"Roll Dices",disabled:e(H),onClick:e(d)},null,8,["disabled","onClick"])]),_:1},8,["activePlayer","onlineGameOpponentName"])):e(g)===e(le).ACTION_PHASE?(a(),Z(ye,{key:6,title:"Action Phase",activePlayer:e(r),onlineGameOpponentName:e(w)},{description:ee(()=>F[2]||(F[2]=[f("ul",{class:"list-disc"},[f("li",{class:"line-through"},"Trade"),f("li",null,"Build roads, villages, cities and development cards"),f("li",{class:"line-through"},"Play a development card if you didn't already")],-1)])),actions:ee(()=>[B(L,{class:"w-full",variant:"neutral",label:"End Turn",onClick:e(X)},null,8,["onClick"])]),_:1},8,["activePlayer","onlineGameOpponentName"])):$("",!0)]))}}),kn={},Nn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function hn(n,o){return a(),i("svg",Nn,o[0]||(o[0]=[f("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#b22222",stroke:"#7b1b1b","stroke-width":"2"},null,-1)]))}const An=me(kn,[["render",hn]]),Pn={},Cn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function En(n,o){return a(),i("svg",Cn,o[0]||(o[0]=[f("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#f4e6b0",stroke:"#c2a865","stroke-width":"2"},null,-1)]))}const Sn=me(Pn,[["render",En]]),Gn={},Rn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function $n(n,o){return a(),i("svg",Rn,o[0]||(o[0]=[f("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#fdd835",stroke:"#c2a600","stroke-width":"2"},null,-1)]))}const Bn=me(Gn,[["render",$n]]),xn={},Tn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function Dn(n,o){return a(),i("svg",Tn,o[0]||(o[0]=[f("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#a9a9a9",stroke:"#696969","stroke-width":"2"},null,-1)]))}const Ln=me(xn,[["render",Dn]]),Mn={},Fn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function Un(n,o){return a(),i("svg",Fn,o[0]||(o[0]=[f("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#9acd32",stroke:"#6b8e23","stroke-width":"2"},null,-1)]))}const Hn=me(Mn,[["render",Un]]),Yn={},Vn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function zn(n,o){return a(),i("svg",Vn,o[0]||(o[0]=[f("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#228b22",stroke:"#145214","stroke-width":"2"},null,-1)]))}const Wn=me(Yn,[["render",zn]]),jn={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},Kn={key:0,class:"size-10 rounded-full bg-black"},Zn=de({__name:"LandCard",props:{card:{},isDisabled:{type:Boolean},isBlocked:{type:Boolean}},emits:["onClick"],setup(n,{emit:o}){const g=n,_=o,r={[P.DESERT]:Sn,[P.BRICK_HILL]:An,[P.SHEEP_PASTURE]:Hn,[P.GRAIN_FIELD]:Bn,[P.WOOD_FOREST]:Wn,[P.ORE_MOUNTAIN]:Ln},W=Ie(),V=Re(),{firebaseUser:C}=re(V),{getCornersOfCard:j,getSidesOfCard:D}=W,O=k(()=>j(g.card)),I=k(()=>{const b=g.card.cornerIds;return!b||b.length!==6?[]:b.map((w,M)=>{const p=b[(M+1)%6];return D(g.card).find(d=>d.cornerFromId===w&&d.cornerToId===p||d.cornerFromId===p&&d.cornerToId===w)})}),H=()=>{g.isDisabled||_("onClick")};return(b,w)=>{var M,p,d,m,N,X,ve,F,h,T,y,G,Q,be,_e,c,te,se;return a(),i("div",{class:Y(["relative",{"cursor-pointer":!b.isDisabled}]),onClick:H},[(a(),Z(_l(r[b.card.type??e(P).DESERT]),{class:"size-[80px] md:size-[100px]"})),f("div",jn,[b.isBlocked?(a(),i("div",Kn)):b.card.value?(a(),i("p",{key:1,class:Y(["text-3xl text-black font-bold",b.card.value===2||b.card.value===12?"text-blue-600":b.card.value===6||b.card.value===8?"text-red-600":"text-black"])},E(b.card.value),3)):$("",!0)]),O.value.length===6?(a(),i(z,{key:0},[O.value[0].building?(a(),i("div",{key:0,class:Y(["absolute z-10 top-0 left-1/2 -translate-x-1/2 size-3 md:size-4 rounded-full",O.value[0].building.ownerId===((M=e(C))==null?void 0:M.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),O.value[1].building?(a(),i("div",{key:1,class:Y(["absolute z-10 top-[25%] -right-2 -translate-y-1/2 size-3 md:size-4 rounded-full",O.value[1].building.ownerId===((p=e(C))==null?void 0:p.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),O.value[2].building?(a(),i("div",{key:2,class:Y(["absolute z-10 bottom-[25%] -right-2 translate-y-1/2 size-3 md:size-4 rounded-full",O.value[2].building.ownerId===((d=e(C))==null?void 0:d.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),O.value[3].building?(a(),i("div",{key:3,class:Y(["absolute z-10 bottom-0 left-1/2 translate-x-[-50%] size-3 md:size-4 rounded-full",O.value[3].building.ownerId===((m=e(C))==null?void 0:m.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),O.value[4].building?(a(),i("div",{key:4,class:Y(["absolute z-10 bottom-[25%] -left-2 translate-y-1/2 size-3 md:size-4 rounded-full",O.value[4].building.ownerId===((N=e(C))==null?void 0:N.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),O.value[5].building?(a(),i("div",{key:5,class:Y(["absolute z-10 top-[25%] -left-2 -translate-y-1/2 size-3 md:size-4 rounded-full",O.value[5].building.ownerId===((X=e(C))==null?void 0:X.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0)],64)):$("",!0),I.value.length===6?(a(),i(z,{key:1},[(ve=I.value[0])!=null&&ve.building?(a(),i("div",{key:0,class:Y(["absolute top-0 right-0 w-[45%] h-[6px] rotate-[27deg] origin-top-left",I.value[0].building.ownerId===((F=e(C))==null?void 0:F.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),(h=I.value[1])!=null&&h.building?(a(),i("div",{key:1,class:Y(["absolute top-1/2 right-0 -translate-y-1/2 h-[45%] w-[6px]",I.value[1].building.ownerId===((T=e(C))==null?void 0:T.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),(y=I.value[2])!=null&&y.building?(a(),i("div",{key:2,class:Y(["absolute bottom-1 right-0 w-[45%] h-[6px] -rotate-[27deg] origin-bottom-left",I.value[2].building.ownerId===((G=e(C))==null?void 0:G.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),(Q=I.value[3])!=null&&Q.building?(a(),i("div",{key:3,class:Y(["absolute bottom-1 left-0 w-[45%] h-[6px] rotate-[27deg] origin-bottom-right",I.value[3].building.ownerId===((be=e(C))==null?void 0:be.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),(_e=I.value[4])!=null&&_e.building?(a(),i("div",{key:4,class:Y(["absolute top-1/2 -left-2 -translate-y-1/2 h-[45%] w-[6px]",I.value[4].building.ownerId===((c=e(C))==null?void 0:c.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0),(te=I.value[5])!=null&&te.building?(a(),i("div",{key:5,class:Y(["absolute top-0 left-0 w-[45%] h-[6px] -rotate-[30deg] origin-top-right",I.value[5].building.ownerId===((se=e(C))==null?void 0:se.uid)?"bg-blue-500":"bg-red-500"])},null,2)):$("",!0)],64)):$("",!0)],2)}}}),qn={},Jn={viewBox:"0 0 120 104",xmlns:"http://www.w3.org/2000/svg"};function Xn(n,o){return a(),i("svg",Jn,o[0]||(o[0]=[f("polygon",{points:"60,0 120,30 120,74 60,104 0,74 0,30",fill:"#429bf5",stroke:"#429bf5","stroke-width":"2"},null,-1)]))}const Qn=me(qn,[["render",Xn]]),et={key:0,class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},lt={class:"text-3xl text-white font-bold text-nowrap"},nt={key:0,class:"text-lg text-white text-nowrap text-center"},tt=de({__name:"OceanCard",props:{card:{}},emits:["onClick"],setup(n,{emit:o}){const g=o,_=()=>{g("onClick")};return(r,W)=>(a(),i("div",{class:"relative",onClick:_},[B(Qn,{class:"size-[80px] md:size-[100px]"}),r.card.input?(a(),i("div",et,[f("p",lt,E(r.card.input)+" : "+E(r.card.output),1),r.card.inputType?(a(),i("p",nt,E(e(J)(r.card.inputType)),1)):$("",!0)])):$("",!0)]))}}),je=n=>{const o=Ie(),g=Re(),{inventoryState:_,cornerMap:r,roadMap:W,onlineGameOpponentId:V}=re(o),{firebaseUser:C}=re(g),j=k(()=>{var y;return n===ne.PLAYER?(y=C.value)==null?void 0:y.uid:V.value}),D=k(()=>_.value[n].buildings[q.ROAD]),O=k(()=>_.value[n].buildings[q.VILLAGE]),I=k(()=>_.value[n].buildings[q.CITY]),H=k(()=>_.value[n].cards[P.GRAIN_FIELD]),b=k(()=>_.value[n].cards[P.WOOD_FOREST]),w=k(()=>_.value[n].cards[P.SHEEP_PASTURE]),M=k(()=>_.value[n].cards[P.BRICK_HILL]),p=k(()=>_.value[n].cards[P.ORE_MOUNTAIN]),d=k(()=>W.value.filter(y=>{var G;return((G=y.building)==null?void 0:G.type)===q.ROAD&&y.building.ownerId===j.value}).length),m=k(()=>r.value.filter(y=>{var G;return((G=y.building)==null?void 0:G.type)===q.VILLAGE&&y.building.ownerId===j.value}).length),N=k(()=>r.value.filter(y=>{var G;return((G=y.building)==null?void 0:G.type)===q.CITY&&y.building.ownerId===j.value}).length),X=k(()=>b.value>=1&&M.value>=1),ve=k(()=>H.value>=1&&w.value>=1&&b.value>=1&&M.value>=1),F=k(()=>H.value>=2&&p.value>=3),h=k(()=>w.value>=1&&H.value>=1&&p.value>=1),T=k(()=>H.value+b.value+w.value+M.value+p.value);return{selected:_.value[n].selected,roads:D,villages:O,cities:I,grain:H,wood:b,sheep:w,brick:M,ore:p,roadBuildings:d,villageBuildings:m,cityBuildings:N,canBuyRoad:X,canBuyVillage:ve,canBuyCity:F,canBuyDevelopment:h,totalCards:T}},at={key:0,class:"font-bold"},st={class:"flex flex-col gap-1"},ml=de({__name:"PlayerInventory",props:{player:{}},setup(n){const o=n,g=Ie(),{catanStatus:_,buildingStatus:r,activePlayer:W,canBuild:V,canBuildFirstRoad:C,canBuildSecondRoad:j,canBuildFirstVillage:D,canBuildSecondVillage:O,onlineGameOpponentName:I,onlineGameOpponentActive:H}=re(g),{selectBuildingType:b}=g,{selected:w,roads:M,villages:p,cities:d,grain:m,sheep:N,wood:X,brick:ve,ore:F}=je(ne.PLAYER),{totalCards:h}=je(ne.OPPONENT),T=k(()=>W.value!==o.player||!V.value);return(y,G)=>(a(),i("div",{class:Y(["flex flex-col gap-3",y.player===e(ne).PLAYER?"items-start":"items-end"])},[y.player===e(ne).PLAYER?(a(),i("p",at," You ")):(a(),i("p",{key:1,class:Y(["font-bold",e(H)?"text-green-400":"text-red-400"])},E(e(I)),3)),f("div",st,[B(L,{"pt:root":"!justify-start",class:Y([e(w)===e(q).ROAD?"!border-white":"!border-none"]),variant:"neutral",icon:"pi pi-ellipsis-h",label:`${e(M)}/${e(Ge)-e(M)} roads`,disabled:T.value||e(r)!==e(he).CAN_BUILD||!e(C)&&!e(j)||!e(M),onClick:G[0]||(G[0]=Q=>e(b)(e(q).ROAD))},null,8,["class","label","disabled"]),B(L,{"pt:root":"!justify-start",class:Y([e(w)===e(q).VILLAGE?"!border-white":"!border-none"]),variant:"neutral",icon:"pi pi-home",label:`${e(p)}/${e(un)-e(p)} villages`,disabled:T.value||e(r)!==e(he).CAN_BUILD||!e(D)&&!e(O)||!e(p),onClick:G[1]||(G[1]=Q=>e(b)(e(q).VILLAGE))},null,8,["class","label","disabled"]),B(L,{"pt:root":"!justify-start",class:Y([e(w)===e(q).CITY?"!border-white":"!border-none"]),variant:"neutral",icon:"pi pi-building",label:`${e(d)}/${e(cn)-e(d)} cities`,disabled:T.value||e(_)!==e(le).PRODUCTION_PHASE||!e(d),onClick:G[2]||(G[2]=Q=>e(b)(e(q).CITY))},null,8,["class","label","disabled"]),y.player===e(ne).PLAYER?(a(),i(z,{key:0},[B(L,{class:"!border-yellow-500",outlined:"",label:`${e(m)} ${e(J)(e(P).GRAIN_FIELD)}`},null,8,["label"]),B(L,{class:"!border-lime-500",outlined:"",label:`${e(N)} ${e(J)(e(P).SHEEP_PASTURE)}`},null,8,["label"]),B(L,{class:"!border-green-500",outlined:"",label:`${e(X)} ${e(J)(e(P).WOOD_FOREST)}`},null,8,["label"]),B(L,{class:"!border-orange-500",outlined:"",label:`${e(ve)} ${e(J)(e(P).BRICK_HILL)}`},null,8,["label"]),B(L,{class:"!border-slate-300",outlined:"",label:`${e(F)} ${e(J)(e(P).ORE_MOUNTAIN)}`},null,8,["label"])],64)):(a(),Z(L,{key:1,class:"!border-white",variant:"neutral",label:`${e(h)} cards`},null,8,["label"]))])],2))}}),it={class:"w-full flex flex-col gap-3 items-center"},ot={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},rt={class:"flex flex-col items-start"},ut={class:"flex flex-col items-start"},ct={class:"flex flex-col items-start"},dt={class:"flex flex-col items-start"},vt=de({__name:"Shop",setup(n){const o=Ie(),{catanStatus:g,activePlayer:_}=re(o),{buy:r}=o,{wood:W,brick:V,grain:C,sheep:j,ore:D,canBuyRoad:O,canBuyVillage:I,canBuyCity:H,canBuyDevelopment:b}=je(ne.PLAYER),w=k(()=>[le.PRODUCTION_PHASE,le.ACTION_PHASE].includes(g.value)&&_.value===ne.PLAYER);return(M,p)=>(a(),i("div",it,[p[8]||(p[8]=f("h3",{class:"text-xl font-bold"},"Buy items:",-1)),f("div",ot,[B(L,{class:"!justify-start !items-start",variant:"neutral",disabled:!w.value||!e(O),onClick:p[0]||(p[0]=d=>e(r)(e(q).ROAD))},{default:ee(()=>[f("div",rt,[p[4]||(p[4]=f("p",{class:"text-lg font-bold"},"Road",-1)),f("p",null,E(e(W))+"/1 "+E(e(J)(e(P).WOOD_FOREST)),1),f("p",null,E(e(V))+"/1 "+E(e(J)(e(P).BRICK_HILL)),1)])]),_:1},8,["disabled"]),B(L,{class:"!justify-start !items-start",variant:"neutral",disabled:!w.value||!e(I),onClick:p[1]||(p[1]=d=>e(r)(e(q).VILLAGE))},{default:ee(()=>[f("div",ut,[p[5]||(p[5]=f("p",{class:"text-lg font-bold"},"Village",-1)),f("p",null,E(e(C))+"/1 "+E(e(J)(e(P).GRAIN_FIELD)),1),f("p",null,E(e(j))+"/1 "+E(e(J)(e(P).SHEEP_PASTURE)),1),f("p",null,E(e(W))+"/1 "+E(e(J)(e(P).WOOD_FOREST)),1),f("p",null,E(e(V))+"/1 "+E(e(J)(e(P).BRICK_HILL)),1)])]),_:1},8,["disabled"]),B(L,{class:"!justify-start !items-start",variant:"neutral",disabled:!w.value||!e(H),onClick:p[2]||(p[2]=d=>e(r)(e(q).CITY))},{default:ee(()=>[f("div",ct,[p[6]||(p[6]=f("p",{class:"text-lg font-bold"},"City",-1)),f("p",null,E(e(C))+"/2 "+E(e(J)(e(P).GRAIN_FIELD)),1),f("p",null,E(e(D))+"/3 "+E(e(J)(e(P).ORE_MOUNTAIN)),1)])]),_:1},8,["disabled"]),B(L,{class:"!justify-start !items-start",variant:"neutral",disabled:!w.value||!e(b),onClick:p[3]||(p[3]=d=>e(r)("development"))},{default:ee(()=>[f("div",dt,[p[7]||(p[7]=f("p",{class:"text-lg font-bold"},"Development",-1)),f("p",null,E(e(C))+"/1 "+E(e(J)(e(P).GRAIN_FIELD)),1),f("p",null,E(e(j))+"/1 "+E(e(J)(e(P).SHEEP_PASTURE)),1),f("p",null,E(e(D))+"/1 "+E(e(J)(e(P).ORE_MOUNTAIN)),1)])]),_:1},8,["disabled"])])]))}}),gt={class:"relative mt-5 w-full grid grid-cols-2 md:grid-cols-3 gap-3 justify-center"},ft={key:0,class:"col-span-full min-h-[25vh] flex flex-col"},pt=de({__name:"CatanMainGame",setup(n){const o=Ie(),{catanStatus:g,activePlayer:_,mappedMap:r}=re(o),{isLandCard:W,selectCard:V}=o;return(C,j)=>(a(),i("div",gt,[B(wn,{class:"col-span-full md:col-span-1 md:col-start-2"}),e(g)>e(le).IS_INITIALIZING?(a(),i("div",ft,[(a(!0),i(z,null,We(e(r),(D,O)=>(a(),i("div",{key:O,class:Y(["flex gap-1 justify-center",{"-mt-7 md:-mt-8":O>0}])},[(a(!0),i(z,null,We(D,I=>(a(),i(z,{key:I.id},[e(W)(I)?(a(),Z(Zn,{key:0,card:I,isDisabled:e(_)!==e(ne).PLAYER,isBlocked:I.isBlocked&&e(g)>e(le).IS_FINISHING_UP,onOnClick:H=>e(V)(I)},null,8,["card","isDisabled","isBlocked","onOnClick"])):(a(),Z(tt,{key:1,card:I,onOnClick:()=>{}},null,8,["card"]))],64))),128))],2))),128))])):$("",!0),B(ml,{class:"md:absolute top-0 left-0",player:e(ne).PLAYER},null,8,["player"]),B(ml,{class:"md:absolute top-0 right-0",player:e(ne).OPPONENT},null,8,["player"]),e(g)>=e(le).IS_FINISHING_UP?(a(),Z(vt,{key:1,class:"col-span-full"})):$("",!0)]))}}),bt={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},mt={class:"flex flex-wrap justify-center gap-3"},It={key:0,class:"w-full flex flex-col gap-3 items-center"},_t={key:1,class:"w-full flex flex-col items-center"},yt={key:4,class:"w-full flex flex-col gap-3 items-center"},Et=de({__name:"Catan",setup(n){const o=Ie(),{gameStatus:g,onlineGameId:_,onlineGameChat:r,isOnlineGameOwner:W,onlineGames:V,onlineGamesLoading:C}=re(o),{collections:j,createOnlineGame:D,continueOnlineGame:O,leaveOnlineGame:I,deleteOnlineGame:H,fetchOnlineGames:b}=o,w=oe(!1),M=async()=>{_.value&&await H(),o.$reset()},p=async()=>{_.value&&await I(),o.$reset()};return(d,m)=>(a(),Z(Xl,{class:"!bg-red-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Catan",description:"Play with a friend."},{right:ee(()=>[f("div",bt,[B(L,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:m[0]||(m[0]=N=>w.value=!0)}),e(W)?(a(),Z(L,{key:0,variant:"danger",icon:"pi pi-trash",onClick:M})):$("",!0)])]),default:ee(()=>[f("div",mt,[e(g)===e(fe).HAS_NOT_STARTED?(a(),i("div",It,[m[6]||(m[6]=ce(" Hallo en welkom Klik hier om te starten! ")),B(L,{class:"w-full md:w-1/2",label:"Start",onClick:m[1]||(m[1]=N=>g.value=e(fe).FINDING_OPPONENT)})])):e(g)===e(fe).FINDING_OPPONENT?(a(),i("div",_t,[B(gn,{modelValue:e(V),"onUpdate:modelValue":m[2]||(m[2]=N=>Ql(V)?V.value=N:null),collection:e(j).onlineGames,"online-games-loading":e(C),"fetch-online-games":e(b),onCreateOnlineGame:e(D),onContinueOnlineGame:e(O)},null,8,["modelValue","collection","online-games-loading","fetch-online-games","onCreateOnlineGame","onContinueOnlineGame"]),B(L,{class:"w-full md:w-1/2",variant:"neutral",label:"Go Back",onClick:m[3]||(m[3]=N=>g.value=e(fe).HAS_NOT_STARTED)})])):e(g)===e(fe).IS_PLAYING?(a(),Z(pt,{key:2})):e(g)===e(fe).HAS_FINISHED?(a(),i(z,{key:3},[ce(" Je hebt gewonnen of verloren! ")],64)):$("",!0),e(g)===e(fe).IS_PLAYING||e(g)===e(fe).HAS_FINISHED?(a(),i("div",yt,[B(en,{chats:e(r)??[],onSendChat:m[4]||(m[4]=N=>r.value=[...e(r)??[],N])},null,8,["chats"]),B(L,{class:"w-full md:w-1/2",variant:"neutral",label:"Go Back",onClick:p})])):$("",!0)]),B(ln,{"game-id":e(Ne).CATAN,"is-open":w.value,"onUpdate:isOpen":m[5]||(m[5]=N=>w.value=N)},null,8,["game-id","is-open"])]),_:1}))}});export{Et as default};
