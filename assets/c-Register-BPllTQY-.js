import{d as L,u as k,q as S,s as g,v as $,l as q,g as U,w as t,j as P,b as E,h as s,e as i,x as M,D as B,f as o,y as l,i as v,R as w,_ as C,z as n,A as O}from"../bundle.js";import{_ as j,a as A,b as G}from"./c-PasswordField.vue_vue_type_script_setup_true_lang-tE0yoL03.js";import{_ as I}from"./c-Page.vue_vue_type_script_setup_true_lang-abQPoI-C.js";const z={class:"flex flex-col items-center content-center"},D={class:"grid grid-cols-2 mt-10 gap-3"},K=L({__name:"Register",setup(F){const u=P(),_=k(),m=S(),{routeLoading:N}=g(_),{isLoginLoading:b}=g(m),{initEmail:y,initPassword:R}=u.currentRoute.value.query,d=n(),f=n(),p=n(),e=$({email:{value:y?.toString()||"",error:""},password:{value:R?.toString()||"",error:""},firstName:{value:"",error:""}}),V=async()=>{Object.keys(e).forEach(c=>e[c].error=""),await Promise.all([d.value.test(),f.value.test(),p.value.test()]),!e.email.error&&!e.password.error&&!e.firstName.error&&m.register(e.email.value,e.password.value,e.firstName.value)};return q(()=>{u.replace({query:void 0})}),(c,r)=>{const x=O("RouterLink");return E(),U(I,null,{content:t(()=>[s(C,{class:"!bg-cyan-800 !bg-opacity-50 my-5",title:"Register",description:"Please register using your e-mail, password and first name."},{default:t(()=>[i("div",z,[i("form",{class:"w-full lg:w-1/2 xl:w-2/3 px-8 pt-6 pb-8 mb-4",onSubmit:r[6]||(r[6]=M(a=>V(),["prevent"]))},[s(B,{ref_key:"firstName",ref:p,name:"firstName",label:"First Name",placeholder:"Someone",modelValue:e.firstName.value,"onUpdate:modelValue":r[0]||(r[0]=a=>e.firstName.value=a),error:e.firstName.error,"onUpdate:error":r[1]||(r[1]=a=>e.firstName.error=a),rules:[o(l).Required,o(l).MinLength],"min-length":3,"max-length":25},null,8,["modelValue","error","rules"]),s(j,{ref_key:"email",ref:d,name:"email",label:"E-mail",modelValue:e.email.value,"onUpdate:modelValue":r[2]||(r[2]=a=>e.email.value=a),error:e.email.error,"onUpdate:error":r[3]||(r[3]=a=>e.email.error=a),rules:[o(l).Required]},null,8,["modelValue","error","rules"]),s(A,{ref_key:"password",ref:f,name:"password",label:"Password",modelValue:e.password.value,"onUpdate:modelValue":r[4]||(r[4]=a=>e.password.value=a),error:e.password.error,"onUpdate:error":r[5]||(r[5]=a=>e.password.error=a),rules:[o(l).Required]},null,8,["modelValue","error","rules"]),i("div",D,[s(v,{class:"col-span-full md:col-span-1",type:"submit",label:"Register",loading:o(b)},null,8,["loading"]),s(x,{to:{name:o(w).LOGIN,query:{initEmail:e.email.value,initPassword:e.password.value}},class:"col-span-full md:col-span-1"},{default:t(()=>[s(v,{class:"w-full",outlined:"",label:"Login",loading:o(N)===o(w).LOGIN},null,8,["loading"])]),_:1},8,["to"])])],32),s(G)])]),_:1})]),_:1})}}});export{K as default};
