import{_ as C,a as te}from"./c-Bubble.vue_vue_type_script_setup_true_lang-bYHBWxaz.js";import{bO as ce,cI as fe,cJ as le,bX as j,aS as V,q as i,bC as re,cK as q,cL as de,cM as se,cN as ve,cO as oe,M as N,aK as r,u as f,v as t,s as k,bi as e,aZ as he,at as X,b9 as L,I as m,bH as A,H as O,aC as pe,aH as _e,F as ne,t as I,bV as me,bT as ge,aV as we,b_ as ke,cq as Ee}from"../bundle.js";import{_ as ye}from"./c-Dice6.vue_vue_type_script_setup_true_lang-lzciAH4f.js";import{u as Se,H as be}from"./c-useScoreInfo-p-hvkgQ4.js";import{_ as $e}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-BxDvgQjP.js";import{_ as ue}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-SwitchField.vue_vue_type_script_setup_true_lang-BLC6R9kK.js";import"./c-SelectField.vue_vue_type_script_setup_true_lang-DejAEVFU.js";import"./c-validation-Bf-E2UlI.js";var y=(l=>(l[l.ONES=0]="ONES",l[l.TWOS=1]="TWOS",l[l.THREES=2]="THREES",l[l.FOURS=3]="FOURS",l[l.FIVES=4]="FIVES",l[l.SIXES=5]="SIXES",l[l.THREE_OF_A_KIND=6]="THREE_OF_A_KIND",l[l.FOUR_OF_A_KIND=7]="FOUR_OF_A_KIND",l[l.FULL_HOUSE=8]="FULL_HOUSE",l[l.SMALL_STRAIGHT=9]="SMALL_STRAIGHT",l[l.LARGE_STRAIGHT=10]="LARGE_STRAIGHT",l[l.YAHTZEE=11]="YAHTZEE",l[l.CHANCE=12]="CHANCE",l))(y||{});const U={0:{title:"Ones",section:"top"},1:{title:"Twos",section:"top",multiplier:2},2:{title:"Threes",section:"top",multiplier:3},3:{title:"Fours",section:"top",multiplier:4},4:{title:"Fives",section:"top",multiplier:5},5:{title:"Sixes",section:"top",multiplier:6},6:{title:"Three of a Kind",section:"bottom"},7:{title:"Four of a Kind",section:"bottom"},8:{title:"Full House",section:"bottom",trueValue:25},9:{title:"Small Straight",section:"bottom",trueValue:30},10:{title:"Large Straight",section:"bottom",trueValue:40},11:{title:"Yahtzee",section:"bottom",trueValue:50},12:{title:"Chance",section:"bottom"}},J=ce("yahtzeeStore",()=>{const l=fe(le.YAHTZEE)(),{personalBest:o,highscorePosition:v}=j(l),{setPreviousHighscores:g,fetchGameData:p,updateHighscores:w,sortHighscores:F}=l,c=V([]),S=V(0),b=V(null),_=V(-1),$=V(-1),d=V(ae()),D=i(()=>_.value>=0),R=i(()=>c.value.length===13),Y=i(()=>d.value.some(n=>n.isRolling)),B=i(()=>n=>d.value.filter(a=>a.value===n).length),T=i(()=>M(3)),P=i(()=>M(4)),G=i(()=>z(2)&&z(3)?U[8].trueValue??!1:!1),W=i(()=>ee(4)?U[9].trueValue??!1:!1),s=i(()=>ee(5)?U[10].trueValue??!1:!1),h=i(()=>z(5)?U[11].trueValue??!1:!1),Q=i(()=>{let n=0;return d.value.forEach(a=>{n+=a.value}),n}),Z=i(()=>n=>{let a=0;return c.value.filter(u=>U[u.row].section===n).forEach(u=>{u.value!==!1&&(a+=u.value)}),a});re(R,n=>{if(n){let a=Z.value("top");a>=63&&(a+=35),a+=Z.value("bottom"),a+=S.value,b.value=a,w(b.value,{score:b.value,bonus:S.value}),q(de)}});const K=()=>{c.value=[],S.value=0,b.value=null,_.value=-1,$.value=-1,d.value=ae(),g()},M=n=>{for(let a=1;a<=6;a++)if(d.value.filter(u=>u.value===a).length>=n){let u=0;return d.value.forEach(E=>{u+=E.value}),u}return!1},z=n=>{for(let a=1;a<=6;a++)if(d.value.filter(u=>u.value===a).length===n)return!0;return!1},ee=n=>{let a=0,u=n;do{e:for(let E=u-n+1;E<=u;E++)if(d.value.some(ie=>ie.value===E))a++;else break e;if(a===n)return!0;a=0,u++}while(u<=6);return!1};return{score:c,bonus:S,finalScore:b,round:_,reroll:$,dices:d,hasStarted:D,hasFinished:R,isRolling:Y,hasOfValue:B,hasThreeOfAKind:T,hasFourOfAKind:P,hasFullHouse:G,hasSmallStraight:W,hasLargeStraight:s,hasYahtzee:h,diceTotal:Q,scoreTotalOf:Z,personalBest:o,highscorePosition:v,$reset:K,start:()=>{_.value=0},roll:()=>{const n=l.diceRollSpeed*1e3;$.value++,d.value.forEach(a=>{a.selected||(a.isRolling=!0,setTimeout(()=>{a.value=se(6),a.isRolling=!1,$.value===2&&(a.selected=!0),d.value.sort((u,E)=>u.value-E.value)},se(n,n/3)))}),q(ve)},getScore:n=>c.value.find(a=>a.row===n),getActualValue:(n,a)=>{let u=a;if(u===!1)return!1;const E=U[n];return E.multiplier?u*=E.multiplier:E.trueValue&&(u=E.trueValue),u},selectDice:n=>{$.value>=0&&$.value<2&&(n.selected=!n.selected,q(oe))},selectScore:(n,a)=>{if(!Y.value){if(h.value){const u=c.value.find(E=>E.row===11);u&&u.value!==!1&&(S.value+=100)}c.value.push({row:n,value:a}),_.value++,$.value=-1,d.value.forEach(u=>{u.selected=!1}),q(oe)}},setPreviousHighscores:g,fetchGameData:p,updateHighscores:w,sortHighscores:F}},{persist:{enabled:!0}}),ae=()=>[{id:1,value:1,selected:!1,isRolling:!1},{id:2,value:2,selected:!1,isRolling:!1},{id:3,value:3,selected:!1,isRolling:!1},{id:4,value:4,selected:!1,isRolling:!1},{id:5,value:5,selected:!1,isRolling:!1}],Te={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},xe=["fill"],Ae=["fill"],Oe=N({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(l){return(o,v)=>(r(),f("svg",Te,[t("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,xe),t("circle",{cx:"50",cy:"50",r:"10",fill:o.color},null,8,Ae)]))}}),He={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ce=["fill"],Ie=["fill"],Ve=["fill"],Fe=N({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(l){return(o,v)=>(r(),f("svg",He,[t("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ce),t("circle",{cx:"25",cy:"25",r:"10",fill:o.color},null,8,Ie),t("circle",{cx:"75",cy:"75",r:"10",fill:o.color},null,8,Ve)]))}}),De={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Le=["fill"],Ne=["fill"],Re=["fill"],Be=["fill"],Ge=N({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(l){return(o,v)=>(r(),f("svg",De,[t("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Le),t("circle",{cx:"25",cy:"25",r:"10",fill:o.color},null,8,Ne),t("circle",{cx:"50",cy:"50",r:"10",fill:o.color},null,8,Re),t("circle",{cx:"75",cy:"75",r:"10",fill:o.color},null,8,Be)]))}}),Ue={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ye=["fill"],Pe=["fill"],Me=["fill"],Ze=["fill"],ze=["fill"],Xe=N({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(l){return(o,v)=>(r(),f("svg",Ue,[t("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ye),t("circle",{cx:"25",cy:"25",r:"10",fill:o.color},null,8,Pe),t("circle",{cx:"25",cy:"75",r:"10",fill:o.color},null,8,Me),t("circle",{cx:"75",cy:"25",r:"10",fill:o.color},null,8,Ze),t("circle",{cx:"75",cy:"75",r:"10",fill:o.color},null,8,ze)]))}}),je={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},We=["fill"],qe=["fill"],Je=["fill"],Qe=["fill"],Ke=["fill"],el=["fill"],ll=N({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(l){return(o,v)=>(r(),f("svg",je,[t("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:o.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,We),t("circle",{cx:"25",cy:"25",r:"10",fill:o.color},null,8,qe),t("circle",{cx:"25",cy:"75",r:"10",fill:o.color},null,8,Je),t("circle",{cx:"50",cy:"50",r:"10",fill:o.color},null,8,Qe),t("circle",{cx:"75",cy:"25",r:"10",fill:o.color},null,8,Ke),t("circle",{cx:"75",cy:"75",r:"10",fill:o.color},null,8,el)]))}}),tl=N({__name:"Dice",props:{dice:{}},setup(l){const{selectDice:o}=J(),v={1:Oe,2:Fe,3:Ge,4:Xe,5:ll,6:ye};return(g,p)=>(r(),f("div",{class:X(["cursor-pointer",{"animate-spin":g.dice.isRolling}])},[(r(),k(he(v[g.dice.value]),{color:"black",backgroundColor:g.dice.selected?"#2563eb":"white",width:"40",height:"40",onClick:p[0]||(p[0]=w=>e(o)(g.dice))},null,8,["backgroundColor"]))],2))}}),sl={class:"h-12 md:h-auto"},ol={class:"w-1/2 md:w-1/3"},al={key:0},rl={key:1,class:"!ps-1 md:ps-1"},nl={key:2},ul=N({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(l){const o=l,v=J(),{reroll:g}=j(v),{selectScore:p,getScore:w,getActualValue:F}=v,c=V(!1),S=U[o.row],b=i(()=>w(o.row)),_=i(()=>F(o.row,o.hasValue)),$=i(()=>_.value===!1?"X":_.value);return re(()=>_.value,()=>{c.value=!0,setTimeout(()=>{c.value=!1})}),(d,D)=>(r(),f("tr",sl,[t("th",ol,L(e(S).title),1),b.value?(r(),f("td",al,L(b.value.value===!1?"X":b.value.value),1)):e(g)>=0&&!c.value?(r(),f("td",rl,[m(C,{class:"!p-0 !h-10 md:!h-auto",type:_.value===!1||_.value===0?"neutral":void 0,onClick:D[0]||(D[0]=R=>e(p)(d.row,_.value))},{default:A(()=>[O(L($.value),1)]),_:1},8,["type"])])):(r(),f("td",nl))]))}}),x=ue(ul,[["__scopeId","data-v-cc8f6556"]]),il={key:0,class:"h-12 md:h-auto text-red-500"},cl={class:"h-12 md:h-auto text-pink-500"},fl={key:0,class:"text-purple-500 font-bold"},dl={key:1,class:"text-red-500 font-bold"},vl={key:2,class:"text-green-500 font-bold"},hl=N({__name:"Scoreboard",setup(l){const o=J(),{bonus:v,hasStarted:g,hasFinished:p,hasOfValue:w,hasThreeOfAKind:F,hasFourOfAKind:c,hasFullHouse:S,hasSmallStraight:b,hasLargeStraight:_,hasYahtzee:$,diceTotal:d,scoreTotalOf:D,finalScore:R}=j(o),{currentHighscorePosition:Y,hasImprovedHighscorePosition:B,hasImprovedPersonalBest:T}=Se(le.YAHTZEE),P=V(),G=V(!1),W=i(()=>w.value(1)),s=i(()=>w.value(2)),h=i(()=>w.value(3)),Q=i(()=>w.value(4)),Z=i(()=>w.value(5)),K=i(()=>w.value(6)),M=i(()=>D.value("top")),z=i(()=>D.value("bottom"));return pe(()=>{P.value=setInterval(()=>{G.value=!G.value},500)}),_e(()=>{clearInterval(P.value)}),(ee,H)=>(r(),f("table",{class:X(["w-full mt-5 text-sm md:text-base text-left",e(p)?"text-neutral-500":"text-white",e(g)?void 0:G.value?"even":"odd"])},[t("tbody",null,[m(x,{row:e(y).ONES,"has-value":W.value},null,8,["row","has-value"]),m(x,{row:e(y).TWOS,"has-value":s.value},null,8,["row","has-value"]),m(x,{row:e(y).THREES,"has-value":h.value},null,8,["row","has-value"]),m(x,{row:e(y).FOURS,"has-value":Q.value},null,8,["row","has-value"]),m(x,{row:e(y).FIVES,"has-value":Z.value},null,8,["row","has-value"]),m(x,{row:e(y).SIXES,"has-value":K.value},null,8,["row","has-value"]),t("tr",{class:X(["h-12 md:h-auto",e(p)?"text-white":"text-neutral-500"])},[H[0]||(H[0]=t("th",null,"TOP",-1)),t("td",null,L(e(g)?M.value:""),1)],2),t("tr",{class:X(["h-12 md:h-auto",e(p)?M.value>=63?"text-yellow-500":"text-white":"text-neutral-500"])},[H[1]||(H[1]=t("th",null,"BONUS",-1)),t("td",null,L(M.value>=63?35:e(p)?"X":""),1)],2),m(x,{row:e(y).THREE_OF_A_KIND,"has-value":e(F)},null,8,["row","has-value"]),m(x,{row:e(y).FOUR_OF_A_KIND,"has-value":e(c)},null,8,["row","has-value"]),m(x,{row:e(y).FULL_HOUSE,"has-value":e(S)},null,8,["row","has-value"]),m(x,{row:e(y).SMALL_STRAIGHT,"has-value":e(b)},null,8,["row","has-value"]),m(x,{row:e(y).LARGE_STRAIGHT,"has-value":e(_)},null,8,["row","has-value"]),m(x,{row:e(y).YAHTZEE,"has-value":e($)},null,8,["row","has-value"]),m(x,{row:e(y).CHANCE,"has-value":e(d)},null,8,["row","has-value"]),t("tr",{class:X(["h-12 md:h-auto",e(p)?"text-white":"text-neutral-500"])},[H[2]||(H[2]=t("th",null,"BOTTOM",-1)),t("td",null,L(e(g)?z.value:""),1)],2),e(p)&&e(R)?(r(),f(ne,{key:0},[e(v)?(r(),f("tr",il,[H[3]||(H[3]=t("th",null,"YAHTZEE BONUS",-1)),t("td",null,L(e(v)),1)])):I("",!0),t("tr",cl,[H[4]||(H[4]=t("th",null,"TOTAL",-1)),t("td",null,[O(L(e(R))+" ",1),e(B)&&e(Y)===1?(r(),f("span",fl," HIGHSCORE! ")):e(B)?(r(),f("span",dl," LEADERBOARD IMPROVEMENT! ")):e(T)?(r(),f("span",vl," PERSONAL BEST! ")):I("",!0)])])],64)):I("",!0)])],2))}}),pl=ue(hl,[["__scopeId","data-v-1cc8c08e"]]),_l={class:"flex flex-wrap justify-center gap-3"},ml={key:3,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},gl={class:"w-full md:w-1/2 flex justify-center gap-3"},wl={class:"w-full md:w-1/2 flex justify-center gap-3"},kl={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},El={key:2,class:"flex flex-wrap gap-3 mt-3 justify-center"},Ll=N({__name:"Yahtzee",setup(l){const o=ge(),v=J(),g=me(),{reroll:p,dices:w,hasStarted:F,hasFinished:c,finalScore:S,bonus:b,personalBest:_}=j(v),{firebaseUser:$}=j(g),{start:d,$reset:D,roll:R,updateHighscores:Y}=v,B=V(!1),T=V(!1),P=()=>{T.value=!1,d()},G=()=>{T.value=!1,D()};return(W,s)=>(r(),k(te,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:"Play solo."},{right:A(()=>[m(C,{class:"border-none h-fit",type:"neutral",icon:"pi pi-cog",onClick:s[0]||(s[0]=h=>B.value=!0)})]),default:A(()=>[t("div",_l,[e(F)?I("",!0):(r(),k(C,{key:0,class:"w-full md:w-1/2",onClick:P},{default:A(()=>s[8]||(s[8]=[O(" Start ")])),_:1})),!e(F)&&!T.value?(r(),k(C,{key:1,class:"w-full md:w-1/2",type:"neutral",onClick:s[1]||(s[1]=h=>T.value=!0)},{default:A(()=>s[9]||(s[9]=[O(" View Highscores ")])),_:1})):e(F)?e(c)?I("",!0):(r(),f("div",ml,[t("div",gl,[!e(c)&&e(p)<2?(r(),k(C,{key:0,class:"w-full",type:"tertiary",disabled:e(w).every(h=>h.selected),onClick:e(R)},{default:A(()=>[O(L(e(p)>=0?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):I("",!0)]),t("div",wl,[(r(!0),f(ne,null,we(e(w),h=>(r(),k(tl,{dice:h},null,8,["dice"]))),256))])])):(r(),k(C,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:s[2]||(s[2]=h=>T.value=!1)},{default:A(()=>s[10]||(s[10]=[O(" Go Back ")])),_:1}))]),T.value?(r(),k(be,{key:0,"game-id":e(le).YAHTZEE},null,8,["game-id"])):(r(),k(pl,{key:1})),t("div",kl,[e(F)&&!e(c)?(r(),k(C,{key:0,class:"w-full md:w-1/2",type:"neutral",onClick:G},{default:A(()=>s[11]||(s[11]=[O(" Restart ")])),_:1})):I("",!0),e(c)?(r(),k(C,{key:1,class:"w-full md:w-1/2",type:"secondary",onClick:G},{default:A(()=>s[12]||(s[12]=[O(" Play Again ")])),_:1})):I("",!0),e(c)&&!T.value?(r(),k(C,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:s[3]||(s[3]=h=>T.value=!0)},{default:A(()=>s[13]||(s[13]=[O(" View Highscores ")])),_:1})):e(c)?(r(),k(C,{key:3,class:"w-full md:w-1/2",type:"neutral",onClick:s[4]||(s[4]=h=>T.value=!1)},{default:A(()=>s[14]||(s[14]=[O(" View Your Score ")])),_:1})):I("",!0)]),e(c)?(r(),f("div",El,[e($)?e(S)&&e(_)<e(S)?(r(),k(C,{key:1,class:"w-full md:w-1/2",type:"primary",onClick:s[6]||(s[6]=h=>e(Y)(e(S),e(b)))},{default:A(()=>s[17]||(s[17]=[O(" Add To Leaderboard ")])),_:1})):I("",!0):(r(),k(te,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:A(()=>[s[15]||(s[15]=O(" Please ")),t("a",{class:"cursor-pointer",onClick:s[5]||(s[5]=h=>e(o).push({name:e(ke).LOGIN,params:{redirect:JSON.stringify({name:e(Ee).GAMES_YAHTZEE})}}))}," Login "),s[16]||(s[16]=O(" to add your score to the leaderboard. "))]),_:1}))])):I("",!0),m($e,{"is-open":B.value,"onUpdate:isOpen":s[7]||(s[7]=h=>B.value=h)},null,8,["is-open"])]),_:1}))}});export{Ll as default};
