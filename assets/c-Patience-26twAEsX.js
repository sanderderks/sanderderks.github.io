import{g as d,j as t,ac as X,q as l,d as M,af as U,ag as K,s as B,f as S,l as h,y as z,ap as ee,z as N,A as R,a3 as te,aT as G,I as O,k as s,m as g,h as e,aN as se,aS as V,c as le,w as F,T as ae,an as re,a7 as ce,_ as ne}from"../bundle.js";import{u as oe,H as de,_ as ie,a as pe}from"./c-useScoreInfo-D3vuSgKd.js";import{a as Q,b as k,D as r,C as i,_ as ue}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-ZhxvtC1w.js";import{_ as L}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import{S as q}from"./c-Spades-HPmwGyS9.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";const ye={},me={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function fe(_,c){return t(),d("svg",me,c[0]||(c[0]=[X('<circle cx="50" cy="30" r="15" fill="black"></circle><circle cx="35" cy="50" r="15" fill="black"></circle><circle cx="65" cy="50" r="15" fill="black"></circle><rect x="45" y="50" width="10" height="30" fill="black"></rect><rect x="40" y="80" width="20" height="10" fill="black"></rect>',5)]))}const Y=L(ye,[["render",fe]]),ke={},xe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function ge(_,c){return t(),d("svg",xe,c[0]||(c[0]=[l("polygon",{points:"50,10 80,50 50,90 20,50",fill:"red"},null,-1)]))}const J=L(ke,[["render",ge]]),Se={},ve={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function he(_,c){return t(),d("svg",ve,c[0]||(c[0]=[l("path",{d:"M50 70 Q20 50 20 30 Q20 10 40 10 Q50 10 50 20 Q50 10 60 10 Q80 10 80 30 Q80 50 50 70 Z",fill:"red"},null,-1)]))}const W=L(Se,[["render",he]]),_e={key:0,class:"w-full h-full flex justify-center"},we={key:1,class:"relative w-full flex"},be={class:"relative flex text-xs md:text-md lg:text-lg font-bold"},Ee=M({__name:"Card",props:{card:{},index:{}},emits:["select"],setup(_,{emit:c}){const n=_,D=c,p=U(K).greaterOrEqual("lg"),x=Q(),{gameStatus:b,cards:C}=B(x),{isPlayDeck:E}=x,P=S(()=>{if(n.card.hidden)return"";switch(n.card.value){case 13:return"K";case 12:return"Q";case 11:return"J";case 1:return"A";default:return`${n.card.value}`}}),A=S(()=>n.card.hidden?"text-primary":n.card.color==="black"?"text-black":"text-red-500"),H=S(()=>n.index===C.value[n.card.deck].length-1),I=S(()=>b.value===k.HAS_STARTED&&(H.value||!n.card.hidden)),f=S(()=>E(n.card.deck)||p.value&&n.card.deck===r.STOCK_CLOSED),$=S(()=>E(n.card.deck)?20:10),T={[i.HEARTS]:W,[i.SPADES]:q,[i.DIAMONDS]:J,[i.CLUBS]:Y};return(y,m)=>(t(),h(z,{class:N(["z-10 absolute h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px] !p-1 !pt-0 bg-opacity-100 !rounded-primary flex justify-center border border-white",[A.value,y.card.hidden?"bg-violet-950 border-1 !border-yellow-700":"bg-neutral-300",y.card.selected?"border-[3px] !border-red-600":"!border-black",{"draggable-card":I.value&&!y.card.hidden}]]),style:ee({top:f.value?`${$.value*y.index}px`:0}),"title-props":{class:"text-xl"},clickable:I.value,onClick:m[0]||(m[0]=j=>D("select"))},{fullControl:R(()=>[y.card.hidden?(t(),d("div",_e,m[1]||(m[1]=[l("div",{class:"flex flex-col justify-center"},[l("p",{class:"mb-2 text-5xl text-yellow-300"},"?")],-1)]))):(t(),d("div",we,[l("div",be,[(t(),h(G(T[y.card.type]),{class:"mt-[5px] sm:mt-[1px] h-[10px] w-[10px] sm:h-[20px] sm:w-[20px] md:h-[25px] md:w-[25px]"})),te(" "+O(P.value),1)]),(t(),h(G(T[y.card.type]),{class:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[25px] sm:w-[35px] md:w-[50px]"}))]))]),_:1},8,["class","style","clickable"]))}}),Te={class:"absolute h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px]"},De=M({__name:"CardDeck",props:{deckType:{},cardType:{}},setup(_){const c=_,D=U(K).greaterOrEqual("md"),w=Q(),{cards:p}=B(w),{shuffle:x,selectCard:b,selectEmptyDeck:C,selectFinalDeck:E,deselectAllCards:P,isPlayDeck:A,isFinalDeck:H}=w,I={[i.HEARTS]:W,[i.SPADES]:q,[i.DIAMONDS]:J,[i.CLUBS]:Y},f=S(()=>p.value[c.deckType]),$=S(()=>!f.value.length&&!c.cardType),T=S(()=>$.value&&c.deckType!==r.STOCK_OPEN),y=()=>{T.value&&C(c.deckType)},m=()=>{P()},j=a=>{a.added&&(b(a.added.element),f.value.length?b(f.value[f.value.length-1]):A(c.deckType)?C(c.deckType):H(c.deckType)&&E(c.deckType))};return(a,u)=>(t(),d("div",{class:N(["relative h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px]",{"border border-neutral-500":f.value.length===0,"cursor-pointer":T.value}]),onClick:y},[s(e(se),{list:[...f.value],itemKey:v=>`${v.type}.s${v.value}`,group:"patience",draggable:".draggable-card",delay:e(D)?0:100,onStart:m,onChange:j,onEnd:m},{item:R(({element:v,index:Z})=>[s(Ee,{card:v,index:Z,onSelect:je=>e(b)(v)},null,8,["card","index","onSelect"])]),header:R(()=>[l("div",Te,[a.cardType?(t(),h(G(I[a.cardType]),{key:0,class:"absolute left-1/2 transform -translate-x-1/2 w-[50px] cursor-pointer",onClick:u[0]||(u[0]=v=>e(E)(a.deckType))})):a.deckType===e(r).STOCK_CLOSED?(t(),d("div",{key:1,class:"w-full h-full flex justify-center",onClick:u[1]||(u[1]=(...v)=>e(x)&&e(x)(...v))},u[2]||(u[2]=[l("div",{class:"flex flex-col justify-center"},[l("p",{class:"text-neutral-300 text-xs md:text-md lg:text-lg mb-2"},"Shuffle")],-1)]))):g("",!0)])]),_:1},8,["list","itemKey","delay"])],2))}}),o=L(De,[["__scopeId","data-v-1f64f67d"]]),Ce={class:"flex justify-center"},Ae={key:0,class:"w-full flex flex-wrap gap-3 justify-center"},Ie={key:1,class:"w-full flex flex-col gap-3"},Pe={class:"my-3"},He={key:1},$e={key:2,class:"w-full grid grid-cols-4 md:grid-cols-6 justify-items-center"},Oe={key:1,class:"mt-5 text-center text-xl md:text-3xl font-bold"},Ne={class:"text-purple-500"},Re={key:0,class:"text-blue-500 font-bold"},Be={key:1,class:"text-blue-500 font-bold"},Le={key:2,class:"text-blue-500 font-bold"},Fe=M({__name:"Patience",setup(_){const n=U(K).greaterOrEqual("lg"),D=Q(),{difficulty:w,gameStatus:p,score:x,turns:b,formattedTime:C,personalBest:E}=B(D),{currentHighscorePosition:P,hasImprovedHighscorePosition:A,hasImprovedPersonalBest:H}=oe(V.PATIENCE),{start:I,$reset:f,updatePatienceHighscore:$}=D,{isLoggedIn:T}=B(le()),y=F(!1),m=F(!1);return(j,a)=>(t(),h(z,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Patience",description:"Play solo."},{right:R(()=>[s(ne,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:a[0]||(a[0]=u=>y.value=!0)})]),default:R(()=>[l("div",Ce,[!m.value&&e(p)===e(k).HAS_NOT_STARTED?(t(),d("div",Ae,[a[5]||(a[5]=l("div",{class:"w-full md:w-1/2 mb-5 text-pink-300"},[l("p",{class:"mb-3 text-xl text-center"},"Welcome to Patience!"),l("div",{class:"ms-3"},[l("p",{class:"text-red-400"},"1. Click a card to select it."),l("p",{class:"text-orange-400"},"2. Click another to move the selected card."),l("p",{class:"text-yellow-400"},"3. You can also drag cards, but the animations are not yet perfect."),l("p",{class:"text-green-400 font-bold"},"Enjoy!")])],-1)),s(ae,{class:"w-full md:w-1/2",name:"difficulty",label:"Difficulty",modelValue:e(w),"onUpdate:modelValue":a[1]||(a[1]=u=>re(w)?w.value=u:null),options:[{label:"Easy",value:"easy"},{label:"Hard",value:"hard"}]},null,8,["modelValue"])])):g("",!0),e(p)===e(k).HAS_STARTED?(t(),d("div",Ie,[l("div",Pe,[l("p",null,"Time: "+O(e(C)),1),l("p",null,"Turns: "+O(e(b)),1),l("p",null,"Score: "+O(e(x)),1)]),l("div",{class:N(["w-full grid gap-1 justify-items-center",e(n)?"grid-cols-8":"grid-cols-7"])},[e(n)?g("",!0):(t(),h(o,{key:0,"deck-type":e(r).STOCK_CLOSED},null,8,["deck-type"])),s(o,{"deck-type":e(r).STOCK_OPEN},null,8,["deck-type"]),a[6]||(a[6]=l("div",null,null,-1)),e(n)?(t(),d("div",He)):g("",!0),s(o,{"deck-type":e(r).HEARTS,"card-type":e(i).HEARTS},null,8,["deck-type","card-type"]),s(o,{"deck-type":e(r).SPADES,"card-type":e(i).SPADES},null,8,["deck-type","card-type"]),s(o,{"deck-type":e(r).DIAMONDS,"card-type":e(i).DIAMONDS},null,8,["deck-type","card-type"]),s(o,{"deck-type":e(r).CLUBS,"card-type":e(i).CLUBS},null,8,["deck-type","card-type"])],2),e(p)===e(k).HAS_STARTED?(t(),d("div",{key:0,class:N(["w-full grid gap-1 justify-items-center",e(n)?"grid-cols-8":"grid-cols-7"])},[e(n)?(t(),h(o,{key:0,"deck-type":e(r).STOCK_CLOSED},null,8,["deck-type"])):g("",!0),s(o,{"deck-type":e(r).PILE1},null,8,["deck-type"]),s(o,{"deck-type":e(r).PILE2},null,8,["deck-type"]),s(o,{"deck-type":e(r).PILE3},null,8,["deck-type"]),s(o,{"deck-type":e(r).PILE4},null,8,["deck-type"]),s(o,{"deck-type":e(r).PILE5},null,8,["deck-type"]),s(o,{"deck-type":e(r).PILE6},null,8,["deck-type"]),s(o,{"deck-type":e(r).PILE7},null,8,["deck-type"])],2)):g("",!0)])):e(p)===e(k).HAS_FINISHED?(t(),d("div",$e,[s(o,{class:"md:col-start-2","deck-type":e(r).HEARTS,"card-type":e(i).HEARTS},null,8,["deck-type","card-type"]),s(o,{"deck-type":e(r).SPADES,"card-type":e(i).SPADES},null,8,["deck-type","card-type"]),s(o,{"deck-type":e(r).DIAMONDS,"card-type":e(i).DIAMONDS},null,8,["deck-type","card-type"]),s(o,{"deck-type":e(r).CLUBS,"card-type":e(i).CLUBS},null,8,["deck-type","card-type"])])):g("",!0)]),m.value?(t(),h(de,{key:0,"game-id":e(V).PATIENCE,unit:"point"},null,8,["game-id"])):e(p)===e(k).HAS_FINISHED?(t(),d("div",Oe,[l("p",Ne,"You won with "+O(e(x))+" points!",1),e(A)&&e(P)===1?(t(),d("p",Re," HIGHSCORE! ")):e(A)?(t(),d("p",Be," LEADERBOARD IMPROVEMENT! ")):e(H)?(t(),d("p",Le," PERSONAL BEST! ")):g("",!0)])):g("",!0),s(ie,{class:N({"flex flex-col mt-[25vh] items-center justify-end":e(p)===e(k).HAS_STARTED}),"is-viewing-highscores":m.value,"onUpdate:isViewingHighscores":a[2]||(a[2]=u=>m.value=u),"has-solo":"","is-solo":"","has-multiplayer":!1,"is-multiplayer":!1,"is-owner":!1,"is-main-menu":e(p)===e(k).HAS_NOT_STARTED,"has-game-started":e(p)>=e(k).HAS_STARTED,"is-game-over":e(p)===e(k).HAS_FINISHED,onPlaySolo:e(I),onRestart:e(f),onGoBack:e(f)},null,8,["class","is-viewing-highscores","is-main-menu","has-game-started","is-game-over","onPlaySolo","onRestart","onGoBack"]),s(pe,{"is-logged-in":e(T),"is-solo":"","is-game-over":e(p)===e(k).HAS_FINISHED,"final-score":e(x),"personal-best":e(E),"redirect-route":e(ce).GAMES_PATIENCE,onUpdateHighscore:a[3]||(a[3]=u=>e($)())},null,8,["is-logged-in","is-game-over","final-score","personal-best","redirect-route"]),s(ue,{"game-id":e(V).PATIENCE,"is-open":y.value,"onUpdate:isOpen":a[4]||(a[4]=u=>y.value=u)},null,8,["game-id","is-open"])]),_:1}))}});export{Fe as default};
