import{V as N,a as S}from"./TextField.vue_vue_type_script_setup_true_lang-CJc43uTT.js";import{M as _,q as s,cn as r,aC as A,aK as c,u as D,v as i,b9 as v,s as V,bH as g,at as k,aZ as I,t as M}from"../bundle.js";const O={class:"m-4"},R=["for"],z=_({__name:"SelectField",props:{id:{},name:{},label:{},modelValue:{},placeholder:{},error:{},rules:{},options:{},multiple:{type:Boolean}},emits:["update:modelValue","update:arrayValue","update:error"],setup(h,{expose:C,emit:B}){const a=h,u=B,d=s(()=>(a.rules??[]).some(e=>e.type===N.Required)),t=s({get:()=>{if(a.multiple){const e=Array.isArray(a.modelValue)?a.modelValue:[];return e.length?e:d.value?a.options.length?[a.options[0].value]:[]:[]}else{const e=typeof a.modelValue=="string"||typeof a.modelValue=="number"?a.modelValue:"";return e||(a.options.length?a.options[0].value:"")}},set:e=>{u("update:modelValue",r(e)[0]),u("update:arrayValue",r(e))}}),q=s(()=>a.label+(d.value?" *":"")),b=s(()=>a.name+(a.id?"."+a.id:"")),p=s(()=>a.options.find(({value:e})=>e===t.value)),f=s(()=>{var e,o,l;return[((e=p.value)==null?void 0:e.background)??"bg-transparent",(o=p.value)!=null&&o.background?"bg-opacity-90":"bg-opacity-40",((l=p.value)==null?void 0:l.text)??"text-black"]}),w=s(()=>r(t.value).map(e=>{var o;return(o=a.options.find(l=>l.value===e))==null?void 0:o.label}).join(", "));return A(()=>{d.value&&(u("update:modelValue",r(t.value)[0]),u("update:arrayValue",r(t.value)))}),C({test:async()=>{const e=a.rules||[];let o="";for(const l of r(t.value)){const n={value:l.toString()},y=e.filter(m=>!m.test(n)).map(m=>m.error(n))||[];if(y[0]){o=y[0];break}}u("update:error",o)}}),(e,o)=>(c(),D("div",O,[i("label",{class:"block text-sm font-bold mb-2",for:b.value},v(q.value),9,R),i("div",null,[(c(),V(I(e.multiple?"PrimeMultiSelect":"PrimeDropdown"),{inputId:b.value,modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=l=>t.value=l),placeholder:e.placeholder??"No option selected",class:"w-full p-input p-0",multiple:e.multiple,options:e.options,optionValue:"value",pt:{trigger:{class:f.value}}},{value:g(({placeholder:l})=>{var n;return[i("span",{class:k(["block w-full p-2",...f.value])},v((e.multiple?w.value:(n=p.value)==null?void 0:n.label)||l),3)]}),option:g(({option:l})=>[i("span",{class:k(["w-full p-2",l.background,l.background?"bg-opacity-90":"bg-opacity-40",l.text])},v(l.label),3)]),_:1},8,["inputId","modelValue","placeholder","multiple","options","pt"]))]),e.error?(c(),V(S,{key:0,name:e.name,error:e.error},null,8,["name","error"])):M("",!0)]))}});export{z as _};
