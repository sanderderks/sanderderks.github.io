import{_ as he}from"./c-Dialog.vue_vue_type_script_setup_true_lang-CDjfIsRS.js";import{_ as Oe}from"./c-Page.vue_vue_type_script_setup_true_lang-BSUhAcQR.js";import{d as N,u as _e,a as Se,b as pe,c as X,e as Z,s as D,f as O,o as xe,i as Me,F as Ae,R as z,g as S,h as e,j as n,k as c,_ as q,l as x,m as T,B as Re,n as Ne,p as U,q as j,r as Y,t as me,v as i,w as ke,x as ue,y as K,z as V,A as H,C as oe,D as ve,E as je,G as we,H as Ge,I as Fe,J as ce,K as ee,L as le,M as ze,N as Q,O as qe,P as Ue,Q as He,S as F,T as se,U as Je,V as Pe,W as ae,X as We,Y as $e,Z as Ye,$ as Qe,a0 as Ke,a1 as ne,a2 as re,a3 as ie,a4 as de,a5 as Xe}from"../bundle.js";import{_ as Ze}from"./c-BackButton.vue_vue_type_script_setup_true_lang-D1kRCswZ.js";import{_ as Be,a as Ce,u as et}from"./c-BlogPost.vue_vue_type_script_setup_true_lang-DLU9fcyx.js";import{u as tt}from"./c-useUsers-C85A5PIt.js";const ot={key:0,class:"flex justify-center mt-5"},lt={key:1,class:"flex flex-col gap-3"},st=N({__name:"BlogDetails",emits:["createClicked","editClicked","deleteClicked"],setup(t){const v=_e(),$=Se(),f=pe(),k=X(),a=Z(),{routeLoading:p}=D(f),{isLoggedIn:C}=D(k),{blogPosts:w,blogReactions:h,isBlogPostsFetchLoading:g}=D(a),{fetchBlogPost:y}=a,m=O(()=>v.params.postId);return xe(async()=>{var b;if(h.value.unread=[],m.value)if(((b=w.value.data.single)==null?void 0:b.id)!==m.value){const l=await y(m.value);if(Me(l)&&l===Ae.PERMISSION_DENIED&&!C.value){$.push({name:z.LOGIN,params:{redirect:JSON.stringify({name:z.BLOG_DETAILS,params:{postId:m.value}})}});return}}else w.value.data.single}),(b,l)=>e(g)?(n(),S("div",ot,[c(q,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:"",label:"Loading..."})])):(n(),S("div",lt,[c(Ze,{"back-route":e(z).BLOG,label:"Back to other posts"},null,8,["back-route"]),e(w).data.single?(n(),x(Be,{key:0,post:e(w).data.single,onEditClicked:l[0]||(l[0]=o=>b.$emit("editClicked",e(w).data.single)),onDeleteClicked:l[1]||(l[1]=o=>b.$emit("deleteClicked",e(w).data.single))},null,8,["post"])):T("",!0)]))}});var at=`
    .p-card {
        background: dt('card.background');
        color: dt('card.color');
        box-shadow: dt('card.shadow');
        border-radius: dt('card.border.radius');
        display: flex;
        flex-direction: column;
    }

    .p-card-caption {
        display: flex;
        flex-direction: column;
        gap: dt('card.caption.gap');
    }

    .p-card-body {
        padding: dt('card.body.padding');
        display: flex;
        flex-direction: column;
        gap: dt('card.body.gap');
    }

    .p-card-title {
        font-size: dt('card.title.font.size');
        font-weight: dt('card.title.font.weight');
    }

    .p-card-subtitle {
        color: dt('card.subtitle.color');
    }
`,nt={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},rt=Re.extend({name:"card",style:at,classes:nt}),it={name:"BaseCard",extends:Ne,style:rt,provide:function(){return{$pcCard:this,$parentInstance:this}}},Ie={name:"Card",extends:it,inheritAttrs:!1};function dt(t,v,$,f,k,a){return n(),S("div",j({class:t.cx("root")},t.ptmi("root")),[t.$slots.header?(n(),S("div",j({key:0,class:t.cx("header")},t.ptm("header")),[Y(t.$slots,"header")],16)):T("",!0),U("div",j({class:t.cx("body")},t.ptm("body")),[t.$slots.title||t.$slots.subtitle?(n(),S("div",j({key:0,class:t.cx("caption")},t.ptm("caption")),[t.$slots.title?(n(),S("div",j({key:0,class:t.cx("title")},t.ptm("title")),[Y(t.$slots,"title")],16)):T("",!0),t.$slots.subtitle?(n(),S("div",j({key:1,class:t.cx("subtitle")},t.ptm("subtitle")),[Y(t.$slots,"subtitle")],16)):T("",!0)],16)):T("",!0),U("div",j({class:t.cx("content")},t.ptm("content")),[Y(t.$slots,"content")],16),t.$slots.footer?(n(),S("div",j({key:1,class:t.cx("footer")},t.ptm("footer")),[Y(t.$slots,"footer")],16)):T("",!0)],16)],16)}Ie.render=dt;const ut={class:"flex gap-3"},ct={class:"min-h-[50vh] flex flex-col"},pt={class:"flex justify-between h-fit mt-2 gap-2"},mt={class:"flex flex-wrap gap-3"},vt={class:"relative mt-5 min-h-[20vh] max-h-screen flex flex-col justify-end"},ft={class:"relative min-h-[20vh] max-h-full flex-grow"},gt={class:"flex flex-col gap-1"},yt={class:"flex justify-center mt-5"},bt={class:"flex justify-center mt-3"},kt=N({__name:"BlogPostOverview",props:{post:{}},emits:["editClicked","deleteClicked"],setup(t){const v=t,$=pe(),f=X(),k=me(),{routeLoading:a,routeLoadingId:p}=D($),{publicUsers:C}=D(k),{isOwner:w}=D(f),h=i(v.post.archived),g=O(()=>{var l;return(l=v.post.allowedUserIds)!=null&&l.length?C.value.filter(o=>{var s;return(s=v.post.allowedUserIds)==null?void 0:s.includes(o.id)}):[]}),y=O(()=>{const l=ke(v.post.date);return v.post.dateUpdated?l+` - updated ${ke(v.post.dateUpdated)}`:l}),m=O(()=>{const l=[];return v.post.datePinned&&l.push({value:"Pinned",severity:"success",rounded:!1}),v.post.locked&&l.push({value:"Locked",severity:"danger",rounded:!1,icon:"pi pi-lock"}),v.post.archived&&l.push({value:"Archived",severity:"warning",rounded:!1,icon:"pi pi-file-excel"}),l}),b=()=>{const l=document.createElement("textarea"),{protocol:o,hostname:s,port:r}=window.location,I=`${o}//${s}`+(s==="localhost"?`:${r}`:"");l.value=`${I}#${Fe.BLOG.path}/${v.post.id}`,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),ce.success("Copied link!")};return(l,o)=>(n(),x(ue,{id:t.post.id,class:K([{"min-h-[50vh]":!h.value},"border-4 border-transparent","!rounded-primary",t.post.colorSecondary||t.post.colorPrimary||"bg-secondary-900",t.post.opacitySecondary||"bg-opacity-50"]),title:t.post.title,subTitle:y.value,tags:m.value,loading:t.post.loading,isCollapsed:h.value,clickable:"",route:{name:e(z).BLOG_DETAILS,params:{postId:t.post.id}}},{right:V(()=>[U("div",ut,[h.value?e(w)?(n(),x(Ce,{key:1,onEditClicked:o[0]||(o[0]=s=>l.$emit("editClicked")),onDeleteClicked:o[1]||(o[1]=s=>l.$emit("deleteClicked"))})):T("",!0):(n(),x(q,{key:0,class:"border-none h-fit",variant:"neutral",icon:"pi pi-copy",onClick:b}))])]),default:V(()=>{var s;return[U("div",ct,[U("div",pt,[U("div",mt,[g.value.length?(n(),S(H,{key:0},[c(e(oe),{class:"h-fit !p-0 !px-4 !py-1 !bg-red-800 !bg-opacity-50",icon:"pi pi-user",label:g.value[0].displayName,rounded:""},null,8,["label"]),g.value.length>1?(n(),x(e(oe),{key:0,class:"h-fit !p-0 !px-4 !py-1 !bg-red-800 !bg-opacity-50",icon:"pi pi-user",label:"You",rounded:""})):T("",!0),g.value.length>2?(n(),x(e(oe),{key:1,class:"h-fit !p-0 !px-4 !py-1 !bg-red-800 !bg-opacity-50",label:`${g.value.length-2} others`,rounded:""},null,8,["label"])):T("",!0)],64)):T("",!0)]),e(w)?(n(),S("div",{key:0,class:K(["flex justify-end ms-5",(s=t.post.allowedUserIds)!=null&&s.length?"flex-col md:flex-row":"flex-row"])},[c(Ce,{onEditClicked:o[2]||(o[2]=r=>l.$emit("editClicked")),onDeleteClicked:o[3]||(o[3]=r=>l.$emit("deleteClicked"))})],2)):T("",!0)]),U("div",vt,[o[6]||(o[6]=U("div",{class:"absolute inset-0 rounded-primary bg-gradient-to-t from-neutral-500 to-transparent"},null,-1)),U("div",ft,[c(e(Ie),{class:K(["z-10 min-h-[20vh] p-5 text-neutral-300",t.post.colorPrimary,t.post.opacityPrimary||"bg-opacity-50"])},{content:V(()=>[U("div",gt,[(n(!0),S(H,null,ve(t.post.content.filter((r,I)=>I<2),r=>(n(),x(je,{key:r.id,class:"max-h-[150px] overflow-hidden",post:t.post,block:r},null,8,["post","block"]))),128))])]),_:1},8,["class"])])]),U("div",yt,[c(q,{class:"w-full md:w-1/2",variant:"neutral",label:"Read more",loading:e(a)===e(z).BLOG_DETAILS&&e(p)===t.post.id,onClick:o[4]||(o[4]=r=>e(we).push({name:e(z).BLOG_DETAILS,params:{postId:t.post.id}}))},null,8,["loading"])]),U("div",bt,[U("p",{class:K(t.post.reactions.length?"text-yellow-400 hover:text-yellow-500 cursor-pointer":"text-neutral-200"),onClick:o[5]||(o[5]=r=>e(we).push({name:e(z).BLOG_DETAILS,params:{postId:t.post.id}}))},Ge(t.post.reactions.length)+" replies ",3)])])]}),_:1},8,["id","class","title","subTitle","tags","loading","isCollapsed","route"]))}}),wt={class:"w-full grid gap-4 md:gap-10 xl:gap-20"},Pt={key:2,class:"w-full flex justify-center mt-5"},$t=N({__name:"BlogPosts",props:{single:{type:Boolean}},emits:["createClicked","editClicked","deleteClicked"],setup(t){const v=X(),$=Z(),{blogPosts:f,visibleBlogPosts:k,isBlogPostsFetchLoading:a}=D($),{firebaseUser:p,isLoggedIn:C,isOwner:w}=D(v),{fetchBlogPosts:h}=$;et();const g=i(),y=i(),m=i(),b=async o=>{var s;f.value.visibility!==o&&(f.value.data[o].length||await h((s=p.value)==null?void 0:s.uid,{visibility:o}),f.value.visibility=o,f.value.isLastPage=!1,le(g.value))},l=async()=>{var s;const o=k.value.length;await h((s=p.value)==null?void 0:s.uid),k.value[o]&&le(y.value[o])};return xe(()=>{f.value.loadedOnce||(C.value?b("private"):f.value.visibility!=="public"&&b("public"),f.value.loadedOnce=!0)}),ee(()=>{var o;return(o=y.value)==null?void 0:o.length},()=>{var o;if((o=y.value)!=null&&o.length&&m.value){const s=k.value.find(r=>r.id===m.value);if(s){const r=k.value.indexOf(s);le(y.value[r]),m.value=void 0}}}),(o,s)=>(n(),S("div",{ref_key:"container",ref:g,class:"flex flex-col gap-5 items-center"},[e(w)?(n(),x(q,{key:0,class:"w-full md:w-1/2",variant:"tertiary",label:"New Post",onClick:s[0]||(s[0]=r=>o.$emit("createClicked"))})):T("",!0),e(C)?(n(),x(e(ze),{key:1,class:"w-full md:w-1/2"},{default:V(()=>[c(q,{class:"w-full",variant:"secondary",outlined:e(f).visibility!=="public",loading:e(f).isLoading.public.fetch,label:"Public Posts",onClick:s[1]||(s[1]=r=>b("public"))},null,8,["outlined","loading"]),c(q,{class:"w-full",variant:"secondary",outlined:e(f).visibility!=="private",loading:e(f).isLoading.private.fetch,label:"Private Posts",onClick:s[2]||(s[2]=r=>b("private"))},null,8,["outlined","loading"])]),_:1})):T("",!0),U("div",wt,[e(k).length?(n(!0),S(H,{key:0},ve(e(k),(r,I)=>(n(),S("div",{key:r.id,ref_for:!0,ref_key:"posts",ref:y},[I===0||r.datePinned?(n(),x(Be,{key:0,post:r,onEditClicked:P=>o.$emit("editClicked",r),onDeleteClicked:P=>o.$emit("deleteClicked",r)},null,8,["post","onEditClicked","onDeleteClicked"])):(n(),x(kt,{key:1,post:r,onEditClicked:P=>o.$emit("editClicked",r),onDeleteClicked:P=>o.$emit("deleteClicked",r)},null,8,["post","onEditClicked","onDeleteClicked"]))]))),128)):e(a)?(n(),x(ue,{key:1,class:"!bg-neutral-600 !bg-opacity-40 !rounded-primary",title:"Loading..."})):(n(),x(ue,{key:2,class:"!bg-red-900 !bg-opacity-40 !rounded-primary",title:"No posts"}))]),e(f).isLastPage?T("",!0):(n(),S("div",Pt,[c(q,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:e(k).length>0&&e(a),label:"Load more posts",onClick:l},null,8,["loading"])]))],512))}}),Ct=N({__name:"BlogPostContentDialog",emits:["update:selected","error"],setup(t,{expose:v,emit:$}){const f=$,k=Q(),{blogPostMutation:a}=D(k),p=i(),C=i(),w=O(()=>[C.value].some(g=>!!g));return v({test:async()=>{await Promise.all([p.value.test()]),f("error",w.value)}}),(g,y)=>(n(),S(H,null,[c(qe,{ref_key:"title",ref:p,class:"w-full",name:"title",label:"Title",placeholder:"Amazing Post",modelValue:e(a).title,"onUpdate:modelValue":y[0]||(y[0]=m=>e(a).title=m),error:C.value,"onUpdate:error":y[1]||(y[1]=m=>C.value=m),rules:[e(Ue).Required],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),c(He,{modelValue:e(a).content,"onUpdate:modelValue":y[2]||(y[2]=m=>e(a).content=m)},null,8,["modelValue"])],64))}}),ht=N({__name:"BlogPostSettingsDialog",emits:["error"],setup(t,{expose:v,emit:$}){const f=$,k=me(),a=Q(),{blogPostMutation:p}=D(a),{allowedPublicUsers:C}=k,{mappedUsers:w}=tt(),h=i(),g=i(),y=i(),m=i(),b=O({get(){return!!p.value.datePinned},set(d){p.value.datePinned=d?new Date:null}}),l=i(),o=i(),s=i(),r=i(),I=O(()=>[l.value,o.value,s.value,r.value].some(d=>!!d)),P=i([]),E=d=>{p.value.allowedUserIds=d},L=async()=>{p.value.allowedUserIds.length&&!P.value.length&&(l.value="Invalid user ID's"),await Promise.all([g.value.test(),y.value.test(),m.value.test()]),f("error",I.value)};return ee(()=>p.value.allowedUserIds,async d=>{P.value=await C(d)},{immediate:!0}),v({test:L}),(d,u)=>(n(),S(H,null,[c(F,{ref_key:"allowedUsers",ref:h,class:"w-full md:w-1/2",name:"allowedUserIds",label:"Allowed users",placeholder:"This post is public","model-value":e(p).allowedUserIds,error:l.value,"onUpdate:error":u[0]||(u[0]=A=>l.value=A),"onUpdate:arrayValue":E,options:e(w),multiple:""},null,8,["model-value","error","options"]),c(se,{ref_key:"pinned",ref:m,class:"w-full md:w-1/2",name:"pinned",label:"Pinned",modelValue:b.value,"onUpdate:modelValue":u[1]||(u[1]=A=>b.value=A)},null,8,["modelValue"]),c(se,{ref_key:"locked",ref:g,class:"w-full md:w-1/2",name:"locked",label:"Locked for commenting",modelValue:e(p).locked,"onUpdate:modelValue":u[2]||(u[2]=A=>e(p).locked=A)},null,8,["modelValue"]),c(se,{ref_key:"archived",ref:y,class:"w-full md:w-1/2",name:"archived",label:"Archived",modelValue:e(p).archived,"onUpdate:modelValue":u[3]||(u[3]=A=>e(p).archived=A)},null,8,["modelValue"])],64))}}),St=N({__name:"BlogPostStylingDialog",emits:["error"],setup(t,{expose:v,emit:$}){const f=$,k=Q(),{blogPostMutation:a}=D(k),p=i(),C=i(),w=i(),h=i(),g=i(),y=i(),m=i(),b=i(),l=i(),o=i(),s=i(),r=i(),I=O(()=>[m.value,b.value,l.value,o.value,s.value,r.value].some(L=>!!L)),P=O(()=>Je(Pe.find(L=>L.value===a.value.colorPrimary)));return v({test:async()=>{await Promise.all([p.value.test(),C.value.test(),w.value.test(),h.value.test(),g.value.test(),y.value.test()]),f("error",I.value)}}),(L,d)=>(n(),S(H,null,[c(F,{ref_key:"colorPrimary",ref:p,class:"w-full md:w-1/2",name:"colorPrimary",label:"Primary Style",modelValue:e(a).colorPrimary,"onUpdate:modelValue":d[0]||(d[0]=u=>e(a).colorPrimary=u),error:m.value,"onUpdate:error":d[1]||(d[1]=u=>m.value=u),options:e(Pe),rules:[e(Ue).Required]},null,8,["modelValue","error","options","rules"]),c(F,{ref_key:"opacityPrimary",ref:h,class:"w-full md:w-1/2",name:"opacityPrimary",label:"Primary Opacity",modelValue:e(a).opacityPrimary,"onUpdate:modelValue":d[2]||(d[2]=u=>e(a).opacityPrimary=u),error:o.value,"onUpdate:error":d[3]||(d[3]=u=>o.value=u),options:e(ae)},null,8,["modelValue","error","options"]),c(F,{ref_key:"colorSecondary",ref:C,class:"w-full md:w-1/2",name:"colorSecondary",label:"Secondary Style",modelValue:e(a).colorSecondary,"onUpdate:modelValue":d[4]||(d[4]=u=>e(a).colorSecondary=u),error:b.value,"onUpdate:error":d[5]||(d[5]=u=>b.value=u),options:P.value},null,8,["modelValue","error","options"]),c(F,{ref_key:"opacitySecondary",ref:g,class:"w-full md:w-1/2",name:"opacitySecondary",label:"Secondary Opacity",modelValue:e(a).opacitySecondary,"onUpdate:modelValue":d[6]||(d[6]=u=>e(a).opacitySecondary=u),error:s.value,"onUpdate:error":d[7]||(d[7]=u=>s.value=u),options:e(ae)},null,8,["modelValue","error","options"]),c(F,{ref_key:"colorTertiary",ref:w,class:"w-full md:w-1/2",name:"colorTertiary",label:"Tertiary Style",modelValue:e(a).colorTertiary,"onUpdate:modelValue":d[8]||(d[8]=u=>e(a).colorTertiary=u),error:l.value,"onUpdate:error":d[9]||(d[9]=u=>l.value=u),options:e(We)},null,8,["modelValue","error","options"]),c(F,{ref_key:"opacityTertiary",ref:y,class:"w-full md:w-1/2",name:"opacityTertiary",label:"Tertiary Opacity",modelValue:e(a).opacityTertiary,"onUpdate:modelValue":d[10]||(d[10]=u=>e(a).opacityTertiary=u),error:r.value,"onUpdate:error":d[11]||(d[11]=u=>r.value=u),options:e(ae)},null,8,["modelValue","error","options"])],64))}}),xt=N({__name:"BlogPostDialog",emits:["scroll-to-updated"],setup(t,{emit:v}){const $=v,f=X(),k=Z(),a=Q(),{firebaseUser:p}=D(f),{isBlogPostsMutationLoading:C}=D(k),{createBlogPost:w,updateBlogPost:h,deleteFilesOfBlogPost:g,toggleBlogPostVisibility:y}=k,{getBlogPostMutationContent:m,getBlogPostMutationStyling:b,getBlogPostMutationSettings:l}=a,{isOpen:o,blogPostOriginal:s,blogPostMutationId:r,blogPostMutation:I,hasBlogPostMutationContentChanges:P,hasBlogPostMutationStylingChanges:E,hasBlogPostMutationSettingsChanges:L}=D(a),d=i(),u=i(),A=i(),fe=i(),ge=i(!1),ye=i(!1),be=i(!1),Ee=O(()=>{var _,B,M,J,W,R;return!!((B=(_=s.value)==null?void 0:_.allowedUserIds)!=null&&B.length)&&!((M=l().allowedUserIds)!=null&&M.length)||!((W=(J=s.value)==null?void 0:J.allowedUserIds)!=null&&W.length)&&!!((R=l().allowedUserIds)!=null&&R.length)}),Ve=O(()=>{const _=[];return P.value&&_.push("Content"),E.value&&_.push("Styling"),L.value&&_.push("Settings"),_.length?"Update "+$e(_):void 0}),te=O(()=>Ye(s.value)),Te=async()=>{var _,B,M,J,W;if(await Promise.all([u.value.test(),A.value.test(),fe.value.test()]),!(ge.value||ye.value||be.value))if(!s.value)await w(r.value,I.value,(_=p.value)==null?void 0:_.uid)&&(a.close(),$("scroll-to-updated",r.value));else if(Ee.value){const R=r.value;a.isOpen=!1,await y(R,Xe.convert(I.value),s.value.reactions,I.value.allowedUserIds.length?"private":"public",(B=p.value)==null?void 0:B.uid)&&(a.close(),ce.success("Successfully updated Post Visibility"),$("scroll-to-updated",R))}else{const R=r.value;let G=[];P.value&&G.push(await h(R,m(),te.value,(M=p.value)==null?void 0:M.uid)),E.value&&G.push(await h(R,b(),te.value,(J=p.value)==null?void 0:J.uid)),L.value&&(G.push(await h(R,l(),te.value,(W=p.value)==null?void 0:W.uid)),$("scroll-to-updated",R)),G=G.filter(Le=>typeof Le=="string"),G.length&&(ce.success(`Successfully updated Post ${$e(G)}`),a.close())}},De=async()=>{g(I.value,s.value??void 0),a.close()};return ee(I,()=>{a.isMutationEqual()},{deep:!0}),(_,B)=>(n(),x(he,{isOpen:e(o),title:e(s)?"Update Post":"Create Post",description:e(s)?"Update this post":"Create a new post","confirm-text":e(s)?Ve.value:"Create","confirm-loading":e(C),onConfirm:Te,onCancel:De},{default:V(()=>[U("form",{ref_key:"dialog",ref:d,class:"pt-6 mb-4 xl:px-16"},[e(o)?(n(),x(e(Qe),{key:0,"active-index":0,onTabOpen:e(Ke)},{default:V(()=>[c(e(de),{value:"content"},{default:V(()=>[c(e(ne),null,{default:V(()=>[...B[3]||(B[3]=[re(" Content ",-1)])]),_:1}),c(e(ie),{"pt:content":"flex flex-col justify-center items-center gap-3"},{default:V(()=>[c(Ct,{ref_key:"content",ref:u,onError:B[0]||(B[0]=M=>ge.value=M)},null,512)]),_:1})]),_:1}),c(e(de),{value:"styling"},{default:V(()=>[c(e(ne),null,{default:V(()=>[...B[4]||(B[4]=[re(" Styling ",-1)])]),_:1}),c(e(ie),{"pt:content":"flex flex-col justify-center items-center gap-3"},{default:V(()=>[c(St,{ref_key:"styling",ref:A,onError:B[1]||(B[1]=M=>ye.value=M)},null,512)]),_:1})]),_:1}),c(e(de),{value:"settings"},{default:V(()=>[c(e(ne),null,{default:V(()=>[...B[5]||(B[5]=[re(" Settings ",-1)])]),_:1}),c(e(ie),{"pt:content":"flex flex-col justify-center items-center gap-3"},{default:V(()=>[c(ht,{ref_key:"settings",ref:fe,onError:B[2]||(B[2]=M=>be.value=M)},null,512)]),_:1})]),_:1})]),_:1},8,["onTabOpen"])):T("",!0)],512)]),_:1},8,["isOpen","title","description","confirm-text","confirm-loading"]))}}),Ut={class:"grid mt-10 md:mt-15"},Bt={class:"grid justify-center"},It={class:"text-lg md:text-xl text-white"},Et=["innerHTML"],Vt={class:"grid my-5 xl:px-20"},Tt=N({__name:"Blog",setup(t){const v=Se(),$=pe(),f=me(),k=Z(),a=Q(),{menuItems:p,content:C}=D($),{publicUser:w}=D(f),{deleteBlogPost:h}=k,g=i(null),y=i(),m=i(!1),b=i(v.currentRoute.value.params.postId),l=O(()=>{var P;return w.value?[...C.value.blogDescriptionUser.map(E=>E.replace("%USER%",w.value.displayName||"Unknown user")),...((P=p.value.find(E=>E.id==="nfNQM4SMESU2VOkJtcgY"))==null?void 0:P.description)||[]]:C.value.blogDescriptionGuest}),o=()=>{a.openWith(null)},s=P=>{a.openWith(P)},r=P=>{g.value=P,m.value=!0},I=async P=>{await h(P)&&(m.value=!1,g.value=null)};return ee(v.currentRoute,P=>{b.value=P.params.postId}),(P,E)=>(n(),x(Oe,null,{content:V(()=>[U("div",Ut,[U("div",Bt,[(n(!0),S(H,null,ve(l.value,L=>(n(),S("h1",It,[U("span",{innerHTML:L},null,8,Et)]))),256))]),U("div",Vt,[b.value?(n(),x(st,{key:0,onEditClicked:s,onDeleteClicked:r})):(n(),x($t,{key:1,onCreateClicked:o,onEditClicked:s,onDeleteClicked:r})),c(xt,{onScrollToUpdated:E[0]||(E[0]=L=>y.value=L)}),g.value?(n(),x(he,{key:2,title:"Delete Post",isOpen:m.value,description:[` Are you sure you want to delete this post called ' ${g.value.title}'?`,"This cannot be undone."],"confirm-text":"Confirm","confirm-props":{variant:"danger",outlined:!0},onConfirm:E[1]||(E[1]=L=>I(g.value.id)),onCancel:E[2]||(E[2]=L=>m.value=!1)},null,8,["isOpen","description"])):T("",!0)])])]),_:1}))}}),Rt=N({__name:"Blog",setup(t){return(v,$)=>(n(),x(Tt))}});export{Rt as default};
