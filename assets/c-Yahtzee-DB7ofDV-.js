import{d as ue,s as j,w as K,f as P,L as he,g as a,j as t,q as r,m as n,I as v,h as e,k as u,_ as Q,A as Z,a3 as C,aQ as c,C as w,E as R,aR as Se,aS as ne,o as ve,ax as ce,z as q,c as Ie,l as G,a7 as ye,y as fe}from"../bundle.js";import{u as ie,s as pe,G as s,S as p,B as W,_ as Te}from"./c-Dice.vue_vue_type_script_setup_true_lang-CnQjii2n.js";import{u as we,H as Ee,_ as ge}from"./c-useScoreInfo-BuqgYv10.js";import{_ as Oe,a as Ae}from"./c-GameChat.vue_vue_type_script_setup_true_lang-ChPyUbG1.js";import{_ as Ne,a as Pe}from"./c-GameActions.vue_vue_type_script_setup_true_lang-8vcJs5mA.js";import{_ as He}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B6MMtiVw.js";import{_ as me}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-Dice5.vue_vue_type_script_setup_true_lang-DK-8hWiG.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";const Re={class:"h-10"},ke={class:"w-1/2 md:w-1/3"},Le={key:0},xe={key:1,class:"!ps-1 md:ps-1"},$e={key:2},De={key:0},Ge={key:1},Fe={key:2},Ye=ue({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(ee){const S=ee,F=ie(),{gameType:_,gameStatus:O,activePlayerId:E,myPlayerId:k,opponents:I,reroll:A}=j(F),{selectScore:L,getScore:m,getActualValue:i}=F,H=K(!1),x=pe[S.row],$=P(()=>m(S.row,k.value)),y=P(()=>i(S.row,S.hasValue)),D=P(()=>y.value===!1?"X":y.value);return he(()=>y.value,()=>{H.value=!0,setTimeout(()=>{H.value=!1})}),(f,Y)=>(t(),a("tr",Re,[r("th",ke,v(e(x).title),1),$.value?(t(),a("td",Le,v($.value.value===!1?"X":$.value.value),1)):e(E)===e(k)&&e(A)>=0&&!H.value?(t(),a("td",xe,[u(Q,{class:"size-8",variant:y.value===!1||y.value===0?"neutral":void 0,onClick:Y[0]||(Y[0]=N=>e(L)(f.row,y.value))},{default:Z(()=>[C(v(D.value),1)]),_:1},8,["variant"])])):(t(),a("td",$e)),e(_)===e(c).MULTIPLAYER?(t(!0),a(w,{key:3},R(e(I),N=>(t(),a(w,null,[e(m)(f.row,N.userId)?(t(),a("td",De,v(e(m)(f.row,N.userId).value===!1?"X":e(m)(f.row,N.userId).value),1)):e(E)===N.userId&&e(O)>e(s).HAS_STARTED?(t(),a("td",Ge,[u(Q,{class:"size-8",variant:y.value===!1||y.value===0?"neutral":"danger"},{default:Z(()=>[C(v(D.value),1)]),_:1},8,["variant"])])):(t(),a("td",Fe))],64))),256)):n("",!0)]))}}),T=me(Ye,[["__scopeId","data-v-fe496a9d"]]),Me={key:0,class:"text-white"},be={key:1,class:"h-12 md:h-auto text-yellow-500"},Ue={key:3,class:"h-12 md:h-auto text-yellow-500"},Ce={class:"h-12 md:h-auto text-pink-500"},Be={key:0,class:"text-purple-500 font-bold"},Ve={key:1,class:"text-red-500 font-bold"},ze={key:2,class:"text-green-500 font-bold"},We={key:0,class:"h-12 md:h-auto text-red-500 font-bold"},Ze=ue({__name:"Scoreboard",setup(ee){const S=ie(),F=Se(),{gameType:_,gameStatus:O,myPlayerId:E,bonusScore:k,finalScore:I,hasOfValue:A,hasThreeOfAKind:L,hasFourOfAKind:m,hasFullHouse:i,hasSmallStraight:H,hasLargeStraight:x,hasYahtzee:$,diceTotal:y}=j(S),{players:D,opponents:f}=j(F),{currentHighscorePosition:Y,hasImprovedHighscorePosition:N,hasImprovedPersonalBest:te}=we(ne.YAHTZEE),M=K(),b=K(!1),B=P(()=>A.value(1)),V=P(()=>A.value(2)),ae=P(()=>A.value(3)),se=P(()=>A.value(4)),le=P(()=>A.value(5)),oe=P(()=>A.value(6));return ve(()=>{M.value=setInterval(()=>{b.value=!b.value},500)}),ce(()=>{clearInterval(M.value)}),(X,l)=>{var U,J,z;return t(),a("table",{class:q(["w-full mt-5 text-sm md:text-base text-left",e(O)===e(s).HAS_FINISHED?"text-neutral-500":"text-white",e(O)===e(s).HAS_NOT_STARTED?b.value?"even":"odd":void 0])},[e(_)===e(c).MULTIPLAYER?(t(),a("thead",Me,[r("tr",null,[l[0]||(l[0]=r("th",null,null,-1)),l[1]||(l[1]=r("th",null,"You",-1)),(t(!0),a(w,null,R(e(f),o=>(t(),a("th",{key:o.userId,class:q(o.isOnline?"text-green-400":"text-red-400")},v(e(S).getPlayerDisplayName(o.userId)),3))),128))])])):n("",!0),r("tbody",null,[u(T,{row:e(p).ONES,"has-value":B.value},null,8,["row","has-value"]),u(T,{row:e(p).TWOS,"has-value":V.value},null,8,["row","has-value"]),u(T,{row:e(p).THREES,"has-value":ae.value},null,8,["row","has-value"]),u(T,{row:e(p).FOURS,"has-value":se.value},null,8,["row","has-value"]),u(T,{row:e(p).FIVES,"has-value":le.value},null,8,["row","has-value"]),u(T,{row:e(p).SIXES,"has-value":oe.value},null,8,["row","has-value"]),e(O)>=e(s).HAS_FINISHED?(t(),a("tr",{key:0,class:q(["h-12 md:h-auto",e(O)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[l[2]||(l[2]=r("th",null,"TOP",-1)),r("td",null,v(((U=e(I)[e(E)])==null?void 0:U.top)??""),1),e(_)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),o=>{var g;return t(),a("td",null,v(((g=e(I)[o.userId])==null?void 0:g.top)??""),1)}),256)):n("",!0)],2)):n("",!0),e(O)>e(s).HAS_NOT_STARTED&&Object.values(e(k)).some(o=>o.includes(e(W).TOP))?(t(),a("tr",be,[l[3]||(l[3]=r("th",null,"BONUS",-1)),r("td",null,v(e(S).getBonus(e(W).TOP,e(E))||""),1),e(_)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),o=>(t(),a("td",null,v(e(S).getBonus(e(W).TOP,o.userId)||""),1))),256)):n("",!0)])):n("",!0),u(T,{row:e(p).THREE_OF_A_KIND,"has-value":e(L)},null,8,["row","has-value"]),u(T,{row:e(p).FOUR_OF_A_KIND,"has-value":e(m)},null,8,["row","has-value"]),u(T,{row:e(p).FULL_HOUSE,"has-value":e(i)},null,8,["row","has-value"]),u(T,{row:e(p).SMALL_STRAIGHT,"has-value":e(H)},null,8,["row","has-value"]),u(T,{row:e(p).LARGE_STRAIGHT,"has-value":e(x)},null,8,["row","has-value"]),u(T,{row:e(p).YAHTZEE,"has-value":e($)},null,8,["row","has-value"]),u(T,{row:e(p).CHANCE,"has-value":e(y)},null,8,["row","has-value"]),e(O)>=e(s).HAS_FINISHED?(t(),a("tr",{key:2,class:q(["h-12 md:h-auto",e(O)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[l[4]||(l[4]=r("th",null,"BOTTOM",-1)),r("td",null,v(((J=e(I)[e(E)])==null?void 0:J.bottom)??""),1),e(_)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),o=>{var g;return t(),a("td",null,v(((g=e(I)[o.userId])==null?void 0:g.bottom)??""),1)}),256)):n("",!0)],2)):n("",!0),Object.values(e(k)).some(o=>o.length>0)?(t(),a("tr",Ue,[l[5]||(l[5]=r("th",null,"YAHTZEE BONUS",-1)),r("td",null,v(e(S).getBonus(e(W).YAHTZEE,e(E))||""),1),e(_)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),o=>(t(),a("td",null,v(e(S).getBonus(e(W).YAHTZEE,o.userId)||""),1))),256)):n("",!0)])):n("",!0),e(O)===e(s).HAS_FINISHED?(t(),a(w,{key:4},[r("tr",Ce,[l[6]||(l[6]=r("th",null,"TOTAL",-1)),r("td",null,[C(v(((z=e(I)[e(E)])==null?void 0:z.total)??"")+" ",1),e(N)&&e(Y)===1?(t(),a("span",Be," HIGHSCORE! ")):e(N)?(t(),a("span",Ve," LEADERBOARD IMPROVEMENT! ")):e(te)?(t(),a("span",ze," PERSONAL BEST! ")):n("",!0)]),e(_)===e(c).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(f),o=>{var g;return t(),a("td",null,v(((g=e(I)[o.userId])==null?void 0:g.total)??""),1)}),256)):n("",!0)]),e(_)===e(c).MULTIPLAYER?(t(),a("tr",We,[l[7]||(l[7]=r("td",null,null,-1)),(t(!0),a(w,null,R(e(D),o=>{var g,d;return t(),a("td",null,[((g=e(I)[o.userId])==null?void 0:g.winStatus)==="win"?(t(),a(w,{key:0},[C(" WINNER! ")],64)):((d=e(I)[o.userId])==null?void 0:d.winStatus)==="tie"?(t(),a(w,{key:1},[C(" TIE! ")],64)):n("",!0)])}),256))])):n("",!0)],64)):n("",!0)])],2)}}}),de=me(Ze,[["__scopeId","data-v-0e7762c8"]]),je={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Ke={class:"flex flex-wrap justify-center gap-3"},Xe={key:0,class:"w-full"},Je={key:1,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},qe={class:"w-full md:w-1/2 flex justify-center gap-3"},Qe={class:"w-full md:w-1/2 flex justify-center gap-3"},vt=ue({__name:"Yahtzee",setup(ee){const S=ie(),F=Ie(),{gameId:_,creatorId:O,chat:E,players:k,partyName:I,maxPlayers:A,isOwner:L,gameType:m,gameStatus:i,activePlayerId:H,myPlayerId:x,canRoll:$,canReroll:y,dices:D,finalScore:f,personalBest:Y}=j(S),{isLoggedIn:N}=j(F),{start:te,$reset:M,createOnlineGame:b,continueOnlineGame:B,leaveOnlineGame:V,deleteOnlineGame:ae,getPlayerDisplayName:se,roll:le,updateYahtzeeHighscore:oe}=S,X=K(!1),l=K(!1),U=P(()=>A.value?A.value-k.value.length:0),J=()=>{m.value=c.MULTIPLAYER,i.value=s.FINDING_OPPONENT},z=async()=>{_.value&&(L.value?await ae():await V()),M()},o=async()=>{_.value&&await V(),M()};return ve(()=>{_.value&&B(_.value)}),ce(async()=>{_.value&&(await V(),M())}),(g,d)=>(t(),G(fe,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",tags:e(m)===e(c).MULTIPLAYER&&e(I)?[{value:e(I),severity:"danger"}]:void 0,description:e(m)===e(c).SOLO?e(i)===e(s).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:Z(()=>[r("div",je,[u(Q,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:d[0]||(d[0]=re=>X.value=!0)}),u(Pe,{"icon-only":"","is-solo":e(m)===e(c).SOLO,"is-owner":e(L),"has-game-started":e(i)>=e(s).WAITING_FOR_OPPONENTS,"is-game-over":e(i)===e(s).HAS_FINISHED,onDelete:z},null,8,["is-solo","is-owner","has-game-started","is-game-over"])])]),default:Z(()=>{var re;return[r("div",Ke,[e(i)===e(s).FINDING_OPPONENT?(t(),a("div",Xe,[u(Oe,{"allow-party":"",onCreateOnlineGame:d[1]||(d[1]=h=>e(b)([{userId:h}])),onContinueOnlineGame:e(B),onCreateParty:d[2]||(d[2]=(h,_e)=>e(b)([],h,_e)),onJoinParty:e(B)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(i)>=e(s).WAITING_FOR_OPPONENTS&&e(i)<e(s).HAS_FINISHED?(t(),a("div",Je,[r("div",qe,[e(m)===e(c).MULTIPLAYER||e($)||e(y)?(t(),G(Q,{key:0,class:"w-full",variant:"tertiary",disabled:e(H)!==e(x)||e(i)===e(s).HAS_CHOSEN_DICES||e(i)===e(s).WAITING_FOR_OPPONENTS||e(D).every(h=>h.selected),onClick:e(le)},{default:Z(()=>[C(v(U.value?`Waiting for ${U.value} more player${U.value!==1?"s":""}`:e(H)!==e(x)?`${e(se)(e(H))}'s turn`:e(y)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):n("",!0)]),r("div",Qe,[(t(!0),a(w,null,R(e(D),h=>(t(),G(Te,{key:h.id,dice:h},null,8,["dice"]))),128))])])):n("",!0)]),!l.value&&e(i)>=e(s).WAITING_FOR_OPPONENTS?(t(),G(de,{key:0})):n("",!0),!l.value&&e(m)===e(c).MULTIPLAYER&&e(i)>=e(s).WAITING_FOR_OPPONENTS?(t(),G(Ae,{key:1,chats:e(E)??[],onSendChat:d[3]||(d[3]=h=>E.value=[...e(E)??[],h])},null,8,["chats"])):n("",!0),u(Ne,{"is-viewing-highscores":l.value,"onUpdate:isViewingHighscores":d[4]||(d[4]=h=>l.value=h),"has-solo":"","is-solo":e(m)===e(c).SOLO,hasMultiplayer:"",isMultiplayer:e(m)===e(c).MULTIPLAYER,"is-owner":e(L),"is-main-menu":e(i)===e(s).HAS_NOT_STARTED,"has-game-started":e(i)>=e(s).WAITING_FOR_OPPONENTS,"is-game-over":e(i)===e(s).HAS_FINISHED,onPlaySolo:e(te),onPlayMultiplayer:J,onRestart:z,onGoBack:o},null,8,["is-viewing-highscores","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),!l.value&&e(i)===e(s).HAS_NOT_STARTED?(t(),G(de,{key:2})):n("",!0),l.value?(t(),G(Ee,{key:3,"game-id":e(ne).YAHTZEE},null,8,["game-id"])):n("",!0),u(ge,{"is-logged-in":e(N),"is-solo":e(m)===e(c).SOLO,"is-game-over":e(i)===e(s).HAS_FINISHED,"final-score":((re=e(f)[e(x)])==null?void 0:re.total)??0,"personal-best":e(Y),"redirect-route":e(ye).GAMES_YAHTZEE,onUpdateHighscore:d[5]||(d[5]=h=>e(oe)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),u(He,{"game-id":e(ne).YAHTZEE,"is-open":X.value,"onUpdate:isOpen":d[6]||(d[6]=h=>X.value=h)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{vt as default};
