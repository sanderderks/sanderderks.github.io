import{g as i,j as l,ac as X,q as s,d as M,af as U,ag as K,s as B,f as S,l as _,y as z,ap as ee,z as N,A as R,a3 as te,b2 as G,I as O,k as t,m as k,h as e,aN as se,aS as V,c as le,w as Q,T as ae,an as re,a7 as ce,_ as oe}from"../bundle.js";import{u as ne,H as de,_ as ie}from"./c-useScoreInfo-BuqgYv10.js";import{a as F,b as m,D as r,C as p,_ as pe}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-B6MMtiVw.js";import{_ as ue,a as ye}from"./c-GameActions.vue_vue_type_script_setup_true_lang-8vcJs5mA.js";import{_ as L}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import{S as q}from"./c-Spades-HPmwGyS9.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";const me={},fe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function ge(h,c){return l(),i("svg",fe,c[0]||(c[0]=[X('<circle cx="50" cy="30" r="15" fill="black"></circle><circle cx="35" cy="50" r="15" fill="black"></circle><circle cx="65" cy="50" r="15" fill="black"></circle><rect x="45" y="50" width="10" height="30" fill="black"></rect><rect x="40" y="80" width="20" height="10" fill="black"></rect>',5)]))}const Y=L(me,[["render",ge]]),xe={},ke={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function Se(h,c){return l(),i("svg",ke,c[0]||(c[0]=[s("polygon",{points:"50,10 80,50 50,90 20,50",fill:"red"},null,-1)]))}const J=L(xe,[["render",Se]]),ve={},_e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100"};function he(h,c){return l(),i("svg",_e,c[0]||(c[0]=[s("path",{d:"M50 70 Q20 50 20 30 Q20 10 40 10 Q50 10 50 20 Q50 10 60 10 Q80 10 80 30 Q80 50 50 70 Z",fill:"red"},null,-1)]))}const W=L(ve,[["render",he]]),we={key:0,class:"w-full h-full flex justify-center"},be={key:1,class:"relative w-full flex"},Ee={class:"relative flex text-xs md:text-md lg:text-lg font-bold"},Te=M({__name:"Card",props:{card:{},index:{}},emits:["select"],setup(h,{emit:c}){const o=h,D=c,d=U(K).greaterOrEqual("lg"),x=F(),{gameStatus:b,cards:A}=B(x),{isPlayDeck:E}=x,I=S(()=>{if(o.card.hidden)return"";switch(o.card.value){case 13:return"K";case 12:return"Q";case 11:return"J";case 1:return"A";default:return`${o.card.value}`}}),C=S(()=>o.card.hidden?"text-primary":o.card.color==="black"?"text-black":"text-red-500"),P=S(()=>o.index===A.value[o.card.deck].length-1),H=S(()=>b.value===m.HAS_STARTED&&(P.value||!o.card.hidden)),f=S(()=>E(o.card.deck)||d.value&&o.card.deck===r.STOCK_CLOSED),$=S(()=>E(o.card.deck)?20:10),T={[p.HEARTS]:W,[p.SPADES]:q,[p.DIAMONDS]:J,[p.CLUBS]:Y};return(y,g)=>(l(),_(z,{class:N(["z-10 absolute h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px] !p-1 !pt-0 bg-opacity-100 !rounded-primary flex justify-center border border-white",[C.value,y.card.hidden?"bg-violet-950 border-1 !border-yellow-700":"bg-neutral-300",y.card.selected?"border-[3px] !border-red-600":"!border-black",{"draggable-card":H.value&&!y.card.hidden}]]),style:ee({top:f.value?`${$.value*y.index}px`:0}),"title-props":{class:"text-xl"},clickable:H.value,onClick:g[0]||(g[0]=j=>D("select"))},{fullControl:R(()=>[y.card.hidden?(l(),i("div",we,g[1]||(g[1]=[s("div",{class:"flex flex-col justify-center"},[s("p",{class:"mb-2 text-5xl text-yellow-300"},"?")],-1)]))):(l(),i("div",be,[s("div",Ee,[(l(),_(G(T[y.card.type]),{class:"mt-[5px] sm:mt-[1px] h-[10px] w-[10px] sm:h-[20px] sm:w-[20px] md:h-[25px] md:w-[25px]"})),te(" "+O(I.value),1)]),(l(),_(G(T[y.card.type]),{class:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[25px] sm:w-[35px] md:w-[50px]"}))]))]),_:1},8,["class","style","clickable"]))}}),De={class:"absolute h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px]"},Ae=M({__name:"CardDeck",props:{deckType:{},cardType:{}},setup(h){const c=h,D=U(K).greaterOrEqual("md"),w=F(),{cards:d}=B(w),{shuffle:x,selectCard:b,selectEmptyDeck:A,selectFinalDeck:E,deselectAllCards:I,isPlayDeck:C,isFinalDeck:P}=w,H={[p.HEARTS]:W,[p.SPADES]:q,[p.DIAMONDS]:J,[p.CLUBS]:Y},f=S(()=>d.value[c.deckType]),$=S(()=>!f.value.length&&!c.cardType),T=S(()=>$.value&&c.deckType!==r.STOCK_OPEN),y=()=>{T.value&&A(c.deckType)},g=()=>{I()},j=a=>{a.added&&(b(a.added.element),f.value.length?b(f.value[f.value.length-1]):C(c.deckType)?A(c.deckType):P(c.deckType)&&E(c.deckType))};return(a,u)=>(l(),i("div",{class:N(["relative h-[90px] w-[40px] xs:h-[100px] xs:w-[50px] sm:h-[110px] sm:w-[60px] lg:h-[120px] lg:w-[80px]",{"border border-neutral-500":f.value.length===0,"cursor-pointer":T.value}]),onClick:y},[t(e(se),{list:[...f.value],itemKey:v=>`${v.type}.s${v.value}`,group:"patience",draggable:".draggable-card",delay:e(D)?0:100,onStart:g,onChange:j,onEnd:g},{item:R(({element:v,index:Z})=>[t(Te,{card:v,index:Z,onSelect:Ge=>e(b)(v)},null,8,["card","index","onSelect"])]),header:R(()=>[s("div",De,[a.cardType?(l(),_(G(H[a.cardType]),{key:0,class:"absolute left-1/2 transform -translate-x-1/2 w-[50px] cursor-pointer",onClick:u[0]||(u[0]=v=>e(E)(a.deckType))})):a.deckType===e(r).STOCK_CLOSED?(l(),i("div",{key:1,class:"w-full h-full flex justify-center",onClick:u[1]||(u[1]=(...v)=>e(x)&&e(x)(...v))},u[2]||(u[2]=[s("div",{class:"flex flex-col justify-center"},[s("p",{class:"text-neutral-300 text-xs md:text-md lg:text-lg mb-2"},"Shuffle")],-1)]))):k("",!0)])]),_:1},8,["list","itemKey","delay"])],2))}}),n=L(Ae,[["__scopeId","data-v-1f64f67d"]]),Ce={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},He={class:"flex justify-center"},Ie={key:0,class:"w-full flex flex-wrap gap-3 justify-center"},Pe={key:1,class:"w-full flex flex-col gap-3"},$e={class:"my-3"},Oe={key:1},Ne={key:2,class:"w-full grid grid-cols-4 md:grid-cols-6 justify-items-center"},Re={key:1,class:"mt-5 text-center text-xl md:text-3xl font-bold"},Be={class:"text-purple-500"},Le={key:0,class:"text-blue-500 font-bold"},je={key:1,class:"text-blue-500 font-bold"},Ve={key:2,class:"text-blue-500 font-bold"},Ye=M({__name:"Patience",setup(h){const o=U(K).greaterOrEqual("lg"),D=F(),{difficulty:w,gameStatus:d,score:x,turns:b,formattedTime:A,personalBest:E}=B(D),{currentHighscorePosition:I,hasImprovedHighscorePosition:C,hasImprovedPersonalBest:P}=ne(V.PATIENCE),{start:H,$reset:f,updatePatienceHighscore:$}=D,{isLoggedIn:T}=B(le()),y=Q(!1),g=Q(!1);return(j,a)=>(l(),_(z,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Patience",description:"Play solo."},{right:R(()=>[s("div",Ce,[t(oe,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:a[0]||(a[0]=u=>y.value=!0)}),t(ye,{"icon-only":"","is-solo":"","is-owner":!1,"has-game-started":e(d)>=e(m).HAS_STARTED,"is-game-over":e(d)===e(m).HAS_FINISHED,onDelete:e(f)},null,8,["has-game-started","is-game-over","onDelete"])])]),default:R(()=>[s("div",He,[!g.value&&e(d)===e(m).HAS_NOT_STARTED?(l(),i("div",Ie,[a[5]||(a[5]=s("div",{class:"w-full md:w-1/2 mb-5 text-pink-300"},[s("p",{class:"mb-3 text-xl text-center"},"Welcome to Patience!"),s("div",{class:"ms-3"},[s("p",{class:"text-red-400"},"1. Click a card to select it."),s("p",{class:"text-orange-400"},"2. Click another to move the selected card."),s("p",{class:"text-yellow-400"},"3. You can also drag cards, but the animations are not yet perfect."),s("p",{class:"text-green-400 font-bold"},"Enjoy!")])],-1)),t(ae,{class:"w-full md:w-1/2",name:"difficulty",label:"Difficulty",modelValue:e(w),"onUpdate:modelValue":a[1]||(a[1]=u=>re(w)?w.value=u:null),options:[{label:"Easy",value:"easy"},{label:"Hard",value:"hard"}]},null,8,["modelValue"])])):k("",!0),e(d)===e(m).HAS_STARTED?(l(),i("div",Pe,[s("div",$e,[s("p",null,"Time: "+O(e(A)),1),s("p",null,"Turns: "+O(e(b)),1),s("p",null,"Score: "+O(e(x)),1)]),s("div",{class:N(["w-full grid gap-1 justify-items-center",e(o)?"grid-cols-8":"grid-cols-7"])},[e(o)?k("",!0):(l(),_(n,{key:0,"deck-type":e(r).STOCK_CLOSED},null,8,["deck-type"])),t(n,{"deck-type":e(r).STOCK_OPEN},null,8,["deck-type"]),a[6]||(a[6]=s("div",null,null,-1)),e(o)?(l(),i("div",Oe)):k("",!0),t(n,{"deck-type":e(r).HEARTS,"card-type":e(p).HEARTS},null,8,["deck-type","card-type"]),t(n,{"deck-type":e(r).SPADES,"card-type":e(p).SPADES},null,8,["deck-type","card-type"]),t(n,{"deck-type":e(r).DIAMONDS,"card-type":e(p).DIAMONDS},null,8,["deck-type","card-type"]),t(n,{"deck-type":e(r).CLUBS,"card-type":e(p).CLUBS},null,8,["deck-type","card-type"])],2),e(d)===e(m).HAS_STARTED?(l(),i("div",{key:0,class:N(["w-full grid gap-1 justify-items-center",e(o)?"grid-cols-8":"grid-cols-7"])},[e(o)?(l(),_(n,{key:0,"deck-type":e(r).STOCK_CLOSED},null,8,["deck-type"])):k("",!0),t(n,{"deck-type":e(r).PILE1},null,8,["deck-type"]),t(n,{"deck-type":e(r).PILE2},null,8,["deck-type"]),t(n,{"deck-type":e(r).PILE3},null,8,["deck-type"]),t(n,{"deck-type":e(r).PILE4},null,8,["deck-type"]),t(n,{"deck-type":e(r).PILE5},null,8,["deck-type"]),t(n,{"deck-type":e(r).PILE6},null,8,["deck-type"]),t(n,{"deck-type":e(r).PILE7},null,8,["deck-type"])],2)):k("",!0)])):e(d)===e(m).HAS_FINISHED?(l(),i("div",Ne,[t(n,{class:"md:col-start-2","deck-type":e(r).HEARTS,"card-type":e(p).HEARTS},null,8,["deck-type","card-type"]),t(n,{"deck-type":e(r).SPADES,"card-type":e(p).SPADES},null,8,["deck-type","card-type"]),t(n,{"deck-type":e(r).DIAMONDS,"card-type":e(p).DIAMONDS},null,8,["deck-type","card-type"]),t(n,{"deck-type":e(r).CLUBS,"card-type":e(p).CLUBS},null,8,["deck-type","card-type"])])):k("",!0)]),g.value?(l(),_(de,{key:0,"game-id":e(V).PATIENCE,unit:"point"},null,8,["game-id"])):e(d)===e(m).HAS_FINISHED?(l(),i("div",Re,[s("p",Be,"You won with "+O(e(x))+" points!",1),e(C)&&e(I)===1?(l(),i("p",Le," HIGHSCORE! ")):e(C)?(l(),i("p",je," LEADERBOARD IMPROVEMENT! ")):e(P)?(l(),i("p",Ve," PERSONAL BEST! ")):k("",!0)])):k("",!0),t(ue,{class:N({"flex flex-col mt-[25vh] items-center justify-end":e(d)===e(m).HAS_STARTED}),"is-viewing-highscores":g.value,"onUpdate:isViewingHighscores":a[2]||(a[2]=u=>g.value=u),"has-solo":"","is-solo":"","has-multiplayer":!1,"is-multiplayer":!1,"is-owner":!1,"is-main-menu":e(d)===e(m).HAS_NOT_STARTED,"has-game-started":e(d)>=e(m).HAS_STARTED,"is-game-over":e(d)===e(m).HAS_FINISHED,onPlaySolo:e(H),onRestart:e(f),onGoBack:e(f)},null,8,["class","is-viewing-highscores","is-main-menu","has-game-started","is-game-over","onPlaySolo","onRestart","onGoBack"]),t(ie,{"is-logged-in":e(T),"is-solo":"","is-game-over":e(d)===e(m).HAS_FINISHED,"final-score":e(x),"personal-best":e(E),"redirect-route":e(ce).GAMES_PATIENCE,onUpdateHighscore:a[3]||(a[3]=u=>e($)())},null,8,["is-logged-in","is-game-over","final-score","personal-best","redirect-route"]),t(pe,{"game-id":e(V).PATIENCE,"is-open":y.value,"onUpdate:isOpen":a[4]||(a[4]=u=>y.value=u)},null,8,["game-id","is-open"])]),_:1}))}});export{Ye as default};
