import{d as ie,s as W,w as K,f as D,L as Se,g as l,j as t,q as u,m as n,I as f,h as e,k as d,_ as S,A as _,a3 as v,aQ as c,C as w,E as C,aR as we,aS as ue,o as fe,ax as me,z as Q,a as ce,c as Ie,l as y,y as ve,a7 as pe,R as Ne}from"../bundle.js";import{u as de,s as Oe,G as s,S as H,B as M,_ as Ee}from"./c-Dice.vue_vue_type_script_setup_true_lang-B__I9nZi.js";import{_ as ke}from"./c-FindOpponent.vue_vue_type_script_setup_true_lang-QSX0JJyg.js";import{_ as Ae}from"./c-GameChat.vue_vue_type_script_setup_true_lang-BHc_8rRc.js";import{_ as He}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-Dr4EvH1L.js";import{u as Te,H as ge}from"./c-useScoreInfo-DzvOvupf.js";import{_ as _e}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-Dice5.vue_vue_type_script_setup_true_lang-DK-8hWiG.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-B1iNImaq.js";const he={class:"h-10"},Pe={class:"w-1/2 md:w-1/3"},xe={key:0},De={key:1,class:"!ps-1 md:ps-1"},Ge={key:2},Ce={key:0},Re={key:1},$e={key:2},Le=ie({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(ee){const O=ee,R=de(),{gameType:h,gameStatus:I,activePlayerId:g,myPlayerId:$,onlineGameOpponents:E,reroll:P}=W(R),{selectScore:L,getScore:p,getActualValue:r}=R,G=K(!1),F=Oe[O.row],b=D(()=>p(O.row,$.value)),k=D(()=>r(O.row,O.hasValue)),B=D(()=>k.value===!1?"X":k.value);return Se(()=>k.value,()=>{G.value=!0,setTimeout(()=>{G.value=!1})}),(A,Y)=>(t(),l("tr",he,[u("th",Pe,f(e(F).title),1),b.value?(t(),l("td",xe,f(b.value.value===!1?"X":b.value.value),1)):e(g)===e($)&&e(P)>=0&&!G.value?(t(),l("td",De,[d(S,{class:"size-8",variant:k.value===!1||k.value===0?"neutral":void 0,onClick:Y[0]||(Y[0]=x=>e(L)(A.row,k.value))},{default:_(()=>[v(f(B.value),1)]),_:1},8,["variant"])])):(t(),l("td",Ge)),e(h)===e(c).ONLINE?(t(!0),l(w,{key:3},C(e(E),x=>(t(),l(w,null,[e(p)(A.row,x.userId)?(t(),l("td",Ce,f(e(p)(A.row,x.userId).value===!1?"X":e(p)(A.row,x.userId).value),1)):e(g)===x.userId&&e(I)>e(s).HAS_STARTED?(t(),l("td",Re,[d(S,{class:"size-8",variant:k.value===!1||k.value===0?"neutral":"danger"},{default:_(()=>[v(f(B.value),1)]),_:1},8,["variant"])])):(t(),l("td",$e))],64))),256)):n("",!0)]))}}),T=_e(Le,[["__scopeId","data-v-5b3cbf6f"]]),Fe={key:0,class:"text-white"},be={key:1,class:"h-12 md:h-auto text-yellow-500"},Be={key:3,class:"h-12 md:h-auto text-yellow-500"},Ve={class:"h-12 md:h-auto text-pink-500"},Ye={key:0,class:"text-purple-500 font-bold"},je={key:1,class:"text-red-500 font-bold"},Ue={key:2,class:"text-green-500 font-bold"},ze={key:0,class:"h-12 md:h-auto text-red-500 font-bold"},Ze=ie({__name:"Scoreboard",setup(ee){const O=de(),R=we(),{gameType:h,gameStatus:I,myPlayerId:g,bonusScore:$,finalScore:E,hasOfValue:P,hasThreeOfAKind:L,hasFourOfAKind:p,hasFullHouse:r,hasSmallStraight:G,hasLargeStraight:F,hasYahtzee:b,diceTotal:k}=W(O),{onlineGamePlayers:B,onlineGameOpponents:A}=W(R),{currentHighscorePosition:Y,hasImprovedHighscorePosition:x,hasImprovedPersonalBest:te}=Te(ue.YAHTZEE),V=K(),j=K(!1),z=D(()=>P.value(1)),Z=D(()=>P.value(2)),ae=D(()=>P.value(3)),le=D(()=>P.value(4)),se=D(()=>P.value(5)),oe=D(()=>P.value(6));return fe(()=>{V.value=setInterval(()=>{j.value=!j.value},500)}),me(()=>{clearInterval(V.value)}),(X,o)=>{var U,J,q;return t(),l("table",{class:Q(["w-full mt-5 text-sm md:text-base text-left",e(I)===e(s).HAS_FINISHED?"text-neutral-500":"text-white",e(I)===e(s).HAS_NOT_STARTED?j.value?"even":"odd":void 0])},[e(h)===e(c).ONLINE?(t(),l("thead",Fe,[u("tr",null,[o[0]||(o[0]=u("th",null,null,-1)),o[1]||(o[1]=u("th",null,"You",-1)),(t(!0),l(w,null,C(e(A),i=>(t(),l("th",{key:i.userId,class:Q(i.isOnline?"text-green-400":"text-red-400")},f(e(O).getPlayerDisplayName(i.userId)),3))),128))])])):n("",!0),u("tbody",null,[d(T,{row:e(H).ONES,"has-value":z.value},null,8,["row","has-value"]),d(T,{row:e(H).TWOS,"has-value":Z.value},null,8,["row","has-value"]),d(T,{row:e(H).THREES,"has-value":ae.value},null,8,["row","has-value"]),d(T,{row:e(H).FOURS,"has-value":le.value},null,8,["row","has-value"]),d(T,{row:e(H).FIVES,"has-value":se.value},null,8,["row","has-value"]),d(T,{row:e(H).SIXES,"has-value":oe.value},null,8,["row","has-value"]),e(I)>=e(s).HAS_FINISHED?(t(),l("tr",{key:0,class:Q(["h-12 md:h-auto",e(I)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[o[2]||(o[2]=u("th",null,"TOP",-1)),u("td",null,f(((U=e(E)[e(g)])==null?void 0:U.top)??""),1),e(h)===e(c).ONLINE?(t(!0),l(w,{key:0},C(e(A),i=>{var N;return t(),l("td",null,f(((N=e(E)[i.userId])==null?void 0:N.top)??""),1)}),256)):n("",!0)],2)):n("",!0),e(I)>e(s).HAS_NOT_STARTED&&Object.values(e($)).some(i=>i.includes(e(M).TOP))?(t(),l("tr",be,[o[3]||(o[3]=u("th",null,"BONUS",-1)),u("td",null,f(e(O).getBonus(e(M).TOP,e(g))||""),1),e(h)===e(c).ONLINE?(t(!0),l(w,{key:0},C(e(A),i=>(t(),l("td",null,f(e(O).getBonus(e(M).TOP,i.userId)||""),1))),256)):n("",!0)])):n("",!0),d(T,{row:e(H).THREE_OF_A_KIND,"has-value":e(L)},null,8,["row","has-value"]),d(T,{row:e(H).FOUR_OF_A_KIND,"has-value":e(p)},null,8,["row","has-value"]),d(T,{row:e(H).FULL_HOUSE,"has-value":e(r)},null,8,["row","has-value"]),d(T,{row:e(H).SMALL_STRAIGHT,"has-value":e(G)},null,8,["row","has-value"]),d(T,{row:e(H).LARGE_STRAIGHT,"has-value":e(F)},null,8,["row","has-value"]),d(T,{row:e(H).YAHTZEE,"has-value":e(b)},null,8,["row","has-value"]),d(T,{row:e(H).CHANCE,"has-value":e(k)},null,8,["row","has-value"]),e(I)>=e(s).HAS_FINISHED?(t(),l("tr",{key:2,class:Q(["h-12 md:h-auto",e(I)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[o[4]||(o[4]=u("th",null,"BOTTOM",-1)),u("td",null,f(((J=e(E)[e(g)])==null?void 0:J.bottom)??""),1),e(h)===e(c).ONLINE?(t(!0),l(w,{key:0},C(e(A),i=>{var N;return t(),l("td",null,f(((N=e(E)[i.userId])==null?void 0:N.bottom)??""),1)}),256)):n("",!0)],2)):n("",!0),Object.values(e($)).some(i=>i.length>0)?(t(),l("tr",Be,[o[5]||(o[5]=u("th",null,"YAHTZEE BONUS",-1)),u("td",null,f(e(O).getBonus(e(M).YAHTZEE,e(g))||""),1),e(h)===e(c).ONLINE?(t(!0),l(w,{key:0},C(e(A),i=>(t(),l("td",null,f(e(O).getBonus(e(M).YAHTZEE,i.userId)||""),1))),256)):n("",!0)])):n("",!0),e(I)===e(s).HAS_FINISHED?(t(),l(w,{key:4},[u("tr",Ve,[o[6]||(o[6]=u("th",null,"TOTAL",-1)),u("td",null,[v(f(((q=e(E)[e(g)])==null?void 0:q.total)??"")+" ",1),e(x)&&e(Y)===1?(t(),l("span",Ye," HIGHSCORE! ")):e(x)?(t(),l("span",je," LEADERBOARD IMPROVEMENT! ")):e(te)?(t(),l("span",Ue," PERSONAL BEST! ")):n("",!0)]),e(h)===e(c).ONLINE?(t(!0),l(w,{key:0},C(e(A),i=>{var N;return t(),l("td",null,f(((N=e(E)[i.userId])==null?void 0:N.total)??""),1)}),256)):n("",!0)]),e(h)===e(c).ONLINE?(t(),l("tr",ze,[o[7]||(o[7]=u("td",null,null,-1)),(t(!0),l(w,null,C(e(B),i=>{var N,ne;return t(),l("td",null,[((N=e(E)[i.userId])==null?void 0:N.winStatus)==="win"?(t(),l(w,{key:0},[v(" WINNER! ")],64)):((ne=e(E)[i.userId])==null?void 0:ne.winStatus)==="tie"?(t(),l(w,{key:1},[v(" TIE! ")],64)):n("",!0)])}),256))])):n("",!0)],64)):n("",!0)])],2)}}}),Me=_e(Ze,[["__scopeId","data-v-dccb8c90"]]),We={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Ke={class:"flex flex-wrap justify-center gap-3"},Xe={key:1,class:"w-full"},Je={class:"flex justify-center"},qe={key:2,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},Qe={class:"w-full md:w-1/2 flex justify-center gap-3"},et={class:"w-full md:w-1/2 flex justify-center gap-3"},tt={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},at={key:3,class:"flex flex-wrap gap-3 mt-3 justify-center"},_t=ie({__name:"Yahtzee",setup(ee){const O=ce(),R=de(),h=Ie(),{onlineGameId:I,onlineGameChat:g,onlineGamePlayers:$,partyName:E,maxPlayers:P,isOnlineGameOwner:L,gameType:p,gameStatus:r,activePlayerId:G,myPlayerId:F,canRoll:b,canReroll:k,dices:B,finalScore:A,personalBest:Y}=W(R),{firebaseUser:x}=W(h),{start:te,$reset:V,createOnlineGame:j,continueOnlineGame:z,leaveOnlineGame:Z,deleteOnlineGame:ae,getPlayerDisplayName:le,roll:se,updateYahtzeeHighscore:oe}=R,X=K(!1),o=K(!1),U=D(()=>P.value?P.value-$.value.length:0),J=()=>{o.value=!1,V()},q=()=>{o.value=!1,p.value=c.SOLO,te()},i=async()=>{I.value&&await Z(),V()},N=async()=>{o.value=!1,I.value&&(L.value?await ae():await Z()),V()};return fe(()=>{I.value&&z(I.value)}),me(async()=>{I.value&&(await Z(),V())}),(ne,a)=>(t(),y(ve,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",tags:e(p)===e(c).ONLINE&&e(E)?[{value:e(E),severity:"danger"}]:void 0,description:e(p)===e(c).SOLO?e(r)===e(s).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:_(()=>[u("div",We,[d(S,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:a[0]||(a[0]=re=>X.value=!0)}),e(L)&&e(r)!==e(s).HAS_FINISHED?(t(),y(S,{key:0,variant:"danger",icon:"pi pi-trash",onClick:N})):n("",!0)])]),default:_(()=>{var re;return[u("div",Ke,[e(r)===e(s).HAS_NOT_STARTED?(t(),l(w,{key:0},[d(S,{class:"w-full md:w-1/2",onClick:q},{default:_(()=>a[12]||(a[12]=[v(" Play Solo ")])),_:1,__:[12]}),d(S,{class:"w-full md:w-1/2",variant:"purple",onClick:a[1]||(a[1]=()=>{r.value=e(s).FINDING_OPPONENT,p.value=e(c).ONLINE})},{default:_(()=>a[13]||(a[13]=[v(" Play Online ")])),_:1,__:[13]}),e(r)===e(s).HAS_NOT_STARTED&&!o.value?(t(),y(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:a[2]||(a[2]=m=>o.value=!0)},{default:_(()=>a[14]||(a[14]=[v(" View Highscores ")])),_:1,__:[14]})):e(r)===e(s).HAS_NOT_STARTED?(t(),y(S,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[3]||(a[3]=m=>o.value=!1)},{default:_(()=>a[15]||(a[15]=[v(" Go Back ")])),_:1,__:[15]})):n("",!0)],64)):e(r)===e(s).FINDING_OPPONENT?(t(),l("div",Xe,[d(ke,{"allow-party":"",onCreateOnlineGame:a[4]||(a[4]=m=>e(j)([{userId:m}])),onContinueOnlineGame:e(z),onCreateParty:a[5]||(a[5]=(m,ye)=>e(j)([],m,ye)),onJoinParty:e(z)},null,8,["onContinueOnlineGame","onJoinParty"]),u("div",Je,[d(S,{class:"w-full md:w-1/2",variant:"neutral",onClick:i},{default:_(()=>a[16]||(a[16]=[v(" Go Back ")])),_:1,__:[16]})])])):e(r)!==e(s).HAS_FINISHED?(t(),l("div",qe,[u("div",Qe,[e(p)===e(c).ONLINE||e(b)||e(k)?(t(),y(S,{key:0,class:"w-full",variant:"tertiary",disabled:e(G)!==e(F)||e(r)===e(s).HAS_CHOSEN_DICES||e(r)===e(s).WAITING_FOR_OPPONENTS||e(B).every(m=>m.selected),onClick:e(se)},{default:_(()=>[v(f(U.value?`Waiting for ${U.value} more player${U.value!==1?"s":""}`:e(G)!==e(F)?`${e(le)(e(G))}'s turn`:e(k)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):n("",!0)]),u("div",et,[(t(!0),l(w,null,C(e(B),m=>(t(),y(Ee,{key:m.id,dice:m},null,8,["dice"]))),128))])])):n("",!0)]),o.value?(t(),y(ge,{key:0,"game-id":e(ue).YAHTZEE},null,8,["game-id"])):!o.value&&e(r)!==e(s).FINDING_OPPONENT?(t(),y(Me,{key:1})):n("",!0),e(p)===e(c).ONLINE&&e(r)>=e(s).HAS_STARTED?(t(),y(Ae,{key:2,chats:e(g)??[],onSendChat:a[6]||(a[6]=m=>g.value=[...e(g)??[],m])},null,8,["chats"])):n("",!0),u("div",tt,[e(r)>=e(s).WAITING_FOR_OPPONENTS&&e(r)<=e(s).HAS_FINISHED?(t(),l(w,{key:0},[e(p)===e(c).SOLO?(t(),y(S,{key:0,class:"w-full md:w-1/2",variant:e(r)===e(s).HAS_FINISHED?"secondary":"neutral",onClick:J},{default:_(()=>[v(f(e(r)===e(s).HAS_FINISHED?"Play Again":"Restart"),1)]),_:1},8,["variant"])):e(p)===e(c).ONLINE?(t(),l(w,{key:1},[e(L)?(t(),l(w,{key:1},[e(r)!==e(s).HAS_FINISHED?(t(),y(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:i},{default:_(()=>a[17]||(a[17]=[v(" Go Back ")])),_:1,__:[17]})):(t(),y(S,{key:1,class:"w-full md:w-1/2",variant:"danger",onClick:N},{default:_(()=>a[18]||(a[18]=[v(" Play Again ")])),_:1,__:[18]}))],64)):(t(),y(S,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:N},{default:_(()=>[v(f(e(r)===e(s).HAS_FINISHED?"Play Again":"Go Back"),1)]),_:1}))],64)):n("",!0)],64)):n("",!0),e(r)===e(s).HAS_FINISHED&&!o.value?(t(),y(S,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[7]||(a[7]=m=>o.value=!0)},{default:_(()=>a[19]||(a[19]=[v(" View Highscores ")])),_:1,__:[19]})):e(r)===e(s).HAS_FINISHED?(t(),y(S,{key:2,class:"w-full md:w-1/2",variant:"neutral",onClick:a[8]||(a[8]=m=>o.value=!1)},{default:_(()=>a[20]||(a[20]=[v(" View Your Score ")])),_:1,__:[20]})):n("",!0)]),e(r)===e(s).HAS_FINISHED?(t(),l("div",at,[e(x)?e(p)===e(c).SOLO&&(((re=e(A)[e(F)])==null?void 0:re.total)??0)>e(Y)?(t(),y(S,{key:1,class:"w-full md:w-1/2",variant:"primary",onClick:a[10]||(a[10]=m=>e(oe)())},{default:_(()=>a[23]||(a[23]=[v(" Add To Leaderboard ")])),_:1,__:[23]})):n("",!0):(t(),y(ve,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:_(()=>[a[21]||(a[21]=v(" Please ")),u("a",{class:"cursor-pointer",onClick:a[9]||(a[9]=m=>e(O).push({name:e(Ne).LOGIN,params:{redirect:JSON.stringify({name:e(pe).GAMES_YAHTZEE})}}))}," Login "),a[22]||(a[22]=v(" to add your score to the leaderboard. "))]),_:1,__:[21,22]}))])):n("",!0),d(He,{"game-id":e(ue).YAHTZEE,"is-open":X.value,"onUpdate:isOpen":a[11]||(a[11]=m=>X.value=m)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{_t as default};
