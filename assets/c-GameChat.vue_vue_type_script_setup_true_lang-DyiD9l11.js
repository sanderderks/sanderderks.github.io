import{d as J,bc as z,ah as E,q as D,s as w,l as Q,b as s,c as n,e as r,g as O,f as a,J as i,h as x,w as R,D as F,ab as T,i as H,_ as K,z as N,C as m,ag as W,O as X,Q as Z,t as B,x as ee}from"../bundle.js";import{_ as L,a as A}from"./c-UsersBar.vue_vue_type_script_setup_true_lang-DK3PfK4e.js";const le={class:"mb-5 flex flex-col items-center"},te={key:0,class:"w-full xl:w-2/3 flex flex-col gap-3 items-center p-5"},se={key:1,class:"w-full xl:w-2/3 flex flex-col gap-3 items-center p-5"},ae={key:2,class:"w-full xl:w-2/3 flex flex-col gap-3 items-center p-5"},re={class:"w-full xl:w-2/3 flex flex-col md:flex-row justify-between"},ne={key:0,class:"w-full flex flex-col items-center"},oe={class:"w-full flex flex-col gap-3 items-center p-5"},ie={class:"w-full flex flex-col items-center"},ue={key:0,class:"w-full flex flex-col gap-3 items-center p-5"},ce={key:1,class:"w-full flex flex-col gap-3 items-center p-5"},de={class:"w-full flex flex-col gap-3 items-center"},xe=J({__name:"FindOpponent",props:{allowParty:{type:Boolean}},emits:["createOnlineGame","continueOnlineGame","createParty","joinParty"],setup(b,{emit:U}){const p=U,k=z(),h=E(),S=D(),{games:d,gamesLoading:o}=w(k),{onlineUsers:_}=w(h),{firebaseUser:f}=w(S),y=N(""),u=N(-1),c=m(()=>f.value?.uid),Y=m(()=>d.value.filter(t=>t.players.find(l=>l.userId===c.value))),v=m(()=>Y.value.filter(t=>t.maxPlayers===null)),$=m(()=>_.value.filter(t=>!v.value.some(l=>l.players.some(e=>e.userId===t.id)))),C=m(()=>d.value.filter(t=>t.maxPlayers!==null)),P=m(()=>C.value.filter(t=>I(t.id))),V=m(()=>C.value.filter(t=>!I(t.id))),I=t=>C.value.find(e=>e.id===t)?.players.find(e=>e.userId===c.value)!==void 0,G=t=>{const l=C.value.find(e=>e.id===t);return!!l&&!l.isLocked},j=t=>{const l=v.value.find(e=>e.players.some(g=>g.userId===t));l?p("continueOnlineGame",l.id):p("createOnlineGame",t)},q=()=>{p("createParty",y.value,u.value)},M=t=>{p("joinParty",t)};return Q(async()=>{await k.fetchGames()}),(t,l)=>(s(),n("div",le,[v.value.length?(s(),n("div",te,[l[6]||(l[6]=r("h2",{class:"text-2xl font-bold text-center text-nowrap"},"Your 1v1s",-1)),v.value.length?(s(),O(L,{key:0,class:"w-full flex-col items-center !gap-3 !my-0 !pb-5 border border-white",listOfUsers:v.value.flatMap(e=>e.players.filter(g=>g.userId!==a(f)?.uid).map(g=>({id:g.userId}))),"custom-click-action":"","get-color":()=>a(o)?"bg-neutral-500":"bg-purple-500 bg-opacity-50",isClickable:()=>!a(o),onClick:l[0]||(l[0]=e=>j(e))},null,8,["listOfUsers","get-color","isClickable"])):i("",!0)])):i("",!0),P.value.length?(s(),n("div",se,[l[7]||(l[7]=r("h2",{class:"text-2xl font-bold text-center text-nowrap"},"Your parties",-1)),P.value.length?(s(),O(A,{key:0,class:"w-full justify-center !gap-3 !my-0 !py-5 border border-white",list:P.value.map(e=>({id:e.id,label:e.partyName||"Unknown Party"})),"custom-click-action":"","get-color":()=>a(o)?"bg-neutral-500":"bg-purple-500 bg-opacity-50",isClickable:()=>!a(o),onClick:l[1]||(l[1]=e=>M(e))},null,8,["list","get-color","isClickable"])):i("",!0)])):i("",!0),!v.value.length&&!P.value.length&&!a(_).filter(e=>e.id!==c.value).length?(s(),n("div",ae,[...l[8]||(l[8]=[r("h2",{class:"text-center text-nowrap"},"Nobody is online at the moment",-1)])])):i("",!0),r("div",re,[$.value.filter(e=>e.id!==c.value).length?(s(),n("div",ne,[r("div",oe,[l[9]||(l[9]=r("h2",{class:"text-2xl font-bold text-center text-nowrap"},"Start a 1v1",-1)),x(L,{class:"w-full flex-col items-center !gap-3 !my-0 !pb-5 border border-white",listOfUsers:$.value.filter(e=>e.id!==c.value),"custom-click-action":"","get-color":e=>a(o)||e===a(f)?.uid?"bg-neutral-500":"bg-green-500",isClickable:e=>!a(o)&&e!==a(f)?.uid,onClick:l[2]||(l[2]=e=>j(e))},null,8,["listOfUsers","get-color","isClickable"])])])):i("",!0),r("div",ie,[b.allowParty&&V.value.length?(s(),n("div",ue,[l[10]||(l[10]=r("h2",{class:"text-2xl font-bold text-center text-nowrap"},"Join a party",-1)),V.value.length?(s(),O(A,{key:0,class:"w-full flex-col items-center !gap-3 !my-0 !pb-5 border border-white",list:V.value.map(e=>({id:e.id,label:(e.partyName||"Unknown Party")+(e.isLocked?" (full)":"")})),"custom-click-action":"","get-color":e=>a(o)?"bg-neutral-500":G(e)?"bg-green-500":"bg-neutral-500",isClickable:e=>!a(o)&&G(e),onClick:l[3]||(l[3]=e=>M(e))},null,8,["list","get-color","isClickable"])):i("",!0)])):i("",!0),b.allowParty?(s(),n("div",ce,[l[11]||(l[11]=r("h2",{class:"text-2xl font-bold text-center text-nowrap"},"Start a party",-1)),x(K,{class:"w-full min-h-[52px] flex flex-col flex-wrap gap-5 items-center !px-1 !py-2 !pb-5 !rounded-primary border border-white"},{default:R(()=>[r("div",de,[x(F,{class:"w-2/3","input-props":{class:"!placeholder-neutral-600"},name:"partyName",label:"Name",modelValue:y.value,"onUpdate:modelValue":l[4]||(l[4]=e=>y.value=e),type:"text",placeholder:"My Party"},null,8,["modelValue"]),x(T,{class:"w-2/3",name:"partyAmount",label:"Players",modelValue:u.value,"onUpdate:modelValue":l[5]||(l[5]=e=>u.value=e),options:[{value:-1,label:"any"},{value:2,label:"2 players"},{value:3,label:"3 players"},{value:4,label:"4 players"},{value:5,label:"5 players"},{value:10,label:"10 players"}]},null,8,["modelValue"]),x(H,{class:"w-2/3",label:"Create",variant:"green",onClick:q})])]),_:1})])):i("",!0)])])]))}}),fe={key:0,class:"mt-3 md:ms-10 flex flex-col gap-3"},me={class:"flex gap-2"},pe={class:"font-bold"},be=J({__name:"GameChat",props:{chats:{}},emits:["sendChat"],setup(b,{emit:U}){const p=D(),k=W(),{firebaseUser:h}=w(p),{combinedUsers:S}=w(k),d=N(""),o=()=>{if(h.value&&d.value){const f={userId:h.value.uid,message:d.value};_("sendChat",f),d.value=""}},_=U;return(f,y)=>(s(),n("form",{class:"w-full my-10 flex flex-wrap items-center justify-center",action:"",onSubmit:ee(o,["prevent"])},[x(F,{name:"chat",class:"w-full md:w-1/2",inputProps:{autocomplete:"off"},placeholder:"chat...",modelValue:d.value,"onUpdate:modelValue":y[0]||(y[0]=u=>d.value=u)},null,8,["modelValue"]),b.chats.length?(s(),n("div",fe,[(s(!0),n(X,null,Z([...b.chats].reverse().filter((u,c)=>c<3),u=>(s(),n("div",me,[r("p",pe,B(a(S).find(c=>c.id===u.userId)?.displayName??"unknown")+":",1),r("p",null,B(u.message),1)]))),256))])):i("",!0)],32))}});export{xe as _,be as a};
