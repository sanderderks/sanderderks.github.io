import{_ as $,a as ue}from"./c-Bubble.vue_vue_type_script_setup_true_lang-D9wpE-yC.js";import{bO as _e,cG as me,aS as O,q as c,cH as D,cI as ie,cJ as le,cK as ge,cL as ce,M as N,aK as n,u as h,v as a,s as w,bi as e,aZ as we,at as j,bW as X,bC as de,b9 as L,I as m,bH as T,H as b,bU as fe,aC as Ee,aH as ke,F as he,t as x,bT as Se,aV as ye,bZ as He,co as Te}from"../bundle.js";import{_ as be}from"./c-Dice6.vue_vue_type_script_setup_true_lang-lzciAH4f.js";import{u as Ae,H as $e}from"./c-useScoreInfo-C-hY2j4W.js";import{_ as xe}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-DojyyvMS.js";import{_ as ve}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-SwitchField.vue_vue_type_script_setup_true_lang-eHsmfq63.js";import"./c-SelectField.vue_vue_type_script_setup_true_lang-RLKzDD90.js";import"./c-validation-Bf-E2UlI.js";var k=(l=>(l[l.ONES=0]="ONES",l[l.TWOS=1]="TWOS",l[l.THREES=2]="THREES",l[l.FOURS=3]="FOURS",l[l.FIVES=4]="FIVES",l[l.SIXES=5]="SIXES",l[l.THREE_OF_A_KIND=6]="THREE_OF_A_KIND",l[l.FOUR_OF_A_KIND=7]="FOUR_OF_A_KIND",l[l.FULL_HOUSE=8]="FULL_HOUSE",l[l.SMALL_STRAIGHT=9]="SMALL_STRAIGHT",l[l.LARGE_STRAIGHT=10]="LARGE_STRAIGHT",l[l.YAHTZEE=11]="YAHTZEE",l[l.CHANCE=12]="CHANCE",l))(k||{});const P={0:{title:"Ones",section:"top"},1:{title:"Twos",section:"top",multiplier:2},2:{title:"Threes",section:"top",multiplier:3},3:{title:"Fours",section:"top",multiplier:4},4:{title:"Fives",section:"top",multiplier:5},5:{title:"Sixes",section:"top",multiplier:6},6:{title:"Three of a Kind",section:"bottom"},7:{title:"Four of a Kind",section:"bottom"},8:{title:"Full House",section:"bottom",trueValue:25},9:{title:"Small Straight",section:"bottom",trueValue:30},10:{title:"Large Straight",section:"bottom",trueValue:40},11:{title:"Yahtzee",section:"bottom",trueValue:50},12:{title:"Chance",section:"bottom"}},Oe=()=>({score:[],bonus:0,finalScore:null,round:-1,reroll:-1,dices:[...te.map(l=>({...l}))]}),q=_e("yahtzeeStore",()=>{const l=me(),t=O([]),v=O(0),_=O(null),p=O(-1),d=O(-1),i=O([...te.map(s=>({...s}))]),g=c(()=>p.value>=0),F=c(()=>t.value.length===13),C=c(()=>i.value.some(s=>s.isRolling)),A=c(()=>s=>i.value.filter(r=>r.value===s).length),I=c(()=>o(3)),G=c(()=>o(4)),R=c(()=>f(2)&&f(3)?P[8].trueValue??!1:!1),Y=c(()=>W(4)?P[9].trueValue??!1:!1),B=c(()=>W(5)?P[10].trueValue??!1:!1),V=c(()=>f(5)?P[11].trueValue??!1:!1),S=c(()=>{let s=0;return i.value.forEach(r=>{s+=r.value}),s}),Z=c(()=>s=>{let r=0;return t.value.filter(u=>P[u.row].section===s).forEach(u=>{u.value!==!1&&(r+=u.value)}),r}),M=c(()=>s=>l.personalBest(D.YAHTZEE,s)),U=c(()=>s=>l.highscorePosition(D.YAHTZEE,s)),o=s=>{for(let r=1;r<=6;r++)if(i.value.filter(u=>u.value===r).length>=s){let u=0;return i.value.forEach(E=>{u+=E.value}),u}return!1},f=s=>{for(let r=1;r<=6;r++)if(i.value.filter(u=>u.value===r).length===s)return!0;return!1},W=s=>{let r=0,u=s;do{e:for(let E=u-s+1;E<=u;E++)if(i.value.some(pe=>pe.value===E))r++;else break e;if(r===s)return!0;r=0,u++}while(u<=6);return!1};return{score:t,bonus:v,finalScore:_,round:p,reroll:d,dices:i,hasStarted:g,hasFinished:F,isRolling:C,hasOfValue:A,hasThreeOfAKind:I,hasFourOfAKind:G,hasFullHouse:R,hasSmallStraight:Y,hasLargeStraight:B,hasYahtzee:V,diceTotal:S,scoreTotalOf:Z,personalBest:M,highscorePosition:U,reset:s=>{t.value=[],v.value=0,_.value=null,p.value=-1,d.value=-1,i.value=[...te.map(r=>({...r}))],l.setPreviousHighscores(D.YAHTZEE,s)},start:()=>{p.value=0},roll:()=>{const s=l.diceRollSpeed*1e3;d.value++,i.value.forEach(r=>{r.selected||(r.isRolling=!0,setTimeout(()=>{r.value=ie(6),r.isRolling=!1,d.value===2&&(r.selected=!0),i.value.sort((u,E)=>u.value-E.value)},ie(s,s/3)))}),le(ge)},getScore:s=>t.value.find(r=>r.row===s),getActualValue:(s,r)=>{let u=r;if(u===!1)return!1;const E=P[s];return E.multiplier?u*=E.multiplier:E.trueValue&&(u=E.trueValue),u},selectDice:s=>{d.value>=0&&d.value<2&&(s.selected=!s.selected,le(ce))},selectScore:(s,r)=>{if(!C.value){if(V){const u=t.value.find(E=>E.row===11);u&&u.value!==!1&&(v.value+=100)}t.value.push({row:s,value:r}),p.value++,d.value=Oe().reroll,i.value.forEach(u=>{u.selected=!1}),le(ce)}},setPreviousHighscores:(s,r)=>l.setPreviousHighscores(D.YAHTZEE,s,r),fetchGameData:s=>l.fetchGameData(D.YAHTZEE,s),updateHighscores:(s,r,u)=>l.updateHighscores(D.YAHTZEE,s,r,u),sortHighscores:()=>l.sortHighscores(D.YAHTZEE)}},{persist:{enabled:!0}}),te=[{id:1,value:1,selected:!1,isRolling:!1},{id:2,value:2,selected:!1,isRolling:!1},{id:3,value:3,selected:!1,isRolling:!1},{id:4,value:4,selected:!1,isRolling:!1},{id:5,value:5,selected:!1,isRolling:!1}],Ce={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ie=["fill"],Fe=["fill"],Ve=N({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(n(),h("svg",Ce,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ie),a("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Fe)]))}}),De={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Le=["fill"],Ne=["fill"],Re=["fill"],Be=N({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(n(),h("svg",De,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Le),a("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Ne),a("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Re)]))}}),Ge={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Ye=["fill"],Ue=["fill"],Pe=["fill"],Ze=["fill"],Me=N({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(n(),h("svg",Ge,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,Ye),a("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Ue),a("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,Pe),a("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,Ze)]))}}),ze={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},je=["fill"],Xe=["fill"],We=["fill"],Je=["fill"],qe=["fill"],Qe=N({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(n(),h("svg",ze,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,je),a("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,Xe),a("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,We),a("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,Je),a("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,qe)]))}}),Ke={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},el=["fill"],ll=["fill"],tl=["fill"],sl=["fill"],ol=["fill"],al=["fill"],rl=N({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(l){return(t,v)=>(n(),h("svg",Ke,[a("rect",{width:"100",height:"100",rx:"10",ry:"10",fill:t.backgroundColor,stroke:"#000000","stroke-width":"5"},null,8,el),a("circle",{cx:"25",cy:"25",r:"10",fill:t.color},null,8,ll),a("circle",{cx:"25",cy:"75",r:"10",fill:t.color},null,8,tl),a("circle",{cx:"50",cy:"50",r:"10",fill:t.color},null,8,sl),a("circle",{cx:"75",cy:"25",r:"10",fill:t.color},null,8,ol),a("circle",{cx:"75",cy:"75",r:"10",fill:t.color},null,8,al)]))}}),nl=N({__name:"Dice",props:{dice:{}},setup(l){const{selectDice:t}=q(),v={1:Ve,2:Be,3:Me,4:Qe,5:rl,6:be};return(_,p)=>(n(),h("div",{class:j(["cursor-pointer",{"animate-spin":_.dice.isRolling}])},[(n(),w(we(v[_.dice.value]),{color:"black",backgroundColor:_.dice.selected?"#2563eb":"white",width:"40",height:"40",onClick:p[0]||(p[0]=d=>e(t)(_.dice))},null,8,["backgroundColor"]))],2))}}),ul={class:"h-12 md:h-auto"},il={class:"w-1/2 md:w-1/3"},cl={key:0},dl={key:1,class:"!ps-1 md:ps-1"},fl={key:2},hl=N({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(l){const t=l,v=q(),{reroll:_}=X(v),{selectScore:p,getScore:d,getActualValue:i}=v,g=O(!1),F=P[t.row],C=c(()=>d(t.row)),A=c(()=>i(t.row,t.hasValue)),I=c(()=>A.value===!1?"X":A.value);return de(()=>A.value,()=>{g.value=!0,setTimeout(()=>{g.value=!1})}),(G,R)=>(n(),h("tr",ul,[a("th",il,L(e(F).title),1),C.value?(n(),h("td",cl,L(C.value.value===!1?"X":C.value.value),1)):e(_)>=0&&!g.value?(n(),h("td",dl,[m($,{class:"!p-0 !h-10 md:!h-auto",type:A.value===!1||A.value===0?"neutral":void 0,onClick:R[0]||(R[0]=Y=>e(p)(G.row,A.value))},{default:T(()=>[b(L(I.value),1)]),_:1},8,["type"])])):(n(),h("td",fl))]))}}),H=ve(hl,[["__scopeId","data-v-cc8f6556"]]),vl={key:0,class:"h-12 md:h-auto text-red-500"},pl={class:"h-12 md:h-auto text-pink-500"},_l={key:0,class:"text-purple-500 font-bold"},ml={key:1,class:"text-red-500 font-bold"},gl={key:2,class:"text-green-500 font-bold"},wl=N({__name:"Scoreboard",setup(l){const t=q(),v=fe(),{bonus:_,hasStarted:p,hasFinished:d,hasOfValue:i,hasThreeOfAKind:g,hasFourOfAKind:F,hasFullHouse:C,hasSmallStraight:A,hasLargeStraight:I,hasYahtzee:G,diceTotal:R,scoreTotalOf:Y,finalScore:B}=X(t),{firebaseUser:V}=X(v),{currentHighscorePosition:S,hasImprovedHighscorePosition:Z,hasImprovedPersonalBest:M}=Ae(D.YAHTZEE),{updateHighscores:U}=t,o=O(),f=O(!1),W=c(()=>i.value(1)),se=c(()=>i.value(2)),oe=c(()=>i.value(3)),ae=c(()=>i.value(4)),re=c(()=>i.value(5)),ne=c(()=>i.value(6)),z=c(()=>Y.value("top")),Q=c(()=>Y.value("bottom"));return Ee(()=>{o.value=setInterval(()=>{f.value=!f.value},500)}),ke(()=>{clearInterval(o.value)}),de(d,(J,y)=>{var K,ee;J&&J!==y&&(B.value=z.value+(z.value>=63?35:0)+Q.value+_.value,(K=V.value)!=null&&K.uid&&U((ee=V.value)==null?void 0:ee.uid,B.value,_.value),new Audio("/sounds/applause-and-cheer.mp3").play())}),(J,y)=>(n(),h("table",{class:j(["w-full mt-5 text-sm md:text-base text-left",e(d)?"text-neutral-500":"text-white",e(p)?void 0:f.value?"even":"odd"])},[a("tbody",null,[m(H,{row:e(k).ONES,"has-value":W.value},null,8,["row","has-value"]),m(H,{row:e(k).TWOS,"has-value":se.value},null,8,["row","has-value"]),m(H,{row:e(k).THREES,"has-value":oe.value},null,8,["row","has-value"]),m(H,{row:e(k).FOURS,"has-value":ae.value},null,8,["row","has-value"]),m(H,{row:e(k).FIVES,"has-value":re.value},null,8,["row","has-value"]),m(H,{row:e(k).SIXES,"has-value":ne.value},null,8,["row","has-value"]),a("tr",{class:j(["h-12 md:h-auto",e(d)?"text-white":"text-neutral-500"])},[y[0]||(y[0]=a("th",null,"TOP",-1)),a("td",null,L(e(p)?z.value:""),1)],2),a("tr",{class:j(["h-12 md:h-auto",e(d)?z.value>=63?"text-yellow-500":"text-white":"text-neutral-500"])},[y[1]||(y[1]=a("th",null,"BONUS",-1)),a("td",null,L(z.value>=63?35:e(d)?"X":""),1)],2),m(H,{row:e(k).THREE_OF_A_KIND,"has-value":e(g)},null,8,["row","has-value"]),m(H,{row:e(k).FOUR_OF_A_KIND,"has-value":e(F)},null,8,["row","has-value"]),m(H,{row:e(k).FULL_HOUSE,"has-value":e(C)},null,8,["row","has-value"]),m(H,{row:e(k).SMALL_STRAIGHT,"has-value":e(A)},null,8,["row","has-value"]),m(H,{row:e(k).LARGE_STRAIGHT,"has-value":e(I)},null,8,["row","has-value"]),m(H,{row:e(k).YAHTZEE,"has-value":e(G)},null,8,["row","has-value"]),m(H,{row:e(k).CHANCE,"has-value":e(R)},null,8,["row","has-value"]),a("tr",{class:j(["h-12 md:h-auto",e(d)?"text-white":"text-neutral-500"])},[y[2]||(y[2]=a("th",null,"BOTTOM",-1)),a("td",null,L(e(p)?Q.value:""),1)],2),e(d)&&e(B)?(n(),h(he,{key:0},[e(_)?(n(),h("tr",vl,[y[3]||(y[3]=a("th",null,"YAHTZEE BONUS",-1)),a("td",null,L(e(_)),1)])):x("",!0),a("tr",pl,[y[4]||(y[4]=a("th",null,"TOTAL",-1)),a("td",null,[b(L(e(B))+" ",1),e(Z)&&e(S)===1?(n(),h("span",_l," HIGHSCORE! ")):e(Z)?(n(),h("span",ml," LEADERBOARD IMPROVEMENT! ")):e(M)?(n(),h("span",gl," PERSONAL BEST! ")):x("",!0)])])],64)):x("",!0)])],2))}}),El=ve(wl,[["__scopeId","data-v-4169774c"]]),kl={class:"flex flex-wrap justify-center gap-3"},Sl={key:3,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},yl={class:"w-full md:w-1/2 flex justify-center gap-3"},Hl={class:"w-full md:w-1/2 flex justify-center gap-3"},Tl={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},bl={key:2,class:"flex flex-wrap gap-3 mt-3 justify-center"},Ll=N({__name:"Yahtzee",setup(l){const t=Se(),v=q(),_=fe(),{reroll:p,dices:d,hasStarted:i,hasFinished:g,finalScore:F,bonus:C,personalBest:A}=X(v),{firebaseUser:I}=X(_),{start:G,reset:R,roll:Y,updateHighscores:B}=v,V=O(!1),S=O(!1),Z=()=>{S.value=!1,G()},M=()=>{var U;S.value=!1,R((U=I.value)==null?void 0:U.uid)};return(U,o)=>(n(),w(ue,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:"Play solo."},{right:T(()=>[m($,{class:"border-none h-fit",type:"neutral",icon:"pi pi-cog",onClick:o[0]||(o[0]=f=>V.value=!0)})]),default:T(()=>[a("div",kl,[e(i)?x("",!0):(n(),w($,{key:0,class:"w-full md:w-1/2",onClick:Z},{default:T(()=>o[8]||(o[8]=[b(" Start ")])),_:1})),!e(i)&&!S.value?(n(),w($,{key:1,class:"w-full md:w-1/2",type:"neutral",onClick:o[1]||(o[1]=f=>S.value=!0)},{default:T(()=>o[9]||(o[9]=[b(" View Highscores ")])),_:1})):e(i)?e(g)?x("",!0):(n(),h("div",Sl,[a("div",yl,[!e(g)&&e(p)<2?(n(),w($,{key:0,class:"w-full",type:"tertiary",disabled:e(d).every(f=>f.selected),onClick:e(Y)},{default:T(()=>[b(L(e(p)>=0?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):x("",!0)]),a("div",Hl,[(n(!0),h(he,null,ye(e(d),f=>(n(),w(nl,{dice:f},null,8,["dice"]))),256))])])):(n(),w($,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:o[2]||(o[2]=f=>S.value=!1)},{default:T(()=>o[10]||(o[10]=[b(" Go Back ")])),_:1}))]),S.value?(n(),w($e,{key:0,"game-id":e(D).YAHTZEE},null,8,["game-id"])):(n(),w(El,{key:1})),a("div",Tl,[e(i)&&!e(g)?(n(),w($,{key:0,class:"w-full md:w-1/2",type:"neutral",onClick:M},{default:T(()=>o[11]||(o[11]=[b(" Restart ")])),_:1})):x("",!0),e(g)?(n(),w($,{key:1,class:"w-full md:w-1/2",type:"secondary",onClick:M},{default:T(()=>o[12]||(o[12]=[b(" Play Again ")])),_:1})):x("",!0),e(g)&&!S.value?(n(),w($,{key:2,class:"w-full md:w-1/2",type:"neutral",onClick:o[3]||(o[3]=f=>S.value=!0)},{default:T(()=>o[13]||(o[13]=[b(" View Highscores ")])),_:1})):e(g)?(n(),w($,{key:3,class:"w-full md:w-1/2",type:"neutral",onClick:o[4]||(o[4]=f=>S.value=!1)},{default:T(()=>o[14]||(o[14]=[b(" View Your Score ")])),_:1})):x("",!0)]),e(g)?(n(),h("div",bl,[e(I)?e(F)&&e(A)(e(I).uid)<e(F)?(n(),w($,{key:1,class:"w-full md:w-1/2",type:"primary",onClick:o[6]||(o[6]=f=>e(B)(e(I).uid,e(F),e(C)))},{default:T(()=>o[17]||(o[17]=[b(" Add To Leaderboard ")])),_:1})):x("",!0):(n(),w(ue,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:T(()=>[o[15]||(o[15]=b(" Please ")),a("a",{class:"cursor-pointer",onClick:o[5]||(o[5]=f=>e(t).push({name:e(He).LOGIN,params:{redirect:JSON.stringify({name:e(Te).GAMES_YAHTZEE})}}))}," Login "),o[16]||(o[16]=b(" to add your score to the leaderboard. "))]),_:1}))])):x("",!0),m(xe,{"is-open":V.value,"onUpdate:isOpen":o[7]||(o[7]=f=>V.value=f)},null,8,["is-open"])]),_:1}))}});export{Ll as default};
