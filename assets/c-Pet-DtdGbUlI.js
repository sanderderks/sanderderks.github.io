import{_ as L,a as Q}from"./c-Bubble.vue_vue_type_script_setup_true_lang-BShtm6_i.js";import{_ as X}from"./c-Page.vue_vue_type_script_setup_true_lang-BGhe9uNp.js";import{h as Z,A as ee,s as I,c as h,au as N,B as te,_ as ae,x as re,l as u,m as c,p as l,y as W,e as K,r as R,o as le,q as E,k as d,av as se,g as ne,D as G,u as oe,f as ie,n as A,R as M,H as g,t as p,C as T,aw as ue,ax as de,ay as pe,w as V,az as ce}from"../bundle.js";import{_ as fe}from"./c-PetDialog.vue_vue_type_script_setup_true_lang-sajadzaE.js";import{a as me}from"./c-SwitchField.vue_vue_type_script_setup_true_lang-C6J-GyL9.js";import{_ as ye}from"./c-Countdown.vue_vue_type_script_setup_true_lang-CuCP4XWO.js";import{u as ve}from"./c-useCatCalc-6gobbMX9.js";import{_ as ge}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-DateField.vue_vue_type_script_setup_true_lang-ykegzBN_.js";import"./c-FileUpload.vue_vue_type_script_setup_true_lang-DbzAxtwG.js";import"./c-TextField.vue_vue_type_script_setup_true_lang-aj-wueri.js";import"./c-validation-DokkLKHB.js";import"./c-SelectField.vue_vue_type_script_setup_true_lang-BanvuRMQ.js";import"./c-accordiontab.esm-CX-DBziB.js";const Y=t=>{const e=Z(),s=ee(),{isOwner:o,firebaseUser:n}=I(e),{publicUsers:f}=I(s),i=h(()=>N(t)),m=h(()=>{var y;return(y=i.value)!=null&&y.dateOfBirth?(new Date().getTime()-new Date(i.value.dateOfBirth).getTime())/(1e3*60*60*24*365.25):0}),v=h(()=>m.value*12),w=h(()=>m.value*52),O=h(()=>f.value.find(y=>{var _;return y.id===((_=i.value)==null?void 0:_.userId)})),a=h(()=>{var y,_;return((y=i.value)==null?void 0:y.userId)===((_=n.value)==null?void 0:_.uid)||o.value}),S=h(()=>{var P;if(!((P=i.value)!=null&&P.dateOfBirth)||!i.value.dewormingDate)return null;const y=new Date(i.value.dateOfBirth).getTime(),_=1e3*60*60*24*365.25,x=(k,D)=>new Date(y+_/k*D);switch(!0){case w.value<3:return x(52,3);case w.value<5:return x(52,5);case w.value<7:return x(52,7);case w.value<9:return x(52,9);case v.value<3:return x(12,3);case v.value<4:return x(12,4);case v.value<5:return x(12,5);case v.value<6:return x(12,6);default:{const k=(D,j)=>new Date(new Date(i.value.dewormingDate).getTime()+_/D*j);if(i.value.type==="cat")return k(12,i.value.insideCat?6:3);if(i.value.type==="dog")return k(12,3)}}});return{petAgeYears:m,petAgeMonths:v,petAgeWeeks:w,petOwner:O,isMyPet:a,nextDeworming:S}},he=t=>{var w,O;const e=h(()=>N(t)),{petAgeYears:s,petAgeMonths:o,petAgeWeeks:n}=Y(e),f=h(()=>{var S,y;if(((S=e.value)==null?void 0:S.type)!=="cat"||!((y=e.value)!=null&&y.dateOfBirth))return null;const a=s.value;switch(!0){case a<1:return{value:"kitten",label:"Kitten (0-12 months)"};case(a>=1&&a<3):return{value:"junior",label:"Junior (1-2 years)"};case(a>=3&&a<7):return{value:"adult",label:"Adult (3-6 years)"};case(a>=7&&a<11):return{value:"mature",label:"Mature (7-10 years)"};case(a>=11&&a<15):return{value:"senior",label:"Senior (11-14 years)"};case a>=15:return{value:"geriatric",label:"Geriatric (15+ years)"};default:return null}}),i=h(()=>{var a,S,y;if(!((a=e.value)!=null&&a.dateOfBirth))return null;switch((S=f.value)==null?void 0:S.value){case"kitten":return o.value<=4?"kitten0.4":"kitten1";default:return(y=e.value)!=null&&y.castrated?"castrated":"default"}}),{requiredCaloriesByWeightAndAgeAndSize:m,requiredFoodDry:v}=ve("average",((w=e.value)==null?void 0:w.weight)??"",i.value??"default",((O=e.value)==null?void 0:O.gender)??"male","35","default");return{catLifeStage:f,requiredCaloriesByWeightAndAgeAndSize:f?m:null,requiredFoodDry:f?v:null}},be=t=>{const e=h(()=>N(t)),{petAgeYears:s}=Y(e);return{dogLifeStage:h(()=>{var f,i,m;if(((f=e.value)==null?void 0:f.type)!=="dog"||!((i=e.value)!=null&&i.dateOfBirth)||!((m=e.value)!=null&&m.breedSize))return null;const n=s.value;switch(e.value.breedSize){case"small":return n<1?{value:"puppy",label:"Puppy (0-12 months)"}:n<3?{value:"young_adult",label:"Young Adult (1-2 years)"}:n<8?{value:"adult",label:"Adult (3-7 years)"}:n<11?{value:"mature",label:"Mature (8-10 years)"}:n<15?{value:"senior",label:"Senior (11-14 years)"}:{value:"geriatric",label:"Geriatric (15+ years)"};case"medium":return n<1?{value:"puppy",label:"Puppy (0-12 months)"}:n<3?{value:"young_adult",label:"Young Adult (1-2 years)"}:n<7?{value:"adult",label:"Adult (3-6 years)"}:n<10?{value:"mature",label:"Mature (7-9 years)"}:n<13?{value:"senior",label:"Senior (10-12 years)"}:{value:"geriatric",label:"Geriatric (13+ years)"};case"large":return n<1?{value:"puppy",label:"Puppy (0-12 months)"}:n<3?{value:"young_adult",label:"Young Adult (1-2 years)"}:n<6?{value:"adult",label:"Adult (3-5 years)"}:n<9?{value:"mature",label:"Mature (6-8 years)"}:n<12?{value:"senior",label:"Senior (9-11 years)"}:{value:"geriatric",label:"Geriatric (12+ years)"};case"giant":return n<1?{value:"puppy",label:"Puppy (0-12 months)"}:n<2?{value:"young_adult",label:"Young Adult (1-1.5 years)"}:n<5?{value:"adult",label:"Adult (2-4 years)"}:n<8?{value:"mature",label:"Mature (5-7 years)"}:n<10?{value:"senior",label:"Senior (8-9 years)"}:{value:"geriatric",label:"Geriatric (10+ years)"};default:return null}})}};var we={root:{position:"relative"}},_e={root:"p-chart"},xe=te.extend({name:"chart",inlineStyles:we,classes:_e}),Se={name:"BaseChart",extends:re,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:xe,provide:function(){return{$parentInstance:this}}},H={name:"Chart",extends:Se,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;ae(()=>import("./c-auto-U_pncEX3.js"),__vite__mapDeps([]),import.meta.url).then(function(s){e.chart&&(e.chart.destroy(),e.chart=null),s&&s.default&&(e.chart=new s.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var s=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),o=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);s&&s[0]&&o&&this.$emit("select",{originalEvent:e,element:s[0],dataset:o})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function B(t){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(t)}function U(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,o)}return s}function J(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?U(Object(s),!0).forEach(function(o){Ce(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):U(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}function Ce(t,e,s){return e=ke(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function ke(t){var e=Oe(t,"string");return B(e)=="symbol"?e:String(e)}function Oe(t,e){if(B(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var o=s.call(t,e||"default");if(B(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var De=["width","height"];function Ae(t,e,s,o,n,f){return u(),c("div",W({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[l("canvas",W({ref:"canvas",width:t.width,height:t.height,onClick:e[0]||(e[0]=function(i){return f.onCanvasClick(i)})},J(J({},t.canvasProps),t.ptm("canvas"))),null,16,De)],16)}H.render=Ae;const Pe=K({__name:"Chart",props:{labels:{},datasets:{}},setup(t){const e=t,s=R(),o=h(()=>{var i,m;const f=getComputedStyle(document.documentElement);return{labels:(i=e.labels)!=null&&i.length?e.labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:(m=e.datasets)!=null&&m.length?e.datasets:[{label:"Dataset 1",fill:!1,borderColor:f.getPropertyValue("--p-cyan-500"),yAxisID:"y",tension:.4,data:[65,59,80,81,56,55,10]},{label:"Dataset 2",fill:!1,borderColor:f.getPropertyValue("--p-gray-500"),yAxisID:"y1",tension:.4,data:[28,48,40,19,86,27,90]}]}}),n=()=>{const f=getComputedStyle(document.documentElement),i="white",m="white",v=f.getPropertyValue("--p-content-border-color");return{stacked:!1,maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:i}}},scales:{x:{ticks:{color:m},grid:{color:v}},y:{type:"linear",display:!0,position:"left",ticks:{color:m},grid:{color:v}},y1:{type:"linear",display:!1,position:"right",ticks:{color:m},grid:{drawOnChartArea:!1,color:v}}}}};return le(()=>{s.value=n()}),(f,i)=>(u(),E(d(H),{type:"line",data:o.value,options:s.value,class:"h-[30rem]"},null,8,["data","options"]))}}),Be={class:"grid grid-cols-6 mb-5 gap-5"},$e={class:"my-5"},Ee={class:"table-auto text-left"},Ie={key:0},je={key:1},Le={key:2},Me={key:3},Te={key:4},Ve={key:5},Re={key:6},Ne={key:7},Ye={key:8},ze={key:9},Fe={class:"my-5"},qe={key:0,class:"flex flex-wrap md:flex-nowrap gap-3 justify-around my-5 md:mb-0"},We={class:"ps-5 md:ps-10 flex flex-col gap-3"},Ge={key:0,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},Ue={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300"},Je={key:1,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},Ke={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300 sm:place-self-end"},He={key:2,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},Qe={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300 sm:place-self-end"},Xe={key:0,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},Ze={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300"},et={key:2,class:"flex flex-wrap sm:flex-nowrap gap-1 sm:gap-3 justify-around"},tt={class:"w-full sm:w-1/2 md:w-2/3 text-neutral-300 sm:place-self-end"},at={key:4,class:"w-full text-neutral-300"},rt={class:"mt-10 flex gap-3"},lt=K({__name:"Pet",setup(t){const e=oe(),s=ie(),o=se(),n=ne(),{pets:f}=I(o),{routeLoading:i}=I(n),{deletePet:m}=o,v=R(!1),w=R(!1),O=h(()=>e.params.petId),a=h(()=>f.value.find($=>$.id===O.value)),{petOwner:S,isMyPet:y,nextDeworming:_}=Y(a),{catLifeStage:x,requiredCaloriesByWeightAndAgeAndSize:P,requiredFoodDry:k}=he(a),{dogLifeStage:D}=be(a),j=async $=>{await m($),s.push({name:M.PET_OVERVIEW})};return($,r)=>(u(),E(X,null,{content:G(()=>[l("div",Be,[A(L,{class:"col-span-full md:col-span-4 lg:col-span-2",type:"tertiary",route:d(M).PET_OVERVIEW,loading:d(i)===d(M).PET_OVERVIEW,label:"Back to all pets",icon:"pi pi-arrow-up-left"},null,8,["route","loading"])]),a.value?(u(),E(Q,{key:0,class:"!bg-primary-500 !bg-opacity-35 my-5",title:a.value.name,"title-props":{class:"text-3xl ms-5 md:text-5xl"},avatar:a.value.avatar??void 0,"avatar-props":{class:"h-20 w-20 md:h-32 md:w-32"}},{default:G(()=>{var z,F,q;return[l("div",$e,[l("table",Ee,[l("tbody",null,[r[15]||(r[15]=l("tr",{class:"thead"},[l("th",{class:"text-xl"},"Details")],-1)),d(S)?(u(),c("tr",Ie,[r[5]||(r[5]=l("th",null,"Owner:",-1)),l("td",null,g(d(S).displayName),1)])):p("",!0),a.value.dateOfBirth?(u(),c("tr",je,[r[6]||(r[6]=l("th",null,"Date of birth:",-1)),l("td",null,g(d(T)(a.value.dateOfBirth)),1)])):p("",!0),a.value.type?(u(),c("tr",Le,[r[7]||(r[7]=l("th",null,"Type:",-1)),l("td",null,g((z=d(ue).find(({value:b})=>{var C;return b===((C=a.value)==null?void 0:C.type)}))==null?void 0:z.label),1)])):p("",!0),a.value.breed?(u(),c("tr",Me,[r[8]||(r[8]=l("th",null,"Breed:",-1)),l("td",null,g(a.value.breed),1)])):p("",!0),a.value.breedSize&&a.value.type==="dog"?(u(),c("tr",Te,[r[9]||(r[9]=l("th",null,"Breed size:",-1)),l("td",null,g((F=d(de).find(({value:b})=>{var C;return b===((C=a.value)==null?void 0:C.breedSize)}))==null?void 0:F.label),1)])):p("",!0),a.value.gender?(u(),c("tr",Ve,[r[10]||(r[10]=l("th",null,"Gender:",-1)),l("td",null,g((q=d(pe).find(({value:b})=>{var C;return b===((C=a.value)==null?void 0:C.gender)}))==null?void 0:q.label),1)])):p("",!0),r[16]||(r[16]=l("tr",{class:"thead"},[l("th",{class:"text-xl"},"Health")],-1)),a.value.weight?(u(),c("tr",Re,[r[11]||(r[11]=l("th",null,"Weight:",-1)),l("td",null,g(a.value.weight)+"kg",1)])):p("",!0),typeof a.value.insideCat=="boolean"?(u(),c("tr",Ne,[r[12]||(r[12]=l("th",null,"Inside Cat:",-1)),l("td",null,g(a.value.insideCat?"Yes":"No"),1)])):p("",!0),a.value.castrated!==void 0?(u(),c("tr",Ye,[r[13]||(r[13]=l("th",null,"Castrated:",-1)),l("td",null,g(a.value.castrated?"Yes":"No"),1)])):p("",!0),a.value.dewormingDate?(u(),c("tr",ze,[r[14]||(r[14]=l("th",null,"Last deworming:",-1)),l("td",null,g(d(T)(a.value.dewormingDate)),1)])):p("",!0)])])]),l("div",Fe,[a.value.dateOfBirth?(u(),c("div",qe,[A(ye,{class:"w-full md:w-3/4 text-neutral-300 bg-neutral-900 rounded-secondary",time:new Date(a.value.dateOfBirth).getTime(),direction:"up"},null,8,["time"])])):p("",!0),r[22]||(r[22]=l("p",{class:"mt-5 text-xl font-bold"},"Statistics",-1)),l("div",We,[a.value.type==="cat"?(u(),c(V,{key:0},[d(x)?(u(),c("div",Ge,[r[17]||(r[17]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Life stage:",-1)),l("p",Ue,g(d(x).label),1)])):p("",!0),d(P)?(u(),c("div",Je,[r[18]||(r[18]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Required energy per day:",-1)),l("p",Ke,g(d(P).toFixed(1))+" kcal ",1)])):p("",!0),d(k)?(u(),c("div",He,[r[19]||(r[19]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Required dry food per day:",-1)),l("p",Qe,g(d(k).toFixed(1))+" g ",1)])):p("",!0)],64)):a.value.type==="dog"?(u(),c(V,{key:1},[d(D)?(u(),c("div",Xe,[r[20]||(r[20]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Life stage:",-1)),l("p",Ze,g(d(D).label),1)])):p("",!0)],64)):p("",!0),d(_)?(u(),c("div",et,[r[21]||(r[21]=l("p",{class:"w-full sm:w-1/2 md:w-1/3 font-bold"},"Next deworming:",-1)),l("p",tt,g(d(ce)(d(_))),1)])):p("",!0),a.value.weightLog.length?(u(),E(Pe,{key:3,labels:a.value.weightLog.map(b=>d(T)(b.date)),datasets:[{label:`${a.value.name}'s weight (kg)`,fill:!1,borderColor:"red",yAxisID:"y",tension:.4,data:a.value.weightLog.map(b=>b.weight)}]},null,8,["labels","datasets"])):p("",!0),a.value.type==="other"?(u(),c("p",at," Nothing to show yet. ")):p("",!0)])]),d(y)?(u(),c(V,{key:0},[l("div",rt,[A(L,{label:"Edit",outlined:"",onClick:r[0]||(r[0]=b=>v.value=!0)}),A(L,{label:"Delete",type:"danger",outlined:"",onClick:r[1]||(r[1]=b=>w.value=!0)})]),A(fe,{"is-open":v.value,"original-pet":a.value??null,onClose:r[2]||(r[2]=b=>v.value=!1)},null,8,["is-open","original-pet"]),A(me,{"is-open":w.value,title:"Delete Pet",description:"Are you sure you want to delete your pet?","confirm-text":"Confirm","confirm-props":{type:"danger",outlined:!0},onConfirm:r[3]||(r[3]=b=>j(a.value.id)),onCancel:r[4]||(r[4]=b=>w.value=!1)},null,8,["is-open"])],64)):p("",!0)]}),_:1},8,["title","avatar"])):p("",!0)]),_:1}))}}),bt=ge(lt,[["__scopeId","data-v-a89be466"]]);export{bt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
