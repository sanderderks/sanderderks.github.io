import{d as se,s as Z,U as he,b as t,c as a,e as n,t as d,f as e,h as i,i as z,w as B,k as b,bc as v,O as w,Q as R,J as u,z as j,C as g,bd as Se,be as ae,l as ne,aC as ue,n as X,q as ye,g as L,S as fe,_ as Ie}from"../bundle.js";import{u as le,s as Te,G as l,S as T,B as C,_ as pe}from"./c-Dice.vue_vue_type_script_setup_true_lang-EVN-wBh-.js";import{u as we,H as Ee,_ as ge}from"./c-useScoreInfo-9oa7esVu.js";import{_ as Oe,a as Ae}from"./c-GameChat.vue_vue_type_script_setup_true_lang-CDzWcUjt.js";import{_ as Ne,a as Pe}from"./c-GameActions.vue_vue_type_script_setup_true_lang-C_bErWTn.js";import{_ as He}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-9YwHE3Nu.js";import{_ as ie}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-Dice5.vue_vue_type_script_setup_true_lang-C6p2XO2T.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-asLvsLFP.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bsc6HKwg.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-w4ekMcIk.js";const Re={class:"h-10"},ke={class:"w-1/2 md:w-1/3"},Le={key:0},xe={key:1,class:"!ps-1 md:ps-1"},$e={key:2},De={key:0},Ge={key:1},be={key:2},Ye=se({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(x){const h=x,Y=le(),{gameType:_,gameStatus:S,activePlayerId:E,myPlayerId:k,opponents:y,reroll:O}=Z(Y),{selectScore:N,getScore:c,getActualValue:r}=Y,P=j(!1),$=Te[h.row],D=g(()=>c(h.row,k.value)),I=g(()=>r(h.row,h.hasValue)),G=g(()=>I.value===!1?"X":I.value);return he(()=>I.value,()=>{P.value=!0,setTimeout(()=>{P.value=!1})}),(H,F)=>(t(),a("tr",Re,[n("th",ke,d(e($).title),1),D.value?(t(),a("td",Le,d(D.value.value===!1?"X":D.value.value),1)):e(E)===e(k)&&e(O)>=0&&!P.value?(t(),a("td",xe,[i(z,{class:"size-8",variant:I.value===!1||I.value===0?"neutral":void 0,onClick:F[0]||(F[0]=A=>e(N)(x.row,I.value))},{default:B(()=>[b(d(G.value),1)]),_:1},8,["variant"])])):(t(),a("td",$e)),e(_)===e(v).MULTIPLAYER?(t(!0),a(w,{key:3},R(e(y),A=>(t(),a(w,null,[e(c)(x.row,A.userId)?(t(),a("td",De,d(e(c)(x.row,A.userId).value===!1?"X":e(c)(x.row,A.userId).value),1)):e(E)===A.userId&&e(S)>e(l).HAS_STARTED?(t(),a("td",Ge,[i(z,{class:"size-8",variant:I.value===!1||I.value===0?"neutral":"danger"},{default:B(()=>[b(d(G.value),1)]),_:1},8,["variant"])])):(t(),a("td",be))],64))),256)):u("",!0)]))}}),p=ie(Ye,[["__scopeId","data-v-1e847acc"]]),Fe={key:0,class:"text-white"},Me={key:1,class:"h-12 md:h-auto text-yellow-500"},Ue={key:3,class:"h-12 md:h-auto text-yellow-500"},Ce={class:"h-12 md:h-auto text-pink-500"},Be={key:0,class:"text-purple-500 font-bold"},Ve={key:1,class:"text-red-500 font-bold"},We={key:2,class:"text-green-500 font-bold"},ze={key:0,class:"h-12 md:h-auto text-red-500 font-bold"},Ze=se({__name:"Scoreboard",setup(x){const h=le(),Y=Se(),{gameType:_,gameStatus:S,myPlayerId:E,bonusScore:k,finalScore:y,hasOfValue:O,hasThreeOfAKind:N,hasFourOfAKind:c,hasFullHouse:r,hasSmallStraight:P,hasLargeStraight:$,hasYahtzee:D,diceTotal:I}=Z(h),{players:G,opponents:H}=Z(Y),{currentHighscorePosition:F,hasImprovedHighscorePosition:A,hasImprovedPersonalBest:J}=we(ae.YAHTZEE),M=j(),U=j(!1),V=g(()=>O.value(1)),W=g(()=>O.value(2)),q=g(()=>O.value(3)),Q=g(()=>O.value(4)),ee=g(()=>O.value(5)),te=g(()=>O.value(6));return ne(()=>{M.value=setInterval(()=>{U.value=!U.value},500)}),ue(()=>{clearInterval(M.value)}),(K,o)=>(t(),a("table",{class:X(["w-full mt-5 text-sm md:text-base text-left",e(S)===e(l).HAS_FINISHED?"text-neutral-500":"text-white",e(S)===e(l).HAS_NOT_STARTED?U.value?"even":"odd":void 0])},[e(_)===e(v).MULTIPLAYER?(t(),a("thead",Fe,[n("tr",null,[o[0]||(o[0]=n("th",null,null,-1)),o[1]||(o[1]=n("th",null,"You",-1)),(t(!0),a(w,null,R(e(H),s=>(t(),a("th",{key:s.userId,class:X(s.isOnline?"text-green-400":"text-red-400")},d(e(h).getPlayerDisplayName(s.userId)),3))),128))])])):u("",!0),n("tbody",null,[i(p,{row:e(T).ONES,"has-value":V.value},null,8,["row","has-value"]),i(p,{row:e(T).TWOS,"has-value":W.value},null,8,["row","has-value"]),i(p,{row:e(T).THREES,"has-value":q.value},null,8,["row","has-value"]),i(p,{row:e(T).FOURS,"has-value":Q.value},null,8,["row","has-value"]),i(p,{row:e(T).FIVES,"has-value":ee.value},null,8,["row","has-value"]),i(p,{row:e(T).SIXES,"has-value":te.value},null,8,["row","has-value"]),e(S)>=e(l).HAS_FINISHED?(t(),a("tr",{key:0,class:X(["h-12 md:h-auto",e(S)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[o[2]||(o[2]=n("th",null,"TOP",-1)),n("td",null,d(e(y)[e(E)]?.top??""),1),e(_)===e(v).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(H),s=>(t(),a("td",null,d(e(y)[s.userId]?.top??""),1))),256)):u("",!0)],2)):u("",!0),e(S)>e(l).HAS_NOT_STARTED&&Object.values(e(k)).some(s=>s.includes(e(C).TOP))?(t(),a("tr",Me,[o[3]||(o[3]=n("th",null,"BONUS",-1)),n("td",null,d(e(h).getBonus(e(C).TOP,e(E))||""),1),e(_)===e(v).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(H),s=>(t(),a("td",null,d(e(h).getBonus(e(C).TOP,s.userId)||""),1))),256)):u("",!0)])):u("",!0),i(p,{row:e(T).THREE_OF_A_KIND,"has-value":e(N)},null,8,["row","has-value"]),i(p,{row:e(T).FOUR_OF_A_KIND,"has-value":e(c)},null,8,["row","has-value"]),i(p,{row:e(T).FULL_HOUSE,"has-value":e(r)},null,8,["row","has-value"]),i(p,{row:e(T).SMALL_STRAIGHT,"has-value":e(P)},null,8,["row","has-value"]),i(p,{row:e(T).LARGE_STRAIGHT,"has-value":e($)},null,8,["row","has-value"]),i(p,{row:e(T).YAHTZEE,"has-value":e(D)},null,8,["row","has-value"]),i(p,{row:e(T).CHANCE,"has-value":e(I)},null,8,["row","has-value"]),e(S)>=e(l).HAS_FINISHED?(t(),a("tr",{key:2,class:X(["h-12 md:h-auto",e(S)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[o[4]||(o[4]=n("th",null,"BOTTOM",-1)),n("td",null,d(e(y)[e(E)]?.bottom??""),1),e(_)===e(v).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(H),s=>(t(),a("td",null,d(e(y)[s.userId]?.bottom??""),1))),256)):u("",!0)],2)):u("",!0),Object.values(e(k)).some(s=>s.includes(e(C).YAHTZEE))?(t(),a("tr",Ue,[o[5]||(o[5]=n("th",null,"YAHTZEE BONUS",-1)),n("td",null,d(e(h).getBonus(e(C).YAHTZEE,e(E))||""),1),e(_)===e(v).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(H),s=>(t(),a("td",null,d(e(h).getBonus(e(C).YAHTZEE,s.userId)||""),1))),256)):u("",!0)])):u("",!0),e(S)===e(l).HAS_FINISHED?(t(),a(w,{key:4},[n("tr",Ce,[o[6]||(o[6]=n("th",null,"TOTAL",-1)),n("td",null,[b(d(e(y)[e(E)]?.total??"")+" ",1),e(A)&&e(F)===1?(t(),a("span",Be," HIGHSCORE! ")):e(A)?(t(),a("span",Ve," LEADERBOARD IMPROVEMENT! ")):e(J)?(t(),a("span",We," PERSONAL BEST! ")):u("",!0)]),e(_)===e(v).MULTIPLAYER?(t(!0),a(w,{key:0},R(e(H),s=>(t(),a("td",null,d(e(y)[s.userId]?.total??""),1))),256)):u("",!0)]),e(_)===e(v).MULTIPLAYER?(t(),a("tr",ze,[o[7]||(o[7]=n("td",null,null,-1)),(t(!0),a(w,null,R(e(G),s=>(t(),a("td",null,[e(y)[s.userId]?.winStatus==="win"?(t(),a(w,{key:0},[b(" WINNER! ")],64)):e(y)[s.userId]?.winStatus==="tie"?(t(),a(w,{key:1},[b(" TIE! ")],64)):u("",!0)]))),256))])):u("",!0)],64)):u("",!0)])],2))}}),re=ie(Ze,[["__scopeId","data-v-c7cf0c06"]]),je={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Ke={class:"flex flex-wrap justify-center gap-3"},Xe={key:0,class:"w-full"},Je={key:1,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},qe={class:"w-full md:w-1/2 flex justify-center gap-3"},Qe={class:"w-full md:w-1/2 flex justify-center gap-3"},ct=se({__name:"Yahtzee",setup(x){const h=le(),Y=ye(),{gameId:_,chat:S,players:E,partyName:k,maxPlayers:y,isLocked:O,isOwner:N,gameType:c,gameStatus:r,activePlayerId:P,myPlayerId:$,canRoll:D,canReroll:I,dices:G,finalScore:H,personalBest:F}=Z(h),{isLoggedIn:A}=Z(Y),{start:J,$reset:M,createOnlineGame:U,continueOnlineGame:V,leaveOnlineGame:W,deleteOnlineGame:q,getPlayerDisplayName:Q,roll:ee,updateYahtzeeHighscore:te}=h,K=j(!1),o=j(!1),s=g(()=>y.value!==null&&y.value>0?y.value-E.value.length:0),de=g(()=>N.value&&E.value.length>1),ve=()=>{c.value=v.MULTIPLAYER,r.value=l.FINDING_OPPONENT},ce=()=>{O.value=!0,r.value=l.HAS_STARTED},oe=async()=>{_.value&&(N.value?await q():await W()),M()},me=async()=>{_.value&&await W(),M()};return ne(()=>{_.value&&V(_.value)}),ue(async()=>{_.value&&(await W(),M())}),(et,f)=>(t(),L(Ie,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",tags:e(c)===e(v).MULTIPLAYER&&e(k)?[{value:e(k),severity:"danger"}]:void 0,description:e(c)===e(v).SOLO?e(r)===e(l).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:B(()=>[n("div",je,[i(z,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:f[0]||(f[0]=m=>K.value=!0)}),i(Pe,{"icon-only":"","is-solo":e(c)===e(v).SOLO,"is-owner":e(N),"has-game-started":e(r)>=e(l).WAITING_FOR_OPPONENTS,"is-game-over":e(r)===e(l).HAS_FINISHED,onDelete:oe},null,8,["is-solo","is-owner","has-game-started","is-game-over"])])]),default:B(()=>[n("div",Ke,[e(r)===e(l).FINDING_OPPONENT?(t(),a("div",Xe,[i(Oe,{"allow-party":"",onCreateOnlineGame:f[1]||(f[1]=m=>e(U)([{userId:m}])),onContinueOnlineGame:e(V),onCreateParty:f[2]||(f[2]=(m,_e)=>e(U)([],m,_e)),onJoinParty:e(V)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(r)>=e(l).WAITING_FOR_OPPONENTS&&e(r)<e(l).HAS_FINISHED?(t(),a("div",Je,[n("div",qe,[e(r)===e(l).WAITING_FOR_OPPONENTS?(t(),L(z,{key:0,class:"w-full",variant:"tertiary",disabled:!de.value,onClick:ce},{default:B(()=>[b(d(s.value?`Waiting for ${s.value} more player${s.value!==1?"s":""}`:e(N)?e(E).length>1?"Everyone is here? Start the game!":"Waiting for more players to join":"Waiting for the game to start"),1)]),_:1},8,["disabled"])):e(c)===e(v).MULTIPLAYER||e(D)||e(I)?(t(),L(z,{key:1,class:"w-full",variant:"tertiary",disabled:e(P)!==e($)||e(r)===e(l).HAS_CHOSEN_DICES||e(G).every(m=>m.selected),onClick:e(ee)},{default:B(()=>[b(d(s.value?`Waiting for ${s.value} more player${s.value!==1?"s":""}`:e(P)!==e($)?`${e(Q)(e(P))}'s turn`:e(I)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):u("",!0)]),n("div",Qe,[(t(!0),a(w,null,R(e(G),m=>(t(),L(pe,{key:m.id,dice:m},null,8,["dice"]))),128))])])):u("",!0)]),!o.value&&e(r)>=e(l).WAITING_FOR_OPPONENTS?(t(),L(re,{key:0})):u("",!0),!o.value&&e(c)===e(v).MULTIPLAYER&&e(r)>=e(l).WAITING_FOR_OPPONENTS?(t(),L(Ae,{key:1,chats:e(S)??[],onSendChat:f[3]||(f[3]=m=>S.value=[...e(S)??[],m])},null,8,["chats"])):u("",!0),i(Ne,{"is-viewing-highscores":o.value,"onUpdate:isViewingHighscores":f[4]||(f[4]=m=>o.value=m),"has-solo":"","is-solo":e(c)===e(v).SOLO,hasMultiplayer:"",isMultiplayer:e(c)===e(v).MULTIPLAYER,"is-owner":e(N),"is-main-menu":e(r)===e(l).HAS_NOT_STARTED,"has-game-started":e(r)>=e(l).WAITING_FOR_OPPONENTS,"is-game-over":e(r)===e(l).HAS_FINISHED,onPlaySolo:e(J),onPlayMultiplayer:ve,onRestart:oe,onGoBack:me},null,8,["is-viewing-highscores","is-solo","isMultiplayer","is-owner","is-main-menu","has-game-started","is-game-over","onPlaySolo"]),!o.value&&e(r)===e(l).HAS_NOT_STARTED?(t(),L(re,{key:2})):u("",!0),o.value?(t(),L(Ee,{key:3,"game-id":e(ae).YAHTZEE},null,8,["game-id"])):u("",!0),i(ge,{"is-logged-in":e(A),"is-solo":e(c)===e(v).SOLO,"is-game-over":e(r)===e(l).HAS_FINISHED,"final-score":e(H)[e($)]?.total??0,"personal-best":e(F),"redirect-route":e(fe).GAMES_YAHTZEE,onUpdateHighscore:f[5]||(f[5]=m=>e(te)())},null,8,["is-logged-in","is-solo","is-game-over","final-score","personal-best","redirect-route"]),i(He,{"game-id":e(ae).YAHTZEE,"is-open":K.value,"onUpdate:isOpen":f[6]||(f[6]=m=>K.value=m)},null,8,["game-id","is-open"])]),_:1},8,["tags","description"]))}});export{ct as default};
