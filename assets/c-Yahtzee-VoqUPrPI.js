import{d as se,s as U,w as z,f as y,L as de,g as s,j as t,q as o,m as r,I as d,h as e,k as u,_ as w,A as _,a3 as f,aQ as O,C as Y,aR as ve,aS as le,o as me,ax as re,z as X,a as ce,c as _e,l as p,an as fe,E as Se,y as ue,a7 as pe,R as we}from"../bundle.js";import{u as oe,s as ye,P as F,G as l,S as N,_ as Ne}from"./c-Dice.vue_vue_type_script_setup_true_lang-CTA5eV1e.js";import{_ as Ee}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-CV8P_puc.js";import{u as Oe,H as Te}from"./c-useScoreInfo-Ccgwtaru.js";import{_ as ie}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Ie,a as Ae}from"./c-GameChat.vue_vue_type_script_setup_true_lang-BRZ6rZ9b.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-BZM7B_wv.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-DjHGpPgu.js";const he={class:"h-10"},He={class:"w-1/2 md:w-1/3"},ke={key:0},ge={key:1,class:"!ps-1 md:ps-1"},Re={key:2},De={key:0},xe={key:1},Ge={key:2},Pe=se({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(Z){const h=Z,R=oe(),{gameType:I,gameStatus:i,activePlayer:$,reroll:T}=U(R),{selectScore:D,getScore:H,getActualValue:A}=R,n=z(!1),C=ye[h.row],x=y(()=>H(h.row)),k=y(()=>H(h.row,F.OPPONENT)),m=y(()=>A(h.row,h.hasValue)),g=y(()=>m.value===!1?"X":m.value);return de(()=>m.value,()=>{n.value=!0,setTimeout(()=>{n.value=!1})}),(b,L)=>(t(),s("tr",he,[o("th",He,d(e(C).title),1),x.value?(t(),s("td",ke,d(x.value.value===!1?"X":x.value.value),1)):e(T)>=0&&!n.value?(t(),s("td",ge,[u(w,{class:"size-8",variant:m.value===!1||m.value===0?"neutral":void 0,onClick:L[0]||(L[0]=j=>e(D)(b.row,m.value))},{default:_(()=>[f(d(g.value),1)]),_:1},8,["variant"])])):(t(),s("td",Re)),e(I)===e(O).ONLINE?(t(),s(Y,{key:3},[k.value?(t(),s("td",De,d(k.value.value===!1?"X":k.value.value),1)):e($)===e(F).OPPONENT&&e(i)!==e(l).HAS_STARTED?(t(),s("td",xe,[u(w,{class:"size-8",variant:m.value===!1||m.value===0?"neutral":"danger"},{default:_(()=>[f(d(g.value),1)]),_:1},8,["variant"])])):(t(),s("td",Ge))],64)):r("",!0)]))}}),E=ie(Pe,[["__scopeId","data-v-6b1a7992"]]),$e={key:0},Ce={key:0},Le={key:0},Fe={key:0},be={key:0,class:"h-12 md:h-auto text-red-500"},Be={key:0},Ve={class:"h-12 md:h-auto text-pink-500"},Ye={key:0,class:"text-purple-500 font-bold"},Ue={key:1,class:"text-red-500 font-bold"},ze={key:2,class:"text-green-500 font-bold"},je={key:0},Me=se({__name:"Scoreboard",setup(Z){const h=oe(),R=ve(),{gameType:I,gameStatus:i,bonus:$,hasOfValue:T,hasThreeOfAKind:D,hasFourOfAKind:H,hasFullHouse:A,hasSmallStraight:n,hasLargeStraight:C,hasYahtzee:x,diceTotal:k,scoreTotalOf:m,finalScore:g,finalScoreOpponent:b}=U(h),{onlineGameOpponentName:L}=U(R),{currentHighscorePosition:j,hasImprovedHighscorePosition:M,hasImprovedPersonalBest:K}=Oe(le.YAHTZEE),G=z(),B=z(!1),q=y(()=>T.value(1)),J=y(()=>T.value(2)),V=y(()=>T.value(3)),Q=y(()=>T.value(4)),W=y(()=>T.value(5)),ee=y(()=>T.value(6)),P=y(()=>m.value("top")),S=y(()=>m.value("top",F.OPPONENT)),ae=y(()=>m.value("bottom")),te=y(()=>m.value("bottom",F.OPPONENT));return me(()=>{G.value=setInterval(()=>{B.value=!B.value},500)}),re(()=>{clearInterval(G.value)}),(ne,c)=>(t(),s("table",{class:X(["w-full mt-5 text-sm md:text-base text-left",e(i)===e(l).HAS_FINISHED?"text-neutral-500":"text-white",e(i)===e(l).HAS_NOT_STARTED?B.value?"even":"odd":void 0])},[e(I)===e(O).ONLINE?(t(),s("thead",$e,[c[0]||(c[0]=o("th",null,null,-1)),c[1]||(c[1]=o("th",null,"You",-1)),o("th",null,d(e(L)),1)])):r("",!0),o("tbody",null,[u(E,{row:e(N).ONES,"has-value":q.value},null,8,["row","has-value"]),u(E,{row:e(N).TWOS,"has-value":J.value},null,8,["row","has-value"]),u(E,{row:e(N).THREES,"has-value":V.value},null,8,["row","has-value"]),u(E,{row:e(N).FOURS,"has-value":Q.value},null,8,["row","has-value"]),u(E,{row:e(N).FIVES,"has-value":W.value},null,8,["row","has-value"]),u(E,{row:e(N).SIXES,"has-value":ee.value},null,8,["row","has-value"]),o("tr",{class:X(["h-12 md:h-auto",e(i)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[c[2]||(c[2]=o("th",null,"TOP",-1)),o("td",null,d(e(i)>=e(l).HAS_STARTED?P.value:""),1),e(I)===e(O).ONLINE?(t(),s("td",Ce,d(e(i)>=e(l).HAS_STARTED?S.value:""),1)):r("",!0)],2),o("tr",{class:X(["h-12 md:h-auto",e(i)===e(l).HAS_FINISHED?P.value>=63?"text-yellow-500":"text-white":"text-neutral-500"])},[c[3]||(c[3]=o("th",null,"BONUS",-1)),o("td",null,d(P.value>=63?35:e(i)===e(l).HAS_FINISHED?"X":""),1),e(I)===e(O).ONLINE?(t(),s("td",Le,d(S.value>=63?35:e(i)===e(l).HAS_FINISHED?"X":""),1)):r("",!0)],2),u(E,{row:e(N).THREE_OF_A_KIND,"has-value":e(D)},null,8,["row","has-value"]),u(E,{row:e(N).FOUR_OF_A_KIND,"has-value":e(H)},null,8,["row","has-value"]),u(E,{row:e(N).FULL_HOUSE,"has-value":e(A)},null,8,["row","has-value"]),u(E,{row:e(N).SMALL_STRAIGHT,"has-value":e(n)},null,8,["row","has-value"]),u(E,{row:e(N).LARGE_STRAIGHT,"has-value":e(C)},null,8,["row","has-value"]),u(E,{row:e(N).YAHTZEE,"has-value":e(x)},null,8,["row","has-value"]),u(E,{row:e(N).CHANCE,"has-value":e(k)},null,8,["row","has-value"]),o("tr",{class:X(["h-12 md:h-auto",e(i)===e(l).HAS_FINISHED?"text-white":"text-neutral-500"])},[c[4]||(c[4]=o("th",null,"BOTTOM",-1)),o("td",null,d(e(i)>=e(l).HAS_STARTED?ae.value:""),1),e(I)===e(O).ONLINE?(t(),s("td",Fe,d(e(i)>=e(l).HAS_STARTED?te.value:""),1)):r("",!0)],2),e(i)===e(l).HAS_FINISHED&&e(g)?(t(),s(Y,{key:0},[e($)?(t(),s("tr",be,[c[5]||(c[5]=o("th",null,"YAHTZEE BONUS",-1)),o("td",null,d(e($)),1),e(I)===e(O).ONLINE?(t(),s("td",Be)):r("",!0)])):r("",!0),o("tr",Ve,[c[6]||(c[6]=o("th",null,"TOTAL",-1)),o("td",null,[f(d(e(g))+" ",1),e(M)&&e(j)===1?(t(),s("span",Ye," HIGHSCORE! ")):e(M)?(t(),s("span",Ue," LEADERBOARD IMPROVEMENT! ")):e(K)?(t(),s("span",ze," PERSONAL BEST! ")):r("",!0)]),e(I)===e(O).ONLINE?(t(),s("td",je,d(e(b)),1)):r("",!0)])],64)):r("",!0)])],2))}}),Xe=ie(Me,[["__scopeId","data-v-9dc08317"]]),Ze={class:"flex flex-wrap justify-center gap-3"},Ke={key:1,class:"w-full"},qe={class:"flex justify-center"},Je={key:2,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},Qe={class:"w-full md:w-1/2 flex justify-center gap-3"},We={class:"w-full md:w-1/2 flex justify-center gap-3"},ea={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},aa={key:3,class:"flex flex-wrap gap-3 mt-3 justify-center"},ma=se({__name:"Yahtzee",setup(Z){const h=ce(),R=oe(),I=_e(),{onlineGames:i,onlineGamesLoading:$,onlineGameId:T,onlineGameChat:D,isOnlineGameOwner:H,gameType:A,gameStatus:n,activePlayer:C,canRoll:x,canReroll:k,dices:m,finalScore:g,personalBest:b,onlineGameOpponentName:L}=U(R),{firebaseUser:j}=U(I),{collections:M,start:K,$reset:G,fetchOnlineGames:B,startOnlineGame:q,continueOnlineGame:J,leaveOnlineGame:V,deleteOnlineGame:Q,roll:W,updateYahtzeeHighscore:ee}=R,P=z(!1),S=z(!1),ae=()=>{S.value=!1,G()},te=()=>{S.value=!1,A.value=O.SOLO,K()},ne=async()=>{T.value&&await V(),G()},c=async()=>{S.value=!1,T.value&&(H.value?await Q():await V()),G()};return re(async()=>{T.value&&(await V(),G())}),(ta,a)=>(t(),p(ue,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:"Play solo."},{right:_(()=>[u(w,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:a[0]||(a[0]=v=>P.value=!0)})]),default:_(()=>[o("div",Ze,[e(n)===e(l).HAS_NOT_STARTED?(t(),s(Y,{key:0},[u(w,{class:"w-full md:w-1/2",onClick:te},{default:_(()=>a[11]||(a[11]=[f(" Play Solo ")])),_:1,__:[11]}),u(w,{class:"w-full md:w-1/2",variant:"purple",onClick:a[1]||(a[1]=()=>{n.value=e(l).FINDING_OPPONENT,A.value=e(O).ONLINE})},{default:_(()=>a[12]||(a[12]=[f(" Play Online ")])),_:1,__:[12]}),e(n)===e(l).HAS_NOT_STARTED&&!S.value?(t(),p(w,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:a[2]||(a[2]=v=>S.value=!0)},{default:_(()=>a[13]||(a[13]=[f(" View Highscores ")])),_:1,__:[13]})):e(n)===e(l).HAS_NOT_STARTED?(t(),p(w,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[3]||(a[3]=v=>S.value=!1)},{default:_(()=>a[14]||(a[14]=[f(" Go Back ")])),_:1,__:[14]})):r("",!0)],64)):e(n)===e(l).FINDING_OPPONENT?(t(),s("div",Ke,[u(Ie,{modelValue:e(i),"onUpdate:modelValue":a[4]||(a[4]=v=>fe(i)?i.value=v:null),collection:e(M).onlineGames,"online-games-loading":e($),"fetch-online-games":e(B),onStartOnlineGame:e(q),onContinueOnlineGame:e(J)},null,8,["modelValue","collection","online-games-loading","fetch-online-games","onStartOnlineGame","onContinueOnlineGame"]),o("div",qe,[u(w,{class:"w-full md:w-1/2",variant:"neutral",onClick:ne},{default:_(()=>a[15]||(a[15]=[f(" Go Back ")])),_:1,__:[15]})])])):e(n)!==e(l).HAS_FINISHED?(t(),s("div",Je,[o("div",Qe,[e(A)===e(O).ONLINE||e(x)||e(k)?(t(),p(w,{key:0,class:"w-full",variant:"tertiary",disabled:e(C)!==e(F).PLAYER||e(n)===e(l).HAS_CHOSEN_DICES||e(m).every(v=>v.selected),onClick:e(W)},{default:_(()=>[f(d(e(C)===e(F).OPPONENT?`${e(L)}'s turn`:e(k)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):r("",!0)]),o("div",We,[(t(!0),s(Y,null,Se(e(m),v=>(t(),p(Ne,{key:v.id,dice:v},null,8,["dice"]))),128))])])):r("",!0)]),S.value?(t(),p(Te,{key:0,"game-id":e(le).YAHTZEE},null,8,["game-id"])):!S.value&&e(n)!==e(l).FINDING_OPPONENT?(t(),p(Xe,{key:1})):r("",!0),e(A)===e(O).ONLINE&&e(n)>=e(l).HAS_STARTED?(t(),p(Ae,{key:2,chats:e(D)??[],onSendChat:a[5]||(a[5]=v=>D.value=[...e(D)??[],v])},null,8,["chats"])):r("",!0),o("div",ea,[e(n)>=e(l).HAS_STARTED&&e(n)<=e(l).HAS_FINISHED?(t(),s(Y,{key:0},[e(A)===e(O).SOLO?(t(),p(w,{key:0,class:"w-full md:w-1/2",variant:e(n)===e(l).HAS_FINISHED?"secondary":"neutral",onClick:ae},{default:_(()=>[f(d(e(n)===e(l).HAS_FINISHED?"Play Again":"Restart"),1)]),_:1},8,["variant"])):e(A)===e(O).ONLINE?(t(),p(w,{key:1,class:"w-full md:w-1/2",variant:e(n)===e(l).HAS_FINISHED||!e(H)?"neutral":"danger",onClick:c},{default:_(()=>[f(d(e(n)===e(l).HAS_FINISHED?"Play Again":e(H)?"Restart":"Go Back"),1)]),_:1},8,["variant"])):r("",!0)],64)):r("",!0),e(n)===e(l).HAS_FINISHED&&!S.value?(t(),p(w,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[6]||(a[6]=v=>S.value=!0)},{default:_(()=>a[16]||(a[16]=[f(" View Highscores ")])),_:1,__:[16]})):e(n)===e(l).HAS_FINISHED?(t(),p(w,{key:2,class:"w-full md:w-1/2",variant:"neutral",onClick:a[7]||(a[7]=v=>S.value=!1)},{default:_(()=>a[17]||(a[17]=[f(" View Your Score ")])),_:1,__:[17]})):r("",!0)]),e(n)===e(l).HAS_FINISHED?(t(),s("div",aa,[e(j)?e(g)&&e(b)<e(g)?(t(),p(w,{key:1,class:"w-full md:w-1/2",variant:"primary",onClick:a[9]||(a[9]=v=>e(ee)())},{default:_(()=>a[20]||(a[20]=[f(" Add To Leaderboard ")])),_:1,__:[20]})):r("",!0):(t(),p(ue,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:_(()=>[a[18]||(a[18]=f(" Please ")),o("a",{class:"cursor-pointer",onClick:a[8]||(a[8]=v=>e(h).push({name:e(we).LOGIN,params:{redirect:JSON.stringify({name:e(pe).GAMES_YAHTZEE})}}))}," Login "),a[19]||(a[19]=f(" to add your score to the leaderboard. "))]),_:1,__:[18,19]}))])):r("",!0),u(Ee,{"game-id":e(le).YAHTZEE,"is-open":P.value,"onUpdate:isOpen":a[10]||(a[10]=v=>P.value=v)},null,8,["game-id","is-open"])]),_:1}))}});export{ma as default};
