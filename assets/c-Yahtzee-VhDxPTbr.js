import{aT as Ye,aU as Le,c as Re,aV as ze,aR as He,s as Z,aW as Ze,aX as be,aS as te,w as U,a9 as Ee,f as L,o as Ce,L as ie,aY as Ve,aZ as Ue,a_ as _e,a$ as qe,aq as xe,b0 as Je,b1 as Ke,d as B,g as n,j as t,q as i,z as j,l as D,b2 as Xe,h as e,C as E,k as W,E as Q,m as P,I as y,a3 as G,_ as ee,A as q,N as Qe,ax as el,y as ll,a7 as tl}from"../bundle.js";import{u as sl,H as al,_ as ol}from"./c-useScoreInfo-BuqgYv10.js";import{a as nl,_ as rl}from"./c-GameChat.vue_vue_type_script_setup_true_lang-C641D1SS.js";import{_ as il,a as ul}from"./c-GameActions.vue_vue_type_script_setup_true_lang-B-4xR-ma.js";import{_ as cl}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-BIHL1YBx.js";import{_ as dl}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-Bw1DkFfV.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-CFG94sGa.js";var M=(a=>(a[a.Purple=0]="Purple",a[a.Blue=1]="Blue",a[a.Yellow=2]="Yellow",a[a.Orange=3]="Orange",a[a.Red=4]="Red",a))(M||{}),C=(a=>(a[a.HAS_NOT_STARTED=0]="HAS_NOT_STARTED",a[a.FINDING_OPPONENT=1]="FINDING_OPPONENT",a[a.IS_PLAYING=2]="IS_PLAYING",a[a.HAS_FINISHED=3]="HAS_FINISHED",a))(C||{}),z=(a=>(a[a.WAITING_FOR_OPPONENTS=0]="WAITING_FOR_OPPONENTS",a[a.HAS_STARTED=1]="HAS_STARTED",a[a.HAS_THROWN_DICES=2]="HAS_THROWN_DICES",a[a.HAS_CHOSEN_SCORE=3]="HAS_CHOSEN_SCORE",a[a.CAN_CHOOSE_REMAINING=4]="CAN_CHOOSE_REMAINING",a[a.HAS_CHOSEN_REMAINING=5]="HAS_CHOSEN_REMAINING",a))(z||{});const oe=Ye("yahtzeeRainbowStore",()=>{const a=Le(),s=Re(),c=ze(),_=He(),{personalBest:k,highscorePosition:R}=Z(c),{firebaseUser:o}=Z(s),{games:I,gamesLoading:p,gameId:H,creatorId:S,players:u,opponents:v,partyName:d,maxPlayers:N,isLocked:T,chat:F,isOwner:J}=Z(_),{setPreviousHighscores:K,updateHighscores:ne,sortHighscores:le}=c,X={onlineGames:Ze(a,be.GAME_DATA,te.YAHTZEE_RAINBOW,be.ONLINE_GAMES)},V=U(0),g=U(1),x=U(!1),m=U("soloPlayer"),O=U(m.value),w=U(ve()),A=Ee({}),b=Ee({}),se=L(()=>w.value.some(l=>l.isRolling)),$=L(()=>w.value.filter(l=>l.color===null)),fe=L(()=>!!(O.value===m.value&&$.value.length&&!x.value&&g.value===1)),he=L(()=>l=>!!(O.value===l&&!se.value&&w.value.some(f=>f.color===null)&&!x.value&&[4,2].includes(g.value))),ge=L(()=>O.value===m.value&&!se.value&&!x.value),Te=L(()=>(l,f)=>{if(O.value!==l)return[];const r=[],h=w.value.find(Y=>Y.color===f);return $.value.length===2?(r.push($.value[0].value+$.value[1].value),h&&(r.push($.value[0].value+h.value),r.push($.value[1].value+h.value))):$.value.length===1&&h&&r.push($.value[0].value+h.value),r}),Pe=L(()=>(l,f,r)=>{var h;return!!((h=A[l])!=null&&h[f].find(Y=>Y.row===r))});Ce(()=>{c.$init(te.YAHTZEE_RAINBOW)}),ie(V,l=>{l===3&&O.value===m.value&&(J.value&&(u.value.forEach(f=>{je(f.userId)}),Fe(),ye()),_e(Ke))}),ie(b,()=>{ke()}),ie([V,g,O,se,()=>u.value.length],()=>{ye()},{deep:!0}),ie(u,()=>{g.value===0&&N.value&&u.value.length===N.value&&(T.value=!0,g.value=1)});const ce=()=>{_.$reset(),V.value=0,g.value=1,x.value=!1,m.value="soloPlayer",O.value=m.value,w.value=ve(),Object.keys(A).forEach(l=>{delete A[l],delete b[l]}),K()},De=(l,f=null,r=null)=>{o.value&&(l=[{userId:o.value.uid,isOnline:!0},...l],V.value=2,g.value=r?0:1,m.value=o.value.uid,O.value=m.value,l.forEach(h=>{A[h.userId]=Ae(),b[h.userId]=null}),_.$init(te.YAHTZEE_RAINBOW,me,pe,ce),_.createGame(l,f,r))},Ge=l=>{o.value&&(m.value=o.value.uid,_.$init(te.YAHTZEE_RAINBOW,me,pe,ce),_.continueGame(l))},me=()=>(u.value.forEach(l=>{Object.keys(A).includes(l.userId)||(A[l.userId]=Ae(),b[l.userId]=null)}),{gameStatus:V.value,yahtzeeStatus:g.value,activePlayerId:O.value,dices:w.value,score:A,finalScore:b}),pe=l=>{var r;!((r=o.value)!=null&&r.uid)||O.value===m.value||(V.value=l.gameStatus,g.value=l.yahtzeeStatus,O.value=l.activePlayerId,w.value=l.dices,Object.assign(A,l.score),Object.assign(b,l.finalScore))},ye=()=>{!o.value||O.value!==m.value&&!x.value||_.pushState()},we=async()=>{for(;se.value;)await new Promise(l=>setTimeout(l,c.diceRollSpeed*1e3));return!0},Ie=()=>{const l=new Set;for(const f of Object.values(A))for(const[r,h]of Object.entries(f))h.some(Y=>Y.row===10)&&l.add(Number(r));return l},de=()=>ve().filter(l=>l.color===null||!Ie().has(l.color)),Se=async()=>{if(!fe.value)return;const l=c.diceRollSpeed*1e3;w.value.forEach(f=>{f.isRolling=!0,setTimeout(()=>{f.value=Ve(6),f.isRolling=!1},Ue(l,l/3))}),await we(),g.value=2,_e(qe)},Be=(l,f,r)=>{if(he.value){if(A[m.value][l].push({row:f}),$.value.length===2&&$.value[0].value+$.value[1].value===r)w.value=w.value.filter(h=>h.color!==null);else{const h=w.value.find(Y=>Y.color===l);if(h){const Y=$.value.find(re=>re.value+h.value===r);Y&&(w.value=w.value.filter(re=>re.id!==h.id&&re.id!==Y.id))}}Ie().size===2?V.value=3:(x.value=!0,g.value===4?g.value=5:g.value=3,setTimeout(async()=>{x.value=!1,await xe(),await Ne()},c.diceRollSpeed*1e3)),_e(Je)}},Ne=async()=>{if(ge.value)switch(g.value){case 1:case 2:case 3:{$.value.length>0?g.value=4:(g.value=1,w.value=de()),x.value=!0,O.value=_.getNextPlayerId(O.value),w.value.some(l=>l.color===null)||(w.value=de()),await xe(),x.value=!1;break}case 4:case 5:{g.value=1,w.value=de(),await Se();break}}},Oe=(l,f)=>Object.values(A[l]).filter(r=>!!r.find(h=>h.row===f)).length,Me=(l,f)=>$e[A[l][f].length]||0,We=(l,f)=>{let r=0;for(let h=0;h<10;h++)Oe(l,h)===f&&(r+=ue[f][h]||0);return r},je=l=>{let f=0;Object.values(A[l]).forEach(r=>{r.length&&(f+=$e[r.length])});for(let r=0;r<10;r++){const h=Oe(l,r);h>=3&&(f+=ue[h][r])}b[l]={total:f}},Fe=()=>{const l=Math.max(...Object.values(b).map(r=>(r==null?void 0:r.total)??0)),f=Object.keys(b).filter(r=>{var h;return((h=b[r])==null?void 0:h.total)===l});u.value.forEach(r=>{f.includes(r.userId)?f.length===1?b[r.userId].winStatus="win":b[r.userId].winStatus="tie":b[r.userId].winStatus="lose"})},ke=()=>{o!=null&&o.value&&b[m.value]&&ne({gameId:H.value??null,score:b[m.value].total})};return{collections:X,games:I,gamesLoading:p,gameId:H,creatorId:S,players:u,opponents:v,partyName:d,maxPlayers:N,isLocked:T,chat:F,isOwner:J,gameStatus:V,yahtzeeStatus:g,yahtzeeStatusLoading:x,myPlayerId:m,activePlayerId:O,score:A,finalScore:b,dices:w,whiteDices:$,isRolling:se,canRoll:fe,canSelectScore:he,canSkipTurn:ge,hasSelectedScore:Pe,canChooseOf:Te,personalBest:k,highscorePosition:R,$reset:ce,roll:Se,hasFinishedRolling:we,selectScore:Be,passTurn:Ne,getColumnTotal:Me,getBonusColumnTotal:We,setPreviousHighscores:K,updateYahtzeeHighscore:ke,sortHighscores:le,fetchOnlineGames:_.fetchGames,createOnlineGame:De,continueOnlineGame:Ge,leaveOnlineGame:_.leaveGame,deleteOnlineGame:_.deleteGame,getPlayerDisplayName:_.getPlayerDisplayName,getNextPlayerId:_.getNextPlayerId}},{persist:{enabled:!0}}),ve=()=>[{id:1,color:4,value:1,isRolling:!1},{id:2,color:3,value:2,isRolling:!1},{id:3,color:2,value:3,isRolling:!1},{id:4,color:1,value:4,isRolling:!1},{id:5,color:0,value:5,isRolling:!1},{id:6,color:null,value:6,isRolling:!1},{id:7,color:null,value:6,isRolling:!1}],Ae=()=>({0:[],1:[],2:[],3:[],4:[]}),ae={0:[12,10,8,6,4,2,4,6,8,10,12],1:[2,4,6,8,10,12,10,8,6,4,2],2:[12,11,10,9,8,7,6,5,4,3,2],3:[2,3,4,5,6,7,8,9,10,11,12],4:[2,3,4,5,6,7,8,9,10,11,12]},$e={1:1,2:2,3:4,4:7,5:11,6:16,7:22,8:29,9:37,10:46,11:56},ue={3:[2,2,1,1,1,1,1,1,1,2],4:[5,4,4,2,2,3,2,2,4,4],5:[10,8,6,3,4,5,4,3,6,8]},_l={0:"text-purple-500",1:"text-blue-500",2:"text-yellow-500",3:"text-orange-500",4:"text-red-500"},vl={0:"bg-purple-700",1:"bg-blue-700",2:"bg-yellow-700",3:"bg-orange-700",4:"bg-red-700"},fl={0:"fill-purple-500",1:"fill-blue-500",2:"fill-yellow-500",3:"fill-orange-500",4:"fill-red-500"},hl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},gl=["fill"],ml=B({__name:"Dice1",props:{color:{},backgroundColor:{}},setup(a){return(s,c)=>(t(),n("svg",hl,[i("rect",{class:j(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"50",cy:"50",r:"10",fill:s.color},null,8,gl)]))}}),pl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},yl=["fill"],wl=["fill"],Il=B({__name:"Dice2",props:{color:{},backgroundColor:{}},setup(a){return(s,c)=>(t(),n("svg",pl,[i("rect",{class:j(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,yl),i("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,wl)]))}}),Sl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Nl=["fill"],Ol=["fill"],kl=["fill"],bl=B({__name:"Dice3",props:{color:{},backgroundColor:{}},setup(a){return(s,c)=>(t(),n("svg",Sl,[i("rect",{class:j(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,Nl),i("circle",{cx:"50",cy:"50",r:"10",fill:s.color},null,8,Ol),i("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,kl)]))}}),El={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},xl=["fill"],Al=["fill"],$l=["fill"],Rl=["fill"],Hl=B({__name:"Dice4",props:{color:{},backgroundColor:{}},setup(a){return(s,c)=>(t(),n("svg",El,[i("rect",{class:j(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,xl),i("circle",{cx:"25",cy:"75",r:"10",fill:s.color},null,8,Al),i("circle",{cx:"75",cy:"25",r:"10",fill:s.color},null,8,$l),i("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,Rl)]))}}),Cl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},Tl=["fill"],Pl=["fill"],Dl=["fill"],Gl=["fill"],Bl=["fill"],Ml=B({__name:"Dice5",props:{color:{},backgroundColor:{}},setup(a){return(s,c)=>(t(),n("svg",Cl,[i("rect",{class:j(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,Tl),i("circle",{cx:"25",cy:"75",r:"10",fill:s.color},null,8,Pl),i("circle",{cx:"50",cy:"50",r:"10",fill:s.color},null,8,Dl),i("circle",{cx:"75",cy:"25",r:"10",fill:s.color},null,8,Gl),i("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,Bl)]))}}),Wl={width:"100",height:"100",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},jl=["fill"],Fl=["fill"],Yl=["fill"],Ll=["fill"],zl=["fill"],Zl=["fill"],Vl=B({__name:"Dice6",props:{color:{},backgroundColor:{}},setup(a){return(s,c)=>(t(),n("svg",Wl,[i("rect",{class:j(s.backgroundColor),width:"100",height:"100",rx:"10",ry:"10",stroke:"#000000","stroke-width":"5"},null,2),i("circle",{cx:"25",cy:"25",r:"10",fill:s.color},null,8,jl),i("circle",{cx:"25",cy:"50",r:"10",fill:s.color},null,8,Fl),i("circle",{cx:"25",cy:"75",r:"10",fill:s.color},null,8,Yl),i("circle",{cx:"75",cy:"25",r:"10",fill:s.color},null,8,Ll),i("circle",{cx:"75",cy:"50",r:"10",fill:s.color},null,8,zl),i("circle",{cx:"75",cy:"75",r:"10",fill:s.color},null,8,Zl)]))}}),Ul=B({__name:"Dice",props:{dice:{}},setup(a){const s={1:ml,2:Il,3:bl,4:Hl,5:Ml,6:Vl};return(c,_)=>(t(),n("div",{class:j(["cursor-pointer",{"animate-spin":c.dice.isRolling}])},[(t(),D(Xe(s[c.dice.value]),{color:"black",backgroundColor:c.dice.color!==null?e(fl)[c.dice.color]:"fill-white",width:"40",height:"40"},null,8,["backgroundColor"]))],2))}}),ql={class:"w-full flex flex-col md:flex-row justify-between gap-3 md:gap-10"},Jl={class:"text-white"},Kl={key:0,class:"border-none"},Xl={key:1,class:"text-center",colspan:"3"},Ql={key:0},et={key:0,class:"border-none"},lt={key:0},tt={key:1},st=B({__name:"Scoreboard",setup(a){const s=oe(),{myPlayerId:c,gameStatus:_,canChooseOf:k,canSelectScore:R,score:o,players:I}=Z(s),p=U(!1);return(H,S)=>(t(),n(E,null,[i("div",ql,[(t(!0),n(E,null,Q(e(I),u=>(t(),n("table",{key:u.userId,class:j(["w-full mt-5 text-sm md:text-base text-left",e(_)===e(C).HAS_FINISHED?"text-neutral-500":"text-white"])},[i("thead",Jl,[i("tr",null,[i("th",{class:j(["text-center",u.isOnline?"text-green-400":"text-red-400"]),colspan:"5"},y(u.userId===e(c)?"You":e(s).getPlayerDisplayName(u.userId)),3),p.value?(t(),n("th",Kl)):P("",!0),p.value?(t(),n("th",Xl," Bonus ")):P("",!0)])]),e(o)[u.userId]?(t(),n("tbody",Ql,[(t(),n(E,null,Q(11,v=>i("tr",{key:v},[(t(!0),n(E,null,Q([e(M).Red,e(M).Orange,e(M).Yellow,e(M).Blue,e(M).Purple],d=>(t(),n("td",{key:d,class:j(["relative",[e(_l)[d],{[e(vl)[d]]:e(o)[u.userId][d].length&&v-1<=e(o)[u.userId][d][e(o)[u.userId][d].length-1].row,"opacity-25":e(o)[u.userId][d].length&&v-1<e(o)[u.userId][d][e(o)[u.userId][d].length-1].row&&e(o)[u.userId][d].every(N=>N.row!==v-1)}]])},[e(o)[u.userId][d].length&&v-1<=e(o)[u.userId][d][e(o)[u.userId][d].length-1].row?(t(),n(E,{key:0},[G(y(e(ae)[d][v-1]),1)],64)):e(R)(u.userId)&&e(k)(u.userId,d).includes(e(ae)[d][v-1])?(t(),D(ee,{key:1,class:"size-7 !absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",variant:"neutral",disabled:u.userId!==e(c),onClick:N=>e(s).selectScore(d,v-1,e(ae)[d][v-1])},{default:q(()=>[G(y(e(ae)[d][v-1]),1)]),_:2},1032,["disabled","onClick"])):(t(),n(E,{key:2},[G(y(e(ae)[d][v-1]),1)],64))],2))),128)),p.value?(t(),n("td",et)):P("",!0),p.value&&v<11?(t(!0),n(E,{key:1},Q(Object.keys(e(ue)),d=>(t(),n("td",{key:d,class:j({"bg-opacity-75 bg-white text-black font-bold":Object.values(e(o)[u.userId]).flat().filter(N=>N.row===v-1).length===Number(d)})},y(e(ue)[Number(d)][v-1]),3))),128)):P("",!0)])),64)),p.value?(t(),n("tr",lt,S[1]||(S[1]=[i("td",{class:"h-6 border-none",colspan:"5"},null,-1)]))):P("",!0),p.value?(t(),n("tr",tt,[(t(!0),n(E,null,Q([e(M).Red,e(M).Orange,e(M).Yellow,e(M).Blue,e(M).Purple],v=>(t(),n("td",{key:v},y(e(s).getColumnTotal(u.userId,v)),1))),128)),S[2]||(S[2]=i("td",{class:"border-none"},null,-1)),(t(),n(E,null,Q([3,4,5],v=>i("td",{key:v},y(e(s).getBonusColumnTotal(u.userId,v)),1)),64))])):P("",!0)])):P("",!0)],2))),128))]),W(ee,{class:"!w-full",variant:"neutral",icon:p.value?"pi pi-eye-slash":"pi pi-eye",text:"",label:p.value?"Hide scores":"Show scores",onClick:S[0]||(S[0]=u=>p.value=!p.value)},null,8,["icon","label"])],64))}}),at=dl(st,[["__scopeId","data-v-7dfd2de2"]]),ot={class:"w-full flex justify-center"},nt={class:"text-lg"},rt=B({__name:"StatusHeader",setup(a){const s=oe(),{yahtzeeStatus:c,yahtzeeStatusLoading:_,activePlayerId:k,myPlayerId:R,players:o}=Z(s),I=L(()=>{var p;return k.value===R.value?"You":((p=o.value.find(H=>H.userId===k.value))==null?void 0:p.displayName)||"Unknown"});return(p,H)=>(t(),n("div",ot,[i("h3",nt,[e(c)===e(z).HAS_STARTED||e(c)===e(z).HAS_CHOSEN_REMAINING?(t(),n(E,{key:0},[G(y(I.value)+" can now roll the dices. ",1)],64)):e(c)===e(z).HAS_THROWN_DICES?(t(),n(E,{key:1},[G(y(I.value)+" can now choose a score, or pass the turn. ",1)],64)):e(c)===e(z).HAS_CHOSEN_SCORE?(t(),n(E,{key:2},[G(y(I.value)+" chose a score. ",1)],64)):e(c)===e(z).CAN_CHOOSE_REMAINING?(t(),n(E,{key:3},[G(y(I.value)+" can choose from the remaining dices. ",1)],64)):P("",!0)])]))}}),it={class:"w-full flex flex-col gap-3"},ut={class:"w-full flex flex-col md:flex-row gap-5 md:gap-10 justify-center"},ct={class:"w-full md:w-1/2 flex justify-center gap-3"},dt=B({__name:"YahtzeeMainGame",setup(a){const s=oe(),c=He(),{isOwner:_,yahtzeeStatus:k,yahtzeeStatusLoading:R,myPlayerId:o,activePlayerId:I,dices:p,chat:H,maxPlayers:S,isLocked:u,isRolling:v,canRoll:d,canSkipTurn:N}=Z(s),{players:T}=Z(c),F=L(()=>S.value!==null&&S.value>0?S.value-T.value.length:0),J=L(()=>_.value&&T.value.length>1),K=()=>{u.value=!0,k.value=z.HAS_STARTED};return(ne,le)=>(t(),n("div",it,[W(rt),i("div",ut,[W(e(Qe),{class:"w-full md:w-1/2"},{default:q(()=>[e(k)===e(z).WAITING_FOR_OPPONENTS?(t(),D(ee,{key:0,class:"w-full",variant:"tertiary",disabled:!J.value,onClick:K},{default:q(()=>[G(y(F.value?`Waiting for ${F.value} more player${F.value!==1?"s":""}`:e(_)?e(T).length>1?"Everyone is here? Start the game!":"Waiting for more players to join":"Waiting for the game to start"),1)]),_:1},8,["disabled"])):e(I)!==e(o)?(t(),D(ee,{key:1,class:"w-full",variant:"tertiary",disabled:""},{default:q(()=>[G(y(`${e(c).getPlayerDisplayName(e(I))}'s turn`),1)]),_:1})):e(v)||e(R)?(t(),D(ee,{key:2,class:"w-full",variant:"neutral",disabled:""},{default:q(()=>[G(y(e(v)?"Rolling...":"Loading..."),1)]),_:1})):e(d)?(t(),D(ee,{key:3,class:"w-full",variant:"tertiary",disabled:e(v),onClick:e(s).roll},{default:q(()=>[G(y(e(I)!==e(o)?`${e(c).getPlayerDisplayName(e(I))}'s turn`:"Roll"),1)]),_:1},8,["disabled","onClick"])):e(N)?(t(),D(ee,{key:4,class:"w-full",variant:"neutral",onClick:e(s).passTurn},{default:q(()=>[G(y(e(k)===e(z).CAN_CHOOSE_REMAINING?"Reroll":e(k)===e(z).HAS_CHOSEN_SCORE?"Next player":"Pass turn"),1)]),_:1},8,["onClick"])):P("",!0)]),_:1}),i("div",ct,[(t(!0),n(E,null,Q(e(p),X=>(t(),D(Ul,{key:X.id,dice:X},null,8,["dice"]))),128))])]),W(at),W(nl,{chats:e(H)??[],onSendChat:le[0]||(le[0]=X=>H.value=[...e(H)??[],X])},null,8,["chats"])]))}}),_t={class:"flex flex-col gap-3"},vt={class:"text-center text-xl md:text-3xl font-bold"},ft={key:0,class:"text-green-500"},ht={key:1,class:"text-purple-500"},gt={key:2,class:"text-red-500"},mt={key:3,class:"text-blue-500 font-bold"},pt={key:4,class:"text-blue-500 font-bold"},yt={key:5,class:"text-blue-500 font-bold"},wt={class:"text-center text-md md:text-lg"},It=B({__name:"YahtzeeResults",setup(a){const s=oe(),{myPlayerId:c,finalScore:_,opponents:k}=Z(s),{currentHighscorePosition:R,hasImprovedHighscorePosition:o,hasImprovedPersonalBest:I}=sl(te.YAHTZEE_RAINBOW);return(p,H)=>{var S,u,v,d,N;return t(),n("div",_t,[i("div",vt,[((S=e(_)[e(c)])==null?void 0:S.winStatus)==="win"?(t(),n("p",ft," You won with "+y((u=e(_)[e(c)])==null?void 0:u.total)+" points! ",1)):((v=e(_)[e(c)])==null?void 0:v.winStatus)==="tie"?(t(),n("p",ht," You tied with "+y((d=e(_)[e(c)])==null?void 0:d.total)+" points! ",1)):(t(),n("p",gt," You lost with "+y((N=e(_)[e(c)])==null?void 0:N.total)+" points. ",1)),e(o)&&e(R)===1?(t(),n("p",mt," HIGHSCORE! ")):e(o)?(t(),n("p",pt," LEADERBOARD IMPROVEMENT! ")):e(I)?(t(),n("p",yt," PERSONAL BEST! ")):P("",!0)]),i("div",wt,[(t(!0),n(E,null,Q(e(k),T=>{var F;return t(),n("p",{key:T.userId},y(T.displayName)+" has "+y((F=e(_)[T.userId])==null?void 0:F.total)+" points ",1)}),128))])])}}}),St={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},Nt={class:"flex flex-wrap justify-center gap-3"},Ot={key:0,class:"w-full"},Ct=B({__name:"Yahtzee",setup(a){const s=oe(),c=Re(),{gameId:_,partyName:k,isOwner:R,gameStatus:o,myPlayerId:I,finalScore:p,personalBest:H}=Z(s),{isLoggedIn:S}=Z(c),{$reset:u,createOnlineGame:v,continueOnlineGame:d,leaveOnlineGame:N,deleteOnlineGame:T,updateYahtzeeHighscore:F}=s,J=U(!1),K=U(!1),ne=()=>{o.value=C.FINDING_OPPONENT},le=async()=>{_.value&&(R.value?await T():await N()),u()},X=async()=>{_.value&&await N(),u()};return Ce(()=>{_.value&&d(_.value)}),el(async()=>{_.value&&(await N(),u())}),(V,g)=>(t(),D(ll,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Rainbow Yahtzee",tags:e(k)?[{value:e(k),severity:"danger"}]:void 0,description:e(o)===e(C).HAS_NOT_STARTED?"Play with a friend.":void 0},{right:q(()=>[i("div",St,[W(ee,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:g[0]||(g[0]=x=>J.value=!0)}),W(ul,{"icon-only":"","is-solo":!1,"is-owner":e(R),"has-game-started":e(o)>=e(C).IS_PLAYING,"is-game-over":e(o)===e(C).HAS_FINISHED,onDelete:le},null,8,["is-owner","has-game-started","is-game-over"])])]),default:q(()=>{var x;return[i("div",Nt,[e(o)===e(C).FINDING_OPPONENT?(t(),n("div",Ot,[W(rl,{"allow-party":"",onCreateOnlineGame:g[1]||(g[1]=m=>e(v)([{userId:m}])),onContinueOnlineGame:e(d),onCreateParty:g[2]||(g[2]=(m,O)=>e(v)([],m,O)),onJoinParty:e(d)},null,8,["onContinueOnlineGame","onJoinParty"])])):e(o)===e(C).IS_PLAYING?(t(),D(dt,{key:1})):e(o)===e(C).HAS_FINISHED?(t(),D(It,{key:2})):P("",!0)]),W(il,{"is-viewing-highscores":K.value,"onUpdate:isViewingHighscores":g[3]||(g[3]=m=>K.value=m),"has-solo":!1,"is-solo":!1,hasMultiplayer:"",isMultiplayer:"","is-owner":e(R),"is-main-menu":e(o)===e(C).HAS_NOT_STARTED,"has-game-started":e(o)>=e(C).IS_PLAYING,"is-game-over":e(o)===e(C).HAS_FINISHED,onPlayMultiplayer:ne,onRestart:le,onGoBack:X},null,8,["is-viewing-highscores","is-owner","is-main-menu","has-game-started","is-game-over"]),K.value?(t(),D(al,{key:0,"game-id":e(te).YAHTZEE_RAINBOW},null,8,["game-id"])):P("",!0),W(ol,{"is-logged-in":e(S),"is-solo":!1,"is-game-over":e(o)===e(C).HAS_FINISHED,"final-score":((x=e(p)[e(I)])==null?void 0:x.total)??0,"personal-best":e(H),"redirect-route":e(tl).GAMES_YAHTZEE_RAINBOW,onUpdateHighscore:g[4]||(g[4]=m=>e(F)())},null,8,["is-logged-in","is-game-over","final-score","personal-best","redirect-route"]),W(cl,{"game-id":e(te).YAHTZEE_RAINBOW,"is-open":J.value,"onUpdate:isOpen":g[5]||(g[5]=m=>J.value=m)},null,8,["game-id","is-open"])]}),_:1},8,["tags","description"]))}});export{Ct as default};
