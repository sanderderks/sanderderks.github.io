import{d as J,r as U,c as V,b5 as w,aU as K,b1 as P,f as Q,s as W,a as X,v as Y,l as u,p as v,H as S,G as T,x as y,n as t,q as o,t as g,w as p,_,m as l,U as z,C as Z,M as b,b6 as ee,V as F}from"../bundle.js";import{_ as le}from"./c-Dialog.vue_vue_type_script_setup_true_lang-DTvaJL_v.js";import{_ as se}from"./c-Dice.vue_vue_type_script_setup_true_lang-BzsG6b_t.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-B7eHDEad.js";const te=J("sandboxStore",()=>{const s=U([]),x=U("asc"),r=V(()=>w(s.value,e=>e.value)),C=V(()=>s.value.some(e=>e.dices.some(n=>n.isRolling))),k=V(()=>w(s.value.flatMap(e=>e.dices),e=>e.value)),h=()=>{s.value=[]},D=e=>{s.value.push({...e})},N=e=>{s.value=s.value.map(n=>n.id===e.id?{...e}:n)},j=e=>{s.value.splice(e,1)},I=()=>{K(s.value)},$=e=>{if(!s.value.length)return;e&&(x.value=e);const n=c=>x.value==="asc"?c:-c;s.value[0].dices.length?s.value.sort((c,f)=>n(w(c.dices,i=>i.value)-w(f.dices,i=>i.value))):s.value.some(c=>!!c.value)?s.value.sort((c,f)=>n(c.value-f.value)):s.value.sort((c,f)=>n(c.name.localeCompare(f.name)))};return{sandboxItems:s,sortDirection:x,totalValue:r,dicesTotal:k,isRolling:C,$reset:h,add:D,edit:N,remove:j,shuffle:I,order:$,addDices:()=>{s.value.forEach(e=>{e.dices.push({id:e.dices.length,value:1,selected:!1,isRolling:!1})})},removeDices:()=>{s.value.forEach(e=>{e.dices.splice(e.dices.length-1,1)})},rollDices:()=>{s.value.forEach(e=>{e.dices.forEach(n=>{n.isRolling=!0,n.value=Math.floor(Math.random()*6)+1,setTimeout(()=>{n.isRolling=!1,C.value||$("desc")},P(3e3,1e3/3))})})}}},{persist:{enabled:!0}}),ae={class:"mt-5 flex flex-col gap-10"},oe={class:"flex flex-col md:flex-row justify-between gap-3"},ne={key:0},ce={class:"flex flex-col gap-3"},ie={class:"w-full flex flex-wrap justify-between"},de={class:"flex gap-2 items-center"},ue={class:"text-xl font-bold"},re={key:0},fe={key:1},me={key:2,class:"text-neutral-300"},ve={class:"w-full md:w-fit flex flex-wrap gap-3 justify-end"},pe={key:0,class:"flex justify-center gap-1"},_e={class:"w-full sm:w-fit flex gap-1 justify-end"},ge={class:"w-full md:w-1/2 grid grid-cols-2"},xe={class:"font-bold"},ye={class:"font-bold"},be={class:"flex flex-col gap-3"},ke={key:0,class:"flex flex-col gap-10"},he={class:"flex flex-col md:flex-row gap-3"},we={class:"flex flex-col md:flex-row gap-3"},Ve=Q({__name:"Sandbox",setup(s){const x=te(),{sandboxItems:r,sortDirection:C,totalValue:k,dicesTotal:h,isRolling:D}=W(x),{$reset:N,add:j,edit:I,remove:$,shuffle:B,order:M,addDices:O,removeDices:e,rollDices:n}=x,c=U(!1),f=()=>({id:Y(),name:"",value:0,selected:!1,dices:[]}),i=X(f()),A=V(()=>r.value.some(R=>R.id===i.id)),H=R=>{Object.assign(i,R??f()),c.value=!0},E=()=>{c.value=!1,Object.assign(i,f())},G=()=>{j(i),E()},L=()=>{I(i),E()};return(R,d)=>(t(),u(y,null,[v(T,{class:"!bg-sky-300 !bg-opacity-50 my-5 !rounded-secondary",title:"Sandbox",description:"Do anything!","description-props":{class:"!text-neutral-300"}},{default:S(()=>[o("div",ae,[o("div",oe,[v(_,{class:"w-full md:w-1/3",type:"green",label:"Add Item",onClick:H}),l(r).length?(t(),g(_,{key:0,class:"w-full md:w-1/3",type:"neutral",label:"Reset",onClick:l(N)},null,8,["onClick"])):p("",!0)]),l(r).length?(t(),u(y,{key:1},[(t(!0),u(y,null,z(l(r),(a,q)=>(t(),g(T,{key:a.id,class:Z({"bg-orange-300 bg-opacity-45":a.selected})},{default:S(()=>[o("div",ce,[o("div",ie,[o("div",de,[o("h2",ue,b(a.name),1),a.dices.length&&!l(D)?(t(),u("p",re,b(l(w)(a.dices,m=>m.value))+" dice total ",1)):l(r).some(m=>!!m.value)?(t(),u("p",fe,b(a.value)+" total",1)):(t(),u("p",me,b(q+1)+". ",1))]),o("div",ve,[a.dices.length?(t(),u("div",pe,[(t(!0),u(y,null,z(a.dices,m=>(t(),g(se,{dice:m,onClick:Ce=>m.selected=!m.selected},null,8,["dice","onClick"]))),256))])):p("",!0),o("div",_e,[v(_,{class:"w-full md:w-fit text-nowrap",label:"Edit Item",onClick:m=>H(a)},null,8,["onClick"]),v(ee,{class:"ml-2",onClick:m=>l($)(q)},null,8,["onClick"])])])])])]),_:2},1032,["class"]))),128)),l(k)||l(h)&&!l(D)?(t(),g(T,{key:0,class:"bg-pink-300 bg-opacity-45"},{default:S(()=>[o("div",ge,[l(h)?(t(),u(y,{key:0},[d[4]||(d[4]=o("p",null,"Total:",-1)),o("p",xe,b(l(h)),1)],64)):l(k)?(t(),u(y,{key:1},[d[5]||(d[5]=o("p",null,"Total:",-1)),o("p",ye,b(l(k)),1)],64)):p("",!0)])]),_:1})):p("",!0)],64)):(t(),u("p",ne,"No items in the sandbox yet.")),o("div",be,[l(r).length>1?(t(),u("div",ke,[o("div",he,[v(_,{class:"w-full",type:"neutral",label:"Shuffle",onClick:l(B)},null,8,["onClick"]),v(_,{class:"w-full",type:"neutral",label:"Order",onClick:d[0]||(d[0]=a=>l(M)(l(C)==="asc"?"desc":"asc"))})]),o("div",we,[l(r)[0].dices.length<5?(t(),g(_,{key:0,class:"w-full",type:"neutral",label:"Add Dice",onClick:l(O)},null,8,["onClick"])):p("",!0),l(r)[0].dices.length?(t(),g(_,{key:1,class:"w-full",type:"secondary",label:"Remove Dice",onClick:l(e)},null,8,["onClick"])):p("",!0),l(r).some(a=>!!a.dices.length)?(t(),g(_,{key:2,class:"w-full",label:"Roll Dices",onClick:l(n)},null,8,["onClick"])):p("",!0)])])):p("",!0)])])]),_:1}),v(le,{"is-open":c.value,title:A.value?"Update item":"Add item",description:"Here you can setup your sandbox data.","confirm-text":A.value?"Update":"Add",onConfirm:d[3]||(d[3]=a=>A.value?L():G()),onCancel:E},{default:S(()=>[v(F,{name:"name",label:"Name",modelValue:i.name,"onUpdate:modelValue":d[1]||(d[1]=a=>i.name=a)},null,8,["modelValue"]),v(F,{name:"number",label:"Numeric value","input-props":{type:"number"},"model-value":i.value.toString(),"onUpdate:modelValue":d[2]||(d[2]=a=>i.value=Number(a))},null,8,["model-value"])]),_:1},8,["is-open","title","confirm-text"])],64))}});export{Ve as default};
