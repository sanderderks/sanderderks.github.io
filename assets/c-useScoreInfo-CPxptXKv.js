import{M as B,bV as H,c1 as D,cI as I,bX as c,aC as U,aK as a,u as r,v as l,bi as y,F as f,aV as N,b9 as i,H as h,t as _,c2 as V,q as k}from"../bundle.js";import{_ as G}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";const x={class:"w-full mt-5 text-sm md:text-base text-left"},C={key:1},T=B({__name:"Highscores",props:{gameId:{},unit:{}},setup(n){const d=n,g=H(),m=D(),p=I(),{publicUsers:b}=c(m),{firebaseUser:o}=c(g),{allGameData:u}=c(p),{fetchGameData:v}=p,S=e=>{var t;return((t=b.value.find(s=>s.id===e))==null?void 0:t.displayName)??"Unknown"};return U(()=>{var e;v(d.gameId,(e=o.value)==null?void 0:e.uid),setInterval(()=>{var t;v(d.gameId,(t=o.value)==null?void 0:t.uid)},1e3*60*5)}),(e,t)=>(a(),r("table",x,[l("tbody",null,[y(u)[e.gameId].gameData.highscores.length?(a(!0),r(f,{key:0},N(y(u)[e.gameId].gameData.highscores,(s,P)=>(a(),r("tr",null,[l("th",null,i(P+1),1),l("th",null,i(S(s.id)),1),l("td",null,[h(i(s.score)+" ",1),e.unit?(a(),r(f,{key:0},[h(i(e.unit),1),s.score!==1?(a(),r(f,{key:0},[h("s")],64)):_("",!0)],64)):_("",!0),s.bonus?(a(),r(f,{key:1},[h("("+i(s.bonus)+" bonus)",1)],64)):_("",!0)]),l("td",null,i(y(V)(s.date)),1)]))),256)):(a(),r("tr",C,t[0]||(t[0]=[l("th",null,"There are no highscores yet.",-1)])))])]))}}),M=G(T,[["__scopeId","data-v-c04d8d11"]]),q=n=>{const d=H(),g=I(),{allGameData:m,highscorePosition:p,personalBest:b}=c(g),{firebaseUser:o}=c(d),u=k(()=>o.value?p.value(n,o.value.uid):null),v=k(()=>{const e=m.value[n].previousHighscorePosition;return u.value&&e?e>u.value:!1}),S=k(()=>{const e=m.value[n].previousPersonalBest;return o.value&&e?e<b.value(n,o.value.uid):!1});return{currentHighscorePosition:u,hasImprovedHighscorePosition:v,hasImprovedPersonalBest:S}};export{M as H,q as u};
