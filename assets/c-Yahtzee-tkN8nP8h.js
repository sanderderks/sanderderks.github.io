import{d as oe,s as z,w as j,f as y,L as de,g as l,j as t,q as r,m as o,I as v,h as e,k as d,_ as O,A as m,a3 as f,aQ as S,C as b,aR as ve,aS as se,o as _e,ax as ue,z as U,a as ce,c as me,l as E,an as fe,E as Se,y as re,a7 as Ne,R as Ee}from"../bundle.js";import{u as ne,s as Oe,P as i,G as s,S as T,_ as pe}from"./c-Dice.vue_vue_type_script_setup_true_lang-Csrhhggu.js";import{_ as ye}from"./c-GameSettingsDialog.vue_vue_type_script_setup_true_lang-DyQMKhMT.js";import{u as we,H as Te}from"./c-useScoreInfo-BCYDvVMj.js";import{_ as ie}from"./c-_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Ae,a as he}from"./c-GameChat.vue_vue_type_script_setup_true_lang-ByfsnxNw.js";import"./c-Dice6.vue_vue_type_script_setup_true_lang-CbzU1YFL.js";import"./c-Dialog.vue_vue_type_script_setup_true_lang-BGsOqr_m.js";import"./c-UsersBar.vue_vue_type_script_setup_true_lang-DjHGpPgu.js";const ke={class:"h-10"},Ie={class:"w-1/2 md:w-1/3"},He={key:0},Pe={key:1,class:"!ps-1 md:ps-1"},ge={key:2},Re={key:0},xe={key:1},De={key:2},Le=oe({__name:"ScoreCell",props:{row:{},hasValue:{type:[Number,Boolean]}},setup(Z){const H=Z,x=ne(),{gameType:h,gameStatus:u,activePlayer:P,reroll:k}=z(x),{selectScore:D,getScore:g,getActualValue:I}=x,n=j(!1),$=Oe[H.row],L=y(()=>g(H.row)),R=y(()=>g(H.row,i.OPPONENT)),N=y(()=>I(H.row,H.hasValue)),w=y(()=>N.value===!1?"X":N.value);return de(()=>N.value,()=>{n.value=!0,setTimeout(()=>{n.value=!1})}),(Y,F)=>(t(),l("tr",ke,[r("th",Ie,v(e($).title),1),L.value?(t(),l("td",He,v(L.value.value===!1?"X":L.value.value),1)):e(k)>=0&&!n.value?(t(),l("td",Pe,[d(O,{class:"size-8",variant:N.value===!1||N.value===0?"neutral":void 0,onClick:F[0]||(F[0]=M=>e(D)(Y.row,N.value))},{default:m(()=>[f(v(w.value),1)]),_:1},8,["variant"])])):(t(),l("td",ge)),e(h)===e(S).ONLINE?(t(),l(b,{key:3},[R.value?(t(),l("td",Re,v(R.value.value===!1?"X":R.value.value),1)):e(P)===e(i).OPPONENT&&e(u)!==e(s).HAS_STARTED?(t(),l("td",xe,[d(O,{class:"size-8",variant:N.value===!1||N.value===0?"neutral":"danger"},{default:m(()=>[f(v(w.value),1)]),_:1},8,["variant"])])):(t(),l("td",De))],64)):o("",!0)]))}}),A=ie(Le,[["__scopeId","data-v-6b1a7992"]]),Ge={key:0,class:"text-white"},Ce={key:0},$e={key:0},Fe={key:0},be={key:0,class:"h-12 md:h-auto text-red-500"},Ye={key:0},Be={class:"h-12 md:h-auto text-pink-500"},Ve={key:0,class:"text-purple-500 font-bold"},Ue={key:1,class:"text-red-500 font-bold"},ze={key:2,class:"text-green-500 font-bold"},je={key:0},Me={key:1,class:"h-12 md:h-auto text-red-500 font-bold"},Xe={key:0},Ze={key:1},Ke={key:2},We={key:3},qe={key:4},Je={key:5},Qe=oe({__name:"Scoreboard",setup(Z){const H=ne(),x=ve(),{gameType:h,gameStatus:u,bonus:P,hasOfValue:k,hasThreeOfAKind:D,hasFourOfAKind:g,hasFullHouse:I,hasSmallStraight:n,hasLargeStraight:$,hasYahtzee:L,diceTotal:R,scoreTotalOf:N,finalScore:w}=z(H),{onlineGameOpponentActive:Y,onlineGameOpponentName:F}=z(x),{currentHighscorePosition:M,hasImprovedHighscorePosition:X,hasImprovedPersonalBest:K}=we(se.YAHTZEE),G=j(),B=j(!1),W=y(()=>k.value(1)),q=y(()=>k.value(2)),V=y(()=>k.value(3)),J=y(()=>k.value(4)),Q=y(()=>k.value(5)),ee=y(()=>k.value(6)),C=y(()=>N.value("top",i.PLAYER)),p=y(()=>N.value("top",i.OPPONENT)),te=y(()=>N.value("bottom",i.PLAYER)),ae=y(()=>N.value("bottom",i.OPPONENT));return _e(()=>{G.value=setInterval(()=>{B.value=!B.value},500)}),ue(()=>{clearInterval(G.value)}),(le,_)=>(t(),l("table",{class:U(["w-full mt-5 text-sm md:text-base text-left",e(u)===e(s).HAS_FINISHED?"text-neutral-500":"text-white",e(u)===e(s).HAS_NOT_STARTED?B.value?"even":"odd":void 0])},[e(h)===e(S).ONLINE?(t(),l("thead",Ge,[r("tr",null,[_[0]||(_[0]=r("th",null,null,-1)),_[1]||(_[1]=r("th",null,"You",-1)),r("th",{class:U(e(Y)?"text-green-400":"text-red-400")},v(e(F)),3)])])):o("",!0),r("tbody",null,[d(A,{row:e(T).ONES,"has-value":W.value},null,8,["row","has-value"]),d(A,{row:e(T).TWOS,"has-value":q.value},null,8,["row","has-value"]),d(A,{row:e(T).THREES,"has-value":V.value},null,8,["row","has-value"]),d(A,{row:e(T).FOURS,"has-value":J.value},null,8,["row","has-value"]),d(A,{row:e(T).FIVES,"has-value":Q.value},null,8,["row","has-value"]),d(A,{row:e(T).SIXES,"has-value":ee.value},null,8,["row","has-value"]),e(u)>e(s).HAS_NOT_STARTED?(t(),l("tr",{key:0,class:U(["h-12 md:h-auto",e(u)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[_[2]||(_[2]=r("th",null,"TOP",-1)),r("td",null,v(e(u)>=e(s).HAS_STARTED?C.value:""),1),e(h)===e(S).ONLINE?(t(),l("td",Ce,v(e(u)>=e(s).HAS_STARTED?p.value:""),1)):o("",!0)],2)):o("",!0),e(u)>e(s).HAS_NOT_STARTED?(t(),l("tr",{key:1,class:U(["h-12 md:h-auto",e(u)===e(s).HAS_FINISHED?C.value>=63?"text-yellow-500":"text-white":"text-neutral-500"])},[_[3]||(_[3]=r("th",null,"BONUS",-1)),r("td",null,v(C.value>=63?35:e(u)===e(s).HAS_FINISHED?"X":""),1),e(h)===e(S).ONLINE?(t(),l("td",$e,v(p.value>=63?35:e(u)===e(s).HAS_FINISHED?"X":""),1)):o("",!0)],2)):o("",!0),d(A,{row:e(T).THREE_OF_A_KIND,"has-value":e(D)},null,8,["row","has-value"]),d(A,{row:e(T).FOUR_OF_A_KIND,"has-value":e(g)},null,8,["row","has-value"]),d(A,{row:e(T).FULL_HOUSE,"has-value":e(I)},null,8,["row","has-value"]),d(A,{row:e(T).SMALL_STRAIGHT,"has-value":e(n)},null,8,["row","has-value"]),d(A,{row:e(T).LARGE_STRAIGHT,"has-value":e($)},null,8,["row","has-value"]),d(A,{row:e(T).YAHTZEE,"has-value":e(L)},null,8,["row","has-value"]),d(A,{row:e(T).CHANCE,"has-value":e(R)},null,8,["row","has-value"]),e(u)>e(s).HAS_NOT_STARTED?(t(),l("tr",{key:2,class:U(["h-12 md:h-auto",e(u)===e(s).HAS_FINISHED?"text-white":"text-neutral-500"])},[_[4]||(_[4]=r("th",null,"BOTTOM",-1)),r("td",null,v(e(u)>=e(s).HAS_STARTED?te.value:""),1),e(h)===e(S).ONLINE?(t(),l("td",Fe,v(e(u)>=e(s).HAS_STARTED?ae.value:""),1)):o("",!0)],2)):o("",!0),e(u)===e(s).HAS_FINISHED?(t(),l(b,{key:3},[e(P)[e(i).PLAYER]||e(h)===e(S).ONLINE&&e(P)[e(i).OPPONENT]?(t(),l("tr",be,[_[5]||(_[5]=r("th",null,"YAHTZEE BONUS",-1)),r("td",null,v(e(P)[e(i).PLAYER]),1),e(h)===e(S).ONLINE?(t(),l("td",Ye,v(e(P)[e(i).OPPONENT]),1)):o("",!0)])):o("",!0),r("tr",Be,[_[6]||(_[6]=r("th",null,"TOTAL",-1)),r("td",null,[f(v(e(w)[e(i).PLAYER])+" ",1),e(X)&&e(M)===1?(t(),l("span",Ve," HIGHSCORE! ")):e(X)?(t(),l("span",Ue," LEADERBOARD IMPROVEMENT! ")):e(K)?(t(),l("span",ze," PERSONAL BEST! ")):o("",!0)]),e(h)===e(S).ONLINE?(t(),l("td",je,v(e(w)[e(i).OPPONENT]),1)):o("",!0)]),e(h)===e(S).ONLINE?(t(),l("tr",Me,[e(w)[e(i).PLAYER]===e(w)[e(i).OPPONENT]?(t(),l("td",Xe,"TIE!")):(t(),l("td",Ze)),e(w)[e(i).PLAYER]>e(w)[e(i).OPPONENT]?(t(),l("td",Ke,"WINNER!")):(t(),l("td",We)),e(w)[e(i).OPPONENT]>e(w)[e(i).PLAYER]?(t(),l("td",qe,"WINNER!")):(t(),l("td",Je))])):o("",!0)],64)):o("",!0)])],2))}}),et=ie(Qe,[["__scopeId","data-v-cc10a3f9"]]),tt={class:"h-fit flex flex-row-reverse md:flex-col gap-3"},at={class:"flex flex-wrap justify-center gap-3"},lt={key:1,class:"w-full"},st={class:"flex justify-center"},ot={key:2,class:"w-full flex flex-col md:flex-row gap-3 justify-center"},nt={class:"w-full md:w-1/2 flex justify-center gap-3"},rt={class:"w-full md:w-1/2 flex justify-center gap-3"},ut={class:"mt-5 flex flex-col md:flex-row gap-3 justify-center"},it={key:3,class:"flex flex-wrap gap-3 mt-3 justify-center"},pt=oe({__name:"Yahtzee",setup(Z){const H=ce(),x=ne(),h=me(),{onlineGames:u,onlineGamesLoading:P,onlineGameId:k,onlineGameChat:D,isOnlineGameOwner:g,gameType:I,gameStatus:n,activePlayer:$,canRoll:L,canReroll:R,dices:N,finalScore:w,personalBest:Y,onlineGameOpponentName:F}=z(x),{firebaseUser:M}=z(h),{collections:X,start:K,$reset:G,fetchOnlineGames:B,createOnlineGame:W,continueOnlineGame:q,leaveOnlineGame:V,deleteOnlineGame:J,roll:Q,updateYahtzeeHighscore:ee}=x,C=j(!1),p=j(!1),te=()=>{p.value=!1,G()},ae=()=>{p.value=!1,I.value=S.SOLO,K()},le=async()=>{k.value&&await V(),G()},_=async()=>{p.value=!1,k.value&&(g.value?await J():await V()),G()};return ue(async()=>{k.value&&(await V(),G())}),(dt,a)=>(t(),E(re,{class:"!bg-cyan-800 !bg-opacity-50 my-5 !rounded-secondary",title:"Yahtzee",description:e(I)===e(S).SOLO?e(n)===e(s).HAS_NOT_STARTED?"Play solo or with a friend.":"Play solo.":"Play with a friend."},{right:m(()=>[r("div",tt,[d(O,{class:"border-none h-fit",variant:"neutral",icon:"pi pi-cog",onClick:a[0]||(a[0]=c=>C.value=!0)}),e(g)?(t(),E(O,{key:0,variant:"danger",icon:"pi pi-trash",onClick:_})):o("",!0)])]),default:m(()=>[r("div",at,[e(n)===e(s).HAS_NOT_STARTED?(t(),l(b,{key:0},[d(O,{class:"w-full md:w-1/2",onClick:ae},{default:m(()=>a[11]||(a[11]=[f(" Play Solo ")])),_:1,__:[11]}),d(O,{class:"w-full md:w-1/2",variant:"purple",onClick:a[1]||(a[1]=()=>{n.value=e(s).FINDING_OPPONENT,I.value=e(S).ONLINE})},{default:m(()=>a[12]||(a[12]=[f(" Play Online ")])),_:1,__:[12]}),e(n)===e(s).HAS_NOT_STARTED&&!p.value?(t(),E(O,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:a[2]||(a[2]=c=>p.value=!0)},{default:m(()=>a[13]||(a[13]=[f(" View Highscores ")])),_:1,__:[13]})):e(n)===e(s).HAS_NOT_STARTED?(t(),E(O,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[3]||(a[3]=c=>p.value=!1)},{default:m(()=>a[14]||(a[14]=[f(" Go Back ")])),_:1,__:[14]})):o("",!0)],64)):e(n)===e(s).FINDING_OPPONENT?(t(),l("div",lt,[d(Ae,{modelValue:e(u),"onUpdate:modelValue":a[4]||(a[4]=c=>fe(u)?u.value=c:null),collection:e(X).onlineGames,"online-games-loading":e(P),"fetch-online-games":e(B),onCreateOnlineGame:e(W),onContinueOnlineGame:e(q)},null,8,["modelValue","collection","online-games-loading","fetch-online-games","onCreateOnlineGame","onContinueOnlineGame"]),r("div",st,[d(O,{class:"w-full md:w-1/2",variant:"neutral",onClick:le},{default:m(()=>a[15]||(a[15]=[f(" Go Back ")])),_:1,__:[15]})])])):e(n)!==e(s).HAS_FINISHED?(t(),l("div",ot,[r("div",nt,[e(I)===e(S).ONLINE||e(L)||e(R)?(t(),E(O,{key:0,class:"w-full",variant:"tertiary",disabled:e($)!==e(i).PLAYER||e(n)===e(s).HAS_CHOSEN_DICES||e(N).every(c=>c.selected),onClick:e(Q)},{default:m(()=>[f(v(e($)===e(i).OPPONENT?`${e(F)}'s turn`:e(R)?"Reroll":"Roll"),1)]),_:1},8,["disabled","onClick"])):o("",!0)]),r("div",rt,[(t(!0),l(b,null,Se(e(N),c=>(t(),E(pe,{key:c.id,dice:c},null,8,["dice"]))),128))])])):o("",!0)]),p.value?(t(),E(Te,{key:0,"game-id":e(se).YAHTZEE},null,8,["game-id"])):!p.value&&e(n)!==e(s).FINDING_OPPONENT?(t(),E(et,{key:1})):o("",!0),e(I)===e(S).ONLINE&&e(n)>=e(s).HAS_STARTED?(t(),E(he,{key:2,chats:e(D)??[],onSendChat:a[5]||(a[5]=c=>D.value=[...e(D)??[],c])},null,8,["chats"])):o("",!0),r("div",ut,[e(n)>=e(s).HAS_STARTED&&e(n)<=e(s).HAS_FINISHED?(t(),l(b,{key:0},[e(I)===e(S).SOLO?(t(),E(O,{key:0,class:"w-full md:w-1/2",variant:e(n)===e(s).HAS_FINISHED?"secondary":"neutral",onClick:te},{default:m(()=>[f(v(e(n)===e(s).HAS_FINISHED?"Play Again":"Restart"),1)]),_:1},8,["variant"])):e(I)===e(S).ONLINE?(t(),l(b,{key:1},[e(g)?e(n)!==e(s).HAS_FINISHED?(t(),E(O,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:le},{default:m(()=>a[16]||(a[16]=[f(" Go Back ")])),_:1,__:[16]})):o("",!0):(t(),E(O,{key:0,class:"w-full md:w-1/2",variant:"neutral",onClick:_},{default:m(()=>[f(v(e(n)===e(s).HAS_FINISHED?"Play Again":"Go Back"),1)]),_:1}))],64)):o("",!0)],64)):o("",!0),e(n)===e(s).HAS_FINISHED&&!p.value?(t(),E(O,{key:1,class:"w-full md:w-1/2",variant:"neutral",onClick:a[6]||(a[6]=c=>p.value=!0)},{default:m(()=>a[17]||(a[17]=[f(" View Highscores ")])),_:1,__:[17]})):e(n)===e(s).HAS_FINISHED?(t(),E(O,{key:2,class:"w-full md:w-1/2",variant:"neutral",onClick:a[7]||(a[7]=c=>p.value=!1)},{default:m(()=>a[18]||(a[18]=[f(" View Your Score ")])),_:1,__:[18]})):o("",!0)]),e(n)===e(s).HAS_FINISHED?(t(),l("div",it,[e(M)?e(I)===e(S).SOLO&&e(Y)<e(w)[e(i).PLAYER]?(t(),E(O,{key:1,class:"w-full md:w-1/2",variant:"primary",onClick:a[9]||(a[9]=c=>e(ee)())},{default:m(()=>a[21]||(a[21]=[f(" Add To Leaderboard ")])),_:1,__:[21]})):o("",!0):(t(),E(re,{key:0,class:"w-full md:w-1/2 bg-primary-500 bg-opacity-50 !rounded-primary"},{default:m(()=>[a[19]||(a[19]=f(" Please ")),r("a",{class:"cursor-pointer",onClick:a[8]||(a[8]=c=>e(H).push({name:e(Ee).LOGIN,params:{redirect:JSON.stringify({name:e(Ne).GAMES_YAHTZEE})}}))}," Login "),a[20]||(a[20]=f(" to add your score to the leaderboard. "))]),_:1,__:[19,20]}))])):o("",!0),d(ye,{"game-id":e(se).YAHTZEE,"is-open":C.value,"onUpdate:isOpen":a[10]||(a[10]=c=>C.value=c)},null,8,["game-id","is-open"])]),_:1},8,["description"]))}});export{pt as default};
