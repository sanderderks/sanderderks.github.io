import{_ as he}from"./c-Dialog.vue_vue_type_script_setup_true_lang-DHrGtTix.js";import{_ as Oe}from"./c-Page.vue_vue_type_script_setup_true_lang-siWPn5ai.js";import{X as Me,Y as Ae,b as r,c as h,$ as N,r as H,J as T,e as x,d as j,u as pe,q as K,a as Z,s as D,l as Se,al as _e,am as Re,R as F,f as e,h as c,g as U,B as Ne,j as xe,C as O,i as q,G as me,z as i,_ as ue,n as X,w as V,P as J,an as oe,Q as ve,ao as je,ap as ke,t as Ge,aq as ze,ar as ce,a2 as we,U as ee,W as Fe,as as le,at as Q,D as qe,y as Ue,au as Je,af as z,ag as se,V as Pe,av as ae,aw as We,ax as Ye,ab as He,ay as Qe,ac as ne,ad as re,k as ie,ae as de,az as Xe,L as Ce,aA as Ke}from"../bundle.js";import{_ as Ze}from"./c-BackButton.vue_vue_type_script_setup_true_lang-oHqvxMiV.js";import{_ as Be,a as $e,u as et}from"./c-BlogPost.vue_vue_type_script_setup_true_lang-CSPOetA0.js";import{u as tt}from"./c-useUsers-Cf6IoDz_.js";var ot=`
    .p-card {
        background: dt('card.background');
        color: dt('card.color');
        box-shadow: dt('card.shadow');
        border-radius: dt('card.border.radius');
        display: flex;
        flex-direction: column;
    }

    .p-card-caption {
        display: flex;
        flex-direction: column;
        gap: dt('card.caption.gap');
    }

    .p-card-body {
        padding: dt('card.body.padding');
        display: flex;
        flex-direction: column;
        gap: dt('card.body.gap');
    }

    .p-card-title {
        font-size: dt('card.title.font.size');
        font-weight: dt('card.title.font.weight');
    }

    .p-card-subtitle {
        color: dt('card.subtitle.color');
    }
`,lt={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},st=Me.extend({name:"card",style:ot,classes:lt}),at={name:"BaseCard",extends:Ae,style:st,provide:function(){return{$pcCard:this,$parentInstance:this}}},Ie={name:"Card",extends:at,inheritAttrs:!1};function nt(t,g,S,v,k,a){return r(),h("div",N({class:t.cx("root")},t.ptmi("root")),[t.$slots.header?(r(),h("div",N({key:0,class:t.cx("header")},t.ptm("header")),[H(t.$slots,"header")],16)):T("",!0),x("div",N({class:t.cx("body")},t.ptm("body")),[t.$slots.title||t.$slots.subtitle?(r(),h("div",N({key:0,class:t.cx("caption")},t.ptm("caption")),[t.$slots.title?(r(),h("div",N({key:0,class:t.cx("title")},t.ptm("title")),[H(t.$slots,"title")],16)):T("",!0),t.$slots.subtitle?(r(),h("div",N({key:1,class:t.cx("subtitle")},t.ptm("subtitle")),[H(t.$slots,"subtitle")],16)):T("",!0)],16)):T("",!0),x("div",N({class:t.cx("content")},t.ptm("content")),[H(t.$slots,"content")],16),t.$slots.footer?(r(),h("div",N({key:1,class:t.cx("footer")},t.ptm("footer")),[H(t.$slots,"footer")],16)):T("",!0)],16)],16)}Ie.render=nt;const rt={key:0,class:"flex justify-center mt-5"},it={key:1,class:"flex flex-col gap-3"},dt=j({__name:"BlogDetails",emits:["createClicked","editClicked","deleteClicked"],setup(t){const g=Ne(),S=xe(),v=pe(),k=K(),a=Z(),{routeLoading:p}=D(v),{isLoggedIn:C}=D(k),{blogPosts:w,blogReactions:$,isBlogPostsFetchLoading:f}=D(a),{fetchBlogPost:y}=a,m=O(()=>g.params.postId);return Se(async()=>{var b;if($.value.unread=[],m.value)if(((b=w.value.data.single)==null?void 0:b.id)!==m.value){const l=await y(m.value);if(_e(l)&&l===Re.PERMISSION_DENIED&&!C.value){S.push({name:F.LOGIN,params:{redirect:JSON.stringify({name:F.BLOG_DETAILS,params:{postId:m.value}})}});return}}else w.value.data.single}),(b,l)=>e(f)?(r(),h("div",rt,[c(q,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:"",label:"Loading..."})])):(r(),h("div",it,[c(Ze,{"back-route":e(F).BLOG,label:"Back to other posts"},null,8,["back-route"]),e(w).data.single?(r(),U(Be,{key:0,post:e(w).data.single,onEditClicked:l[0]||(l[0]=o=>b.$emit("editClicked",e(w).data.single)),onDeleteClicked:l[1]||(l[1]=o=>b.$emit("deleteClicked",e(w).data.single))},null,8,["post"])):T("",!0)]))}}),ut={class:"flex gap-3"},ct={class:"min-h-[50vh] flex flex-col"},pt={class:"flex justify-between h-fit mt-2 gap-2"},mt={class:"flex flex-wrap gap-3"},vt={class:"relative mt-5 min-h-[20vh] max-h-screen flex flex-col justify-end"},ft={class:"relative min-h-[20vh] max-h-full flex-grow"},gt={class:"flex flex-col gap-1"},yt={class:"flex justify-center mt-5"},bt={class:"flex justify-center mt-3"},kt=j({__name:"BlogPostOverview",props:{post:{}},emits:["editClicked","deleteClicked"],setup(t){const g=t,S=pe(),v=K(),k=me(),{routeLoading:a,routeLoadingId:p}=D(S),{publicUsers:C}=D(k),{isOwner:w}=D(v),$=i(g.post.archived),f=O(()=>{var l;return(l=g.post.allowedUserIds)!=null&&l.length?C.value.filter(o=>{var s;return(s=g.post.allowedUserIds)==null?void 0:s.includes(o.id)}):[]}),y=O(()=>{const l=we(g.post.date);return g.post.dateUpdated?l+` - updated ${we(g.post.dateUpdated)}`:l}),m=O(()=>{const l=[];return g.post.datePinned&&l.push({value:"Pinned",severity:"success",rounded:!1}),g.post.locked&&l.push({value:"Locked",severity:"danger",rounded:!1,icon:"pi pi-lock"}),g.post.archived&&l.push({value:"Archived",severity:"warning",rounded:!1,icon:"pi pi-file-excel"}),l}),b=()=>{const l=document.createElement("textarea"),{protocol:o,hostname:s,port:n}=window.location,I=`${o}//${s}`+(s==="localhost"?`:${n}`:"");l.value=`${I}#${ze.BLOG.path}/${g.post.id}`,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),ce.success("Copied link!")};return(l,o)=>(r(),U(ue,{id:t.post.id,class:X([{"min-h-[50vh]":!$.value},"border-4 border-transparent","!rounded-primary",t.post.colorSecondary||t.post.colorPrimary||"bg-secondary-900",t.post.opacitySecondary||"bg-opacity-50"]),title:t.post.title,subTitle:y.value,tags:m.value,loading:t.post.loading,isCollapsed:$.value,clickable:"",route:{name:e(F).BLOG_DETAILS,params:{postId:t.post.id}}},{right:V(()=>[x("div",ut,[$.value?e(w)?(r(),U($e,{key:1,onEditClicked:o[0]||(o[0]=s=>l.$emit("editClicked")),onDeleteClicked:o[1]||(o[1]=s=>l.$emit("deleteClicked"))})):T("",!0):(r(),U(q,{key:0,class:"border-none h-fit",variant:"neutral",icon:"pi pi-copy",onClick:b}))])]),default:V(()=>{var s;return[x("div",ct,[x("div",pt,[x("div",mt,[f.value.length?(r(),h(J,{key:0},[c(e(oe),{class:"h-fit !p-0 !px-4 !py-1 !bg-red-800 !bg-opacity-50",icon:"pi pi-user",label:f.value[0].displayName,rounded:""},null,8,["label"]),f.value.length>1?(r(),U(e(oe),{key:0,class:"h-fit !p-0 !px-4 !py-1 !bg-red-800 !bg-opacity-50",icon:"pi pi-user",label:"You",rounded:""})):T("",!0),f.value.length>2?(r(),U(e(oe),{key:1,class:"h-fit !p-0 !px-4 !py-1 !bg-red-800 !bg-opacity-50",label:`${f.value.length-2} others`,rounded:""},null,8,["label"])):T("",!0)],64)):T("",!0)]),e(w)?(r(),h("div",{key:0,class:X(["flex justify-end ms-5",(s=t.post.allowedUserIds)!=null&&s.length?"flex-col md:flex-row":"flex-row"])},[c($e,{onEditClicked:o[2]||(o[2]=n=>l.$emit("editClicked")),onDeleteClicked:o[3]||(o[3]=n=>l.$emit("deleteClicked"))})],2)):T("",!0)]),x("div",vt,[o[6]||(o[6]=x("div",{class:"absolute inset-0 rounded-primary bg-gradient-to-t from-neutral-500 to-transparent"},null,-1)),x("div",ft,[c(e(Ie),{class:X(["z-10 min-h-[20vh] p-5 text-neutral-300",t.post.colorPrimary,t.post.opacityPrimary||"bg-opacity-50"])},{content:V(()=>[x("div",gt,[(r(!0),h(J,null,ve(t.post.content.filter((n,I)=>I<2),n=>(r(),U(je,{key:n.id,class:"max-h-[150px] overflow-hidden",post:t.post,block:n},null,8,["post","block"]))),128))])]),_:1},8,["class"])])]),x("div",yt,[c(q,{class:"w-full md:w-1/2",variant:"neutral",label:"Read more",loading:e(a)===e(F).BLOG_DETAILS&&e(p)===t.post.id,onClick:o[4]||(o[4]=n=>e(ke).push({name:e(F).BLOG_DETAILS,params:{postId:t.post.id}}))},null,8,["loading"])]),x("div",bt,[x("p",{class:X(t.post.reactions.length?"text-yellow-400 hover:text-yellow-500 cursor-pointer":"text-neutral-200"),onClick:o[5]||(o[5]=n=>e(ke).push({name:e(F).BLOG_DETAILS,params:{postId:t.post.id}}))},Ge(t.post.reactions.length)+" replies ",3)])])]}),_:1},8,["id","class","title","subTitle","tags","loading","isCollapsed","route"]))}}),wt={class:"w-full grid gap-4 md:gap-10 xl:gap-20"},Pt={key:2,class:"w-full flex justify-center mt-5"},Ct=j({__name:"BlogPosts",props:{single:{type:Boolean}},emits:["createClicked","editClicked","deleteClicked"],setup(t){const g=K(),S=Z(),{blogPosts:v,visibleBlogPosts:k,isBlogPostsFetchLoading:a}=D(S),{firebaseUser:p,isLoggedIn:C,isOwner:w}=D(g),{fetchBlogPosts:$}=S;et();const f=i(),y=i(),m=i(),b=async o=>{var s;v.value.visibility!==o&&(v.value.data[o].length||await $((s=p.value)==null?void 0:s.uid,{visibility:o}),v.value.visibility=o,v.value.isLastPage=!1,le(f.value))},l=async()=>{var s;const o=k.value.length;await $((s=p.value)==null?void 0:s.uid),k.value[o]&&le(y.value[o])};return Se(()=>{v.value.loadedOnce||(C.value?b("private"):v.value.visibility!=="public"&&b("public"),v.value.loadedOnce=!0)}),ee(()=>{var o;return(o=y.value)==null?void 0:o.length},()=>{var o;if((o=y.value)!=null&&o.length&&m.value){const s=k.value.find(n=>n.id===m.value);if(s){const n=k.value.indexOf(s);le(y.value[n]),m.value=void 0}}}),(o,s)=>(r(),h("div",{ref_key:"container",ref:f,class:"flex flex-col gap-5 items-center"},[e(w)?(r(),U(q,{key:0,class:"w-full md:w-1/2",variant:"tertiary",label:"New Post",onClick:s[0]||(s[0]=n=>o.$emit("createClicked"))})):T("",!0),e(C)?(r(),U(e(Fe),{key:1,class:"w-full md:w-1/2"},{default:V(()=>[c(q,{class:"w-full",variant:"secondary",outlined:e(v).visibility!=="public",loading:e(v).isLoading.public.fetch,label:"Public Posts",onClick:s[1]||(s[1]=n=>b("public"))},null,8,["outlined","loading"]),c(q,{class:"w-full",variant:"secondary",outlined:e(v).visibility!=="private",loading:e(v).isLoading.private.fetch,label:"Private Posts",onClick:s[2]||(s[2]=n=>b("private"))},null,8,["outlined","loading"])]),_:1})):T("",!0),x("div",wt,[e(k).length?(r(!0),h(J,{key:0},ve(e(k),(n,I)=>(r(),h("div",{key:n.id,ref_for:!0,ref_key:"posts",ref:y},[I===0||n.datePinned?(r(),U(Be,{key:0,post:n,onEditClicked:P=>o.$emit("editClicked",n),onDeleteClicked:P=>o.$emit("deleteClicked",n)},null,8,["post","onEditClicked","onDeleteClicked"])):(r(),U(kt,{key:1,post:n,onEditClicked:P=>o.$emit("editClicked",n),onDeleteClicked:P=>o.$emit("deleteClicked",n)},null,8,["post","onEditClicked","onDeleteClicked"]))]))),128)):e(a)?(r(),U(ue,{key:1,class:"!bg-neutral-600 !bg-opacity-40 !rounded-primary",title:"Loading..."})):(r(),U(ue,{key:2,class:"!bg-red-900 !bg-opacity-40 !rounded-primary",title:"No posts"}))]),e(v).isLastPage?T("",!0):(r(),h("div",Pt,[c(q,{class:"w-full md:w-1/2 xl:w-1/4",outlined:"",loading:e(k).length>0&&e(a),label:"Load more posts",onClick:l},null,8,["loading"])]))],512))}}),$t=j({__name:"BlogPostContentDialog",emits:["update:selected","error"],setup(t,{expose:g,emit:S}){const v=S,k=Q(),{blogPostMutation:a}=D(k),p=i(),C=i(),w=O(()=>[C.value].some(f=>!!f));return g({test:async()=>{await Promise.all([p.value.test()]),v("error",w.value)}}),(f,y)=>(r(),h(J,null,[c(qe,{ref_key:"title",ref:p,class:"w-full",name:"title",label:"Title",placeholder:"Amazing Post",modelValue:e(a).title,"onUpdate:modelValue":y[0]||(y[0]=m=>e(a).title=m),error:C.value,"onUpdate:error":y[1]||(y[1]=m=>C.value=m),rules:[e(Ue).Required],"min-length":3,"max-length":50},null,8,["modelValue","error","rules"]),c(Je,{modelValue:e(a).content,"onUpdate:modelValue":y[2]||(y[2]=m=>e(a).content=m)},null,8,["modelValue"])],64))}}),ht=j({__name:"BlogPostSettingsDialog",emits:["error"],setup(t,{expose:g,emit:S}){const v=S,k=me(),a=Q(),{blogPostMutation:p}=D(a),{allowedPublicUsers:C}=k,{mappedUsers:w}=tt(),$=i(),f=i(),y=i(),m=i(),b=O({get(){return!!p.value.datePinned},set(d){p.value.datePinned=d?new Date:null}}),l=i(),o=i(),s=i(),n=i(),I=O(()=>[l.value,o.value,s.value,n.value].some(d=>!!d)),P=i([]),E=d=>{p.value.allowedUserIds=d},L=async()=>{p.value.allowedUserIds.length&&!P.value.length&&(l.value="Invalid user ID's"),await Promise.all([f.value.test(),y.value.test(),m.value.test()]),v("error",I.value)};return ee(()=>p.value.allowedUserIds,async d=>{P.value=await C(d)},{immediate:!0}),g({test:L}),(d,u)=>(r(),h(J,null,[c(z,{ref_key:"allowedUsers",ref:$,class:"w-full md:w-1/2",name:"allowedUserIds",label:"Allowed users",placeholder:"This post is public","model-value":e(p).allowedUserIds,error:l.value,"onUpdate:error":u[0]||(u[0]=_=>l.value=_),"onUpdate:arrayValue":E,options:e(w),multiple:""},null,8,["model-value","error","options"]),c(se,{ref_key:"pinned",ref:m,class:"w-full md:w-1/2",name:"pinned",label:"Pinned",modelValue:b.value,"onUpdate:modelValue":u[1]||(u[1]=_=>b.value=_)},null,8,["modelValue"]),c(se,{ref_key:"locked",ref:f,class:"w-full md:w-1/2",name:"locked",label:"Locked for commenting",modelValue:e(p).locked,"onUpdate:modelValue":u[2]||(u[2]=_=>e(p).locked=_)},null,8,["modelValue"]),c(se,{ref_key:"archived",ref:y,class:"w-full md:w-1/2",name:"archived",label:"Archived",modelValue:e(p).archived,"onUpdate:modelValue":u[3]||(u[3]=_=>e(p).archived=_)},null,8,["modelValue"])],64))}}),St=j({__name:"BlogPostStylingDialog",emits:["error"],setup(t,{expose:g,emit:S}){const v=S,k=Q(),{blogPostMutation:a}=D(k),p=i(),C=i(),w=i(),$=i(),f=i(),y=i(),m=i(),b=i(),l=i(),o=i(),s=i(),n=i(),I=O(()=>[m.value,b.value,l.value,o.value,s.value,n.value].some(L=>!!L)),P=O(()=>Ye(Pe.find(L=>L.value===a.value.colorPrimary)));return g({test:async()=>{await Promise.all([p.value.test(),C.value.test(),w.value.test(),$.value.test(),f.value.test(),y.value.test()]),v("error",I.value)}}),(L,d)=>(r(),h(J,null,[c(z,{ref_key:"colorPrimary",ref:p,class:"w-full md:w-1/2",name:"colorPrimary",label:"Primary Style",modelValue:e(a).colorPrimary,"onUpdate:modelValue":d[0]||(d[0]=u=>e(a).colorPrimary=u),error:m.value,"onUpdate:error":d[1]||(d[1]=u=>m.value=u),options:e(Pe),rules:[e(Ue).Required]},null,8,["modelValue","error","options","rules"]),c(z,{ref_key:"opacityPrimary",ref:$,class:"w-full md:w-1/2",name:"opacityPrimary",label:"Primary Opacity",modelValue:e(a).opacityPrimary,"onUpdate:modelValue":d[2]||(d[2]=u=>e(a).opacityPrimary=u),error:o.value,"onUpdate:error":d[3]||(d[3]=u=>o.value=u),options:e(ae)},null,8,["modelValue","error","options"]),c(z,{ref_key:"colorSecondary",ref:C,class:"w-full md:w-1/2",name:"colorSecondary",label:"Secondary Style",modelValue:e(a).colorSecondary,"onUpdate:modelValue":d[4]||(d[4]=u=>e(a).colorSecondary=u),error:b.value,"onUpdate:error":d[5]||(d[5]=u=>b.value=u),options:P.value},null,8,["modelValue","error","options"]),c(z,{ref_key:"opacitySecondary",ref:f,class:"w-full md:w-1/2",name:"opacitySecondary",label:"Secondary Opacity",modelValue:e(a).opacitySecondary,"onUpdate:modelValue":d[6]||(d[6]=u=>e(a).opacitySecondary=u),error:s.value,"onUpdate:error":d[7]||(d[7]=u=>s.value=u),options:e(ae)},null,8,["modelValue","error","options"]),c(z,{ref_key:"colorTertiary",ref:w,class:"w-full md:w-1/2",name:"colorTertiary",label:"Tertiary Style",modelValue:e(a).colorTertiary,"onUpdate:modelValue":d[8]||(d[8]=u=>e(a).colorTertiary=u),error:l.value,"onUpdate:error":d[9]||(d[9]=u=>l.value=u),options:e(We)},null,8,["modelValue","error","options"]),c(z,{ref_key:"opacityTertiary",ref:y,class:"w-full md:w-1/2",name:"opacityTertiary",label:"Tertiary Opacity",modelValue:e(a).opacityTertiary,"onUpdate:modelValue":d[10]||(d[10]=u=>e(a).opacityTertiary=u),error:n.value,"onUpdate:error":d[11]||(d[11]=u=>n.value=u),options:e(ae)},null,8,["modelValue","error","options"])],64))}}),xt=j({__name:"BlogPostDialog",emits:["scroll-to-updated"],setup(t,{emit:g}){const S=g,v=K(),k=Z(),a=Q(),{firebaseUser:p}=D(v),{isBlogPostsMutationLoading:C}=D(k),{createBlogPost:w,updateBlogPost:$,deleteFilesOfBlogPost:f,toggleBlogPostVisibility:y}=k,{getBlogPostMutationContent:m,getBlogPostMutationStyling:b,getBlogPostMutationSettings:l}=a,{isOpen:o,blogPostOriginal:s,blogPostMutationId:n,blogPostMutation:I,hasBlogPostMutationContentChanges:P,hasBlogPostMutationStylingChanges:E,hasBlogPostMutationSettingsChanges:L}=D(a),d=i(),u=i(),_=i(),fe=i(),ge=i(!1),ye=i(!1),be=i(!1),Ee=O(()=>{var M,B,A,W,Y,R;return!!((B=(M=s.value)==null?void 0:M.allowedUserIds)!=null&&B.length)&&!((A=l().allowedUserIds)!=null&&A.length)||!((Y=(W=s.value)==null?void 0:W.allowedUserIds)!=null&&Y.length)&&!!((R=l().allowedUserIds)!=null&&R.length)}),Ve=O(()=>{const M=[];return P.value&&M.push("Content"),E.value&&M.push("Styling"),L.value&&M.push("Settings"),M.length?"Update "+Ce(M):void 0}),te=O(()=>Ke(s.value)),Te=async()=>{var M,B,A,W,Y;if(await Promise.all([u.value.test(),_.value.test(),fe.value.test()]),!(ge.value||ye.value||be.value))if(!s.value)await w(n.value,I.value,(M=p.value)==null?void 0:M.uid)&&(a.close(),S("scroll-to-updated",n.value));else if(Ee.value){const R=n.value;a.isOpen=!1,await y(R,Xe.convert(I.value),s.value.reactions,I.value.allowedUserIds.length?"private":"public",(B=p.value)==null?void 0:B.uid)&&(a.close(),ce.success("Successfully updated Post Visibility"),S("scroll-to-updated",R))}else{const R=n.value;let G=[];P.value&&G.push(await $(R,m(),te.value,(A=p.value)==null?void 0:A.uid)),E.value&&G.push(await $(R,b(),te.value,(W=p.value)==null?void 0:W.uid)),L.value&&(G.push(await $(R,l(),te.value,(Y=p.value)==null?void 0:Y.uid)),S("scroll-to-updated",R)),G=G.filter(Le=>typeof Le=="string"),G.length&&(ce.success(`Successfully updated Post ${Ce(G)}`),a.close())}},De=async()=>{f(I.value,s.value??void 0),a.close()};return ee(I,()=>{a.isMutationEqual()},{deep:!0}),(M,B)=>(r(),U(he,{isOpen:e(o),title:e(s)?"Update Post":"Create Post",description:e(s)?"Update this post":"Create a new post","confirm-text":e(s)?Ve.value:"Create","confirm-loading":e(C),onConfirm:Te,onCancel:De},{default:V(()=>[x("form",{ref_key:"dialog",ref:d,class:"pt-6 mb-4 xl:px-16"},[e(o)?(r(),U(e(He),{key:0,"active-index":0,onTabOpen:e(Qe)},{default:V(()=>[c(e(ne),{value:"content"},{default:V(()=>[c(e(re),null,{default:V(()=>[...B[3]||(B[3]=[ie(" Content ",-1)])]),_:1}),c(e(de),{"pt:content":"flex flex-col justify-center items-center gap-3"},{default:V(()=>[c($t,{ref_key:"content",ref:u,onError:B[0]||(B[0]=A=>ge.value=A)},null,512)]),_:1})]),_:1}),c(e(ne),{value:"styling"},{default:V(()=>[c(e(re),null,{default:V(()=>[...B[4]||(B[4]=[ie(" Styling ",-1)])]),_:1}),c(e(de),{"pt:content":"flex flex-col justify-center items-center gap-3"},{default:V(()=>[c(St,{ref_key:"styling",ref:_,onError:B[1]||(B[1]=A=>ye.value=A)},null,512)]),_:1})]),_:1}),c(e(ne),{value:"settings"},{default:V(()=>[c(e(re),null,{default:V(()=>[...B[5]||(B[5]=[ie(" Settings ",-1)])]),_:1}),c(e(de),{"pt:content":"flex flex-col justify-center items-center gap-3"},{default:V(()=>[c(ht,{ref_key:"settings",ref:fe,onError:B[2]||(B[2]=A=>be.value=A)},null,512)]),_:1})]),_:1})]),_:1},8,["onTabOpen"])):T("",!0)],512)]),_:1},8,["isOpen","title","description","confirm-text","confirm-loading"]))}}),Ut={class:"grid mt-10 md:mt-15"},Bt={class:"grid justify-center"},It={class:"text-lg md:text-xl text-white"},Et=["innerHTML"],Vt={class:"grid my-5 xl:px-20"},_t=j({__name:"Blog",setup(t){const g=xe(),S=pe(),v=me(),k=Z(),a=Q(),{menuItems:p,content:C}=D(S),{publicUser:w}=D(v),{deleteBlogPost:$}=k,f=i(null),y=i(),m=i(!1),b=i(g.currentRoute.value.params.postId),l=O(()=>{var P;return w.value?[...C.value.blogDescriptionUser.map(E=>E.replace("%USER%",w.value.displayName||"Unknown user")),...((P=p.value.find(E=>E.id==="nfNQM4SMESU2VOkJtcgY"))==null?void 0:P.description)||[]]:C.value.blogDescriptionGuest}),o=()=>{a.openWith(null)},s=P=>{a.openWith(P)},n=P=>{f.value=P,m.value=!0},I=async P=>{await $(P)&&(m.value=!1,f.value=null)};return ee(g.currentRoute,P=>{b.value=P.params.postId}),(P,E)=>(r(),U(Oe,null,{content:V(()=>[x("div",Ut,[x("div",Bt,[(r(!0),h(J,null,ve(l.value,L=>(r(),h("h1",It,[x("span",{innerHTML:L},null,8,Et)]))),256))]),x("div",Vt,[b.value?(r(),U(dt,{key:0,onEditClicked:s,onDeleteClicked:n})):(r(),U(Ct,{key:1,onCreateClicked:o,onEditClicked:s,onDeleteClicked:n})),c(xt,{onScrollToUpdated:E[0]||(E[0]=L=>y.value=L)}),f.value?(r(),U(he,{key:2,title:"Delete Post",isOpen:m.value,description:[` Are you sure you want to delete this post called ' ${f.value.title}'?`,"This cannot be undone."],"confirm-text":"Confirm","confirm-props":{variant:"danger",outlined:!0},onConfirm:E[1]||(E[1]=L=>I(f.value.id)),onCancel:E[2]||(E[2]=L=>m.value=!1)},null,8,["isOpen","description"])):T("",!0)])])]),_:1}))}});export{_t as default};
