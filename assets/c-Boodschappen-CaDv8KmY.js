import{b9 as re,bs as ue,bt as Ce,bg as ke,bh as Q,bu as $e,ax as oe,bv as xe,bw as _e,b5 as ze,be as Pe,q as Ue,bx as Le,s as H,z as q,C as M,au as A,aA as je,by as Z,d as te,v as we,U as Oe,g as j,w as d,f as e,b as V,e as g,h as a,D as W,ab as ce,J as me,i as T,ac as de,a7 as fe,a8 as ge,a9 as ve,t as z,$ as ee,aa as ye,a6 as le,ad as he,c as E,E as Te,l as qe,O as F,I as Re,_ as Ae,ai as ne,aj as U,k as L,Q as be,bz as De,n as se,bA as Ne,bB as Ee}from"../bundle.js";import{_ as pe}from"./c-Dialog.vue_vue_type_script_setup_true_lang-DhUst3eP.js";import{_ as Ie}from"./c-Page.vue_vue_type_script_setup_true_lang-C2l5ciLA.js";import{_ as J}from"./c-NumberField.vue_vue_type_script_setup_true_lang-BaJkCxK_.js";import{u as Fe,D as Me,_ as We}from"./c-useDateChart-DGSG2NvK.js";class K{id;name;size;category;isOutOfStock;isRecurring;buyLog;promotionLog;constructor({id:l,name:n,size:D,category:f,isOutOfStock:b,isRecurring:k,buyLog:w,promotionLog:C}={}){this.id=l??re(),this.name=n??"",this.size=D??{value:0,unit:""},this.category=f??null,this.isOutOfStock=b??!1,this.isRecurring=k??!0,this.buyLog=w??[],this.promotionLog=C??[]}static deserialize(l){return new K({id:l.id,name:l.name,size:l.size,category:l.category,isOutOfStock:l.isOutOfStock,isRecurring:l.isRecurring,buyLog:l.buyLog?.map(Y.deserialize)??[],promotionLog:l.promotionLog?.map(X.deserialize)??[]})}serialize(){return{id:this.id,name:this.name,size:this.size,category:this.category,isOutOfStock:this.isOutOfStock,isRecurring:this.isRecurring,buyLog:this.buyLog.map(l=>l.serialize()),promotionLog:this.promotionLog.map(l=>l.serialize())}}clone(){return new K({id:this.id,name:this.name,size:{...this.size},category:this.category?{...this.category}:null,isOutOfStock:this.isOutOfStock,isRecurring:this.isRecurring,buyLog:this.buyLog.map(l=>l.clone()),promotionLog:this.promotionLog.map(l=>l.clone())})}}class Y{date;price;quantity;constructor(l,n,D){this.date=l??new Date,this.price=n??0,this.quantity=D??1}static deserialize(l){return new Y(l.date.toDate(),l.price,l.quantity)}serialize(){return{date:ue.fromDate(this.date),price:this.price,quantity:this.quantity}}clone(){return new Y(new Date(this.date.getTime()),this.price,this.quantity)}}class X{startDate;endDate;promotion;store;constructor(l,n,D,f){this.startDate=l??new Date,this.endDate=n??new Date,this.promotion=D??"",this.store=f??null}static deserialize(l){return new X(l.startDate.toDate(),l.endDate.toDate(),l.promotion,l.store)}serialize(){return{startDate:ue.fromDate(this.startDate),endDate:ue.fromDate(this.endDate),promotion:this.promotion,store:this.store}}clone(){return new X(new Date(this.startDate.getTime()),new Date(this.endDate.getTime()),this.promotion,this.store?{...this.store}:null)}}function Ge(S){return S.map(He)}function He(S){return K.deserialize(S)}class Ke{async fetchMultiple(l){return Ce(ke(l,Q.BOODSCHAPPEN))}async create(l,n){await $e(oe(l,Q.BOODSCHAPPEN,n.id),n)}async update(l,n){await xe(oe(l,Q.BOODSCHAPPEN,n.id),{...n})}async delete(l,n){await _e(oe(l,Q.BOODSCHAPPEN,n))}}const ie=new Ke,ae=ze("boodschappenStore",()=>{const S=Pe(),l=Ue(),n=Le(),{firebaseUser:D}=H(l),{debug:f}=H(n),b=q([]),k=q(!1),w=q(!1),C=q(null),_=M(()=>b.value.reduce((m,B)=>{const u=B.category;return u&&!m.some(i=>i.id===u.id)&&m.push(u),m},[])),s=M(()=>[{value:null,label:"Geen categorie"},..._.value.map(m=>({value:m,label:m.label}))]),t=M(()=>{const m=new Map;for(const B of b.value)if(B.promotionLog)for(const u of B.promotionLog)u.store&&m.set(u.store.id,u.store);return Array.from(m.values())}),r=M(()=>[{value:null,label:"Geen winkel"},...t.value.map(m=>({value:m,label:m.label}))]),y=()=>{C.value?.(),C.value=null,b.value=[]},h=()=>{k.value=!0,C.value?.(),C.value=je(ke(S,Q.BOODSCHAPPEN),m=>{const B=m.docs.map(u=>({id:u.id,...u.data()}));b.value=Ge(B),k.value=!1},m=>{k.value=!1,A.firebaseError(f.value,m)})};return{boodschappen:b,isFetchLoading:k,isMutationLoading:w,categories:_,categoryOptions:s,stores:t,storeOptions:r,$reset:y,fetchBoodschappen:async()=>{if(!D.value){A.error("You must be logged in to fetch products."),C.value?.(),C.value=null;return}h()},createBoodschap:async m=>{if(!D.value){A.error("You must be logged in to create products.");return}try{w.value=!0,await ie.create(S,m.serialize()),A.success("Successfully created product")}catch(B){A.firebaseError(f.value,B)}finally{w.value=!1}},updateBoodschap:async m=>{if(!D.value){A.error("You must be logged in to update products.");return}try{w.value=!0,await ie.update(S,m.serialize()),A.success("Successfully updated product")}catch(B){A.firebaseError(f.value,B)}finally{w.value=!1}},deleteBoodschap:async m=>{if(!D.value){A.error("You must be logged in to delete products.");return}try{w.value=!0,b.value.find(u=>u.id===m)&&(await ie.delete(S,m),A.success("Successfully deleted product"))}catch(B){A.firebaseError(f.value,B)}finally{w.value=!1}}}}),Ye=()=>{const S=ae(),{boodschappen:l}=H(S),n=M(()=>[...l.value].sort((s,t)=>{const r=!!s.isOutOfStock,y=!!t.isOutOfStock;if(r&&!y)return-1;if(!r&&y)return 1;const h=w(s),P=w(t);return h===null&&P===null?0:h===null?1:P===null?-1:h.getTime()-P.getTime()})),D=M(()=>{const s=new Date,t=new Date(s.getTime()+14*Z);return n.value.filter(r=>{if(r.isOutOfStock)return!0;const y=w(r);return y!==null&&y.getTime()>=s.getTime()&&y.getTime()<=t.getTime()})}),f=M(()=>{const s=new Date(new Date().getTime()+14*Z);return n.value.filter(t=>{const r=w(t);return!r||r.getTime()>s.getTime()})}),b=s=>[...s.buyLog].filter(t=>Number(t.quantity)>0&&!Number.isNaN(t.date.getTime())).sort((t,r)=>t.date.getTime()-r.date.getTime()),k=s=>b(s).at(-1)?.date??null,w=(s,t=new Date)=>{const r=b(s),y=s.size.value;if(s.isRecurring){if(y<=0)return null;if(r.length<2)return null}else return null;let h=0,P=0;for(let i=0;i<r.length-1;i++){const o=r[i],v=(r[i+1].date.getTime()-o.date.getTime())/Z;o.quantity<=0||v<=0||(h+=o.quantity*y,P+=v)}if(P<=0||h<=0)return null;const N=h/P;if(N<=0)return null;const R=r.at(-1);if(!R)return null;const I=R.quantity;if(I<=0)return null;const B=I*y/N;if(B<=0)return null;const u=new Date(R.date.getTime()+B*Z);return u.getTime()<t.getTime()?t:u};return{sortedBoodschappen:n,shortTermGroceries:D,longTermGroceries:f,getLatestPurchaseDate:k,getProjectedOutOfStockDate:w,getPricePerUnit:s=>{const t=b(s).at(-1);return!t||t.price<=0||t.quantity<=0?null:t.price/t.quantity},getPriceIncreasePercentage:s=>{const t=b(s);if(t.length<2)return 0;const r=t.at(-1),y=t.at(-2);return r.price<=0||r.quantity<=0||y.price<=0||y.quantity<=0?0:(r.price/r.quantity-y.price/y.quantity)/(y.price/y.quantity)*100}}},Qe={class:"flex flex-col gap-3 w-full md:w-1/2 place-self-center"},Je={class:"flex gap-3"},Xe={class:"w-full flex gap-3"},Ze={class:"flex gap-5"},et={class:"flex flex-col gap-3"},tt={class:"flex gap-5"},at={class:"flex flex-col gap-3"},ot={class:"flex gap-3"},lt={key:1,class:"flex gap-3"},nt=te({__name:"BoodschapEditDialog",props:{isOpen:{type:Boolean},selectedBoodschap:{}},emits:["close"],setup(S,{emit:l}){const n=S,D=l,f=ae(),{categories:b,categoryOptions:k,storeOptions:w,isMutationLoading:C}=H(f),_=q(!1),s=q(!1),t=we(r());function r(){const u=n.selectedBoodschap?.clone()??new K;return{name:u.name,category:b.value.find(i=>i.id===u.category?.id)??null,size:u.size,isOutOfStock:u.isOutOfStock,isRecurring:u.isRecurring,buyLog:u.buyLog,promotionLog:u.promotionLog}}async function y(){const u=n.selectedBoodschap?n.selectedBoodschap:new K;Object.assign(u,t),n.selectedBoodschap?await f.updateBoodschap(u):await f.createBoodschap(u),D("close")}function h(){D("close")}function P(){_.value=!0,t.category={id:re(),label:""}}function N(){_.value=!1,t.category=null}function R(){t.buyLog.push(new Y)}function I(){t.promotionLog.push(new X)}function m(u){s.value=!0;const i={id:re(),label:"",abbreviation:""};u.store=i}function B(u){s.value=!1,u.store=null}return Oe(()=>n.isOpen,u=>{u?Object.assign(t,r()):(_.value=!1,s.value=!1)}),(u,i)=>(V(),j(pe,{"is-open":S.isOpen,title:n.selectedBoodschap?`Bewerk ${n.selectedBoodschap.name}`:"Product toevoegen",description:"","cancel-text":"Annuleren","confirm-text":n.selectedBoodschap?"Bijwerken":"Toevoegen","confirm-loading":e(C),onConfirm:y,onCancel:h},{default:d(()=>[g("div",Qe,[a(W,{name:"name",label:"Naam",modelValue:t.name,"onUpdate:modelValue":i[0]||(i[0]=o=>t.name=o)},null,8,["modelValue"]),g("div",Je,[_.value?t.category?(V(),j(W,{key:1,class:"w-full",name:"category",label:"Categorie",modelValue:t.category.label,"onUpdate:modelValue":i[2]||(i[2]=o=>t.category.label=o)},null,8,["modelValue"])):me("",!0):(V(),j(ce,{key:0,class:"w-full",name:"category",label:"Categorie",modelValue:t.category,"onUpdate:modelValue":i[1]||(i[1]=o=>t.category=o),options:e(k)},null,8,["modelValue","options"])),_.value?(V(),j(T,{key:3,class:"h-fit place-self-end",icon:"pi pi-times","icon-only":"",variant:"neutral",onClick:N})):(V(),j(T,{key:2,class:"h-fit place-self-end",icon:"pi pi-plus","icon-only":"",variant:"green",onClick:P}))]),g("div",Xe,[a(J,{class:"w-full",name:"sizeValue",label:"Formaat",modelValue:t.size.value,"onUpdate:modelValue":i[3]||(i[3]=o=>t.size.value=o)},null,8,["modelValue"]),a(W,{class:"w-full",name:"sizeUnit",label:"Eenheid",modelValue:t.size.unit,"onUpdate:modelValue":i[4]||(i[4]=o=>t.size.unit=o)},null,8,["modelValue"])]),a(de,{name:"isOutOfStock",label:"Voorraad leeg",modelValue:t.isOutOfStock,"onUpdate:modelValue":i[5]||(i[5]=o=>t.isOutOfStock=o)},null,8,["modelValue"]),a(de,{name:"isRecurring",label:"Terugkerend",modelValue:t.isRecurring,"onUpdate:modelValue":i[6]||(i[6]=o=>t.isRecurring=o)},null,8,["modelValue"]),i[11]||(i[11]=g("b",null,"Logboek",-1)),a(e(he),{ref:"draggable",class:"flex flex-col gap-3",modelValue:t.buyLog,"onUpdate:modelValue":i[7]||(i[7]=o=>t.buyLog=o),itemKey:o=>o.date.toString(),handle:".drag-handle"},{item:d(({element:o,index:x})=>[a(e(fe),null,{default:d(()=>[a(e(ge),{value:"0"},{default:d(()=>[a(e(ve),{class:"drag-handle"},{default:d(()=>[g("div",Ze,[i[9]||(i[9]=g("i",{class:"pi pi-arrows-v place-self-center hover:cursor-pointer"},null,-1)),g("p",null,z(e(ee)(o.date)),1)])]),_:2},1024),a(e(ye),null,{default:d(()=>[g("div",et,[a(le,{name:`buylog-date-${x}`,label:"Datum",modelValue:o.date,"onUpdate:modelValue":v=>o.date=v,"without-time":""},null,8,["name","modelValue","onUpdate:modelValue"]),a(J,{name:`buylog-quantity-${x}`,label:"Aantal",modelValue:o.quantity,"onUpdate:modelValue":v=>o.quantity=v},null,8,["name","modelValue","onUpdate:modelValue"]),a(J,{name:`buylog-price-${x}`,label:"Prijs",modelValue:o.price,"onUpdate:modelValue":v=>o.price=v},null,8,["name","modelValue","onUpdate:modelValue"]),a(T,{variant:"danger",outlined:"",label:"Delete",onClick:v=>t.buyLog.splice(x,1)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","itemKey"]),a(T,{icon:"pi pi-plus","icon-only":"",variant:"green",onClick:R}),i[12]||(i[12]=g("b",null,"Promoties",-1)),a(e(he),{ref:"draggable",class:"flex flex-col gap-3",modelValue:t.promotionLog,"onUpdate:modelValue":i[8]||(i[8]=o=>t.promotionLog=o),itemKey:o=>`${o.startDate.toString()}-${o.endDate.toString()}`,handle:".drag-handle"},{item:d(({element:o,index:x})=>[a(e(fe),null,{default:d(()=>[a(e(ge),{value:"0"},{default:d(()=>[a(e(ve),{class:"drag-handle"},{default:d(()=>[g("div",tt,[i[10]||(i[10]=g("i",{class:"pi pi-arrows-v place-self-center hover:cursor-pointer"},null,-1)),g("p",null,z(e(ee)(o.startDate))+" - "+z(e(ee)(o.endDate)),1)])]),_:2},1024),a(e(ye),null,{default:d(()=>[g("div",at,[g("div",ot,[s.value?o.store?(V(),E("div",lt,[a(W,{class:"w-3/4",name:`promotionlog-store-${x}`,label:"Winkel",modelValue:o.store.label,"onUpdate:modelValue":v=>o.store.label=v},null,8,["name","modelValue","onUpdate:modelValue"]),a(W,{class:"w-1/4",name:`promotionlog-store-${x}`,label:"Afkorting",modelValue:o.store.abbreviation,"onUpdate:modelValue":v=>o.store.abbreviation=v},null,8,["name","modelValue","onUpdate:modelValue"])])):me("",!0):(V(),j(ce,{key:0,class:"w-full",name:`promotionlog-store-${x}`,label:"Winkel",modelValue:o.store,"onUpdate:modelValue":v=>o.store=v,options:e(w)},null,8,["name","modelValue","onUpdate:modelValue","options"])),s.value?(V(),j(T,{key:3,class:"h-fit place-self-end",icon:"pi pi-times","icon-only":"",variant:"neutral",onClick:v=>B(o)},null,8,["onClick"])):(V(),j(T,{key:2,class:"h-fit place-self-end",icon:"pi pi-plus","icon-only":"",variant:"green",onClick:v=>m(o)},null,8,["onClick"]))]),a(le,{name:`promotionlog-start-date-${x}`,label:"Startdatum",modelValue:o.startDate,"onUpdate:modelValue":v=>o.startDate=v,"without-time":""},null,8,["name","modelValue","onUpdate:modelValue"]),a(le,{name:`promotionlog-end-date-${x}`,label:"Einddatum",modelValue:o.endDate,"onUpdate:modelValue":v=>o.endDate=v,"without-time":""},null,8,["name","modelValue","onUpdate:modelValue"]),a(W,{name:`promotionlog-promotion-${x}`,label:"Promotie",modelValue:o.promotion,"onUpdate:modelValue":v=>o.promotion=v},null,8,["name","modelValue","onUpdate:modelValue"]),a(T,{variant:"danger",outlined:"",label:"Delete",onClick:v=>t.promotionLog.splice(x,1)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","itemKey"]),a(T,{icon:"pi pi-plus","icon-only":"",variant:"green",onClick:I})])]),_:1},8,["is-open","title","confirm-text","confirm-loading"]))}}),st={class:"flex flex-col gap-3 w-full md:w-1/2 place-self-center"},it=te({__name:"BuyLogAddDialog",props:{isOpen:{type:Boolean},selectedBoodschap:{}},emits:["close"],setup(S,{emit:l}){const n=S,D=l,f=ae(),{isMutationLoading:b}=H(f),k=we(w());function w(){const s=n.selectedBoodschap?.buyLog.length?n.selectedBoodschap.buyLog[n.selectedBoodschap.buyLog.length-1]:null;return{quantity:s?s.quantity:1,price:s?s.price:0}}async function C(){if(n.selectedBoodschap){const s=n.selectedBoodschap.clone();s.buyLog.push(new Y(new Date,k.quantity,k.price)),s.isOutOfStock=!1,await f.updateBoodschap(s)}D("close")}async function _(){if(n.selectedBoodschap){const s=n.selectedBoodschap.clone();s.isOutOfStock=!1,await f.updateBoodschap(s)}D("close")}return Oe(()=>n.isOpen,s=>{s&&Object.assign(k,w())}),(s,t)=>(V(),j(pe,{"is-open":S.isOpen,title:n.selectedBoodschap?"Aankoop toevoegen":"Geen product geselecteerd",description:n.selectedBoodschap?`Voeg een aankoop toe voor ${n.selectedBoodschap.name} (${n.selectedBoodschap.size.value} ${n.selectedBoodschap.size.unit})`:"Selecteer een product om een aankoop toe te voegen","cancel-text":"Overslaan","confirm-text":n.selectedBoodschap?"Toevoegen":"Annuleren","confirm-loading":e(b),onConfirm:C,onCancel:_},{default:d(()=>[g("div",st,[a(J,{name:"buylog-quantity",label:"Aantal",modelValue:k.quantity,"onUpdate:modelValue":t[0]||(t[0]=r=>k.quantity=r)},null,8,["modelValue"]),a(J,{name:"buylog-price",label:"Prijs",modelValue:k.price,"onUpdate:modelValue":t[1]||(t[1]=r=>k.price=r)},null,8,["modelValue"])])]),_:1},8,["is-open","title","description","confirm-text","confirm-loading"]))}}),rt=te({__name:"ProductPriceChart",props:{product:{}},setup(S){const l=S,n=M(()=>l.product.buyLog.map(b=>({date:b.date,value:b.price/b.quantity}))),{headers:D,filteredData:f}=Fe(n,Me.MONTHS);return(b,k)=>(V(),j(We,{headers:e(D),datasets:[{label:"Prijsverloop",fill:!1,borderColor:"orange",yAxisID:"y",tension:.4,data:e(f),spanGaps:!0}]},null,8,["headers","datasets"]))}}),ut={class:"text-xl mt-10 mb-3 font-bold"},ct={class:"flex flex-wrap gap-x-2 gap-y-1"},dt={class:"text-xl mt-10 mb-3 font-bold"},pt={class:"flex flex-wrap gap-x-2"},mt={class:"flex justify-end"},ft={class:"flex gap-3 place-self-end"},Dt=te({__name:"Boodschappen",setup(S){const l=ae(),{categoryOptions:n,isFetchLoading:D,isMutationLoading:f}=H(l),b=Te(Re),{sortedBoodschappen:k,shortTermGroceries:w,getLatestPurchaseDate:C,getPricePerUnit:_,getPriceIncreasePercentage:s,getProjectedOutOfStockDate:t}=Ye(),r=b.greaterOrEqual("md"),y=q([]),h=q(null),P=q({name:{value:null,matchMode:"startsWith"},"category.label":{value:null,matchMode:"startsWith"}}),N=q(!1),R=q(!1),I=q(!1);function m($){if($.isOutOfStock)return"0 dagen";{const O=t($);if(O){const c=Ne(O);return`${c} dag${c!==1?"en":""}`}else return"Onbekend"}}function B($){const O=new Date;return $.promotionLog.filter(p=>Ee(O,p.startDate,p.endDate)).map(p=>`${p.store?.abbreviation??""} ${p.promotion}`)}async function u($){if($.isOutOfStock)h.value=$,I.value=!0;else{const O=$.clone();O.isOutOfStock=!$.isOutOfStock,await l.updateBoodschap(O)}}function i($){y.value=[$.data]}function o(){h.value=null,R.value=!0}function x($){h.value=$,R.value=!0}function v($){h.value=$,N.value=!0}function Ve(){h.value=null,R.value=!1}function Be(){h.value=null,I.value=!1}async function Se(){h.value&&await l.deleteBoodschap(h.value.id),N.value=!1,h.value=null}return qe(()=>{l.fetchBoodschappen()}),($,O)=>(V(),E(F,null,[a(Ie,null,{content:d(()=>[a(Ae,{class:"!bg-blue-500 !bg-opacity-35 my-5 lg:px-32",title:"Sander's Boodschappentool",description:"Nu zul je nooit meer iets vergeten in de supermarkt!","description-props":{class:"text-white mb-5"}},{default:d(()=>[O[5]||(O[5]=g("ol",{class:"ms-3 list-decimal list-inside"},[g("li",null,"Voeg een product toe"),g("li",null,"Registreer wanneer je iets hebt gekocht"),g("li",null,"Weet automatisch wanneer je voorraad bijna op is!")],-1)),g("h3",ut,"Mijn boodschappenlijstje ("+z(e(w).length)+")",1),O[6]||(O[6]=g("p",{class:"mb-3"},"Producten die bijna op zijn in één overzicht.",-1)),a(e(ne),{value:e(w),tableStyle:e(r)?"min-width: 40rem":void 0,loading:e(D),size:e(r)?void 0:"small"},{empty:d(()=>[...O[3]||(O[3]=[L(" Er zijn nog geen producten gevonden. ",-1)])]),default:d(()=>[a(e(U),{field:"name",header:"Naam"},{body:d(({data:c})=>[g("span",ct,[L(z(c.name)+" ",1),(V(!0),E(F,null,be(B(c),p=>(V(),j(e(De),{key:p,value:p,class:"!p-1",severity:"success"},null,8,["value"]))),128))])]),_:1}),a(e(U),{header:"Voorraad aanvullen over"},{body:d(({data:c})=>[c.isRecurring?(V(),E(F,{key:0},[L(z(m(c)),1)],64)):(V(),E(F,{key:1},[L(" Niet terugkerend ")],64))]),_:1}),a(e(U),{header:"Voorraad leeg"},{body:d(({data:c})=>[a(de,{name:`outofstock-${c.id}`,"model-value":c.isOutOfStock,disabled:e(f),onClick:p=>u(c)},null,8,["name","model-value","disabled","onClick"])]),_:1})]),_:1},8,["value","tableStyle","loading","size"]),g("h3",dt," Alle producten ("+z(e(k).length)+") ",1),a(e(ne),{value:e(k),expandedRows:y.value,"onUpdate:expandedRows":O[0]||(O[0]=c=>y.value=c),filters:P.value,"onUpdate:filters":O[1]||(O[1]=c=>P.value=c),tableStyle:e(r)?"min-width: 40rem":void 0,loading:e(D),size:e(r)?void 0:"small",filterDisplay:e(k).length>1?"row":void 0,onRowExpand:i},{empty:d(()=>[...O[4]||(O[4]=[L(" Er zijn nog geen producten gevonden. ",-1)])]),expansion:d(({data:c})=>[a(e(ne),{value:[c],size:e(r)?void 0:"small"},{default:d(()=>[a(e(U),{class:"!border-0",field:"size.value",header:"Formaat"},{body:d(({data:p})=>[L(z(p.size.value)+" "+z(p.size.unit),1)]),_:2},1024),a(e(U),{class:"!border-0",header:"Laatste aankoop"},{body:d(({data:p})=>[e(C)(p)?(V(),E(F,{key:1},[L(z(e(ee)(e(C)(p))),1)],64)):(V(),E(F,{key:0},[L(" Nog niet gekocht ")],64))]),_:2},1024),a(e(U),{class:"!border-0",header:"Prijs"},{body:d(({data:p})=>[L(z(e(_)(p)?`€${e(_)(p).toFixed(2)}`:""),1)]),_:2},1024),a(e(U),{class:"!border-0",header:"Prijsstijging"},{body:d(({data:p})=>[g("span",{class:se(e(s)(p)>0?"text-red-500":e(s)(p)<0?"text-green-500":"")},z(e(s)(p)?`${e(s)(p).toFixed(2)}%`:""),3)]),_:2},1024)]),_:2},1032,["value","size"]),a(rt,{class:se(e(r)?"max-h-[50vh]":"max-w-fit"),product:c},null,8,["class","product"])]),default:d(()=>[a(e(U),{class:se({"w-[5rem]":e(r)}),expander:""},null,8,["class"]),a(e(U),{field:"name",header:"Naam"},{filter:d(({filterModel:c,filterCallback:p})=>[a(W,{name:"nameFilter",modelValue:c.value,"onUpdate:modelValue":G=>c.value=G,placeholder:"Filter...",style:{"min-width":"5rem"},onInput:p},null,8,["modelValue","onUpdate:modelValue","onInput"])]),body:d(({data:c})=>[g("span",pt,[L(z(c.name)+" ",1),(V(!0),E(F,null,be(B(c),p=>(V(),j(e(De),{key:p,value:p,class:"!p-1",severity:"success"},null,8,["value"]))),128))])]),_:1}),a(e(U),{field:"category.label",header:"Categorie",showFilterMenu:!1},{filter:d(({filterModel:c,filterCallback:p})=>[a(ce,{name:"categoryFilter",modelValue:c.value,"onUpdate:modelValue":[G=>c.value=G,p],options:e(n).map(G=>({...G,value:G.value?.label??null})),style:{"min-width":"5rem"}},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),a(e(U),{header:"Voorraad aanvullen over"},{body:d(({data:c})=>[c.isRecurring?(V(),E(F,{key:0},[L(z(m(c)),1)],64)):(V(),E(F,{key:1},[L(" Niet terugkerend ")],64))]),_:1}),a(e(U),null,{filter:d(()=>[g("div",mt,[a(T,{class:"w-fit place-self-end",icon:"pi pi-plus","icon-only":"",variant:"green",loading:e(f),onClick:o},null,8,["loading"])])]),body:d(({data:c})=>[g("div",ft,[a(T,{icon:"pi pi-cog","icon-only":"",variant:"neutral",loading:e(f),onClick:p=>x(c)},null,8,["loading","onClick"]),a(T,{icon:"pi pi-trash","icon-only":"",variant:"danger",loading:e(f),onClick:p=>v(c)},null,8,["loading","onClick"])])]),_:1})]),_:1},8,["value","expandedRows","filters","tableStyle","loading","size","filterDisplay"]),a(T,{class:"w-fit place-self-center mt-4",icon:"pi pi-plus","icon-only":"",variant:"green",loading:e(f),onClick:o},null,8,["loading"])]),_:1})]),_:1}),a(nt,{"is-open":R.value,selectedBoodschap:h.value,onClose:Ve},null,8,["is-open","selectedBoodschap"]),a(it,{"is-open":I.value,"selected-boodschap":h.value,onClose:Be},null,8,["is-open","selected-boodschap"]),a(pe,{title:"Product verwijderen","is-open":N.value,description:[h.value?`Weet je zeker dat je het product '${h.value.name}' wilt verwijderen?`:"","Dit kan niet ongedaan worden."],"cancel-text":"Annuleren","confirm-text":"Bevestigen","confirm-props":{variant:"danger",outlined:!0},"confirm-loading":e(f),onConfirm:Se,onCancel:O[2]||(O[2]=c=>N.value=!1)},null,8,["is-open","description","confirm-loading"])],64))}});export{Dt as default};
